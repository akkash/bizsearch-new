var wP=Object.defineProperty;var jP=(n,t,r)=>t in n?wP(n,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):n[t]=r;var nf=(n,t,r)=>jP(n,typeof t!="symbol"?t+"":t,r);function Iw(n,t){for(var r=0;r<t.length;r++){const i=t[r];if(typeof i!="string"&&!Array.isArray(i)){for(const o in i)if(o!=="default"&&!(o in n)){const l=Object.getOwnPropertyDescriptor(i,o);l&&Object.defineProperty(n,o,l.get?l:{enumerable:!0,get:()=>i[o]})}}}return Object.freeze(Object.defineProperty(n,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))i(o);new MutationObserver(o=>{for(const l of o)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&i(a)}).observe(document,{childList:!0,subtree:!0});function r(o){const l={};return o.integrity&&(l.integrity=o.integrity),o.referrerPolicy&&(l.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?l.credentials="include":o.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function i(o){if(o.ep)return;o.ep=!0;const l=r(o);fetch(o.href,l)}})();var eZ=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Lb(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}function NP(n){if(Object.prototype.hasOwnProperty.call(n,"__esModule"))return n;var t=n.default;if(typeof t=="function"){var r=function i(){return this instanceof i?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};r.prototype=t.prototype}else r={};return Object.defineProperty(r,"__esModule",{value:!0}),Object.keys(n).forEach(function(i){var o=Object.getOwnPropertyDescriptor(n,i);Object.defineProperty(r,i,o.get?o:{enumerable:!0,get:function(){return n[i]}})}),r}var D_={exports:{}},px={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var _5;function SP(){if(_5)return px;_5=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function r(i,o,l){var a=null;if(l!==void 0&&(a=""+l),o.key!==void 0&&(a=""+o.key),"key"in o){l={};for(var p in o)p!=="key"&&(l[p]=o[p])}else l=o;return o=l.ref,{$$typeof:n,type:i,key:a,ref:o!==void 0?o:null,props:l}}return px.Fragment=t,px.jsx=r,px.jsxs=r,px}var w5;function AP(){return w5||(w5=1,D_.exports=SP()),D_.exports}var e=AP(),O_={exports:{}},ai={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var j5;function CP(){if(j5)return ai;j5=1;var n=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),r=Symbol.for("react.fragment"),i=Symbol.for("react.strict_mode"),o=Symbol.for("react.profiler"),l=Symbol.for("react.consumer"),a=Symbol.for("react.context"),p=Symbol.for("react.forward_ref"),g=Symbol.for("react.suspense"),w=Symbol.for("react.memo"),j=Symbol.for("react.lazy"),S=Symbol.for("react.activity"),T=Symbol.iterator;function E(Re){return Re===null||typeof Re!="object"?null:(Re=T&&Re[T]||Re["@@iterator"],typeof Re=="function"?Re:null)}var O={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},R=Object.assign,F={};function B(Re,te,ue){this.props=Re,this.context=te,this.refs=F,this.updater=ue||O}B.prototype.isReactComponent={},B.prototype.setState=function(Re,te){if(typeof Re!="object"&&typeof Re!="function"&&Re!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,Re,te,"setState")},B.prototype.forceUpdate=function(Re){this.updater.enqueueForceUpdate(this,Re,"forceUpdate")};function G(){}G.prototype=B.prototype;function z(Re,te,ue){this.props=Re,this.context=te,this.refs=F,this.updater=ue||O}var ee=z.prototype=new G;ee.constructor=z,R(ee,B.prototype),ee.isPureReactComponent=!0;var ie=Array.isArray;function ge(){}var K={H:null,A:null,T:null,S:null},J=Object.prototype.hasOwnProperty;function Se(Re,te,ue){var Ne=ue.ref;return{$$typeof:n,type:Re,key:te,ref:Ne!==void 0?Ne:null,props:ue}}function _e(Re,te){return Se(Re.type,te,Re.props)}function re(Re){return typeof Re=="object"&&Re!==null&&Re.$$typeof===n}function ce(Re){var te={"=":"=0",":":"=2"};return"$"+Re.replace(/[=:]/g,function(ue){return te[ue]})}var fe=/\/+/g;function ye(Re,te){return typeof Re=="object"&&Re!==null&&Re.key!=null?ce(""+Re.key):te.toString(36)}function Fe(Re){switch(Re.status){case"fulfilled":return Re.value;case"rejected":throw Re.reason;default:switch(typeof Re.status=="string"?Re.then(ge,ge):(Re.status="pending",Re.then(function(te){Re.status==="pending"&&(Re.status="fulfilled",Re.value=te)},function(te){Re.status==="pending"&&(Re.status="rejected",Re.reason=te)})),Re.status){case"fulfilled":return Re.value;case"rejected":throw Re.reason}}throw Re}function Q(Re,te,ue,Ne,Me){var We=typeof Re;(We==="undefined"||We==="boolean")&&(Re=null);var Ve=!1;if(Re===null)Ve=!0;else switch(We){case"bigint":case"string":case"number":Ve=!0;break;case"object":switch(Re.$$typeof){case n:case t:Ve=!0;break;case j:return Ve=Re._init,Q(Ve(Re._payload),te,ue,Ne,Me)}}if(Ve)return Me=Me(Re),Ve=Ne===""?"."+ye(Re,0):Ne,ie(Me)?(ue="",Ve!=null&&(ue=Ve.replace(fe,"$&/")+"/"),Q(Me,te,ue,"",function(St){return St})):Me!=null&&(re(Me)&&(Me=_e(Me,ue+(Me.key==null||Re&&Re.key===Me.key?"":(""+Me.key).replace(fe,"$&/")+"/")+Ve)),te.push(Me)),1;Ve=0;var tt=Ne===""?".":Ne+":";if(ie(Re))for(var Qe=0;Qe<Re.length;Qe++)Ne=Re[Qe],We=tt+ye(Ne,Qe),Ve+=Q(Ne,te,ue,We,Me);else if(Qe=E(Re),typeof Qe=="function")for(Re=Qe.call(Re),Qe=0;!(Ne=Re.next()).done;)Ne=Ne.value,We=tt+ye(Ne,Qe++),Ve+=Q(Ne,te,ue,We,Me);else if(We==="object"){if(typeof Re.then=="function")return Q(Fe(Re),te,ue,Ne,Me);throw te=String(Re),Error("Objects are not valid as a React child (found: "+(te==="[object Object]"?"object with keys {"+Object.keys(Re).join(", ")+"}":te)+"). If you meant to render a collection of children, use an array instead.")}return Ve}function pe(Re,te,ue){if(Re==null)return Re;var Ne=[],Me=0;return Q(Re,Ne,"","",function(We){return te.call(ue,We,Me++)}),Ne}function me(Re){if(Re._status===-1){var te=Re._result;te=te(),te.then(function(ue){(Re._status===0||Re._status===-1)&&(Re._status=1,Re._result=ue)},function(ue){(Re._status===0||Re._status===-1)&&(Re._status=2,Re._result=ue)}),Re._status===-1&&(Re._status=0,Re._result=te)}if(Re._status===1)return Re._result.default;throw Re._result}var Ue=typeof reportError=="function"?reportError:function(Re){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var te=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof Re=="object"&&Re!==null&&typeof Re.message=="string"?String(Re.message):String(Re),error:Re});if(!window.dispatchEvent(te))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",Re);return}console.error(Re)},Ke={map:pe,forEach:function(Re,te,ue){pe(Re,function(){te.apply(this,arguments)},ue)},count:function(Re){var te=0;return pe(Re,function(){te++}),te},toArray:function(Re){return pe(Re,function(te){return te})||[]},only:function(Re){if(!re(Re))throw Error("React.Children.only expected to receive a single React element child.");return Re}};return ai.Activity=S,ai.Children=Ke,ai.Component=B,ai.Fragment=r,ai.Profiler=o,ai.PureComponent=z,ai.StrictMode=i,ai.Suspense=g,ai.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=K,ai.__COMPILER_RUNTIME={__proto__:null,c:function(Re){return K.H.useMemoCache(Re)}},ai.cache=function(Re){return function(){return Re.apply(null,arguments)}},ai.cacheSignal=function(){return null},ai.cloneElement=function(Re,te,ue){if(Re==null)throw Error("The argument must be a React element, but you passed "+Re+".");var Ne=R({},Re.props),Me=Re.key;if(te!=null)for(We in te.key!==void 0&&(Me=""+te.key),te)!J.call(te,We)||We==="key"||We==="__self"||We==="__source"||We==="ref"&&te.ref===void 0||(Ne[We]=te[We]);var We=arguments.length-2;if(We===1)Ne.children=ue;else if(1<We){for(var Ve=Array(We),tt=0;tt<We;tt++)Ve[tt]=arguments[tt+2];Ne.children=Ve}return Se(Re.type,Me,Ne)},ai.createContext=function(Re){return Re={$$typeof:a,_currentValue:Re,_currentValue2:Re,_threadCount:0,Provider:null,Consumer:null},Re.Provider=Re,Re.Consumer={$$typeof:l,_context:Re},Re},ai.createElement=function(Re,te,ue){var Ne,Me={},We=null;if(te!=null)for(Ne in te.key!==void 0&&(We=""+te.key),te)J.call(te,Ne)&&Ne!=="key"&&Ne!=="__self"&&Ne!=="__source"&&(Me[Ne]=te[Ne]);var Ve=arguments.length-2;if(Ve===1)Me.children=ue;else if(1<Ve){for(var tt=Array(Ve),Qe=0;Qe<Ve;Qe++)tt[Qe]=arguments[Qe+2];Me.children=tt}if(Re&&Re.defaultProps)for(Ne in Ve=Re.defaultProps,Ve)Me[Ne]===void 0&&(Me[Ne]=Ve[Ne]);return Se(Re,We,Me)},ai.createRef=function(){return{current:null}},ai.forwardRef=function(Re){return{$$typeof:p,render:Re}},ai.isValidElement=re,ai.lazy=function(Re){return{$$typeof:j,_payload:{_status:-1,_result:Re},_init:me}},ai.memo=function(Re,te){return{$$typeof:w,type:Re,compare:te===void 0?null:te}},ai.startTransition=function(Re){var te=K.T,ue={};K.T=ue;try{var Ne=Re(),Me=K.S;Me!==null&&Me(ue,Ne),typeof Ne=="object"&&Ne!==null&&typeof Ne.then=="function"&&Ne.then(ge,Ue)}catch(We){Ue(We)}finally{te!==null&&ue.types!==null&&(te.types=ue.types),K.T=te}},ai.unstable_useCacheRefresh=function(){return K.H.useCacheRefresh()},ai.use=function(Re){return K.H.use(Re)},ai.useActionState=function(Re,te,ue){return K.H.useActionState(Re,te,ue)},ai.useCallback=function(Re,te){return K.H.useCallback(Re,te)},ai.useContext=function(Re){return K.H.useContext(Re)},ai.useDebugValue=function(){},ai.useDeferredValue=function(Re,te){return K.H.useDeferredValue(Re,te)},ai.useEffect=function(Re,te){return K.H.useEffect(Re,te)},ai.useEffectEvent=function(Re){return K.H.useEffectEvent(Re)},ai.useId=function(){return K.H.useId()},ai.useImperativeHandle=function(Re,te,ue){return K.H.useImperativeHandle(Re,te,ue)},ai.useInsertionEffect=function(Re,te){return K.H.useInsertionEffect(Re,te)},ai.useLayoutEffect=function(Re,te){return K.H.useLayoutEffect(Re,te)},ai.useMemo=function(Re,te){return K.H.useMemo(Re,te)},ai.useOptimistic=function(Re,te){return K.H.useOptimistic(Re,te)},ai.useReducer=function(Re,te,ue){return K.H.useReducer(Re,te,ue)},ai.useRef=function(Re){return K.H.useRef(Re)},ai.useState=function(Re){return K.H.useState(Re)},ai.useSyncExternalStore=function(Re,te,ue){return K.H.useSyncExternalStore(Re,te,ue)},ai.useTransition=function(){return K.H.useTransition()},ai.version="19.2.0",ai}var N5;function Mb(){return N5||(N5=1,O_.exports=CP()),O_.exports}var M=Mb();const Ft=Lb(M),Lw=Iw({__proto__:null,default:Ft},[M]);var z_={exports:{}},Bc={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var S5;function kP(){if(S5)return Bc;S5=1;var n=Mb();function t(g){var w="https://react.dev/errors/"+g;if(1<arguments.length){w+="?args[]="+encodeURIComponent(arguments[1]);for(var j=2;j<arguments.length;j++)w+="&args[]="+encodeURIComponent(arguments[j])}return"Minified React error #"+g+"; visit "+w+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function r(){}var i={d:{f:r,r:function(){throw Error(t(522))},D:r,C:r,L:r,m:r,X:r,S:r,M:r},p:0,findDOMNode:null},o=Symbol.for("react.portal");function l(g,w,j){var S=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:o,key:S==null?null:""+S,children:g,containerInfo:w,implementation:j}}var a=n.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function p(g,w){if(g==="font")return"";if(typeof w=="string")return w==="use-credentials"?w:""}return Bc.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=i,Bc.createPortal=function(g,w){var j=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!w||w.nodeType!==1&&w.nodeType!==9&&w.nodeType!==11)throw Error(t(299));return l(g,w,null,j)},Bc.flushSync=function(g){var w=a.T,j=i.p;try{if(a.T=null,i.p=2,g)return g()}finally{a.T=w,i.p=j,i.d.f()}},Bc.preconnect=function(g,w){typeof g=="string"&&(w?(w=w.crossOrigin,w=typeof w=="string"?w==="use-credentials"?w:"":void 0):w=null,i.d.C(g,w))},Bc.prefetchDNS=function(g){typeof g=="string"&&i.d.D(g)},Bc.preinit=function(g,w){if(typeof g=="string"&&w&&typeof w.as=="string"){var j=w.as,S=p(j,w.crossOrigin),T=typeof w.integrity=="string"?w.integrity:void 0,E=typeof w.fetchPriority=="string"?w.fetchPriority:void 0;j==="style"?i.d.S(g,typeof w.precedence=="string"?w.precedence:void 0,{crossOrigin:S,integrity:T,fetchPriority:E}):j==="script"&&i.d.X(g,{crossOrigin:S,integrity:T,fetchPriority:E,nonce:typeof w.nonce=="string"?w.nonce:void 0})}},Bc.preinitModule=function(g,w){if(typeof g=="string")if(typeof w=="object"&&w!==null){if(w.as==null||w.as==="script"){var j=p(w.as,w.crossOrigin);i.d.M(g,{crossOrigin:j,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0})}}else w==null&&i.d.M(g)},Bc.preload=function(g,w){if(typeof g=="string"&&typeof w=="object"&&w!==null&&typeof w.as=="string"){var j=w.as,S=p(j,w.crossOrigin);i.d.L(g,j,{crossOrigin:S,integrity:typeof w.integrity=="string"?w.integrity:void 0,nonce:typeof w.nonce=="string"?w.nonce:void 0,type:typeof w.type=="string"?w.type:void 0,fetchPriority:typeof w.fetchPriority=="string"?w.fetchPriority:void 0,referrerPolicy:typeof w.referrerPolicy=="string"?w.referrerPolicy:void 0,imageSrcSet:typeof w.imageSrcSet=="string"?w.imageSrcSet:void 0,imageSizes:typeof w.imageSizes=="string"?w.imageSizes:void 0,media:typeof w.media=="string"?w.media:void 0})}},Bc.preloadModule=function(g,w){if(typeof g=="string")if(w){var j=p(w.as,w.crossOrigin);i.d.m(g,{as:typeof w.as=="string"&&w.as!=="script"?w.as:void 0,crossOrigin:j,integrity:typeof w.integrity=="string"?w.integrity:void 0})}else i.d.m(g)},Bc.requestFormReset=function(g){i.d.r(g)},Bc.unstable_batchedUpdates=function(g,w){return g(w)},Bc.useFormState=function(g,w,j){return a.H.useFormState(g,w,j)},Bc.useFormStatus=function(){return a.H.useHostTransitionStatus()},Bc.version="19.2.0",Bc}var A5;function L4(){if(A5)return z_.exports;A5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),z_.exports=kP(),z_.exports}var dy=L4();const Mw=Lb(dy),EP=Iw({__proto__:null,default:Mw},[dy]);var F_={exports:{}},mx={},B_={exports:{}},U_={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var C5;function TP(){return C5||(C5=1,(function(n){function t(Q,pe){var me=Q.length;Q.push(pe);e:for(;0<me;){var Ue=me-1>>>1,Ke=Q[Ue];if(0<o(Ke,pe))Q[Ue]=pe,Q[me]=Ke,me=Ue;else break e}}function r(Q){return Q.length===0?null:Q[0]}function i(Q){if(Q.length===0)return null;var pe=Q[0],me=Q.pop();if(me!==pe){Q[0]=me;e:for(var Ue=0,Ke=Q.length,Re=Ke>>>1;Ue<Re;){var te=2*(Ue+1)-1,ue=Q[te],Ne=te+1,Me=Q[Ne];if(0>o(ue,me))Ne<Ke&&0>o(Me,ue)?(Q[Ue]=Me,Q[Ne]=me,Ue=Ne):(Q[Ue]=ue,Q[te]=me,Ue=te);else if(Ne<Ke&&0>o(Me,me))Q[Ue]=Me,Q[Ne]=me,Ue=Ne;else break e}}return pe}function o(Q,pe){var me=Q.sortIndex-pe.sortIndex;return me!==0?me:Q.id-pe.id}if(n.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var l=performance;n.unstable_now=function(){return l.now()}}else{var a=Date,p=a.now();n.unstable_now=function(){return a.now()-p}}var g=[],w=[],j=1,S=null,T=3,E=!1,O=!1,R=!1,F=!1,B=typeof setTimeout=="function"?setTimeout:null,G=typeof clearTimeout=="function"?clearTimeout:null,z=typeof setImmediate<"u"?setImmediate:null;function ee(Q){for(var pe=r(w);pe!==null;){if(pe.callback===null)i(w);else if(pe.startTime<=Q)i(w),pe.sortIndex=pe.expirationTime,t(g,pe);else break;pe=r(w)}}function ie(Q){if(R=!1,ee(Q),!O)if(r(g)!==null)O=!0,ge||(ge=!0,ce());else{var pe=r(w);pe!==null&&Fe(ie,pe.startTime-Q)}}var ge=!1,K=-1,J=5,Se=-1;function _e(){return F?!0:!(n.unstable_now()-Se<J)}function re(){if(F=!1,ge){var Q=n.unstable_now();Se=Q;var pe=!0;try{e:{O=!1,R&&(R=!1,G(K),K=-1),E=!0;var me=T;try{t:{for(ee(Q),S=r(g);S!==null&&!(S.expirationTime>Q&&_e());){var Ue=S.callback;if(typeof Ue=="function"){S.callback=null,T=S.priorityLevel;var Ke=Ue(S.expirationTime<=Q);if(Q=n.unstable_now(),typeof Ke=="function"){S.callback=Ke,ee(Q),pe=!0;break t}S===r(g)&&i(g),ee(Q)}else i(g);S=r(g)}if(S!==null)pe=!0;else{var Re=r(w);Re!==null&&Fe(ie,Re.startTime-Q),pe=!1}}break e}finally{S=null,T=me,E=!1}pe=void 0}}finally{pe?ce():ge=!1}}}var ce;if(typeof z=="function")ce=function(){z(re)};else if(typeof MessageChannel<"u"){var fe=new MessageChannel,ye=fe.port2;fe.port1.onmessage=re,ce=function(){ye.postMessage(null)}}else ce=function(){B(re,0)};function Fe(Q,pe){K=B(function(){Q(n.unstable_now())},pe)}n.unstable_IdlePriority=5,n.unstable_ImmediatePriority=1,n.unstable_LowPriority=4,n.unstable_NormalPriority=3,n.unstable_Profiling=null,n.unstable_UserBlockingPriority=2,n.unstable_cancelCallback=function(Q){Q.callback=null},n.unstable_forceFrameRate=function(Q){0>Q||125<Q?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):J=0<Q?Math.floor(1e3/Q):5},n.unstable_getCurrentPriorityLevel=function(){return T},n.unstable_next=function(Q){switch(T){case 1:case 2:case 3:var pe=3;break;default:pe=T}var me=T;T=pe;try{return Q()}finally{T=me}},n.unstable_requestPaint=function(){F=!0},n.unstable_runWithPriority=function(Q,pe){switch(Q){case 1:case 2:case 3:case 4:case 5:break;default:Q=3}var me=T;T=Q;try{return pe()}finally{T=me}},n.unstable_scheduleCallback=function(Q,pe,me){var Ue=n.unstable_now();switch(typeof me=="object"&&me!==null?(me=me.delay,me=typeof me=="number"&&0<me?Ue+me:Ue):me=Ue,Q){case 1:var Ke=-1;break;case 2:Ke=250;break;case 5:Ke=1073741823;break;case 4:Ke=1e4;break;default:Ke=5e3}return Ke=me+Ke,Q={id:j++,callback:pe,priorityLevel:Q,startTime:me,expirationTime:Ke,sortIndex:-1},me>Ue?(Q.sortIndex=me,t(w,Q),r(g)===null&&Q===r(w)&&(R?(G(K),K=-1):R=!0,Fe(ie,me-Ue))):(Q.sortIndex=Ke,t(g,Q),O||E||(O=!0,ge||(ge=!0,ce()))),Q},n.unstable_shouldYield=_e,n.unstable_wrapCallback=function(Q){var pe=T;return function(){var me=T;T=pe;try{return Q.apply(this,arguments)}finally{T=me}}}})(U_)),U_}var k5;function PP(){return k5||(k5=1,B_.exports=TP()),B_.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var E5;function RP(){if(E5)return mx;E5=1;var n=PP(),t=Mb(),r=L4();function i(c){var h="https://react.dev/errors/"+c;if(1<arguments.length){h+="?args[]="+encodeURIComponent(arguments[1]);for(var b=2;b<arguments.length;b++)h+="&args[]="+encodeURIComponent(arguments[b])}return"Minified React error #"+c+"; visit "+h+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function o(c){return!(!c||c.nodeType!==1&&c.nodeType!==9&&c.nodeType!==11)}function l(c){var h=c,b=c;if(c.alternate)for(;h.return;)h=h.return;else{c=h;do h=c,(h.flags&4098)!==0&&(b=h.return),c=h.return;while(c)}return h.tag===3?b:null}function a(c){if(c.tag===13){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function p(c){if(c.tag===31){var h=c.memoizedState;if(h===null&&(c=c.alternate,c!==null&&(h=c.memoizedState)),h!==null)return h.dehydrated}return null}function g(c){if(l(c)!==c)throw Error(i(188))}function w(c){var h=c.alternate;if(!h){if(h=l(c),h===null)throw Error(i(188));return h!==c?null:c}for(var b=c,A=h;;){var D=b.return;if(D===null)break;var V=D.alternate;if(V===null){if(A=D.return,A!==null){b=A;continue}break}if(D.child===V.child){for(V=D.child;V;){if(V===b)return g(D),c;if(V===A)return g(D),h;V=V.sibling}throw Error(i(188))}if(b.return!==A.return)b=D,A=V;else{for(var ae=!1,Oe=D.child;Oe;){if(Oe===b){ae=!0,b=D,A=V;break}if(Oe===A){ae=!0,A=D,b=V;break}Oe=Oe.sibling}if(!ae){for(Oe=V.child;Oe;){if(Oe===b){ae=!0,b=V,A=D;break}if(Oe===A){ae=!0,A=V,b=D;break}Oe=Oe.sibling}if(!ae)throw Error(i(189))}}if(b.alternate!==A)throw Error(i(190))}if(b.tag!==3)throw Error(i(188));return b.stateNode.current===b?c:h}function j(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c;for(c=c.child;c!==null;){if(h=j(c),h!==null)return h;c=c.sibling}return null}var S=Object.assign,T=Symbol.for("react.element"),E=Symbol.for("react.transitional.element"),O=Symbol.for("react.portal"),R=Symbol.for("react.fragment"),F=Symbol.for("react.strict_mode"),B=Symbol.for("react.profiler"),G=Symbol.for("react.consumer"),z=Symbol.for("react.context"),ee=Symbol.for("react.forward_ref"),ie=Symbol.for("react.suspense"),ge=Symbol.for("react.suspense_list"),K=Symbol.for("react.memo"),J=Symbol.for("react.lazy"),Se=Symbol.for("react.activity"),_e=Symbol.for("react.memo_cache_sentinel"),re=Symbol.iterator;function ce(c){return c===null||typeof c!="object"?null:(c=re&&c[re]||c["@@iterator"],typeof c=="function"?c:null)}var fe=Symbol.for("react.client.reference");function ye(c){if(c==null)return null;if(typeof c=="function")return c.$$typeof===fe?null:c.displayName||c.name||null;if(typeof c=="string")return c;switch(c){case R:return"Fragment";case B:return"Profiler";case F:return"StrictMode";case ie:return"Suspense";case ge:return"SuspenseList";case Se:return"Activity"}if(typeof c=="object")switch(c.$$typeof){case O:return"Portal";case z:return c.displayName||"Context";case G:return(c._context.displayName||"Context")+".Consumer";case ee:var h=c.render;return c=c.displayName,c||(c=h.displayName||h.name||"",c=c!==""?"ForwardRef("+c+")":"ForwardRef"),c;case K:return h=c.displayName||null,h!==null?h:ye(c.type)||"Memo";case J:h=c._payload,c=c._init;try{return ye(c(h))}catch{}}return null}var Fe=Array.isArray,Q=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,pe=r.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,me={pending:!1,data:null,method:null,action:null},Ue=[],Ke=-1;function Re(c){return{current:c}}function te(c){0>Ke||(c.current=Ue[Ke],Ue[Ke]=null,Ke--)}function ue(c,h){Ke++,Ue[Ke]=c.current,c.current=h}var Ne=Re(null),Me=Re(null),We=Re(null),Ve=Re(null);function tt(c,h){switch(ue(We,h),ue(Me,c),ue(Ne,null),h.nodeType){case 9:case 11:c=(c=h.documentElement)&&(c=c.namespaceURI)?ng(c):0;break;default:if(c=h.tagName,h=h.namespaceURI)h=ng(h),c=Xf(h,c);else switch(c){case"svg":c=1;break;case"math":c=2;break;default:c=0}}te(Ne),ue(Ne,c)}function Qe(){te(Ne),te(Me),te(We)}function St(c){c.memoizedState!==null&&ue(Ve,c);var h=Ne.current,b=Xf(h,c.type);h!==b&&(ue(Me,c),ue(Ne,b))}function Et(c){Me.current===c&&(te(Ne),te(Me)),Ve.current===c&&(te(Ve),Qp._currentValue=me)}var zt,Lt;function wr(c){if(zt===void 0)try{throw Error()}catch(b){var h=b.stack.trim().match(/\n( *(at )?)/);zt=h&&h[1]||"",Lt=-1<b.stack.indexOf(`
    at`)?" (<anonymous>)":-1<b.stack.indexOf("@")?"@unknown:0:0":""}return`
`+zt+c+Lt}var _t=!1;function Ye(c,h){if(!c||_t)return"";_t=!0;var b=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var A={DetermineComponentFrameRoot:function(){try{if(h){var nr=function(){throw Error()};if(Object.defineProperty(nr.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(nr,[])}catch(Ut){var It=Ut}Reflect.construct(c,[],nr)}else{try{nr.call()}catch(Ut){It=Ut}c.call(nr.prototype)}}else{try{throw Error()}catch(Ut){It=Ut}(nr=c())&&typeof nr.catch=="function"&&nr.catch(function(){})}}catch(Ut){if(Ut&&It&&typeof Ut.stack=="string")return[Ut.stack,It.stack]}return[null,null]}};A.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var D=Object.getOwnPropertyDescriptor(A.DetermineComponentFrameRoot,"name");D&&D.configurable&&Object.defineProperty(A.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var V=A.DetermineComponentFrameRoot(),ae=V[0],Oe=V[1];if(ae&&Oe){var lt=ae.split(`
`),Ct=Oe.split(`
`);for(D=A=0;A<lt.length&&!lt[A].includes("DetermineComponentFrameRoot");)A++;for(;D<Ct.length&&!Ct[D].includes("DetermineComponentFrameRoot");)D++;if(A===lt.length||D===Ct.length)for(A=lt.length-1,D=Ct.length-1;1<=A&&0<=D&&lt[A]!==Ct[D];)D--;for(;1<=A&&0<=D;A--,D--)if(lt[A]!==Ct[D]){if(A!==1||D!==1)do if(A--,D--,0>D||lt[A]!==Ct[D]){var Kt=`
`+lt[A].replace(" at new "," at ");return c.displayName&&Kt.includes("<anonymous>")&&(Kt=Kt.replace("<anonymous>",c.displayName)),Kt}while(1<=A&&0<=D);break}}}finally{_t=!1,Error.prepareStackTrace=b}return(b=c?c.displayName||c.name:"")?wr(b):""}function $r(c,h){switch(c.tag){case 26:case 27:case 5:return wr(c.type);case 16:return wr("Lazy");case 13:return c.child!==h&&h!==null?wr("Suspense Fallback"):wr("Suspense");case 19:return wr("SuspenseList");case 0:case 15:return Ye(c.type,!1);case 11:return Ye(c.type.render,!1);case 1:return Ye(c.type,!0);case 31:return wr("Activity");default:return""}}function Cr(c){try{var h="",b=null;do h+=$r(c,b),b=c,c=c.return;while(c);return h}catch(A){return`
Error generating stack: `+A.message+`
`+A.stack}}var Zt=Object.prototype.hasOwnProperty,Be=n.unstable_scheduleCallback,it=n.unstable_cancelCallback,at=n.unstable_shouldYield,Tt=n.unstable_requestPaint,kt=n.unstable_now,Ot=n.unstable_getCurrentPriorityLevel,Qt=n.unstable_ImmediatePriority,zr=n.unstable_UserBlockingPriority,Hr=n.unstable_NormalPriority,Ur=n.unstable_LowPriority,nn=n.unstable_IdlePriority,_r=n.log,Ri=n.unstable_setDisableYieldValue,_n=null,fi=null;function kn(c){if(typeof _r=="function"&&Ri(c),fi&&typeof fi.setStrictMode=="function")try{fi.setStrictMode(_n,c)}catch{}}var yn=Math.clz32?Math.clz32:Sa,va=Math.log,zn=Math.LN2;function Sa(c){return c>>>=0,c===0?32:31-(va(c)/zn|0)|0}var wi=256,Cs=262144,zs=4194304;function pi(c){var h=c&42;if(h!==0)return h;switch(c&-c){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:return c&261888;case 262144:case 524288:case 1048576:case 2097152:return c&3932160;case 4194304:case 8388608:case 16777216:case 33554432:return c&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return c}}function xr(c,h,b){var A=c.pendingLanes;if(A===0)return 0;var D=0,V=c.suspendedLanes,ae=c.pingedLanes;c=c.warmLanes;var Oe=A&134217727;return Oe!==0?(A=Oe&~V,A!==0?D=pi(A):(ae&=Oe,ae!==0?D=pi(ae):b||(b=Oe&~c,b!==0&&(D=pi(b))))):(Oe=A&~V,Oe!==0?D=pi(Oe):ae!==0?D=pi(ae):b||(b=A&~c,b!==0&&(D=pi(b)))),D===0?0:h!==0&&h!==D&&(h&V)===0&&(V=D&-D,b=h&-h,V>=b||V===32&&(b&4194048)!==0)?h:D}function Lr(c,h){return(c.pendingLanes&~(c.suspendedLanes&~c.pingedLanes)&h)===0}function oe(c,h){switch(c){case 1:case 2:case 4:case 8:case 64:return h+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return h+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function xe(){var c=zs;return zs<<=1,(zs&62914560)===0&&(zs=4194304),c}function Ce(c){for(var h=[],b=0;31>b;b++)h.push(c);return h}function Te(c,h){c.pendingLanes|=h,h!==268435456&&(c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0)}function De(c,h,b,A,D,V){var ae=c.pendingLanes;c.pendingLanes=b,c.suspendedLanes=0,c.pingedLanes=0,c.warmLanes=0,c.expiredLanes&=b,c.entangledLanes&=b,c.errorRecoveryDisabledLanes&=b,c.shellSuspendCounter=0;var Oe=c.entanglements,lt=c.expirationTimes,Ct=c.hiddenUpdates;for(b=ae&~b;0<b;){var Kt=31-yn(b),nr=1<<Kt;Oe[Kt]=0,lt[Kt]=-1;var It=Ct[Kt];if(It!==null)for(Ct[Kt]=null,Kt=0;Kt<It.length;Kt++){var Ut=It[Kt];Ut!==null&&(Ut.lane&=-536870913)}b&=~nr}A!==0&&et(c,A,0),V!==0&&D===0&&c.tag!==0&&(c.suspendedLanes|=V&~(ae&~h))}function et(c,h,b){c.pendingLanes|=h,c.suspendedLanes&=~h;var A=31-yn(h);c.entangledLanes|=h,c.entanglements[A]=c.entanglements[A]|1073741824|b&261930}function nt(c,h){var b=c.entangledLanes|=h;for(c=c.entanglements;b;){var A=31-yn(b),D=1<<A;D&h|c[A]&h&&(c[A]|=h),b&=~D}}function ke(c,h){var b=h&-h;return b=(b&42)!==0?1:qe(b),(b&(c.suspendedLanes|h))!==0?0:b}function qe(c){switch(c){case 2:c=1;break;case 8:c=4;break;case 32:c=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:c=128;break;case 268435456:c=134217728;break;default:c=0}return c}function ht(c){return c&=-c,2<c?8<c?(c&134217727)!==0?32:268435456:8:2}function qt(){var c=pe.p;return c!==0?c:(c=window.event,c===void 0?32:p5(c.type))}function Xt(c,h){var b=pe.p;try{return pe.p=c,h()}finally{pe.p=b}}var bt=Math.random().toString(36).slice(2),Mt="__reactFiber$"+bt,dr="__reactProps$"+bt,mr="__reactContainer$"+bt,jt="__reactEvents$"+bt,gr="__reactListeners$"+bt,or="__reactHandles$"+bt,fr="__reactResources$"+bt,an="__reactMarker$"+bt;function yr(c){delete c[Mt],delete c[dr],delete c[jt],delete c[gr],delete c[or]}function xn(c){var h=c[Mt];if(h)return h;for(var b=c.parentNode;b;){if(h=b[mr]||b[Mt]){if(b=h.alternate,h.child!==null||b!==null&&b.child!==null)for(c=ag(c);c!==null;){if(b=c[Mt])return b;c=ag(c)}return h}c=b,b=c.parentNode}return null}function $n(c){if(c=c[Mt]||c[mr]){var h=c.tag;if(h===5||h===6||h===13||h===31||h===26||h===27||h===3)return c}return null}function bn(c){var h=c.tag;if(h===5||h===26||h===27||h===6)return c.stateNode;throw Error(i(33))}function Un(c){var h=c[fr];return h||(h=c[fr]={hoistableStyles:new Map,hoistableScripts:new Map}),h}function Xr(c){c[an]=!0}var Ks=new Set,ti={};function Ii(c,h){Hn(c,h),Hn(c+"Capture",h)}function Hn(c,h){for(ti[c]=h,c=0;c<h.length;c++)Ks.add(h[c])}var Fn=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),Yn={},qa={};function Nc(c){return Zt.call(qa,c)?!0:Zt.call(Yn,c)?!1:Fn.test(c)?qa[c]=!0:(Yn[c]=!0,!1)}function ks(c,h,b){if(Nc(h))if(b===null)c.removeAttribute(h);else{switch(typeof b){case"undefined":case"function":case"symbol":c.removeAttribute(h);return;case"boolean":var A=h.toLowerCase().slice(0,5);if(A!=="data-"&&A!=="aria-"){c.removeAttribute(h);return}}c.setAttribute(h,""+b)}}function ri(c,h,b){if(b===null)c.removeAttribute(h);else{switch(typeof b){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(h);return}c.setAttribute(h,""+b)}}function Wo(c,h,b,A){if(A===null)c.removeAttribute(b);else{switch(typeof A){case"undefined":case"function":case"symbol":case"boolean":c.removeAttribute(b);return}c.setAttributeNS(h,b,""+A)}}function Aa(c){switch(typeof c){case"bigint":case"boolean":case"number":case"string":case"undefined":return c;case"object":return c;default:return""}}function es(c){var h=c.type;return(c=c.nodeName)&&c.toLowerCase()==="input"&&(h==="checkbox"||h==="radio")}function Qc(c,h,b){var A=Object.getOwnPropertyDescriptor(c.constructor.prototype,h);if(!c.hasOwnProperty(h)&&typeof A<"u"&&typeof A.get=="function"&&typeof A.set=="function"){var D=A.get,V=A.set;return Object.defineProperty(c,h,{configurable:!0,get:function(){return D.call(this)},set:function(ae){b=""+ae,V.call(this,ae)}}),Object.defineProperty(c,h,{enumerable:A.enumerable}),{getValue:function(){return b},setValue:function(ae){b=""+ae},stopTracking:function(){c._valueTracker=null,delete c[h]}}}}function ya(c){if(!c._valueTracker){var h=es(c)?"checked":"value";c._valueTracker=Qc(c,h,""+c[h])}}function Oi(c){if(!c)return!1;var h=c._valueTracker;if(!h)return!0;var b=h.getValue(),A="";return c&&(A=es(c)?c.checked?"true":"false":c.value),c=A,c!==b?(h.setValue(c),!0):!1}function xa(c){if(c=c||(typeof document<"u"?document:void 0),typeof c>"u")return null;try{return c.activeElement||c.body}catch{return c.body}}var Zn=/[\n"\\]/g;function cs(c){return c.replace(Zn,function(h){return"\\"+h.charCodeAt(0).toString(16)+" "})}function Va(c,h,b,A,D,V,ae,Oe){c.name="",ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"?c.type=ae:c.removeAttribute("type"),h!=null?ae==="number"?(h===0&&c.value===""||c.value!=h)&&(c.value=""+Aa(h)):c.value!==""+Aa(h)&&(c.value=""+Aa(h)):ae!=="submit"&&ae!=="reset"||c.removeAttribute("value"),h!=null?to(c,ae,Aa(h)):b!=null?to(c,ae,Aa(b)):A!=null&&c.removeAttribute("value"),D==null&&V!=null&&(c.defaultChecked=!!V),D!=null&&(c.checked=D&&typeof D!="function"&&typeof D!="symbol"),Oe!=null&&typeof Oe!="function"&&typeof Oe!="symbol"&&typeof Oe!="boolean"?c.name=""+Aa(Oe):c.removeAttribute("name")}function th(c,h,b,A,D,V,ae,Oe){if(V!=null&&typeof V!="function"&&typeof V!="symbol"&&typeof V!="boolean"&&(c.type=V),h!=null||b!=null){if(!(V!=="submit"&&V!=="reset"||h!=null)){ya(c);return}b=b!=null?""+Aa(b):"",h=h!=null?""+Aa(h):b,Oe||h===c.value||(c.value=h),c.defaultValue=h}A=A??D,A=typeof A!="function"&&typeof A!="symbol"&&!!A,c.checked=Oe?c.checked:!!A,c.defaultChecked=!!A,ae!=null&&typeof ae!="function"&&typeof ae!="symbol"&&typeof ae!="boolean"&&(c.name=ae),ya(c)}function to(c,h,b){h==="number"&&xa(c.ownerDocument)===c||c.defaultValue===""+b||(c.defaultValue=""+b)}function wu(c,h,b,A){if(c=c.options,h){h={};for(var D=0;D<b.length;D++)h["$"+b[D]]=!0;for(b=0;b<c.length;b++)D=h.hasOwnProperty("$"+c[b].value),c[b].selected!==D&&(c[b].selected=D),D&&A&&(c[b].defaultSelected=!0)}else{for(b=""+Aa(b),h=null,D=0;D<c.length;D++){if(c[D].value===b){c[D].selected=!0,A&&(c[D].defaultSelected=!0);return}h!==null||c[D].disabled||(h=c[D])}h!==null&&(h.selected=!0)}}function wl(c,h,b){if(h!=null&&(h=""+Aa(h),h!==c.value&&(c.value=h),b==null)){c.defaultValue!==h&&(c.defaultValue=h);return}c.defaultValue=b!=null?""+Aa(b):""}function ia(c,h,b,A){if(h==null){if(A!=null){if(b!=null)throw Error(i(92));if(Fe(A)){if(1<A.length)throw Error(i(93));A=A[0]}b=A}b==null&&(b=""),h=b}b=Aa(h),c.defaultValue=b,A=c.textContent,A===b&&A!==""&&A!==null&&(c.value=A),ya(c)}function Ca(c,h){if(h){var b=c.firstChild;if(b&&b===c.lastChild&&b.nodeType===3){b.nodeValue=h;return}}c.textContent=h}var $a=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Sc(c,h,b){var A=h.indexOf("--")===0;b==null||typeof b=="boolean"||b===""?A?c.setProperty(h,""):h==="float"?c.cssFloat="":c[h]="":A?c.setProperty(h,b):typeof b!="number"||b===0||$a.has(h)?h==="float"?c.cssFloat=b:c[h]=(""+b).trim():c[h]=b+"px"}function $h(c,h,b){if(h!=null&&typeof h!="object")throw Error(i(62));if(c=c.style,b!=null){for(var A in b)!b.hasOwnProperty(A)||h!=null&&h.hasOwnProperty(A)||(A.indexOf("--")===0?c.setProperty(A,""):A==="float"?c.cssFloat="":c[A]="");for(var D in h)A=h[D],h.hasOwnProperty(D)&&b[D]!==A&&Sc(c,D,A)}else for(var V in h)h.hasOwnProperty(V)&&Sc(c,V,h[V])}function sc(c){if(c.indexOf("-")===-1)return!1;switch(c){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ju=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),bd=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Nu(c){return bd.test(""+c)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":c}function Es(){}var _d=null;function zu(c){return c=c.target||c.srcElement||window,c.correspondingUseElement&&(c=c.correspondingUseElement),c.nodeType===3?c.parentNode:c}var cn=null,Ac=null;function Su(c){var h=$n(c);if(h&&(c=h.stateNode)){var b=c[dr]||null;e:switch(c=h.stateNode,h.type){case"input":if(Va(c,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name),h=b.name,b.type==="radio"&&h!=null){for(b=c;b.parentNode;)b=b.parentNode;for(b=b.querySelectorAll('input[name="'+cs(""+h)+'"][type="radio"]'),h=0;h<b.length;h++){var A=b[h];if(A!==c&&A.form===c.form){var D=A[dr]||null;if(!D)throw Error(i(90));Va(A,D.value,D.defaultValue,D.defaultValue,D.checked,D.defaultChecked,D.type,D.name)}}for(h=0;h<b.length;h++)A=b[h],A.form===c.form&&Oi(A)}break e;case"textarea":wl(c,b.value,b.defaultValue);break e;case"select":h=b.value,h!=null&&wu(c,!!b.multiple,h,!1)}}}var jl=!1;function Au(c,h,b){if(jl)return c(h,b);jl=!0;try{var A=c(h);return A}finally{if(jl=!1,(cn!==null||Ac!==null)&&(se(),cn&&(h=cn,c=Ac,Ac=cn=null,Su(h),c)))for(h=0;h<c.length;h++)Su(c[h])}}function ka(c,h){var b=c.stateNode;if(b===null)return null;var A=b[dr]||null;if(A===null)return null;b=A[h];e:switch(h){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(A=!A.disabled)||(c=c.type,A=!(c==="button"||c==="input"||c==="select"||c==="textarea")),c=!A;break e;default:c=!1}if(c)return null;if(b&&typeof b!="function")throw Error(i(231,h,typeof b));return b}var sa=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Yo=!1;if(sa)try{var Nl={};Object.defineProperty(Nl,"passive",{get:function(){Yo=!0}}),window.addEventListener("test",Nl,Nl),window.removeEventListener("test",Nl,Nl)}catch{Yo=!1}var ro=null,Bl=null,ac=null;function aa(){if(ac)return ac;var c,h=Bl,b=h.length,A,D="value"in ro?ro.value:ro.textContent,V=D.length;for(c=0;c<b&&h[c]===D[c];c++);var ae=b-c;for(A=1;A<=ae&&h[b-A]===D[V-A];A++);return ac=D.slice(c,1<A?1-A:void 0)}function Ai(c){var h=c.keyCode;return"charCode"in c?(c=c.charCode,c===0&&h===13&&(c=13)):c=h,c===10&&(c=13),32<=c||c===13?c:0}function oc(){return!0}function eu(){return!1}function Ha(c){function h(b,A,D,V,ae){this._reactName=b,this._targetInst=D,this.type=A,this.nativeEvent=V,this.target=ae,this.currentTarget=null;for(var Oe in c)c.hasOwnProperty(Oe)&&(b=c[Oe],this[Oe]=b?b(V):V[Oe]);return this.isDefaultPrevented=(V.defaultPrevented!=null?V.defaultPrevented:V.returnValue===!1)?oc:eu,this.isPropagationStopped=eu,this}return S(h.prototype,{preventDefault:function(){this.defaultPrevented=!0;var b=this.nativeEvent;b&&(b.preventDefault?b.preventDefault():typeof b.returnValue!="unknown"&&(b.returnValue=!1),this.isDefaultPrevented=oc)},stopPropagation:function(){var b=this.nativeEvent;b&&(b.stopPropagation?b.stopPropagation():typeof b.cancelBubble!="unknown"&&(b.cancelBubble=!0),this.isPropagationStopped=oc)},persist:function(){},isPersistent:oc}),h}var Ul={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(c){return c.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},tu=Ha(Ul),Cc=S({},Ul,{view:0,detail:0}),wd=Ha(Cc),Cu,Sl,Zo,jd=S({},Cc,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ni,button:0,buttons:0,relatedTarget:function(c){return c.relatedTarget===void 0?c.fromElement===c.srcElement?c.toElement:c.fromElement:c.relatedTarget},movementX:function(c){return"movementX"in c?c.movementX:(c!==Zo&&(Zo&&c.type==="mousemove"?(Cu=c.screenX-Zo.screenX,Sl=c.screenY-Zo.screenY):Sl=Cu=0,Zo=c),Cu)},movementY:function(c){return"movementY"in c?c.movementY:Sl}}),Al=Ha(jd),Lo=S({},jd,{dataTransfer:0}),Nd=Ha(Lo),Ts=S({},Cc,{relatedTarget:0}),Fu=Ha(Ts),Cl=S({},Ul,{animationName:0,elapsedTime:0,pseudoElement:0}),kc=Ha(Cl),lc=S({},Ul,{clipboardData:function(c){return"clipboardData"in c?c.clipboardData:window.clipboardData}}),cc=Ha(lc),uc=S({},Ul,{data:0}),kl=Ha(uc),dc={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},ql={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rh={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Hh(c){var h=this.nativeEvent;return h.getModifierState?h.getModifierState(c):(c=rh[c])?!!h[c]:!1}function ni(){return Hh}var Bu=S({},Cc,{key:function(c){if(c.key){var h=dc[c.key]||c.key;if(h!=="Unidentified")return h}return c.type==="keypress"?(c=Ai(c),c===13?"Enter":String.fromCharCode(c)):c.type==="keydown"||c.type==="keyup"?ql[c.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ni,charCode:function(c){return c.type==="keypress"?Ai(c):0},keyCode:function(c){return c.type==="keydown"||c.type==="keyup"?c.keyCode:0},which:function(c){return c.type==="keypress"?Ai(c):c.type==="keydown"||c.type==="keyup"?c.keyCode:0}}),ku=Ha(Bu),ru=S({},jd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Uu=Ha(ru),H=S({},Cc,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ni}),be=Ha(H),Ze=S({},Ul,{propertyName:0,elapsedTime:0,pseudoElement:0}),dt=Ha(Ze),vt=S({},jd,{deltaX:function(c){return"deltaX"in c?c.deltaX:"wheelDeltaX"in c?-c.wheelDeltaX:0},deltaY:function(c){return"deltaY"in c?c.deltaY:"wheelDeltaY"in c?-c.wheelDeltaY:"wheelDelta"in c?-c.wheelDelta:0},deltaZ:0,deltaMode:0}),$t=Ha(vt),lr=S({},Ul,{newState:0,oldState:0}),Or=Ha(lr),Zr=[9,13,27,32],Pn=sa&&"CompositionEvent"in window,dn=null;sa&&"documentMode"in document&&(dn=document.documentMode);var Kn=sa&&"TextEvent"in window&&!dn,_s=sa&&(!Pn||dn&&8<dn&&11>=dn),ts=" ",Sn=!1;function ba(c,h){switch(c){case"keyup":return Zr.indexOf(h.keyCode)!==-1;case"keydown":return h.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Ea(c){return c=c.detail,typeof c=="object"&&"data"in c?c.data:null}var oa=!1;function Ko(c,h){switch(c){case"compositionend":return Ea(h);case"keypress":return h.which!==32?null:(Sn=!0,ts);case"textInput":return c=h.data,c===ts&&Sn?null:c;default:return null}}function Ec(c,h){if(oa)return c==="compositionend"||!Pn&&ba(c,h)?(c=aa(),ac=Bl=ro=null,oa=!1,c):null;switch(c){case"paste":return null;case"keypress":if(!(h.ctrlKey||h.altKey||h.metaKey)||h.ctrlKey&&h.altKey){if(h.char&&1<h.char.length)return h.char;if(h.which)return String.fromCharCode(h.which)}return null;case"compositionend":return _s&&h.locale!=="ko"?null:h.data;default:return null}}var nh={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function nu(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h==="input"?!!nh[c.type]:h==="textarea"}function hc(c,h,b,A){cn?Ac?Ac.push(A):Ac=[A]:cn=A,h=Wf(h,"onChange"),0<h.length&&(b=new tu("onChange","change",null,b,A),c.push({event:b,listeners:h}))}var Xo=null,Vl=null;function iu(c){Qh(c,0)}function Jo(c){var h=bn(c);if(Oi(h))return c}function Ta(c,h){if(c==="change")return h}var $l=!1;if(sa){var Ga;if(sa){var su="oninput"in document;if(!su){var qu=document.createElement("div");qu.setAttribute("oninput","return;"),su=typeof qu.oninput=="function"}Ga=su}else Ga=!1;$l=Ga&&(!document.documentMode||9<document.documentMode)}function yo(){Xo&&(Xo.detachEvent("onpropertychange",Tc),Vl=Xo=null)}function Tc(c){if(c.propertyName==="value"&&Jo(Vl)){var h=[];hc(h,Vl,c,zu(c)),Au(iu,h)}}function au(c,h,b){c==="focusin"?(yo(),Xo=h,Vl=b,Xo.attachEvent("onpropertychange",Tc)):c==="focusout"&&yo()}function Vu(c){if(c==="selectionchange"||c==="keyup"||c==="keydown")return Jo(Vl)}function Qo(c,h){if(c==="click")return Jo(h)}function ou(c,h){if(c==="input"||c==="change")return Jo(h)}function Gh(c,h){return c===h&&(c!==0||1/c===1/h)||c!==c&&h!==h}var Pa=typeof Object.is=="function"?Object.is:Gh;function el(c,h){if(Pa(c,h))return!0;if(typeof c!="object"||c===null||typeof h!="object"||h===null)return!1;var b=Object.keys(c),A=Object.keys(h);if(b.length!==A.length)return!1;for(A=0;A<b.length;A++){var D=b[A];if(!Zt.call(h,D)||!Pa(c[D],h[D]))return!1}return!0}function lu(c){for(;c&&c.firstChild;)c=c.firstChild;return c}function xo(c,h){var b=lu(c);c=0;for(var A;b;){if(b.nodeType===3){if(A=c+b.textContent.length,c<=h&&A>=h)return{node:b,offset:h-c};c=A}e:{for(;b;){if(b.nextSibling){b=b.nextSibling;break e}b=b.parentNode}b=void 0}b=lu(b)}}function Ra(c,h){return c&&h?c===h?!0:c&&c.nodeType===3?!1:h&&h.nodeType===3?Ra(c,h.parentNode):"contains"in c?c.contains(h):c.compareDocumentPosition?!!(c.compareDocumentPosition(h)&16):!1:!1}function fc(c){c=c!=null&&c.ownerDocument!=null&&c.ownerDocument.defaultView!=null?c.ownerDocument.defaultView:window;for(var h=xa(c.document);h instanceof c.HTMLIFrameElement;){try{var b=typeof h.contentWindow.location.href=="string"}catch{b=!1}if(b)c=h.contentWindow;else break;h=xa(c.document)}return h}function El(c){var h=c&&c.nodeName&&c.nodeName.toLowerCase();return h&&(h==="input"&&(c.type==="text"||c.type==="search"||c.type==="tel"||c.type==="url"||c.type==="password")||h==="textarea"||c.contentEditable==="true")}var pc=sa&&"documentMode"in document&&11>=document.documentMode,Mo=null,Hl=null,Li=null,ji=!1;function Ia(c,h,b){var A=b.window===b?b.document:b.nodeType===9?b:b.ownerDocument;ji||Mo==null||Mo!==xa(A)||(A=Mo,"selectionStart"in A&&El(A)?A={start:A.selectionStart,end:A.selectionEnd}:(A=(A.ownerDocument&&A.ownerDocument.defaultView||window).getSelection(),A={anchorNode:A.anchorNode,anchorOffset:A.anchorOffset,focusNode:A.focusNode,focusOffset:A.focusOffset}),Li&&el(Li,A)||(Li=A,A=Wf(Hl,"onSelect"),0<A.length&&(h=new tu("onSelect","select",null,h,b),c.push({event:h,listeners:A}),h.target=Mo)))}function Ps(c,h){var b={};return b[c.toLowerCase()]=h.toLowerCase(),b["Webkit"+c]="webkit"+h,b["Moz"+c]="moz"+h,b}var Wa={animationend:Ps("Animation","AnimationEnd"),animationiteration:Ps("Animation","AnimationIteration"),animationstart:Ps("Animation","AnimationStart"),transitionrun:Ps("Transition","TransitionRun"),transitionstart:Ps("Transition","TransitionStart"),transitioncancel:Ps("Transition","TransitionCancel"),transitionend:Ps("Transition","TransitionEnd")},Rn={},bi={};sa&&(bi=document.createElement("div").style,"AnimationEvent"in window||(delete Wa.animationend.animation,delete Wa.animationiteration.animation,delete Wa.animationstart.animation),"TransitionEvent"in window||delete Wa.transitionend.transition);function ws(c){if(Rn[c])return Rn[c];if(!Wa[c])return c;var h=Wa[c],b;for(b in h)if(h.hasOwnProperty(b)&&b in bi)return Rn[c]=h[b];return c}var Gl=ws("animationend"),tl=ws("animationiteration"),Wl=ws("animationstart"),Sd=ws("transitionrun"),$u=ws("transitionstart"),Yl=ws("transitioncancel"),Pc=ws("transitionend"),la=new Map,_i="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");_i.push("scrollEnd");function Xn(c,h){la.set(c,h),Ii(h,[c])}var zi=typeof reportError=="function"?reportError:function(c){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var h=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof c=="object"&&c!==null&&typeof c.message=="string"?String(c.message):String(c),error:c});if(!window.dispatchEvent(h))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",c);return}console.error(c)},mn=[],sr=0,Rs=0;function mc(){for(var c=sr,h=Rs=sr=0;h<c;){var b=mn[h];mn[h++]=null;var A=mn[h];mn[h++]=null;var D=mn[h];mn[h++]=null;var V=mn[h];if(mn[h++]=null,A!==null&&D!==null){var ae=A.pending;ae===null?D.next=D:(D.next=ae.next,ae.next=D),A.pending=D}V!==0&&Hu(b,D,V)}}function rl(c,h,b,A){mn[sr++]=c,mn[sr++]=h,mn[sr++]=b,mn[sr++]=A,Rs|=A,c.lanes|=A,c=c.alternate,c!==null&&(c.lanes|=A)}function bo(c,h,b,A){return rl(c,h,b,A),tr(c)}function Xs(c,h){return rl(c,null,null,h),tr(c)}function Hu(c,h,b){c.lanes|=b;var A=c.alternate;A!==null&&(A.lanes|=b);for(var D=!1,V=c.return;V!==null;)V.childLanes|=b,A=V.alternate,A!==null&&(A.childLanes|=b),V.tag===22&&(c=V.stateNode,c===null||c._visibility&1||(D=!0)),c=V,V=V.return;return c.tag===3?(V=c.stateNode,D&&h!==null&&(D=31-yn(b),c=V.hiddenUpdates,A=c[D],A===null?c[D]=[h]:A.push(h),h.lane=b|536870912),V):null}function tr(c){if(50<u)throw u=0,f=null,Error(i(185));for(var h=c.return;h!==null;)c=h,h=c.return;return c.tag===3?c.stateNode:null}var La={};function Gu(c,h,b,A){this.tag=c,this.key=b,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=h,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=A,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ya(c,h,b,A){return new Gu(c,h,b,A)}function Do(c){return c=c.prototype,!(!c||!c.isReactComponent)}function js(c,h){var b=c.alternate;return b===null?(b=Ya(c.tag,h,c.key,c.mode),b.elementType=c.elementType,b.type=c.type,b.stateNode=c.stateNode,b.alternate=c,c.alternate=b):(b.pendingProps=h,b.type=c.type,b.flags=0,b.subtreeFlags=0,b.deletions=null),b.flags=c.flags&65011712,b.childLanes=c.childLanes,b.lanes=c.lanes,b.child=c.child,b.memoizedProps=c.memoizedProps,b.memoizedState=c.memoizedState,b.updateQueue=c.updateQueue,h=c.dependencies,b.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext},b.sibling=c.sibling,b.index=c.index,b.ref=c.ref,b.refCleanup=c.refCleanup,b}function Eu(c,h){c.flags&=65011714;var b=c.alternate;return b===null?(c.childLanes=0,c.lanes=h,c.child=null,c.subtreeFlags=0,c.memoizedProps=null,c.memoizedState=null,c.updateQueue=null,c.dependencies=null,c.stateNode=null):(c.childLanes=b.childLanes,c.lanes=b.lanes,c.child=b.child,c.subtreeFlags=0,c.deletions=null,c.memoizedProps=b.memoizedProps,c.memoizedState=b.memoizedState,c.updateQueue=b.updateQueue,c.type=b.type,h=b.dependencies,c.dependencies=h===null?null:{lanes:h.lanes,firstContext:h.firstContext}),c}function cu(c,h,b,A,D,V){var ae=0;if(A=c,typeof c=="function")Do(c)&&(ae=1);else if(typeof c=="string")ae=lx(c,b,Ne.current)?26:c==="html"||c==="head"||c==="body"?27:5;else e:switch(c){case Se:return c=Ya(31,b,h,D),c.elementType=Se,c.lanes=V,c;case R:return ca(b.children,D,V,h);case F:ae=8,D|=24;break;case B:return c=Ya(12,b,h,D|2),c.elementType=B,c.lanes=V,c;case ie:return c=Ya(13,b,h,D),c.elementType=ie,c.lanes=V,c;case ge:return c=Ya(19,b,h,D),c.elementType=ge,c.lanes=V,c;default:if(typeof c=="object"&&c!==null)switch(c.$$typeof){case z:ae=10;break e;case G:ae=9;break e;case ee:ae=11;break e;case K:ae=14;break e;case J:ae=16,A=null;break e}ae=29,b=Error(i(130,c===null?"null":typeof c,"")),A=null}return h=Ya(ae,b,h,D),h.elementType=c,h.type=A,h.lanes=V,h}function ca(c,h,b,A){return c=Ya(7,c,A,h),c.lanes=b,c}function Tl(c,h,b){return c=Ya(6,c,null,h),c.lanes=b,c}function ih(c){var h=Ya(18,null,null,0);return h.stateNode=c,h}function Rc(c,h,b){return h=Ya(4,c.children!==null?c.children:[],c.key,h),h.lanes=b,h.stateNode={containerInfo:c.containerInfo,pendingChildren:null,implementation:c.implementation},h}var Ad=new WeakMap;function nl(c,h){if(typeof c=="object"&&c!==null){var b=Ad.get(c);return b!==void 0?b:(h={value:c,source:h,stack:Cr(h)},Ad.set(c,h),h)}return{value:c,source:h,stack:Cr(h)}}var _o=[],Ma=0,En=null,il=0,Fs=[],qi=0,sl=null,Da=1,Js="";function Wi(c,h){_o[Ma++]=il,_o[Ma++]=En,En=c,il=h}function Cd(c,h,b){Fs[qi++]=Da,Fs[qi++]=Js,Fs[qi++]=sl,sl=c;var A=Da;c=Js;var D=32-yn(A)-1;A&=~(1<<D),b+=1;var V=32-yn(h)+D;if(30<V){var ae=D-D%5;V=(A&(1<<ae)-1).toString(32),A>>=ae,D-=ae,Da=1<<32-yn(h)+D|b<<D|A,Js=V+c}else Da=1<<V|b<<D|A,Js=c}function qr(c){c.return!==null&&(Wi(c,1),Cd(c,1,0))}function Er(c){for(;c===En;)En=_o[--Ma],_o[Ma]=null,il=_o[--Ma],_o[Ma]=null;for(;c===sl;)sl=Fs[--qi],Fs[qi]=null,Js=Fs[--qi],Fs[qi]=null,Da=Fs[--qi],Fs[qi]=null}function sh(c,h){Fs[qi++]=Da,Fs[qi++]=Js,Fs[qi++]=sl,Da=h.id,Js=h.overflow,sl=c}var Ci=null,gi=null,gn=!1,Is=null,Ls=!1,al=Error(i(519));function Gn(c){var h=Error(i(418,1<arguments.length&&arguments[1]!==void 0&&arguments[1]?"text":"HTML",""));throw Oa(nl(h,c)),al}function ua(c){var h=c.stateNode,b=c.type,A=c.memoizedProps;switch(h[Mt]=c,h[dr]=A,b){case"dialog":si("cancel",h),si("close",h);break;case"iframe":case"object":case"embed":si("load",h);break;case"video":case"audio":for(b=0;b<tc.length;b++)si(tc[b],h);break;case"source":si("error",h);break;case"img":case"image":case"link":si("error",h),si("load",h);break;case"details":si("toggle",h);break;case"input":si("invalid",h),th(h,A.value,A.defaultValue,A.checked,A.defaultChecked,A.type,A.name,!0);break;case"select":si("invalid",h);break;case"textarea":si("invalid",h),ia(h,A.value,A.defaultValue,A.children)}b=A.children,typeof b!="string"&&typeof b!="number"&&typeof b!="bigint"||h.textContent===""+b||A.suppressHydrationWarning===!0||tg(h.textContent,b)?(A.popover!=null&&(si("beforetoggle",h),si("toggle",h)),A.onScroll!=null&&si("scroll",h),A.onScrollEnd!=null&&si("scrollend",h),A.onClick!=null&&(h.onclick=Es),h=!0):h=!1,h||Gn(c,!0)}function Ic(c){for(Ci=c.return;Ci;)switch(Ci.tag){case 5:case 31:case 13:Ls=!1;return;case 27:case 3:Ls=!0;return;default:Ci=Ci.return}}function Bs(c){if(c!==Ci)return!1;if(!gn)return Ic(c),gn=!0,!1;var h=c.tag,b;if((b=h!==3&&h!==27)&&((b=h===5)&&(b=c.type,b=!(b!=="form"&&b!=="button")||Jf(c.type,c.memoizedProps)),b=!b),b&&gi&&Gn(c),Ic(c),h===13){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));gi=Wp(c)}else if(h===31){if(c=c.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(317));gi=Wp(c)}else h===27?(h=gi,Vd(c.type)?(c=Gp,Gp=null,gi=c):gi=h):gi=Ci?fo(c.stateNode.nextSibling):null;return!0}function uu(){gi=Ci=null,gn=!1}function gc(){var c=Is;return c!==null&&(fl===null?fl=c:fl.push.apply(fl,c),Is=null),c}function Oa(c){Is===null?Is=[c]:Is.push(c)}var du=Re(null),no=null,Pl=null;function Rl(c,h,b){ue(du,h._currentValue),h._currentValue=b}function wo(c){c._currentValue=du.current,te(du)}function Tu(c,h,b){for(;c!==null;){var A=c.alternate;if((c.childLanes&h)!==h?(c.childLanes|=h,A!==null&&(A.childLanes|=h)):A!==null&&(A.childLanes&h)!==h&&(A.childLanes|=h),c===b)break;c=c.return}}function Zl(c,h,b,A){var D=c.child;for(D!==null&&(D.return=c);D!==null;){var V=D.dependencies;if(V!==null){var ae=D.child;V=V.firstContext;e:for(;V!==null;){var Oe=V;V=D;for(var lt=0;lt<h.length;lt++)if(Oe.context===h[lt]){V.lanes|=b,Oe=V.alternate,Oe!==null&&(Oe.lanes|=b),Tu(V.return,b,c),A||(ae=null);break e}V=Oe.next}}else if(D.tag===18){if(ae=D.return,ae===null)throw Error(i(341));ae.lanes|=b,V=ae.alternate,V!==null&&(V.lanes|=b),Tu(ae,b,c),ae=null}else ae=D.child;if(ae!==null)ae.return=D;else for(ae=D;ae!==null;){if(ae===c){ae=null;break}if(D=ae.sibling,D!==null){D.return=ae.return,ae=D;break}ae=ae.return}D=ae}}function ol(c,h,b,A){c=null;for(var D=h,V=!1;D!==null;){if(!V){if((D.flags&524288)!==0)V=!0;else if((D.flags&262144)!==0)break}if(D.tag===10){var ae=D.alternate;if(ae===null)throw Error(i(387));if(ae=ae.memoizedProps,ae!==null){var Oe=D.type;Pa(D.pendingProps.value,ae.value)||(c!==null?c.push(Oe):c=[Oe])}}else if(D===Ve.current){if(ae=D.alternate,ae===null)throw Error(i(387));ae.memoizedState.memoizedState!==D.memoizedState.memoizedState&&(c!==null?c.push(Qp):c=[Qp])}D=D.return}c!==null&&Zl(h,c,b,A),h.flags|=262144}function kd(c){for(c=c.firstContext;c!==null;){if(!Pa(c.context._currentValue,c.memoizedValue))return!0;c=c.next}return!1}function Oo(c){no=c,Pl=null,c=c.dependencies,c!==null&&(c.firstContext=null)}function Ms(c){return hu(no,c)}function Wu(c,h){return no===null&&Oo(c),hu(c,h)}function hu(c,h){var b=h._currentValue;if(h={context:h,memoizedValue:b,next:null},Pl===null){if(c===null)throw Error(i(308));Pl=h,c.dependencies={lanes:0,firstContext:h},c.flags|=524288}else Pl=Pl.next=h;return b}var Kl=typeof AbortController<"u"?AbortController:function(){var c=[],h=this.signal={aborted:!1,addEventListener:function(b,A){c.push(A)}};this.abort=function(){h.aborted=!0,c.forEach(function(b){return b()})}},Cf=n.unstable_scheduleCallback,ah=n.unstable_NormalPriority,Us={$$typeof:z,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function fu(){return{controller:new Kl,data:new Map,refCount:0}}function m(c){c.refCount--,c.refCount===0&&Cf(ah,function(){c.controller.abort()})}var x=null,v=0,d=0,y=null;function N(c,h){if(x===null){var b=x=[];v=0,d=ta(),y={status:"pending",value:void 0,then:function(A){b.push(A)}}}return v++,h.then(k,k),h}function k(){if(--v===0&&x!==null){y!==null&&(y.status="fulfilled");var c=x;x=null,d=0,y=null;for(var h=0;h<c.length;h++)(0,c[h])()}}function I(c,h){var b=[],A={status:"pending",value:null,reason:null,then:function(D){b.push(D)}};return c.then(function(){A.status="fulfilled",A.value=h;for(var D=0;D<b.length;D++)(0,b[D])(h)},function(D){for(A.status="rejected",A.reason=D,D=0;D<b.length;D++)(0,b[D])(void 0)}),A}var U=Q.S;Q.S=function(c,h){eg=kt(),typeof h=="object"&&h!==null&&typeof h.then=="function"&&N(c,h),U!==null&&U(c,h)};var $=Re(null);function W(){var c=$.current;return c!==null?c:$i.pooledCache}function Y(c,h){h===null?ue($,$.current):ue($,h.pool)}function X(){var c=W();return c===null?null:{parent:Us._currentValue,pool:c}}var le=Error(i(460)),ve=Error(i(474)),je=Error(i(542)),de={then:function(){}};function Pe(c){return c=c.status,c==="fulfilled"||c==="rejected"}function Ie(c,h,b){switch(b=c[b],b===void 0?c.push(h):b!==h&&(h.then(Es,Es),h=b),h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,Xe(c),c;default:if(typeof h.status=="string")h.then(Es,Es);else{if(c=$i,c!==null&&100<c.shellSuspendCounter)throw Error(i(482));c=h,c.status="pending",c.then(function(A){if(h.status==="pending"){var D=h;D.status="fulfilled",D.value=A}},function(A){if(h.status==="pending"){var D=h;D.status="rejected",D.reason=A}})}switch(h.status){case"fulfilled":return h.value;case"rejected":throw c=h.reason,Xe(c),c}throw Le=h,le}}function Ae(c){try{var h=c._init;return h(c._payload)}catch(b){throw b!==null&&typeof b=="object"&&typeof b.then=="function"?(Le=b,le):b}}var Le=null;function Ge(){if(Le===null)throw Error(i(459));var c=Le;return Le=null,c}function Xe(c){if(c===le||c===je)throw Error(i(483))}var rt=null,yt=0;function mt(c){var h=yt;return yt+=1,rt===null&&(rt=[]),Ie(rt,c,h)}function Dt(c,h){h=h.props.ref,c.ref=h!==void 0?h:null}function Rt(c,h){throw h.$$typeof===T?Error(i(525)):(c=Object.prototype.toString.call(h),Error(i(31,c==="[object Object]"?"object with keys {"+Object.keys(h).join(", ")+"}":c)))}function vr(c){function h(xt,pt){if(c){var At=xt.deletions;At===null?(xt.deletions=[pt],xt.flags|=16):At.push(pt)}}function b(xt,pt){if(!c)return null;for(;pt!==null;)h(xt,pt),pt=pt.sibling;return null}function A(xt){for(var pt=new Map;xt!==null;)xt.key!==null?pt.set(xt.key,xt):pt.set(xt.index,xt),xt=xt.sibling;return pt}function D(xt,pt){return xt=js(xt,pt),xt.index=0,xt.sibling=null,xt}function V(xt,pt,At){return xt.index=At,c?(At=xt.alternate,At!==null?(At=At.index,At<pt?(xt.flags|=67108866,pt):At):(xt.flags|=67108866,pt)):(xt.flags|=1048576,pt)}function ae(xt){return c&&xt.alternate===null&&(xt.flags|=67108866),xt}function Oe(xt,pt,At,Jt){return pt===null||pt.tag!==6?(pt=Tl(At,xt.mode,Jt),pt.return=xt,pt):(pt=D(pt,At),pt.return=xt,pt)}function lt(xt,pt,At,Jt){var An=At.type;return An===R?Kt(xt,pt,At.props.children,Jt,At.key):pt!==null&&(pt.elementType===An||typeof An=="object"&&An!==null&&An.$$typeof===J&&Ae(An)===pt.type)?(pt=D(pt,At.props),Dt(pt,At),pt.return=xt,pt):(pt=cu(At.type,At.key,At.props,null,xt.mode,Jt),Dt(pt,At),pt.return=xt,pt)}function Ct(xt,pt,At,Jt){return pt===null||pt.tag!==4||pt.stateNode.containerInfo!==At.containerInfo||pt.stateNode.implementation!==At.implementation?(pt=Rc(At,xt.mode,Jt),pt.return=xt,pt):(pt=D(pt,At.children||[]),pt.return=xt,pt)}function Kt(xt,pt,At,Jt,An){return pt===null||pt.tag!==7?(pt=ca(At,xt.mode,Jt,An),pt.return=xt,pt):(pt=D(pt,At),pt.return=xt,pt)}function nr(xt,pt,At){if(typeof pt=="string"&&pt!==""||typeof pt=="number"||typeof pt=="bigint")return pt=Tl(""+pt,xt.mode,At),pt.return=xt,pt;if(typeof pt=="object"&&pt!==null){switch(pt.$$typeof){case E:return At=cu(pt.type,pt.key,pt.props,null,xt.mode,At),Dt(At,pt),At.return=xt,At;case O:return pt=Rc(pt,xt.mode,At),pt.return=xt,pt;case J:return pt=Ae(pt),nr(xt,pt,At)}if(Fe(pt)||ce(pt))return pt=ca(pt,xt.mode,At,null),pt.return=xt,pt;if(typeof pt.then=="function")return nr(xt,mt(pt),At);if(pt.$$typeof===z)return nr(xt,Wu(xt,pt),At);Rt(xt,pt)}return null}function It(xt,pt,At,Jt){var An=pt!==null?pt.key:null;if(typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint")return An!==null?null:Oe(xt,pt,""+At,Jt);if(typeof At=="object"&&At!==null){switch(At.$$typeof){case E:return At.key===An?lt(xt,pt,At,Jt):null;case O:return At.key===An?Ct(xt,pt,At,Jt):null;case J:return At=Ae(At),It(xt,pt,At,Jt)}if(Fe(At)||ce(At))return An!==null?null:Kt(xt,pt,At,Jt,null);if(typeof At.then=="function")return It(xt,pt,mt(At),Jt);if(At.$$typeof===z)return It(xt,pt,Wu(xt,At),Jt);Rt(xt,At)}return null}function Ut(xt,pt,At,Jt,An){if(typeof Jt=="string"&&Jt!==""||typeof Jt=="number"||typeof Jt=="bigint")return xt=xt.get(At)||null,Oe(pt,xt,""+Jt,An);if(typeof Jt=="object"&&Jt!==null){switch(Jt.$$typeof){case E:return xt=xt.get(Jt.key===null?At:Jt.key)||null,lt(pt,xt,Jt,An);case O:return xt=xt.get(Jt.key===null?At:Jt.key)||null,Ct(pt,xt,Jt,An);case J:return Jt=Ae(Jt),Ut(xt,pt,At,Jt,An)}if(Fe(Jt)||ce(Jt))return xt=xt.get(At)||null,Kt(pt,xt,Jt,An,null);if(typeof Jt.then=="function")return Ut(xt,pt,At,mt(Jt),An);if(Jt.$$typeof===z)return Ut(xt,pt,At,Wu(pt,Jt),An);Rt(pt,Jt)}return null}function Qr(xt,pt,At,Jt){for(var An=null,ms=null,un=pt,xi=pt=0,Ui=null;un!==null&&xi<At.length;xi++){un.index>xi?(Ui=un,un=null):Ui=un.sibling;var gs=It(xt,un,At[xi],Jt);if(gs===null){un===null&&(un=Ui);break}c&&un&&gs.alternate===null&&h(xt,un),pt=V(gs,pt,xi),ms===null?An=gs:ms.sibling=gs,ms=gs,un=Ui}if(xi===At.length)return b(xt,un),gn&&Wi(xt,xi),An;if(un===null){for(;xi<At.length;xi++)un=nr(xt,At[xi],Jt),un!==null&&(pt=V(un,pt,xi),ms===null?An=un:ms.sibling=un,ms=un);return gn&&Wi(xt,xi),An}for(un=A(un);xi<At.length;xi++)Ui=Ut(un,xt,xi,At[xi],Jt),Ui!==null&&(c&&Ui.alternate!==null&&un.delete(Ui.key===null?xi:Ui.key),pt=V(Ui,pt,xi),ms===null?An=Ui:ms.sibling=Ui,ms=Ui);return c&&un.forEach(function(im){return h(xt,im)}),gn&&Wi(xt,xi),An}function On(xt,pt,At,Jt){if(At==null)throw Error(i(151));for(var An=null,ms=null,un=pt,xi=pt=0,Ui=null,gs=At.next();un!==null&&!gs.done;xi++,gs=At.next()){un.index>xi?(Ui=un,un=null):Ui=un.sibling;var im=It(xt,un,gs.value,Jt);if(im===null){un===null&&(un=Ui);break}c&&un&&im.alternate===null&&h(xt,un),pt=V(im,pt,xi),ms===null?An=im:ms.sibling=im,ms=im,un=Ui}if(gs.done)return b(xt,un),gn&&Wi(xt,xi),An;if(un===null){for(;!gs.done;xi++,gs=At.next())gs=nr(xt,gs.value,Jt),gs!==null&&(pt=V(gs,pt,xi),ms===null?An=gs:ms.sibling=gs,ms=gs);return gn&&Wi(xt,xi),An}for(un=A(un);!gs.done;xi++,gs=At.next())gs=Ut(un,xt,xi,gs.value,Jt),gs!==null&&(c&&gs.alternate!==null&&un.delete(gs.key===null?xi:gs.key),pt=V(gs,pt,xi),ms===null?An=gs:ms.sibling=gs,ms=gs);return c&&un.forEach(function(_P){return h(xt,_P)}),gn&&Wi(xt,xi),An}function ra(xt,pt,At,Jt){if(typeof At=="object"&&At!==null&&At.type===R&&At.key===null&&(At=At.props.children),typeof At=="object"&&At!==null){switch(At.$$typeof){case E:e:{for(var An=At.key;pt!==null;){if(pt.key===An){if(An=At.type,An===R){if(pt.tag===7){b(xt,pt.sibling),Jt=D(pt,At.props.children),Jt.return=xt,xt=Jt;break e}}else if(pt.elementType===An||typeof An=="object"&&An!==null&&An.$$typeof===J&&Ae(An)===pt.type){b(xt,pt.sibling),Jt=D(pt,At.props),Dt(Jt,At),Jt.return=xt,xt=Jt;break e}b(xt,pt);break}else h(xt,pt);pt=pt.sibling}At.type===R?(Jt=ca(At.props.children,xt.mode,Jt,At.key),Jt.return=xt,xt=Jt):(Jt=cu(At.type,At.key,At.props,null,xt.mode,Jt),Dt(Jt,At),Jt.return=xt,xt=Jt)}return ae(xt);case O:e:{for(An=At.key;pt!==null;){if(pt.key===An)if(pt.tag===4&&pt.stateNode.containerInfo===At.containerInfo&&pt.stateNode.implementation===At.implementation){b(xt,pt.sibling),Jt=D(pt,At.children||[]),Jt.return=xt,xt=Jt;break e}else{b(xt,pt);break}else h(xt,pt);pt=pt.sibling}Jt=Rc(At,xt.mode,Jt),Jt.return=xt,xt=Jt}return ae(xt);case J:return At=Ae(At),ra(xt,pt,At,Jt)}if(Fe(At))return Qr(xt,pt,At,Jt);if(ce(At)){if(An=ce(At),typeof An!="function")throw Error(i(150));return At=An.call(At),On(xt,pt,At,Jt)}if(typeof At.then=="function")return ra(xt,pt,mt(At),Jt);if(At.$$typeof===z)return ra(xt,pt,Wu(xt,At),Jt);Rt(xt,At)}return typeof At=="string"&&At!==""||typeof At=="number"||typeof At=="bigint"?(At=""+At,pt!==null&&pt.tag===6?(b(xt,pt.sibling),Jt=D(pt,At),Jt.return=xt,xt=Jt):(b(xt,pt),Jt=Tl(At,xt.mode,Jt),Jt.return=xt,xt=Jt),ae(xt)):b(xt,pt)}return function(xt,pt,At,Jt){try{yt=0;var An=ra(xt,pt,At,Jt);return rt=null,An}catch(un){if(un===le||un===je)throw un;var ms=Ya(29,un,null,xt.mode);return ms.lanes=Jt,ms.return=xt,ms}finally{}}}var hr=vr(!0),Fr=vr(!1),Yt=!1;function Sr(c){c.updateQueue={baseState:c.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Pr(c,h){c=c.updateQueue,h.updateQueue===c&&(h.updateQueue={baseState:c.baseState,firstBaseUpdate:c.firstBaseUpdate,lastBaseUpdate:c.lastBaseUpdate,shared:c.shared,callbacks:null})}function ir(c){return{lane:c,tag:0,payload:null,callback:null,next:null}}function Ar(c,h,b){var A=c.updateQueue;if(A===null)return null;if(A=A.shared,(Bi&2)!==0){var D=A.pending;return D===null?h.next=h:(h.next=D.next,D.next=h),A.pending=h,h=tr(c),Hu(c,null,b),h}return rl(c,A,h,b),tr(c)}function Gr(c,h,b){if(h=h.updateQueue,h!==null&&(h=h.shared,(b&4194048)!==0)){var A=h.lanes;A&=c.pendingLanes,b|=A,h.lanes=b,nt(c,b)}}function Tr(c,h){var b=c.updateQueue,A=c.alternate;if(A!==null&&(A=A.updateQueue,b===A)){var D=null,V=null;if(b=b.firstBaseUpdate,b!==null){do{var ae={lane:b.lane,tag:b.tag,payload:b.payload,callback:null,next:null};V===null?D=V=ae:V=V.next=ae,b=b.next}while(b!==null);V===null?D=V=h:V=V.next=h}else D=V=h;b={baseState:A.baseState,firstBaseUpdate:D,lastBaseUpdate:V,shared:A.shared,callbacks:A.callbacks},c.updateQueue=b;return}c=b.lastBaseUpdate,c===null?b.firstBaseUpdate=h:c.next=h,b.lastBaseUpdate=h}var Rr=!1;function vn(){if(Rr){var c=y;if(c!==null)throw c}}function Jn(c,h,b,A){Rr=!1;var D=c.updateQueue;Yt=!1;var V=D.firstBaseUpdate,ae=D.lastBaseUpdate,Oe=D.shared.pending;if(Oe!==null){D.shared.pending=null;var lt=Oe,Ct=lt.next;lt.next=null,ae===null?V=Ct:ae.next=Ct,ae=lt;var Kt=c.alternate;Kt!==null&&(Kt=Kt.updateQueue,Oe=Kt.lastBaseUpdate,Oe!==ae&&(Oe===null?Kt.firstBaseUpdate=Ct:Oe.next=Ct,Kt.lastBaseUpdate=lt))}if(V!==null){var nr=D.baseState;ae=0,Kt=Ct=lt=null,Oe=V;do{var It=Oe.lane&-536870913,Ut=It!==Oe.lane;if(Ut?(di&It)===It:(A&It)===It){It!==0&&It===d&&(Rr=!0),Kt!==null&&(Kt=Kt.next={lane:0,tag:Oe.tag,payload:Oe.payload,callback:null,next:null});e:{var Qr=c,On=Oe;It=h;var ra=b;switch(On.tag){case 1:if(Qr=On.payload,typeof Qr=="function"){nr=Qr.call(ra,nr,It);break e}nr=Qr;break e;case 3:Qr.flags=Qr.flags&-65537|128;case 0:if(Qr=On.payload,It=typeof Qr=="function"?Qr.call(ra,nr,It):Qr,It==null)break e;nr=S({},nr,It);break e;case 2:Yt=!0}}It=Oe.callback,It!==null&&(c.flags|=64,Ut&&(c.flags|=8192),Ut=D.callbacks,Ut===null?D.callbacks=[It]:Ut.push(It))}else Ut={lane:It,tag:Oe.tag,payload:Oe.payload,callback:Oe.callback,next:null},Kt===null?(Ct=Kt=Ut,lt=nr):Kt=Kt.next=Ut,ae|=It;if(Oe=Oe.next,Oe===null){if(Oe=D.shared.pending,Oe===null)break;Ut=Oe,Oe=Ut.next,Ut.next=null,D.lastBaseUpdate=Ut,D.shared.pending=null}}while(!0);Kt===null&&(lt=nr),D.baseState=lt,D.firstBaseUpdate=Ct,D.lastBaseUpdate=Kt,V===null&&(D.shared.lanes=0),fh|=ae,c.lanes=ae,c.memoizedState=nr}}function Fi(c,h){if(typeof c!="function")throw Error(i(191,c));c.call(h)}function ui(c,h){var b=c.callbacks;if(b!==null)for(c.callbacks=null,c=0;c<b.length;c++)Fi(b[c],h)}var In=Re(null),Qn=Re(0);function us(c,h){c=Fd,ue(Qn,c),ue(In,h),Fd=c|h.baseLanes}function rs(){ue(Qn,Fd),ue(In,In.current)}function ns(){Fd=Qn.current,te(In),te(Qn)}var vi=Re(null),Yi=null;function Ds(c){var h=c.alternate;ue(ds,ds.current&1),ue(vi,c),Yi===null&&(h===null||In.current!==null||h.memoizedState!==null)&&(Yi=c)}function ll(c){ue(ds,ds.current),ue(vi,c),Yi===null&&(Yi=c)}function Zi(c){c.tag===22?(ue(ds,ds.current),ue(vi,c),Yi===null&&(Yi=c)):io()}function io(){ue(ds,ds.current),ue(vi,vi.current)}function za(c){te(vi),Yi===c&&(Yi=null),te(ds)}var ds=Re(0);function jo(c){for(var h=c;h!==null;){if(h.tag===13){var b=h.memoizedState;if(b!==null&&(b=b.dehydrated,b===null||sg(b)||lv(b)))return h}else if(h.tag===19&&(h.memoizedProps.revealOrder==="forwards"||h.memoizedProps.revealOrder==="backwards"||h.memoizedProps.revealOrder==="unstable_legacy-backwards"||h.memoizedProps.revealOrder==="together")){if((h.flags&128)!==0)return h}else if(h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return null;h=h.return}h.sibling.return=h.return,h=h.sibling}return null}var so=0,hn=null,sn=null,Ni=null,No=!1,Il=!1,Mn=!1,ao=0,Qs=0,cl=null,Wh=0;function Vi(){throw Error(i(321))}function kf(c,h){if(h===null)return!1;for(var b=0;b<h.length&&b<c.length;b++)if(!Pa(c[b],h[b]))return!1;return!0}function Yu(c,h,b,A,D,V){return so=V,hn=h,h.memoizedState=null,h.updateQueue=null,h.lanes=0,Q.H=c===null||c.memoizedState===null?A0:Oy,Mn=!1,V=b(A,D),Mn=!1,Il&&(V=ul(h,b,A,D)),oh(c),V}function oh(c){Q.H=Cp;var h=sn!==null&&sn.next!==null;if(so=0,Ni=sn=hn=null,No=!1,Qs=0,cl=null,h)throw Error(i(300));c===null||lo||(c=c.dependencies,c!==null&&kd(c)&&(lo=!0))}function ul(c,h,b,A){hn=c;var D=0;do{if(Il&&(cl=null),Qs=0,Il=!1,25<=D)throw Error(i(301));if(D+=1,Ni=sn=null,c.updateQueue!=null){var V=c.updateQueue;V.lastEffect=null,V.events=null,V.stores=null,V.memoCache!=null&&(V.memoCache.index=0)}Q.H=C0,V=h(b,A)}while(Il);return V}function Yh(){var c=Q.H,h=c.useState()[0];return h=typeof h.then=="function"?Ed(h):h,c=c.useState()[0],(sn!==null?sn.memoizedState:null)!==c&&(hn.flags|=1024),h}function Ef(){var c=ao!==0;return ao=0,c}function Zu(c,h,b){h.updateQueue=c.updateQueue,h.flags&=-2053,c.lanes&=~b}function oo(c){if(No){for(c=c.memoizedState;c!==null;){var h=c.queue;h!==null&&(h.pending=null),c=c.next}No=!1}so=0,Ni=sn=hn=null,Il=!1,Qs=ao=0,cl=null}function So(){var c={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ni===null?hn.memoizedState=Ni=c:Ni=Ni.next=c,Ni}function da(){if(sn===null){var c=hn.alternate;c=c!==null?c.memoizedState:null}else c=sn.next;var h=Ni===null?hn.memoizedState:Ni.next;if(h!==null)Ni=h,sn=c;else{if(c===null)throw hn.alternate===null?Error(i(467)):Error(i(310));sn=c,c={memoizedState:sn.memoizedState,baseState:sn.baseState,baseQueue:sn.baseQueue,queue:sn.queue,next:null},Ni===null?hn.memoizedState=Ni=c:Ni=Ni.next=c}return Ni}function Tf(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Ed(c){var h=Qs;return Qs+=1,cl===null&&(cl=[]),c=Ie(cl,c,h),h=hn,(Ni===null?h.memoizedState:Ni.next)===null&&(h=h.alternate,Q.H=h===null||h.memoizedState===null?A0:Oy),c}function Zh(c){if(c!==null&&typeof c=="object"){if(typeof c.then=="function")return Ed(c);if(c.$$typeof===z)return Ms(c)}throw Error(i(438,String(c)))}function lh(c){var h=null,b=hn.updateQueue;if(b!==null&&(h=b.memoCache),h==null){var A=hn.alternate;A!==null&&(A=A.updateQueue,A!==null&&(A=A.memoCache,A!=null&&(h={data:A.data.map(function(D){return D.slice()}),index:0})))}if(h==null&&(h={data:[],index:0}),b===null&&(b=Tf(),hn.updateQueue=b),b.memoCache=h,b=h.data[h.index],b===void 0)for(b=h.data[h.index]=Array(c),A=0;A<c;A++)b[A]=_e;return h.index++,b}function Lc(c,h){return typeof h=="function"?h(c):h}function jp(c){var h=da();return Ku(h,sn,c)}function Ku(c,h,b){var A=c.queue;if(A===null)throw Error(i(311));A.lastRenderedReducer=b;var D=c.baseQueue,V=A.pending;if(V!==null){if(D!==null){var ae=D.next;D.next=V.next,V.next=ae}h.baseQueue=D=V,A.pending=null}if(V=c.baseState,D===null)c.memoizedState=V;else{h=D.next;var Oe=ae=null,lt=null,Ct=h,Kt=!1;do{var nr=Ct.lane&-536870913;if(nr!==Ct.lane?(di&nr)===nr:(so&nr)===nr){var It=Ct.revertLane;if(It===0)lt!==null&&(lt=lt.next={lane:0,revertLane:0,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null}),nr===d&&(Kt=!0);else if((so&It)===It){Ct=Ct.next,It===d&&(Kt=!0);continue}else nr={lane:0,revertLane:Ct.revertLane,gesture:null,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},lt===null?(Oe=lt=nr,ae=V):lt=lt.next=nr,hn.lanes|=It,fh|=It;nr=Ct.action,Mn&&b(V,nr),V=Ct.hasEagerState?Ct.eagerState:b(V,nr)}else It={lane:nr,revertLane:Ct.revertLane,gesture:Ct.gesture,action:Ct.action,hasEagerState:Ct.hasEagerState,eagerState:Ct.eagerState,next:null},lt===null?(Oe=lt=It,ae=V):lt=lt.next=It,hn.lanes|=nr,fh|=nr;Ct=Ct.next}while(Ct!==null&&Ct!==h);if(lt===null?ae=V:lt.next=Oe,!Pa(V,c.memoizedState)&&(lo=!0,Kt&&(b=y,b!==null)))throw b;c.memoizedState=V,c.baseState=ae,c.baseQueue=lt,A.lastRenderedState=V}return D===null&&(A.lanes=0),[c.memoizedState,A.dispatch]}function Pf(c){var h=da(),b=h.queue;if(b===null)throw Error(i(311));b.lastRenderedReducer=c;var A=b.dispatch,D=b.pending,V=h.memoizedState;if(D!==null){b.pending=null;var ae=D=D.next;do V=c(V,ae.action),ae=ae.next;while(ae!==D);Pa(V,h.memoizedState)||(lo=!0),h.memoizedState=V,h.baseQueue===null&&(h.baseState=V),b.lastRenderedState=V}return[V,A]}function pu(c,h,b){var A=hn,D=da(),V=gn;if(V){if(b===void 0)throw Error(i(407));b=b()}else b=h();var ae=!Pa((sn||D).memoizedState,b);if(ae&&(D.memoizedState=b,lo=!0),D=D.queue,If(Um.bind(null,A,D,c),[c]),D.getSnapshot!==h||ae||Ni!==null&&Ni.memoizedState.tag&1){if(A.flags|=2048,Id(9,{destroy:void 0},Bm.bind(null,A,D,b,h),null),$i===null)throw Error(i(349));V||(so&127)!==0||vc(A,h,b)}return b}function vc(c,h,b){c.flags|=16384,c={getSnapshot:h,value:b},h=hn.updateQueue,h===null?(h=Tf(),hn.updateQueue=h,h.stores=[c]):(b=h.stores,b===null?h.stores=[c]:b.push(c))}function Bm(c,h,b,A){h.value=b,h.getSnapshot=A,zg(h)&&qm(c)}function Um(c,h,b){return b(function(){zg(h)&&qm(c)})}function zg(c){var h=c.getSnapshot;c=c.value;try{var b=h();return!Pa(c,b)}catch{return!0}}function qm(c){var h=Xs(c,2);h!==null&&P(h,c,2)}function Td(c){var h=So();if(typeof c=="function"){var b=c;if(c=b(),Mn){kn(!0);try{b()}finally{kn(!1)}}}return h.memoizedState=h.baseState=c,h.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:c},h}function Fg(c,h,b,A){return c.baseState=b,Ku(c,sn,typeof A=="function"?A:Lc)}function Bg(c,h,b,A,D){if($g(c))throw Error(i(485));if(c=h.action,c!==null){var V={payload:D,action:c,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(ae){V.listeners.push(ae)}};Q.T!==null?b(!0):V.isTransition=!1,A(V),b=h.pending,b===null?(V.next=h.pending=V,Np(h,V)):(V.next=b.next,h.pending=b.next=V)}}function Np(c,h){var b=h.action,A=h.payload,D=c.state;if(h.isTransition){var V=Q.T,ae={};Q.T=ae;try{var Oe=b(D,A),lt=Q.S;lt!==null&&lt(ae,Oe),Vm(c,h,Oe)}catch(Ct){uh(c,h,Ct)}finally{V!==null&&ae.types!==null&&(V.types=ae.types),Q.T=V}}else try{V=b(D,A),Vm(c,h,V)}catch(Ct){uh(c,h,Ct)}}function Vm(c,h,b){b!==null&&typeof b=="object"&&typeof b.then=="function"?b.then(function(A){ch(c,h,A)},function(A){return uh(c,h,A)}):ch(c,h,b)}function ch(c,h,b){h.status="fulfilled",h.value=b,Os(h),c.state=b,h=c.pending,h!==null&&(b=h.next,b===h?c.pending=null:(b=b.next,h.next=b,Np(c,b)))}function uh(c,h,b){var A=c.pending;if(c.pending=null,A!==null){A=A.next;do h.status="rejected",h.reason=b,Os(h),h=h.next;while(h!==A)}c.action=null}function Os(c){c=c.listeners;for(var h=0;h<c.length;h++)(0,c[h])()}function Pd(c,h){return h}function mu(c,h){if(gn){var b=$i.formState;if(b!==null){e:{var A=hn;if(gn){if(gi){t:{for(var D=gi,V=Ls;D.nodeType!==8;){if(!V){D=null;break t}if(D=fo(D.nextSibling),D===null){D=null;break t}}V=D.data,D=V==="F!"||V==="F"?D:null}if(D){gi=fo(D.nextSibling),A=D.data==="F!";break e}}Gn(A)}A=!1}A&&(h=b[0])}}return b=So(),b.memoizedState=b.baseState=h,A={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Pd,lastRenderedState:h},b.queue=A,b=Sp.bind(null,hn,A),A.dispatch=b,A=Td(!1),V=Dy.bind(null,hn,!1,A.queue),A=So(),D={state:h,dispatch:null,action:c,pending:null},A.queue=D,b=Bg.bind(null,hn,D,V,b),D.dispatch=b,A.memoizedState=c,[h,b,!1]}function Mc(c){var h=da();return Dc(h,sn,c)}function Dc(c,h,b){if(h=Ku(c,h,Pd)[0],c=jp(Lc)[0],typeof h=="object"&&h!==null&&typeof h.then=="function")try{var A=Ed(h)}catch(ae){throw ae===le?je:ae}else A=h;h=da();var D=h.queue,V=D.dispatch;return b!==h.memoizedState&&(hn.flags|=2048,Id(9,{destroy:void 0},Rd.bind(null,D,b),null)),[A,V,c]}function Rd(c,h){c.action=h}function Rf(c){var h=da(),b=sn;if(b!==null)return Dc(h,b,c);da(),h=h.memoizedState,b=da();var A=b.queue.dispatch;return b.memoizedState=c,[h,A,!1]}function Id(c,h,b,A){return c={tag:c,create:b,deps:A,inst:h,next:null},h=hn.updateQueue,h===null&&(h=Tf(),hn.updateQueue=h),b=h.lastEffect,b===null?h.lastEffect=c.next=c:(A=b.next,b.next=c,c.next=A,h.lastEffect=c),c}function Kh(){return da().memoizedState}function Ld(c,h,b,A){var D=So();hn.flags|=c,D.memoizedState=Id(1|h,{destroy:void 0},b,A===void 0?null:A)}function Md(c,h,b,A){var D=da();A=A===void 0?null:A;var V=D.memoizedState.inst;sn!==null&&A!==null&&kf(A,sn.memoizedState.deps)?D.memoizedState=Id(h,V,b,A):(hn.flags|=c,D.memoizedState=Id(1|h,V,b,A))}function b0(c,h){Ld(8390656,8,c,h)}function If(c,h){Md(2048,8,c,h)}function N_(c){hn.flags|=4;var h=hn.updateQueue;if(h===null)h=Tf(),hn.updateQueue=h,h.events=[c];else{var b=h.events;b===null?h.events=[c]:b.push(c)}}function Ug(c){var h=da().memoizedState;return N_({ref:h,nextImpl:c}),function(){if((Bi&2)!==0)throw Error(i(440));return h.impl.apply(void 0,arguments)}}function _0(c,h){return Md(4,2,c,h)}function qg(c,h){return Md(4,4,c,h)}function Vg(c,h){if(typeof h=="function"){c=c();var b=h(c);return function(){typeof b=="function"?b():h(null)}}if(h!=null)return c=c(),h.current=c,function(){h.current=null}}function Pu(c,h,b){b=b!=null?b.concat([c]):null,Md(4,4,Vg.bind(null,h,c),b)}function ky(){}function w0(c,h){var b=da();h=h===void 0?null:h;var A=b.memoizedState;return h!==null&&kf(h,A[1])?A[0]:(b.memoizedState=[c,h],c)}function j0(c,h){var b=da();h=h===void 0?null:h;var A=b.memoizedState;if(h!==null&&kf(h,A[1]))return A[0];if(A=c(),Mn){kn(!0);try{c()}finally{kn(!1)}}return b.memoizedState=[A,h],A}function Ey(c,h,b){return b===void 0||(so&1073741824)!==0&&(di&261930)===0?c.memoizedState=h:(c.memoizedState=b,c=C(),hn.lanes|=c,fh|=c,b)}function Ty(c,h,b,A){return Pa(b,h)?b:In.current!==null?(c=Ey(c,b,A),Pa(c,h)||(lo=!0),c):(so&42)===0||(so&1073741824)!==0&&(di&261930)===0?(lo=!0,c.memoizedState=b):(c=C(),hn.lanes|=c,fh|=c,h)}function Lf(c,h,b,A,D){var V=pe.p;pe.p=V!==0&&8>V?V:8;var ae=Q.T,Oe={};Q.T=Oe,Dy(c,!1,h,b);try{var lt=D(),Ct=Q.S;if(Ct!==null&&Ct(Oe,lt),lt!==null&&typeof lt=="object"&&typeof lt.then=="function"){var Kt=I(lt,A);yc(c,h,Kt,_(c))}else yc(c,h,A,_(c))}catch(nr){yc(c,h,{then:function(){},status:"rejected",reason:nr},_())}finally{pe.p=V,ae!==null&&Oe.types!==null&&(ae.types=Oe.types),Q.T=ae}}function S_(){}function Py(c,h,b,A){if(c.tag!==5)throw Error(i(476));var D=Ry(c).queue;Lf(c,D,h,me,b===null?S_:function(){return Iy(c),b(A)})}function Ry(c){var h=c.memoizedState;if(h!==null)return h;h={memoizedState:me,baseState:me,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:me},next:null};var b={};return h.next={memoizedState:b,baseState:b,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Lc,lastRenderedState:b},next:null},c.memoizedState=h,c=c.alternate,c!==null&&(c.memoizedState=h),h}function Iy(c){var h=Ry(c);h.next===null&&(h=c.alternate.memoizedState),yc(c,h.next.queue,{},_())}function Ly(){return Ms(Qp)}function N0(){return da().memoizedState}function Mf(){return da().memoizedState}function A_(c){for(var h=c.return;h!==null;){switch(h.tag){case 24:case 3:var b=_();c=ir(b);var A=Ar(h,c,b);A!==null&&(P(A,h,b),Gr(A,h,b)),h={cache:fu()},c.payload=h;return}h=h.return}}function My(c,h,b){var A=_();b={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null},$g(c)?S0(h,b):(b=bo(c,h,b,A),b!==null&&(P(b,c,A),Ap(b,h,A)))}function Sp(c,h,b){var A=_();yc(c,h,b,A)}function yc(c,h,b,A){var D={lane:A,revertLane:0,gesture:null,action:b,hasEagerState:!1,eagerState:null,next:null};if($g(c))S0(h,D);else{var V=c.alternate;if(c.lanes===0&&(V===null||V.lanes===0)&&(V=h.lastRenderedReducer,V!==null))try{var ae=h.lastRenderedState,Oe=V(ae,b);if(D.hasEagerState=!0,D.eagerState=Oe,Pa(Oe,ae))return rl(c,h,D,0),$i===null&&mc(),!1}catch{}finally{}if(b=bo(c,h,D,A),b!==null)return P(b,c,A),Ap(b,h,A),!0}return!1}function Dy(c,h,b,A){if(A={lane:2,revertLane:ta(),gesture:null,action:A,hasEagerState:!1,eagerState:null,next:null},$g(c)){if(h)throw Error(i(479))}else h=bo(c,b,A,2),h!==null&&P(h,c,2)}function $g(c){var h=c.alternate;return c===hn||h!==null&&h===hn}function S0(c,h){Il=No=!0;var b=c.pending;b===null?h.next=h:(h.next=b.next,b.next=h),c.pending=h}function Ap(c,h,b){if((b&4194048)!==0){var A=h.lanes;A&=c.pendingLanes,b|=A,h.lanes=b,nt(c,b)}}var Cp={readContext:Ms,use:Zh,useCallback:Vi,useContext:Vi,useEffect:Vi,useImperativeHandle:Vi,useLayoutEffect:Vi,useInsertionEffect:Vi,useMemo:Vi,useReducer:Vi,useRef:Vi,useState:Vi,useDebugValue:Vi,useDeferredValue:Vi,useTransition:Vi,useSyncExternalStore:Vi,useId:Vi,useHostTransitionStatus:Vi,useFormState:Vi,useActionState:Vi,useOptimistic:Vi,useMemoCache:Vi,useCacheRefresh:Vi};Cp.useEffectEvent=Vi;var A0={readContext:Ms,use:Zh,useCallback:function(c,h){return So().memoizedState=[c,h===void 0?null:h],c},useContext:Ms,useEffect:b0,useImperativeHandle:function(c,h,b){b=b!=null?b.concat([c]):null,Ld(4194308,4,Vg.bind(null,h,c),b)},useLayoutEffect:function(c,h){return Ld(4194308,4,c,h)},useInsertionEffect:function(c,h){Ld(4,2,c,h)},useMemo:function(c,h){var b=So();h=h===void 0?null:h;var A=c();if(Mn){kn(!0);try{c()}finally{kn(!1)}}return b.memoizedState=[A,h],A},useReducer:function(c,h,b){var A=So();if(b!==void 0){var D=b(h);if(Mn){kn(!0);try{b(h)}finally{kn(!1)}}}else D=h;return A.memoizedState=A.baseState=D,c={pending:null,lanes:0,dispatch:null,lastRenderedReducer:c,lastRenderedState:D},A.queue=c,c=c.dispatch=My.bind(null,hn,c),[A.memoizedState,c]},useRef:function(c){var h=So();return c={current:c},h.memoizedState=c},useState:function(c){c=Td(c);var h=c.queue,b=Sp.bind(null,hn,h);return h.dispatch=b,[c.memoizedState,b]},useDebugValue:ky,useDeferredValue:function(c,h){var b=So();return Ey(b,c,h)},useTransition:function(){var c=Td(!1);return c=Lf.bind(null,hn,c.queue,!0,!1),So().memoizedState=c,[!1,c]},useSyncExternalStore:function(c,h,b){var A=hn,D=So();if(gn){if(b===void 0)throw Error(i(407));b=b()}else{if(b=h(),$i===null)throw Error(i(349));(di&127)!==0||vc(A,h,b)}D.memoizedState=b;var V={value:b,getSnapshot:h};return D.queue=V,b0(Um.bind(null,A,V,c),[c]),A.flags|=2048,Id(9,{destroy:void 0},Bm.bind(null,A,V,b,h),null),b},useId:function(){var c=So(),h=$i.identifierPrefix;if(gn){var b=Js,A=Da;b=(A&~(1<<32-yn(A)-1)).toString(32)+b,h="_"+h+"R_"+b,b=ao++,0<b&&(h+="H"+b.toString(32)),h+="_"}else b=Wh++,h="_"+h+"r_"+b.toString(32)+"_";return c.memoizedState=h},useHostTransitionStatus:Ly,useFormState:mu,useActionState:mu,useOptimistic:function(c){var h=So();h.memoizedState=h.baseState=c;var b={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return h.queue=b,h=Dy.bind(null,hn,!0,b),b.dispatch=h,[c,h]},useMemoCache:lh,useCacheRefresh:function(){return So().memoizedState=A_.bind(null,hn)},useEffectEvent:function(c){var h=So(),b={impl:c};return h.memoizedState=b,function(){if((Bi&2)!==0)throw Error(i(440));return b.impl.apply(void 0,arguments)}}},Oy={readContext:Ms,use:Zh,useCallback:w0,useContext:Ms,useEffect:If,useImperativeHandle:Pu,useInsertionEffect:_0,useLayoutEffect:qg,useMemo:j0,useReducer:jp,useRef:Kh,useState:function(){return jp(Lc)},useDebugValue:ky,useDeferredValue:function(c,h){var b=da();return Ty(b,sn.memoizedState,c,h)},useTransition:function(){var c=jp(Lc)[0],h=da().memoizedState;return[typeof c=="boolean"?c:Ed(c),h]},useSyncExternalStore:pu,useId:N0,useHostTransitionStatus:Ly,useFormState:Mc,useActionState:Mc,useOptimistic:function(c,h){var b=da();return Fg(b,sn,c,h)},useMemoCache:lh,useCacheRefresh:Mf};Oy.useEffectEvent=Ug;var C0={readContext:Ms,use:Zh,useCallback:w0,useContext:Ms,useEffect:If,useImperativeHandle:Pu,useInsertionEffect:_0,useLayoutEffect:qg,useMemo:j0,useReducer:Pf,useRef:Kh,useState:function(){return Pf(Lc)},useDebugValue:ky,useDeferredValue:function(c,h){var b=da();return sn===null?Ey(b,c,h):Ty(b,sn.memoizedState,c,h)},useTransition:function(){var c=Pf(Lc)[0],h=da().memoizedState;return[typeof c=="boolean"?c:Ed(c),h]},useSyncExternalStore:pu,useId:N0,useHostTransitionStatus:Ly,useFormState:Rf,useActionState:Rf,useOptimistic:function(c,h){var b=da();return sn!==null?Fg(b,sn,c,h):(b.baseState=c,[c,b.queue.dispatch])},useMemoCache:lh,useCacheRefresh:Mf};C0.useEffectEvent=Ug;function zy(c,h,b,A){h=c.memoizedState,b=b(A,h),b=b==null?h:S({},h,b),c.memoizedState=b,c.lanes===0&&(c.updateQueue.baseState=b)}var Hg={enqueueSetState:function(c,h,b){c=c._reactInternals;var A=_(),D=ir(A);D.payload=h,b!=null&&(D.callback=b),h=Ar(c,D,A),h!==null&&(P(h,c,A),Gr(h,c,A))},enqueueReplaceState:function(c,h,b){c=c._reactInternals;var A=_(),D=ir(A);D.tag=1,D.payload=h,b!=null&&(D.callback=b),h=Ar(c,D,A),h!==null&&(P(h,c,A),Gr(h,c,A))},enqueueForceUpdate:function(c,h){c=c._reactInternals;var b=_(),A=ir(b);A.tag=2,h!=null&&(A.callback=h),h=Ar(c,A,b),h!==null&&(P(h,c,b),Gr(h,c,b))}};function dl(c,h,b,A,D,V,ae){return c=c.stateNode,typeof c.shouldComponentUpdate=="function"?c.shouldComponentUpdate(A,V,ae):h.prototype&&h.prototype.isPureReactComponent?!el(b,A)||!el(D,V):!0}function k0(c,h,b,A){c=h.state,typeof h.componentWillReceiveProps=="function"&&h.componentWillReceiveProps(b,A),typeof h.UNSAFE_componentWillReceiveProps=="function"&&h.UNSAFE_componentWillReceiveProps(b,A),h.state!==c&&Hg.enqueueReplaceState(h,h.state,null)}function Xh(c,h){var b=h;if("ref"in h){b={};for(var A in h)A!=="ref"&&(b[A]=h[A])}if(c=c.defaultProps){b===h&&(b=S({},b));for(var D in c)b[D]===void 0&&(b[D]=c[D])}return b}function Fy(c){zi(c)}function E0(c){console.error(c)}function By(c){zi(c)}function Gg(c,h){try{var b=c.onUncaughtError;b(h.value,{componentStack:h.stack})}catch(A){setTimeout(function(){throw A})}}function T0(c,h,b){try{var A=c.onCaughtError;A(b.value,{componentStack:b.stack,errorBoundary:h.tag===1?h.stateNode:null})}catch(D){setTimeout(function(){throw D})}}function Uy(c,h,b){return b=ir(b),b.tag=3,b.payload={element:null},b.callback=function(){Gg(c,h)},b}function qy(c){return c=ir(c),c.tag=3,c}function P0(c,h,b,A){var D=b.type.getDerivedStateFromError;if(typeof D=="function"){var V=A.value;c.payload=function(){return D(V)},c.callback=function(){T0(h,b,A)}}var ae=b.stateNode;ae!==null&&typeof ae.componentDidCatch=="function"&&(c.callback=function(){T0(h,b,A),typeof D!="function"&&(Ql===null?Ql=new Set([this]):Ql.add(this));var Oe=A.stack;this.componentDidCatch(A.value,{componentStack:Oe!==null?Oe:""})})}function C_(c,h,b,A,D){if(b.flags|=32768,A!==null&&typeof A=="object"&&typeof A.then=="function"){if(h=b.alternate,h!==null&&ol(h,b,D,!0),b=vi.current,b!==null){switch(b.tag){case 31:case 13:return Yi===null?Je():b.alternate===null&&Fa===0&&(Fa=3),b.flags&=-257,b.flags|=65536,b.lanes=D,A===de?b.flags|=16384:(h=b.updateQueue,h===null?b.updateQueue=new Set([A]):h.add(A),hi(c,A,D)),!1;case 22:return b.flags|=65536,A===de?b.flags|=16384:(h=b.updateQueue,h===null?(h={transitions:null,markerInstances:null,retryQueue:new Set([A])},b.updateQueue=h):(b=h.retryQueue,b===null?h.retryQueue=new Set([A]):b.add(A)),hi(c,A,D)),!1}throw Error(i(435,b.tag))}return hi(c,A,D),Je(),!1}if(gn)return h=vi.current,h!==null?((h.flags&65536)===0&&(h.flags|=256),h.flags|=65536,h.lanes=D,A!==al&&(c=Error(i(422),{cause:A}),Oa(nl(c,b)))):(A!==al&&(h=Error(i(423),{cause:A}),Oa(nl(h,b))),c=c.current.alternate,c.flags|=65536,D&=-D,c.lanes|=D,A=nl(A,b),D=Uy(c.stateNode,A,D),Tr(c,D),Fa!==4&&(Fa=2)),!1;var V=Error(i(520),{cause:A});if(V=nl(V,b),qs===null?qs=[V]:qs.push(V),Fa!==4&&(Fa=2),h===null)return!0;A=nl(A,b),b=h;do{switch(b.tag){case 3:return b.flags|=65536,c=D&-D,b.lanes|=c,c=Uy(b.stateNode,A,c),Tr(b,c),!1;case 1:if(h=b.type,V=b.stateNode,(b.flags&128)===0&&(typeof h.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(Ql===null||!Ql.has(V))))return b.flags|=65536,D&=-D,b.lanes|=D,D=qy(D),P0(D,c,b,A),Tr(b,D),!1}b=b.return}while(b!==null);return!1}var Df=Error(i(461)),lo=!1;function hl(c,h,b,A){h.child=c===null?Fr(h,null,b,A):hr(h,c.child,b,A)}function $m(c,h,b,A,D){b=b.render;var V=h.ref;if("ref"in A){var ae={};for(var Oe in A)Oe!=="ref"&&(ae[Oe]=A[Oe])}else ae=A;return Oo(h),A=Yu(c,h,b,ae,V,D),Oe=Ef(),c!==null&&!lo?(Zu(c,h,D),gu(c,h,D)):(gn&&Oe&&qr(h),h.flags|=1,hl(c,h,A,D),h.child)}function Ki(c,h,b,A,D){if(c===null){var V=b.type;return typeof V=="function"&&!Do(V)&&V.defaultProps===void 0&&b.compare===null?(h.tag=15,h.type=V,Vy(c,h,V,A,D)):(c=cu(b.type,null,A,h,h.mode,D),c.ref=h.ref,c.return=h,h.child=c)}if(V=c.child,!Xl(c,D)){var ae=V.memoizedProps;if(b=b.compare,b=b!==null?b:el,b(ae,A)&&c.ref===h.ref)return gu(c,h,D)}return h.flags|=1,c=js(V,A),c.ref=h.ref,c.return=h,h.child=c}function Vy(c,h,b,A,D){if(c!==null){var V=c.memoizedProps;if(el(V,A)&&c.ref===h.ref)if(lo=!1,h.pendingProps=A=V,Xl(c,D))(c.flags&131072)!==0&&(lo=!0);else return h.lanes=c.lanes,gu(c,h,D)}return Hy(c,h,b,A,D)}function Dd(c,h,b,A){var D=A.children,V=c!==null?c.memoizedState:null;if(c===null&&h.stateNode===null&&(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),A.mode==="hidden"){if((h.flags&128)!==0){if(V=V!==null?V.baseLanes|b:b,c!==null){for(A=h.child=c.child,D=0;A!==null;)D=D|A.lanes|A.childLanes,A=A.sibling;A=D&~V}else A=0,h.child=null;return $y(c,h,V,b,A)}if((b&536870912)!==0)h.memoizedState={baseLanes:0,cachePool:null},c!==null&&Y(h,V!==null?V.cachePool:null),V!==null?us(h,V):rs(),Zi(h);else return A=h.lanes=536870912,$y(c,h,V!==null?V.baseLanes|b:b,b,A)}else V!==null?(Y(h,V.cachePool),us(h,V),io(),h.memoizedState=null):(c!==null&&Y(h,null),rs(),io());return hl(c,h,D,b),h.child}function Od(c,h){return c!==null&&c.tag===22||h.stateNode!==null||(h.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null}),h.sibling}function $y(c,h,b,A,D){var V=W();return V=V===null?null:{parent:Us._currentValue,pool:V},h.memoizedState={baseLanes:b,cachePool:V},c!==null&&Y(h,null),rs(),Zi(h),c!==null&&ol(c,h,A,!0),h.childLanes=D,null}function Wg(c,h){return h=Zg({mode:h.mode,children:h.children},c.mode),h.ref=c.ref,c.child=h,h.return=c,h}function R0(c,h,b){return hr(h,c.child,null,b),c=Wg(h,h.pendingProps),c.flags|=2,za(h),h.memoizedState=null,c}function k_(c,h,b){var A=h.pendingProps,D=(h.flags&128)!==0;if(h.flags&=-129,c===null){if(gn){if(A.mode==="hidden")return c=Wg(h,A),h.lanes=536870912,Od(null,c);if(ll(h),(c=gi)?(c=wh(c,Ls),c=c!==null&&c.data==="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:sl!==null?{id:Da,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},b=ih(c),b.return=h,h.child=b,Ci=h,gi=null)):c=null,c===null)throw Gn(h);return h.lanes=536870912,null}return Wg(h,A)}var V=c.memoizedState;if(V!==null){var ae=V.dehydrated;if(ll(h),D)if(h.flags&256)h.flags&=-257,h=R0(c,h,b);else if(h.memoizedState!==null)h.child=c.child,h.flags|=128,h=null;else throw Error(i(558));else if(lo||ol(c,h,b,!1),D=(b&c.childLanes)!==0,lo||D){if(A=$i,A!==null&&(ae=ke(A,b),ae!==0&&ae!==V.retryLane))throw V.retryLane=ae,Xs(c,ae),P(A,c,ae),Df;Je(),h=R0(c,h,b)}else c=V.treeContext,gi=fo(ae.nextSibling),Ci=h,gn=!0,Is=null,Ls=!1,c!==null&&sh(h,c),h=Wg(h,A),h.flags|=4096;return h}return c=js(c.child,{mode:A.mode,children:A.children}),c.ref=h.ref,h.child=c,c.return=h,c}function Yg(c,h){var b=h.ref;if(b===null)c!==null&&c.ref!==null&&(h.flags|=4194816);else{if(typeof b!="function"&&typeof b!="object")throw Error(i(284));(c===null||c.ref!==b)&&(h.flags|=4194816)}}function Hy(c,h,b,A,D){return Oo(h),b=Yu(c,h,b,A,void 0,D),A=Ef(),c!==null&&!lo?(Zu(c,h,D),gu(c,h,D)):(gn&&A&&qr(h),h.flags|=1,hl(c,h,b,D),h.child)}function I0(c,h,b,A,D,V){return Oo(h),h.updateQueue=null,b=ul(h,A,b,D),oh(c),A=Ef(),c!==null&&!lo?(Zu(c,h,V),gu(c,h,V)):(gn&&A&&qr(h),h.flags|=1,hl(c,h,b,V),h.child)}function L0(c,h,b,A,D){if(Oo(h),h.stateNode===null){var V=La,ae=b.contextType;typeof ae=="object"&&ae!==null&&(V=Ms(ae)),V=new b(A,V),h.memoizedState=V.state!==null&&V.state!==void 0?V.state:null,V.updater=Hg,h.stateNode=V,V._reactInternals=h,V=h.stateNode,V.props=A,V.state=h.memoizedState,V.refs={},Sr(h),ae=b.contextType,V.context=typeof ae=="object"&&ae!==null?Ms(ae):La,V.state=h.memoizedState,ae=b.getDerivedStateFromProps,typeof ae=="function"&&(zy(h,b,ae,A),V.state=h.memoizedState),typeof b.getDerivedStateFromProps=="function"||typeof V.getSnapshotBeforeUpdate=="function"||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(ae=V.state,typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount(),ae!==V.state&&Hg.enqueueReplaceState(V,V.state,null),Jn(h,A,V,D),vn(),V.state=h.memoizedState),typeof V.componentDidMount=="function"&&(h.flags|=4194308),A=!0}else if(c===null){V=h.stateNode;var Oe=h.memoizedProps,lt=Xh(b,Oe);V.props=lt;var Ct=V.context,Kt=b.contextType;ae=La,typeof Kt=="object"&&Kt!==null&&(ae=Ms(Kt));var nr=b.getDerivedStateFromProps;Kt=typeof nr=="function"||typeof V.getSnapshotBeforeUpdate=="function",Oe=h.pendingProps!==Oe,Kt||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(Oe||Ct!==ae)&&k0(h,V,A,ae),Yt=!1;var It=h.memoizedState;V.state=It,Jn(h,A,V,D),vn(),Ct=h.memoizedState,Oe||It!==Ct||Yt?(typeof nr=="function"&&(zy(h,b,nr,A),Ct=h.memoizedState),(lt=Yt||dl(h,b,lt,A,It,Ct,ae))?(Kt||typeof V.UNSAFE_componentWillMount!="function"&&typeof V.componentWillMount!="function"||(typeof V.componentWillMount=="function"&&V.componentWillMount(),typeof V.UNSAFE_componentWillMount=="function"&&V.UNSAFE_componentWillMount()),typeof V.componentDidMount=="function"&&(h.flags|=4194308)):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),h.memoizedProps=A,h.memoizedState=Ct),V.props=A,V.state=Ct,V.context=ae,A=lt):(typeof V.componentDidMount=="function"&&(h.flags|=4194308),A=!1)}else{V=h.stateNode,Pr(c,h),ae=h.memoizedProps,Kt=Xh(b,ae),V.props=Kt,nr=h.pendingProps,It=V.context,Ct=b.contextType,lt=La,typeof Ct=="object"&&Ct!==null&&(lt=Ms(Ct)),Oe=b.getDerivedStateFromProps,(Ct=typeof Oe=="function"||typeof V.getSnapshotBeforeUpdate=="function")||typeof V.UNSAFE_componentWillReceiveProps!="function"&&typeof V.componentWillReceiveProps!="function"||(ae!==nr||It!==lt)&&k0(h,V,A,lt),Yt=!1,It=h.memoizedState,V.state=It,Jn(h,A,V,D),vn();var Ut=h.memoizedState;ae!==nr||It!==Ut||Yt||c!==null&&c.dependencies!==null&&kd(c.dependencies)?(typeof Oe=="function"&&(zy(h,b,Oe,A),Ut=h.memoizedState),(Kt=Yt||dl(h,b,Kt,A,It,Ut,lt)||c!==null&&c.dependencies!==null&&kd(c.dependencies))?(Ct||typeof V.UNSAFE_componentWillUpdate!="function"&&typeof V.componentWillUpdate!="function"||(typeof V.componentWillUpdate=="function"&&V.componentWillUpdate(A,Ut,lt),typeof V.UNSAFE_componentWillUpdate=="function"&&V.UNSAFE_componentWillUpdate(A,Ut,lt)),typeof V.componentDidUpdate=="function"&&(h.flags|=4),typeof V.getSnapshotBeforeUpdate=="function"&&(h.flags|=1024)):(typeof V.componentDidUpdate!="function"||ae===c.memoizedProps&&It===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&It===c.memoizedState||(h.flags|=1024),h.memoizedProps=A,h.memoizedState=Ut),V.props=A,V.state=Ut,V.context=lt,A=Kt):(typeof V.componentDidUpdate!="function"||ae===c.memoizedProps&&It===c.memoizedState||(h.flags|=4),typeof V.getSnapshotBeforeUpdate!="function"||ae===c.memoizedProps&&It===c.memoizedState||(h.flags|=1024),A=!1)}return V=A,Yg(c,h),A=(h.flags&128)!==0,V||A?(V=h.stateNode,b=A&&typeof b.getDerivedStateFromError!="function"?null:V.render(),h.flags|=1,c!==null&&A?(h.child=hr(h,c.child,null,D),h.child=hr(h,null,b,D)):hl(c,h,b,D),h.memoizedState=V.state,c=h.child):c=gu(c,h,D),c}function M0(c,h,b,A){return uu(),h.flags|=256,hl(c,h,b,A),h.child}var Gy={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function kp(c){return{baseLanes:c,cachePool:X()}}function Jh(c,h,b){return c=c!==null?c.childLanes&~b:0,h&&(c|=Fo),c}function Wy(c,h,b){var A=h.pendingProps,D=!1,V=(h.flags&128)!==0,ae;if((ae=V)||(ae=c!==null&&c.memoizedState===null?!1:(ds.current&2)!==0),ae&&(D=!0,h.flags&=-129),ae=(h.flags&32)!==0,h.flags&=-33,c===null){if(gn){if(D?Ds(h):io(),(c=gi)?(c=wh(c,Ls),c=c!==null&&c.data!=="&"?c:null,c!==null&&(h.memoizedState={dehydrated:c,treeContext:sl!==null?{id:Da,overflow:Js}:null,retryLane:536870912,hydrationErrors:null},b=ih(c),b.return=h,h.child=b,Ci=h,gi=null)):c=null,c===null)throw Gn(h);return lv(c)?h.lanes=32:h.lanes=536870912,null}var Oe=A.children;return A=A.fallback,D?(io(),D=h.mode,Oe=Zg({mode:"hidden",children:Oe},D),A=ca(A,D,b,null),Oe.return=h,A.return=h,Oe.sibling=A,h.child=Oe,A=h.child,A.memoizedState=kp(b),A.childLanes=Jh(c,ae,b),h.memoizedState=Gy,Od(null,A)):(Ds(h),Yy(h,Oe))}var lt=c.memoizedState;if(lt!==null&&(Oe=lt.dehydrated,Oe!==null)){if(V)h.flags&256?(Ds(h),h.flags&=-257,h=Zy(c,h,b)):h.memoizedState!==null?(io(),h.child=c.child,h.flags|=128,h=null):(io(),Oe=A.fallback,D=h.mode,A=Zg({mode:"visible",children:A.children},D),Oe=ca(Oe,D,b,null),Oe.flags|=2,A.return=h,Oe.return=h,A.sibling=Oe,h.child=A,hr(h,c.child,null,b),A=h.child,A.memoizedState=kp(b),A.childLanes=Jh(c,ae,b),h.memoizedState=Gy,h=Od(null,A));else if(Ds(h),lv(Oe)){if(ae=Oe.nextSibling&&Oe.nextSibling.dataset,ae)var Ct=ae.dgst;ae=Ct,A=Error(i(419)),A.stack="",A.digest=ae,Oa({value:A,source:null,stack:null}),h=Zy(c,h,b)}else if(lo||ol(c,h,b,!1),ae=(b&c.childLanes)!==0,lo||ae){if(ae=$i,ae!==null&&(A=ke(ae,b),A!==0&&A!==lt.retryLane))throw lt.retryLane=A,Xs(c,A),P(ae,c,A),Df;sg(Oe)||Je(),h=Zy(c,h,b)}else sg(Oe)?(h.flags|=192,h.child=c.child,h=null):(c=lt.treeContext,gi=fo(Oe.nextSibling),Ci=h,gn=!0,Is=null,Ls=!1,c!==null&&sh(h,c),h=Yy(h,A.children),h.flags|=4096);return h}return D?(io(),Oe=A.fallback,D=h.mode,lt=c.child,Ct=lt.sibling,A=js(lt,{mode:"hidden",children:A.children}),A.subtreeFlags=lt.subtreeFlags&65011712,Ct!==null?Oe=js(Ct,Oe):(Oe=ca(Oe,D,b,null),Oe.flags|=2),Oe.return=h,A.return=h,A.sibling=Oe,h.child=A,Od(null,A),A=h.child,Oe=c.child.memoizedState,Oe===null?Oe=kp(b):(D=Oe.cachePool,D!==null?(lt=Us._currentValue,D=D.parent!==lt?{parent:lt,pool:lt}:D):D=X(),Oe={baseLanes:Oe.baseLanes|b,cachePool:D}),A.memoizedState=Oe,A.childLanes=Jh(c,ae,b),h.memoizedState=Gy,Od(c.child,A)):(Ds(h),b=c.child,c=b.sibling,b=js(b,{mode:"visible",children:A.children}),b.return=h,b.sibling=null,c!==null&&(ae=h.deletions,ae===null?(h.deletions=[c],h.flags|=16):ae.push(c)),h.child=b,h.memoizedState=null,b)}function Yy(c,h){return h=Zg({mode:"visible",children:h},c.mode),h.return=c,c.child=h}function Zg(c,h){return c=Ya(22,c,null,h),c.lanes=0,c}function Zy(c,h,b){return hr(h,c.child,null,b),c=Yy(h,h.pendingProps.children),c.flags|=2,h.memoizedState=null,c}function Ky(c,h,b){c.lanes|=h;var A=c.alternate;A!==null&&(A.lanes|=h),Tu(c.return,h,b)}function Ep(c,h,b,A,D,V){var ae=c.memoizedState;ae===null?c.memoizedState={isBackwards:h,rendering:null,renderingStartTime:0,last:A,tail:b,tailMode:D,treeForkCount:V}:(ae.isBackwards=h,ae.rendering=null,ae.renderingStartTime=0,ae.last=A,ae.tail=b,ae.tailMode=D,ae.treeForkCount=V)}function Tp(c,h,b){var A=h.pendingProps,D=A.revealOrder,V=A.tail;A=A.children;var ae=ds.current,Oe=(ae&2)!==0;if(Oe?(ae=ae&1|2,h.flags|=128):ae&=1,ue(ds,ae),hl(c,h,A,b),A=gn?il:0,!Oe&&c!==null&&(c.flags&128)!==0)e:for(c=h.child;c!==null;){if(c.tag===13)c.memoizedState!==null&&Ky(c,b,h);else if(c.tag===19)Ky(c,b,h);else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===h)break e;for(;c.sibling===null;){if(c.return===null||c.return===h)break e;c=c.return}c.sibling.return=c.return,c=c.sibling}switch(D){case"forwards":for(b=h.child,D=null;b!==null;)c=b.alternate,c!==null&&jo(c)===null&&(D=b),b=b.sibling;b=D,b===null?(D=h.child,h.child=null):(D=b.sibling,b.sibling=null),Ep(h,!1,D,b,V,A);break;case"backwards":case"unstable_legacy-backwards":for(b=null,D=h.child,h.child=null;D!==null;){if(c=D.alternate,c!==null&&jo(c)===null){h.child=D;break}c=D.sibling,D.sibling=b,b=D,D=c}Ep(h,!0,b,null,V,A);break;case"together":Ep(h,!1,null,null,void 0,A);break;default:h.memoizedState=null}return h.child}function gu(c,h,b){if(c!==null&&(h.dependencies=c.dependencies),fh|=h.lanes,(b&h.childLanes)===0)if(c!==null){if(ol(c,h,b,!1),(b&h.childLanes)===0)return null}else return null;if(c!==null&&h.child!==c.child)throw Error(i(153));if(h.child!==null){for(c=h.child,b=js(c,c.pendingProps),h.child=b,b.return=h;c.sibling!==null;)c=c.sibling,b=b.sibling=js(c,c.pendingProps),b.return=h;b.sibling=null}return h.child}function Xl(c,h){return(c.lanes&h)!==0?!0:(c=c.dependencies,!!(c!==null&&kd(c)))}function Pp(c,h,b){switch(h.tag){case 3:tt(h,h.stateNode.containerInfo),Rl(h,Us,c.memoizedState.cache),uu();break;case 27:case 5:St(h);break;case 4:tt(h,h.stateNode.containerInfo);break;case 10:Rl(h,h.type,h.memoizedProps.value);break;case 31:if(h.memoizedState!==null)return h.flags|=128,ll(h),null;break;case 13:var A=h.memoizedState;if(A!==null)return A.dehydrated!==null?(Ds(h),h.flags|=128,null):(b&h.child.childLanes)!==0?Wy(c,h,b):(Ds(h),c=gu(c,h,b),c!==null?c.sibling:null);Ds(h);break;case 19:var D=(c.flags&128)!==0;if(A=(b&h.childLanes)!==0,A||(ol(c,h,b,!1),A=(b&h.childLanes)!==0),D){if(A)return Tp(c,h,b);h.flags|=128}if(D=h.memoizedState,D!==null&&(D.rendering=null,D.tail=null,D.lastEffect=null),ue(ds,ds.current),A)break;return null;case 22:return h.lanes=0,Dd(c,h,b,h.pendingProps);case 24:Rl(h,Us,c.memoizedState.cache)}return gu(c,h,b)}function zo(c,h,b){if(c!==null)if(c.memoizedProps!==h.pendingProps)lo=!0;else{if(!Xl(c,b)&&(h.flags&128)===0)return lo=!1,Pp(c,h,b);lo=(c.flags&131072)!==0}else lo=!1,gn&&(h.flags&1048576)!==0&&Cd(h,il,h.index);switch(h.lanes=0,h.tag){case 16:e:{var A=h.pendingProps;if(c=Ae(h.elementType),h.type=c,typeof c=="function")Do(c)?(A=Xh(c,A),h.tag=1,h=L0(null,h,c,A,b)):(h.tag=0,h=Hy(null,h,c,A,b));else{if(c!=null){var D=c.$$typeof;if(D===ee){h.tag=11,h=$m(null,h,c,A,b);break e}else if(D===K){h.tag=14,h=Ki(null,h,c,A,b);break e}}throw h=ye(c)||c,Error(i(306,h,""))}}return h;case 0:return Hy(c,h,h.type,h.pendingProps,b);case 1:return A=h.type,D=Xh(A,h.pendingProps),L0(c,h,A,D,b);case 3:e:{if(tt(h,h.stateNode.containerInfo),c===null)throw Error(i(387));A=h.pendingProps;var V=h.memoizedState;D=V.element,Pr(c,h),Jn(h,A,null,b);var ae=h.memoizedState;if(A=ae.cache,Rl(h,Us,A),A!==V.cache&&Zl(h,[Us],b,!0),vn(),A=ae.element,V.isDehydrated)if(V={element:A,isDehydrated:!1,cache:ae.cache},h.updateQueue.baseState=V,h.memoizedState=V,h.flags&256){h=M0(c,h,A,b);break e}else if(A!==D){D=nl(Error(i(424)),h),Oa(D),h=M0(c,h,A,b);break e}else{switch(c=h.stateNode.containerInfo,c.nodeType){case 9:c=c.body;break;default:c=c.nodeName==="HTML"?c.ownerDocument.body:c}for(gi=fo(c.firstChild),Ci=h,gn=!0,Is=null,Ls=!0,b=Fr(h,null,A,b),h.child=b;b;)b.flags=b.flags&-3|4096,b=b.sibling}else{if(uu(),A===D){h=gu(c,h,b);break e}hl(c,h,A,b)}h=h.child}return h;case 26:return Yg(c,h),c===null?(b=np(h.type,null,h.pendingProps,null))?h.memoizedState=b:gn||(b=h.type,c=h.pendingProps,A=bh(We.current).createElement(b),A[Mt]=h,A[dr]=c,ho(A,b,c),Xr(A),h.stateNode=A):h.memoizedState=np(h.type,c.memoizedProps,h.pendingProps,c.memoizedState),null;case 27:return St(h),c===null&&gn&&(A=h.stateNode=og(h.type,h.pendingProps,We.current),Ci=h,Ls=!0,D=gi,Vd(h.type)?(Gp=D,gi=fo(A.firstChild)):gi=D),hl(c,h,h.pendingProps.children,b),Yg(c,h),c===null&&(h.flags|=4194304),h.child;case 5:return c===null&&gn&&((D=A=gi)&&(A=id(A,h.type,h.pendingProps,Ls),A!==null?(h.stateNode=A,Ci=h,gi=fo(A.firstChild),Ls=!1,D=!0):D=!1),D||Gn(h)),St(h),D=h.type,V=h.pendingProps,ae=c!==null?c.memoizedProps:null,A=V.children,Jf(D,V)?A=null:ae!==null&&Jf(D,ae)&&(h.flags|=32),h.memoizedState!==null&&(D=Yu(c,h,Yh,null,null,b),Qp._currentValue=D),Yg(c,h),hl(c,h,A,b),h.child;case 6:return c===null&&gn&&((c=b=gi)&&(b=E_(b,h.pendingProps,Ls),b!==null?(h.stateNode=b,Ci=h,gi=null,c=!0):c=!1),c||Gn(h)),null;case 13:return Wy(c,h,b);case 4:return tt(h,h.stateNode.containerInfo),A=h.pendingProps,c===null?h.child=hr(h,null,A,b):hl(c,h,A,b),h.child;case 11:return $m(c,h,h.type,h.pendingProps,b);case 7:return hl(c,h,h.pendingProps,b),h.child;case 8:return hl(c,h,h.pendingProps.children,b),h.child;case 12:return hl(c,h,h.pendingProps.children,b),h.child;case 10:return A=h.pendingProps,Rl(h,h.type,A.value),hl(c,h,A.children,b),h.child;case 9:return D=h.type._context,A=h.pendingProps.children,Oo(h),D=Ms(D),A=A(D),h.flags|=1,hl(c,h,A,b),h.child;case 14:return Ki(c,h,h.type,h.pendingProps,b);case 15:return Vy(c,h,h.type,h.pendingProps,b);case 19:return Tp(c,h,b);case 31:return k_(c,h,b);case 22:return Dd(c,h,b,h.pendingProps);case 24:return Oo(h),A=Ms(Us),c===null?(D=W(),D===null&&(D=$i,V=fu(),D.pooledCache=V,V.refCount++,V!==null&&(D.pooledCacheLanes|=b),D=V),h.memoizedState={parent:A,cache:D},Sr(h),Rl(h,Us,D)):((c.lanes&b)!==0&&(Pr(c,h),Jn(h,null,null,b),vn()),D=c.memoizedState,V=h.memoizedState,D.parent!==A?(D={parent:A,cache:A},h.memoizedState=D,h.lanes===0&&(h.memoizedState=h.updateQueue.baseState=D),Rl(h,Us,A)):(A=V.cache,Rl(h,Us,A),A!==D.cache&&Zl(h,[Us],b,!0))),hl(c,h,h.pendingProps.children,b),h.child;case 29:throw h.pendingProps}throw Error(i(156,h.tag))}function Ru(c){c.flags|=4}function Rp(c,h,b,A,D){if((h=(c.mode&32)!==0)&&(h=!1),h){if(c.flags|=16777216,(D&335544128)===D)if(c.stateNode.complete)c.flags|=8192;else if($e())c.flags|=8192;else throw Le=de,ve}else c.flags&=-16777217}function Jl(c,h){if(h.type!=="stylesheet"||(h.state.loading&4)!==0)c.flags&=-16777217;else if(c.flags|=16777216,!cx(h))if($e())c.flags|=8192;else throw Le=de,ve}function Hm(c,h){h!==null&&(c.flags|=4),c.flags&16384&&(h=c.tag!==22?xe():536870912,c.lanes|=h,Vf|=h)}function Ip(c,h){if(!gn)switch(c.tailMode){case"hidden":h=c.tail;for(var b=null;h!==null;)h.alternate!==null&&(b=h),h=h.sibling;b===null?c.tail=null:b.sibling=null;break;case"collapsed":b=c.tail;for(var A=null;b!==null;)b.alternate!==null&&(A=b),b=b.sibling;A===null?h||c.tail===null?c.tail=null:c.tail.sibling=null:A.sibling=null}}function ha(c){var h=c.alternate!==null&&c.alternate.child===c.child,b=0,A=0;if(h)for(var D=c.child;D!==null;)b|=D.lanes|D.childLanes,A|=D.subtreeFlags&65011712,A|=D.flags&65011712,D.return=c,D=D.sibling;else for(D=c.child;D!==null;)b|=D.lanes|D.childLanes,A|=D.subtreeFlags,A|=D.flags,D.return=c,D=D.sibling;return c.subtreeFlags|=A,c.childLanes=b,h}function D0(c,h,b){var A=h.pendingProps;switch(Er(h),h.tag){case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ha(h),null;case 1:return ha(h),null;case 3:return b=h.stateNode,A=null,c!==null&&(A=c.memoizedState.cache),h.memoizedState.cache!==A&&(h.flags|=2048),wo(Us),Qe(),b.pendingContext&&(b.context=b.pendingContext,b.pendingContext=null),(c===null||c.child===null)&&(Bs(h)?Ru(h):c===null||c.memoizedState.isDehydrated&&(h.flags&256)===0||(h.flags|=1024,gc())),ha(h),null;case 26:var D=h.type,V=h.memoizedState;return c===null?(Ru(h),V!==null?(ha(h),Jl(h,V)):(ha(h),Rp(h,D,null,A,b))):V?V!==c.memoizedState?(Ru(h),ha(h),Jl(h,V)):(ha(h),h.flags&=-16777217):(c=c.memoizedProps,c!==A&&Ru(h),ha(h),Rp(h,D,c,A,b)),null;case 27:if(Et(h),b=We.current,D=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==A&&Ru(h);else{if(!A){if(h.stateNode===null)throw Error(i(166));return ha(h),null}c=Ne.current,Bs(h)?ua(h):(c=og(D,A,b),h.stateNode=c,Ru(h))}return ha(h),null;case 5:if(Et(h),D=h.type,c!==null&&h.stateNode!=null)c.memoizedProps!==A&&Ru(h);else{if(!A){if(h.stateNode===null)throw Error(i(166));return ha(h),null}if(V=Ne.current,Bs(h))ua(h);else{var ae=bh(We.current);switch(V){case 1:V=ae.createElementNS("http://www.w3.org/2000/svg",D);break;case 2:V=ae.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;default:switch(D){case"svg":V=ae.createElementNS("http://www.w3.org/2000/svg",D);break;case"math":V=ae.createElementNS("http://www.w3.org/1998/Math/MathML",D);break;case"script":V=ae.createElement("div"),V.innerHTML="<script><\/script>",V=V.removeChild(V.firstChild);break;case"select":V=typeof A.is=="string"?ae.createElement("select",{is:A.is}):ae.createElement("select"),A.multiple?V.multiple=!0:A.size&&(V.size=A.size);break;default:V=typeof A.is=="string"?ae.createElement(D,{is:A.is}):ae.createElement(D)}}V[Mt]=h,V[dr]=A;e:for(ae=h.child;ae!==null;){if(ae.tag===5||ae.tag===6)V.appendChild(ae.stateNode);else if(ae.tag!==4&&ae.tag!==27&&ae.child!==null){ae.child.return=ae,ae=ae.child;continue}if(ae===h)break e;for(;ae.sibling===null;){if(ae.return===null||ae.return===h)break e;ae=ae.return}ae.sibling.return=ae.return,ae=ae.sibling}h.stateNode=V;e:switch(ho(V,D,A),D){case"button":case"input":case"select":case"textarea":A=!!A.autoFocus;break e;case"img":A=!0;break e;default:A=!1}A&&Ru(h)}}return ha(h),Rp(h,h.type,c===null?null:c.memoizedProps,h.pendingProps,b),null;case 6:if(c&&h.stateNode!=null)c.memoizedProps!==A&&Ru(h);else{if(typeof A!="string"&&h.stateNode===null)throw Error(i(166));if(c=We.current,Bs(h)){if(c=h.stateNode,b=h.memoizedProps,A=null,D=Ci,D!==null)switch(D.tag){case 27:case 5:A=D.memoizedProps}c[Mt]=h,c=!!(c.nodeValue===b||A!==null&&A.suppressHydrationWarning===!0||tg(c.nodeValue,b)),c||Gn(h,!0)}else c=bh(c).createTextNode(A),c[Mt]=h,h.stateNode=c}return ha(h),null;case 31:if(b=h.memoizedState,c===null||c.memoizedState!==null){if(A=Bs(h),b!==null){if(c===null){if(!A)throw Error(i(318));if(c=h.memoizedState,c=c!==null?c.dehydrated:null,!c)throw Error(i(557));c[Mt]=h}else uu(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ha(h),c=!1}else b=gc(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=b),c=!0;if(!c)return h.flags&256?(za(h),h):(za(h),null);if((h.flags&128)!==0)throw Error(i(558))}return ha(h),null;case 13:if(A=h.memoizedState,c===null||c.memoizedState!==null&&c.memoizedState.dehydrated!==null){if(D=Bs(h),A!==null&&A.dehydrated!==null){if(c===null){if(!D)throw Error(i(318));if(D=h.memoizedState,D=D!==null?D.dehydrated:null,!D)throw Error(i(317));D[Mt]=h}else uu(),(h.flags&128)===0&&(h.memoizedState=null),h.flags|=4;ha(h),D=!1}else D=gc(),c!==null&&c.memoizedState!==null&&(c.memoizedState.hydrationErrors=D),D=!0;if(!D)return h.flags&256?(za(h),h):(za(h),null)}return za(h),(h.flags&128)!==0?(h.lanes=b,h):(b=A!==null,c=c!==null&&c.memoizedState!==null,b&&(A=h.child,D=null,A.alternate!==null&&A.alternate.memoizedState!==null&&A.alternate.memoizedState.cachePool!==null&&(D=A.alternate.memoizedState.cachePool.pool),V=null,A.memoizedState!==null&&A.memoizedState.cachePool!==null&&(V=A.memoizedState.cachePool.pool),V!==D&&(A.flags|=2048)),b!==c&&b&&(h.child.flags|=8192),Hm(h,h.updateQueue),ha(h),null);case 4:return Qe(),c===null&&Bp(h.stateNode.containerInfo),ha(h),null;case 10:return wo(h.type),ha(h),null;case 19:if(te(ds),A=h.memoizedState,A===null)return ha(h),null;if(D=(h.flags&128)!==0,V=A.rendering,V===null)if(D)Ip(A,!1);else{if(Fa!==0||c!==null&&(c.flags&128)!==0)for(c=h.child;c!==null;){if(V=jo(c),V!==null){for(h.flags|=128,Ip(A,!1),c=V.updateQueue,h.updateQueue=c,Hm(h,c),h.subtreeFlags=0,c=b,b=h.child;b!==null;)Eu(b,c),b=b.sibling;return ue(ds,ds.current&1|2),gn&&Wi(h,A.treeForkCount),h.child}c=c.sibling}A.tail!==null&&kt()>Op&&(h.flags|=128,D=!0,Ip(A,!1),h.lanes=4194304)}else{if(!D)if(c=jo(V),c!==null){if(h.flags|=128,D=!0,c=c.updateQueue,h.updateQueue=c,Hm(h,c),Ip(A,!0),A.tail===null&&A.tailMode==="hidden"&&!V.alternate&&!gn)return ha(h),null}else 2*kt()-A.renderingStartTime>Op&&b!==536870912&&(h.flags|=128,D=!0,Ip(A,!1),h.lanes=4194304);A.isBackwards?(V.sibling=h.child,h.child=V):(c=A.last,c!==null?c.sibling=V:h.child=V,A.last=V)}return A.tail!==null?(c=A.tail,A.rendering=c,A.tail=c.sibling,A.renderingStartTime=kt(),c.sibling=null,b=ds.current,ue(ds,D?b&1|2:b&1),gn&&Wi(h,A.treeForkCount),c):(ha(h),null);case 22:case 23:return za(h),ns(),A=h.memoizedState!==null,c!==null?c.memoizedState!==null!==A&&(h.flags|=8192):A&&(h.flags|=8192),A?(b&536870912)!==0&&(h.flags&128)===0&&(ha(h),h.subtreeFlags&6&&(h.flags|=8192)):ha(h),b=h.updateQueue,b!==null&&Hm(h,b.retryQueue),b=null,c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),A=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(A=h.memoizedState.cachePool.pool),A!==b&&(h.flags|=2048),c!==null&&te($),null;case 24:return b=null,c!==null&&(b=c.memoizedState.cache),h.memoizedState.cache!==b&&(h.flags|=2048),wo(Us),ha(h),null;case 25:return null;case 30:return null}throw Error(i(156,h.tag))}function Xy(c,h){switch(Er(h),h.tag){case 1:return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 3:return wo(Us),Qe(),c=h.flags,(c&65536)!==0&&(c&128)===0?(h.flags=c&-65537|128,h):null;case 26:case 27:case 5:return Et(h),null;case 31:if(h.memoizedState!==null){if(za(h),h.alternate===null)throw Error(i(340));uu()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 13:if(za(h),c=h.memoizedState,c!==null&&c.dehydrated!==null){if(h.alternate===null)throw Error(i(340));uu()}return c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 19:return te(ds),null;case 4:return Qe(),null;case 10:return wo(h.type),null;case 22:case 23:return za(h),ns(),c!==null&&te($),c=h.flags,c&65536?(h.flags=c&-65537|128,h):null;case 24:return wo(Us),null;case 25:return null;default:return null}}function Kg(c,h){switch(Er(h),h.tag){case 3:wo(Us),Qe();break;case 26:case 27:case 5:Et(h);break;case 4:Qe();break;case 31:h.memoizedState!==null&&za(h);break;case 13:za(h);break;case 19:te(ds);break;case 10:wo(h.type);break;case 22:case 23:za(h),ns(),c!==null&&te($);break;case 24:wo(Us)}}function Gm(c,h){try{var b=h.updateQueue,A=b!==null?b.lastEffect:null;if(A!==null){var D=A.next;b=D;do{if((b.tag&c)===c){A=void 0;var V=b.create,ae=b.inst;A=V(),ae.destroy=A}b=b.next}while(b!==D)}}catch(Oe){br(h,h.return,Oe)}}function dh(c,h,b){try{var A=h.updateQueue,D=A!==null?A.lastEffect:null;if(D!==null){var V=D.next;A=V;do{if((A.tag&c)===c){var ae=A.inst,Oe=ae.destroy;if(Oe!==void 0){ae.destroy=void 0,D=h;var lt=b,Ct=Oe;try{Ct()}catch(Kt){br(D,lt,Kt)}}}A=A.next}while(A!==V)}}catch(Kt){br(h,h.return,Kt)}}function Of(c){var h=c.updateQueue;if(h!==null){var b=c.stateNode;try{ui(h,b)}catch(A){br(c,c.return,A)}}}function Xg(c,h,b){b.props=Xh(c.type,c.memoizedProps),b.state=c.memoizedState;try{b.componentWillUnmount()}catch(A){br(c,h,A)}}function Lp(c,h){try{var b=c.ref;if(b!==null){switch(c.tag){case 26:case 27:case 5:var A=c.stateNode;break;case 30:A=c.stateNode;break;default:A=c.stateNode}typeof b=="function"?c.refCleanup=b(A):b.current=A}}catch(D){br(c,h,D)}}function Xu(c,h){var b=c.ref,A=c.refCleanup;if(b!==null)if(typeof A=="function")try{A()}catch(D){br(c,h,D)}finally{c.refCleanup=null,c=c.alternate,c!=null&&(c.refCleanup=null)}else if(typeof b=="function")try{b(null)}catch(D){br(c,h,D)}else b.current=null}function O0(c){var h=c.type,b=c.memoizedProps,A=c.stateNode;try{e:switch(h){case"button":case"input":case"select":case"textarea":b.autoFocus&&A.focus();break e;case"img":b.src?A.src=b.src:b.srcSet&&(A.srcset=b.srcSet)}}catch(D){br(c,c.return,D)}}function Jg(c,h,b){try{var A=c.stateNode;ov(A,c.type,b,h),A[dr]=h}catch(D){br(c,c.return,D)}}function Jy(c){return c.tag===5||c.tag===3||c.tag===26||c.tag===27&&Vd(c.type)||c.tag===4}function Qg(c){e:for(;;){for(;c.sibling===null;){if(c.return===null||Jy(c.return))return null;c=c.return}for(c.sibling.return=c.return,c=c.sibling;c.tag!==5&&c.tag!==6&&c.tag!==18;){if(c.tag===27&&Vd(c.type)||c.flags&2||c.child===null||c.tag===4)continue e;c.child.return=c,c=c.child}if(!(c.flags&2))return c.stateNode}}function ev(c,h,b){var A=c.tag;if(A===5||A===6)c=c.stateNode,h?(b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b).insertBefore(c,h):(h=b.nodeType===9?b.body:b.nodeName==="HTML"?b.ownerDocument.body:b,h.appendChild(c),b=b._reactRootContainer,b!=null||h.onclick!==null||(h.onclick=Es));else if(A!==4&&(A===27&&Vd(c.type)&&(b=c.stateNode,h=null),c=c.child,c!==null))for(ev(c,h,b),c=c.sibling;c!==null;)ev(c,h,b),c=c.sibling}function tv(c,h,b){var A=c.tag;if(A===5||A===6)c=c.stateNode,h?b.insertBefore(c,h):b.appendChild(c);else if(A!==4&&(A===27&&Vd(c.type)&&(b=c.stateNode),c=c.child,c!==null))for(tv(c,h,b),c=c.sibling;c!==null;)tv(c,h,b),c=c.sibling}function z0(c){var h=c.stateNode,b=c.memoizedProps;try{for(var A=c.type,D=h.attributes;D.length;)h.removeAttributeNode(D[0]);ho(h,A,b),h[Mt]=c,h[dr]=b}catch(V){br(c,c.return,V)}}var zd=!1,co=!1,Mp=!1,Qy=typeof WeakSet=="function"?WeakSet:Set,uo=null;function rv(c,h){if(c=c.containerInfo,Kf=yu,c=fc(c),El(c)){if("selectionStart"in c)var b={start:c.selectionStart,end:c.selectionEnd};else e:{b=(b=c.ownerDocument)&&b.defaultView||window;var A=b.getSelection&&b.getSelection();if(A&&A.rangeCount!==0){b=A.anchorNode;var D=A.anchorOffset,V=A.focusNode;A=A.focusOffset;try{b.nodeType,V.nodeType}catch{b=null;break e}var ae=0,Oe=-1,lt=-1,Ct=0,Kt=0,nr=c,It=null;t:for(;;){for(var Ut;nr!==b||D!==0&&nr.nodeType!==3||(Oe=ae+D),nr!==V||A!==0&&nr.nodeType!==3||(lt=ae+A),nr.nodeType===3&&(ae+=nr.nodeValue.length),(Ut=nr.firstChild)!==null;)It=nr,nr=Ut;for(;;){if(nr===c)break t;if(It===b&&++Ct===D&&(Oe=ae),It===V&&++Kt===A&&(lt=ae),(Ut=nr.nextSibling)!==null)break;nr=It,It=nr.parentNode}nr=Ut}b=Oe===-1||lt===-1?null:{start:Oe,end:lt}}else b=null}b=b||{start:0,end:0}}else b=null;for($p={focusedElem:c,selectionRange:b},yu=!1,uo=h;uo!==null;)if(h=uo,c=h.child,(h.subtreeFlags&1028)!==0&&c!==null)c.return=h,uo=c;else for(;uo!==null;){switch(h=uo,V=h.alternate,c=h.flags,h.tag){case 0:if((c&4)!==0&&(c=h.updateQueue,c=c!==null?c.events:null,c!==null))for(b=0;b<c.length;b++)D=c[b],D.ref.impl=D.nextImpl;break;case 11:case 15:break;case 1:if((c&1024)!==0&&V!==null){c=void 0,b=h,D=V.memoizedProps,V=V.memoizedState,A=b.stateNode;try{var Qr=Xh(b.type,D);c=A.getSnapshotBeforeUpdate(Qr,V),A.__reactInternalSnapshotBeforeUpdate=c}catch(On){br(b,b.return,On)}}break;case 3:if((c&1024)!==0){if(c=h.stateNode.containerInfo,b=c.nodeType,b===9)Gs(c);else if(b===1)switch(c.nodeName){case"HEAD":case"HTML":case"BODY":Gs(c);break;default:c.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((c&1024)!==0)throw Error(i(163))}if(c=h.sibling,c!==null){c.return=h.return,uo=c;break}uo=h.return}}function Wm(c,h,b){var A=b.flags;switch(b.tag){case 0:case 11:case 15:Qu(c,b),A&4&&Gm(5,b);break;case 1:if(Qu(c,b),A&4)if(c=b.stateNode,h===null)try{c.componentDidMount()}catch(ae){br(b,b.return,ae)}else{var D=Xh(b.type,h.memoizedProps);h=h.memoizedState;try{c.componentDidUpdate(D,h,c.__reactInternalSnapshotBeforeUpdate)}catch(ae){br(b,b.return,ae)}}A&64&&Of(b),A&512&&Lp(b,b.return);break;case 3:if(Qu(c,b),A&64&&(c=b.updateQueue,c!==null)){if(h=null,b.child!==null)switch(b.child.tag){case 27:case 5:h=b.child.stateNode;break;case 1:h=b.child.stateNode}try{ui(c,h)}catch(ae){br(b,b.return,ae)}}break;case 27:h===null&&A&4&&z0(b);case 26:case 5:Qu(c,b),h===null&&A&4&&O0(b),A&512&&Lp(b,b.return);break;case 12:Qu(c,b);break;case 31:Qu(c,b),A&4&&nv(c,b);break;case 13:Qu(c,b),A&4&&ex(c,b),A&64&&(c=b.memoizedState,c!==null&&(c=c.dehydrated,c!==null&&(b=$s.bind(null,b),cv(c,b))));break;case 22:if(A=b.memoizedState!==null||zd,!A){h=h!==null&&h.memoizedState!==null||co,D=zd;var V=co;zd=A,(co=h)&&!V?Fc(c,b,(b.subtreeFlags&8772)!==0):Qu(c,b),zd=D,co=V}break;case 30:break;default:Qu(c,b)}}function zf(c){var h=c.alternate;h!==null&&(c.alternate=null,zf(h)),c.child=null,c.deletions=null,c.sibling=null,c.tag===5&&(h=c.stateNode,h!==null&&yr(h)),c.stateNode=null,c.return=null,c.dependencies=null,c.memoizedProps=null,c.memoizedState=null,c.pendingProps=null,c.stateNode=null,c.updateQueue=null}var _a=null,Oc=!1;function hh(c,h,b){for(b=b.child;b!==null;)Ff(c,h,b),b=b.sibling}function Ff(c,h,b){if(fi&&typeof fi.onCommitFiberUnmount=="function")try{fi.onCommitFiberUnmount(_n,b)}catch{}switch(b.tag){case 26:co||Xu(b,h),hh(c,h,b),b.memoizedState?b.memoizedState.count--:b.stateNode&&(b=b.stateNode,b.parentNode.removeChild(b));break;case 27:co||Xu(b,h);var A=_a,D=Oc;Vd(b.type)&&(_a=b.stateNode,Oc=!1),hh(c,h,b),ep(b.stateNode),_a=A,Oc=D;break;case 5:co||Xu(b,h);case 6:if(A=_a,D=Oc,_a=null,hh(c,h,b),_a=A,Oc=D,_a!==null)if(Oc)try{(_a.nodeType===9?_a.body:_a.nodeName==="HTML"?_a.ownerDocument.body:_a).removeChild(b.stateNode)}catch(V){br(b,h,V)}else try{_a.removeChild(b.stateNode)}catch(V){br(b,h,V)}break;case 18:_a!==null&&(Oc?(c=_a,G0(c.nodeType===9?c.body:c.nodeName==="HTML"?c.ownerDocument.body:c,b.stateNode),gv(c)):G0(_a,b.stateNode));break;case 4:A=_a,D=Oc,_a=b.stateNode.containerInfo,Oc=!0,hh(c,h,b),_a=A,Oc=D;break;case 0:case 11:case 14:case 15:dh(2,b,h),co||dh(4,b,h),hh(c,h,b);break;case 1:co||(Xu(b,h),A=b.stateNode,typeof A.componentWillUnmount=="function"&&Xg(b,h,A)),hh(c,h,b);break;case 21:hh(c,h,b);break;case 22:co=(A=co)||b.memoizedState!==null,hh(c,h,b),co=A;break;default:hh(c,h,b)}}function nv(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null))){c=c.dehydrated;try{gv(c)}catch(b){br(h,h.return,b)}}}function ex(c,h){if(h.memoizedState===null&&(c=h.alternate,c!==null&&(c=c.memoizedState,c!==null&&(c=c.dehydrated,c!==null))))try{gv(c)}catch(b){br(h,h.return,b)}}function tx(c){switch(c.tag){case 31:case 13:case 19:var h=c.stateNode;return h===null&&(h=c.stateNode=new Qy),h;case 22:return c=c.stateNode,h=c._retryCache,h===null&&(h=c._retryCache=new Qy),h;default:throw Error(i(435,c.tag))}}function Ym(c,h){var b=tx(c);h.forEach(function(A){if(!b.has(A)){b.add(A);var D=As.bind(null,c,A);A.then(D,D)}})}function xc(c,h){var b=h.deletions;if(b!==null)for(var A=0;A<b.length;A++){var D=b[A],V=c,ae=h,Oe=ae;e:for(;Oe!==null;){switch(Oe.tag){case 27:if(Vd(Oe.type)){_a=Oe.stateNode,Oc=!1;break e}break;case 5:_a=Oe.stateNode,Oc=!1;break e;case 3:case 4:_a=Oe.stateNode.containerInfo,Oc=!0;break e}Oe=Oe.return}if(_a===null)throw Error(i(160));Ff(V,ae,D),_a=null,Oc=!1,V=D.alternate,V!==null&&(V.return=null),D.return=null}if(h.subtreeFlags&13886)for(h=h.child;h!==null;)F0(h,c),h=h.sibling}var Ju=null;function F0(c,h){var b=c.alternate,A=c.flags;switch(c.tag){case 0:case 11:case 14:case 15:xc(h,c),zc(c),A&4&&(dh(3,c,c.return),Gm(3,c),dh(5,c,c.return));break;case 1:xc(h,c),zc(c),A&512&&(co||b===null||Xu(b,b.return)),A&64&&zd&&(c=c.updateQueue,c!==null&&(A=c.callbacks,A!==null&&(b=c.shared.hiddenCallbacks,c.shared.hiddenCallbacks=b===null?A:b.concat(A))));break;case 26:var D=Ju;if(xc(h,c),zc(c),A&512&&(co||b===null||Xu(b,b.return)),A&4){var V=b!==null?b.memoizedState:null;if(A=c.memoizedState,b===null)if(A===null)if(c.stateNode===null){e:{A=c.type,b=c.memoizedProps,D=D.ownerDocument||D;t:switch(A){case"title":V=D.getElementsByTagName("title")[0],(!V||V[an]||V[Mt]||V.namespaceURI==="http://www.w3.org/2000/svg"||V.hasAttribute("itemprop"))&&(V=D.createElement(A),D.head.insertBefore(V,D.querySelector("head > title"))),ho(V,A,b),V[Mt]=c,Xr(V),A=V;break e;case"link":var ae=fv("link","href",D).get(A+(b.href||""));if(ae){for(var Oe=0;Oe<ae.length;Oe++)if(V=ae[Oe],V.getAttribute("href")===(b.href==null||b.href===""?null:b.href)&&V.getAttribute("rel")===(b.rel==null?null:b.rel)&&V.getAttribute("title")===(b.title==null?null:b.title)&&V.getAttribute("crossorigin")===(b.crossOrigin==null?null:b.crossOrigin)){ae.splice(Oe,1);break t}}V=D.createElement(A),ho(V,A,b),D.head.appendChild(V);break;case"meta":if(ae=fv("meta","content",D).get(A+(b.content||""))){for(Oe=0;Oe<ae.length;Oe++)if(V=ae[Oe],V.getAttribute("content")===(b.content==null?null:""+b.content)&&V.getAttribute("name")===(b.name==null?null:b.name)&&V.getAttribute("property")===(b.property==null?null:b.property)&&V.getAttribute("http-equiv")===(b.httpEquiv==null?null:b.httpEquiv)&&V.getAttribute("charset")===(b.charSet==null?null:b.charSet)){ae.splice(Oe,1);break t}}V=D.createElement(A),ho(V,A,b),D.head.appendChild(V);break;default:throw Error(i(468,A))}V[Mt]=c,Xr(V),A=V}c.stateNode=A}else ox(D,c.type,c.stateNode);else c.stateNode=dv(D,A,c.memoizedProps);else V!==A?(V===null?b.stateNode!==null&&(b=b.stateNode,b.parentNode.removeChild(b)):V.count--,A===null?ox(D,c.type,c.stateNode):dv(D,A,c.memoizedProps)):A===null&&c.stateNode!==null&&Jg(c,c.memoizedProps,b.memoizedProps)}break;case 27:xc(h,c),zc(c),A&512&&(co||b===null||Xu(b,b.return)),b!==null&&A&4&&Jg(c,c.memoizedProps,b.memoizedProps);break;case 5:if(xc(h,c),zc(c),A&512&&(co||b===null||Xu(b,b.return)),c.flags&32){D=c.stateNode;try{Ca(D,"")}catch(Qr){br(c,c.return,Qr)}}A&4&&c.stateNode!=null&&(D=c.memoizedProps,Jg(c,D,b!==null?b.memoizedProps:D)),A&1024&&(Mp=!0);break;case 6:if(xc(h,c),zc(c),A&4){if(c.stateNode===null)throw Error(i(162));A=c.memoizedProps,b=c.stateNode;try{b.nodeValue=A}catch(Qr){br(c,c.return,Qr)}}break;case 3:if(Jp=null,D=Ju,Ju=lg(h.containerInfo),xc(h,c),Ju=D,zc(c),A&4&&b!==null&&b.memoizedState.isDehydrated)try{gv(h.containerInfo)}catch(Qr){br(c,c.return,Qr)}Mp&&(Mp=!1,Zm(c));break;case 4:A=Ju,Ju=lg(c.stateNode.containerInfo),xc(h,c),zc(c),Ju=A;break;case 12:xc(h,c),zc(c);break;case 31:xc(h,c),zc(c),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,Ym(c,A)));break;case 13:xc(h,c),zc(c),c.child.flags&8192&&c.memoizedState!==null!=(b!==null&&b.memoizedState!==null)&&($f=kt()),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,Ym(c,A)));break;case 22:D=c.memoizedState!==null;var lt=b!==null&&b.memoizedState!==null,Ct=zd,Kt=co;if(zd=Ct||D,co=Kt||lt,xc(h,c),co=Kt,zd=Ct,zc(c),A&8192)e:for(h=c.stateNode,h._visibility=D?h._visibility&-2:h._visibility|1,D&&(b===null||lt||zd||co||Bf(c)),b=null,h=c;;){if(h.tag===5||h.tag===26){if(b===null){lt=b=h;try{if(V=lt.stateNode,D)ae=V.style,typeof ae.setProperty=="function"?ae.setProperty("display","none","important"):ae.display="none";else{Oe=lt.stateNode;var nr=lt.memoizedProps.style,It=nr!=null&&nr.hasOwnProperty("display")?nr.display:null;Oe.style.display=It==null||typeof It=="boolean"?"":(""+It).trim()}}catch(Qr){br(lt,lt.return,Qr)}}}else if(h.tag===6){if(b===null){lt=h;try{lt.stateNode.nodeValue=D?"":lt.memoizedProps}catch(Qr){br(lt,lt.return,Qr)}}}else if(h.tag===18){if(b===null){lt=h;try{var Ut=lt.stateNode;D?Hp(Ut,!0):Hp(lt.stateNode,!1)}catch(Qr){br(lt,lt.return,Qr)}}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===c)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===c)break e;for(;h.sibling===null;){if(h.return===null||h.return===c)break e;b===h&&(b=null),h=h.return}b===h&&(b=null),h.sibling.return=h.return,h=h.sibling}A&4&&(A=c.updateQueue,A!==null&&(b=A.retryQueue,b!==null&&(A.retryQueue=null,Ym(c,b))));break;case 19:xc(h,c),zc(c),A&4&&(A=c.updateQueue,A!==null&&(c.updateQueue=null,Ym(c,A)));break;case 30:break;case 21:break;default:xc(h,c),zc(c)}}function zc(c){var h=c.flags;if(h&2){try{for(var b,A=c.return;A!==null;){if(Jy(A)){b=A;break}A=A.return}if(b==null)throw Error(i(160));switch(b.tag){case 27:var D=b.stateNode,V=Qg(c);tv(c,V,D);break;case 5:var ae=b.stateNode;b.flags&32&&(Ca(ae,""),b.flags&=-33);var Oe=Qg(c);tv(c,Oe,ae);break;case 3:case 4:var lt=b.stateNode.containerInfo,Ct=Qg(c);ev(c,Ct,lt);break;default:throw Error(i(161))}}catch(Kt){br(c,c.return,Kt)}c.flags&=-3}h&4096&&(c.flags&=-4097)}function Zm(c){if(c.subtreeFlags&1024)for(c=c.child;c!==null;){var h=c;Zm(h),h.tag===5&&h.flags&1024&&h.stateNode.reset(),c=c.sibling}}function Qu(c,h){if(h.subtreeFlags&8772)for(h=h.child;h!==null;)Wm(c,h.alternate,h),h=h.sibling}function Bf(c){for(c=c.child;c!==null;){var h=c;switch(h.tag){case 0:case 11:case 14:case 15:dh(4,h,h.return),Bf(h);break;case 1:Xu(h,h.return);var b=h.stateNode;typeof b.componentWillUnmount=="function"&&Xg(h,h.return,b),Bf(h);break;case 27:ep(h.stateNode);case 26:case 5:Xu(h,h.return),Bf(h);break;case 22:h.memoizedState===null&&Bf(h);break;case 30:Bf(h);break;default:Bf(h)}c=c.sibling}}function Fc(c,h,b){for(b=b&&(h.subtreeFlags&8772)!==0,h=h.child;h!==null;){var A=h.alternate,D=c,V=h,ae=V.flags;switch(V.tag){case 0:case 11:case 15:Fc(D,V,b),Gm(4,V);break;case 1:if(Fc(D,V,b),A=V,D=A.stateNode,typeof D.componentDidMount=="function")try{D.componentDidMount()}catch(Ct){br(A,A.return,Ct)}if(A=V,D=A.updateQueue,D!==null){var Oe=A.stateNode;try{var lt=D.shared.hiddenCallbacks;if(lt!==null)for(D.shared.hiddenCallbacks=null,D=0;D<lt.length;D++)Fi(lt[D],Oe)}catch(Ct){br(A,A.return,Ct)}}b&&ae&64&&Of(V),Lp(V,V.return);break;case 27:z0(V);case 26:case 5:Fc(D,V,b),b&&A===null&&ae&4&&O0(V),Lp(V,V.return);break;case 12:Fc(D,V,b);break;case 31:Fc(D,V,b),b&&ae&4&&nv(D,V);break;case 13:Fc(D,V,b),b&&ae&4&&ex(D,V);break;case 22:V.memoizedState===null&&Fc(D,V,b),Lp(V,V.return);break;case 30:break;default:Fc(D,V,b)}h=h.sibling}}function Uf(c,h){var b=null;c!==null&&c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(b=c.memoizedState.cachePool.pool),c=null,h.memoizedState!==null&&h.memoizedState.cachePool!==null&&(c=h.memoizedState.cachePool.pool),c!==b&&(c!=null&&c.refCount++,b!=null&&m(b))}function ki(c,h){c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&m(c))}function ed(c,h,b,A){if(h.subtreeFlags&10256)for(h=h.child;h!==null;)iv(c,h,b,A),h=h.sibling}function iv(c,h,b,A){var D=h.flags;switch(h.tag){case 0:case 11:case 15:ed(c,h,b,A),D&2048&&Gm(9,h);break;case 1:ed(c,h,b,A);break;case 3:ed(c,h,b,A),D&2048&&(c=null,h.alternate!==null&&(c=h.alternate.memoizedState.cache),h=h.memoizedState.cache,h!==c&&(h.refCount++,c!=null&&m(c)));break;case 12:if(D&2048){ed(c,h,b,A),c=h.stateNode;try{var V=h.memoizedProps,ae=V.id,Oe=V.onPostCommit;typeof Oe=="function"&&Oe(ae,h.alternate===null?"mount":"update",c.passiveEffectDuration,-0)}catch(lt){br(h,h.return,lt)}}else ed(c,h,b,A);break;case 31:ed(c,h,b,A);break;case 13:ed(c,h,b,A);break;case 23:break;case 22:V=h.stateNode,ae=h.alternate,h.memoizedState!==null?V._visibility&2?ed(c,h,b,A):Km(c,h):V._visibility&2?ed(c,h,b,A):(V._visibility|=2,td(c,h,b,A,(h.subtreeFlags&10256)!==0||!1)),D&2048&&Uf(ae,h);break;case 24:ed(c,h,b,A),D&2048&&ki(h.alternate,h);break;default:ed(c,h,b,A)}}function td(c,h,b,A,D){for(D=D&&((h.subtreeFlags&10256)!==0||!1),h=h.child;h!==null;){var V=c,ae=h,Oe=b,lt=A,Ct=ae.flags;switch(ae.tag){case 0:case 11:case 15:td(V,ae,Oe,lt,D),Gm(8,ae);break;case 23:break;case 22:var Kt=ae.stateNode;ae.memoizedState!==null?Kt._visibility&2?td(V,ae,Oe,lt,D):Km(V,ae):(Kt._visibility|=2,td(V,ae,Oe,lt,D)),D&&Ct&2048&&Uf(ae.alternate,ae);break;case 24:td(V,ae,Oe,lt,D),D&&Ct&2048&&ki(ae.alternate,ae);break;default:td(V,ae,Oe,lt,D)}h=h.sibling}}function Km(c,h){if(h.subtreeFlags&10256)for(h=h.child;h!==null;){var b=c,A=h,D=A.flags;switch(A.tag){case 22:Km(b,A),D&2048&&Uf(A.alternate,A);break;case 24:Km(b,A),D&2048&&ki(A.alternate,A);break;default:Km(b,A)}h=h.sibling}}var Xm=8192;function Dp(c,h,b){if(c.subtreeFlags&Xm)for(c=c.child;c!==null;)B0(c,h,b),c=c.sibling}function B0(c,h,b){switch(c.tag){case 26:Dp(c,h,b),c.flags&Xm&&c.memoizedState!==null&&J0(b,Ju,c.memoizedState,c.memoizedProps);break;case 5:Dp(c,h,b);break;case 3:case 4:var A=Ju;Ju=lg(c.stateNode.containerInfo),Dp(c,h,b),Ju=A;break;case 22:c.memoizedState===null&&(A=c.alternate,A!==null&&A.memoizedState!==null?(A=Xm,Xm=16777216,Dp(c,h,b),Xm=A):Dp(c,h,b));break;default:Dp(c,h,b)}}function U0(c){var h=c.alternate;if(h!==null&&(c=h.child,c!==null)){h.child=null;do h=c.sibling,c.sibling=null,c=h;while(c!==null)}}function Jm(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var A=h[b];uo=A,rx(A,c)}U0(c)}if(c.subtreeFlags&10256)for(c=c.child;c!==null;)q0(c),c=c.sibling}function q0(c){switch(c.tag){case 0:case 11:case 15:Jm(c),c.flags&2048&&dh(9,c,c.return);break;case 3:Jm(c);break;case 12:Jm(c);break;case 22:var h=c.stateNode;c.memoizedState!==null&&h._visibility&2&&(c.return===null||c.return.tag!==13)?(h._visibility&=-3,Qm(c)):Jm(c);break;default:Jm(c)}}function Qm(c){var h=c.deletions;if((c.flags&16)!==0){if(h!==null)for(var b=0;b<h.length;b++){var A=h[b];uo=A,rx(A,c)}U0(c)}for(c=c.child;c!==null;){switch(h=c,h.tag){case 0:case 11:case 15:dh(8,h,h.return),Qm(h);break;case 22:b=h.stateNode,b._visibility&2&&(b._visibility&=-3,Qm(h));break;default:Qm(h)}c=c.sibling}}function rx(c,h){for(;uo!==null;){var b=uo;switch(b.tag){case 0:case 11:case 15:dh(8,b,h);break;case 23:case 22:if(b.memoizedState!==null&&b.memoizedState.cachePool!==null){var A=b.memoizedState.cachePool.pool;A!=null&&A.refCount++}break;case 24:m(b.memoizedState.cache)}if(A=b.child,A!==null)A.return=b,uo=A;else e:for(b=c;uo!==null;){A=uo;var D=A.sibling,V=A.return;if(zf(A),A===b){uo=null;break e}if(D!==null){D.return=V,uo=D;break e}uo=V}}}var V0={getCacheForType:function(c){var h=Ms(Us),b=h.data.get(c);return b===void 0&&(b=c(),h.data.set(c,b)),b},cacheSignal:function(){return Ms(Us).controller.signal}},$0=typeof WeakMap=="function"?WeakMap:Map,Bi=0,$i=null,yi=null,di=0,hs=0,Mi=null,Ei=!1,qf=!1,sv=!1,Fd=0,Fa=0,fh=0,ph=0,mh=0,Fo=0,Vf=0,qs=null,fl=null,rd=!1,$f=0,eg=0,Op=1/0,gh=null,Ql=null,Ao=0,vh=null,zp=null,Ns=0,Bd=0,av=null,s=null,u=0,f=null;function _(){return(Bi&2)!==0&&di!==0?di&-di:Q.T!==null?ta():qt()}function C(){if(Fo===0)if((di&536870912)===0||gn){var c=Cs;Cs<<=1,(Cs&3932160)===0&&(Cs=262144),Fo=c}else Fo=536870912;return c=vi.current,c!==null&&(c.flags|=32),Fo}function P(c,h,b){(c===$i&&(hs===2||hs===9)||c.cancelPendingCommit!==null)&&(we(c,0),ne(c,di,Fo,!1)),Te(c,b),((Bi&2)===0||c!==$i)&&(c===$i&&((Bi&2)===0&&(ph|=b),Fa===4&&ne(c,di,Fo,!1)),fs(c))}function L(c,h,b){if((Bi&6)!==0)throw Error(i(327));var A=!b&&(h&127)===0&&(h&c.expiredLanes)===0||Lr(c,h),D=A?wt(c,h):ft(c,h,!0),V=A;do{if(D===0){qf&&!A&&ne(c,h,0,!1);break}else{if(b=c.current.alternate,V&&!Z(b)){D=ft(c,h,!1),V=!1;continue}if(D===2){if(V=h,c.errorRecoveryDisabledLanes&V)var ae=0;else ae=c.pendingLanes&-536870913,ae=ae!==0?ae:ae&536870912?536870912:0;if(ae!==0){h=ae;e:{var Oe=c;D=qs;var lt=Oe.current.memoizedState.isDehydrated;if(lt&&(we(Oe,ae).flags|=256),ae=ft(Oe,ae,!1),ae!==2){if(sv&&!lt){Oe.errorRecoveryDisabledLanes|=V,ph|=V,D=4;break e}V=fl,fl=D,V!==null&&(fl===null?fl=V:fl.push.apply(fl,V))}D=ae}if(V=!1,D!==2)continue}}if(D===1){we(c,0),ne(c,h,0,!0);break}e:{switch(A=c,V=D,V){case 0:case 1:throw Error(i(345));case 4:if((h&4194048)!==h)break;case 6:ne(A,h,Fo,!Ei);break e;case 2:fl=null;break;case 3:case 5:break;default:throw Error(i(329))}if((h&62914560)===h&&(D=$f+300-kt(),10<D)){if(ne(A,h,Fo,!Ei),xr(A,0,!0)!==0)break e;Ns=h,A.timeoutHandle=Qf(q.bind(null,A,b,fl,gh,rd,h,Fo,ph,Vf,Ei,V,"Throttled",-0,0),D);break e}q(A,b,fl,gh,rd,h,Fo,ph,Vf,Ei,V,null,-0,0)}}break}while(!0);fs(c)}function q(c,h,b,A,D,V,ae,Oe,lt,Ct,Kt,nr,It,Ut){if(c.timeoutHandle=-1,nr=h.subtreeFlags,nr&8192||(nr&16785408)===16785408){nr={stylesheets:null,count:0,imgCount:0,imgBytes:0,suspenseyImages:[],waitingForImages:!0,waitingForViewTransition:!1,unsuspend:Es},B0(h,V,nr);var Qr=(V&62914560)===V?$f-kt():(V&4194048)===V?eg-kt():0;if(Qr=Q0(nr,Qr),Qr!==null){Ns=V,c.cancelPendingCommit=Qr(Wr.bind(null,c,h,V,b,A,D,ae,Oe,lt,Kt,nr,null,It,Ut)),ne(c,V,ae,!Ct);return}}Wr(c,h,V,b,A,D,ae,Oe,lt)}function Z(c){for(var h=c;;){var b=h.tag;if((b===0||b===11||b===15)&&h.flags&16384&&(b=h.updateQueue,b!==null&&(b=b.stores,b!==null)))for(var A=0;A<b.length;A++){var D=b[A],V=D.getSnapshot;D=D.value;try{if(!Pa(V(),D))return!1}catch{return!1}}if(b=h.child,h.subtreeFlags&16384&&b!==null)b.return=h,h=b;else{if(h===c)break;for(;h.sibling===null;){if(h.return===null||h.return===c)return!0;h=h.return}h.sibling.return=h.return,h=h.sibling}}return!0}function ne(c,h,b,A){h&=~mh,h&=~ph,c.suspendedLanes|=h,c.pingedLanes&=~h,A&&(c.warmLanes|=h),A=c.expirationTimes;for(var D=h;0<D;){var V=31-yn(D),ae=1<<V;A[V]=-1,D&=~ae}b!==0&&et(c,b,h)}function se(){return(Bi&6)===0?(Dn(0),!1):!0}function he(){if(yi!==null){if(hs===0)var c=yi.return;else c=yi,Pl=no=null,oo(c),rt=null,yt=0,c=yi;for(;c!==null;)Kg(c.alternate,c),c=c.return;yi=null}}function we(c,h){var b=c.timeoutHandle;b!==-1&&(c.timeoutHandle=-1,nx(b)),b=c.cancelPendingCommit,b!==null&&(c.cancelPendingCommit=null,b()),Ns=0,he(),$i=c,yi=b=js(c.current,null),di=h,hs=0,Mi=null,Ei=!1,qf=Lr(c,h),sv=!1,Vf=Fo=mh=ph=fh=Fa=0,fl=qs=null,rd=!1,(h&8)!==0&&(h|=h&32);var A=c.entangledLanes;if(A!==0)for(c=c.entanglements,A&=h;0<A;){var D=31-yn(A),V=1<<D;h|=c[D],A&=~V}return Fd=h,mc(),b}function Ee(c,h){hn=null,Q.H=Cp,h===le||h===je?(h=Ge(),hs=3):h===ve?(h=Ge(),hs=4):hs=h===Df?8:h!==null&&typeof h=="object"&&typeof h.then=="function"?6:1,Mi=h,yi===null&&(Fa=1,Gg(c,nl(h,c.current)))}function $e(){var c=vi.current;return c===null?!0:(di&4194048)===di?Yi===null:(di&62914560)===di||(di&536870912)!==0?c===Yi:!1}function He(){var c=Q.H;return Q.H=Cp,c===null?Cp:c}function st(){var c=Q.A;return Q.A=V0,c}function Je(){Fa=4,Ei||(di&4194048)!==di&&vi.current!==null||(qf=!0),(fh&134217727)===0&&(ph&134217727)===0||$i===null||ne($i,di,Fo,!1)}function ft(c,h,b){var A=Bi;Bi|=2;var D=He(),V=st();($i!==c||di!==h)&&(gh=null,we(c,h)),h=!1;var ae=Fa;e:do try{if(hs!==0&&yi!==null){var Oe=yi,lt=Mi;switch(hs){case 8:he(),ae=6;break e;case 3:case 2:case 9:case 6:vi.current===null&&(h=!0);var Ct=hs;if(hs=0,Mi=null,ur(c,Oe,lt,Ct),b&&qf){ae=0;break e}break;default:Ct=hs,hs=0,Mi=null,ur(c,Oe,lt,Ct)}}gt(),ae=Fa;break}catch(Kt){Ee(c,Kt)}while(!0);return h&&c.shellSuspendCounter++,Pl=no=null,Bi=A,Q.H=D,Q.A=V,yi===null&&($i=null,di=0,mc()),ae}function gt(){for(;yi!==null;)Bt(yi)}function wt(c,h){var b=Bi;Bi|=2;var A=He(),D=st();$i!==c||di!==h?(gh=null,Op=kt()+500,we(c,h)):qf=Lr(c,h);e:do try{if(hs!==0&&yi!==null){h=yi;var V=Mi;t:switch(hs){case 1:hs=0,Mi=null,ur(c,h,V,1);break;case 2:case 9:if(Pe(V)){hs=0,Mi=null,rr(h);break}h=function(){hs!==2&&hs!==9||$i!==c||(hs=7),fs(c)},V.then(h,h);break e;case 3:hs=7;break e;case 4:hs=5;break e;case 7:Pe(V)?(hs=0,Mi=null,rr(h)):(hs=0,Mi=null,ur(c,h,V,7));break;case 5:var ae=null;switch(yi.tag){case 26:ae=yi.memoizedState;case 5:case 27:var Oe=yi;if(ae?cx(ae):Oe.stateNode.complete){hs=0,Mi=null;var lt=Oe.sibling;if(lt!==null)yi=lt;else{var Ct=Oe.return;Ct!==null?(yi=Ct,Br(Ct)):yi=null}break t}}hs=0,Mi=null,ur(c,h,V,5);break;case 6:hs=0,Mi=null,ur(c,h,V,6);break;case 8:he(),Fa=6;break e;default:throw Error(i(462))}}Nt();break}catch(Kt){Ee(c,Kt)}while(!0);return Pl=no=null,Q.H=A,Q.A=D,Bi=b,yi!==null?0:($i=null,di=0,mc(),Fa)}function Nt(){for(;yi!==null&&!at();)Bt(yi)}function Bt(c){var h=zo(c.alternate,c,Fd);c.memoizedProps=c.pendingProps,h===null?Br(c):yi=h}function rr(c){var h=c,b=h.alternate;switch(h.tag){case 15:case 0:h=I0(b,h,h.pendingProps,h.type,void 0,di);break;case 11:h=I0(b,h,h.pendingProps,h.type.render,h.ref,di);break;case 5:oo(h);default:Kg(b,h),h=yi=Eu(h,Fd),h=zo(b,h,Fd)}c.memoizedProps=c.pendingProps,h===null?Br(c):yi=h}function ur(c,h,b,A){Pl=no=null,oo(h),rt=null,yt=0;var D=h.return;try{if(C_(c,D,h,b,di)){Fa=1,Gg(c,nl(b,c.current)),yi=null;return}}catch(V){if(D!==null)throw yi=D,V;Fa=1,Gg(c,nl(b,c.current)),yi=null;return}h.flags&32768?(gn||A===1?c=!0:qf||(di&536870912)!==0?c=!1:(Ei=c=!0,(A===2||A===9||A===3||A===6)&&(A=vi.current,A!==null&&A.tag===13&&(A.flags|=16384))),jr(h,c)):Br(h)}function Br(c){var h=c;do{if((h.flags&32768)!==0){jr(h,Ei);return}c=h.return;var b=D0(h.alternate,h,Fd);if(b!==null){yi=b;return}if(h=h.sibling,h!==null){yi=h;return}yi=h=c}while(h!==null);Fa===0&&(Fa=5)}function jr(c,h){do{var b=Xy(c.alternate,c);if(b!==null){b.flags&=32767,yi=b;return}if(b=c.return,b!==null&&(b.flags|=32768,b.subtreeFlags=0,b.deletions=null),!h&&(c=c.sibling,c!==null)){yi=c;return}yi=c=b}while(c!==null);Fa=6,yi=null}function Wr(c,h,b,A,D,V,ae,Oe,lt){c.cancelPendingCommit=null;do Ln();while(Ao!==0);if((Bi&6)!==0)throw Error(i(327));if(h!==null){if(h===c.current)throw Error(i(177));if(V=h.lanes|h.childLanes,V|=Rs,De(c,b,V,ae,Oe,lt),c===$i&&(yi=$i=null,di=0),zp=h,vh=c,Ns=b,Bd=V,av=D,s=A,(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?(c.callbackNode=null,c.callbackPriority=0,ea(Hr,function(){return wn(),null})):(c.callbackNode=null,c.callbackPriority=0),A=(h.flags&13878)!==0,(h.subtreeFlags&13878)!==0||A){A=Q.T,Q.T=null,D=pe.p,pe.p=2,ae=Bi,Bi|=4;try{rv(c,h,b)}finally{Bi=ae,pe.p=D,Q.T=A}}Ao=1,Nr(),Tn(),Jr()}}function Nr(){if(Ao===1){Ao=0;var c=vh,h=zp,b=(h.flags&13878)!==0;if((h.subtreeFlags&13878)!==0||b){b=Q.T,Q.T=null;var A=pe.p;pe.p=2;var D=Bi;Bi|=4;try{F0(h,c);var V=$p,ae=fc(c.containerInfo),Oe=V.focusedElem,lt=V.selectionRange;if(ae!==Oe&&Oe&&Oe.ownerDocument&&Ra(Oe.ownerDocument.documentElement,Oe)){if(lt!==null&&El(Oe)){var Ct=lt.start,Kt=lt.end;if(Kt===void 0&&(Kt=Ct),"selectionStart"in Oe)Oe.selectionStart=Ct,Oe.selectionEnd=Math.min(Kt,Oe.value.length);else{var nr=Oe.ownerDocument||document,It=nr&&nr.defaultView||window;if(It.getSelection){var Ut=It.getSelection(),Qr=Oe.textContent.length,On=Math.min(lt.start,Qr),ra=lt.end===void 0?On:Math.min(lt.end,Qr);!Ut.extend&&On>ra&&(ae=ra,ra=On,On=ae);var xt=xo(Oe,On),pt=xo(Oe,ra);if(xt&&pt&&(Ut.rangeCount!==1||Ut.anchorNode!==xt.node||Ut.anchorOffset!==xt.offset||Ut.focusNode!==pt.node||Ut.focusOffset!==pt.offset)){var At=nr.createRange();At.setStart(xt.node,xt.offset),Ut.removeAllRanges(),On>ra?(Ut.addRange(At),Ut.extend(pt.node,pt.offset)):(At.setEnd(pt.node,pt.offset),Ut.addRange(At))}}}}for(nr=[],Ut=Oe;Ut=Ut.parentNode;)Ut.nodeType===1&&nr.push({element:Ut,left:Ut.scrollLeft,top:Ut.scrollTop});for(typeof Oe.focus=="function"&&Oe.focus(),Oe=0;Oe<nr.length;Oe++){var Jt=nr[Oe];Jt.element.scrollLeft=Jt.left,Jt.element.scrollTop=Jt.top}}yu=!!Kf,$p=Kf=null}finally{Bi=D,pe.p=A,Q.T=b}}c.current=h,Ao=2}}function Tn(){if(Ao===2){Ao=0;var c=vh,h=zp,b=(h.flags&8772)!==0;if((h.subtreeFlags&8772)!==0||b){b=Q.T,Q.T=null;var A=pe.p;pe.p=2;var D=Bi;Bi|=4;try{Wm(c,h.alternate,h)}finally{Bi=D,pe.p=A,Q.T=b}}Ao=3}}function Jr(){if(Ao===4||Ao===3){Ao=0,Tt();var c=vh,h=zp,b=Ns,A=s;(h.subtreeFlags&10256)!==0||(h.flags&10256)!==0?Ao=5:(Ao=0,zp=vh=null,Ir(c,c.pendingLanes));var D=c.pendingLanes;if(D===0&&(Ql=null),ht(b),h=h.stateNode,fi&&typeof fi.onCommitFiberRoot=="function")try{fi.onCommitFiberRoot(_n,h,void 0,(h.current.flags&128)===128)}catch{}if(A!==null){h=Q.T,D=pe.p,pe.p=2,Q.T=null;try{for(var V=c.onRecoverableError,ae=0;ae<A.length;ae++){var Oe=A[ae];V(Oe.value,{componentStack:Oe.stack})}}finally{Q.T=h,pe.p=D}}(Ns&3)!==0&&Ln(),fs(c),D=c.pendingLanes,(b&261930)!==0&&(D&42)!==0?c===f?u++:(u=0,f=c):u=0,Dn(0)}}function Ir(c,h){(c.pooledCacheLanes&=h)===0&&(h=c.pooledCache,h!=null&&(c.pooledCache=null,m(h)))}function Ln(){return Nr(),Tn(),Jr(),wn()}function wn(){if(Ao!==5)return!1;var c=vh,h=Bd;Bd=0;var b=ht(Ns),A=Q.T,D=pe.p;try{pe.p=32>b?32:b,Q.T=null,b=av,av=null;var V=vh,ae=Ns;if(Ao=0,zp=vh=null,Ns=0,(Bi&6)!==0)throw Error(i(331));var Oe=Bi;if(Bi|=4,q0(V.current),iv(V,V.current,ae,b),Bi=Oe,Dn(0,!1),fi&&typeof fi.onPostCommitFiberRoot=="function")try{fi.onPostCommitFiberRoot(_n,V)}catch{}return!0}finally{pe.p=D,Q.T=A,Ir(c,h)}}function ei(c,h,b){h=nl(b,h),h=Uy(c.stateNode,h,2),c=Ar(c,h,2),c!==null&&(Te(c,2),fs(c))}function br(c,h,b){if(c.tag===3)ei(c,c,b);else for(;h!==null;){if(h.tag===3){ei(h,c,b);break}else if(h.tag===1){var A=h.stateNode;if(typeof h.type.getDerivedStateFromError=="function"||typeof A.componentDidCatch=="function"&&(Ql===null||!Ql.has(A))){c=nl(b,c),b=qy(2),A=Ar(h,b,2),A!==null&&(P0(b,A,h,c),Te(A,2),fs(A));break}}h=h.return}}function hi(c,h,b){var A=c.pingCache;if(A===null){A=c.pingCache=new $0;var D=new Set;A.set(h,D)}else D=A.get(h),D===void 0&&(D=new Set,A.set(h,D));D.has(b)||(sv=!0,D.add(b),c=Ss.bind(null,c,h,b),h.then(c,c))}function Ss(c,h,b){var A=c.pingCache;A!==null&&A.delete(h),c.pingedLanes|=c.suspendedLanes&b,c.warmLanes&=~b,$i===c&&(di&b)===b&&(Fa===4||Fa===3&&(di&62914560)===di&&300>kt()-$f?(Bi&2)===0&&we(c,0):mh|=b,Vf===di&&(Vf=0)),fs(c)}function Vs(c,h){h===0&&(h=xe()),c=Xs(c,h),c!==null&&(Te(c,h),fs(c))}function $s(c){var h=c.memoizedState,b=0;h!==null&&(b=h.retryLane),Vs(c,b)}function As(c,h){var b=0;switch(c.tag){case 31:case 13:var A=c.stateNode,D=c.memoizedState;D!==null&&(b=D.retryLane);break;case 19:A=c.stateNode;break;case 22:A=c.stateNode._retryCache;break;default:throw Error(i(314))}A!==null&&A.delete(h),Vs(c,b)}function ea(c,h){return Be(c,h)}var fa=null,Hs=null,Co=!1,wa=!1,ko=!1,Xi=0;function fs(c){c!==Hs&&c.next===null&&(Hs===null?fa=Hs=c:Hs=Hs.next=c),wa=!0,Co||(Co=!0,ps())}function Dn(c,h){if(!ko&&wa){ko=!0;do for(var b=!1,A=fa;A!==null;){if(c!==0){var D=A.pendingLanes;if(D===0)var V=0;else{var ae=A.suspendedLanes,Oe=A.pingedLanes;V=(1<<31-yn(42|c)+1)-1,V&=D&~(ae&~Oe),V=V&201326741?V&201326741|1:V?V|2:0}V!==0&&(b=!0,Eo(A,V))}else V=di,V=xr(A,A===$i?V:0,A.cancelPendingCommit!==null||A.timeoutHandle!==-1),(V&3)===0||Lr(A,V)||(b=!0,Eo(A,V));A=A.next}while(b);ko=!1}}function Hi(){Ti()}function Ti(){wa=Co=!1;var c=0;Xi!==0&&ig()&&(c=Xi);for(var h=kt(),b=null,A=fa;A!==null;){var D=A.next,V=ii(A,h);V===0?(A.next=null,b===null?fa=D:b.next=D,D===null&&(Hs=b)):(b=A,(c!==0||(V&3)!==0)&&(wa=!0)),A=D}Ao!==0&&Ao!==5||Dn(c),Xi!==0&&(Xi=0)}function ii(c,h){for(var b=c.suspendedLanes,A=c.pingedLanes,D=c.expirationTimes,V=c.pendingLanes&-62914561;0<V;){var ae=31-yn(V),Oe=1<<ae,lt=D[ae];lt===-1?((Oe&b)===0||(Oe&A)!==0)&&(D[ae]=oe(Oe,h)):lt<=h&&(c.expiredLanes|=Oe),V&=~Oe}if(h=$i,b=di,b=xr(c,c===h?b:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),A=c.callbackNode,b===0||c===h&&(hs===2||hs===9)||c.cancelPendingCommit!==null)return A!==null&&A!==null&&it(A),c.callbackNode=null,c.callbackPriority=0;if((b&3)===0||Lr(c,b)){if(h=b&-b,h===c.callbackPriority)return h;switch(A!==null&&it(A),ht(b)){case 2:case 8:b=zr;break;case 32:b=Hr;break;case 268435456:b=nn;break;default:b=Hr}return A=pl.bind(null,c),b=Be(b,A),c.callbackPriority=h,c.callbackNode=b,h}return A!==null&&A!==null&&it(A),c.callbackPriority=2,c.callbackNode=null,2}function pl(c,h){if(Ao!==0&&Ao!==5)return c.callbackNode=null,c.callbackPriority=0,null;var b=c.callbackNode;if(Ln()&&c.callbackNode!==b)return null;var A=di;return A=xr(c,c===$i?A:0,c.cancelPendingCommit!==null||c.timeoutHandle!==-1),A===0?null:(L(c,A,h),ii(c,kt()),c.callbackNode!=null&&c.callbackNode===b?pl.bind(null,c):null)}function Eo(c,h){if(Ln())return null;L(c,h,!0)}function ps(){sx(function(){(Bi&6)!==0?Be(Qt,Hi):Ti()})}function ta(){if(Xi===0){var c=d;c===0&&(c=wi,wi<<=1,(wi&261888)===0&&(wi=256)),Xi=c}return Xi}function To(c){return c==null||typeof c=="symbol"||typeof c=="boolean"?null:typeof c=="function"?c:Nu(""+c)}function mi(c,h){var b=h.ownerDocument.createElement("input");return b.name=h.name,b.value=h.value,c.id&&b.setAttribute("form",c.id),h.parentNode.insertBefore(b,h),c=new FormData(c),b.parentNode.removeChild(b),c}function Ud(c,h,b,A,D){if(h==="submit"&&b&&b.stateNode===D){var V=To((D[dr]||null).action),ae=A.submitter;ae&&(h=(h=ae[dr]||null)?To(h.formAction):ae.getAttribute("formAction"),h!==null&&(V=h,ae=null));var Oe=new tu("action","action",null,A,D);c.push({event:Oe,listeners:[{instance:null,listener:function(){if(A.defaultPrevented){if(Xi!==0){var lt=ae?mi(D,ae):new FormData(D);Py(b,{pending:!0,data:lt,method:D.method,action:V},null,lt)}}else typeof V=="function"&&(Oe.preventDefault(),lt=ae?mi(D,ae):new FormData(D),Py(b,{pending:!0,data:lt,method:D.method,action:V},V,lt))},currentTarget:D}]})}}for(var ec=0;ec<_i.length;ec++){var Iu=_i[ec],pa=Iu.toLowerCase(),qd=Iu[0].toUpperCase()+Iu.slice(1);Xn(pa,"on"+qd)}Xn(Gl,"onAnimationEnd"),Xn(tl,"onAnimationIteration"),Xn(Wl,"onAnimationStart"),Xn("dblclick","onDoubleClick"),Xn("focusin","onFocus"),Xn("focusout","onBlur"),Xn(Sd,"onTransitionRun"),Xn($u,"onTransitionStart"),Xn(Yl,"onTransitionCancel"),Xn(Pc,"onTransitionEnd"),Hn("onMouseEnter",["mouseout","mouseover"]),Hn("onMouseLeave",["mouseout","mouseover"]),Hn("onPointerEnter",["pointerout","pointerover"]),Hn("onPointerLeave",["pointerout","pointerover"]),Ii("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Ii("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Ii("onBeforeInput",["compositionend","keypress","textInput","paste"]),Ii("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Ii("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var tc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Fp=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(tc));function Qh(c,h){h=(h&4)!==0;for(var b=0;b<c.length;b++){var A=c[b],D=A.event;A=A.listeners;e:{var V=void 0;if(h)for(var ae=A.length-1;0<=ae;ae--){var Oe=A[ae],lt=Oe.instance,Ct=Oe.currentTarget;if(Oe=Oe.listener,lt!==V&&D.isPropagationStopped())break e;V=Oe,D.currentTarget=Ct;try{V(D)}catch(Kt){zi(Kt)}D.currentTarget=null,V=lt}else for(ae=0;ae<A.length;ae++){if(Oe=A[ae],lt=Oe.instance,Ct=Oe.currentTarget,Oe=Oe.listener,lt!==V&&D.isPropagationStopped())break e;V=Oe,D.currentTarget=Ct;try{V(D)}catch(Kt){zi(Kt)}D.currentTarget=null,V=lt}}}}function si(c,h){var b=h[jt];b===void 0&&(b=h[jt]=new Set);var A=c+"__bubble";b.has(A)||(Hf(h,c,2,!1),b.add(A))}function nd(c,h,b){var A=0;h&&(A|=4),Hf(b,c,A,h)}var yh="_reactListening"+Math.random().toString(36).slice(2);function Bp(c){if(!c[yh]){c[yh]=!0,Ks.forEach(function(b){b!=="selectionchange"&&(Fp.has(b)||nd(b,!1,c),nd(b,!0,c))});var h=c.nodeType===9?c:c.ownerDocument;h===null||h[yh]||(h[yh]=!0,nd("selectionchange",!1,h))}}function Hf(c,h,b,A){switch(p5(h)){case 2:var D=pv;break;case 8:D=a1;break;default:D=ap}b=D.bind(null,h,b,c),D=void 0,!Yo||h!=="touchstart"&&h!=="touchmove"&&h!=="wheel"||(D=!0),A?D!==void 0?c.addEventListener(h,b,{capture:!0,passive:D}):c.addEventListener(h,b,!0):D!==void 0?c.addEventListener(h,b,{passive:D}):c.addEventListener(h,b,!1)}function Gf(c,h,b,A,D){var V=A;if((h&1)===0&&(h&2)===0&&A!==null)e:for(;;){if(A===null)return;var ae=A.tag;if(ae===3||ae===4){var Oe=A.stateNode.containerInfo;if(Oe===D)break;if(ae===4)for(ae=A.return;ae!==null;){var lt=ae.tag;if((lt===3||lt===4)&&ae.stateNode.containerInfo===D)return;ae=ae.return}for(;Oe!==null;){if(ae=xn(Oe),ae===null)return;if(lt=ae.tag,lt===5||lt===6||lt===26||lt===27){A=V=ae;continue e}Oe=Oe.parentNode}}A=A.return}Au(function(){var Ct=V,Kt=zu(b),nr=[];e:{var It=la.get(c);if(It!==void 0){var Ut=tu,Qr=c;switch(c){case"keypress":if(Ai(b)===0)break e;case"keydown":case"keyup":Ut=ku;break;case"focusin":Qr="focus",Ut=Fu;break;case"focusout":Qr="blur",Ut=Fu;break;case"beforeblur":case"afterblur":Ut=Fu;break;case"click":if(b.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":Ut=Al;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":Ut=Nd;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":Ut=be;break;case Gl:case tl:case Wl:Ut=kc;break;case Pc:Ut=dt;break;case"scroll":case"scrollend":Ut=wd;break;case"wheel":Ut=$t;break;case"copy":case"cut":case"paste":Ut=cc;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":Ut=Uu;break;case"toggle":case"beforetoggle":Ut=Or}var On=(h&4)!==0,ra=!On&&(c==="scroll"||c==="scrollend"),xt=On?It!==null?It+"Capture":null:It;On=[];for(var pt=Ct,At;pt!==null;){var Jt=pt;if(At=Jt.stateNode,Jt=Jt.tag,Jt!==5&&Jt!==26&&Jt!==27||At===null||xt===null||(Jt=ka(pt,xt),Jt!=null&&On.push(ef(pt,Jt,At))),ra)break;pt=pt.return}0<On.length&&(It=new Ut(It,Qr,null,b,Kt),nr.push({event:It,listeners:On}))}}if((h&7)===0){e:{if(It=c==="mouseover"||c==="pointerover",Ut=c==="mouseout"||c==="pointerout",It&&b!==_d&&(Qr=b.relatedTarget||b.fromElement)&&(xn(Qr)||Qr[mr]))break e;if((Ut||It)&&(It=Kt.window===Kt?Kt:(It=Kt.ownerDocument)?It.defaultView||It.parentWindow:window,Ut?(Qr=b.relatedTarget||b.toElement,Ut=Ct,Qr=Qr?xn(Qr):null,Qr!==null&&(ra=l(Qr),On=Qr.tag,Qr!==ra||On!==5&&On!==27&&On!==6)&&(Qr=null)):(Ut=null,Qr=Ct),Ut!==Qr)){if(On=Al,Jt="onMouseLeave",xt="onMouseEnter",pt="mouse",(c==="pointerout"||c==="pointerover")&&(On=Uu,Jt="onPointerLeave",xt="onPointerEnter",pt="pointer"),ra=Ut==null?It:bn(Ut),At=Qr==null?It:bn(Qr),It=new On(Jt,pt+"leave",Ut,b,Kt),It.target=ra,It.relatedTarget=At,Jt=null,xn(Kt)===Ct&&(On=new On(xt,pt+"enter",Qr,b,Kt),On.target=At,On.relatedTarget=ra,Jt=On),ra=Jt,Ut&&Qr)t:{for(On=xh,xt=Ut,pt=Qr,At=0,Jt=xt;Jt;Jt=On(Jt))At++;Jt=0;for(var An=pt;An;An=On(An))Jt++;for(;0<At-Jt;)xt=On(xt),At--;for(;0<Jt-At;)pt=On(pt),Jt--;for(;At--;){if(xt===pt||pt!==null&&xt===pt.alternate){On=xt;break t}xt=On(xt),pt=On(pt)}On=null}else On=null;Ut!==null&&Up(nr,It,Ut,On,!1),Qr!==null&&ra!==null&&Up(nr,ra,Qr,On,!0)}}e:{if(It=Ct?bn(Ct):window,Ut=It.nodeName&&It.nodeName.toLowerCase(),Ut==="select"||Ut==="input"&&It.type==="file")var ms=Ta;else if(nu(It))if($l)ms=ou;else{ms=Vu;var un=au}else Ut=It.nodeName,!Ut||Ut.toLowerCase()!=="input"||It.type!=="checkbox"&&It.type!=="radio"?Ct&&sc(Ct.elementType)&&(ms=Ta):ms=Qo;if(ms&&(ms=ms(c,Ct))){hc(nr,ms,b,Kt);break e}un&&un(c,It,Ct),c==="focusout"&&Ct&&It.type==="number"&&Ct.memoizedProps.value!=null&&to(It,"number",It.value)}switch(un=Ct?bn(Ct):window,c){case"focusin":(nu(un)||un.contentEditable==="true")&&(Mo=un,Hl=Ct,Li=null);break;case"focusout":Li=Hl=Mo=null;break;case"mousedown":ji=!0;break;case"contextmenu":case"mouseup":case"dragend":ji=!1,Ia(nr,b,Kt);break;case"selectionchange":if(pc)break;case"keydown":case"keyup":Ia(nr,b,Kt)}var xi;if(Pn)e:{switch(c){case"compositionstart":var Ui="onCompositionStart";break e;case"compositionend":Ui="onCompositionEnd";break e;case"compositionupdate":Ui="onCompositionUpdate";break e}Ui=void 0}else oa?ba(c,b)&&(Ui="onCompositionEnd"):c==="keydown"&&b.keyCode===229&&(Ui="onCompositionStart");Ui&&(_s&&b.locale!=="ko"&&(oa||Ui!=="onCompositionStart"?Ui==="onCompositionEnd"&&oa&&(xi=aa()):(ro=Kt,Bl="value"in ro?ro.value:ro.textContent,oa=!0)),un=Wf(Ct,Ui),0<un.length&&(Ui=new kl(Ui,c,null,b,Kt),nr.push({event:Ui,listeners:un}),xi?Ui.data=xi:(xi=Ea(b),xi!==null&&(Ui.data=xi)))),(xi=Kn?Ko(c,b):Ec(c,b))&&(Ui=Wf(Ct,"onBeforeInput"),0<Ui.length&&(un=new kl("onBeforeInput","beforeinput",null,b,Kt),nr.push({event:un,listeners:Ui}),un.data=xi)),Ud(nr,c,Ct,b,Kt)}Qh(nr,h)})}function ef(c,h,b){return{instance:c,listener:h,currentTarget:b}}function Wf(c,h){for(var b=h+"Capture",A=[];c!==null;){var D=c,V=D.stateNode;if(D=D.tag,D!==5&&D!==26&&D!==27||V===null||(D=ka(c,b),D!=null&&A.unshift(ef(c,D,V)),D=ka(c,h),D!=null&&A.push(ef(c,D,V))),c.tag===3)return A;c=c.return}return[]}function xh(c){if(c===null)return null;do c=c.return;while(c&&c.tag!==5&&c.tag!==27);return c||null}function Up(c,h,b,A,D){for(var V=h._reactName,ae=[];b!==null&&b!==A;){var Oe=b,lt=Oe.alternate,Ct=Oe.stateNode;if(Oe=Oe.tag,lt!==null&&lt===A)break;Oe!==5&&Oe!==26&&Oe!==27||Ct===null||(lt=Ct,D?(Ct=ka(b,V),Ct!=null&&ae.unshift(ef(b,Ct,lt))):D||(Ct=ka(b,V),Ct!=null&&ae.push(ef(b,Ct,lt)))),b=b.return}ae.length!==0&&c.push({event:h,listeners:ae})}var qp=/\r\n?/g,tf=/\u0000|\uFFFD/g;function Yf(c){return(typeof c=="string"?c:""+c).replace(qp,`
`).replace(tf,"")}function tg(c,h){return h=Yf(h),Yf(c)===h}function is(c,h,b,A,D,V){switch(b){case"children":typeof A=="string"?h==="body"||h==="textarea"&&A===""||Ca(c,A):(typeof A=="number"||typeof A=="bigint")&&h!=="body"&&Ca(c,""+A);break;case"className":ri(c,"class",A);break;case"tabIndex":ri(c,"tabindex",A);break;case"dir":case"role":case"viewBox":case"width":case"height":ri(c,b,A);break;case"style":$h(c,A,V);break;case"data":if(h!=="object"){ri(c,"data",A);break}case"src":case"href":if(A===""&&(h!=="a"||b!=="href")){c.removeAttribute(b);break}if(A==null||typeof A=="function"||typeof A=="symbol"||typeof A=="boolean"){c.removeAttribute(b);break}A=Nu(""+A),c.setAttribute(b,A);break;case"action":case"formAction":if(typeof A=="function"){c.setAttribute(b,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof V=="function"&&(b==="formAction"?(h!=="input"&&is(c,h,"name",D.name,D,null),is(c,h,"formEncType",D.formEncType,D,null),is(c,h,"formMethod",D.formMethod,D,null),is(c,h,"formTarget",D.formTarget,D,null)):(is(c,h,"encType",D.encType,D,null),is(c,h,"method",D.method,D,null),is(c,h,"target",D.target,D,null)));if(A==null||typeof A=="symbol"||typeof A=="boolean"){c.removeAttribute(b);break}A=Nu(""+A),c.setAttribute(b,A);break;case"onClick":A!=null&&(c.onclick=Es);break;case"onScroll":A!=null&&si("scroll",c);break;case"onScrollEnd":A!=null&&si("scrollend",c);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(b=A.__html,b!=null){if(D.children!=null)throw Error(i(60));c.innerHTML=b}}break;case"multiple":c.multiple=A&&typeof A!="function"&&typeof A!="symbol";break;case"muted":c.muted=A&&typeof A!="function"&&typeof A!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(A==null||typeof A=="function"||typeof A=="boolean"||typeof A=="symbol"){c.removeAttribute("xlink:href");break}b=Nu(""+A),c.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",b);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":A!=null&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,""+A):c.removeAttribute(b);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":A&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,""):c.removeAttribute(b);break;case"capture":case"download":A===!0?c.setAttribute(b,""):A!==!1&&A!=null&&typeof A!="function"&&typeof A!="symbol"?c.setAttribute(b,A):c.removeAttribute(b);break;case"cols":case"rows":case"size":case"span":A!=null&&typeof A!="function"&&typeof A!="symbol"&&!isNaN(A)&&1<=A?c.setAttribute(b,A):c.removeAttribute(b);break;case"rowSpan":case"start":A==null||typeof A=="function"||typeof A=="symbol"||isNaN(A)?c.removeAttribute(b):c.setAttribute(b,A);break;case"popover":si("beforetoggle",c),si("toggle",c),ks(c,"popover",A);break;case"xlinkActuate":Wo(c,"http://www.w3.org/1999/xlink","xlink:actuate",A);break;case"xlinkArcrole":Wo(c,"http://www.w3.org/1999/xlink","xlink:arcrole",A);break;case"xlinkRole":Wo(c,"http://www.w3.org/1999/xlink","xlink:role",A);break;case"xlinkShow":Wo(c,"http://www.w3.org/1999/xlink","xlink:show",A);break;case"xlinkTitle":Wo(c,"http://www.w3.org/1999/xlink","xlink:title",A);break;case"xlinkType":Wo(c,"http://www.w3.org/1999/xlink","xlink:type",A);break;case"xmlBase":Wo(c,"http://www.w3.org/XML/1998/namespace","xml:base",A);break;case"xmlLang":Wo(c,"http://www.w3.org/XML/1998/namespace","xml:lang",A);break;case"xmlSpace":Wo(c,"http://www.w3.org/XML/1998/namespace","xml:space",A);break;case"is":ks(c,"is",A);break;case"innerText":case"textContent":break;default:(!(2<b.length)||b[0]!=="o"&&b[0]!=="O"||b[1]!=="n"&&b[1]!=="N")&&(b=ju.get(b)||b,ks(c,b,A))}}function Zf(c,h,b,A,D,V){switch(b){case"style":$h(c,A,V);break;case"dangerouslySetInnerHTML":if(A!=null){if(typeof A!="object"||!("__html"in A))throw Error(i(61));if(b=A.__html,b!=null){if(D.children!=null)throw Error(i(60));c.innerHTML=b}}break;case"children":typeof A=="string"?Ca(c,A):(typeof A=="number"||typeof A=="bigint")&&Ca(c,""+A);break;case"onScroll":A!=null&&si("scroll",c);break;case"onScrollEnd":A!=null&&si("scrollend",c);break;case"onClick":A!=null&&(c.onclick=Es);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!ti.hasOwnProperty(b))e:{if(b[0]==="o"&&b[1]==="n"&&(D=b.endsWith("Capture"),h=b.slice(2,D?b.length-7:void 0),V=c[dr]||null,V=V!=null?V[b]:null,typeof V=="function"&&c.removeEventListener(h,V,D),typeof A=="function")){typeof V!="function"&&V!==null&&(b in c?c[b]=null:c.hasAttribute(b)&&c.removeAttribute(b)),c.addEventListener(h,A,D);break e}b in c?c[b]=A:A===!0?c.setAttribute(b,""):ks(c,b,A)}}}function ho(c,h,b){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":si("error",c),si("load",c);var A=!1,D=!1,V;for(V in b)if(b.hasOwnProperty(V)){var ae=b[V];if(ae!=null)switch(V){case"src":A=!0;break;case"srcSet":D=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:is(c,h,V,ae,b,null)}}D&&is(c,h,"srcSet",b.srcSet,b,null),A&&is(c,h,"src",b.src,b,null);return;case"input":si("invalid",c);var Oe=V=ae=D=null,lt=null,Ct=null;for(A in b)if(b.hasOwnProperty(A)){var Kt=b[A];if(Kt!=null)switch(A){case"name":D=Kt;break;case"type":ae=Kt;break;case"checked":lt=Kt;break;case"defaultChecked":Ct=Kt;break;case"value":V=Kt;break;case"defaultValue":Oe=Kt;break;case"children":case"dangerouslySetInnerHTML":if(Kt!=null)throw Error(i(137,h));break;default:is(c,h,A,Kt,b,null)}}th(c,V,Oe,lt,Ct,ae,D,!1);return;case"select":si("invalid",c),A=ae=V=null;for(D in b)if(b.hasOwnProperty(D)&&(Oe=b[D],Oe!=null))switch(D){case"value":V=Oe;break;case"defaultValue":ae=Oe;break;case"multiple":A=Oe;default:is(c,h,D,Oe,b,null)}h=V,b=ae,c.multiple=!!A,h!=null?wu(c,!!A,h,!1):b!=null&&wu(c,!!A,b,!0);return;case"textarea":si("invalid",c),V=D=A=null;for(ae in b)if(b.hasOwnProperty(ae)&&(Oe=b[ae],Oe!=null))switch(ae){case"value":A=Oe;break;case"defaultValue":D=Oe;break;case"children":V=Oe;break;case"dangerouslySetInnerHTML":if(Oe!=null)throw Error(i(91));break;default:is(c,h,ae,Oe,b,null)}ia(c,A,D,V);return;case"option":for(lt in b)if(b.hasOwnProperty(lt)&&(A=b[lt],A!=null))switch(lt){case"selected":c.selected=A&&typeof A!="function"&&typeof A!="symbol";break;default:is(c,h,lt,A,b,null)}return;case"dialog":si("beforetoggle",c),si("toggle",c),si("cancel",c),si("close",c);break;case"iframe":case"object":si("load",c);break;case"video":case"audio":for(A=0;A<tc.length;A++)si(tc[A],c);break;case"image":si("error",c),si("load",c);break;case"details":si("toggle",c);break;case"embed":case"source":case"link":si("error",c),si("load",c);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(Ct in b)if(b.hasOwnProperty(Ct)&&(A=b[Ct],A!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":throw Error(i(137,h));default:is(c,h,Ct,A,b,null)}return;default:if(sc(h)){for(Kt in b)b.hasOwnProperty(Kt)&&(A=b[Kt],A!==void 0&&Zf(c,h,Kt,A,b,void 0));return}}for(Oe in b)b.hasOwnProperty(Oe)&&(A=b[Oe],A!=null&&is(c,h,Oe,A,b,null))}function ov(c,h,b,A){switch(h){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var D=null,V=null,ae=null,Oe=null,lt=null,Ct=null,Kt=null;for(Ut in b){var nr=b[Ut];if(b.hasOwnProperty(Ut)&&nr!=null)switch(Ut){case"checked":break;case"value":break;case"defaultValue":lt=nr;default:A.hasOwnProperty(Ut)||is(c,h,Ut,null,A,nr)}}for(var It in A){var Ut=A[It];if(nr=b[It],A.hasOwnProperty(It)&&(Ut!=null||nr!=null))switch(It){case"type":V=Ut;break;case"name":D=Ut;break;case"checked":Ct=Ut;break;case"defaultChecked":Kt=Ut;break;case"value":ae=Ut;break;case"defaultValue":Oe=Ut;break;case"children":case"dangerouslySetInnerHTML":if(Ut!=null)throw Error(i(137,h));break;default:Ut!==nr&&is(c,h,It,Ut,A,nr)}}Va(c,ae,Oe,lt,Ct,Kt,V,D);return;case"select":Ut=ae=Oe=It=null;for(V in b)if(lt=b[V],b.hasOwnProperty(V)&&lt!=null)switch(V){case"value":break;case"multiple":Ut=lt;default:A.hasOwnProperty(V)||is(c,h,V,null,A,lt)}for(D in A)if(V=A[D],lt=b[D],A.hasOwnProperty(D)&&(V!=null||lt!=null))switch(D){case"value":It=V;break;case"defaultValue":Oe=V;break;case"multiple":ae=V;default:V!==lt&&is(c,h,D,V,A,lt)}h=Oe,b=ae,A=Ut,It!=null?wu(c,!!b,It,!1):!!A!=!!b&&(h!=null?wu(c,!!b,h,!0):wu(c,!!b,b?[]:"",!1));return;case"textarea":Ut=It=null;for(Oe in b)if(D=b[Oe],b.hasOwnProperty(Oe)&&D!=null&&!A.hasOwnProperty(Oe))switch(Oe){case"value":break;case"children":break;default:is(c,h,Oe,null,A,D)}for(ae in A)if(D=A[ae],V=b[ae],A.hasOwnProperty(ae)&&(D!=null||V!=null))switch(ae){case"value":It=D;break;case"defaultValue":Ut=D;break;case"children":break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(i(91));break;default:D!==V&&is(c,h,ae,D,A,V)}wl(c,It,Ut);return;case"option":for(var Qr in b)if(It=b[Qr],b.hasOwnProperty(Qr)&&It!=null&&!A.hasOwnProperty(Qr))switch(Qr){case"selected":c.selected=!1;break;default:is(c,h,Qr,null,A,It)}for(lt in A)if(It=A[lt],Ut=b[lt],A.hasOwnProperty(lt)&&It!==Ut&&(It!=null||Ut!=null))switch(lt){case"selected":c.selected=It&&typeof It!="function"&&typeof It!="symbol";break;default:is(c,h,lt,It,A,Ut)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var On in b)It=b[On],b.hasOwnProperty(On)&&It!=null&&!A.hasOwnProperty(On)&&is(c,h,On,null,A,It);for(Ct in A)if(It=A[Ct],Ut=b[Ct],A.hasOwnProperty(Ct)&&It!==Ut&&(It!=null||Ut!=null))switch(Ct){case"children":case"dangerouslySetInnerHTML":if(It!=null)throw Error(i(137,h));break;default:is(c,h,Ct,It,A,Ut)}return;default:if(sc(h)){for(var ra in b)It=b[ra],b.hasOwnProperty(ra)&&It!==void 0&&!A.hasOwnProperty(ra)&&Zf(c,h,ra,void 0,A,It);for(Kt in A)It=A[Kt],Ut=b[Kt],!A.hasOwnProperty(Kt)||It===Ut||It===void 0&&Ut===void 0||Zf(c,h,Kt,It,A,Ut);return}}for(var xt in b)It=b[xt],b.hasOwnProperty(xt)&&It!=null&&!A.hasOwnProperty(xt)&&is(c,h,xt,null,A,It);for(nr in A)It=A[nr],Ut=b[nr],!A.hasOwnProperty(nr)||It===Ut||It==null&&Ut==null||is(c,h,nr,It,A,Ut)}function Vp(c){switch(c){case"css":case"script":case"font":case"img":case"image":case"input":case"link":return!0;default:return!1}}function rg(){if(typeof performance.getEntriesByType=="function"){for(var c=0,h=0,b=performance.getEntriesByType("resource"),A=0;A<b.length;A++){var D=b[A],V=D.transferSize,ae=D.initiatorType,Oe=D.duration;if(V&&Oe&&Vp(ae)){for(ae=0,Oe=D.responseEnd,A+=1;A<b.length;A++){var lt=b[A],Ct=lt.startTime;if(Ct>Oe)break;var Kt=lt.transferSize,nr=lt.initiatorType;Kt&&Vp(nr)&&(lt=lt.responseEnd,ae+=Kt*(lt<Oe?1:(Oe-Ct)/(lt-Ct)))}if(--A,h+=8*(V+ae)/(D.duration/1e3),c++,10<c)break}}if(0<c)return h/c/1e6}return navigator.connection&&(c=navigator.connection.downlink,typeof c=="number")?c:5}var Kf=null,$p=null;function bh(c){return c.nodeType===9?c:c.ownerDocument}function ng(c){switch(c){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function Xf(c,h){if(c===0)switch(h){case"svg":return 1;case"math":return 2;default:return 0}return c===1&&h==="foreignObject"?0:c}function Jf(c,h){return c==="textarea"||c==="noscript"||typeof h.children=="string"||typeof h.children=="number"||typeof h.children=="bigint"||typeof h.dangerouslySetInnerHTML=="object"&&h.dangerouslySetInnerHTML!==null&&h.dangerouslySetInnerHTML.__html!=null}var _h=null;function ig(){var c=window.event;return c&&c.type==="popstate"?c===_h?!1:(_h=c,!0):(_h=null,!1)}var Qf=typeof setTimeout=="function"?setTimeout:void 0,nx=typeof clearTimeout=="function"?clearTimeout:void 0,ix=typeof Promise=="function"?Promise:void 0,sx=typeof queueMicrotask=="function"?queueMicrotask:typeof ix<"u"?function(c){return ix.resolve(null).then(c).catch(H0)}:Qf;function H0(c){setTimeout(function(){throw c})}function Vd(c){return c==="head"}function G0(c,h){var b=h,A=0;do{var D=b.nextSibling;if(c.removeChild(b),D&&D.nodeType===8)if(b=D.data,b==="/$"||b==="/&"){if(A===0){c.removeChild(D),gv(h);return}A--}else if(b==="$"||b==="$?"||b==="$~"||b==="$!"||b==="&")A++;else if(b==="html")ep(c.ownerDocument.documentElement);else if(b==="head"){b=c.ownerDocument.head,ep(b);for(var V=b.firstChild;V;){var ae=V.nextSibling,Oe=V.nodeName;V[an]||Oe==="SCRIPT"||Oe==="STYLE"||Oe==="LINK"&&V.rel.toLowerCase()==="stylesheet"||b.removeChild(V),V=ae}}else b==="body"&&ep(c.ownerDocument.body);b=D}while(b);gv(h)}function Hp(c,h){var b=c;c=0;do{var A=b.nextSibling;if(b.nodeType===1?h?(b._stashedDisplay=b.style.display,b.style.display="none"):(b.style.display=b._stashedDisplay||"",b.getAttribute("style")===""&&b.removeAttribute("style")):b.nodeType===3&&(h?(b._stashedText=b.nodeValue,b.nodeValue=""):b.nodeValue=b._stashedText||""),A&&A.nodeType===8)if(b=A.data,b==="/$"){if(c===0)break;c--}else b!=="$"&&b!=="$?"&&b!=="$~"&&b!=="$!"||c++;b=A}while(b)}function Gs(c){var h=c.firstChild;for(h&&h.nodeType===10&&(h=h.nextSibling);h;){var b=h;switch(h=h.nextSibling,b.nodeName){case"HTML":case"HEAD":case"BODY":Gs(b),yr(b);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(b.rel.toLowerCase()==="stylesheet")continue}c.removeChild(b)}}function id(c,h,b,A){for(;c.nodeType===1;){var D=b;if(c.nodeName.toLowerCase()!==h.toLowerCase()){if(!A&&(c.nodeName!=="INPUT"||c.type!=="hidden"))break}else if(A){if(!c[an])switch(h){case"meta":if(!c.hasAttribute("itemprop"))break;return c;case"link":if(V=c.getAttribute("rel"),V==="stylesheet"&&c.hasAttribute("data-precedence"))break;if(V!==D.rel||c.getAttribute("href")!==(D.href==null||D.href===""?null:D.href)||c.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin)||c.getAttribute("title")!==(D.title==null?null:D.title))break;return c;case"style":if(c.hasAttribute("data-precedence"))break;return c;case"script":if(V=c.getAttribute("src"),(V!==(D.src==null?null:D.src)||c.getAttribute("type")!==(D.type==null?null:D.type)||c.getAttribute("crossorigin")!==(D.crossOrigin==null?null:D.crossOrigin))&&V&&c.hasAttribute("async")&&!c.hasAttribute("itemprop"))break;return c;default:return c}}else if(h==="input"&&c.type==="hidden"){var V=D.name==null?null:""+D.name;if(D.type==="hidden"&&c.getAttribute("name")===V)return c}else return c;if(c=fo(c.nextSibling),c===null)break}return null}function E_(c,h,b){if(h==="")return null;for(;c.nodeType!==3;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!b||(c=fo(c.nextSibling),c===null))return null;return c}function wh(c,h){for(;c.nodeType!==8;)if((c.nodeType!==1||c.nodeName!=="INPUT"||c.type!=="hidden")&&!h||(c=fo(c.nextSibling),c===null))return null;return c}function sg(c){return c.data==="$?"||c.data==="$~"}function lv(c){return c.data==="$!"||c.data==="$?"&&c.ownerDocument.readyState!=="loading"}function cv(c,h){var b=c.ownerDocument;if(c.data==="$~")c._reactRetry=h;else if(c.data!=="$?"||b.readyState!=="loading")h();else{var A=function(){h(),b.removeEventListener("DOMContentLoaded",A)};b.addEventListener("DOMContentLoaded",A),c._reactRetry=A}}function fo(c){for(;c!=null;c=c.nextSibling){var h=c.nodeType;if(h===1||h===3)break;if(h===8){if(h=c.data,h==="$"||h==="$!"||h==="$?"||h==="$~"||h==="&"||h==="F!"||h==="F")break;if(h==="/$"||h==="/&")return null}}return c}var Gp=null;function Wp(c){c=c.nextSibling;for(var h=0;c;){if(c.nodeType===8){var b=c.data;if(b==="/$"||b==="/&"){if(h===0)return fo(c.nextSibling);h--}else b!=="$"&&b!=="$!"&&b!=="$?"&&b!=="$~"&&b!=="&"||h++}c=c.nextSibling}return null}function ag(c){c=c.previousSibling;for(var h=0;c;){if(c.nodeType===8){var b=c.data;if(b==="$"||b==="$!"||b==="$?"||b==="$~"||b==="&"){if(h===0)return c;h--}else b!=="/$"&&b!=="/&"||h++}c=c.previousSibling}return null}function og(c,h,b){switch(h=bh(b),c){case"html":if(c=h.documentElement,!c)throw Error(i(452));return c;case"head":if(c=h.head,!c)throw Error(i(453));return c;case"body":if(c=h.body,!c)throw Error(i(454));return c;default:throw Error(i(451))}}function ep(c){for(var h=c.attributes;h.length;)c.removeAttributeNode(h[0]);yr(c)}var vu=new Map,Yp=new Set;function lg(c){return typeof c.getRootNode=="function"?c.getRootNode():c.nodeType===9?c:c.ownerDocument}var $d=pe.d;pe.d={f:W0,r:Y0,D:uv,C:Z0,L:Hd,m:T_,X:rp,S:K0,M:Zp};function W0(){var c=$d.f(),h=se();return c||h}function Y0(c){var h=$n(c);h!==null&&h.tag===5&&h.type==="form"?Iy(h):$d.r(c)}var tp=typeof document>"u"?null:document;function bc(c,h,b){var A=tp;if(A&&typeof h=="string"&&h){var D=cs(h);D='link[rel="'+c+'"][href="'+D+'"]',typeof b=="string"&&(D+='[crossorigin="'+b+'"]'),Yp.has(D)||(Yp.add(D),c={rel:c,crossOrigin:b,href:h},A.querySelector(D)===null&&(h=A.createElement("link"),ho(h,"link",c),Xr(h),A.head.appendChild(h)))}}function uv(c){$d.D(c),bc("dns-prefetch",c,null)}function Z0(c,h){$d.C(c,h),bc("preconnect",c,h)}function Hd(c,h,b){$d.L(c,h,b);var A=tp;if(A&&c&&h){var D='link[rel="preload"][as="'+cs(h)+'"]';h==="image"&&b&&b.imageSrcSet?(D+='[imagesrcset="'+cs(b.imageSrcSet)+'"]',typeof b.imageSizes=="string"&&(D+='[imagesizes="'+cs(b.imageSizes)+'"]')):D+='[href="'+cs(c)+'"]';var V=D;switch(h){case"style":V=sd(c);break;case"script":V=ip(c)}vu.has(V)||(c=S({rel:"preload",href:h==="image"&&b&&b.imageSrcSet?void 0:c,as:h},b),vu.set(V,c),A.querySelector(D)!==null||h==="style"&&A.querySelector(Gd(V))||h==="script"&&A.querySelector(Kp(V))||(h=A.createElement("link"),ho(h,"link",c),Xr(h),A.head.appendChild(h)))}}function T_(c,h){$d.m(c,h);var b=tp;if(b&&c){var A=h&&typeof h.as=="string"?h.as:"script",D='link[rel="modulepreload"][as="'+cs(A)+'"][href="'+cs(c)+'"]',V=D;switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":V=ip(c)}if(!vu.has(V)&&(c=S({rel:"modulepreload",href:c},h),vu.set(V,c),b.querySelector(D)===null)){switch(A){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(b.querySelector(Kp(V)))return}A=b.createElement("link"),ho(A,"link",c),Xr(A),b.head.appendChild(A)}}}function K0(c,h,b){$d.S(c,h,b);var A=tp;if(A&&c){var D=Un(A).hoistableStyles,V=sd(c);h=h||"default";var ae=D.get(V);if(!ae){var Oe={loading:0,preload:null};if(ae=A.querySelector(Gd(V)))Oe.loading=5;else{c=S({rel:"stylesheet",href:c,"data-precedence":h},b),(b=vu.get(V))&&ad(c,b);var lt=ae=A.createElement("link");Xr(lt),ho(lt,"link",c),lt._p=new Promise(function(Ct,Kt){lt.onload=Ct,lt.onerror=Kt}),lt.addEventListener("load",function(){Oe.loading|=1}),lt.addEventListener("error",function(){Oe.loading|=2}),Oe.loading|=4,Xp(ae,h,A)}ae={type:"stylesheet",instance:ae,count:1,state:Oe},D.set(V,ae)}}}function rp(c,h){$d.X(c,h);var b=tp;if(b&&c){var A=Un(b).hoistableScripts,D=ip(c),V=A.get(D);V||(V=b.querySelector(Kp(D)),V||(c=S({src:c,async:!0},h),(h=vu.get(D))&&hv(c,h),V=b.createElement("script"),Xr(V),ho(V,"link",c),b.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},A.set(D,V))}}function Zp(c,h){$d.M(c,h);var b=tp;if(b&&c){var A=Un(b).hoistableScripts,D=ip(c),V=A.get(D);V||(V=b.querySelector(Kp(D)),V||(c=S({src:c,async:!0,type:"module"},h),(h=vu.get(D))&&hv(c,h),V=b.createElement("script"),Xr(V),ho(V,"link",c),b.head.appendChild(V)),V={type:"script",instance:V,count:1,state:null},A.set(D,V))}}function np(c,h,b,A){var D=(D=We.current)?lg(D):null;if(!D)throw Error(i(446));switch(c){case"meta":case"title":return null;case"style":return typeof b.precedence=="string"&&typeof b.href=="string"?(h=sd(b.href),b=Un(D).hoistableStyles,A=b.get(h),A||(A={type:"style",instance:null,count:0,state:null},b.set(h,A)),A):{type:"void",instance:null,count:0,state:null};case"link":if(b.rel==="stylesheet"&&typeof b.href=="string"&&typeof b.precedence=="string"){c=sd(b.href);var V=Un(D).hoistableStyles,ae=V.get(c);if(ae||(D=D.ownerDocument||D,ae={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},V.set(c,ae),(V=D.querySelector(Gd(c)))&&!V._p&&(ae.instance=V,ae.state.loading=5),vu.has(c)||(b={rel:"preload",as:"style",href:b.href,crossOrigin:b.crossOrigin,integrity:b.integrity,media:b.media,hrefLang:b.hrefLang,referrerPolicy:b.referrerPolicy},vu.set(c,b),V||X0(D,c,b,ae.state))),h&&A===null)throw Error(i(528,""));return ae}if(h&&A!==null)throw Error(i(529,""));return null;case"script":return h=b.async,b=b.src,typeof b=="string"&&h&&typeof h!="function"&&typeof h!="symbol"?(h=ip(b),b=Un(D).hoistableScripts,A=b.get(h),A||(A={type:"script",instance:null,count:0,state:null},b.set(h,A)),A):{type:"void",instance:null,count:0,state:null};default:throw Error(i(444,c))}}function sd(c){return'href="'+cs(c)+'"'}function Gd(c){return'link[rel="stylesheet"]['+c+"]"}function ax(c){return S({},c,{"data-precedence":c.precedence,precedence:null})}function X0(c,h,b,A){c.querySelector('link[rel="preload"][as="style"]['+h+"]")?A.loading=1:(h=c.createElement("link"),A.preload=h,h.addEventListener("load",function(){return A.loading|=1}),h.addEventListener("error",function(){return A.loading|=2}),ho(h,"link",b),Xr(h),c.head.appendChild(h))}function ip(c){return'[src="'+cs(c)+'"]'}function Kp(c){return"script[async]"+c}function dv(c,h,b){if(h.count++,h.instance===null)switch(h.type){case"style":var A=c.querySelector('style[data-href~="'+cs(b.href)+'"]');if(A)return h.instance=A,Xr(A),A;var D=S({},b,{"data-href":b.href,"data-precedence":b.precedence,href:null,precedence:null});return A=(c.ownerDocument||c).createElement("style"),Xr(A),ho(A,"style",D),Xp(A,b.precedence,c),h.instance=A;case"stylesheet":D=sd(b.href);var V=c.querySelector(Gd(D));if(V)return h.state.loading|=4,h.instance=V,Xr(V),V;A=ax(b),(D=vu.get(D))&&ad(A,D),V=(c.ownerDocument||c).createElement("link"),Xr(V);var ae=V;return ae._p=new Promise(function(Oe,lt){ae.onload=Oe,ae.onerror=lt}),ho(V,"link",A),h.state.loading|=4,Xp(V,b.precedence,c),h.instance=V;case"script":return V=ip(b.src),(D=c.querySelector(Kp(V)))?(h.instance=D,Xr(D),D):(A=b,(D=vu.get(V))&&(A=S({},b),hv(A,D)),c=c.ownerDocument||c,D=c.createElement("script"),Xr(D),ho(D,"link",A),c.head.appendChild(D),h.instance=D);case"void":return null;default:throw Error(i(443,h.type))}else h.type==="stylesheet"&&(h.state.loading&4)===0&&(A=h.instance,h.state.loading|=4,Xp(A,b.precedence,c));return h.instance}function Xp(c,h,b){for(var A=b.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),D=A.length?A[A.length-1]:null,V=D,ae=0;ae<A.length;ae++){var Oe=A[ae];if(Oe.dataset.precedence===h)V=Oe;else if(V!==D)break}V?V.parentNode.insertBefore(c,V.nextSibling):(h=b.nodeType===9?b.head:b,h.insertBefore(c,h.firstChild))}function ad(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.title==null&&(c.title=h.title)}function hv(c,h){c.crossOrigin==null&&(c.crossOrigin=h.crossOrigin),c.referrerPolicy==null&&(c.referrerPolicy=h.referrerPolicy),c.integrity==null&&(c.integrity=h.integrity)}var Jp=null;function fv(c,h,b){if(Jp===null){var A=new Map,D=Jp=new Map;D.set(b,A)}else D=Jp,A=D.get(b),A||(A=new Map,D.set(b,A));if(A.has(c))return A;for(A.set(c,null),b=b.getElementsByTagName(c),D=0;D<b.length;D++){var V=b[D];if(!(V[an]||V[Mt]||c==="link"&&V.getAttribute("rel")==="stylesheet")&&V.namespaceURI!=="http://www.w3.org/2000/svg"){var ae=V.getAttribute(h)||"";ae=c+ae;var Oe=A.get(ae);Oe?Oe.push(V):A.set(ae,[V])}}return A}function ox(c,h,b){c=c.ownerDocument||c,c.head.insertBefore(b,h==="title"?c.querySelector("head > title"):null)}function lx(c,h,b){if(b===1||h.itemProp!=null)return!1;switch(c){case"meta":case"title":return!0;case"style":if(typeof h.precedence!="string"||typeof h.href!="string"||h.href==="")break;return!0;case"link":if(typeof h.rel!="string"||typeof h.href!="string"||h.href===""||h.onLoad||h.onError)break;switch(h.rel){case"stylesheet":return c=h.disabled,typeof h.precedence=="string"&&c==null;default:return!0}case"script":if(h.async&&typeof h.async!="function"&&typeof h.async!="symbol"&&!h.onLoad&&!h.onError&&h.src&&typeof h.src=="string")return!0}return!1}function cx(c){return!(c.type==="stylesheet"&&(c.state.loading&3)===0)}function J0(c,h,b,A){if(b.type==="stylesheet"&&(typeof A.media!="string"||matchMedia(A.media).matches!==!1)&&(b.state.loading&4)===0){if(b.instance===null){var D=sd(A.href),V=h.querySelector(Gd(D));if(V){h=V._p,h!==null&&typeof h=="object"&&typeof h.then=="function"&&(c.count++,c=rf.bind(c),h.then(c,c)),b.state.loading|=4,b.instance=V,Xr(V);return}V=h.ownerDocument||h,A=ax(A),(D=vu.get(D))&&ad(A,D),V=V.createElement("link"),Xr(V);var ae=V;ae._p=new Promise(function(Oe,lt){ae.onload=Oe,ae.onerror=lt}),ho(V,"link",A),b.instance=V}c.stylesheets===null&&(c.stylesheets=new Map),c.stylesheets.set(b,h),(h=b.state.preload)&&(b.state.loading&3)===0&&(c.count++,b=rf.bind(c),h.addEventListener("load",b),h.addEventListener("error",b))}}var cg=0;function Q0(c,h){return c.stylesheets&&c.count===0&&sp(c,c.stylesheets),0<c.count||0<c.imgCount?function(b){var A=setTimeout(function(){if(c.stylesheets&&sp(c,c.stylesheets),c.unsuspend){var V=c.unsuspend;c.unsuspend=null,V()}},6e4+h);0<c.imgBytes&&cg===0&&(cg=62500*rg());var D=setTimeout(function(){if(c.waitingForImages=!1,c.count===0&&(c.stylesheets&&sp(c,c.stylesheets),c.unsuspend)){var V=c.unsuspend;c.unsuspend=null,V()}},(c.imgBytes>cg?50:800)+h);return c.unsuspend=b,function(){c.unsuspend=null,clearTimeout(A),clearTimeout(D)}}:null}function rf(){if(this.count--,this.count===0&&(this.imgCount===0||!this.waitingForImages)){if(this.stylesheets)sp(this,this.stylesheets);else if(this.unsuspend){var c=this.unsuspend;this.unsuspend=null,c()}}}var ug=null;function sp(c,h){c.stylesheets=null,c.unsuspend!==null&&(c.count++,ug=new Map,h.forEach(P_,c),ug=null,rf.call(c))}function P_(c,h){if(!(h.state.loading&4)){var b=ug.get(c);if(b)var A=b.get(null);else{b=new Map,ug.set(c,b);for(var D=c.querySelectorAll("link[data-precedence],style[data-precedence]"),V=0;V<D.length;V++){var ae=D[V];(ae.nodeName==="LINK"||ae.getAttribute("media")!=="not all")&&(b.set(ae.dataset.precedence,ae),A=ae)}A&&b.set(null,A)}D=h.instance,ae=D.getAttribute("data-precedence"),V=b.get(ae)||A,V===A&&b.set(null,D),b.set(ae,D),this.count++,A=rf.bind(this),D.addEventListener("load",A),D.addEventListener("error",A),V?V.parentNode.insertBefore(D,V.nextSibling):(c=c.nodeType===9?c.head:c,c.insertBefore(D,c.firstChild)),h.state.loading|=4}}var Qp={$$typeof:z,Provider:null,Consumer:null,_currentValue:me,_currentValue2:me,_threadCount:0};function R_(c,h,b,A,D,V,ae,Oe,lt){this.tag=1,this.containerInfo=c,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Ce(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ce(0),this.hiddenUpdates=Ce(null),this.identifierPrefix=A,this.onUncaughtError=D,this.onCaughtError=V,this.onRecoverableError=ae,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=lt,this.incompleteTransitions=new Map}function e1(c,h,b,A,D,V,ae,Oe,lt,Ct,Kt,nr){return c=new R_(c,h,b,ae,lt,Ct,Kt,nr,Oe),h=1,V===!0&&(h|=24),V=Ya(3,null,null,h),c.current=V,V.stateNode=c,h=fu(),h.refCount++,c.pooledCache=h,h.refCount++,V.memoizedState={element:A,isDehydrated:b,cache:h},Sr(V),c}function t1(c){return c?(c=La,c):La}function r1(c,h,b,A,D,V){D=t1(D),A.context===null?A.context=D:A.pendingContext=D,A=ir(h),A.payload={element:b},V=V===void 0?null:V,V!==null&&(A.callback=V),b=Ar(c,A,h),b!==null&&(P(b,c,h),Gr(b,c,h))}function n1(c,h){if(c=c.memoizedState,c!==null&&c.dehydrated!==null){var b=c.retryLane;c.retryLane=b!==0&&b<h?b:h}}function ux(c,h){n1(c,h),(c=c.alternate)&&n1(c,h)}function i1(c){if(c.tag===13||c.tag===31){var h=Xs(c,67108864);h!==null&&P(h,c,67108864),ux(c,67108864)}}function s1(c){if(c.tag===13||c.tag===31){var h=_();h=qe(h);var b=Xs(c,h);b!==null&&P(b,c,h),ux(c,h)}}var yu=!0;function pv(c,h,b,A){var D=Q.T;Q.T=null;var V=pe.p;try{pe.p=2,ap(c,h,b,A)}finally{pe.p=V,Q.T=D}}function a1(c,h,b,A){var D=Q.T;Q.T=null;var V=pe.p;try{pe.p=8,ap(c,h,b,A)}finally{pe.p=V,Q.T=D}}function ap(c,h,b,A){if(yu){var D=mv(A);if(D===null)Gf(c,h,A,o1,b),m5(c,A);else if(yP(D,c,h,b,A))A.stopPropagation();else if(m5(c,A),h&4&&-1<vP.indexOf(c)){for(;D!==null;){var V=$n(D);if(V!==null)switch(V.tag){case 3:if(V=V.stateNode,V.current.memoizedState.isDehydrated){var ae=pi(V.pendingLanes);if(ae!==0){var Oe=V;for(Oe.pendingLanes|=2,Oe.entangledLanes|=2;ae;){var lt=1<<31-yn(ae);Oe.entanglements[1]|=lt,ae&=~lt}fs(V),(Bi&6)===0&&(Op=kt()+500,Dn(0))}}break;case 31:case 13:Oe=Xs(V,2),Oe!==null&&P(Oe,V,2),se(),ux(V,2)}if(V=mv(A),V===null&&Gf(c,h,A,o1,b),V===D)break;D=V}D!==null&&A.stopPropagation()}else Gf(c,h,A,null,b)}}function mv(c){return c=zu(c),I_(c)}var o1=null;function I_(c){if(o1=null,c=xn(c),c!==null){var h=l(c);if(h===null)c=null;else{var b=h.tag;if(b===13){if(c=a(h),c!==null)return c;c=null}else if(b===31){if(c=p(h),c!==null)return c;c=null}else if(b===3){if(h.stateNode.current.memoizedState.isDehydrated)return h.tag===3?h.stateNode.containerInfo:null;c=null}else h!==c&&(c=null)}}return o1=c,null}function p5(c){switch(c){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Ot()){case Qt:return 2;case zr:return 8;case Hr:case Ur:return 32;case nn:return 268435456;default:return 32}default:return 32}}var L_=!1,em=null,tm=null,rm=null,dx=new Map,hx=new Map,nm=[],vP="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function m5(c,h){switch(c){case"focusin":case"focusout":em=null;break;case"dragenter":case"dragleave":tm=null;break;case"mouseover":case"mouseout":rm=null;break;case"pointerover":case"pointerout":dx.delete(h.pointerId);break;case"gotpointercapture":case"lostpointercapture":hx.delete(h.pointerId)}}function fx(c,h,b,A,D,V){return c===null||c.nativeEvent!==V?(c={blockedOn:h,domEventName:b,eventSystemFlags:A,nativeEvent:V,targetContainers:[D]},h!==null&&(h=$n(h),h!==null&&i1(h)),c):(c.eventSystemFlags|=A,h=c.targetContainers,D!==null&&h.indexOf(D)===-1&&h.push(D),c)}function yP(c,h,b,A,D){switch(h){case"focusin":return em=fx(em,c,h,b,A,D),!0;case"dragenter":return tm=fx(tm,c,h,b,A,D),!0;case"mouseover":return rm=fx(rm,c,h,b,A,D),!0;case"pointerover":var V=D.pointerId;return dx.set(V,fx(dx.get(V)||null,c,h,b,A,D)),!0;case"gotpointercapture":return V=D.pointerId,hx.set(V,fx(hx.get(V)||null,c,h,b,A,D)),!0}return!1}function g5(c){var h=xn(c.target);if(h!==null){var b=l(h);if(b!==null){if(h=b.tag,h===13){if(h=a(b),h!==null){c.blockedOn=h,Xt(c.priority,function(){s1(b)});return}}else if(h===31){if(h=p(b),h!==null){c.blockedOn=h,Xt(c.priority,function(){s1(b)});return}}else if(h===3&&b.stateNode.current.memoizedState.isDehydrated){c.blockedOn=b.tag===3?b.stateNode.containerInfo:null;return}}}c.blockedOn=null}function l1(c){if(c.blockedOn!==null)return!1;for(var h=c.targetContainers;0<h.length;){var b=mv(c.nativeEvent);if(b===null){b=c.nativeEvent;var A=new b.constructor(b.type,b);_d=A,b.target.dispatchEvent(A),_d=null}else return h=$n(b),h!==null&&i1(h),c.blockedOn=b,!1;h.shift()}return!0}function v5(c,h,b){l1(c)&&b.delete(h)}function xP(){L_=!1,em!==null&&l1(em)&&(em=null),tm!==null&&l1(tm)&&(tm=null),rm!==null&&l1(rm)&&(rm=null),dx.forEach(v5),hx.forEach(v5)}function c1(c,h){c.blockedOn===h&&(c.blockedOn=null,L_||(L_=!0,n.unstable_scheduleCallback(n.unstable_NormalPriority,xP)))}var u1=null;function y5(c){u1!==c&&(u1=c,n.unstable_scheduleCallback(n.unstable_NormalPriority,function(){u1===c&&(u1=null);for(var h=0;h<c.length;h+=3){var b=c[h],A=c[h+1],D=c[h+2];if(typeof A!="function"){if(I_(A||b)===null)continue;break}var V=$n(b);V!==null&&(c.splice(h,3),h-=3,Py(V,{pending:!0,data:D,method:b.method,action:A},A,D))}}))}function gv(c){function h(lt){return c1(lt,c)}em!==null&&c1(em,c),tm!==null&&c1(tm,c),rm!==null&&c1(rm,c),dx.forEach(h),hx.forEach(h);for(var b=0;b<nm.length;b++){var A=nm[b];A.blockedOn===c&&(A.blockedOn=null)}for(;0<nm.length&&(b=nm[0],b.blockedOn===null);)g5(b),b.blockedOn===null&&nm.shift();if(b=(c.ownerDocument||c).$$reactFormReplay,b!=null)for(A=0;A<b.length;A+=3){var D=b[A],V=b[A+1],ae=D[dr]||null;if(typeof V=="function")ae||y5(b);else if(ae){var Oe=null;if(V&&V.hasAttribute("formAction")){if(D=V,ae=V[dr]||null)Oe=ae.formAction;else if(I_(D)!==null)continue}else Oe=ae.action;typeof Oe=="function"?b[A+1]=Oe:(b.splice(A,3),A-=3),y5(b)}}}function x5(){function c(V){V.canIntercept&&V.info==="react-transition"&&V.intercept({handler:function(){return new Promise(function(ae){return D=ae})},focusReset:"manual",scroll:"manual"})}function h(){D!==null&&(D(),D=null),A||setTimeout(b,20)}function b(){if(!A&&!navigation.transition){var V=navigation.currentEntry;V&&V.url!=null&&navigation.navigate(V.url,{state:V.getState(),info:"react-transition",history:"replace"})}}if(typeof navigation=="object"){var A=!1,D=null;return navigation.addEventListener("navigate",c),navigation.addEventListener("navigatesuccess",h),navigation.addEventListener("navigateerror",h),setTimeout(b,100),function(){A=!0,navigation.removeEventListener("navigate",c),navigation.removeEventListener("navigatesuccess",h),navigation.removeEventListener("navigateerror",h),D!==null&&(D(),D=null)}}}function M_(c){this._internalRoot=c}d1.prototype.render=M_.prototype.render=function(c){var h=this._internalRoot;if(h===null)throw Error(i(409));var b=h.current,A=_();r1(b,A,c,h,null,null)},d1.prototype.unmount=M_.prototype.unmount=function(){var c=this._internalRoot;if(c!==null){this._internalRoot=null;var h=c.containerInfo;r1(c.current,2,null,c,null,null),se(),h[mr]=null}};function d1(c){this._internalRoot=c}d1.prototype.unstable_scheduleHydration=function(c){if(c){var h=qt();c={blockedOn:null,target:c,priority:h};for(var b=0;b<nm.length&&h!==0&&h<nm[b].priority;b++);nm.splice(b,0,c),b===0&&g5(c)}};var b5=t.version;if(b5!=="19.2.0")throw Error(i(527,b5,"19.2.0"));pe.findDOMNode=function(c){var h=c._reactInternals;if(h===void 0)throw typeof c.render=="function"?Error(i(188)):(c=Object.keys(c).join(","),Error(i(268,c)));return c=w(h),c=c!==null?j(c):null,c=c===null?null:c.stateNode,c};var bP={bundleType:0,version:"19.2.0",rendererPackageName:"react-dom",currentDispatcherRef:Q,reconcilerVersion:"19.2.0"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var h1=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!h1.isDisabled&&h1.supportsFiber)try{_n=h1.inject(bP),fi=h1}catch{}}return mx.createRoot=function(c,h){if(!o(c))throw Error(i(299));var b=!1,A="",D=Fy,V=E0,ae=By;return h!=null&&(h.unstable_strictMode===!0&&(b=!0),h.identifierPrefix!==void 0&&(A=h.identifierPrefix),h.onUncaughtError!==void 0&&(D=h.onUncaughtError),h.onCaughtError!==void 0&&(V=h.onCaughtError),h.onRecoverableError!==void 0&&(ae=h.onRecoverableError)),h=e1(c,1,!1,null,null,b,A,null,D,V,ae,x5),c[mr]=h.current,Bp(c),new M_(h)},mx.hydrateRoot=function(c,h,b){if(!o(c))throw Error(i(299));var A=!1,D="",V=Fy,ae=E0,Oe=By,lt=null;return b!=null&&(b.unstable_strictMode===!0&&(A=!0),b.identifierPrefix!==void 0&&(D=b.identifierPrefix),b.onUncaughtError!==void 0&&(V=b.onUncaughtError),b.onCaughtError!==void 0&&(ae=b.onCaughtError),b.onRecoverableError!==void 0&&(Oe=b.onRecoverableError),b.formState!==void 0&&(lt=b.formState)),h=e1(c,1,!0,h,b??null,A,D,lt,V,ae,Oe,x5),h.context=t1(null),b=h.current,A=_(),A=qe(A),D=ir(A),D.callback=null,Ar(b,D,A),b=A,h.current.lanes=b,Te(h,b),fs(h),c[mr]=h.current,Bp(c),new d1(h)},mx.version="19.2.0",mx}var T5;function IP(){if(T5)return F_.exports;T5=1;function n(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(n)}catch(t){console.error(t)}}return n(),F_.exports=RP(),F_.exports}var LP=IP();/**
 * react-router v7.9.6
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */var P5="popstate";function MP(n={}){function t(i,o){let{pathname:l,search:a,hash:p}=i.location;return C2("",{pathname:l,search:a,hash:p},o.state&&o.state.usr||null,o.state&&o.state.key||"default")}function r(i,o){return typeof o=="string"?o:Lx(o)}return OP(t,r,null,n)}function Qa(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function vd(n,t){if(!n){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function DP(){return Math.random().toString(36).substring(2,10)}function R5(n,t){return{usr:n.state,key:n.key,idx:t}}function C2(n,t,r=null,i){return{pathname:typeof n=="string"?n:n.pathname,search:"",hash:"",...typeof t=="string"?hy(t):t,state:r,key:t&&t.key||i||DP()}}function Lx({pathname:n="/",search:t="",hash:r=""}){return t&&t!=="?"&&(n+=t.charAt(0)==="?"?t:"?"+t),r&&r!=="#"&&(n+=r.charAt(0)==="#"?r:"#"+r),n}function hy(n){let t={};if(n){let r=n.indexOf("#");r>=0&&(t.hash=n.substring(r),n=n.substring(0,r));let i=n.indexOf("?");i>=0&&(t.search=n.substring(i),n=n.substring(0,i)),n&&(t.pathname=n)}return t}function OP(n,t,r,i={}){let{window:o=document.defaultView,v5Compat:l=!1}=i,a=o.history,p="POP",g=null,w=j();w==null&&(w=0,a.replaceState({...a.state,idx:w},""));function j(){return(a.state||{idx:null}).idx}function S(){p="POP";let F=j(),B=F==null?null:F-w;w=F,g&&g({action:p,location:R.location,delta:B})}function T(F,B){p="PUSH";let G=C2(R.location,F,B);w=j()+1;let z=R5(G,w),ee=R.createHref(G);try{a.pushState(z,"",ee)}catch(ie){if(ie instanceof DOMException&&ie.name==="DataCloneError")throw ie;o.location.assign(ee)}l&&g&&g({action:p,location:R.location,delta:1})}function E(F,B){p="REPLACE";let G=C2(R.location,F,B);w=j();let z=R5(G,w),ee=R.createHref(G);a.replaceState(z,"",ee),l&&g&&g({action:p,location:R.location,delta:0})}function O(F){return zP(F)}let R={get action(){return p},get location(){return n(o,a)},listen(F){if(g)throw new Error("A history only accepts one active listener");return o.addEventListener(P5,S),g=F,()=>{o.removeEventListener(P5,S),g=null}},createHref(F){return t(o,F)},createURL:O,encodeLocation(F){let B=O(F);return{pathname:B.pathname,search:B.search,hash:B.hash}},push:T,replace:E,go(F){return a.go(F)}};return R}function zP(n,t=!1){let r="http://localhost";typeof window<"u"&&(r=window.location.origin!=="null"?window.location.origin:window.location.href),Qa(r,"No window.location.(origin|href) available to create URL");let i=typeof n=="string"?n:Lx(n);return i=i.replace(/ $/,"%20"),!t&&i.startsWith("//")&&(i=r+i),new URL(i,r)}function M4(n,t,r="/"){return FP(n,t,r,!1)}function FP(n,t,r,i){let o=typeof t=="string"?hy(t):t,l=pp(o.pathname||"/",r);if(l==null)return null;let a=D4(n);BP(a);let p=null;for(let g=0;p==null&&g<a.length;++g){let w=XP(l);p=ZP(a[g],w,i)}return p}function D4(n,t=[],r=[],i="",o=!1){let l=(a,p,g=o,w)=>{let j={relativePath:w===void 0?a.path||"":w,caseSensitive:a.caseSensitive===!0,childrenIndex:p,route:a};if(j.relativePath.startsWith("/")){if(!j.relativePath.startsWith(i)&&g)return;Qa(j.relativePath.startsWith(i),`Absolute route path "${j.relativePath}" nested under path "${i}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),j.relativePath=j.relativePath.slice(i.length)}let S=fp([i,j.relativePath]),T=r.concat(j);a.children&&a.children.length>0&&(Qa(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${S}".`),D4(a.children,t,T,S,g)),!(a.path==null&&!a.index)&&t.push({path:S,score:WP(S,a.index),routesMeta:T})};return n.forEach((a,p)=>{var g;if(a.path===""||!((g=a.path)!=null&&g.includes("?")))l(a,p);else for(let w of O4(a.path))l(a,p,!0,w)}),t}function O4(n){let t=n.split("/");if(t.length===0)return[];let[r,...i]=t,o=r.endsWith("?"),l=r.replace(/\?$/,"");if(i.length===0)return o?[l,""]:[l];let a=O4(i.join("/")),p=[];return p.push(...a.map(g=>g===""?l:[l,g].join("/"))),o&&p.push(...a),p.map(g=>n.startsWith("/")&&g===""?"/":g)}function BP(n){n.sort((t,r)=>t.score!==r.score?r.score-t.score:YP(t.routesMeta.map(i=>i.childrenIndex),r.routesMeta.map(i=>i.childrenIndex)))}var UP=/^:[\w-]+$/,qP=3,VP=2,$P=1,HP=10,GP=-2,I5=n=>n==="*";function WP(n,t){let r=n.split("/"),i=r.length;return r.some(I5)&&(i+=GP),t&&(i+=VP),r.filter(o=>!I5(o)).reduce((o,l)=>o+(UP.test(l)?qP:l===""?$P:HP),i)}function YP(n,t){return n.length===t.length&&n.slice(0,-1).every((i,o)=>i===t[o])?n[n.length-1]-t[t.length-1]:0}function ZP(n,t,r=!1){let{routesMeta:i}=n,o={},l="/",a=[];for(let p=0;p<i.length;++p){let g=i[p],w=p===i.length-1,j=l==="/"?t:t.slice(l.length)||"/",S=K1({path:g.relativePath,caseSensitive:g.caseSensitive,end:w},j),T=g.route;if(!S&&w&&r&&!i[i.length-1].route.index&&(S=K1({path:g.relativePath,caseSensitive:g.caseSensitive,end:!1},j)),!S)return null;Object.assign(o,S.params),a.push({params:o,pathname:fp([l,S.pathname]),pathnameBase:rR(fp([l,S.pathnameBase])),route:T}),S.pathnameBase!=="/"&&(l=fp([l,S.pathnameBase]))}return a}function K1(n,t){typeof n=="string"&&(n={path:n,caseSensitive:!1,end:!0});let[r,i]=KP(n.path,n.caseSensitive,n.end),o=t.match(r);if(!o)return null;let l=o[0],a=l.replace(/(.)\/+$/,"$1"),p=o.slice(1);return{params:i.reduce((w,{paramName:j,isOptional:S},T)=>{if(j==="*"){let O=p[T]||"";a=l.slice(0,l.length-O.length).replace(/(.)\/+$/,"$1")}const E=p[T];return S&&!E?w[j]=void 0:w[j]=(E||"").replace(/%2F/g,"/"),w},{}),pathname:l,pathnameBase:a,pattern:n}}function KP(n,t=!1,r=!0){vd(n==="*"||!n.endsWith("*")||n.endsWith("/*"),`Route path "${n}" will be treated as if it were "${n.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${n.replace(/\*$/,"/*")}".`);let i=[],o="^"+n.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(a,p,g)=>(i.push({paramName:p,isOptional:g!=null}),g?"/?([^\\/]+)?":"/([^\\/]+)")).replace(/\/([\w-]+)\?(\/|$)/g,"(/$1)?$2");return n.endsWith("*")?(i.push({paramName:"*"}),o+=n==="*"||n==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):r?o+="\\/*$":n!==""&&n!=="/"&&(o+="(?:(?=\\/|$))"),[new RegExp(o,t?void 0:"i"),i]}function XP(n){try{return n.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return vd(!1,`The URL path "${n}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${t}).`),n}}function pp(n,t){if(t==="/")return n;if(!n.toLowerCase().startsWith(t.toLowerCase()))return null;let r=t.endsWith("/")?t.length-1:t.length,i=n.charAt(r);return i&&i!=="/"?null:n.slice(r)||"/"}var JP=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QP=n=>JP.test(n);function eR(n,t="/"){let{pathname:r,search:i="",hash:o=""}=typeof n=="string"?hy(n):n,l;if(r)if(QP(r))l=r;else{if(r.includes("//")){let a=r;r=r.replace(/\/\/+/g,"/"),vd(!1,`Pathnames cannot have embedded double slashes - normalizing ${a} -> ${r}`)}r.startsWith("/")?l=L5(r.substring(1),"/"):l=L5(r,t)}else l=t;return{pathname:l,search:nR(i),hash:iR(o)}}function L5(n,t){let r=t.replace(/\/+$/,"").split("/");return n.split("/").forEach(o=>{o===".."?r.length>1&&r.pop():o!=="."&&r.push(o)}),r.length>1?r.join("/"):"/"}function q_(n,t,r,i){return`Cannot include a '${n}' character in a manually specified \`to.${t}\` field [${JSON.stringify(i)}].  Please separate it out to the \`to.${r}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function tR(n){return n.filter((t,r)=>r===0||t.route.path&&t.route.path.length>0)}function Dw(n){let t=tR(n);return t.map((r,i)=>i===t.length-1?r.pathname:r.pathnameBase)}function Ow(n,t,r,i=!1){let o;typeof n=="string"?o=hy(n):(o={...n},Qa(!o.pathname||!o.pathname.includes("?"),q_("?","pathname","search",o)),Qa(!o.pathname||!o.pathname.includes("#"),q_("#","pathname","hash",o)),Qa(!o.search||!o.search.includes("#"),q_("#","search","hash",o)));let l=n===""||o.pathname==="",a=l?"/":o.pathname,p;if(a==null)p=r;else{let S=t.length-1;if(!i&&a.startsWith("..")){let T=a.split("/");for(;T[0]==="..";)T.shift(),S-=1;o.pathname=T.join("/")}p=S>=0?t[S]:"/"}let g=eR(o,p),w=a&&a!=="/"&&a.endsWith("/"),j=(l||a===".")&&r.endsWith("/");return!g.pathname.endsWith("/")&&(w||j)&&(g.pathname+="/"),g}var fp=n=>n.join("/").replace(/\/\/+/g,"/"),rR=n=>n.replace(/\/+$/,"").replace(/^\/*/,"/"),nR=n=>!n||n==="?"?"":n.startsWith("?")?n:"?"+n,iR=n=>!n||n==="#"?"":n.startsWith("#")?n:"#"+n;function sR(n){return n!=null&&typeof n.status=="number"&&typeof n.statusText=="string"&&typeof n.internal=="boolean"&&"data"in n}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var z4=["POST","PUT","PATCH","DELETE"];new Set(z4);var aR=["GET",...z4];new Set(aR);var fy=M.createContext(null);fy.displayName="DataRouter";var Db=M.createContext(null);Db.displayName="DataRouterState";M.createContext(!1);var F4=M.createContext({isTransitioning:!1});F4.displayName="ViewTransition";var oR=M.createContext(new Map);oR.displayName="Fetchers";var lR=M.createContext(null);lR.displayName="Await";var Fh=M.createContext(null);Fh.displayName="Navigation";var Kx=M.createContext(null);Kx.displayName="Location";var Bh=M.createContext({outlet:null,matches:[],isDataRoute:!1});Bh.displayName="Route";var zw=M.createContext(null);zw.displayName="RouteError";function cR(n,{relative:t}={}){Qa(py(),"useHref() may be used only in the context of a <Router> component.");let{basename:r,navigator:i}=M.useContext(Fh),{hash:o,pathname:l,search:a}=Xx(n,{relative:t}),p=l;return r!=="/"&&(p=l==="/"?r:fp([r,l])),i.createHref({pathname:p,search:a,hash:o})}function py(){return M.useContext(Kx)!=null}function xd(){return Qa(py(),"useLocation() may be used only in the context of a <Router> component."),M.useContext(Kx).location}var B4="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function U4(n){M.useContext(Fh).static||M.useLayoutEffect(n)}function Na(){let{isDataRoute:n}=M.useContext(Bh);return n?wR():uR()}function uR(){Qa(py(),"useNavigate() may be used only in the context of a <Router> component.");let n=M.useContext(fy),{basename:t,navigator:r}=M.useContext(Fh),{matches:i}=M.useContext(Bh),{pathname:o}=xd(),l=JSON.stringify(Dw(i)),a=M.useRef(!1);return U4(()=>{a.current=!0}),M.useCallback((g,w={})=>{if(vd(a.current,B4),!a.current)return;if(typeof g=="number"){r.go(g);return}let j=Ow(g,JSON.parse(l),o,w.relative==="path");n==null&&t!=="/"&&(j.pathname=j.pathname==="/"?t:fp([t,j.pathname])),(w.replace?r.replace:r.push)(j,w.state,w)},[t,r,l,o,n])}M.createContext(null);function my(){let{matches:n}=M.useContext(Bh),t=n[n.length-1];return t?t.params:{}}function Xx(n,{relative:t}={}){let{matches:r}=M.useContext(Bh),{pathname:i}=xd(),o=JSON.stringify(Dw(r));return M.useMemo(()=>Ow(n,JSON.parse(o),i,t==="path"),[n,o,i,t])}function dR(n,t){return q4(n,t)}function q4(n,t,r,i,o){var G;Qa(py(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:l}=M.useContext(Fh),{matches:a}=M.useContext(Bh),p=a[a.length-1],g=p?p.params:{},w=p?p.pathname:"/",j=p?p.pathnameBase:"/",S=p&&p.route;{let z=S&&S.path||"";V4(w,!S||z.endsWith("*")||z.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${w}" (under <Route path="${z}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${z}"> to <Route path="${z==="/"?"*":`${z}/*`}">.`)}let T=xd(),E;if(t){let z=typeof t=="string"?hy(t):t;Qa(j==="/"||((G=z.pathname)==null?void 0:G.startsWith(j)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${j}" but pathname "${z.pathname}" was given in the \`location\` prop.`),E=z}else E=T;let O=E.pathname||"/",R=O;if(j!=="/"){let z=j.replace(/^\//,"").split("/");R="/"+O.replace(/^\//,"").split("/").slice(z.length).join("/")}let F=M4(n,{pathname:R});vd(S||F!=null,`No routes matched location "${E.pathname}${E.search}${E.hash}" `),vd(F==null||F[F.length-1].route.element!==void 0||F[F.length-1].route.Component!==void 0||F[F.length-1].route.lazy!==void 0,`Matched leaf route at location "${E.pathname}${E.search}${E.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let B=gR(F&&F.map(z=>Object.assign({},z,{params:Object.assign({},g,z.params),pathname:fp([j,l.encodeLocation?l.encodeLocation(z.pathname.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathname]),pathnameBase:z.pathnameBase==="/"?j:fp([j,l.encodeLocation?l.encodeLocation(z.pathnameBase.replace(/\?/g,"%3F").replace(/#/g,"%23")).pathname:z.pathnameBase])})),a,r,i,o);return t&&B?M.createElement(Kx.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...E},navigationType:"POP"}},B):B}function hR(){let n=_R(),t=sR(n)?`${n.status} ${n.statusText}`:n instanceof Error?n.message:JSON.stringify(n),r=n instanceof Error?n.stack:null,i="rgba(200,200,200, 0.5)",o={padding:"0.5rem",backgroundColor:i},l={padding:"2px 4px",backgroundColor:i},a=null;return console.error("Error handled by React Router default ErrorBoundary:",n),a=M.createElement(M.Fragment,null,M.createElement("p",null," Hey developer "),M.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",M.createElement("code",{style:l},"ErrorBoundary")," or"," ",M.createElement("code",{style:l},"errorElement")," prop on your route.")),M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),r?M.createElement("pre",{style:o},r):null,a)}var fR=M.createElement(hR,null),pR=class extends M.Component{constructor(n){super(n),this.state={location:n.location,revalidation:n.revalidation,error:n.error}}static getDerivedStateFromError(n){return{error:n}}static getDerivedStateFromProps(n,t){return t.location!==n.location||t.revalidation!=="idle"&&n.revalidation==="idle"?{error:n.error,location:n.location,revalidation:n.revalidation}:{error:n.error!==void 0?n.error:t.error,location:t.location,revalidation:n.revalidation||t.revalidation}}componentDidCatch(n,t){this.props.onError?this.props.onError(n,t):console.error("React Router caught the following error during render",n)}render(){return this.state.error!==void 0?M.createElement(Bh.Provider,{value:this.props.routeContext},M.createElement(zw.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function mR({routeContext:n,match:t,children:r}){let i=M.useContext(fy);return i&&i.static&&i.staticContext&&(t.route.errorElement||t.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=t.route.id),M.createElement(Bh.Provider,{value:n},r)}function gR(n,t=[],r=null,i=null,o=null){if(n==null){if(!r)return null;if(r.errors)n=r.matches;else if(t.length===0&&!r.initialized&&r.matches.length>0)n=r.matches;else return null}let l=n,a=r==null?void 0:r.errors;if(a!=null){let j=l.findIndex(S=>S.route.id&&(a==null?void 0:a[S.route.id])!==void 0);Qa(j>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),l=l.slice(0,Math.min(l.length,j+1))}let p=!1,g=-1;if(r)for(let j=0;j<l.length;j++){let S=l[j];if((S.route.HydrateFallback||S.route.hydrateFallbackElement)&&(g=j),S.route.id){let{loaderData:T,errors:E}=r,O=S.route.loader&&!T.hasOwnProperty(S.route.id)&&(!E||E[S.route.id]===void 0);if(S.route.lazy||O){p=!0,g>=0?l=l.slice(0,g+1):l=[l[0]];break}}}let w=r&&i?(j,S)=>{var T,E;i(j,{location:r.location,params:((E=(T=r.matches)==null?void 0:T[0])==null?void 0:E.params)??{},errorInfo:S})}:void 0;return l.reduceRight((j,S,T)=>{let E,O=!1,R=null,F=null;r&&(E=a&&S.route.id?a[S.route.id]:void 0,R=S.route.errorElement||fR,p&&(g<0&&T===0?(V4("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),O=!0,F=null):g===T&&(O=!0,F=S.route.hydrateFallbackElement||null)));let B=t.concat(l.slice(0,T+1)),G=()=>{let z;return E?z=R:O?z=F:S.route.Component?z=M.createElement(S.route.Component,null):S.route.element?z=S.route.element:z=j,M.createElement(mR,{match:S,routeContext:{outlet:j,matches:B,isDataRoute:r!=null},children:z})};return r&&(S.route.ErrorBoundary||S.route.errorElement||T===0)?M.createElement(pR,{location:r.location,revalidation:r.revalidation,component:R,error:E,children:G(),routeContext:{outlet:null,matches:B,isDataRoute:!0},onError:w}):G()},null)}function Fw(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function vR(n){let t=M.useContext(fy);return Qa(t,Fw(n)),t}function yR(n){let t=M.useContext(Db);return Qa(t,Fw(n)),t}function xR(n){let t=M.useContext(Bh);return Qa(t,Fw(n)),t}function Bw(n){let t=xR(n),r=t.matches[t.matches.length-1];return Qa(r.route.id,`${n} can only be used on routes that contain a unique "id"`),r.route.id}function bR(){return Bw("useRouteId")}function _R(){var i;let n=M.useContext(zw),t=yR("useRouteError"),r=Bw("useRouteError");return n!==void 0?n:(i=t.errors)==null?void 0:i[r]}function wR(){let{router:n}=vR("useNavigate"),t=Bw("useNavigate"),r=M.useRef(!1);return U4(()=>{r.current=!0}),M.useCallback(async(o,l={})=>{vd(r.current,B4),r.current&&(typeof o=="number"?n.navigate(o):await n.navigate(o,{fromRouteId:t,...l}))},[n,t])}var M5={};function V4(n,t,r){!t&&!M5[n]&&(M5[n]=!0,vd(!1,r))}M.memo(jR);function jR({routes:n,future:t,state:r,unstable_onError:i}){return q4(n,void 0,r,i,t)}function NR({to:n,replace:t,state:r,relative:i}){Qa(py(),"<Navigate> may be used only in the context of a <Router> component.");let{static:o}=M.useContext(Fh);vd(!o,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:l}=M.useContext(Bh),{pathname:a}=xd(),p=Na(),g=Ow(n,Dw(l),a,i==="path"),w=JSON.stringify(g);return M.useEffect(()=>{p(JSON.parse(w),{replace:t,state:r,relative:i})},[p,w,i,t,r]),null}function ma(n){Qa(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function SR({basename:n="/",children:t=null,location:r,navigationType:i="POP",navigator:o,static:l=!1}){Qa(!py(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let a=n.replace(/^\/*/,"/"),p=M.useMemo(()=>({basename:a,navigator:o,static:l,future:{}}),[a,o,l]);typeof r=="string"&&(r=hy(r));let{pathname:g="/",search:w="",hash:j="",state:S=null,key:T="default"}=r,E=M.useMemo(()=>{let O=pp(g,a);return O==null?null:{location:{pathname:O,search:w,hash:j,state:S,key:T},navigationType:i}},[a,g,w,j,S,T,i]);return vd(E!=null,`<Router basename="${a}"> is not able to match the URL "${g}${w}${j}" because it does not start with the basename, so the <Router> won't render anything.`),E==null?null:M.createElement(Fh.Provider,{value:p},M.createElement(Kx.Provider,{children:t,value:E}))}function AR({children:n,location:t}){return dR(k2(n),t)}function k2(n,t=[]){let r=[];return M.Children.forEach(n,(i,o)=>{if(!M.isValidElement(i))return;let l=[...t,o];if(i.type===M.Fragment){r.push.apply(r,k2(i.props.children,l));return}Qa(i.type===ma,`[${typeof i.type=="string"?i.type:i.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Qa(!i.props.index||!i.props.children,"An index route cannot have child routes.");let a={id:i.props.id||l.join("-"),caseSensitive:i.props.caseSensitive,element:i.props.element,Component:i.props.Component,index:i.props.index,path:i.props.path,middleware:i.props.middleware,loader:i.props.loader,action:i.props.action,hydrateFallbackElement:i.props.hydrateFallbackElement,HydrateFallback:i.props.HydrateFallback,errorElement:i.props.errorElement,ErrorBoundary:i.props.ErrorBoundary,hasErrorBoundary:i.props.hasErrorBoundary===!0||i.props.ErrorBoundary!=null||i.props.errorElement!=null,shouldRevalidate:i.props.shouldRevalidate,handle:i.props.handle,lazy:i.props.lazy};i.props.children&&(a.children=k2(i.props.children,l)),r.push(a)}),r}var z1="get",F1="application/x-www-form-urlencoded";function Ob(n){return n!=null&&typeof n.tagName=="string"}function CR(n){return Ob(n)&&n.tagName.toLowerCase()==="button"}function kR(n){return Ob(n)&&n.tagName.toLowerCase()==="form"}function ER(n){return Ob(n)&&n.tagName.toLowerCase()==="input"}function TR(n){return!!(n.metaKey||n.altKey||n.ctrlKey||n.shiftKey)}function PR(n,t){return n.button===0&&(!t||t==="_self")&&!TR(n)}function E2(n=""){return new URLSearchParams(typeof n=="string"||Array.isArray(n)||n instanceof URLSearchParams?n:Object.keys(n).reduce((t,r)=>{let i=n[r];return t.concat(Array.isArray(i)?i.map(o=>[r,o]):[[r,i]])},[]))}function RR(n,t){let r=E2(n);return t&&t.forEach((i,o)=>{r.has(o)||t.getAll(o).forEach(l=>{r.append(o,l)})}),r}var f1=null;function IR(){if(f1===null)try{new FormData(document.createElement("form"),0),f1=!1}catch{f1=!0}return f1}var LR=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function V_(n){return n!=null&&!LR.has(n)?(vd(!1,`"${n}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${F1}"`),null):n}function MR(n,t){let r,i,o,l,a;if(kR(n)){let p=n.getAttribute("action");i=p?pp(p,t):null,r=n.getAttribute("method")||z1,o=V_(n.getAttribute("enctype"))||F1,l=new FormData(n)}else if(CR(n)||ER(n)&&(n.type==="submit"||n.type==="image")){let p=n.form;if(p==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let g=n.getAttribute("formaction")||p.getAttribute("action");if(i=g?pp(g,t):null,r=n.getAttribute("formmethod")||p.getAttribute("method")||z1,o=V_(n.getAttribute("formenctype"))||V_(p.getAttribute("enctype"))||F1,l=new FormData(p,n),!IR()){let{name:w,type:j,value:S}=n;if(j==="image"){let T=w?`${w}.`:"";l.append(`${T}x`,"0"),l.append(`${T}y`,"0")}else w&&l.append(w,S)}}else{if(Ob(n))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');r=z1,i=null,o=F1,a=n}return l&&o==="text/plain"&&(a=l,l=void 0),{action:i,method:r.toLowerCase(),encType:o,formData:l,body:a}}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");function Uw(n,t){if(n===!1||n===null||typeof n>"u")throw new Error(t)}function DR(n,t,r){let i=typeof n=="string"?new URL(n,typeof window>"u"?"server://singlefetch/":window.location.origin):n;return i.pathname==="/"?i.pathname=`_root.${r}`:t&&pp(i.pathname,t)==="/"?i.pathname=`${t.replace(/\/$/,"")}/_root.${r}`:i.pathname=`${i.pathname.replace(/\/$/,"")}.${r}`,i}async function OR(n,t){if(n.id in t)return t[n.id];try{let r=await import(n.module);return t[n.id]=r,r}catch(r){return console.error(`Error loading route module \`${n.module}\`, reloading page...`),console.error(r),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function zR(n){return n==null?!1:n.href==null?n.rel==="preload"&&typeof n.imageSrcSet=="string"&&typeof n.imageSizes=="string":typeof n.rel=="string"&&typeof n.href=="string"}async function FR(n,t,r){let i=await Promise.all(n.map(async o=>{let l=t.routes[o.route.id];if(l){let a=await OR(l,r);return a.links?a.links():[]}return[]}));return VR(i.flat(1).filter(zR).filter(o=>o.rel==="stylesheet"||o.rel==="preload").map(o=>o.rel==="stylesheet"?{...o,rel:"prefetch",as:"style"}:{...o,rel:"prefetch"}))}function D5(n,t,r,i,o,l){let a=(g,w)=>r[w]?g.route.id!==r[w].route.id:!0,p=(g,w)=>{var j;return r[w].pathname!==g.pathname||((j=r[w].route.path)==null?void 0:j.endsWith("*"))&&r[w].params["*"]!==g.params["*"]};return l==="assets"?t.filter((g,w)=>a(g,w)||p(g,w)):l==="data"?t.filter((g,w)=>{var S;let j=i.routes[g.route.id];if(!j||!j.hasLoader)return!1;if(a(g,w)||p(g,w))return!0;if(g.route.shouldRevalidate){let T=g.route.shouldRevalidate({currentUrl:new URL(o.pathname+o.search+o.hash,window.origin),currentParams:((S=r[0])==null?void 0:S.params)||{},nextUrl:new URL(n,window.origin),nextParams:g.params,defaultShouldRevalidate:!0});if(typeof T=="boolean")return T}return!0}):[]}function BR(n,t,{includeHydrateFallback:r}={}){return UR(n.map(i=>{let o=t.routes[i.route.id];if(!o)return[];let l=[o.module];return o.clientActionModule&&(l=l.concat(o.clientActionModule)),o.clientLoaderModule&&(l=l.concat(o.clientLoaderModule)),r&&o.hydrateFallbackModule&&(l=l.concat(o.hydrateFallbackModule)),o.imports&&(l=l.concat(o.imports)),l}).flat(1))}function UR(n){return[...new Set(n)]}function qR(n){let t={},r=Object.keys(n).sort();for(let i of r)t[i]=n[i];return t}function VR(n,t){let r=new Set;return new Set(t),n.reduce((i,o)=>{let l=JSON.stringify(qR(o));return r.has(l)||(r.add(l),i.push({key:l,link:o})),i},[])}function $4(){let n=M.useContext(fy);return Uw(n,"You must render this element inside a <DataRouterContext.Provider> element"),n}function $R(){let n=M.useContext(Db);return Uw(n,"You must render this element inside a <DataRouterStateContext.Provider> element"),n}var qw=M.createContext(void 0);qw.displayName="FrameworkContext";function H4(){let n=M.useContext(qw);return Uw(n,"You must render this element inside a <HydratedRouter> element"),n}function HR(n,t){let r=M.useContext(qw),[i,o]=M.useState(!1),[l,a]=M.useState(!1),{onFocus:p,onBlur:g,onMouseEnter:w,onMouseLeave:j,onTouchStart:S}=t,T=M.useRef(null);M.useEffect(()=>{if(n==="render"&&a(!0),n==="viewport"){let R=B=>{B.forEach(G=>{a(G.isIntersecting)})},F=new IntersectionObserver(R,{threshold:.5});return T.current&&F.observe(T.current),()=>{F.disconnect()}}},[n]),M.useEffect(()=>{if(i){let R=setTimeout(()=>{a(!0)},100);return()=>{clearTimeout(R)}}},[i]);let E=()=>{o(!0)},O=()=>{o(!1),a(!1)};return r?n!=="intent"?[l,T,{}]:[l,T,{onFocus:gx(p,E),onBlur:gx(g,O),onMouseEnter:gx(w,E),onMouseLeave:gx(j,O),onTouchStart:gx(S,E)}]:[!1,T,{}]}function gx(n,t){return r=>{n&&n(r),r.defaultPrevented||t(r)}}function GR({page:n,...t}){let{router:r}=$4(),i=M.useMemo(()=>M4(r.routes,n,r.basename),[r.routes,n,r.basename]);return i?M.createElement(YR,{page:n,matches:i,...t}):null}function WR(n){let{manifest:t,routeModules:r}=H4(),[i,o]=M.useState([]);return M.useEffect(()=>{let l=!1;return FR(n,t,r).then(a=>{l||o(a)}),()=>{l=!0}},[n,t,r]),i}function YR({page:n,matches:t,...r}){let i=xd(),{manifest:o,routeModules:l}=H4(),{basename:a}=$4(),{loaderData:p,matches:g}=$R(),w=M.useMemo(()=>D5(n,t,g,o,i,"data"),[n,t,g,o,i]),j=M.useMemo(()=>D5(n,t,g,o,i,"assets"),[n,t,g,o,i]),S=M.useMemo(()=>{if(n===i.pathname+i.search+i.hash)return[];let O=new Set,R=!1;if(t.forEach(B=>{var z;let G=o.routes[B.route.id];!G||!G.hasLoader||(!w.some(ee=>ee.route.id===B.route.id)&&B.route.id in p&&((z=l[B.route.id])!=null&&z.shouldRevalidate)||G.hasClientLoader?R=!0:O.add(B.route.id))}),O.size===0)return[];let F=DR(n,a,"data");return R&&O.size>0&&F.searchParams.set("_routes",t.filter(B=>O.has(B.route.id)).map(B=>B.route.id).join(",")),[F.pathname+F.search]},[a,p,i,o,w,t,n,l]),T=M.useMemo(()=>BR(j,o),[j,o]),E=WR(j);return M.createElement(M.Fragment,null,S.map(O=>M.createElement("link",{key:O,rel:"prefetch",as:"fetch",href:O,...r})),T.map(O=>M.createElement("link",{key:O,rel:"modulepreload",href:O,...r})),E.map(({key:O,link:R})=>M.createElement("link",{key:O,nonce:r.nonce,...R})))}function ZR(...n){return t=>{n.forEach(r=>{typeof r=="function"?r(t):r!=null&&(r.current=t)})}}var G4=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{G4&&(window.__reactRouterVersion="7.9.6")}catch{}function KR({basename:n,children:t,window:r}){let i=M.useRef();i.current==null&&(i.current=MP({window:r,v5Compat:!0}));let o=i.current,[l,a]=M.useState({action:o.action,location:o.location}),p=M.useCallback(g=>{M.startTransition(()=>a(g))},[a]);return M.useLayoutEffect(()=>o.listen(p),[o,p]),M.createElement(SR,{basename:n,children:t,location:l.location,navigationType:l.action,navigator:o})}var W4=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Kr=M.forwardRef(function({onClick:t,discover:r="render",prefetch:i="none",relative:o,reloadDocument:l,replace:a,state:p,target:g,to:w,preventScrollReset:j,viewTransition:S,...T},E){let{basename:O}=M.useContext(Fh),R=typeof w=="string"&&W4.test(w),F,B=!1;if(typeof w=="string"&&R&&(F=w,G4))try{let Se=new URL(window.location.href),_e=w.startsWith("//")?new URL(Se.protocol+w):new URL(w),re=pp(_e.pathname,O);_e.origin===Se.origin&&re!=null?w=re+_e.search+_e.hash:B=!0}catch{vd(!1,`<Link to="${w}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let G=cR(w,{relative:o}),[z,ee,ie]=HR(i,T),ge=eI(w,{replace:a,state:p,target:g,preventScrollReset:j,relative:o,viewTransition:S});function K(Se){t&&t(Se),Se.defaultPrevented||ge(Se)}let J=M.createElement("a",{...T,...ie,href:F||G,onClick:B||l?t:K,ref:ZR(E,ee),target:g,"data-discover":!R&&r==="render"?"true":void 0});return z&&!R?M.createElement(M.Fragment,null,J,M.createElement(GR,{page:G})):J});Kr.displayName="Link";var XR=M.forwardRef(function({"aria-current":t="page",caseSensitive:r=!1,className:i="",end:o=!1,style:l,to:a,viewTransition:p,children:g,...w},j){let S=Xx(a,{relative:w.relative}),T=xd(),E=M.useContext(Db),{navigator:O,basename:R}=M.useContext(Fh),F=E!=null&&aI(S)&&p===!0,B=O.encodeLocation?O.encodeLocation(S).pathname:S.pathname,G=T.pathname,z=E&&E.navigation&&E.navigation.location?E.navigation.location.pathname:null;r||(G=G.toLowerCase(),z=z?z.toLowerCase():null,B=B.toLowerCase()),z&&R&&(z=pp(z,R)||z);const ee=B!=="/"&&B.endsWith("/")?B.length-1:B.length;let ie=G===B||!o&&G.startsWith(B)&&G.charAt(ee)==="/",ge=z!=null&&(z===B||!o&&z.startsWith(B)&&z.charAt(B.length)==="/"),K={isActive:ie,isPending:ge,isTransitioning:F},J=ie?t:void 0,Se;typeof i=="function"?Se=i(K):Se=[i,ie?"active":null,ge?"pending":null,F?"transitioning":null].filter(Boolean).join(" ");let _e=typeof l=="function"?l(K):l;return M.createElement(Kr,{...w,"aria-current":J,className:Se,ref:j,style:_e,to:a,viewTransition:p},typeof g=="function"?g(K):g)});XR.displayName="NavLink";var JR=M.forwardRef(({discover:n="render",fetcherKey:t,navigate:r,reloadDocument:i,replace:o,state:l,method:a=z1,action:p,onSubmit:g,relative:w,preventScrollReset:j,viewTransition:S,...T},E)=>{let O=iI(),R=sI(p,{relative:w}),F=a.toLowerCase()==="get"?"get":"post",B=typeof p=="string"&&W4.test(p),G=z=>{if(g&&g(z),z.defaultPrevented)return;z.preventDefault();let ee=z.nativeEvent.submitter,ie=(ee==null?void 0:ee.getAttribute("formmethod"))||a;O(ee||z.currentTarget,{fetcherKey:t,method:ie,navigate:r,replace:o,state:l,relative:w,preventScrollReset:j,viewTransition:S})};return M.createElement("form",{ref:E,method:F,action:R,onSubmit:i?g:G,...T,"data-discover":!B&&n==="render"?"true":void 0})});JR.displayName="Form";function QR(n){return`${n} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Y4(n){let t=M.useContext(fy);return Qa(t,QR(n)),t}function eI(n,{target:t,replace:r,state:i,preventScrollReset:o,relative:l,viewTransition:a}={}){let p=Na(),g=xd(),w=Xx(n,{relative:l});return M.useCallback(j=>{if(PR(j,t)){j.preventDefault();let S=r!==void 0?r:Lx(g)===Lx(w);p(n,{replace:S,state:i,preventScrollReset:o,relative:l,viewTransition:a})}},[g,p,w,r,i,t,n,o,l,a])}function tI(n){vd(typeof URLSearchParams<"u","You cannot use the `useSearchParams` hook in a browser that does not support the URLSearchParams API. If you need to support Internet Explorer 11, we recommend you load a polyfill such as https://github.com/ungap/url-search-params.");let t=M.useRef(E2(n)),r=M.useRef(!1),i=xd(),o=M.useMemo(()=>RR(i.search,r.current?null:t.current),[i.search]),l=Na(),a=M.useCallback((p,g)=>{const w=E2(typeof p=="function"?p(new URLSearchParams(o)):p);r.current=!0,l("?"+w,g)},[l,o]);return[o,a]}var rI=0,nI=()=>`__${String(++rI)}__`;function iI(){let{router:n}=Y4("useSubmit"),{basename:t}=M.useContext(Fh),r=bR();return M.useCallback(async(i,o={})=>{let{action:l,method:a,encType:p,formData:g,body:w}=MR(i,t);if(o.navigate===!1){let j=o.fetcherKey||nI();await n.fetch(j,r,o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:w,formMethod:o.method||a,formEncType:o.encType||p,flushSync:o.flushSync})}else await n.navigate(o.action||l,{preventScrollReset:o.preventScrollReset,formData:g,body:w,formMethod:o.method||a,formEncType:o.encType||p,replace:o.replace,state:o.state,fromRouteId:r,flushSync:o.flushSync,viewTransition:o.viewTransition})},[n,t,r])}function sI(n,{relative:t}={}){let{basename:r}=M.useContext(Fh),i=M.useContext(Bh);Qa(i,"useFormAction must be used inside a RouteContext");let[o]=i.matches.slice(-1),l={...Xx(n||".",{relative:t})},a=xd();if(n==null){l.search=a.search;let p=new URLSearchParams(l.search),g=p.getAll("index");if(g.some(j=>j==="")){p.delete("index"),g.filter(S=>S).forEach(S=>p.append("index",S));let j=p.toString();l.search=j?`?${j}`:""}}return(!n||n===".")&&o.route.index&&(l.search=l.search?l.search.replace(/^\?/,"?index&"):"?index"),r!=="/"&&(l.pathname=l.pathname==="/"?r:fp([r,l.pathname])),Lx(l)}function aI(n,{relative:t}={}){let r=M.useContext(F4);Qa(r!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:i}=Y4("useViewTransitionState"),o=Xx(n,{relative:t});if(!r.isTransitioning)return!1;let l=pp(r.currentLocation.pathname,i)||r.currentLocation.pathname,a=pp(r.nextLocation.pathname,i)||r.nextLocation.pathname;return K1(o.pathname,a)!=null||K1(o.pathname,l)!=null}var T2=function(n,t){return T2=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,i){r.__proto__=i}||function(r,i){for(var o in i)Object.prototype.hasOwnProperty.call(i,o)&&(r[o]=i[o])},T2(n,t)};function Z4(n,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");T2(n,t);function r(){this.constructor=n}n.prototype=t===null?Object.create(t):(r.prototype=t.prototype,new r)}var Zd=function(){return Zd=Object.assign||function(t){for(var r,i=1,o=arguments.length;i<o;i++){r=arguments[i];for(var l in r)Object.prototype.hasOwnProperty.call(r,l)&&(t[l]=r[l])}return t},Zd.apply(this,arguments)};function Tm(n,t){var r={};for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&t.indexOf(i)<0&&(r[i]=n[i]);if(n!=null&&typeof Object.getOwnPropertySymbols=="function")for(var o=0,i=Object.getOwnPropertySymbols(n);o<i.length;o++)t.indexOf(i[o])<0&&Object.prototype.propertyIsEnumerable.call(n,i[o])&&(r[i[o]]=n[i[o]]);return r}function K4(n,t,r,i){var o=arguments.length,l=o<3?t:i===null?i=Object.getOwnPropertyDescriptor(t,r):i,a;if(typeof Reflect=="object"&&typeof Reflect.decorate=="function")l=Reflect.decorate(n,t,r,i);else for(var p=n.length-1;p>=0;p--)(a=n[p])&&(l=(o<3?a(l):o>3?a(t,r,l):a(t,r))||l);return o>3&&l&&Object.defineProperty(t,r,l),l}function X4(n,t){return function(r,i){t(r,i,n)}}function J4(n,t,r,i,o,l){function a(B){if(B!==void 0&&typeof B!="function")throw new TypeError("Function expected");return B}for(var p=i.kind,g=p==="getter"?"get":p==="setter"?"set":"value",w=!t&&n?i.static?n:n.prototype:null,j=t||(w?Object.getOwnPropertyDescriptor(w,i.name):{}),S,T=!1,E=r.length-1;E>=0;E--){var O={};for(var R in i)O[R]=R==="access"?{}:i[R];for(var R in i.access)O.access[R]=i.access[R];O.addInitializer=function(B){if(T)throw new TypeError("Cannot add initializers after decoration has completed");l.push(a(B||null))};var F=(0,r[E])(p==="accessor"?{get:j.get,set:j.set}:j[g],O);if(p==="accessor"){if(F===void 0)continue;if(F===null||typeof F!="object")throw new TypeError("Object expected");(S=a(F.get))&&(j.get=S),(S=a(F.set))&&(j.set=S),(S=a(F.init))&&o.unshift(S)}else(S=a(F))&&(p==="field"?o.unshift(S):j[g]=S)}w&&Object.defineProperty(w,i.name,j),T=!0}function Q4(n,t,r){for(var i=arguments.length>2,o=0;o<t.length;o++)r=i?t[o].call(n,r):t[o].call(n);return i?r:void 0}function eA(n){return typeof n=="symbol"?n:"".concat(n)}function tA(n,t,r){return typeof t=="symbol"&&(t=t.description?"[".concat(t.description,"]"):""),Object.defineProperty(n,"name",{configurable:!0,value:r?"".concat(r," ",t):t})}function rA(n,t){if(typeof Reflect=="object"&&typeof Reflect.metadata=="function")return Reflect.metadata(n,t)}function pn(n,t,r,i){function o(l){return l instanceof r?l:new r(function(a){a(l)})}return new(r||(r=Promise))(function(l,a){function p(j){try{w(i.next(j))}catch(S){a(S)}}function g(j){try{w(i.throw(j))}catch(S){a(S)}}function w(j){j.done?l(j.value):o(j.value).then(p,g)}w((i=i.apply(n,t||[])).next())})}function nA(n,t){var r={label:0,sent:function(){if(l[0]&1)throw l[1];return l[1]},trys:[],ops:[]},i,o,l,a=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return a.next=p(0),a.throw=p(1),a.return=p(2),typeof Symbol=="function"&&(a[Symbol.iterator]=function(){return this}),a;function p(w){return function(j){return g([w,j])}}function g(w){if(i)throw new TypeError("Generator is already executing.");for(;a&&(a=0,w[0]&&(r=0)),r;)try{if(i=1,o&&(l=w[0]&2?o.return:w[0]?o.throw||((l=o.return)&&l.call(o),0):o.next)&&!(l=l.call(o,w[1])).done)return l;switch(o=0,l&&(w=[w[0]&2,l.value]),w[0]){case 0:case 1:l=w;break;case 4:return r.label++,{value:w[1],done:!1};case 5:r.label++,o=w[1],w=[0];continue;case 7:w=r.ops.pop(),r.trys.pop();continue;default:if(l=r.trys,!(l=l.length>0&&l[l.length-1])&&(w[0]===6||w[0]===2)){r=0;continue}if(w[0]===3&&(!l||w[1]>l[0]&&w[1]<l[3])){r.label=w[1];break}if(w[0]===6&&r.label<l[1]){r.label=l[1],l=w;break}if(l&&r.label<l[2]){r.label=l[2],r.ops.push(w);break}l[2]&&r.ops.pop(),r.trys.pop();continue}w=t.call(n,r)}catch(j){w=[6,j],o=0}finally{i=l=0}if(w[0]&5)throw w[1];return{value:w[0]?w[1]:void 0,done:!0}}}var zb=Object.create?(function(n,t,r,i){i===void 0&&(i=r);var o=Object.getOwnPropertyDescriptor(t,r);(!o||("get"in o?!t.__esModule:o.writable||o.configurable))&&(o={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(n,i,o)}):(function(n,t,r,i){i===void 0&&(i=r),n[i]=t[r]});function iA(n,t){for(var r in n)r!=="default"&&!Object.prototype.hasOwnProperty.call(t,r)&&zb(t,n,r)}function X1(n){var t=typeof Symbol=="function"&&Symbol.iterator,r=t&&n[t],i=0;if(r)return r.call(n);if(n&&typeof n.length=="number")return{next:function(){return n&&i>=n.length&&(n=void 0),{value:n&&n[i++],done:!n}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Vw(n,t){var r=typeof Symbol=="function"&&n[Symbol.iterator];if(!r)return n;var i=r.call(n),o,l=[],a;try{for(;(t===void 0||t-- >0)&&!(o=i.next()).done;)l.push(o.value)}catch(p){a={error:p}}finally{try{o&&!o.done&&(r=i.return)&&r.call(i)}finally{if(a)throw a.error}}return l}function sA(){for(var n=[],t=0;t<arguments.length;t++)n=n.concat(Vw(arguments[t]));return n}function aA(){for(var n=0,t=0,r=arguments.length;t<r;t++)n+=arguments[t].length;for(var i=Array(n),o=0,t=0;t<r;t++)for(var l=arguments[t],a=0,p=l.length;a<p;a++,o++)i[o]=l[a];return i}function $w(n,t,r){if(r||arguments.length===2)for(var i=0,o=t.length,l;i<o;i++)(l||!(i in t))&&(l||(l=Array.prototype.slice.call(t,0,i)),l[i]=t[i]);return n.concat(l||Array.prototype.slice.call(t))}function Jv(n){return this instanceof Jv?(this.v=n,this):new Jv(n)}function oA(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,t||[]),o,l=[];return o=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),p("next"),p("throw"),p("return",a),o[Symbol.asyncIterator]=function(){return this},o;function a(E){return function(O){return Promise.resolve(O).then(E,S)}}function p(E,O){i[E]&&(o[E]=function(R){return new Promise(function(F,B){l.push([E,R,F,B])>1||g(E,R)})},O&&(o[E]=O(o[E])))}function g(E,O){try{w(i[E](O))}catch(R){T(l[0][3],R)}}function w(E){E.value instanceof Jv?Promise.resolve(E.value.v).then(j,S):T(l[0][2],E)}function j(E){g("next",E)}function S(E){g("throw",E)}function T(E,O){E(O),l.shift(),l.length&&g(l[0][0],l[0][1])}}function lA(n){var t,r;return t={},i("next"),i("throw",function(o){throw o}),i("return"),t[Symbol.iterator]=function(){return this},t;function i(o,l){t[o]=n[o]?function(a){return(r=!r)?{value:Jv(n[o](a)),done:!1}:l?l(a):a}:l}}function cA(n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var t=n[Symbol.asyncIterator],r;return t?t.call(n):(n=typeof X1=="function"?X1(n):n[Symbol.iterator](),r={},i("next"),i("throw"),i("return"),r[Symbol.asyncIterator]=function(){return this},r);function i(l){r[l]=n[l]&&function(a){return new Promise(function(p,g){a=n[l](a),o(p,g,a.done,a.value)})}}function o(l,a,p,g){Promise.resolve(g).then(function(w){l({value:w,done:p})},a)}}function uA(n,t){return Object.defineProperty?Object.defineProperty(n,"raw",{value:t}):n.raw=t,n}var oI=Object.create?(function(n,t){Object.defineProperty(n,"default",{enumerable:!0,value:t})}):function(n,t){n.default=t},P2=function(n){return P2=Object.getOwnPropertyNames||function(t){var r=[];for(var i in t)Object.prototype.hasOwnProperty.call(t,i)&&(r[r.length]=i);return r},P2(n)};function dA(n){if(n&&n.__esModule)return n;var t={};if(n!=null)for(var r=P2(n),i=0;i<r.length;i++)r[i]!=="default"&&zb(t,n,r[i]);return oI(t,n),t}function hA(n){return n&&n.__esModule?n:{default:n}}function fA(n,t,r,i){if(r==="a"&&!i)throw new TypeError("Private accessor was defined without a getter");if(typeof t=="function"?n!==t||!i:!t.has(n))throw new TypeError("Cannot read private member from an object whose class did not declare it");return r==="m"?i:r==="a"?i.call(n):i?i.value:t.get(n)}function pA(n,t,r,i,o){if(i==="m")throw new TypeError("Private method is not writable");if(i==="a"&&!o)throw new TypeError("Private accessor was defined without a setter");if(typeof t=="function"?n!==t||!o:!t.has(n))throw new TypeError("Cannot write private member to an object whose class did not declare it");return i==="a"?o.call(n,r):o?o.value=r:t.set(n,r),r}function mA(n,t){if(t===null||typeof t!="object"&&typeof t!="function")throw new TypeError("Cannot use 'in' operator on non-object");return typeof n=="function"?t===n:n.has(t)}function gA(n,t,r){if(t!=null){if(typeof t!="object"&&typeof t!="function")throw new TypeError("Object expected.");var i,o;if(r){if(!Symbol.asyncDispose)throw new TypeError("Symbol.asyncDispose is not defined.");i=t[Symbol.asyncDispose]}if(i===void 0){if(!Symbol.dispose)throw new TypeError("Symbol.dispose is not defined.");i=t[Symbol.dispose],r&&(o=i)}if(typeof i!="function")throw new TypeError("Object not disposable.");o&&(i=function(){try{o.call(this)}catch(l){return Promise.reject(l)}}),n.stack.push({value:t,dispose:i,async:r})}else r&&n.stack.push({async:!0});return t}var lI=typeof SuppressedError=="function"?SuppressedError:function(n,t,r){var i=new Error(r);return i.name="SuppressedError",i.error=n,i.suppressed=t,i};function vA(n){function t(l){n.error=n.hasError?new lI(l,n.error,"An error was suppressed during disposal."):l,n.hasError=!0}var r,i=0;function o(){for(;r=n.stack.pop();)try{if(!r.async&&i===1)return i=0,n.stack.push(r),Promise.resolve().then(o);if(r.dispose){var l=r.dispose.call(r.value);if(r.async)return i|=2,Promise.resolve(l).then(o,function(a){return t(a),o()})}else i|=1}catch(a){t(a)}if(i===1)return n.hasError?Promise.reject(n.error):Promise.resolve();if(n.hasError)throw n.error}return o()}function yA(n,t){return typeof n=="string"&&/^\.\.?\//.test(n)?n.replace(/\.(tsx)$|((?:\.d)?)((?:\.[^./]+?)?)\.([cm]?)ts$/i,function(r,i,o,l,a){return i?t?".jsx":".js":o&&(!l||!a)?r:o+l+"."+a.toLowerCase()+"js"}):n}const cI={__extends:Z4,__assign:Zd,__rest:Tm,__decorate:K4,__param:X4,__esDecorate:J4,__runInitializers:Q4,__propKey:eA,__setFunctionName:tA,__metadata:rA,__awaiter:pn,__generator:nA,__createBinding:zb,__exportStar:iA,__values:X1,__read:Vw,__spread:sA,__spreadArrays:aA,__spreadArray:$w,__await:Jv,__asyncGenerator:oA,__asyncDelegator:lA,__asyncValues:cA,__makeTemplateObject:uA,__importStar:dA,__importDefault:hA,__classPrivateFieldGet:fA,__classPrivateFieldSet:pA,__classPrivateFieldIn:mA,__addDisposableResource:gA,__disposeResources:vA,__rewriteRelativeImportExtension:yA},uI=Object.freeze(Object.defineProperty({__proto__:null,__addDisposableResource:gA,get __assign(){return Zd},__asyncDelegator:lA,__asyncGenerator:oA,__asyncValues:cA,__await:Jv,__awaiter:pn,__classPrivateFieldGet:fA,__classPrivateFieldIn:mA,__classPrivateFieldSet:pA,__createBinding:zb,__decorate:K4,__disposeResources:vA,__esDecorate:J4,__exportStar:iA,__extends:Z4,__generator:nA,__importDefault:hA,__importStar:dA,__makeTemplateObject:uA,__metadata:rA,__param:X4,__propKey:eA,__read:Vw,__rest:Tm,__rewriteRelativeImportExtension:yA,__runInitializers:Q4,__setFunctionName:tA,__spread:sA,__spreadArray:$w,__spreadArrays:aA,__values:X1,default:cI},Symbol.toStringTag,{value:"Module"})),dI=n=>n?(...t)=>n(...t):(...t)=>fetch(...t);class Hw extends Error{constructor(t,r="FunctionsError",i){super(t),this.name=r,this.context=i}}class hI extends Hw{constructor(t){super("Failed to send a request to the Edge Function","FunctionsFetchError",t)}}class O5 extends Hw{constructor(t){super("Relay Error invoking the Edge Function","FunctionsRelayError",t)}}class z5 extends Hw{constructor(t){super("Edge Function returned a non-2xx status code","FunctionsHttpError",t)}}var R2;(function(n){n.Any="any",n.ApNortheast1="ap-northeast-1",n.ApNortheast2="ap-northeast-2",n.ApSouth1="ap-south-1",n.ApSoutheast1="ap-southeast-1",n.ApSoutheast2="ap-southeast-2",n.CaCentral1="ca-central-1",n.EuCentral1="eu-central-1",n.EuWest1="eu-west-1",n.EuWest2="eu-west-2",n.EuWest3="eu-west-3",n.SaEast1="sa-east-1",n.UsEast1="us-east-1",n.UsWest1="us-west-1",n.UsWest2="us-west-2"})(R2||(R2={}));class fI{constructor(t,{headers:r={},customFetch:i,region:o=R2.Any}={}){this.url=t,this.headers=r,this.region=o,this.fetch=dI(i)}setAuth(t){this.headers.Authorization=`Bearer ${t}`}invoke(t){return pn(this,arguments,void 0,function*(r,i={}){var o;let l,a;try{const{headers:p,method:g,body:w,signal:j,timeout:S}=i;let T={},{region:E}=i;E||(E=this.region);const O=new URL(`${this.url}/${r}`);E&&E!=="any"&&(T["x-region"]=E,O.searchParams.set("forceFunctionRegion",E));let R;w&&(p&&!Object.prototype.hasOwnProperty.call(p,"Content-Type")||!p)?typeof Blob<"u"&&w instanceof Blob||w instanceof ArrayBuffer?(T["Content-Type"]="application/octet-stream",R=w):typeof w=="string"?(T["Content-Type"]="text/plain",R=w):typeof FormData<"u"&&w instanceof FormData?R=w:(T["Content-Type"]="application/json",R=JSON.stringify(w)):R=w;let F=j;S&&(a=new AbortController,l=setTimeout(()=>a.abort(),S),j?(F=a.signal,j.addEventListener("abort",()=>a.abort())):F=a.signal);const B=yield this.fetch(O.toString(),{method:g||"POST",headers:Object.assign(Object.assign(Object.assign({},T),this.headers),p),body:R,signal:F}).catch(ie=>{throw new hI(ie)}),G=B.headers.get("x-relay-error");if(G&&G==="true")throw new O5(B);if(!B.ok)throw new z5(B);let z=((o=B.headers.get("Content-Type"))!==null&&o!==void 0?o:"text/plain").split(";")[0].trim(),ee;return z==="application/json"?ee=yield B.json():z==="application/octet-stream"||z==="application/pdf"?ee=yield B.blob():z==="text/event-stream"?ee=B:z==="multipart/form-data"?ee=yield B.formData():ee=yield B.text(),{data:ee,error:null,response:B}}catch(p){return{data:null,error:p,response:p instanceof z5||p instanceof O5?p.context:void 0}}finally{l&&clearTimeout(l)}})}}var Uc={};const gy=NP(uI);var p1={},m1={},g1={},v1={},y1={},x1={},F5;function xA(){if(F5)return x1;F5=1,Object.defineProperty(x1,"__esModule",{value:!0});class n extends Error{constructor(r){super(r.message),this.name="PostgrestError",this.details=r.details,this.hint=r.hint,this.code=r.code}}return x1.default=n,x1}var B5;function bA(){if(B5)return y1;B5=1,Object.defineProperty(y1,"__esModule",{value:!0});const t=gy.__importDefault(xA());class r{constructor(o){var l,a;this.shouldThrowOnError=!1,this.method=o.method,this.url=o.url,this.headers=new Headers(o.headers),this.schema=o.schema,this.body=o.body,this.shouldThrowOnError=(l=o.shouldThrowOnError)!==null&&l!==void 0?l:!1,this.signal=o.signal,this.isMaybeSingle=(a=o.isMaybeSingle)!==null&&a!==void 0?a:!1,o.fetch?this.fetch=o.fetch:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(o,l){return this.headers=new Headers(this.headers),this.headers.set(o,l),this}then(o,l){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers.set("Accept-Profile",this.schema):this.headers.set("Content-Profile",this.schema)),this.method!=="GET"&&this.method!=="HEAD"&&this.headers.set("Content-Type","application/json");const a=this.fetch;let p=a(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async g=>{var w,j,S,T;let E=null,O=null,R=null,F=g.status,B=g.statusText;if(g.ok){if(this.method!=="HEAD"){const ie=await g.text();ie===""||(this.headers.get("Accept")==="text/csv"||this.headers.get("Accept")&&(!((w=this.headers.get("Accept"))===null||w===void 0)&&w.includes("application/vnd.pgrst.plan+text"))?O=ie:O=JSON.parse(ie))}const z=(j=this.headers.get("Prefer"))===null||j===void 0?void 0:j.match(/count=(exact|planned|estimated)/),ee=(S=g.headers.get("content-range"))===null||S===void 0?void 0:S.split("/");z&&ee&&ee.length>1&&(R=parseInt(ee[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(O)&&(O.length>1?(E={code:"PGRST116",details:`Results contain ${O.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},O=null,R=null,F=406,B="Not Acceptable"):O.length===1?O=O[0]:O=null)}else{const z=await g.text();try{E=JSON.parse(z),Array.isArray(E)&&g.status===404&&(O=[],E=null,F=200,B="OK")}catch{g.status===404&&z===""?(F=204,B="No Content"):E={message:z}}if(E&&this.isMaybeSingle&&(!((T=E==null?void 0:E.details)===null||T===void 0)&&T.includes("0 rows"))&&(E=null,F=200,B="OK"),E&&this.shouldThrowOnError)throw new t.default(E)}return{error:E,data:O,count:R,status:F,statusText:B}});return this.shouldThrowOnError||(p=p.catch(g=>{var w,j,S;return{error:{message:`${(w=g==null?void 0:g.name)!==null&&w!==void 0?w:"FetchError"}: ${g==null?void 0:g.message}`,details:`${(j=g==null?void 0:g.stack)!==null&&j!==void 0?j:""}`,hint:"",code:`${(S=g==null?void 0:g.code)!==null&&S!==void 0?S:""}`},data:null,count:null,status:0,statusText:""}})),p.then(o,l)}returns(){return this}overrideTypes(){return this}}return y1.default=r,y1}var U5;function _A(){if(U5)return v1;U5=1,Object.defineProperty(v1,"__esModule",{value:!0});const t=gy.__importDefault(bA());class r extends t.default{select(o){let l=!1;const a=(o??"*").split("").map(p=>/\s/.test(p)&&!l?"":(p==='"'&&(l=!l),p)).join("");return this.url.searchParams.set("select",a),this.headers.append("Prefer","return=representation"),this}order(o,{ascending:l=!0,nullsFirst:a,foreignTable:p,referencedTable:g=p}={}){const w=g?`${g}.order`:"order",j=this.url.searchParams.get(w);return this.url.searchParams.set(w,`${j?`${j},`:""}${o}.${l?"asc":"desc"}${a===void 0?"":a?".nullsfirst":".nullslast"}`),this}limit(o,{foreignTable:l,referencedTable:a=l}={}){const p=typeof a>"u"?"limit":`${a}.limit`;return this.url.searchParams.set(p,`${o}`),this}range(o,l,{foreignTable:a,referencedTable:p=a}={}){const g=typeof p>"u"?"offset":`${p}.offset`,w=typeof p>"u"?"limit":`${p}.limit`;return this.url.searchParams.set(g,`${o}`),this.url.searchParams.set(w,`${l-o+1}`),this}abortSignal(o){return this.signal=o,this}single(){return this.headers.set("Accept","application/vnd.pgrst.object+json"),this}maybeSingle(){return this.method==="GET"?this.headers.set("Accept","application/json"):this.headers.set("Accept","application/vnd.pgrst.object+json"),this.isMaybeSingle=!0,this}csv(){return this.headers.set("Accept","text/csv"),this}geojson(){return this.headers.set("Accept","application/geo+json"),this}explain({analyze:o=!1,verbose:l=!1,settings:a=!1,buffers:p=!1,wal:g=!1,format:w="text"}={}){var j;const S=[o?"analyze":null,l?"verbose":null,a?"settings":null,p?"buffers":null,g?"wal":null].filter(Boolean).join("|"),T=(j=this.headers.get("Accept"))!==null&&j!==void 0?j:"application/json";return this.headers.set("Accept",`application/vnd.pgrst.plan+${w}; for="${T}"; options=${S};`),w==="json"?this:this}rollback(){return this.headers.append("Prefer","tx=rollback"),this}returns(){return this}maxAffected(o){return this.headers.append("Prefer","handling=strict"),this.headers.append("Prefer",`max-affected=${o}`),this}}return v1.default=r,v1}var q5;function Gw(){if(q5)return g1;q5=1,Object.defineProperty(g1,"__esModule",{value:!0});const t=gy.__importDefault(_A()),r=new RegExp("[,()]");class i extends t.default{eq(l,a){return this.url.searchParams.append(l,`eq.${a}`),this}neq(l,a){return this.url.searchParams.append(l,`neq.${a}`),this}gt(l,a){return this.url.searchParams.append(l,`gt.${a}`),this}gte(l,a){return this.url.searchParams.append(l,`gte.${a}`),this}lt(l,a){return this.url.searchParams.append(l,`lt.${a}`),this}lte(l,a){return this.url.searchParams.append(l,`lte.${a}`),this}like(l,a){return this.url.searchParams.append(l,`like.${a}`),this}likeAllOf(l,a){return this.url.searchParams.append(l,`like(all).{${a.join(",")}}`),this}likeAnyOf(l,a){return this.url.searchParams.append(l,`like(any).{${a.join(",")}}`),this}ilike(l,a){return this.url.searchParams.append(l,`ilike.${a}`),this}ilikeAllOf(l,a){return this.url.searchParams.append(l,`ilike(all).{${a.join(",")}}`),this}ilikeAnyOf(l,a){return this.url.searchParams.append(l,`ilike(any).{${a.join(",")}}`),this}is(l,a){return this.url.searchParams.append(l,`is.${a}`),this}in(l,a){const p=Array.from(new Set(a)).map(g=>typeof g=="string"&&r.test(g)?`"${g}"`:`${g}`).join(",");return this.url.searchParams.append(l,`in.(${p})`),this}contains(l,a){return typeof a=="string"?this.url.searchParams.append(l,`cs.${a}`):Array.isArray(a)?this.url.searchParams.append(l,`cs.{${a.join(",")}}`):this.url.searchParams.append(l,`cs.${JSON.stringify(a)}`),this}containedBy(l,a){return typeof a=="string"?this.url.searchParams.append(l,`cd.${a}`):Array.isArray(a)?this.url.searchParams.append(l,`cd.{${a.join(",")}}`):this.url.searchParams.append(l,`cd.${JSON.stringify(a)}`),this}rangeGt(l,a){return this.url.searchParams.append(l,`sr.${a}`),this}rangeGte(l,a){return this.url.searchParams.append(l,`nxl.${a}`),this}rangeLt(l,a){return this.url.searchParams.append(l,`sl.${a}`),this}rangeLte(l,a){return this.url.searchParams.append(l,`nxr.${a}`),this}rangeAdjacent(l,a){return this.url.searchParams.append(l,`adj.${a}`),this}overlaps(l,a){return typeof a=="string"?this.url.searchParams.append(l,`ov.${a}`):this.url.searchParams.append(l,`ov.{${a.join(",")}}`),this}textSearch(l,a,{config:p,type:g}={}){let w="";g==="plain"?w="pl":g==="phrase"?w="ph":g==="websearch"&&(w="w");const j=p===void 0?"":`(${p})`;return this.url.searchParams.append(l,`${w}fts${j}.${a}`),this}match(l){return Object.entries(l).forEach(([a,p])=>{this.url.searchParams.append(a,`eq.${p}`)}),this}not(l,a,p){return this.url.searchParams.append(l,`not.${a}.${p}`),this}or(l,{foreignTable:a,referencedTable:p=a}={}){const g=p?`${p}.or`:"or";return this.url.searchParams.append(g,`(${l})`),this}filter(l,a,p){return this.url.searchParams.append(l,`${a}.${p}`),this}}return g1.default=i,g1}var V5;function wA(){if(V5)return m1;V5=1,Object.defineProperty(m1,"__esModule",{value:!0});const t=gy.__importDefault(Gw());class r{constructor(o,{headers:l={},schema:a,fetch:p}){this.url=o,this.headers=new Headers(l),this.schema=a,this.fetch=p}select(o,l){const{head:a=!1,count:p}=l??{},g=a?"HEAD":"GET";let w=!1;const j=(o??"*").split("").map(S=>/\s/.test(S)&&!w?"":(S==='"'&&(w=!w),S)).join("");return this.url.searchParams.set("select",j),p&&this.headers.append("Prefer",`count=${p}`),new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch})}insert(o,{count:l,defaultToNull:a=!0}={}){var p;const g="POST";if(l&&this.headers.append("Prefer",`count=${l}`),a||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const w=o.reduce((j,S)=>j.concat(Object.keys(S)),[]);if(w.length>0){const j=[...new Set(w)].map(S=>`"${S}"`);this.url.searchParams.set("columns",j.join(","))}}return new t.default({method:g,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(p=this.fetch)!==null&&p!==void 0?p:fetch})}upsert(o,{onConflict:l,ignoreDuplicates:a=!1,count:p,defaultToNull:g=!0}={}){var w;const j="POST";if(this.headers.append("Prefer",`resolution=${a?"ignore":"merge"}-duplicates`),l!==void 0&&this.url.searchParams.set("on_conflict",l),p&&this.headers.append("Prefer",`count=${p}`),g||this.headers.append("Prefer","missing=default"),Array.isArray(o)){const S=o.reduce((T,E)=>T.concat(Object.keys(E)),[]);if(S.length>0){const T=[...new Set(S)].map(E=>`"${E}"`);this.url.searchParams.set("columns",T.join(","))}}return new t.default({method:j,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(w=this.fetch)!==null&&w!==void 0?w:fetch})}update(o,{count:l}={}){var a;const p="PATCH";return l&&this.headers.append("Prefer",`count=${l}`),new t.default({method:p,url:this.url,headers:this.headers,schema:this.schema,body:o,fetch:(a=this.fetch)!==null&&a!==void 0?a:fetch})}delete({count:o}={}){var l;const a="DELETE";return o&&this.headers.append("Prefer",`count=${o}`),new t.default({method:a,url:this.url,headers:this.headers,schema:this.schema,fetch:(l=this.fetch)!==null&&l!==void 0?l:fetch})}}return m1.default=r,m1}var $5;function pI(){if($5)return p1;$5=1,Object.defineProperty(p1,"__esModule",{value:!0});const n=gy,t=n.__importDefault(wA()),r=n.__importDefault(Gw());class i{constructor(l,{headers:a={},schema:p,fetch:g}={}){this.url=l,this.headers=new Headers(a),this.schemaName=p,this.fetch=g}from(l){const a=new URL(`${this.url}/${l}`);return new t.default(a,{headers:new Headers(this.headers),schema:this.schemaName,fetch:this.fetch})}schema(l){return new i(this.url,{headers:this.headers,schema:l,fetch:this.fetch})}rpc(l,a={},{head:p=!1,get:g=!1,count:w}={}){var j;let S;const T=new URL(`${this.url}/rpc/${l}`);let E;p||g?(S=p?"HEAD":"GET",Object.entries(a).filter(([R,F])=>F!==void 0).map(([R,F])=>[R,Array.isArray(F)?`{${F.join(",")}}`:`${F}`]).forEach(([R,F])=>{T.searchParams.append(R,F)})):(S="POST",E=a);const O=new Headers(this.headers);return w&&O.set("Prefer",`count=${w}`),new r.default({method:S,url:T,headers:O,schema:this.schemaName,body:E,fetch:(j=this.fetch)!==null&&j!==void 0?j:fetch})}}return p1.default=i,p1}var H5;function mI(){if(H5)return Uc;H5=1,Object.defineProperty(Uc,"__esModule",{value:!0}),Uc.PostgrestError=Uc.PostgrestBuilder=Uc.PostgrestTransformBuilder=Uc.PostgrestFilterBuilder=Uc.PostgrestQueryBuilder=Uc.PostgrestClient=void 0;const n=gy,t=n.__importDefault(pI());Uc.PostgrestClient=t.default;const r=n.__importDefault(wA());Uc.PostgrestQueryBuilder=r.default;const i=n.__importDefault(Gw());Uc.PostgrestFilterBuilder=i.default;const o=n.__importDefault(_A());Uc.PostgrestTransformBuilder=o.default;const l=n.__importDefault(bA());Uc.PostgrestBuilder=l.default;const a=n.__importDefault(xA());return Uc.PostgrestError=a.default,Uc.default={PostgrestClient:t.default,PostgrestQueryBuilder:r.default,PostgrestFilterBuilder:i.default,PostgrestTransformBuilder:o.default,PostgrestBuilder:l.default,PostgrestError:a.default},Uc}var jA=mI();const NA=Lb(jA),gI=Iw({__proto__:null,default:NA},[jA]),{PostgrestClient:vI,PostgrestQueryBuilder:tZ,PostgrestFilterBuilder:rZ,PostgrestTransformBuilder:nZ,PostgrestBuilder:iZ,PostgrestError:sZ}=NA||gI;class yI{static detectEnvironment(){var t;if(typeof WebSocket<"u")return{type:"native",constructor:WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocket<"u")return{type:"native",constructor:globalThis.WebSocket};if(typeof global<"u"&&typeof global.WebSocket<"u")return{type:"native",constructor:global.WebSocket};if(typeof globalThis<"u"&&typeof globalThis.WebSocketPair<"u"&&typeof globalThis.WebSocket>"u")return{type:"cloudflare",error:"Cloudflare Workers detected. WebSocket clients are not supported in Cloudflare Workers.",workaround:"Use Cloudflare Workers WebSocket API for server-side WebSocket handling, or deploy to a different runtime."};if(typeof globalThis<"u"&&globalThis.EdgeRuntime||typeof navigator<"u"&&(!((t=navigator.userAgent)===null||t===void 0)&&t.includes("Vercel-Edge")))return{type:"unsupported",error:"Edge runtime detected (Vercel Edge/Netlify Edge). WebSockets are not supported in edge functions.",workaround:"Use serverless functions or a different deployment target for WebSocket functionality."};if(typeof process<"u"){const r=process.versions;if(r&&r.node){const i=r.node,o=parseInt(i.replace(/^v/,"").split(".")[0]);return o>=22?typeof globalThis.WebSocket<"u"?{type:"native",constructor:globalThis.WebSocket}:{type:"unsupported",error:`Node.js ${o} detected but native WebSocket not found.`,workaround:"Provide a WebSocket implementation via the transport option."}:{type:"unsupported",error:`Node.js ${o} detected without native WebSocket support.`,workaround:`For Node.js < 22, install "ws" package and provide it via the transport option:
import ws from "ws"
new RealtimeClient(url, { transport: ws })`}}}return{type:"unsupported",error:"Unknown JavaScript runtime without WebSocket support.",workaround:"Ensure you're running in a supported environment (browser, Node.js, Deno) or provide a custom WebSocket implementation."}}static getWebSocketConstructor(){const t=this.detectEnvironment();if(t.constructor)return t.constructor;let r=t.error||"WebSocket not supported in this environment.";throw t.workaround&&(r+=`

Suggested solution: ${t.workaround}`),new Error(r)}static createWebSocket(t,r){const i=this.getWebSocketConstructor();return new i(t,r)}static isWebSocketSupported(){try{const t=this.detectEnvironment();return t.type==="native"||t.type==="ws"}catch{return!1}}}const xI="2.81.1",bI=`realtime-js/${xI}`,SA="1.0.0",_I="2.0.0",G5=SA,I2=1e4,wI=1e3,jI=100;var vg;(function(n){n[n.connecting=0]="connecting",n[n.open=1]="open",n[n.closing=2]="closing",n[n.closed=3]="closed"})(vg||(vg={}));var Ol;(function(n){n.closed="closed",n.errored="errored",n.joined="joined",n.joining="joining",n.leaving="leaving"})(Ol||(Ol={}));var Yd;(function(n){n.close="phx_close",n.error="phx_error",n.join="phx_join",n.reply="phx_reply",n.leave="phx_leave",n.access_token="access_token"})(Yd||(Yd={}));var L2;(function(n){n.websocket="websocket"})(L2||(L2={}));var yg;(function(n){n.Connecting="connecting",n.Open="open",n.Closing="closing",n.Closed="closed"})(yg||(yg={}));class NI{constructor(){this.HEADER_LENGTH=1,this.META_LENGTH=4,this.USER_BROADCAST_PUSH_META_LENGTH=5,this.KINDS={push:0,reply:1,broadcast:2,userBroadcastPush:3,userBroadcast:4},this.BINARY_ENCODING=0,this.JSON_ENCODING=1,this.BROADCAST="broadcast"}encode(t,r){if(this._isArrayBuffer(t.payload))return r(this._binaryEncodePush(t));if(t.event===this.BROADCAST&&!(t.payload instanceof ArrayBuffer)&&typeof t.payload.event=="string")return r(this._binaryEncodeUserBroadcastPush(t));let i=[t.join_ref,t.ref,t.topic,t.event,t.payload];return r(JSON.stringify(i))}_binaryEncodePush(t){const{join_ref:r,ref:i,event:o,topic:l,payload:a}=t,p=this.META_LENGTH+r.length+i.length+l.length+o.length,g=new ArrayBuffer(this.HEADER_LENGTH+p);let w=new DataView(g),j=0;w.setUint8(j++,this.KINDS.push),w.setUint8(j++,r.length),w.setUint8(j++,i.length),w.setUint8(j++,l.length),w.setUint8(j++,o.length),Array.from(r,T=>w.setUint8(j++,T.charCodeAt(0))),Array.from(i,T=>w.setUint8(j++,T.charCodeAt(0))),Array.from(l,T=>w.setUint8(j++,T.charCodeAt(0))),Array.from(o,T=>w.setUint8(j++,T.charCodeAt(0)));var S=new Uint8Array(g.byteLength+a.byteLength);return S.set(new Uint8Array(g),0),S.set(new Uint8Array(a),g.byteLength),S.buffer}_binaryEncodeUserBroadcastPush(t){var r;return this._isArrayBuffer((r=t.payload)===null||r===void 0?void 0:r.payload)?this._encodeBinaryUserBroadcastPush(t):this._encodeJsonUserBroadcastPush(t)}_encodeBinaryUserBroadcastPush(t){var r,i;const{join_ref:o,ref:l,topic:a}=t,p=t.payload.event,g=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:new ArrayBuffer(0),w=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+l.length+a.length+p.length,j=new ArrayBuffer(this.HEADER_LENGTH+w);let S=new DataView(j),T=0;S.setUint8(T++,this.KINDS.userBroadcastPush),S.setUint8(T++,o.length),S.setUint8(T++,l.length),S.setUint8(T++,a.length),S.setUint8(T++,p.length),S.setUint8(T++,this.BINARY_ENCODING),Array.from(o,O=>S.setUint8(T++,O.charCodeAt(0))),Array.from(l,O=>S.setUint8(T++,O.charCodeAt(0))),Array.from(a,O=>S.setUint8(T++,O.charCodeAt(0))),Array.from(p,O=>S.setUint8(T++,O.charCodeAt(0)));var E=new Uint8Array(j.byteLength+g.byteLength);return E.set(new Uint8Array(j),0),E.set(new Uint8Array(g),j.byteLength),E.buffer}_encodeJsonUserBroadcastPush(t){var r,i;const{join_ref:o,ref:l,topic:a}=t,p=t.payload.event,g=(i=(r=t.payload)===null||r===void 0?void 0:r.payload)!==null&&i!==void 0?i:{},j=new TextEncoder().encode(JSON.stringify(g)).buffer,S=this.USER_BROADCAST_PUSH_META_LENGTH+o.length+l.length+a.length+p.length,T=new ArrayBuffer(this.HEADER_LENGTH+S);let E=new DataView(T),O=0;E.setUint8(O++,this.KINDS.userBroadcastPush),E.setUint8(O++,o.length),E.setUint8(O++,l.length),E.setUint8(O++,a.length),E.setUint8(O++,p.length),E.setUint8(O++,this.JSON_ENCODING),Array.from(o,F=>E.setUint8(O++,F.charCodeAt(0))),Array.from(l,F=>E.setUint8(O++,F.charCodeAt(0))),Array.from(a,F=>E.setUint8(O++,F.charCodeAt(0))),Array.from(p,F=>E.setUint8(O++,F.charCodeAt(0)));var R=new Uint8Array(T.byteLength+j.byteLength);return R.set(new Uint8Array(T),0),R.set(new Uint8Array(j),T.byteLength),R.buffer}decode(t,r){if(this._isArrayBuffer(t)){let i=this._binaryDecode(t);return r(i)}if(typeof t=="string"){const i=JSON.parse(t),[o,l,a,p,g]=i;return r({join_ref:o,ref:l,topic:a,event:p,payload:g})}return r({})}_binaryDecode(t){const r=new DataView(t),i=r.getUint8(0),o=new TextDecoder;switch(i){case this.KINDS.push:return this._decodePush(t,r,o);case this.KINDS.reply:return this._decodeReply(t,r,o);case this.KINDS.broadcast:return this._decodeBroadcast(t,r,o);case this.KINDS.userBroadcast:return this._decodeUserBroadcast(t,r,o)}}_decodePush(t,r,i){const o=r.getUint8(1),l=r.getUint8(2),a=r.getUint8(3);let p=this.HEADER_LENGTH+this.META_LENGTH-1;const g=i.decode(t.slice(p,p+o));p=p+o;const w=i.decode(t.slice(p,p+l));p=p+l;const j=i.decode(t.slice(p,p+a));p=p+a;const S=JSON.parse(i.decode(t.slice(p,t.byteLength)));return{join_ref:g,ref:null,topic:w,event:j,payload:S}}_decodeReply(t,r,i){const o=r.getUint8(1),l=r.getUint8(2),a=r.getUint8(3),p=r.getUint8(4);let g=this.HEADER_LENGTH+this.META_LENGTH;const w=i.decode(t.slice(g,g+o));g=g+o;const j=i.decode(t.slice(g,g+l));g=g+l;const S=i.decode(t.slice(g,g+a));g=g+a;const T=i.decode(t.slice(g,g+p));g=g+p;const E=JSON.parse(i.decode(t.slice(g,t.byteLength))),O={status:T,response:E};return{join_ref:w,ref:j,topic:S,event:Yd.reply,payload:O}}_decodeBroadcast(t,r,i){const o=r.getUint8(1),l=r.getUint8(2);let a=this.HEADER_LENGTH+2;const p=i.decode(t.slice(a,a+o));a=a+o;const g=i.decode(t.slice(a,a+l));a=a+l;const w=JSON.parse(i.decode(t.slice(a,t.byteLength)));return{join_ref:null,ref:null,topic:p,event:g,payload:w}}_decodeUserBroadcast(t,r,i){const o=r.getUint8(1),l=r.getUint8(2),a=r.getUint8(3),p=r.getUint8(4);let g=this.HEADER_LENGTH+4;const w=i.decode(t.slice(g,g+o));g=g+o;const j=i.decode(t.slice(g,g+l));g=g+l;const S=i.decode(t.slice(g,g+a));g=g+a;const T=t.slice(g,t.byteLength),E=p===this.JSON_ENCODING?JSON.parse(i.decode(T)):T,O={type:this.BROADCAST,event:j,payload:E};return a>0&&(O.meta=JSON.parse(S)),{join_ref:null,ref:null,topic:w,event:this.BROADCAST,payload:O}}_isArrayBuffer(t){var r;return t instanceof ArrayBuffer||((r=t==null?void 0:t.constructor)===null||r===void 0?void 0:r.name)==="ArrayBuffer"}}class AA{constructor(t,r){this.callback=t,this.timerCalc=r,this.timer=void 0,this.tries=0,this.callback=t,this.timerCalc=r}reset(){this.tries=0,clearTimeout(this.timer),this.timer=void 0}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var ja;(function(n){n.abstime="abstime",n.bool="bool",n.date="date",n.daterange="daterange",n.float4="float4",n.float8="float8",n.int2="int2",n.int4="int4",n.int4range="int4range",n.int8="int8",n.int8range="int8range",n.json="json",n.jsonb="jsonb",n.money="money",n.numeric="numeric",n.oid="oid",n.reltime="reltime",n.text="text",n.time="time",n.timestamp="timestamp",n.timestamptz="timestamptz",n.timetz="timetz",n.tsrange="tsrange",n.tstzrange="tstzrange"})(ja||(ja={}));const W5=(n,t,r={})=>{var i;const o=(i=r.skipTypes)!==null&&i!==void 0?i:[];return t?Object.keys(t).reduce((l,a)=>(l[a]=SI(a,n,t,o),l),{}):{}},SI=(n,t,r,i)=>{const o=t.find(p=>p.name===n),l=o==null?void 0:o.type,a=r[n];return l&&!i.includes(l)?CA(l,a):M2(a)},CA=(n,t)=>{if(n.charAt(0)==="_"){const r=n.slice(1,n.length);return EI(t,r)}switch(n){case ja.bool:return AI(t);case ja.float4:case ja.float8:case ja.int2:case ja.int4:case ja.int8:case ja.numeric:case ja.oid:return CI(t);case ja.json:case ja.jsonb:return kI(t);case ja.timestamp:return TI(t);case ja.abstime:case ja.date:case ja.daterange:case ja.int4range:case ja.int8range:case ja.money:case ja.reltime:case ja.text:case ja.time:case ja.timestamptz:case ja.timetz:case ja.tsrange:case ja.tstzrange:return M2(t);default:return M2(t)}},M2=n=>n,AI=n=>{switch(n){case"t":return!0;case"f":return!1;default:return n}},CI=n=>{if(typeof n=="string"){const t=parseFloat(n);if(!Number.isNaN(t))return t}return n},kI=n=>{if(typeof n=="string")try{return JSON.parse(n)}catch(t){return console.log(`JSON parse error: ${t}`),n}return n},EI=(n,t)=>{if(typeof n!="string")return n;const r=n.length-1,i=n[r];if(n[0]==="{"&&i==="}"){let l;const a=n.slice(1,r);try{l=JSON.parse("["+a+"]")}catch{l=a?a.split(","):[]}return l.map(p=>CA(t,p))}return n},TI=n=>typeof n=="string"?n.replace(" ","T"):n,kA=n=>{const t=new URL(n);return t.protocol=t.protocol.replace(/^ws/i,"http"),t.pathname=t.pathname.replace(/\/+$/,"").replace(/\/socket\/websocket$/i,"").replace(/\/socket$/i,"").replace(/\/websocket$/i,""),t.pathname===""||t.pathname==="/"?t.pathname="/api/broadcast":t.pathname=t.pathname+"/api/broadcast",t.href};class $_{constructor(t,r,i={},o=I2){this.channel=t,this.event=r,this.payload=i,this.timeout=o,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(t){this.timeout=t,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(t){this.payload=Object.assign(Object.assign({},this.payload),t)}receive(t,r){var i;return this._hasReceived(t)&&r((i=this.receivedResp)===null||i===void 0?void 0:i.response),this.recHooks.push({status:t,callback:r}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const t=r=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=r,this._matchReceive(r)};this.channel._on(this.refEvent,{},t),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(t,r){this.refEvent&&this.channel._trigger(this.refEvent,{status:t,response:r})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:t,response:r}){this.recHooks.filter(i=>i.status===t).forEach(i=>i.callback(r))}_hasReceived(t){return this.receivedResp&&this.receivedResp.status===t}}var Y5;(function(n){n.SYNC="sync",n.JOIN="join",n.LEAVE="leave"})(Y5||(Y5={}));class Ax{constructor(t,r){this.channel=t,this.state={},this.pendingDiffs=[],this.joinRef=null,this.enabled=!1,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const i=(r==null?void 0:r.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(i.state,{},o=>{const{onJoin:l,onLeave:a,onSync:p}=this.caller;this.joinRef=this.channel._joinRef(),this.state=Ax.syncState(this.state,o,l,a),this.pendingDiffs.forEach(g=>{this.state=Ax.syncDiff(this.state,g,l,a)}),this.pendingDiffs=[],p()}),this.channel._on(i.diff,{},o=>{const{onJoin:l,onLeave:a,onSync:p}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(o):(this.state=Ax.syncDiff(this.state,o,l,a),p())}),this.onJoin((o,l,a)=>{this.channel._trigger("presence",{event:"join",key:o,currentPresences:l,newPresences:a})}),this.onLeave((o,l,a)=>{this.channel._trigger("presence",{event:"leave",key:o,currentPresences:l,leftPresences:a})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(t,r,i,o){const l=this.cloneDeep(t),a=this.transformState(r),p={},g={};return this.map(l,(w,j)=>{a[w]||(g[w]=j)}),this.map(a,(w,j)=>{const S=l[w];if(S){const T=j.map(F=>F.presence_ref),E=S.map(F=>F.presence_ref),O=j.filter(F=>E.indexOf(F.presence_ref)<0),R=S.filter(F=>T.indexOf(F.presence_ref)<0);O.length>0&&(p[w]=O),R.length>0&&(g[w]=R)}else p[w]=j}),this.syncDiff(l,{joins:p,leaves:g},i,o)}static syncDiff(t,r,i,o){const{joins:l,leaves:a}={joins:this.transformState(r.joins),leaves:this.transformState(r.leaves)};return i||(i=()=>{}),o||(o=()=>{}),this.map(l,(p,g)=>{var w;const j=(w=t[p])!==null&&w!==void 0?w:[];if(t[p]=this.cloneDeep(g),j.length>0){const S=t[p].map(E=>E.presence_ref),T=j.filter(E=>S.indexOf(E.presence_ref)<0);t[p].unshift(...T)}i(p,j,g)}),this.map(a,(p,g)=>{let w=t[p];if(!w)return;const j=g.map(S=>S.presence_ref);w=w.filter(S=>j.indexOf(S.presence_ref)<0),t[p]=w,o(p,w,g),w.length===0&&delete t[p]}),t}static map(t,r){return Object.getOwnPropertyNames(t).map(i=>r(i,t[i]))}static transformState(t){return t=this.cloneDeep(t),Object.getOwnPropertyNames(t).reduce((r,i)=>{const o=t[i];return"metas"in o?r[i]=o.metas.map(l=>(l.presence_ref=l.phx_ref,delete l.phx_ref,delete l.phx_ref_prev,l)):r[i]=o,r},{})}static cloneDeep(t){return JSON.parse(JSON.stringify(t))}onJoin(t){this.caller.onJoin=t}onLeave(t){this.caller.onLeave=t}onSync(t){this.caller.onSync=t}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Z5;(function(n){n.ALL="*",n.INSERT="INSERT",n.UPDATE="UPDATE",n.DELETE="DELETE"})(Z5||(Z5={}));var Cx;(function(n){n.BROADCAST="broadcast",n.PRESENCE="presence",n.POSTGRES_CHANGES="postgres_changes",n.SYSTEM="system"})(Cx||(Cx={}));var dp;(function(n){n.SUBSCRIBED="SUBSCRIBED",n.TIMED_OUT="TIMED_OUT",n.CLOSED="CLOSED",n.CHANNEL_ERROR="CHANNEL_ERROR"})(dp||(dp={}));class Ww{constructor(t,r={config:{}},i){var o,l;if(this.topic=t,this.params=r,this.socket=i,this.bindings={},this.state=Ol.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=t.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:"",enabled:!1},private:!1},r.config),this.timeout=this.socket.timeout,this.joinPush=new $_(this,Yd.join,this.params,this.timeout),this.rejoinTimer=new AA(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=Ol.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(a=>a.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=Ol.closed,this.socket._remove(this)}),this._onError(a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ol.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=Ol.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("error",a=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,a),this.state=Ol.errored,this.rejoinTimer.scheduleTimeout())}),this._on(Yd.reply,{},(a,p)=>{this._trigger(this._replyEventName(p),a)}),this.presence=new Ax(this),this.broadcastEndpointURL=kA(this.socket.endPoint),this.private=this.params.config.private||!1,!this.private&&(!((l=(o=this.params.config)===null||o===void 0?void 0:o.broadcast)===null||l===void 0)&&l.replay))throw`tried to use replay on public channel '${this.topic}'. It must be a private channel.`}subscribe(t,r=this.timeout){var i,o,l;if(this.socket.isConnected()||this.socket.connect(),this.state==Ol.closed){const{config:{broadcast:a,presence:p,private:g}}=this.params,w=(o=(i=this.bindings.postgres_changes)===null||i===void 0?void 0:i.map(E=>E.filter))!==null&&o!==void 0?o:[],j=!!this.bindings[Cx.PRESENCE]&&this.bindings[Cx.PRESENCE].length>0||((l=this.params.config.presence)===null||l===void 0?void 0:l.enabled)===!0,S={},T={broadcast:a,presence:Object.assign(Object.assign({},p),{enabled:j}),postgres_changes:w,private:g};this.socket.accessTokenValue&&(S.access_token=this.socket.accessTokenValue),this._onError(E=>t==null?void 0:t(dp.CHANNEL_ERROR,E)),this._onClose(()=>t==null?void 0:t(dp.CLOSED)),this.updateJoinPayload(Object.assign({config:T},S)),this.joinedOnce=!0,this._rejoin(r),this.joinPush.receive("ok",async({postgres_changes:E})=>{var O;if(this.socket.setAuth(),E===void 0){t==null||t(dp.SUBSCRIBED);return}else{const R=this.bindings.postgres_changes,F=(O=R==null?void 0:R.length)!==null&&O!==void 0?O:0,B=[];for(let G=0;G<F;G++){const z=R[G],{filter:{event:ee,schema:ie,table:ge,filter:K}}=z,J=E&&E[G];if(J&&J.event===ee&&J.schema===ie&&J.table===ge&&J.filter===K)B.push(Object.assign(Object.assign({},z),{id:J.id}));else{this.unsubscribe(),this.state=Ol.errored,t==null||t(dp.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=B,t&&t(dp.SUBSCRIBED);return}}).receive("error",E=>{this.state=Ol.errored,t==null||t(dp.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(E).join(", ")||"error")))}).receive("timeout",()=>{t==null||t(dp.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(t,r={}){return await this.send({type:"presence",event:"track",payload:t},r.timeout||this.timeout)}async untrack(t={}){return await this.send({type:"presence",event:"untrack"},t)}on(t,r,i){return this.state===Ol.joined&&t===Cx.PRESENCE&&(this.socket.log("channel",`resubscribe to ${this.topic} due to change in presence callbacks on joined channel`),this.unsubscribe().then(()=>this.subscribe())),this._on(t,r,i)}async httpSend(t,r,i={}){var o;const l=this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"";if(r==null)return Promise.reject("Payload is required for httpSend()");const a={method:"POST",headers:{Authorization:l,apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:t,payload:r,private:this.private}]})},p=await this._fetchWithTimeout(this.broadcastEndpointURL,a,(o=i.timeout)!==null&&o!==void 0?o:this.timeout);if(p.status===202)return{success:!0};let g=p.statusText;try{const w=await p.json();g=w.error||w.message||g}catch{}return Promise.reject(new Error(g))}async send(t,r={}){var i,o;if(!this._canPush()&&t.type==="broadcast"){console.warn("Realtime send() is automatically falling back to REST API. This behavior will be deprecated in the future. Please use httpSend() explicitly for REST delivery.");const{event:l,payload:a}=t,g={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:l,payload:a,private:this.private}]})};try{const w=await this._fetchWithTimeout(this.broadcastEndpointURL,g,(i=r.timeout)!==null&&i!==void 0?i:this.timeout);return await((o=w.body)===null||o===void 0?void 0:o.cancel()),w.ok?"ok":"error"}catch(w){return w.name==="AbortError"?"timed out":"error"}}else return new Promise(l=>{var a,p,g;const w=this._push(t.type,t,r.timeout||this.timeout);t.type==="broadcast"&&!(!((g=(p=(a=this.params)===null||a===void 0?void 0:a.config)===null||p===void 0?void 0:p.broadcast)===null||g===void 0)&&g.ack)&&l("ok"),w.receive("ok",()=>l("ok")),w.receive("error",()=>l("error")),w.receive("timeout",()=>l("timed out"))})}updateJoinPayload(t){this.joinPush.updatePayload(t)}unsubscribe(t=this.timeout){this.state=Ol.leaving;const r=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(Yd.close,"leave",this._joinRef())};this.joinPush.destroy();let i=null;return new Promise(o=>{i=new $_(this,Yd.leave,{},t),i.receive("ok",()=>{r(),o("ok")}).receive("timeout",()=>{r(),o("timed out")}).receive("error",()=>{o("error")}),i.send(),this._canPush()||i.trigger("ok",{})}).finally(()=>{i==null||i.destroy()})}teardown(){this.pushBuffer.forEach(t=>t.destroy()),this.pushBuffer=[],this.rejoinTimer.reset(),this.joinPush.destroy(),this.state=Ol.closed,this.bindings={}}async _fetchWithTimeout(t,r,i){const o=new AbortController,l=setTimeout(()=>o.abort(),i),a=await this.socket.fetch(t,Object.assign(Object.assign({},r),{signal:o.signal}));return clearTimeout(l),a}_push(t,r,i=this.timeout){if(!this.joinedOnce)throw`tried to push '${t}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let o=new $_(this,t,r,i);return this._canPush()?o.send():this._addToPushBuffer(o),o}_addToPushBuffer(t){if(t.startTimeout(),this.pushBuffer.push(t),this.pushBuffer.length>jI){const r=this.pushBuffer.shift();r&&(r.destroy(),this.socket.log("channel",`discarded push due to buffer overflow: ${r.event}`,r.payload))}}_onMessage(t,r,i){return r}_isMember(t){return this.topic===t}_joinRef(){return this.joinPush.ref}_trigger(t,r,i){var o,l;const a=t.toLocaleLowerCase(),{close:p,error:g,leave:w,join:j}=Yd;if(i&&[p,g,w,j].indexOf(a)>=0&&i!==this._joinRef())return;let T=this._onMessage(a,r,i);if(r&&!T)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(a)?(o=this.bindings.postgres_changes)===null||o===void 0||o.filter(E=>{var O,R,F;return((O=E.filter)===null||O===void 0?void 0:O.event)==="*"||((F=(R=E.filter)===null||R===void 0?void 0:R.event)===null||F===void 0?void 0:F.toLocaleLowerCase())===a}).map(E=>E.callback(T,i)):(l=this.bindings[a])===null||l===void 0||l.filter(E=>{var O,R,F,B,G,z;if(["broadcast","presence","postgres_changes"].includes(a))if("id"in E){const ee=E.id,ie=(O=E.filter)===null||O===void 0?void 0:O.event;return ee&&((R=r.ids)===null||R===void 0?void 0:R.includes(ee))&&(ie==="*"||(ie==null?void 0:ie.toLocaleLowerCase())===((F=r.data)===null||F===void 0?void 0:F.type.toLocaleLowerCase()))}else{const ee=(G=(B=E==null?void 0:E.filter)===null||B===void 0?void 0:B.event)===null||G===void 0?void 0:G.toLocaleLowerCase();return ee==="*"||ee===((z=r==null?void 0:r.event)===null||z===void 0?void 0:z.toLocaleLowerCase())}else return E.type.toLocaleLowerCase()===a}).map(E=>{if(typeof T=="object"&&"ids"in T){const O=T.data,{schema:R,table:F,commit_timestamp:B,type:G,errors:z}=O;T=Object.assign(Object.assign({},{schema:R,table:F,commit_timestamp:B,eventType:G,new:{},old:{},errors:z}),this._getPayloadRecords(O))}E.callback(T,i)})}_isClosed(){return this.state===Ol.closed}_isJoined(){return this.state===Ol.joined}_isJoining(){return this.state===Ol.joining}_isLeaving(){return this.state===Ol.leaving}_replyEventName(t){return`chan_reply_${t}`}_on(t,r,i){const o=t.toLocaleLowerCase(),l={type:o,filter:r,callback:i};return this.bindings[o]?this.bindings[o].push(l):this.bindings[o]=[l],this}_off(t,r){const i=t.toLocaleLowerCase();return this.bindings[i]&&(this.bindings[i]=this.bindings[i].filter(o=>{var l;return!(((l=o.type)===null||l===void 0?void 0:l.toLocaleLowerCase())===i&&Ww.isEqual(o.filter,r))})),this}static isEqual(t,r){if(Object.keys(t).length!==Object.keys(r).length)return!1;for(const i in t)if(t[i]!==r[i])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(t){this._on(Yd.close,{},t)}_onError(t){this._on(Yd.error,{},r=>t(r))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(t=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=Ol.joining,this.joinPush.resend(t))}_getPayloadRecords(t){const r={new:{},old:{}};return(t.type==="INSERT"||t.type==="UPDATE")&&(r.new=W5(t.columns,t.record)),(t.type==="UPDATE"||t.type==="DELETE")&&(r.old=W5(t.columns,t.old_record)),r}}const H_=()=>{},b1={HEARTBEAT_INTERVAL:25e3,RECONNECT_DELAY:10,HEARTBEAT_TIMEOUT_FALLBACK:100},PI=[1e3,2e3,5e3,1e4],RI=1e4,II=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class LI{constructor(t,r){var i;if(this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=I2,this.transport=null,this.heartbeatIntervalMs=b1.HEARTBEAT_INTERVAL,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=H_,this.ref=0,this.reconnectTimer=null,this.vsn=G5,this.logger=H_,this.conn=null,this.sendBuffer=[],this.serializer=new NI,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._connectionState="disconnected",this._wasManualDisconnect=!1,this._authPromise=null,this._resolveFetch=o=>o?(...l)=>o(...l):(...l)=>fetch(...l),!(!((i=r==null?void 0:r.params)===null||i===void 0)&&i.apikey))throw new Error("API key is required to connect to Realtime");this.apiKey=r.params.apikey,this.endPoint=`${t}/${L2.websocket}`,this.httpEndpoint=kA(t),this._initializeOptions(r),this._setupReconnectionTimer(),this.fetch=this._resolveFetch(r==null?void 0:r.fetch)}connect(){if(!(this.isConnecting()||this.isDisconnecting()||this.conn!==null&&this.isConnected())){if(this._setConnectionState("connecting"),this.accessToken&&!this._authPromise&&this._setAuthSafely("connect"),this.transport)this.conn=new this.transport(this.endpointURL());else try{this.conn=yI.createWebSocket(this.endpointURL())}catch(t){this._setConnectionState("disconnected");const r=t.message;throw r.includes("Node.js")?new Error(`${r}

To use Realtime in Node.js, you need to provide a WebSocket implementation:

Option 1: Use Node.js 22+ which has native WebSocket support
Option 2: Install and provide the "ws" package:

  npm install ws

  import ws from "ws"
  const client = new RealtimeClient(url, {
    ...options,
    transport: ws
  })`):new Error(`WebSocket not available: ${r}`)}this._setupConnectionHandlers()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:this.vsn}))}disconnect(t,r){if(!this.isDisconnecting())if(this._setConnectionState("disconnecting",!0),this.conn){const i=setTimeout(()=>{this._setConnectionState("disconnected")},100);this.conn.onclose=()=>{clearTimeout(i),this._setConnectionState("disconnected")},typeof this.conn.close=="function"&&(t?this.conn.close(t,r??""):this.conn.close()),this._teardownConnection()}else this._setConnectionState("disconnected")}getChannels(){return this.channels}async removeChannel(t){const r=await t.unsubscribe();return this.channels.length===0&&this.disconnect(),r}async removeAllChannels(){const t=await Promise.all(this.channels.map(r=>r.unsubscribe()));return this.channels=[],this.disconnect(),t}log(t,r,i){this.logger(t,r,i)}connectionState(){switch(this.conn&&this.conn.readyState){case vg.connecting:return yg.Connecting;case vg.open:return yg.Open;case vg.closing:return yg.Closing;default:return yg.Closed}}isConnected(){return this.connectionState()===yg.Open}isConnecting(){return this._connectionState==="connecting"}isDisconnecting(){return this._connectionState==="disconnecting"}channel(t,r={config:{}}){const i=`realtime:${t}`,o=this.getChannels().find(l=>l.topic===i);if(o)return o;{const l=new Ww(`realtime:${t}`,r,this);return this.channels.push(l),l}}push(t){const{topic:r,event:i,payload:o,ref:l}=t,a=()=>{this.encode(t,p=>{var g;(g=this.conn)===null||g===void 0||g.send(p)})};this.log("push",`${r} ${i} (${l})`,o),this.isConnected()?a():this.sendBuffer.push(a)}async setAuth(t=null){this._authPromise=this._performAuth(t);try{await this._authPromise}finally{this._authPromise=null}}async sendHeartbeat(){var t;if(!this.isConnected()){try{this.heartbeatCallback("disconnected")}catch(r){this.log("error","error in heartbeat callback",r)}return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection");try{this.heartbeatCallback("timeout")}catch(r){this.log("error","error in heartbeat callback",r)}this._wasManualDisconnect=!1,(t=this.conn)===null||t===void 0||t.close(wI,"heartbeat timeout"),setTimeout(()=>{var r;this.isConnected()||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout()},b1.HEARTBEAT_TIMEOUT_FALLBACK);return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef});try{this.heartbeatCallback("sent")}catch(r){this.log("error","error in heartbeat callback",r)}this._setAuthSafely("heartbeat")}onHeartbeat(t){this.heartbeatCallback=t}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(t=>t()),this.sendBuffer=[])}_makeRef(){let t=this.ref+1;return t===this.ref?this.ref=0:this.ref=t,this.ref.toString()}_leaveOpenTopic(t){let r=this.channels.find(i=>i.topic===t&&(i._isJoined()||i._isJoining()));r&&(this.log("transport",`leaving duplicate topic "${t}"`),r.unsubscribe())}_remove(t){this.channels=this.channels.filter(r=>r.topic!==t.topic)}_onConnMessage(t){this.decode(t.data,r=>{if(r.topic==="phoenix"&&r.event==="phx_reply")try{this.heartbeatCallback(r.payload.status==="ok"?"ok":"error")}catch(w){this.log("error","error in heartbeat callback",w)}r.ref&&r.ref===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null);const{topic:i,event:o,payload:l,ref:a}=r,p=a?`(${a})`:"",g=l.status||"";this.log("receive",`${g} ${i} ${o} ${p}`.trim(),l),this.channels.filter(w=>w._isMember(i)).forEach(w=>w._trigger(o,l,a)),this._triggerStateCallbacks("message",r)})}_clearTimer(t){var r;t==="heartbeat"&&this.heartbeatTimer?(clearInterval(this.heartbeatTimer),this.heartbeatTimer=void 0):t==="reconnect"&&((r=this.reconnectTimer)===null||r===void 0||r.reset())}_clearAllTimers(){this._clearTimer("heartbeat"),this._clearTimer("reconnect")}_setupConnectionHandlers(){this.conn&&("binaryType"in this.conn&&(this.conn.binaryType="arraybuffer"),this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=t=>this._onConnError(t),this.conn.onmessage=t=>this._onConnMessage(t),this.conn.onclose=t=>this._onConnClose(t))}_teardownConnection(){if(this.conn){if(this.conn.readyState===vg.open||this.conn.readyState===vg.connecting)try{this.conn.close()}catch(t){this.log("error","Error closing connection",t)}this.conn.onopen=null,this.conn.onerror=null,this.conn.onmessage=null,this.conn.onclose=null,this.conn=null}this._clearAllTimers(),this.channels.forEach(t=>t.teardown())}_onConnOpen(){this._setConnectionState("connected"),this.log("transport",`connected to ${this.endpointURL()}`),(this._authPromise||(this.accessToken&&!this.accessTokenValue?this.setAuth():Promise.resolve())).then(()=>{this.flushSendBuffer()}).catch(r=>{this.log("error","error waiting for auth on connect",r),this.flushSendBuffer()}),this._clearTimer("reconnect"),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this._triggerStateCallbacks("open")}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const t=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(t),this.workerRef.onerror=r=>{this.log("worker","worker error",r.message),this.workerRef.terminate()},this.workerRef.onmessage=r=>{r.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(t){var r;this._setConnectionState("disconnected"),this.log("transport","close",t),this._triggerChanError(),this._clearTimer("heartbeat"),this._wasManualDisconnect||(r=this.reconnectTimer)===null||r===void 0||r.scheduleTimeout(),this._triggerStateCallbacks("close",t)}_onConnError(t){this._setConnectionState("disconnected"),this.log("transport",`${t}`),this._triggerChanError(),this._triggerStateCallbacks("error",t)}_triggerChanError(){this.channels.forEach(t=>t._trigger(Yd.error))}_appendParams(t,r){if(Object.keys(r).length===0)return t;const i=t.match(/\?/)?"&":"?",o=new URLSearchParams(r);return`${t}${i}${o}`}_workerObjectUrl(t){let r;if(t)r=t;else{const i=new Blob([II],{type:"application/javascript"});r=URL.createObjectURL(i)}return r}_setConnectionState(t,r=!1){this._connectionState=t,t==="connecting"?this._wasManualDisconnect=!1:t==="disconnecting"&&(this._wasManualDisconnect=r)}async _performAuth(t=null){let r;t?r=t:this.accessToken?r=await this.accessToken():r=this.accessTokenValue,this.accessTokenValue!=r&&(this.accessTokenValue=r,this.channels.forEach(i=>{const o={access_token:r,version:bI};r&&i.updateJoinPayload(o),i.joinedOnce&&i._isJoined()&&i._push(Yd.access_token,{access_token:r})}))}async _waitForAuthIfNeeded(){this._authPromise&&await this._authPromise}_setAuthSafely(t="general"){this.setAuth().catch(r=>{this.log("error",`error setting auth in ${t}`,r)})}_triggerStateCallbacks(t,r){try{this.stateChangeCallbacks[t].forEach(i=>{try{i(r)}catch(o){this.log("error",`error in ${t} callback`,o)}})}catch(i){this.log("error",`error triggering ${t} callbacks`,i)}}_setupReconnectionTimer(){this.reconnectTimer=new AA(async()=>{setTimeout(async()=>{await this._waitForAuthIfNeeded(),this.isConnected()||this.connect()},b1.RECONNECT_DELAY)},this.reconnectAfterMs)}_initializeOptions(t){var r,i,o,l,a,p,g,w,j,S,T,E;switch(this.transport=(r=t==null?void 0:t.transport)!==null&&r!==void 0?r:null,this.timeout=(i=t==null?void 0:t.timeout)!==null&&i!==void 0?i:I2,this.heartbeatIntervalMs=(o=t==null?void 0:t.heartbeatIntervalMs)!==null&&o!==void 0?o:b1.HEARTBEAT_INTERVAL,this.worker=(l=t==null?void 0:t.worker)!==null&&l!==void 0?l:!1,this.accessToken=(a=t==null?void 0:t.accessToken)!==null&&a!==void 0?a:null,this.heartbeatCallback=(p=t==null?void 0:t.heartbeatCallback)!==null&&p!==void 0?p:H_,this.vsn=(g=t==null?void 0:t.vsn)!==null&&g!==void 0?g:G5,t!=null&&t.params&&(this.params=t.params),t!=null&&t.logger&&(this.logger=t.logger),(t!=null&&t.logLevel||t!=null&&t.log_level)&&(this.logLevel=t.logLevel||t.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),this.reconnectAfterMs=(w=t==null?void 0:t.reconnectAfterMs)!==null&&w!==void 0?w:(O=>PI[O-1]||RI),this.vsn){case SA:this.encode=(j=t==null?void 0:t.encode)!==null&&j!==void 0?j:((O,R)=>R(JSON.stringify(O))),this.decode=(S=t==null?void 0:t.decode)!==null&&S!==void 0?S:((O,R)=>R(JSON.parse(O)));break;case _I:this.encode=(T=t==null?void 0:t.encode)!==null&&T!==void 0?T:this.serializer.encode.bind(this.serializer),this.decode=(E=t==null?void 0:t.decode)!==null&&E!==void 0?E:this.serializer.decode.bind(this.serializer);break;default:throw new Error(`Unsupported serializer version: ${this.vsn}`)}if(this.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.workerUrl=t==null?void 0:t.workerUrl}}}class Yw extends Error{constructor(t){super(t),this.__isStorageError=!0,this.name="StorageError"}}function go(n){return typeof n=="object"&&n!==null&&"__isStorageError"in n}class MI extends Yw{constructor(t,r,i){super(t),this.name="StorageApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class D2 extends Yw{constructor(t,r){super(t),this.name="StorageUnknownError",this.originalError=r}}const Zw=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),DI=()=>Response,O2=n=>{if(Array.isArray(n))return n.map(r=>O2(r));if(typeof n=="function"||n!==Object(n))return n;const t={};return Object.entries(n).forEach(([r,i])=>{const o=r.replace(/([-_][a-z])/gi,l=>l.toUpperCase().replace(/[-_]/g,""));t[o]=O2(i)}),t},OI=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},G_=n=>{var t;return n.msg||n.message||n.error_description||(typeof n.error=="string"?n.error:(t=n.error)===null||t===void 0?void 0:t.message)||JSON.stringify(n)},zI=(n,t,r)=>pn(void 0,void 0,void 0,function*(){const i=yield DI();n instanceof i&&!(r!=null&&r.noResolveJson)?n.json().then(o=>{const l=n.status||500,a=(o==null?void 0:o.statusCode)||l+"";t(new MI(G_(o),l,a))}).catch(o=>{t(new D2(G_(o),o))}):t(new D2(G_(n),n))}),FI=(n,t,r,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"||!i?o:(OI(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,t!=null&&t.duplex&&(o.duplex=t.duplex),Object.assign(Object.assign({},o),r))};function Jx(n,t,r,i,o,l){return pn(this,void 0,void 0,function*(){return new Promise((a,p)=>{n(r,FI(t,i,o,l)).then(g=>{if(!g.ok)throw g;return i!=null&&i.noResolveJson?g:g.json()}).then(g=>a(g)).catch(g=>zI(g,p,i))})})}function Mx(n,t,r,i){return pn(this,void 0,void 0,function*(){return Jx(n,"GET",t,r,i)})}function kh(n,t,r,i,o){return pn(this,void 0,void 0,function*(){return Jx(n,"POST",t,i,o,r)})}function z2(n,t,r,i,o){return pn(this,void 0,void 0,function*(){return Jx(n,"PUT",t,i,o,r)})}function BI(n,t,r,i){return pn(this,void 0,void 0,function*(){return Jx(n,"HEAD",t,Object.assign(Object.assign({},r),{noResolveJson:!0}),i)})}function Kw(n,t,r,i,o){return pn(this,void 0,void 0,function*(){return Jx(n,"DELETE",t,i,o,r)})}class UI{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r}then(t,r){return this.execute().then(t,r)}execute(){return pn(this,void 0,void 0,function*(){try{return{data:(yield this.downloadFn()).body,error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(go(t))return{data:null,error:t};throw t}})}}var EA;class qI{constructor(t,r){this.downloadFn=t,this.shouldThrowOnError=r,this[EA]="BlobDownloadBuilder",this.promise=null}asStream(){return new UI(this.downloadFn,this.shouldThrowOnError)}then(t,r){return this.getPromise().then(t,r)}catch(t){return this.getPromise().catch(t)}finally(t){return this.getPromise().finally(t)}getPromise(){return this.promise||(this.promise=this.execute()),this.promise}execute(){return pn(this,void 0,void 0,function*(){try{return{data:yield(yield this.downloadFn()).blob(),error:null}}catch(t){if(this.shouldThrowOnError)throw t;if(go(t))return{data:null,error:t};throw t}})}}EA=Symbol.toStringTag;const VI={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},K5={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class $I{constructor(t,r={},i,o){this.shouldThrowOnError=!1,this.url=t,this.headers=r,this.bucketId=i,this.fetch=Zw(o)}throwOnError(){return this.shouldThrowOnError=!0,this}uploadOrUpdate(t,r,i,o){return pn(this,void 0,void 0,function*(){try{let l;const a=Object.assign(Object.assign({},K5),o);let p=Object.assign(Object.assign({},this.headers),t==="POST"&&{"x-upsert":String(a.upsert)});const g=a.metadata;typeof Blob<"u"&&i instanceof Blob?(l=new FormData,l.append("cacheControl",a.cacheControl),g&&l.append("metadata",this.encodeMetadata(g)),l.append("",i)):typeof FormData<"u"&&i instanceof FormData?(l=i,l.has("cacheControl")||l.append("cacheControl",a.cacheControl),g&&!l.has("metadata")&&l.append("metadata",this.encodeMetadata(g))):(l=i,p["cache-control"]=`max-age=${a.cacheControl}`,p["content-type"]=a.contentType,g&&(p["x-metadata"]=this.toBase64(this.encodeMetadata(g))),(typeof ReadableStream<"u"&&l instanceof ReadableStream||l&&typeof l=="object"&&"pipe"in l&&typeof l.pipe=="function")&&!a.duplex&&(a.duplex="half")),o!=null&&o.headers&&(p=Object.assign(Object.assign({},p),o.headers));const w=this._removeEmptyFolders(r),j=this._getFinalPath(w),S=yield(t=="PUT"?z2:kh)(this.fetch,`${this.url}/object/${j}`,l,Object.assign({headers:p},a!=null&&a.duplex?{duplex:a.duplex}:{}));return{data:{path:w,id:S.Id,fullPath:S.Key},error:null}}catch(l){if(this.shouldThrowOnError)throw l;if(go(l))return{data:null,error:l};throw l}})}upload(t,r,i){return pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",t,r,i)})}uploadToSignedUrl(t,r,i,o){return pn(this,void 0,void 0,function*(){const l=this._removeEmptyFolders(t),a=this._getFinalPath(l),p=new URL(this.url+`/object/upload/sign/${a}`);p.searchParams.set("token",r);try{let g;const w=Object.assign({upsert:K5.upsert},o),j=Object.assign(Object.assign({},this.headers),{"x-upsert":String(w.upsert)});typeof Blob<"u"&&i instanceof Blob?(g=new FormData,g.append("cacheControl",w.cacheControl),g.append("",i)):typeof FormData<"u"&&i instanceof FormData?(g=i,g.append("cacheControl",w.cacheControl)):(g=i,j["cache-control"]=`max-age=${w.cacheControl}`,j["content-type"]=w.contentType);const S=yield z2(this.fetch,p.toString(),g,{headers:j});return{data:{path:l,fullPath:S.Key},error:null}}catch(g){if(this.shouldThrowOnError)throw g;if(go(g))return{data:null,error:g};throw g}})}createSignedUploadUrl(t,r){return pn(this,void 0,void 0,function*(){try{let i=this._getFinalPath(t);const o=Object.assign({},this.headers);r!=null&&r.upsert&&(o["x-upsert"]="true");const l=yield kh(this.fetch,`${this.url}/object/upload/sign/${i}`,{},{headers:o}),a=new URL(this.url+l.url),p=a.searchParams.get("token");if(!p)throw new Yw("No token returned by API");return{data:{signedUrl:a.toString(),path:t,token:p},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(go(i))return{data:null,error:i};throw i}})}update(t,r,i){return pn(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",t,r,i)})}move(t,r,i){return pn(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(go(o))return{data:null,error:o};throw o}})}copy(t,r,i){return pn(this,void 0,void 0,function*(){try{return{data:{path:(yield kh(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:t,destinationKey:r,destinationBucket:i==null?void 0:i.destinationBucket},{headers:this.headers})).Key},error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(go(o))return{data:null,error:o};throw o}})}createSignedUrl(t,r,i){return pn(this,void 0,void 0,function*(){try{let o=this._getFinalPath(t),l=yield kh(this.fetch,`${this.url}/object/sign/${o}`,Object.assign({expiresIn:r},i!=null&&i.transform?{transform:i.transform}:{}),{headers:this.headers});const a=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return l={signedUrl:encodeURI(`${this.url}${l.signedURL}${a}`)},{data:l,error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(go(o))return{data:null,error:o};throw o}})}createSignedUrls(t,r,i){return pn(this,void 0,void 0,function*(){try{const o=yield kh(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:r,paths:t},{headers:this.headers}),l=i!=null&&i.download?`&download=${i.download===!0?"":i.download}`:"";return{data:o.map(a=>Object.assign(Object.assign({},a),{signedUrl:a.signedURL?encodeURI(`${this.url}${a.signedURL}${l}`):null})),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(go(o))return{data:null,error:o};throw o}})}download(t,r){const o=typeof(r==null?void 0:r.transform)<"u"?"render/image/authenticated":"object",l=this.transformOptsToQueryString((r==null?void 0:r.transform)||{}),a=l?`?${l}`:"",p=this._getFinalPath(t),g=()=>Mx(this.fetch,`${this.url}/${o}/${p}${a}`,{headers:this.headers,noResolveJson:!0});return new qI(g,this.shouldThrowOnError)}info(t){return pn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{const i=yield Mx(this.fetch,`${this.url}/object/info/${r}`,{headers:this.headers});return{data:O2(i),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(go(i))return{data:null,error:i};throw i}})}exists(t){return pn(this,void 0,void 0,function*(){const r=this._getFinalPath(t);try{return yield BI(this.fetch,`${this.url}/object/${r}`,{headers:this.headers}),{data:!0,error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(go(i)&&i instanceof D2){const o=i.originalError;if([400,404].includes(o==null?void 0:o.status))return{data:!1,error:i}}throw i}})}getPublicUrl(t,r){const i=this._getFinalPath(t),o=[],l=r!=null&&r.download?`download=${r.download===!0?"":r.download}`:"";l!==""&&o.push(l);const p=typeof(r==null?void 0:r.transform)<"u"?"render/image":"object",g=this.transformOptsToQueryString((r==null?void 0:r.transform)||{});g!==""&&o.push(g);let w=o.join("&");return w!==""&&(w=`?${w}`),{data:{publicUrl:encodeURI(`${this.url}/${p}/public/${i}${w}`)}}}remove(t){return pn(this,void 0,void 0,function*(){try{return{data:yield Kw(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}list(t,r,i){return pn(this,void 0,void 0,function*(){try{const o=Object.assign(Object.assign(Object.assign({},VI),r),{prefix:t||""});return{data:yield kh(this.fetch,`${this.url}/object/list/${this.bucketId}`,o,{headers:this.headers},i),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(go(o))return{data:null,error:o};throw o}})}listV2(t,r){return pn(this,void 0,void 0,function*(){try{const i=Object.assign({},t);return{data:yield kh(this.fetch,`${this.url}/object/list-v2/${this.bucketId}`,i,{headers:this.headers},r),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(go(i))return{data:null,error:i};throw i}})}encodeMetadata(t){return JSON.stringify(t)}toBase64(t){return typeof Buffer<"u"?Buffer.from(t).toString("base64"):btoa(t)}_getFinalPath(t){return`${this.bucketId}/${t.replace(/^\/+/,"")}`}_removeEmptyFolders(t){return t.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(t){const r=[];return t.width&&r.push(`width=${t.width}`),t.height&&r.push(`height=${t.height}`),t.resize&&r.push(`resize=${t.resize}`),t.format&&r.push(`format=${t.format}`),t.quality&&r.push(`quality=${t.quality}`),r.join("&")}}const TA="2.81.1",PA={"X-Client-Info":`storage-js/${TA}`};class HI{constructor(t,r={},i,o){this.shouldThrowOnError=!1;const l=new URL(t);o!=null&&o.useNewHostname&&/supabase\.(co|in|red)$/.test(l.hostname)&&!l.hostname.includes("storage.supabase.")&&(l.hostname=l.hostname.replace("supabase.","storage.supabase.")),this.url=l.href.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PA),r),this.fetch=Zw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}listBuckets(t){return pn(this,void 0,void 0,function*(){try{const r=this.listBucketOptionsToQueryString(t);return{data:yield Mx(this.fetch,`${this.url}/bucket${r}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}getBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield Mx(this.fetch,`${this.url}/bucket/${t}`,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}createBucket(t){return pn(this,arguments,void 0,function*(r,i={public:!1}){try{return{data:yield kh(this.fetch,`${this.url}/bucket`,{id:r,name:r,type:i.type,public:i.public,file_size_limit:i.fileSizeLimit,allowed_mime_types:i.allowedMimeTypes},{headers:this.headers}),error:null}}catch(o){if(this.shouldThrowOnError)throw o;if(go(o))return{data:null,error:o};throw o}})}updateBucket(t,r){return pn(this,void 0,void 0,function*(){try{return{data:yield z2(this.fetch,`${this.url}/bucket/${t}`,{id:t,name:t,public:r.public,file_size_limit:r.fileSizeLimit,allowed_mime_types:r.allowedMimeTypes},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(go(i))return{data:null,error:i};throw i}})}emptyBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/bucket/${t}/empty`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield Kw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}listBucketOptionsToQueryString(t){const r={};return t&&("limit"in t&&(r.limit=String(t.limit)),"offset"in t&&(r.offset=String(t.offset)),t.search&&(r.search=t.search),t.sortColumn&&(r.sortColumn=t.sortColumn),t.sortOrder&&(r.sortOrder=t.sortOrder)),Object.keys(r).length>0?"?"+new URLSearchParams(r).toString():""}}class GI{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},PA),r),this.fetch=Zw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield kh(this.fetch,`${this.url}/bucket`,{name:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}listBuckets(t){return pn(this,void 0,void 0,function*(){try{const r=new URLSearchParams;(t==null?void 0:t.limit)!==void 0&&r.set("limit",t.limit.toString()),(t==null?void 0:t.offset)!==void 0&&r.set("offset",t.offset.toString()),t!=null&&t.sortColumn&&r.set("sortColumn",t.sortColumn),t!=null&&t.sortOrder&&r.set("sortOrder",t.sortOrder),t!=null&&t.search&&r.set("search",t.search);const i=r.toString(),o=i?`${this.url}/bucket?${i}`:`${this.url}/bucket`;return{data:yield Mx(this.fetch,o,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield Kw(this.fetch,`${this.url}/bucket/${t}`,{},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(go(r))return{data:null,error:r};throw r}})}}const Xw={"X-Client-Info":`storage-js/${TA}`,"Content-Type":"application/json"};class RA extends Error{constructor(t){super(t),this.__isStorageVectorsError=!0,this.name="StorageVectorsError"}}function cd(n){return typeof n=="object"&&n!==null&&"__isStorageVectorsError"in n}class W_ extends RA{constructor(t,r,i){super(t),this.name="StorageVectorsApiError",this.status=r,this.statusCode=i}toJSON(){return{name:this.name,message:this.message,status:this.status,statusCode:this.statusCode}}}class WI extends RA{constructor(t,r){super(t),this.name="StorageVectorsUnknownError",this.originalError=r}}var X5;(function(n){n.InternalError="InternalError",n.S3VectorConflictException="S3VectorConflictException",n.S3VectorNotFoundException="S3VectorNotFoundException",n.S3VectorBucketNotEmpty="S3VectorBucketNotEmpty",n.S3VectorMaxBucketsExceeded="S3VectorMaxBucketsExceeded",n.S3VectorMaxIndexesExceeded="S3VectorMaxIndexesExceeded"})(X5||(X5={}));const Jw=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),YI=n=>{if(typeof n!="object"||n===null)return!1;const t=Object.getPrototypeOf(n);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in n)&&!(Symbol.iterator in n)},J5=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),ZI=(n,t,r)=>pn(void 0,void 0,void 0,function*(){if(n&&typeof n=="object"&&"status"in n&&"ok"in n&&typeof n.status=="number"&&!(r!=null&&r.noResolveJson)){const o=n.status||500,l=n;if(typeof l.json=="function")l.json().then(a=>{const p=(a==null?void 0:a.statusCode)||(a==null?void 0:a.code)||o+"";t(new W_(J5(a),o,p))}).catch(()=>{const a=o+"",p=l.statusText||`HTTP ${o} error`;t(new W_(p,o,a))});else{const a=o+"",p=l.statusText||`HTTP ${o} error`;t(new W_(p,o,a))}}else t(new WI(J5(n),n))}),KI=(n,t,r,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return i?(YI(i)?(o.headers=Object.assign({"Content-Type":"application/json"},t==null?void 0:t.headers),o.body=JSON.stringify(i)):o.body=i,Object.assign(Object.assign({},o),r)):o};function XI(n,t,r,i,o,l){return pn(this,void 0,void 0,function*(){return new Promise((a,p)=>{n(r,KI(t,i,o,l)).then(g=>{if(!g.ok)throw g;if(i!=null&&i.noResolveJson)return g;const w=g.headers.get("content-type");return!w||!w.includes("application/json")?{}:g.json()}).then(g=>a(g)).catch(g=>ZI(g,p,i))})})}function ud(n,t,r,i,o){return pn(this,void 0,void 0,function*(){return XI(n,"POST",t,i,o,r)})}class JI{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xw),r),this.fetch=Jw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createIndex(t){return pn(this,void 0,void 0,function*(){try{return{data:(yield ud(this.fetch,`${this.url}/CreateIndex`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}getIndex(t,r){return pn(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/GetIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}),error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cd(i))return{data:null,error:i};throw i}})}listIndexes(t){return pn(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/ListIndexes`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}deleteIndex(t,r){return pn(this,void 0,void 0,function*(){try{return{data:(yield ud(this.fetch,`${this.url}/DeleteIndex`,{vectorBucketName:t,indexName:r},{headers:this.headers}))||{},error:null}}catch(i){if(this.shouldThrowOnError)throw i;if(cd(i))return{data:null,error:i};throw i}})}}class QI{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xw),r),this.fetch=Jw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}putVectors(t){return pn(this,void 0,void 0,function*(){try{if(t.vectors.length<1||t.vectors.length>500)throw new Error("Vector batch size must be between 1 and 500 items");return{data:(yield ud(this.fetch,`${this.url}/PutVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}getVectors(t){return pn(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/GetVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}listVectors(t){return pn(this,void 0,void 0,function*(){try{if(t.segmentCount!==void 0){if(t.segmentCount<1||t.segmentCount>16)throw new Error("segmentCount must be between 1 and 16");if(t.segmentIndex!==void 0&&(t.segmentIndex<0||t.segmentIndex>=t.segmentCount))throw new Error(`segmentIndex must be between 0 and ${t.segmentCount-1}`)}return{data:yield ud(this.fetch,`${this.url}/ListVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}queryVectors(t){return pn(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/QueryVectors`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}deleteVectors(t){return pn(this,void 0,void 0,function*(){try{if(t.keys.length<1||t.keys.length>500)throw new Error("Keys batch size must be between 1 and 500 items");return{data:(yield ud(this.fetch,`${this.url}/DeleteVectors`,t,{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}}class eL{constructor(t,r={},i){this.shouldThrowOnError=!1,this.url=t.replace(/\/$/,""),this.headers=Object.assign(Object.assign({},Xw),r),this.fetch=Jw(i)}throwOnError(){return this.shouldThrowOnError=!0,this}createBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:(yield ud(this.fetch,`${this.url}/CreateVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}getBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:yield ud(this.fetch,`${this.url}/GetVectorBucket`,{vectorBucketName:t},{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}listBuckets(){return pn(this,arguments,void 0,function*(t={}){try{return{data:yield ud(this.fetch,`${this.url}/ListVectorBuckets`,t,{headers:this.headers}),error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}deleteBucket(t){return pn(this,void 0,void 0,function*(){try{return{data:(yield ud(this.fetch,`${this.url}/DeleteVectorBucket`,{vectorBucketName:t},{headers:this.headers}))||{},error:null}}catch(r){if(this.shouldThrowOnError)throw r;if(cd(r))return{data:null,error:r};throw r}})}}class tL extends eL{constructor(t,r={}){super(t,r.headers||{},r.fetch)}from(t){return new rL(this.url,this.headers,t,this.fetch)}}class rL extends JI{constructor(t,r,i,o){super(t,r,o),this.vectorBucketName=i}createIndex(t){const r=Object.create(null,{createIndex:{get:()=>super.createIndex}});return pn(this,void 0,void 0,function*(){return r.createIndex.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName}))})}listIndexes(){const t=Object.create(null,{listIndexes:{get:()=>super.listIndexes}});return pn(this,arguments,void 0,function*(r={}){return t.listIndexes.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName}))})}getIndex(t){const r=Object.create(null,{getIndex:{get:()=>super.getIndex}});return pn(this,void 0,void 0,function*(){return r.getIndex.call(this,this.vectorBucketName,t)})}deleteIndex(t){const r=Object.create(null,{deleteIndex:{get:()=>super.deleteIndex}});return pn(this,void 0,void 0,function*(){return r.deleteIndex.call(this,this.vectorBucketName,t)})}index(t){return new nL(this.url,this.headers,this.vectorBucketName,t,this.fetch)}}class nL extends QI{constructor(t,r,i,o,l){super(t,r,l),this.vectorBucketName=i,this.indexName=o}putVectors(t){const r=Object.create(null,{putVectors:{get:()=>super.putVectors}});return pn(this,void 0,void 0,function*(){return r.putVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}getVectors(t){const r=Object.create(null,{getVectors:{get:()=>super.getVectors}});return pn(this,void 0,void 0,function*(){return r.getVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}listVectors(){const t=Object.create(null,{listVectors:{get:()=>super.listVectors}});return pn(this,arguments,void 0,function*(r={}){return t.listVectors.call(this,Object.assign(Object.assign({},r),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}queryVectors(t){const r=Object.create(null,{queryVectors:{get:()=>super.queryVectors}});return pn(this,void 0,void 0,function*(){return r.queryVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}deleteVectors(t){const r=Object.create(null,{deleteVectors:{get:()=>super.deleteVectors}});return pn(this,void 0,void 0,function*(){return r.deleteVectors.call(this,Object.assign(Object.assign({},t),{vectorBucketName:this.vectorBucketName,indexName:this.indexName}))})}}class iL extends HI{constructor(t,r={},i,o){super(t,r,i,o)}from(t){return new $I(this.url,this.headers,t,this.fetch)}get vectors(){return new tL(this.url+"/vector",{headers:this.headers,fetch:this.fetch})}get analytics(){return new GI(this.url+"/iceberg",this.headers,this.fetch)}}const sL="2.81.1";let _x="";typeof Deno<"u"?_x="deno":typeof document<"u"?_x="web":typeof navigator<"u"&&navigator.product==="ReactNative"?_x="react-native":_x="node";const aL={"X-Client-Info":`supabase-js-${_x}/${sL}`},oL={headers:aL},lL={schema:"public"},cL={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},uL={},dL=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),hL=()=>Headers,fL=(n,t,r)=>{const i=dL(r),o=hL();return async(l,a)=>{var p;const g=(p=await t())!==null&&p!==void 0?p:n;let w=new o(a==null?void 0:a.headers);return w.has("apikey")||w.set("apikey",n),w.has("Authorization")||w.set("Authorization",`Bearer ${g}`),i(l,Object.assign(Object.assign({},a),{headers:w}))}};function pL(n){return n.endsWith("/")?n:n+"/"}function mL(n,t){var r,i;const{db:o,auth:l,realtime:a,global:p}=n,{db:g,auth:w,realtime:j,global:S}=t,T={db:Object.assign(Object.assign({},g),o),auth:Object.assign(Object.assign({},w),l),realtime:Object.assign(Object.assign({},j),a),storage:{},global:Object.assign(Object.assign(Object.assign({},S),p),{headers:Object.assign(Object.assign({},(r=S==null?void 0:S.headers)!==null&&r!==void 0?r:{}),(i=p==null?void 0:p.headers)!==null&&i!==void 0?i:{})}),accessToken:async()=>""};return n.accessToken?T.accessToken=n.accessToken:delete T.accessToken,T}function gL(n){const t=n==null?void 0:n.trim();if(!t)throw new Error("supabaseUrl is required.");if(!t.match(/^https?:\/\//i))throw new Error("Invalid supabaseUrl: Must be a valid HTTP or HTTPS URL.");try{return new URL(pL(t))}catch{throw Error("Invalid supabaseUrl: Provided URL is malformed.")}}const IA="2.81.1",Rv=30*1e3,F2=3,Y_=F2*Rv,vL="http://localhost:9999",yL="supabase.auth.token",xL={"X-Client-Info":`gotrue-js/${IA}`},B2="X-Supabase-Api-Version",LA={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},bL=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,_L=600*1e3;class Dx extends Error{constructor(t,r,i){super(t),this.__isAuthError=!0,this.name="AuthError",this.status=r,this.code=i}}function jn(n){return typeof n=="object"&&n!==null&&"__isAuthError"in n}class wL extends Dx{constructor(t,r,i){super(t,r,i),this.name="AuthApiError",this.status=r,this.code=i}}function jL(n){return jn(n)&&n.name==="AuthApiError"}class xg extends Dx{constructor(t,r){super(t),this.name="AuthUnknownError",this.originalError=r}}class Pm extends Dx{constructor(t,r,i,o){super(t,i,o),this.name=r,this.status=i}}class Sh extends Pm{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function NL(n){return jn(n)&&n.name==="AuthSessionMissingError"}class vv extends Pm{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _1 extends Pm{constructor(t){super(t,"AuthInvalidCredentialsError",400,void 0)}}class w1 extends Pm{constructor(t,r=null){super(t,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function SL(n){return jn(n)&&n.name==="AuthImplicitGrantRedirectError"}class Q5 extends Pm{constructor(t,r=null){super(t,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=r}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class U2 extends Pm{constructor(t,r){super(t,"AuthRetryableFetchError",r,void 0)}}function Z_(n){return jn(n)&&n.name==="AuthRetryableFetchError"}class eN extends Pm{constructor(t,r,i){super(t,"AuthWeakPasswordError",r,"weak_password"),this.reasons=i}}class q2 extends Pm{constructor(t){super(t,"AuthInvalidJwtError",400,"invalid_jwt")}}const J1="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),tN=` 	
\r=`.split(""),AL=(()=>{const n=new Array(128);for(let t=0;t<n.length;t+=1)n[t]=-1;for(let t=0;t<tN.length;t+=1)n[tN[t].charCodeAt(0)]=-2;for(let t=0;t<J1.length;t+=1)n[J1[t].charCodeAt(0)]=t;return n})();function rN(n,t,r){if(n!==null)for(t.queue=t.queue<<8|n,t.queuedBits+=8;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(J1[i]),t.queuedBits-=6}else if(t.queuedBits>0)for(t.queue=t.queue<<6-t.queuedBits,t.queuedBits=6;t.queuedBits>=6;){const i=t.queue>>t.queuedBits-6&63;r(J1[i]),t.queuedBits-=6}}function MA(n,t,r){const i=AL[n];if(i>-1)for(t.queue=t.queue<<6|i,t.queuedBits+=6;t.queuedBits>=8;)r(t.queue>>t.queuedBits-8&255),t.queuedBits-=8;else{if(i===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(n)}"`)}}function nN(n){const t=[],r=a=>{t.push(String.fromCodePoint(a))},i={utf8seq:0,codepoint:0},o={queue:0,queuedBits:0},l=a=>{EL(a,i,r)};for(let a=0;a<n.length;a+=1)MA(n.charCodeAt(a),o,l);return t.join("")}function CL(n,t){if(n<=127){t(n);return}else if(n<=2047){t(192|n>>6),t(128|n&63);return}else if(n<=65535){t(224|n>>12),t(128|n>>6&63),t(128|n&63);return}else if(n<=1114111){t(240|n>>18),t(128|n>>12&63),t(128|n>>6&63),t(128|n&63);return}throw new Error(`Unrecognized Unicode codepoint: ${n.toString(16)}`)}function kL(n,t){for(let r=0;r<n.length;r+=1){let i=n.charCodeAt(r);if(i>55295&&i<=56319){const o=(i-55296)*1024&65535;i=(n.charCodeAt(r+1)-56320&65535|o)+65536,r+=1}CL(i,t)}}function EL(n,t,r){if(t.utf8seq===0){if(n<=127){r(n);return}for(let i=1;i<6;i+=1)if((n>>7-i&1)===0){t.utf8seq=i;break}if(t.utf8seq===2)t.codepoint=n&31;else if(t.utf8seq===3)t.codepoint=n&15;else if(t.utf8seq===4)t.codepoint=n&7;else throw new Error("Invalid UTF-8 sequence");t.utf8seq-=1}else if(t.utf8seq>0){if(n<=127)throw new Error("Invalid UTF-8 sequence");t.codepoint=t.codepoint<<6|n&63,t.utf8seq-=1,t.utf8seq===0&&r(t.codepoint)}}function Uv(n){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};for(let o=0;o<n.length;o+=1)MA(n.charCodeAt(o),r,i);return new Uint8Array(t)}function TL(n){const t=[];return kL(n,r=>t.push(r)),new Uint8Array(t)}function _g(n){const t=[],r={queue:0,queuedBits:0},i=o=>{t.push(o)};return n.forEach(o=>rN(o,r,i)),rN(null,r,i),t.join("")}function PL(n){return Math.round(Date.now()/1e3)+n}function RL(){return Symbol("auth-callback")}const _c=()=>typeof window<"u"&&typeof document<"u",dg={tested:!1,writable:!1},DA=()=>{if(!_c())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(dg.tested)return dg.writable;const n=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(n,n),globalThis.localStorage.removeItem(n),dg.tested=!0,dg.writable=!0}catch{dg.tested=!0,dg.writable=!1}return dg.writable};function IL(n){const t={},r=new URL(n);if(r.hash&&r.hash[0]==="#")try{new URLSearchParams(r.hash.substring(1)).forEach((o,l)=>{t[l]=o})}catch{}return r.searchParams.forEach((i,o)=>{t[o]=i}),t}const OA=n=>n?(...t)=>n(...t):(...t)=>fetch(...t),LL=n=>typeof n=="object"&&n!==null&&"status"in n&&"ok"in n&&"json"in n&&typeof n.json=="function",Iv=async(n,t,r)=>{await n.setItem(t,JSON.stringify(r))},hg=async(n,t)=>{const r=await n.getItem(t);if(!r)return null;try{return JSON.parse(r)}catch{return r}},sm=async(n,t)=>{await n.removeItem(t)};class Fb{constructor(){this.promise=new Fb.promiseConstructor((t,r)=>{this.resolve=t,this.reject=r})}}Fb.promiseConstructor=Promise;function K_(n){const t=n.split(".");if(t.length!==3)throw new q2("Invalid JWT structure");for(let i=0;i<t.length;i++)if(!bL.test(t[i]))throw new q2("JWT not in base64url format");return{header:JSON.parse(nN(t[0])),payload:JSON.parse(nN(t[1])),signature:Uv(t[2]),raw:{header:t[0],payload:t[1]}}}async function ML(n){return await new Promise(t=>{setTimeout(()=>t(null),n)})}function DL(n,t){return new Promise((i,o)=>{(async()=>{for(let l=0;l<1/0;l++)try{const a=await n(l);if(!t(l,null,a)){i(a);return}}catch(a){if(!t(l,a)){o(a);return}}})()})}function OL(n){return("0"+n.toString(16)).substr(-2)}function zL(){const t=new Uint32Array(56);if(typeof crypto>"u"){const r="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",i=r.length;let o="";for(let l=0;l<56;l++)o+=r.charAt(Math.floor(Math.random()*i));return o}return crypto.getRandomValues(t),Array.from(t,OL).join("")}async function FL(n){const r=new TextEncoder().encode(n),i=await crypto.subtle.digest("SHA-256",r),o=new Uint8Array(i);return Array.from(o).map(l=>String.fromCharCode(l)).join("")}async function BL(n){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),n;const r=await FL(n);return btoa(r).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function yv(n,t,r=!1){const i=zL();let o=i;r&&(o+="/PASSWORD_RECOVERY"),await Iv(n,`${t}-code-verifier`,o);const l=await BL(i);return[l,i===l?"plain":"s256"]}const UL=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function qL(n){const t=n.headers.get(B2);if(!t||!t.match(UL))return null;try{return new Date(`${t}T00:00:00.0Z`)}catch{return null}}function VL(n){if(!n)throw new Error("Missing exp claim");const t=Math.floor(Date.now()/1e3);if(n<=t)throw new Error("JWT has expired")}function $L(n){switch(n){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const HL=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function xv(n){if(!HL.test(n))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}function X_(){const n={};return new Proxy(n,{get:(t,r)=>{if(r==="__isUserNotAvailableProxy")return!0;if(typeof r=="symbol"){const i=r.toString();if(i==="Symbol(Symbol.toPrimitive)"||i==="Symbol(Symbol.toStringTag)"||i==="Symbol(util.inspect.custom)")return}throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Accessing the "${r}" property of the session object is not supported. Please use getUser() instead.`)},set:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Setting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)},deleteProperty:(t,r)=>{throw new Error(`@supabase/auth-js: client was created with userStorage option and there was no user stored in the user storage. Deleting the "${r}" property of the session object is not supported. Please use getUser() to fetch a user object you can manipulate.`)}})}function GL(n,t){return new Proxy(n,{get:(r,i,o)=>{if(i==="__isInsecureUserWarningProxy")return!0;if(typeof i=="symbol"){const l=i.toString();if(l==="Symbol(Symbol.toPrimitive)"||l==="Symbol(Symbol.toStringTag)"||l==="Symbol(util.inspect.custom)"||l==="Symbol(nodejs.util.inspect.custom)")return Reflect.get(r,i,o)}return!t.value&&typeof i=="string"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),t.value=!0),Reflect.get(r,i,o)}})}function iN(n){return JSON.parse(JSON.stringify(n))}const mg=n=>n.msg||n.message||n.error_description||n.error||JSON.stringify(n),WL=[502,503,504];async function sN(n){var t;if(!LL(n))throw new U2(mg(n),0);if(WL.includes(n.status))throw new U2(mg(n),n.status);let r;try{r=await n.json()}catch(l){throw new xg(mg(l),l)}let i;const o=qL(n);if(o&&o.getTime()>=LA["2024-01-01"].timestamp&&typeof r=="object"&&r&&typeof r.code=="string"?i=r.code:typeof r=="object"&&r&&typeof r.error_code=="string"&&(i=r.error_code),i){if(i==="weak_password")throw new eN(mg(r),n.status,((t=r.weak_password)===null||t===void 0?void 0:t.reasons)||[]);if(i==="session_not_found")throw new Sh}else if(typeof r=="object"&&r&&typeof r.weak_password=="object"&&r.weak_password&&Array.isArray(r.weak_password.reasons)&&r.weak_password.reasons.length&&r.weak_password.reasons.reduce((l,a)=>l&&typeof a=="string",!0))throw new eN(mg(r),n.status,r.weak_password.reasons);throw new wL(mg(r),n.status||500,i)}const YL=(n,t,r,i)=>{const o={method:n,headers:(t==null?void 0:t.headers)||{}};return n==="GET"?o:(o.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},t==null?void 0:t.headers),o.body=JSON.stringify(i),Object.assign(Object.assign({},o),r))};async function Vn(n,t,r,i){var o;const l=Object.assign({},i==null?void 0:i.headers);l[B2]||(l[B2]=LA["2024-01-01"].name),i!=null&&i.jwt&&(l.Authorization=`Bearer ${i.jwt}`);const a=(o=i==null?void 0:i.query)!==null&&o!==void 0?o:{};i!=null&&i.redirectTo&&(a.redirect_to=i.redirectTo);const p=Object.keys(a).length?"?"+new URLSearchParams(a).toString():"",g=await ZL(n,t,r+p,{headers:l,noResolveJson:i==null?void 0:i.noResolveJson},{},i==null?void 0:i.body);return i!=null&&i.xform?i==null?void 0:i.xform(g):{data:Object.assign({},g),error:null}}async function ZL(n,t,r,i,o,l){const a=YL(t,i,o,l);let p;try{p=await n(r,Object.assign({},a))}catch(g){throw console.error(g),new U2(mg(g),0)}if(p.ok||await sN(p),i!=null&&i.noResolveJson)return p;try{return await p.json()}catch(g){await sN(g)}}function Ah(n){var t;let r=null;JL(n)&&(r=Object.assign({},n),n.expires_at||(r.expires_at=PL(n.expires_in)));const i=(t=n.user)!==null&&t!==void 0?t:n;return{data:{session:r,user:i},error:null}}function aN(n){const t=Ah(n);return!t.error&&n.weak_password&&typeof n.weak_password=="object"&&Array.isArray(n.weak_password.reasons)&&n.weak_password.reasons.length&&n.weak_password.message&&typeof n.weak_password.message=="string"&&n.weak_password.reasons.reduce((r,i)=>r&&typeof i=="string",!0)&&(t.data.weak_password=n.weak_password),t}function hm(n){var t;return{data:{user:(t=n.user)!==null&&t!==void 0?t:n},error:null}}function KL(n){return{data:n,error:null}}function XL(n){const{action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l}=n,a=Tm(n,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),p={action_link:t,email_otp:r,hashed_token:i,redirect_to:o,verification_type:l},g=Object.assign({},a);return{data:{properties:p,user:g},error:null}}function oN(n){return n}function JL(n){return n.access_token&&n.refresh_token&&n.expires_in}const J_=["global","local","others"];class QL{constructor({url:t="",headers:r={},fetch:i}){this.url=t,this.headers=r,this.fetch=OA(i),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)},this.oauth={listClients:this._listOAuthClients.bind(this),createClient:this._createOAuthClient.bind(this),getClient:this._getOAuthClient.bind(this),updateClient:this._updateOAuthClient.bind(this),deleteClient:this._deleteOAuthClient.bind(this),regenerateClientSecret:this._regenerateOAuthClientSecret.bind(this)}}async signOut(t,r=J_[0]){if(J_.indexOf(r)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${J_.join(", ")}`);try{return await Vn(this.fetch,"POST",`${this.url}/logout?scope=${r}`,{headers:this.headers,jwt:t,noResolveJson:!0}),{data:null,error:null}}catch(i){if(jn(i))return{data:null,error:i};throw i}}async inviteUserByEmail(t,r={}){try{return await Vn(this.fetch,"POST",`${this.url}/invite`,{body:{email:t,data:r.data},headers:this.headers,redirectTo:r.redirectTo,xform:hm})}catch(i){if(jn(i))return{data:{user:null},error:i};throw i}}async generateLink(t){try{const{options:r}=t,i=Tm(t,["options"]),o=Object.assign(Object.assign({},i),r);return"newEmail"in i&&(o.new_email=i==null?void 0:i.newEmail,delete o.newEmail),await Vn(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:o,headers:this.headers,xform:XL,redirectTo:r==null?void 0:r.redirectTo})}catch(r){if(jn(r))return{data:{properties:null,user:null},error:r};throw r}}async createUser(t){try{return await Vn(this.fetch,"POST",`${this.url}/admin/users`,{body:t,headers:this.headers,xform:hm})}catch(r){if(jn(r))return{data:{user:null},error:r};throw r}}async listUsers(t){var r,i,o,l,a,p,g;try{const w={nextPage:null,lastPage:0,total:0},j=await Vn(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:oN});if(j.error)throw j.error;const S=await j.json(),T=(a=j.headers.get("x-total-count"))!==null&&a!==void 0?a:0,E=(g=(p=j.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(O=>{const R=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(O.split(";")[1].split("=")[1]);w[`${F}Page`]=R}),w.total=parseInt(T)),{data:Object.assign(Object.assign({},S),w),error:null}}catch(w){if(jn(w))return{data:{users:[]},error:w};throw w}}async getUserById(t){xv(t);try{return await Vn(this.fetch,"GET",`${this.url}/admin/users/${t}`,{headers:this.headers,xform:hm})}catch(r){if(jn(r))return{data:{user:null},error:r};throw r}}async updateUserById(t,r){xv(t);try{return await Vn(this.fetch,"PUT",`${this.url}/admin/users/${t}`,{body:r,headers:this.headers,xform:hm})}catch(i){if(jn(i))return{data:{user:null},error:i};throw i}}async deleteUser(t,r=!1){xv(t);try{return await Vn(this.fetch,"DELETE",`${this.url}/admin/users/${t}`,{headers:this.headers,body:{should_soft_delete:r},xform:hm})}catch(i){if(jn(i))return{data:{user:null},error:i};throw i}}async _listFactors(t){xv(t.userId);try{const{data:r,error:i}=await Vn(this.fetch,"GET",`${this.url}/admin/users/${t.userId}/factors`,{headers:this.headers,xform:o=>({data:{factors:o},error:null})});return{data:r,error:i}}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _deleteFactor(t){xv(t.userId),xv(t.id);try{return{data:await Vn(this.fetch,"DELETE",`${this.url}/admin/users/${t.userId}/factors/${t.id}`,{headers:this.headers}),error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _listOAuthClients(t){var r,i,o,l,a,p,g;try{const w={nextPage:null,lastPage:0,total:0},j=await Vn(this.fetch,"GET",`${this.url}/admin/oauth/clients`,{headers:this.headers,noResolveJson:!0,query:{page:(i=(r=t==null?void 0:t.page)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:"",per_page:(l=(o=t==null?void 0:t.perPage)===null||o===void 0?void 0:o.toString())!==null&&l!==void 0?l:""},xform:oN});if(j.error)throw j.error;const S=await j.json(),T=(a=j.headers.get("x-total-count"))!==null&&a!==void 0?a:0,E=(g=(p=j.headers.get("link"))===null||p===void 0?void 0:p.split(","))!==null&&g!==void 0?g:[];return E.length>0&&(E.forEach(O=>{const R=parseInt(O.split(";")[0].split("=")[1].substring(0,1)),F=JSON.parse(O.split(";")[1].split("=")[1]);w[`${F}Page`]=R}),w.total=parseInt(T)),{data:Object.assign(Object.assign({},S),w),error:null}}catch(w){if(jn(w))return{data:{clients:[]},error:w};throw w}}async _createOAuthClient(t){try{return await Vn(this.fetch,"POST",`${this.url}/admin/oauth/clients`,{body:t,headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _getOAuthClient(t){try{return await Vn(this.fetch,"GET",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _updateOAuthClient(t,r){try{return await Vn(this.fetch,"PUT",`${this.url}/admin/oauth/clients/${t}`,{body:r,headers:this.headers,xform:i=>({data:i,error:null})})}catch(i){if(jn(i))return{data:null,error:i};throw i}}async _deleteOAuthClient(t){try{return await Vn(this.fetch,"DELETE",`${this.url}/admin/oauth/clients/${t}`,{headers:this.headers,noResolveJson:!0}),{data:null,error:null}}catch(r){if(jn(r))return{data:null,error:r};throw r}}async _regenerateOAuthClientSecret(t){try{return await Vn(this.fetch,"POST",`${this.url}/admin/oauth/clients/${t}/regenerate_secret`,{headers:this.headers,xform:r=>({data:r,error:null})})}catch(r){if(jn(r))return{data:null,error:r};throw r}}}function lN(n={}){return{getItem:t=>n[t]||null,setItem:(t,r)=>{n[t]=r},removeItem:t=>{delete n[t]}}}const bv={debug:!!(globalThis&&DA()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class zA extends Error{constructor(t){super(t),this.isAcquireTimeout=!0}}class eM extends zA{}async function tM(n,t,r){bv.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",n,t);const i=new globalThis.AbortController;return t>0&&setTimeout(()=>{i.abort(),bv.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",n)},t),await Promise.resolve().then(()=>globalThis.navigator.locks.request(n,t===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:i.signal},async o=>{if(o){bv.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",n,o.name);try{return await r()}finally{bv.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",n,o.name)}}else{if(t===0)throw bv.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",n),new eM(`Acquiring an exclusive Navigator LockManager lock "${n}" immediately failed`);if(bv.debug)try{const l=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(l,null,"  "))}catch(l){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",l)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await r()}}))}function rM(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}function FA(n){if(!/^0x[a-fA-F0-9]{40}$/.test(n))throw new Error(`@supabase/auth-js: Address "${n}" is invalid.`);return n.toLowerCase()}function nM(n){return parseInt(n,16)}function iM(n){const t=new TextEncoder().encode(n);return"0x"+Array.from(t,i=>i.toString(16).padStart(2,"0")).join("")}function sM(n){var t;const{chainId:r,domain:i,expirationTime:o,issuedAt:l=new Date,nonce:a,notBefore:p,requestId:g,resources:w,scheme:j,uri:S,version:T}=n;{if(!Number.isInteger(r))throw new Error(`@supabase/auth-js: Invalid SIWE message field "chainId". Chain ID must be a EIP-155 chain ID. Provided value: ${r}`);if(!i)throw new Error('@supabase/auth-js: Invalid SIWE message field "domain". Domain must be provided.');if(a&&a.length<8)throw new Error(`@supabase/auth-js: Invalid SIWE message field "nonce". Nonce must be at least 8 characters. Provided value: ${a}`);if(!S)throw new Error('@supabase/auth-js: Invalid SIWE message field "uri". URI must be provided.');if(T!=="1")throw new Error(`@supabase/auth-js: Invalid SIWE message field "version". Version must be '1'. Provided value: ${T}`);if(!((t=n.statement)===null||t===void 0)&&t.includes(`
`))throw new Error(`@supabase/auth-js: Invalid SIWE message field "statement". Statement must not include '\\n'. Provided value: ${n.statement}`)}const E=FA(n.address),O=j?`${j}://${i}`:i,R=n.statement?`${n.statement}
`:"",F=`${O} wants you to sign in with your Ethereum account:
${E}

${R}`;let B=`URI: ${S}
Version: ${T}
Chain ID: ${r}${a?`
Nonce: ${a}`:""}
Issued At: ${l.toISOString()}`;if(o&&(B+=`
Expiration Time: ${o.toISOString()}`),p&&(B+=`
Not Before: ${p.toISOString()}`),g&&(B+=`
Request ID: ${g}`),w){let G=`
Resources:`;for(const z of w){if(!z||typeof z!="string")throw new Error(`@supabase/auth-js: Invalid SIWE message field "resources". Every resource must be a valid string. Provided value: ${z}`);G+=`
- ${z}`}B+=G}return`${F}
${B}`}class gl extends Error{constructor({message:t,code:r,cause:i,name:o}){var l;super(t,{cause:i}),this.__isWebAuthnError=!0,this.name=(l=o??(i instanceof Error?i.name:void 0))!==null&&l!==void 0?l:"Unknown Error",this.code=r}}class Q1 extends gl{constructor(t,r){super({code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:r,message:t}),this.name="WebAuthnUnknownError",this.originalError=r}}function aM({error:n,options:t}){var r,i,o;const{publicKey:l}=t;if(!l)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gl({message:"Registration ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else if(n.name==="ConstraintError"){if(((r=l.authenticatorSelection)===null||r===void 0?void 0:r.requireResidentKey)===!0)return new gl({message:"Discoverable credentials were required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_DISCOVERABLE_CREDENTIAL_SUPPORT",cause:n});if(t.mediation==="conditional"&&((i=l.authenticatorSelection)===null||i===void 0?void 0:i.userVerification)==="required")return new gl({message:"User verification was required during automatic registration but it could not be performed",code:"ERROR_AUTO_REGISTER_USER_VERIFICATION_FAILURE",cause:n});if(((o=l.authenticatorSelection)===null||o===void 0?void 0:o.userVerification)==="required")return new gl({message:"User verification was required but no available authenticator supported it",code:"ERROR_AUTHENTICATOR_MISSING_USER_VERIFICATION_SUPPORT",cause:n})}else{if(n.name==="InvalidStateError")return new gl({message:"The authenticator was previously registered",code:"ERROR_AUTHENTICATOR_PREVIOUSLY_REGISTERED",cause:n});if(n.name==="NotAllowedError")return new gl({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="NotSupportedError")return l.pubKeyCredParams.filter(p=>p.type==="public-key").length===0?new gl({message:'No entry in pubKeyCredParams was of type "public-key"',code:"ERROR_MALFORMED_PUBKEYCREDPARAMS",cause:n}):new gl({message:"No available authenticator supported any of the specified pubKeyCredParams algorithms",code:"ERROR_AUTHENTICATOR_NO_SUPPORTED_PUBKEYCREDPARAMS_ALG",cause:n});if(n.name==="SecurityError"){const a=window.location.hostname;if(BA(a)){if(l.rp.id!==a)return new gl({message:`The RP ID "${l.rp.id}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new gl({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="TypeError"){if(l.user.id.byteLength<1||l.user.id.byteLength>64)return new gl({message:"User ID was not between 1 and 64 characters",code:"ERROR_INVALID_USER_ID_LENGTH",cause:n})}else if(n.name==="UnknownError")return new gl({message:"The authenticator was unable to process the specified options, or could not create a new credential",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new gl({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}function oM({error:n,options:t}){const{publicKey:r}=t;if(!r)throw Error("options was missing required publicKey property");if(n.name==="AbortError"){if(t.signal instanceof AbortSignal)return new gl({message:"Authentication ceremony was sent an abort signal",code:"ERROR_CEREMONY_ABORTED",cause:n})}else{if(n.name==="NotAllowedError")return new gl({message:n.message,code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n});if(n.name==="SecurityError"){const i=window.location.hostname;if(BA(i)){if(r.rpId!==i)return new gl({message:`The RP ID "${r.rpId}" is invalid for this domain`,code:"ERROR_INVALID_RP_ID",cause:n})}else return new gl({message:`${window.location.hostname} is an invalid domain`,code:"ERROR_INVALID_DOMAIN",cause:n})}else if(n.name==="UnknownError")return new gl({message:"The authenticator was unable to process the specified options, or could not create a new assertion signature",code:"ERROR_AUTHENTICATOR_GENERAL_ERROR",cause:n})}return new gl({message:"a Non-Webauthn related error has occurred",code:"ERROR_PASSTHROUGH_SEE_CAUSE_PROPERTY",cause:n})}class lM{createNewAbortSignal(){if(this.controller){const r=new Error("Cancelling existing WebAuthn API call for new one");r.name="AbortError",this.controller.abort(r)}const t=new AbortController;return this.controller=t,t.signal}cancelCeremony(){if(this.controller){const t=new Error("Manually cancelling existing WebAuthn API call");t.name="AbortError",this.controller.abort(t),this.controller=void 0}}}const cM=new lM;function uM(n){if(!n)throw new Error("Credential creation options are required");if(typeof PublicKeyCredential<"u"&&"parseCreationOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseCreationOptionsFromJSON=="function")return PublicKeyCredential.parseCreationOptionsFromJSON(n);const{challenge:t,user:r,excludeCredentials:i}=n,o=Tm(n,["challenge","user","excludeCredentials"]),l=Uv(t).buffer,a=Object.assign(Object.assign({},r),{id:Uv(r.id).buffer}),p=Object.assign(Object.assign({},o),{challenge:l,user:a});if(i&&i.length>0){p.excludeCredentials=new Array(i.length);for(let g=0;g<i.length;g++){const w=i[g];p.excludeCredentials[g]=Object.assign(Object.assign({},w),{id:Uv(w.id).buffer,type:w.type||"public-key",transports:w.transports})}}return p}function dM(n){if(!n)throw new Error("Credential request options are required");if(typeof PublicKeyCredential<"u"&&"parseRequestOptionsFromJSON"in PublicKeyCredential&&typeof PublicKeyCredential.parseRequestOptionsFromJSON=="function")return PublicKeyCredential.parseRequestOptionsFromJSON(n);const{challenge:t,allowCredentials:r}=n,i=Tm(n,["challenge","allowCredentials"]),o=Uv(t).buffer,l=Object.assign(Object.assign({},i),{challenge:o});if(r&&r.length>0){l.allowCredentials=new Array(r.length);for(let a=0;a<r.length;a++){const p=r[a];l.allowCredentials[a]=Object.assign(Object.assign({},p),{id:Uv(p.id).buffer,type:p.type||"public-key",transports:p.transports})}}return l}function hM(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n;return{id:n.id,rawId:n.id,response:{attestationObject:_g(new Uint8Array(n.response.attestationObject)),clientDataJSON:_g(new Uint8Array(n.response.clientDataJSON))},type:"public-key",clientExtensionResults:n.getClientExtensionResults(),authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function fM(n){var t;if("toJSON"in n&&typeof n.toJSON=="function")return n.toJSON();const r=n,i=n.getClientExtensionResults(),o=n.response;return{id:n.id,rawId:n.id,response:{authenticatorData:_g(new Uint8Array(o.authenticatorData)),clientDataJSON:_g(new Uint8Array(o.clientDataJSON)),signature:_g(new Uint8Array(o.signature)),userHandle:o.userHandle?_g(new Uint8Array(o.userHandle)):void 0},type:"public-key",clientExtensionResults:i,authenticatorAttachment:(t=r.authenticatorAttachment)!==null&&t!==void 0?t:void 0}}function BA(n){return n==="localhost"||/^([a-z0-9]+(-[a-z0-9]+)*\.)+[a-z]{2,}$/i.test(n)}function cN(){var n,t;return!!(_c()&&"PublicKeyCredential"in window&&window.PublicKeyCredential&&"credentials"in navigator&&typeof((n=navigator==null?void 0:navigator.credentials)===null||n===void 0?void 0:n.create)=="function"&&typeof((t=navigator==null?void 0:navigator.credentials)===null||t===void 0?void 0:t.get)=="function")}async function pM(n){try{const t=await navigator.credentials.create(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Q1("Browser returned unexpected credential type",t)}:{data:null,error:new Q1("Empty credential response",t)}}catch(t){return{data:null,error:aM({error:t,options:n})}}}async function mM(n){try{const t=await navigator.credentials.get(n);return t?t instanceof PublicKeyCredential?{data:t,error:null}:{data:null,error:new Q1("Browser returned unexpected credential type",t)}:{data:null,error:new Q1("Empty credential response",t)}}catch(t){return{data:null,error:oM({error:t,options:n})}}}const gM={hints:["security-key"],authenticatorSelection:{authenticatorAttachment:"cross-platform",requireResidentKey:!1,userVerification:"preferred",residentKey:"discouraged"},attestation:"direct"},vM={userVerification:"preferred",hints:["security-key"],attestation:"direct"};function eb(...n){const t=o=>o!==null&&typeof o=="object"&&!Array.isArray(o),r=o=>o instanceof ArrayBuffer||ArrayBuffer.isView(o),i={};for(const o of n)if(o)for(const l in o){const a=o[l];if(a!==void 0)if(Array.isArray(a))i[l]=a;else if(r(a))i[l]=a;else if(t(a)){const p=i[l];t(p)?i[l]=eb(p,a):i[l]=eb(a)}else i[l]=a}return i}function yM(n,t){return eb(gM,n,t||{})}function xM(n,t){return eb(vM,n,t||{})}class bM{constructor(t){this.client=t,this.enroll=this._enroll.bind(this),this.challenge=this._challenge.bind(this),this.verify=this._verify.bind(this),this.authenticate=this._authenticate.bind(this),this.register=this._register.bind(this)}async _enroll(t){return this.client.mfa.enroll(Object.assign(Object.assign({},t),{factorType:"webauthn"}))}async _challenge({factorId:t,webauthn:r,friendlyName:i,signal:o},l){try{const{data:a,error:p}=await this.client.mfa.challenge({factorId:t,webauthn:r});if(!a)return{data:null,error:p};const g=o??cM.createNewAbortSignal();if(a.webauthn.type==="create"){const{user:w}=a.webauthn.credential_options.publicKey;w.name||(w.name=`${w.id}:${i}`),w.displayName||(w.displayName=w.name)}switch(a.webauthn.type){case"create":{const w=yM(a.webauthn.credential_options.publicKey,l==null?void 0:l.create),{data:j,error:S}=await pM({publicKey:w,signal:g});return j?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:j}},error:null}:{data:null,error:S}}case"request":{const w=xM(a.webauthn.credential_options.publicKey,l==null?void 0:l.request),{data:j,error:S}=await mM(Object.assign(Object.assign({},a.webauthn.credential_options),{publicKey:w,signal:g}));return j?{data:{factorId:t,challengeId:a.id,webauthn:{type:a.webauthn.type,credential_response:j}},error:null}:{data:null,error:S}}}}catch(a){return jn(a)?{data:null,error:a}:{data:null,error:new xg("Unexpected error in challenge",a)}}}async _verify({challengeId:t,factorId:r,webauthn:i}){return this.client.mfa.verify({factorId:r,challengeId:t,webauthn:i})}async _authenticate({factorId:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!r)return{data:null,error:new Dx("rpId is required for WebAuthn authentication")};try{if(!cN())return{data:null,error:new xg("Browser does not support WebAuthn",null)};const{data:a,error:p}=await this.challenge({factorId:t,webauthn:{rpId:r,rpOrigins:i},signal:o},{request:l});if(!a)return{data:null,error:p};const{webauthn:g}=a;return this._verify({factorId:t,challengeId:a.challengeId,webauthn:{type:g.type,rpId:r,rpOrigins:i,credential_response:g.credential_response}})}catch(a){return jn(a)?{data:null,error:a}:{data:null,error:new xg("Unexpected error in authenticate",a)}}}async _register({friendlyName:t,webauthn:{rpId:r=typeof window<"u"?window.location.hostname:void 0,rpOrigins:i=typeof window<"u"?[window.location.origin]:void 0,signal:o}={}},l){if(!r)return{data:null,error:new Dx("rpId is required for WebAuthn registration")};try{if(!cN())return{data:null,error:new xg("Browser does not support WebAuthn",null)};const{data:a,error:p}=await this._enroll({friendlyName:t});if(!a)return await this.client.mfa.listFactors().then(j=>{var S;return(S=j.data)===null||S===void 0?void 0:S.all.find(T=>T.factor_type==="webauthn"&&T.friendly_name===t&&T.status!=="unverified")}).then(j=>j?this.client.mfa.unenroll({factorId:j==null?void 0:j.id}):void 0),{data:null,error:p};const{data:g,error:w}=await this._challenge({factorId:a.id,friendlyName:a.friendly_name,webauthn:{rpId:r,rpOrigins:i},signal:o},{create:l});return g?this._verify({factorId:a.id,challengeId:g.challengeId,webauthn:{rpId:r,rpOrigins:i,type:g.webauthn.type,credential_response:g.webauthn.credential_response}}):{data:null,error:w}}catch(a){return jn(a)?{data:null,error:a}:{data:null,error:new xg("Unexpected error in register",a)}}}}rM();const _M={url:vL,storageKey:yL,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:xL,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1,throwOnError:!1};async function uN(n,t,r){return await r()}const _v={};class Ox{get jwks(){var t,r;return(r=(t=_v[this.storageKey])===null||t===void 0?void 0:t.jwks)!==null&&r!==void 0?r:{keys:[]}}set jwks(t){_v[this.storageKey]=Object.assign(Object.assign({},_v[this.storageKey]),{jwks:t})}get jwks_cached_at(){var t,r;return(r=(t=_v[this.storageKey])===null||t===void 0?void 0:t.cachedAt)!==null&&r!==void 0?r:Number.MIN_SAFE_INTEGER}set jwks_cached_at(t){_v[this.storageKey]=Object.assign(Object.assign({},_v[this.storageKey]),{cachedAt:t})}constructor(t){var r,i,o;this.userStorage=null,this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log;const l=Object.assign(Object.assign({},_M),t);if(this.storageKey=l.storageKey,this.instanceID=(r=Ox.nextInstanceID[this.storageKey])!==null&&r!==void 0?r:0,Ox.nextInstanceID[this.storageKey]=this.instanceID+1,this.logDebugMessages=!!l.debug,typeof l.debug=="function"&&(this.logger=l.debug),this.instanceID>0&&_c()){const a=`${this._logPrefix()} Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.`;console.warn(a),this.logDebugMessages&&console.trace(a)}if(this.persistSession=l.persistSession,this.autoRefreshToken=l.autoRefreshToken,this.admin=new QL({url:l.url,headers:l.headers,fetch:l.fetch}),this.url=l.url,this.headers=l.headers,this.fetch=OA(l.fetch),this.lock=l.lock||uN,this.detectSessionInUrl=l.detectSessionInUrl,this.flowType=l.flowType,this.hasCustomAuthorizationHeader=l.hasCustomAuthorizationHeader,this.throwOnError=l.throwOnError,l.lock?this.lock=l.lock:_c()&&(!((i=globalThis==null?void 0:globalThis.navigator)===null||i===void 0)&&i.locks)?this.lock=tM:this.lock=uN,this.jwks||(this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER),this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this),webauthn:new bM(this)},this.oauth={getAuthorizationDetails:this._getAuthorizationDetails.bind(this),approveAuthorization:this._approveAuthorization.bind(this),denyAuthorization:this._denyAuthorization.bind(this)},this.persistSession?(l.storage?this.storage=l.storage:DA()?this.storage=globalThis.localStorage:(this.memoryStorage={},this.storage=lN(this.memoryStorage)),l.userStorage&&(this.userStorage=l.userStorage)):(this.memoryStorage={},this.storage=lN(this.memoryStorage)),_c()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(o=this.broadcastChannel)===null||o===void 0||o.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}isThrowOnErrorEnabled(){return this.throwOnError}_returnResult(t){if(this.throwOnError&&t&&t.error)throw t.error;return t}_logPrefix(){return`GoTrueClient@${this.storageKey}:${this.instanceID} (${IA}) ${new Date().toISOString()}`}_debug(...t){return this.logDebugMessages&&this.logger(this._logPrefix(),...t),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var t;try{let r={},i="none";if(_c()&&(r=IL(window.location.href),this._isImplicitGrantCallback(r)?i="implicit":await this._isPKCECallback(r)&&(i="pkce")),_c()&&this.detectSessionInUrl&&i!=="none"){const{data:o,error:l}=await this._getSessionFromURL(r,i);if(l){if(this._debug("#_initialize()","error detecting session from URL",l),SL(l)){const g=(t=l.details)===null||t===void 0?void 0:t.code;if(g==="identity_already_exists"||g==="identity_not_found"||g==="single_identity_not_deletable")return{error:l}}return await this._removeSession(),{error:l}}const{session:a,redirectType:p}=o;return this._debug("#_initialize()","detected session in URL",a,"redirect type",p),await this._saveSession(a),setTimeout(async()=>{p==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",a):await this._notifyAllSubscribers("SIGNED_IN",a)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(r){return jn(r)?this._returnResult({error:r}):this._returnResult({error:new xg("Unexpected error during initialization",r)})}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(t){var r,i,o;try{const l=await Vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(i=(r=t==null?void 0:t.options)===null||r===void 0?void 0:r.data)!==null&&i!==void 0?i:{},gotrue_meta_security:{captcha_token:(o=t==null?void 0:t.options)===null||o===void 0?void 0:o.captchaToken}},xform:Ah}),{data:a,error:p}=l;if(p||!a)return this._returnResult({data:{user:null,session:null},error:p});const g=a.session,w=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(l){if(jn(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signUp(t){var r,i,o;try{let l;if("email"in t){const{email:j,password:S,options:T}=t;let E=null,O=null;this.flowType==="pkce"&&([E,O]=await yv(this.storage,this.storageKey)),l=await Vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:T==null?void 0:T.emailRedirectTo,body:{email:j,password:S,data:(r=T==null?void 0:T.data)!==null&&r!==void 0?r:{},gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken},code_challenge:E,code_challenge_method:O},xform:Ah})}else if("phone"in t){const{phone:j,password:S,options:T}=t;l=await Vn(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:j,password:S,data:(i=T==null?void 0:T.data)!==null&&i!==void 0?i:{},channel:(o=T==null?void 0:T.channel)!==null&&o!==void 0?o:"sms",gotrue_meta_security:{captcha_token:T==null?void 0:T.captchaToken}},xform:Ah})}else throw new _1("You must provide either an email or phone number and a password");const{data:a,error:p}=l;if(p||!a)return this._returnResult({data:{user:null,session:null},error:p});const g=a.session,w=a.user;return a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(l){if(jn(l))return this._returnResult({data:{user:null,session:null},error:l});throw l}}async signInWithPassword(t){try{let r;if("email"in t){const{email:l,password:a,options:p}=t;r=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:l,password:a,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:aN})}else if("phone"in t){const{phone:l,password:a,options:p}=t;r=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:l,password:a,gotrue_meta_security:{captcha_token:p==null?void 0:p.captchaToken}},xform:aN})}else throw new _1("You must provide either an email or phone number and a password");const{data:i,error:o}=r;if(o)return this._returnResult({data:{user:null,session:null},error:o});if(!i||!i.session||!i.user){const l=new vv;return this._returnResult({data:{user:null,session:null},error:l})}return i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),this._returnResult({data:Object.assign({user:i.user,session:i.session},i.weak_password?{weakPassword:i.weak_password}:null),error:o})}catch(r){if(jn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOAuth(t){var r,i,o,l;return await this._handleProviderSignIn(t.provider,{redirectTo:(r=t.options)===null||r===void 0?void 0:r.redirectTo,scopes:(i=t.options)===null||i===void 0?void 0:i.scopes,queryParams:(o=t.options)===null||o===void 0?void 0:o.queryParams,skipBrowserRedirect:(l=t.options)===null||l===void 0?void 0:l.skipBrowserRedirect})}async exchangeCodeForSession(t){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(t))}async signInWithWeb3(t){const{chain:r}=t;switch(r){case"ethereum":return await this.signInWithEthereum(t);case"solana":return await this.signInWithSolana(t);default:throw new Error(`@supabase/auth-js: Unsupported chain "${r}"`)}}async signInWithEthereum(t){var r,i,o,l,a,p,g,w,j,S,T;let E,O;if("message"in t)E=t.message,O=t.signature;else{const{chain:R,wallet:F,statement:B,options:G}=t;let z;if(_c())if(typeof F=="object")z=F;else{const Se=window;if("ethereum"in Se&&typeof Se.ethereum=="object"&&"request"in Se.ethereum&&typeof Se.ethereum.request=="function")z=Se.ethereum;else throw new Error("@supabase/auth-js: No compatible Ethereum wallet interface on the window object (window.ethereum) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'ethereum', wallet: resolvedUserWallet }) instead.")}else{if(typeof F!="object"||!(G!=null&&G.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");z=F}const ee=new URL((r=G==null?void 0:G.url)!==null&&r!==void 0?r:window.location.href),ie=await z.request({method:"eth_requestAccounts"}).then(Se=>Se).catch(()=>{throw new Error("@supabase/auth-js: Wallet method eth_requestAccounts is missing or invalid")});if(!ie||ie.length===0)throw new Error("@supabase/auth-js: No accounts available. Please ensure the wallet is connected.");const ge=FA(ie[0]);let K=(i=G==null?void 0:G.signInWithEthereum)===null||i===void 0?void 0:i.chainId;if(!K){const Se=await z.request({method:"eth_chainId"});K=nM(Se)}const J={domain:ee.host,address:ge,statement:B,uri:ee.href,version:"1",chainId:K,nonce:(o=G==null?void 0:G.signInWithEthereum)===null||o===void 0?void 0:o.nonce,issuedAt:(a=(l=G==null?void 0:G.signInWithEthereum)===null||l===void 0?void 0:l.issuedAt)!==null&&a!==void 0?a:new Date,expirationTime:(p=G==null?void 0:G.signInWithEthereum)===null||p===void 0?void 0:p.expirationTime,notBefore:(g=G==null?void 0:G.signInWithEthereum)===null||g===void 0?void 0:g.notBefore,requestId:(w=G==null?void 0:G.signInWithEthereum)===null||w===void 0?void 0:w.requestId,resources:(j=G==null?void 0:G.signInWithEthereum)===null||j===void 0?void 0:j.resources};E=sM(J),O=await z.request({method:"personal_sign",params:[iM(E),ge]})}try{const{data:R,error:F}=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"ethereum",message:E,signature:O},!((S=t.options)===null||S===void 0)&&S.captchaToken?{gotrue_meta_security:{captcha_token:(T=t.options)===null||T===void 0?void 0:T.captchaToken}}:null),xform:Ah});if(F)throw F;if(!R||!R.session||!R.user){const B=new vv;return this._returnResult({data:{user:null,session:null},error:B})}return R.session&&(await this._saveSession(R.session),await this._notifyAllSubscribers("SIGNED_IN",R.session)),this._returnResult({data:Object.assign({},R),error:F})}catch(R){if(jn(R))return this._returnResult({data:{user:null,session:null},error:R});throw R}}async signInWithSolana(t){var r,i,o,l,a,p,g,w,j,S,T,E;let O,R;if("message"in t)O=t.message,R=t.signature;else{const{chain:F,wallet:B,statement:G,options:z}=t;let ee;if(_c())if(typeof B=="object")ee=B;else{const ge=window;if("solana"in ge&&typeof ge.solana=="object"&&("signIn"in ge.solana&&typeof ge.solana.signIn=="function"||"signMessage"in ge.solana&&typeof ge.solana.signMessage=="function"))ee=ge.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof B!="object"||!(z!=null&&z.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");ee=B}const ie=new URL((r=z==null?void 0:z.url)!==null&&r!==void 0?r:window.location.href);if("signIn"in ee&&ee.signIn){const ge=await ee.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},z==null?void 0:z.signInWithSolana),{version:"1",domain:ie.host,uri:ie.href}),G?{statement:G}:null));let K;if(Array.isArray(ge)&&ge[0]&&typeof ge[0]=="object")K=ge[0];else if(ge&&typeof ge=="object"&&"signedMessage"in ge&&"signature"in ge)K=ge;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in K&&"signature"in K&&(typeof K.signedMessage=="string"||K.signedMessage instanceof Uint8Array)&&K.signature instanceof Uint8Array)O=typeof K.signedMessage=="string"?K.signedMessage:new TextDecoder().decode(K.signedMessage),R=K.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in ee)||typeof ee.signMessage!="function"||!("publicKey"in ee)||typeof ee!="object"||!ee.publicKey||!("toBase58"in ee.publicKey)||typeof ee.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");O=[`${ie.host} wants you to sign in with your Solana account:`,ee.publicKey.toBase58(),...G?["",G,""]:[""],"Version: 1",`URI: ${ie.href}`,`Issued At: ${(o=(i=z==null?void 0:z.signInWithSolana)===null||i===void 0?void 0:i.issuedAt)!==null&&o!==void 0?o:new Date().toISOString()}`,...!((l=z==null?void 0:z.signInWithSolana)===null||l===void 0)&&l.notBefore?[`Not Before: ${z.signInWithSolana.notBefore}`]:[],...!((a=z==null?void 0:z.signInWithSolana)===null||a===void 0)&&a.expirationTime?[`Expiration Time: ${z.signInWithSolana.expirationTime}`]:[],...!((p=z==null?void 0:z.signInWithSolana)===null||p===void 0)&&p.chainId?[`Chain ID: ${z.signInWithSolana.chainId}`]:[],...!((g=z==null?void 0:z.signInWithSolana)===null||g===void 0)&&g.nonce?[`Nonce: ${z.signInWithSolana.nonce}`]:[],...!((w=z==null?void 0:z.signInWithSolana)===null||w===void 0)&&w.requestId?[`Request ID: ${z.signInWithSolana.requestId}`]:[],...!((S=(j=z==null?void 0:z.signInWithSolana)===null||j===void 0?void 0:j.resources)===null||S===void 0)&&S.length?["Resources",...z.signInWithSolana.resources.map(K=>`- ${K}`)]:[]].join(`
`);const ge=await ee.signMessage(new TextEncoder().encode(O),"utf8");if(!ge||!(ge instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");R=ge}}try{const{data:F,error:B}=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:O,signature:_g(R)},!((T=t.options)===null||T===void 0)&&T.captchaToken?{gotrue_meta_security:{captcha_token:(E=t.options)===null||E===void 0?void 0:E.captchaToken}}:null),xform:Ah});if(B)throw B;if(!F||!F.session||!F.user){const G=new vv;return this._returnResult({data:{user:null,session:null},error:G})}return F.session&&(await this._saveSession(F.session),await this._notifyAllSubscribers("SIGNED_IN",F.session)),this._returnResult({data:Object.assign({},F),error:B})}catch(F){if(jn(F))return this._returnResult({data:{user:null,session:null},error:F});throw F}}async _exchangeCodeForSession(t){const r=await hg(this.storage,`${this.storageKey}-code-verifier`),[i,o]=(r??"").split("/");try{const{data:l,error:a}=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:t,code_verifier:i},xform:Ah});if(await sm(this.storage,`${this.storageKey}-code-verifier`),a)throw a;if(!l||!l.session||!l.user){const p=new vv;return this._returnResult({data:{user:null,session:null,redirectType:null},error:p})}return l.session&&(await this._saveSession(l.session),await this._notifyAllSubscribers("SIGNED_IN",l.session)),this._returnResult({data:Object.assign(Object.assign({},l),{redirectType:o??null}),error:a})}catch(l){if(jn(l))return this._returnResult({data:{user:null,session:null,redirectType:null},error:l});throw l}}async signInWithIdToken(t){try{const{options:r,provider:i,token:o,access_token:l,nonce:a}=t,p=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:i,id_token:o,access_token:l,nonce:a,gotrue_meta_security:{captcha_token:r==null?void 0:r.captchaToken}},xform:Ah}),{data:g,error:w}=p;if(w)return this._returnResult({data:{user:null,session:null},error:w});if(!g||!g.session||!g.user){const j=new vv;return this._returnResult({data:{user:null,session:null},error:j})}return g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),this._returnResult({data:g,error:w})}catch(r){if(jn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async signInWithOtp(t){var r,i,o,l,a;try{if("email"in t){const{email:p,options:g}=t;let w=null,j=null;this.flowType==="pkce"&&([w,j]=await yv(this.storage,this.storageKey));const{error:S}=await Vn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:p,data:(r=g==null?void 0:g.data)!==null&&r!==void 0?r:{},create_user:(i=g==null?void 0:g.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},code_challenge:w,code_challenge_method:j},redirectTo:g==null?void 0:g.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:S})}if("phone"in t){const{phone:p,options:g}=t,{data:w,error:j}=await Vn(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:p,data:(o=g==null?void 0:g.data)!==null&&o!==void 0?o:{},create_user:(l=g==null?void 0:g.shouldCreateUser)!==null&&l!==void 0?l:!0,gotrue_meta_security:{captcha_token:g==null?void 0:g.captchaToken},channel:(a=g==null?void 0:g.channel)!==null&&a!==void 0?a:"sms"}});return this._returnResult({data:{user:null,session:null,messageId:w==null?void 0:w.message_id},error:j})}throw new _1("You must provide either an email or phone number.")}catch(p){if(jn(p))return this._returnResult({data:{user:null,session:null},error:p});throw p}}async verifyOtp(t){var r,i;try{let o,l;"options"in t&&(o=(r=t.options)===null||r===void 0?void 0:r.redirectTo,l=(i=t.options)===null||i===void 0?void 0:i.captchaToken);const{data:a,error:p}=await Vn(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},t),{gotrue_meta_security:{captcha_token:l}}),redirectTo:o,xform:Ah});if(p)throw p;if(!a)throw new Error("An error occurred on token verification.");const g=a.session,w=a.user;return g!=null&&g.access_token&&(await this._saveSession(g),await this._notifyAllSubscribers(t.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",g)),this._returnResult({data:{user:w,session:g},error:null})}catch(o){if(jn(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}}async signInWithSSO(t){var r,i,o,l,a;try{let p=null,g=null;this.flowType==="pkce"&&([p,g]=await yv(this.storage,this.storageKey));const w=await Vn(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in t?{provider_id:t.providerId}:null),"domain"in t?{domain:t.domain}:null),{redirect_to:(i=(r=t.options)===null||r===void 0?void 0:r.redirectTo)!==null&&i!==void 0?i:void 0}),!((o=t==null?void 0:t.options)===null||o===void 0)&&o.captchaToken?{gotrue_meta_security:{captcha_token:t.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:p,code_challenge_method:g}),headers:this.headers,xform:KL});return!((l=w.data)===null||l===void 0)&&l.url&&_c()&&!(!((a=t.options)===null||a===void 0)&&a.skipBrowserRedirect)&&window.location.assign(w.data.url),this._returnResult(w)}catch(p){if(jn(p))return this._returnResult({data:null,error:p});throw p}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async t=>{const{data:{session:r},error:i}=t;if(i)throw i;if(!r)throw new Sh;const{error:o}=await Vn(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:r.access_token});return this._returnResult({data:{user:null,session:null},error:o})})}catch(t){if(jn(t))return this._returnResult({data:{user:null,session:null},error:t});throw t}}async resend(t){try{const r=`${this.url}/resend`;if("email"in t){const{email:i,type:o,options:l}=t,{error:a}=await Vn(this.fetch,"POST",r,{headers:this.headers,body:{email:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},redirectTo:l==null?void 0:l.emailRedirectTo});return this._returnResult({data:{user:null,session:null},error:a})}else if("phone"in t){const{phone:i,type:o,options:l}=t,{data:a,error:p}=await Vn(this.fetch,"POST",r,{headers:this.headers,body:{phone:i,type:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}}});return this._returnResult({data:{user:null,session:null,messageId:a==null?void 0:a.message_id},error:p})}throw new _1("You must provide either an email or phone number and a type")}catch(r){if(jn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async r=>r))}async _acquireLock(t,r){this._debug("#_acquireLock","begin",t);try{if(this.lockAcquired){const i=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),o=(async()=>(await i,await r()))();return this.pendingInLock.push((async()=>{try{await o}catch{}})()),o}return await this.lock(`lock:${this.storageKey}`,t,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const i=r();for(this.pendingInLock.push((async()=>{try{await i}catch{}})()),await i;this.pendingInLock.length;){const o=[...this.pendingInLock];await Promise.all(o),this.pendingInLock.splice(0,o.length)}return await i}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(t){this._debug("#_useSession","begin");try{const r=await this.__loadSession();return await t(r)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let t=null;const r=await hg(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",r),r!==null&&(this._isValidSession(r)?t=r:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!t)return{data:{session:null},error:null};const i=t.expires_at?t.expires_at*1e3-Date.now()<Y_:!1;if(this._debug("#__loadSession()",`session has${i?"":" not"} expired`,"expires_at",t.expires_at),!i){if(this.userStorage){const a=await hg(this.userStorage,this.storageKey+"-user");a!=null&&a.user?t.user=a.user:t.user=X_()}if(this.storage.isServer&&t.user&&!t.user.__isUserNotAvailableProxy){const a={value:this.suppressGetSessionWarning};t.user=GL(t.user,a),a.value&&(this.suppressGetSessionWarning=!0)}return{data:{session:t},error:null}}const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{session:null},error:l}):this._returnResult({data:{session:o},error:null})}finally{this._debug("#__loadSession()","end")}}async getUser(t){return t?await this._getUser(t):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(t){try{return t?await Vn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:t,xform:hm}):await this._useSession(async r=>{var i,o,l;const{data:a,error:p}=r;if(p)throw p;return!(!((i=a.session)===null||i===void 0)&&i.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Sh}:await Vn(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(l=(o=a.session)===null||o===void 0?void 0:o.access_token)!==null&&l!==void 0?l:void 0,xform:hm})})}catch(r){if(jn(r))return NL(r)&&(await this._removeSession(),await sm(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({data:{user:null},error:r});throw r}}async updateUser(t,r={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(t,r))}async _updateUser(t,r={}){try{return await this._useSession(async i=>{const{data:o,error:l}=i;if(l)throw l;if(!o.session)throw new Sh;const a=o.session;let p=null,g=null;this.flowType==="pkce"&&t.email!=null&&([p,g]=await yv(this.storage,this.storageKey));const{data:w,error:j}=await Vn(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:r==null?void 0:r.emailRedirectTo,body:Object.assign(Object.assign({},t),{code_challenge:p,code_challenge_method:g}),jwt:a.access_token,xform:hm});if(j)throw j;return a.user=w.user,await this._saveSession(a),await this._notifyAllSubscribers("USER_UPDATED",a),this._returnResult({data:{user:a.user},error:null})})}catch(i){if(jn(i))return this._returnResult({data:{user:null},error:i});throw i}}async setSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(t))}async _setSession(t){try{if(!t.access_token||!t.refresh_token)throw new Sh;const r=Date.now()/1e3;let i=r,o=!0,l=null;const{payload:a}=K_(t.access_token);if(a.exp&&(i=a.exp,o=i<=r),o){const{data:p,error:g}=await this._callRefreshToken(t.refresh_token);if(g)return this._returnResult({data:{user:null,session:null},error:g});if(!p)return{data:{user:null,session:null},error:null};l=p}else{const{data:p,error:g}=await this._getUser(t.access_token);if(g)throw g;l={access_token:t.access_token,refresh_token:t.refresh_token,user:p.user,token_type:"bearer",expires_in:i-r,expires_at:i},await this._saveSession(l),await this._notifyAllSubscribers("SIGNED_IN",l)}return this._returnResult({data:{user:l.user,session:l},error:null})}catch(r){if(jn(r))return this._returnResult({data:{session:null,user:null},error:r});throw r}}async refreshSession(t){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(t))}async _refreshSession(t){try{return await this._useSession(async r=>{var i;if(!t){const{data:a,error:p}=r;if(p)throw p;t=(i=a.session)!==null&&i!==void 0?i:void 0}if(!(t!=null&&t.refresh_token))throw new Sh;const{data:o,error:l}=await this._callRefreshToken(t.refresh_token);return l?this._returnResult({data:{user:null,session:null},error:l}):o?this._returnResult({data:{user:o.user,session:o},error:null}):this._returnResult({data:{user:null,session:null},error:null})})}catch(r){if(jn(r))return this._returnResult({data:{user:null,session:null},error:r});throw r}}async _getSessionFromURL(t,r){try{if(!_c())throw new w1("No browser detected.");if(t.error||t.error_description||t.error_code)throw new w1(t.error_description||"Error in URL with unspecified error_description",{error:t.error||"unspecified_error",code:t.error_code||"unspecified_code"});switch(r){case"implicit":if(this.flowType==="pkce")throw new Q5("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new w1("Not a valid implicit grant flow url.");break;default:}if(r==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!t.code)throw new Q5("No code detected.");const{data:G,error:z}=await this._exchangeCodeForSession(t.code);if(z)throw z;const ee=new URL(window.location.href);return ee.searchParams.delete("code"),window.history.replaceState(window.history.state,"",ee.toString()),{data:{session:G.session,redirectType:null},error:null}}const{provider_token:i,provider_refresh_token:o,access_token:l,refresh_token:a,expires_in:p,expires_at:g,token_type:w}=t;if(!l||!p||!a||!w)throw new w1("No session defined in URL");const j=Math.round(Date.now()/1e3),S=parseInt(p);let T=j+S;g&&(T=parseInt(g));const E=T-j;E*1e3<=Rv&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${E}s, should have been closer to ${S}s`);const O=T-S;j-O>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",O,T,j):j-O<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",O,T,j);const{data:R,error:F}=await this._getUser(l);if(F)throw F;const B={provider_token:i,provider_refresh_token:o,access_token:l,expires_in:S,expires_at:T,refresh_token:a,token_type:w,user:R.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),this._returnResult({data:{session:B,redirectType:t.type},error:null})}catch(i){if(jn(i))return this._returnResult({data:{session:null,redirectType:null},error:i});throw i}}_isImplicitGrantCallback(t){return!!(t.access_token||t.error_description)}async _isPKCECallback(t){const r=await hg(this.storage,`${this.storageKey}-code-verifier`);return!!(t.code&&r)}async signOut(t={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(t))}async _signOut({scope:t}={scope:"global"}){return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({error:l});const a=(i=o.session)===null||i===void 0?void 0:i.access_token;if(a){const{error:p}=await this.admin.signOut(a,t);if(p&&!(jL(p)&&(p.status===404||p.status===401||p.status===403)))return this._returnResult({error:p})}return t!=="others"&&(await this._removeSession(),await sm(this.storage,`${this.storageKey}-code-verifier`)),this._returnResult({error:null})})}onAuthStateChange(t){const r=RL(),i={id:r,callback:t,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",r),this.stateChangeEmitters.delete(r)}};return this._debug("#onAuthStateChange()","registered callback with id",r),this.stateChangeEmitters.set(r,i),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(r)})))(),{data:{subscription:i}}}async _emitInitialSession(t){return await this._useSession(async r=>{var i,o;try{const{data:{session:l},error:a}=r;if(a)throw a;await((i=this.stateChangeEmitters.get(t))===null||i===void 0?void 0:i.callback("INITIAL_SESSION",l)),this._debug("INITIAL_SESSION","callback id",t,"session",l)}catch(l){await((o=this.stateChangeEmitters.get(t))===null||o===void 0?void 0:o.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",t,"error",l),console.error(l)}})}async resetPasswordForEmail(t,r={}){let i=null,o=null;this.flowType==="pkce"&&([i,o]=await yv(this.storage,this.storageKey,!0));try{return await Vn(this.fetch,"POST",`${this.url}/recover`,{body:{email:t,code_challenge:i,code_challenge_method:o,gotrue_meta_security:{captcha_token:r.captchaToken}},headers:this.headers,redirectTo:r.redirectTo})}catch(l){if(jn(l))return this._returnResult({data:null,error:l});throw l}}async getUserIdentities(){var t;try{const{data:r,error:i}=await this.getUser();if(i)throw i;return this._returnResult({data:{identities:(t=r.user.identities)!==null&&t!==void 0?t:[]},error:null})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}async linkIdentity(t){return"token"in t?this.linkIdentityIdToken(t):this.linkIdentityOAuth(t)}async linkIdentityOAuth(t){var r;try{const{data:i,error:o}=await this._useSession(async l=>{var a,p,g,w,j;const{data:S,error:T}=l;if(T)throw T;const E=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,t.provider,{redirectTo:(a=t.options)===null||a===void 0?void 0:a.redirectTo,scopes:(p=t.options)===null||p===void 0?void 0:p.scopes,queryParams:(g=t.options)===null||g===void 0?void 0:g.queryParams,skipBrowserRedirect:!0});return await Vn(this.fetch,"GET",E,{headers:this.headers,jwt:(j=(w=S.session)===null||w===void 0?void 0:w.access_token)!==null&&j!==void 0?j:void 0})});if(o)throw o;return _c()&&!(!((r=t.options)===null||r===void 0)&&r.skipBrowserRedirect)&&window.location.assign(i==null?void 0:i.url),this._returnResult({data:{provider:t.provider,url:i==null?void 0:i.url},error:null})}catch(i){if(jn(i))return this._returnResult({data:{provider:t.provider,url:null},error:i});throw i}}async linkIdentityIdToken(t){return await this._useSession(async r=>{var i;try{const{error:o,data:{session:l}}=r;if(o)throw o;const{options:a,provider:p,token:g,access_token:w,nonce:j}=t,S=await Vn(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,jwt:(i=l==null?void 0:l.access_token)!==null&&i!==void 0?i:void 0,body:{provider:p,id_token:g,access_token:w,nonce:j,link_identity:!0,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},xform:Ah}),{data:T,error:E}=S;return E?this._returnResult({data:{user:null,session:null},error:E}):!T||!T.session||!T.user?this._returnResult({data:{user:null,session:null},error:new vv}):(T.session&&(await this._saveSession(T.session),await this._notifyAllSubscribers("USER_UPDATED",T.session)),this._returnResult({data:T,error:E}))}catch(o){if(jn(o))return this._returnResult({data:{user:null,session:null},error:o});throw o}})}async unlinkIdentity(t){try{return await this._useSession(async r=>{var i,o;const{data:l,error:a}=r;if(a)throw a;return await Vn(this.fetch,"DELETE",`${this.url}/user/identities/${t.identity_id}`,{headers:this.headers,jwt:(o=(i=l.session)===null||i===void 0?void 0:i.access_token)!==null&&o!==void 0?o:void 0})})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}async _refreshAccessToken(t){const r=`#_refreshAccessToken(${t.substring(0,5)}...)`;this._debug(r,"begin");try{const i=Date.now();return await DL(async o=>(o>0&&await ML(200*Math.pow(2,o-1)),this._debug(r,"refreshing attempt",o),await Vn(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:t},headers:this.headers,xform:Ah})),(o,l)=>{const a=200*Math.pow(2,o);return l&&Z_(l)&&Date.now()+a-i<Rv})}catch(i){if(this._debug(r,"error",i),jn(i))return this._returnResult({data:{session:null,user:null},error:i});throw i}finally{this._debug(r,"end")}}_isValidSession(t){return typeof t=="object"&&t!==null&&"access_token"in t&&"refresh_token"in t&&"expires_at"in t}async _handleProviderSignIn(t,r){const i=await this._getUrlForProvider(`${this.url}/authorize`,t,{redirectTo:r.redirectTo,scopes:r.scopes,queryParams:r.queryParams});return this._debug("#_handleProviderSignIn()","provider",t,"options",r,"url",i),_c()&&!r.skipBrowserRedirect&&window.location.assign(i),{data:{provider:t,url:i},error:null}}async _recoverAndRefresh(){var t,r;const i="#_recoverAndRefresh()";this._debug(i,"begin");try{const o=await hg(this.storage,this.storageKey);if(o&&this.userStorage){let a=await hg(this.userStorage,this.storageKey+"-user");!this.storage.isServer&&Object.is(this.storage,this.userStorage)&&!a&&(a={user:o.user},await Iv(this.userStorage,this.storageKey+"-user",a)),o.user=(t=a==null?void 0:a.user)!==null&&t!==void 0?t:X_()}else if(o&&!o.user&&!o.user){const a=await hg(this.storage,this.storageKey+"-user");a&&(a!=null&&a.user)?(o.user=a.user,await sm(this.storage,this.storageKey+"-user"),await Iv(this.storage,this.storageKey,o)):o.user=X_()}if(this._debug(i,"session from storage",o),!this._isValidSession(o)){this._debug(i,"session is not valid"),o!==null&&await this._removeSession();return}const l=((r=o.expires_at)!==null&&r!==void 0?r:1/0)*1e3-Date.now()<Y_;if(this._debug(i,`session has${l?"":" not"} expired with margin of ${Y_}s`),l){if(this.autoRefreshToken&&o.refresh_token){const{error:a}=await this._callRefreshToken(o.refresh_token);a&&(console.error(a),Z_(a)||(this._debug(i,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else if(o.user&&o.user.__isUserNotAvailableProxy===!0)try{const{data:a,error:p}=await this._getUser(o.access_token);!p&&(a!=null&&a.user)?(o.user=a.user,await this._saveSession(o),await this._notifyAllSubscribers("SIGNED_IN",o)):this._debug(i,"could not get user data, skipping SIGNED_IN notification")}catch(a){console.error("Error getting user data:",a),this._debug(i,"error getting user data, skipping SIGNED_IN notification",a)}else await this._notifyAllSubscribers("SIGNED_IN",o)}catch(o){this._debug(i,"error",o),console.error(o);return}finally{this._debug(i,"end")}}async _callRefreshToken(t){var r,i;if(!t)throw new Sh;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const o=`#_callRefreshToken(${t.substring(0,5)}...)`;this._debug(o,"begin");try{this.refreshingDeferred=new Fb;const{data:l,error:a}=await this._refreshAccessToken(t);if(a)throw a;if(!l.session)throw new Sh;await this._saveSession(l.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",l.session);const p={data:l.session,error:null};return this.refreshingDeferred.resolve(p),p}catch(l){if(this._debug(o,"error",l),jn(l)){const a={data:null,error:l};return Z_(l)||await this._removeSession(),(r=this.refreshingDeferred)===null||r===void 0||r.resolve(a),a}throw(i=this.refreshingDeferred)===null||i===void 0||i.reject(l),l}finally{this.refreshingDeferred=null,this._debug(o,"end")}}async _notifyAllSubscribers(t,r,i=!0){const o=`#_notifyAllSubscribers(${t})`;this._debug(o,"begin",r,`broadcast = ${i}`);try{this.broadcastChannel&&i&&this.broadcastChannel.postMessage({event:t,session:r});const l=[],a=Array.from(this.stateChangeEmitters.values()).map(async p=>{try{await p.callback(t,r)}catch(g){l.push(g)}});if(await Promise.all(a),l.length>0){for(let p=0;p<l.length;p+=1)console.error(l[p]);throw l[0]}}finally{this._debug(o,"end")}}async _saveSession(t){this._debug("#_saveSession()",t),this.suppressGetSessionWarning=!0;const r=Object.assign({},t),i=r.user&&r.user.__isUserNotAvailableProxy===!0;if(this.userStorage){!i&&r.user&&await Iv(this.userStorage,this.storageKey+"-user",{user:r.user});const o=Object.assign({},r);delete o.user;const l=iN(o);await Iv(this.storage,this.storageKey,l)}else{const o=iN(r);await Iv(this.storage,this.storageKey,o)}}async _removeSession(){this._debug("#_removeSession()"),await sm(this.storage,this.storageKey),await sm(this.storage,this.storageKey+"-code-verifier"),await sm(this.storage,this.storageKey+"-user"),this.userStorage&&await sm(this.userStorage,this.storageKey+"-user"),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const t=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{t&&_c()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",t)}catch(r){console.error("removing visibilitychange callback failed",r)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const t=setInterval(()=>this._autoRefreshTokenTick(),Rv);this.autoRefreshTicker=t,t&&typeof t=="object"&&typeof t.unref=="function"?t.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(t),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const t=this.autoRefreshTicker;this.autoRefreshTicker=null,t&&clearInterval(t)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const t=Date.now();try{return await this._useSession(async r=>{const{data:{session:i}}=r;if(!i||!i.refresh_token||!i.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const o=Math.floor((i.expires_at*1e3-t)/Rv);this._debug("#_autoRefreshTokenTick()",`access token expires in ${o} ticks, a tick lasts ${Rv}ms, refresh threshold is ${F2} ticks`),o<=F2&&await this._callRefreshToken(i.refresh_token)})}catch(r){console.error("Auto refresh tick failed with error. This is likely a transient error.",r)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(t){if(t.isAcquireTimeout||t instanceof zA)this._debug("auto refresh token tick lock not available");else throw t}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!_c()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(t){console.error("_handleVisibilityChange",t)}}async _onVisibilityChanged(t){const r=`#_onVisibilityChanged(${t})`;this._debug(r,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),t||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(r,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(t,r,i){const o=[`provider=${encodeURIComponent(r)}`];if(i!=null&&i.redirectTo&&o.push(`redirect_to=${encodeURIComponent(i.redirectTo)}`),i!=null&&i.scopes&&o.push(`scopes=${encodeURIComponent(i.scopes)}`),this.flowType==="pkce"){const[l,a]=await yv(this.storage,this.storageKey),p=new URLSearchParams({code_challenge:`${encodeURIComponent(l)}`,code_challenge_method:`${encodeURIComponent(a)}`});o.push(p.toString())}if(i!=null&&i.queryParams){const l=new URLSearchParams(i.queryParams);o.push(l.toString())}return i!=null&&i.skipBrowserRedirect&&o.push(`skip_http_redirect=${i.skipBrowserRedirect}`),`${t}?${o.join("&")}`}async _unenroll(t){try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;return l?this._returnResult({data:null,error:l}):await Vn(this.fetch,"DELETE",`${this.url}/factors/${t.factorId}`,{headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token})})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}async _enroll(t){try{return await this._useSession(async r=>{var i,o;const{data:l,error:a}=r;if(a)return this._returnResult({data:null,error:a});const p=Object.assign({friendly_name:t.friendlyName,factor_type:t.factorType},t.factorType==="phone"?{phone:t.phone}:t.factorType==="totp"?{issuer:t.issuer}:{}),{data:g,error:w}=await Vn(this.fetch,"POST",`${this.url}/factors`,{body:p,headers:this.headers,jwt:(i=l==null?void 0:l.session)===null||i===void 0?void 0:i.access_token});return w?this._returnResult({data:null,error:w}):(t.factorType==="totp"&&g.type==="totp"&&(!((o=g==null?void 0:g.totp)===null||o===void 0)&&o.qr_code)&&(g.totp.qr_code=`data:image/svg+xml;utf-8,${g.totp.qr_code}`),this._returnResult({data:g,error:null}))})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}async _verify(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({data:null,error:l});const a=Object.assign({challenge_id:t.challengeId},"webauthn"in t?{webauthn:Object.assign(Object.assign({},t.webauthn),{credential_response:t.webauthn.type==="create"?hM(t.webauthn.credential_response):fM(t.webauthn.credential_response)})}:{code:t.code}),{data:p,error:g}=await Vn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/verify`,{body:a,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});return g?this._returnResult({data:null,error:g}):(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+p.expires_in},p)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",p),this._returnResult({data:p,error:g}))})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}})}async _challenge(t){return this._acquireLock(-1,async()=>{try{return await this._useSession(async r=>{var i;const{data:o,error:l}=r;if(l)return this._returnResult({data:null,error:l});const a=await Vn(this.fetch,"POST",`${this.url}/factors/${t.factorId}/challenge`,{body:t,headers:this.headers,jwt:(i=o==null?void 0:o.session)===null||i===void 0?void 0:i.access_token});if(a.error)return a;const{data:p}=a;if(p.type!=="webauthn")return{data:p,error:null};switch(p.webauthn.type){case"create":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:uM(p.webauthn.credential_options.publicKey)})})}),error:null};case"request":return{data:Object.assign(Object.assign({},p),{webauthn:Object.assign(Object.assign({},p.webauthn),{credential_options:Object.assign(Object.assign({},p.webauthn.credential_options),{publicKey:dM(p.webauthn.credential_options.publicKey)})})}),error:null}}})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}})}async _challengeAndVerify(t){const{data:r,error:i}=await this._challenge({factorId:t.factorId});return i?this._returnResult({data:null,error:i}):await this._verify({factorId:t.factorId,challengeId:r.id,code:t.code})}async _listFactors(){var t;const{data:{user:r},error:i}=await this.getUser();if(i)return{data:null,error:i};const o={all:[],phone:[],totp:[],webauthn:[]};for(const l of(t=r==null?void 0:r.factors)!==null&&t!==void 0?t:[])o.all.push(l),l.status==="verified"&&o[l.factor_type].push(l);return{data:o,error:null}}async _getAuthenticatorAssuranceLevel(){var t,r;const{data:{session:i},error:o}=await this.getSession();if(o)return this._returnResult({data:null,error:o});if(!i)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:l}=K_(i.access_token);let a=null;l.aal&&(a=l.aal);let p=a;((r=(t=i.user.factors)===null||t===void 0?void 0:t.filter(j=>j.status==="verified"))!==null&&r!==void 0?r:[]).length>0&&(p="aal2");const w=l.amr||[];return{data:{currentLevel:a,nextLevel:p,currentAuthenticationMethods:w},error:null}}async _getAuthorizationDetails(t){try{return await this._useSession(async r=>{const{data:{session:i},error:o}=r;return o?this._returnResult({data:null,error:o}):i?await Vn(this.fetch,"GET",`${this.url}/oauth/authorizations/${t}`,{headers:this.headers,jwt:i.access_token,xform:l=>({data:l,error:null})}):this._returnResult({data:null,error:new Sh})})}catch(r){if(jn(r))return this._returnResult({data:null,error:r});throw r}}async _approveAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Sh});const a=await Vn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"approve"},xform:p=>({data:p,error:null})});return a.data&&a.data.redirect_url&&_c()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(jn(i))return this._returnResult({data:null,error:i});throw i}}async _denyAuthorization(t,r){try{return await this._useSession(async i=>{const{data:{session:o},error:l}=i;if(l)return this._returnResult({data:null,error:l});if(!o)return this._returnResult({data:null,error:new Sh});const a=await Vn(this.fetch,"POST",`${this.url}/oauth/authorizations/${t}/consent`,{headers:this.headers,jwt:o.access_token,body:{action:"deny"},xform:p=>({data:p,error:null})});return a.data&&a.data.redirect_url&&_c()&&!(r!=null&&r.skipBrowserRedirect)&&window.location.assign(a.data.redirect_url),a})}catch(i){if(jn(i))return this._returnResult({data:null,error:i});throw i}}async fetchJwk(t,r={keys:[]}){let i=r.keys.find(p=>p.kid===t);if(i)return i;const o=Date.now();if(i=this.jwks.keys.find(p=>p.kid===t),i&&this.jwks_cached_at+_L>o)return i;const{data:l,error:a}=await Vn(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;return!l.keys||l.keys.length===0||(this.jwks=l,this.jwks_cached_at=o,i=l.keys.find(p=>p.kid===t),!i)?null:i}async getClaims(t,r={}){try{let i=t;if(!i){const{data:E,error:O}=await this.getSession();if(O||!E.session)return this._returnResult({data:null,error:O});i=E.session.access_token}const{header:o,payload:l,signature:a,raw:{header:p,payload:g}}=K_(i);r!=null&&r.allowExpired||VL(l.exp);const w=!o.alg||o.alg.startsWith("HS")||!o.kid||!("crypto"in globalThis&&"subtle"in globalThis.crypto)?null:await this.fetchJwk(o.kid,r!=null&&r.keys?{keys:r.keys}:r==null?void 0:r.jwks);if(!w){const{error:E}=await this.getUser(i);if(E)throw E;return{data:{claims:l,header:o,signature:a},error:null}}const j=$L(o.alg),S=await crypto.subtle.importKey("jwk",w,j,!0,["verify"]);if(!await crypto.subtle.verify(j,S,a,TL(`${p}.${g}`)))throw new q2("Invalid JWT signature");return{data:{claims:l,header:o,signature:a},error:null}}catch(i){if(jn(i))return this._returnResult({data:null,error:i});throw i}}}Ox.nextInstanceID={};const wM=Ox;class jM extends wM{constructor(t){super(t)}}class NM{constructor(t,r,i){var o,l,a;this.supabaseUrl=t,this.supabaseKey=r;const p=gL(t);if(!r)throw new Error("supabaseKey is required.");this.realtimeUrl=new URL("realtime/v1",p),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",p),this.storageUrl=new URL("storage/v1",p),this.functionsUrl=new URL("functions/v1",p);const g=`sb-${p.hostname.split(".")[0]}-auth-token`,w={db:lL,realtime:uL,auth:Object.assign(Object.assign({},cL),{storageKey:g}),global:oL},j=mL(i??{},w);this.storageKey=(o=j.auth.storageKey)!==null&&o!==void 0?o:"",this.headers=(l=j.global.headers)!==null&&l!==void 0?l:{},j.accessToken?(this.accessToken=j.accessToken,this.auth=new Proxy({},{get:(S,T)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(T)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((a=j.auth)!==null&&a!==void 0?a:{},this.headers,j.global.fetch),this.fetch=fL(r,this._getAccessToken.bind(this),j.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},j.realtime)),this.accessToken&&this.accessToken().then(S=>this.realtime.setAuth(S)).catch(S=>console.warn("Failed to set initial Realtime auth token:",S)),this.rest=new vI(new URL("rest/v1",p).href,{headers:this.headers,schema:j.db.schema,fetch:this.fetch}),this.storage=new iL(this.storageUrl.href,this.headers,this.fetch,i==null?void 0:i.storage),j.accessToken||this._listenForAuthEvents()}get functions(){return new fI(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}from(t){return this.rest.from(t)}schema(t){return this.rest.schema(t)}rpc(t,r={},i={head:!1,get:!1,count:void 0}){return this.rest.rpc(t,r,i)}channel(t,r={config:{}}){return this.realtime.channel(t,r)}getChannels(){return this.realtime.getChannels()}removeChannel(t){return this.realtime.removeChannel(t)}removeAllChannels(){return this.realtime.removeAllChannels()}async _getAccessToken(){var t,r;if(this.accessToken)return await this.accessToken();const{data:i}=await this.auth.getSession();return(r=(t=i.session)===null||t===void 0?void 0:t.access_token)!==null&&r!==void 0?r:this.supabaseKey}_initSupabaseAuthClient({autoRefreshToken:t,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,storageKey:a,flowType:p,lock:g,debug:w,throwOnError:j},S,T){const E={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new jM({url:this.authUrl.href,headers:Object.assign(Object.assign({},E),S),storageKey:a,autoRefreshToken:t,persistSession:r,detectSessionInUrl:i,storage:o,userStorage:l,flowType:p,lock:g,debug:w,throwOnError:j,fetch:T,hasCustomAuthorizationHeader:Object.keys(this.headers).some(O=>O.toLowerCase()==="authorization")})}_initRealtimeClient(t){return new LI(this.realtimeUrl.href,Object.assign(Object.assign({},t),{params:Object.assign({apikey:this.supabaseKey},t==null?void 0:t.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((r,i)=>{this._handleTokenChanged(r,"CLIENT",i==null?void 0:i.access_token)})}_handleTokenChanged(t,r,i){(t==="TOKEN_REFRESHED"||t==="SIGNED_IN")&&this.changedAccessToken!==i?(this.changedAccessToken=i,this.realtime.setAuth(i)):t==="SIGNED_OUT"&&(this.realtime.setAuth(),r=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const SM=(n,t,r)=>new NM(n,t,r);function AM(){if(typeof window<"u"||typeof process>"u")return!1;const n=process.version;if(n==null)return!1;const t=n.match(/^v(\d+)\./);return t?parseInt(t[1],10)<=18:!1}AM()&&console.warn("  Node.js 18 and below are deprecated and will no longer be supported in future versions of @supabase/supabase-js. Please upgrade to Node.js 20 or later. For more information, visit: https://github.com/orgs/supabase/discussions/37217");const CM="https://suiexvkyakjvexnldvmr.supabase.co",kM="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8",ar=SM(CM,kM,{auth:{autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0}}),EM=Object.freeze(Object.defineProperty({__proto__:null,supabase:ar},Symbol.toStringTag,{value:"Module"})),UA=M.createContext(void 0);function TM({children:n}){const[t,r]=M.useState(null),[i,o]=M.useState(null),[l,a]=M.useState(null),[p,g]=M.useState(!0),[w,j]=M.useState(null),S=M.useCallback(async(Q,pe=3)=>{try{console.log(" Fetching profile for user:",Q,"(retries left:",pe,")");const me="https://suiexvkyakjvexnldvmr.supabase.co",Ue="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8";console.log(" Using direct fetch to:",`${me}/rest/v1/profiles?id=eq.${Q}&select=*`);const Ke=await fetch(`${me}/rest/v1/profiles?id=eq.${Q}&select=*`,{headers:{apikey:Ue,Authorization:`Bearer ${Ue}`,"Content-Type":"application/json"}});if(!Ke.ok)throw new Error(`HTTP error! status: ${Ke.status}`);const Re=await Ke.json();if(console.log(" Profile fetch response:",Re),!Re||Re.length===0){if(pe>0)return console.log(" Profile not found, retrying in 1 second..."),await new Promise(ue=>setTimeout(ue,1e3)),S(Q,pe-1);throw new Error("Profile not found")}const te=Re[0];console.log(" Profile fetched successfully:",te),o(te)}catch(me){if(console.error(" Error fetching profile:",me),pe>0)return console.log(" Error, retrying in 500ms..."),await new Promise(Ue=>setTimeout(Ue,500)),S(Q,pe-1);j(me),g(!1)}},[]);M.useEffect(()=>{ar.auth.getSession().then(({data:{session:pe}})=>{a(pe),r((pe==null?void 0:pe.user)??null),pe!=null&&pe.user&&S(pe.user.id),g(!1)});const{data:{subscription:Q}}=ar.auth.onAuthStateChange(async(pe,me)=>{if(console.log("Auth state changed:",pe),a(me),r((me==null?void 0:me.user)??null),me!=null&&me.user)try{await S(me.user.id)}catch(Ue){console.error(" Failed to fetch profile in auth listener:",Ue)}finally{g(!1)}else o(null),g(!1)});return()=>Q.unsubscribe()},[S]),M.useEffect(()=>{const Q=pe=>{pe.key==="supabase.auth.token"&&!pe.newValue&&(r(null),o(null),a(null))};return window.addEventListener("storage",Q),()=>window.removeEventListener("storage",Q)},[]);const T=async Q=>{try{j(null);const{data:pe,error:me}=await ar.auth.signUp({email:Q.email,password:Q.password,options:{data:{display_name:Q.displayName,role:Q.role,phone:Q.phone||null}}});if(me)throw me;if(pe.user&&!pe.session)console.log("Email confirmation required. Please check your email.");else if(pe.user){await new Promise(Ke=>setTimeout(Ke,1e3));const{data:Ue}=await ar.from("profiles").select("id").eq("id",pe.user.id).maybeSingle();if(!Ue){console.log("Creating profile manually for user:",pe.user.id);const Ke={id:pe.user.id,email:pe.user.email,display_name:Q.displayName,role:Q.role};Q.phone&&(Ke.phone=Q.phone);const{error:Re}=await ar.from("profiles").insert(Ke);Re&&console.error("Error creating profile:",Re)}await S(pe.user.id)}return{error:null}}catch(pe){const me=pe;return j(me),{error:me}}},E=async Q=>{var pe;try{j(null),console.log(" SignIn called for:",Q.email);const{data:me,error:Ue}=await ar.auth.signInWithPassword({email:Q.email,password:Q.password});if(Ue)throw console.error(" Auth error from Supabase:",Ue),Ue;return console.log(" Auth successful! User:",(pe=me.user)==null?void 0:pe.id),console.log(" Session:",me.session?"Active":"None"),{error:null}}catch(me){const Ue=me;return console.error(" SignIn exception:",Ue),j(Ue),{error:Ue}}},O=async()=>{try{j(null);const{error:Q}=await ar.auth.signOut();if(Q)throw Q;return r(null),o(null),a(null),{error:null}}catch(Q){const pe=Q;return j(pe),{error:pe}}},R=async Q=>{try{j(null);const{data:pe,error:me}=await ar.auth.signUp({phone:Q.phone,password:Q.password,options:{data:{display_name:Q.displayName,role:Q.role}}});if(me)throw me;return console.log(" OTP sent to phone:",Q.phone),{error:null}}catch(pe){const me=pe;return j(me),{error:me}}},F=async Q=>{var pe;try{j(null),console.log(" SignIn with phone called for:",Q.phone);const{data:me,error:Ue}=await ar.auth.signInWithPassword({phone:Q.phone,password:Q.password});if(Ue)throw console.error(" Auth error from Supabase:",Ue),Ue;return console.log(" Phone auth successful! User:",(pe=me.user)==null?void 0:pe.id),console.log(" Session:",me.session?"Active":"None"),{error:null}}catch(me){const Ue=me;return console.error(" SignIn with phone exception:",Ue),j(Ue),{error:Ue}}},B=async Q=>{var pe,me,Ue;try{j(null),console.log(" Verifying OTP for phone:",Q.phone);const{data:Ke,error:Re}=await ar.auth.verifyOtp({phone:Q.phone,token:Q.token,type:"sms"});if(Re)throw console.error(" OTP verification error:",Re),Re;if(console.log(" OTP verified successfully! User:",(pe=Ke.user)==null?void 0:pe.id),Ke.user){await new Promise(ue=>setTimeout(ue,1e3));const{data:te}=await ar.from("profiles").select("id").eq("id",Ke.user.id).maybeSingle();if(!te){console.log("Creating profile for phone user:",Ke.user.id);const{error:ue}=await ar.from("profiles").insert({id:Ke.user.id,phone:Ke.user.phone,display_name:((me=Ke.user.user_metadata)==null?void 0:me.display_name)||"User",role:((Ue=Ke.user.user_metadata)==null?void 0:Ue.role)||"buyer"});ue&&console.error("Error creating profile:",ue)}await S(Ke.user.id)}return{error:null}}catch(Ke){const Re=Ke;return console.error(" Verify OTP exception:",Re),j(Re),{error:Re}}},G=async Q=>{try{j(null),console.log(" Resending OTP to:",Q);const{error:pe}=await ar.auth.signInWithOtp({phone:Q});if(pe)throw console.error(" Resend OTP error:",pe),pe;return console.log(" OTP resent successfully"),{error:null}}catch(pe){const me=pe;return console.error(" Resend OTP exception:",me),j(me),{error:me}}},z=async Q=>{try{j(null),console.log(" Sending OTP to email:",Q);const{error:pe}=await ar.auth.signInWithOtp({email:Q});if(pe)throw console.error(" Email OTP error:",pe),pe;return console.log(" OTP sent to email successfully"),{error:null}}catch(pe){const me=pe;return console.error(" Email OTP exception:",me),j(me),{error:me}}},ee=async Q=>{var pe,me,Ue;try{j(null),console.log(" Verifying email OTP for:",Q.email);const{data:Ke,error:Re}=await ar.auth.verifyOtp({email:Q.email,token:Q.token,type:"email"});if(Re)throw console.error(" Email OTP verification error:",Re),Re;if(console.log(" Email OTP verified successfully! User:",(pe=Ke.user)==null?void 0:pe.id),Ke.user){await new Promise(ue=>setTimeout(ue,1e3));const{data:te}=await ar.from("profiles").select("id").eq("id",Ke.user.id).maybeSingle();if(!te){console.log("Creating profile for email user:",Ke.user.id);const{error:ue}=await ar.from("profiles").insert({id:Ke.user.id,email:Ke.user.email,display_name:((me=Ke.user.user_metadata)==null?void 0:me.display_name)||"User",role:((Ue=Ke.user.user_metadata)==null?void 0:Ue.role)||"buyer"});ue&&console.error("Error creating profile:",ue)}await S(Ke.user.id)}return{error:null}}catch(Ke){const Re=Ke;return console.error(" Verify email OTP exception:",Re),j(Re),{error:Re}}},ie=async Q=>{try{j(null),console.log(" Resending OTP to email:",Q);const{error:pe}=await ar.auth.signInWithOtp({email:Q});if(pe)throw console.error(" Resend email OTP error:",pe),pe;return console.log(" Email OTP resent successfully"),{error:null}}catch(pe){const me=pe;return console.error(" Resend email OTP exception:",me),j(me),{error:me}}},ge=async Q=>{try{j(null);const{error:pe}=await ar.auth.resetPasswordForEmail(Q,{redirectTo:`${window.location.origin}/reset-password`});if(pe)throw pe;return{error:null}}catch(pe){const me=pe;return j(me),{error:me}}},K=async Q=>{try{j(null);const{error:pe}=await ar.auth.updateUser({password:Q});if(pe)throw pe;return{error:null}}catch(pe){const me=pe;return j(me),{error:me}}},J=async Q=>{try{if(j(null),!t)throw new Error("No user logged in");const{error:pe}=await ar.auth.updateUser({password:Q});if(pe)throw pe;return{error:null}}catch(pe){const me=pe;return j(me),{error:me}}},Se=async Q=>{try{if(j(null),!t)throw new Error("No user logged in");const{error:pe}=await ar.auth.updateUser({email:Q});if(pe)throw pe;return{error:null}}catch(pe){const me=pe;return j(me),{error:me}}},_e=async Q=>{if(!t)return{error:new Error("No user logged in")};try{j(null),i&&o({...i,...Q});const{error:pe}=await ar.from("profiles").update(Q).eq("id",t.id);if(pe)throw pe;return await S(t.id),{error:null}}catch(pe){return t&&await S(t.id),{error:pe}}},re=async()=>{t&&await S(t.id)},ce=async Q=>{if(!t)return{url:null,error:new Error("No user logged in")};try{if(j(null),!["image/jpeg","image/png","image/gif","image/webp"].includes(Q.type))throw new Error("Invalid file type. Please upload a JPEG, PNG, GIF, or WebP image.");const me=2*1024*1024;if(Q.size>me)throw new Error("File size must be less than 2MB.");if(i!=null&&i.avatar_url){const Ne=i.avatar_url.split("/").pop();Ne&&await ar.storage.from("avatars").remove([`${t.id}/${Ne}`])}const Ue=Q.name.split(".").pop(),Ke=`${t.id}-${Date.now()}.${Ue}`,Re=`${t.id}/${Ke}`,{error:te}=await ar.storage.from("avatars").upload(Re,Q,{cacheControl:"3600",upsert:!1});if(te)throw te;const{data:ue}=ar.storage.from("avatars").getPublicUrl(Re);return await _e({avatar_url:ue.publicUrl}),{url:ue.publicUrl,error:null}}catch(pe){return{url:null,error:pe}}},fe=async()=>{if(!t)return{error:new Error("No user logged in")};if(!(i!=null&&i.avatar_url))return{error:new Error("No avatar to delete")};try{j(null);const Q=i.avatar_url.split("/").pop();if(Q){const{error:pe}=await ar.storage.from("avatars").remove([`${t.id}/${Q}`]);if(pe)throw pe}return await _e({avatar_url:null}),{error:null}}catch(Q){return{error:Q}}},Fe={user:t,profile:i,session:l,loading:p,error:w,signUp:T,signIn:E,signOut:O,signUpWithPhone:R,signInWithPhone:F,verifyOTP:B,resendOTP:G,signInWithEmail:z,verifyEmailOTP:ee,resendEmailOTP:ie,resetPasswordRequest:ge,resetPassword:K,updatePassword:J,updateEmail:Se,updateProfile:_e,refreshProfile:re,deleteAccount:async()=>{if(!t)return{error:new Error("No user logged in")};try{return j(null),i!=null&&i.avatar_url&&await fe(),await O(),{error:null}}catch(Q){return{error:Q}}},uploadAvatar:ce,deleteAvatar:fe};return e.jsx(UA.Provider,{value:Fe,children:n})}function Io(){const n=M.useContext(UA);if(n===void 0)throw new Error("useAuth must be used within an AuthProvider");return n}class wx{static async getSavedListings(t){try{console.log(" Fetching saved listings for user:",t);const r="https://suiexvkyakjvexnldvmr.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8",o=await fetch(`${r}/rest/v1/saved_listings?user_id=eq.${t}&select=*&order=created_at.desc`,{headers:{apikey:i,Authorization:`Bearer ${i}`,"Content-Type":"application/json"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();return console.log(" Saved listings fetched:",l.length),await Promise.all(l.map(async p=>{const g=await this.getListingDetails(p.listing_type,p.listing_id);return{...p,listing:g}}))}catch(r){throw console.error(" Error fetching saved listings:",r),r}}static async getListingDetails(t,r){try{const i="https://suiexvkyakjvexnldvmr.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8",a=await fetch(`${i}/rest/v1/${t==="business"?"businesses":"franchises"}?id=eq.${r}&select=*`,{headers:{apikey:o,Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!a.ok)return null;const p=await a.json();return p&&p.length>0?p[0]:null}catch(i){return console.error(" Error fetching listing details:",i),null}}static async saveListing(t,r,i,o){const{data:l,error:a}=await ar.from("saved_listings").insert({user_id:t,listing_type:r,listing_id:i,notes:o}).select().single();if(a)throw a;return l}static async unsaveListing(t,r,i){const{error:o}=await ar.from("saved_listings").delete().eq("user_id",t).eq("listing_type",r).eq("listing_id",i);if(o)throw o}static async isListingSaved(t,r,i){const{data:o,error:l}=await ar.from("saved_listings").select("id").eq("user_id",t).eq("listing_type",r).eq("listing_id",i).maybeSingle();if(l)throw l;return!!o}static async updateNotes(t,r,i,o){const{error:l}=await ar.from("saved_listings").update({notes:o}).eq("user_id",t).eq("listing_type",r).eq("listing_id",i);if(l)throw l}static async getSavedListingsCount(t){try{const r="https://suiexvkyakjvexnldvmr.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8",o=await fetch(`${r}/rest/v1/saved_listings?user_id=eq.${t}&select=count`,{headers:{apikey:i,Authorization:`Bearer ${i}`,"Content-Type":"application/json",Prefer:"count=exact"}});if(!o.ok)return 0;const l=o.headers.get("content-range");return l?parseInt(l.split("/")[1]||"0"):0}catch(r){return console.error(" Error fetching saved listings count:",r),0}}}const qA=M.createContext(void 0);function PM({children:n}){const{user:t}=Io(),[r,i]=M.useState(0),[o,l]=M.useState(new Set),a=M.useCallback(async()=>{if(!t){i(0),l(new Set);return}try{const w=await wx.getSavedListingsCount(t.id);i(w);const j=await wx.getSavedListings(t.id),S=new Set(j.map(T=>`${T.listing_type}-${T.listing_id}`));l(S)}catch(w){console.error("Error refreshing saved count:",w)}},[t]);M.useEffect(()=>{a()},[a]);const p=M.useCallback((w,j)=>o.has(`${w}-${j}`),[o]),g=M.useCallback(async(w,j)=>{if(!t)return;const S=`${w}-${j}`,T=o.has(S);try{T?(await wx.unsaveListing(t.id,w,j),l(E=>{const O=new Set(E);return O.delete(S),O}),i(E=>Math.max(0,E-1))):(await wx.saveListing(t.id,w,j),l(E=>new Set(E).add(S)),i(E=>E+1))}catch(E){console.error("Error toggling save:",E),await a()}},[t,o,a]);return e.jsx(qA.Provider,{value:{savedCount:r,refreshSavedCount:a,isListingSaved:p,toggleSave:g},children:n})}function VA(){const n=M.useContext(qA);if(n===void 0)throw new Error("useSavedListings must be used within a SavedListingsProvider");return n}class fg{static async getNotifications(t,r=50){try{console.log(" Fetching notifications for user:",t);const i="https://suiexvkyakjvexnldvmr.supabase.co",o="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8",l=await fetch(`${i}/rest/v1/notifications?user_id=eq.${t}&select=*&order=created_at.desc&limit=${r}`,{headers:{apikey:o,Authorization:`Bearer ${o}`,"Content-Type":"application/json"}});if(!l.ok)throw new Error(`HTTP error! status: ${l.status}`);const a=await l.json();return console.log(" Notifications fetched:",a.length),a}catch(i){throw console.error(" Error fetching notifications:",i),i}}static async getUnreadCount(t){try{const r="https://suiexvkyakjvexnldvmr.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8",o=await fetch(`${r}/rest/v1/notifications?user_id=eq.${t}&read=eq.false&select=count`,{headers:{apikey:i,Authorization:`Bearer ${i}`,"Content-Type":"application/json",Prefer:"count=exact"}});if(!o.ok)return 0;const l=o.headers.get("content-range");return l?parseInt(l.split("/")[1]||"0"):0}catch(r){return console.error(" Error fetching unread count:",r),0}}static async markAsRead(t){const{error:r}=await ar.from("notifications").update({read:!0,read_at:new Date().toISOString()}).eq("id",t);if(r)throw r}static async markAllAsRead(t){const{error:r}=await ar.from("notifications").update({read:!0,read_at:new Date().toISOString()}).eq("user_id",t).eq("read",!1);if(r)throw r}static async deleteNotification(t){const{error:r}=await ar.from("notifications").delete().eq("id",t);if(r)throw r}static async deleteAllRead(t){const{error:r}=await ar.from("notifications").delete().eq("user_id",t).eq("read",!0);if(r)throw r}static async createNotification(t,r,i,o,l,a){const{data:p,error:g}=await ar.from("notifications").insert({user_id:t,type:r,title:i,message:o,action_url:l,metadata:a}).select().single();if(g)throw g;return p}static subscribeToNotifications(t,r){const i=ar.channel("notifications").on("postgres_changes",{event:"INSERT",schema:"public",table:"notifications",filter:`user_id=eq.${t}`},o=>{console.log(" New notification:",o.new),r(o.new)}).subscribe();return()=>{ar.removeChannel(i)}}}const $A=M.createContext(void 0);function RM({children:n}){const{user:t}=Io(),[r,i]=M.useState([]),[o,l]=M.useState(0),[a,p]=M.useState(!1),g=M.useCallback(async()=>{if(!t){i([]),l(0);return}p(!0);try{const[E,O]=await Promise.all([fg.getNotifications(t.id),fg.getUnreadCount(t.id)]);i(E),l(O)}catch(E){console.error("Error refreshing notifications:",E)}finally{p(!1)}},[t]);M.useEffect(()=>{g()},[g]),M.useEffect(()=>t?fg.subscribeToNotifications(t.id,O=>{i(R=>[O,...R]),O.read||l(R=>R+1)}):void 0,[t]);const w=M.useCallback(async E=>{try{await fg.markAsRead(E),i(O=>O.map(R=>R.id===E?{...R,read:!0,read_at:new Date().toISOString()}:R)),l(O=>Math.max(0,O-1))}catch(O){console.error("Error marking notification as read:",O)}},[]),j=M.useCallback(async()=>{if(t)try{await fg.markAllAsRead(t.id),i(E=>E.map(O=>({...O,read:!0,read_at:new Date().toISOString()}))),l(0)}catch(E){console.error("Error marking all as read:",E)}},[t]),S=M.useCallback(async E=>{try{await fg.deleteNotification(E);const O=r.find(R=>R.id===E);i(R=>R.filter(F=>F.id!==E)),O&&!O.read&&l(R=>Math.max(0,R-1))}catch(O){console.error("Error deleting notification:",O)}},[r]),T=M.useCallback(async()=>{if(t)try{await fg.deleteAllRead(t.id),i(E=>E.filter(O=>!O.read))}catch(E){console.error("Error deleting read notifications:",E)}},[t]);return e.jsx($A.Provider,{value:{notifications:r,unreadCount:o,loading:a,refreshNotifications:g,markAsRead:w,markAllAsRead:j,deleteNotification:S,deleteAllRead:T},children:n})}function HA(){const n=M.useContext($A);if(n===void 0)throw new Error("useNotifications must be used within a NotificationsProvider");return n}function IM(n){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],r=document.createElement("style");r.type="text/css",t.appendChild(r),r.styleSheet?r.styleSheet.cssText=n:r.appendChild(document.createTextNode(n))}const LM=n=>{switch(n){case"success":return OM;case"info":return FM;case"warning":return zM;case"error":return BM;default:return null}},MM=Array(12).fill(0),DM=({visible:n,className:t})=>Ft.createElement("div",{className:["sonner-loading-wrapper",t].filter(Boolean).join(" "),"data-visible":n},Ft.createElement("div",{className:"sonner-spinner"},MM.map((r,i)=>Ft.createElement("div",{className:"sonner-loading-bar",key:`spinner-bar-${i}`})))),OM=Ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ft.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.857-9.809a.75.75 0 00-1.214-.882l-3.483 4.79-1.88-1.88a.75.75 0 10-1.06 1.061l2.5 2.5a.75.75 0 001.137-.089l4-5.5z",clipRule:"evenodd"})),zM=Ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",height:"20",width:"20"},Ft.createElement("path",{fillRule:"evenodd",d:"M9.401 3.003c1.155-2 4.043-2 5.197 0l7.355 12.748c1.154 2-.29 4.5-2.599 4.5H4.645c-2.309 0-3.752-2.5-2.598-4.5L9.4 3.003zM12 8.25a.75.75 0 01.75.75v3.75a.75.75 0 01-1.5 0V9a.75.75 0 01.75-.75zm0 8.25a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})),FM=Ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ft.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7-4a1 1 0 11-2 0 1 1 0 012 0zM9 9a.75.75 0 000 1.5h.253a.25.25 0 01.244.304l-.459 2.066A1.75 1.75 0 0010.747 15H11a.75.75 0 000-1.5h-.253a.25.25 0 01-.244-.304l.459-2.066A1.75 1.75 0 009.253 9H9z",clipRule:"evenodd"})),BM=Ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",height:"20",width:"20"},Ft.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-8-5a.75.75 0 01.75.75v4.5a.75.75 0 01-1.5 0v-4.5A.75.75 0 0110 5zm0 10a1 1 0 100-2 1 1 0 000 2z",clipRule:"evenodd"})),UM=Ft.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",width:"12",height:"12",viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"1.5",strokeLinecap:"round",strokeLinejoin:"round"},Ft.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),Ft.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"})),qM=()=>{const[n,t]=Ft.useState(document.hidden);return Ft.useEffect(()=>{const r=()=>{t(document.hidden)};return document.addEventListener("visibilitychange",r),()=>window.removeEventListener("visibilitychange",r)},[]),n};let V2=1;class VM{constructor(){this.subscribe=t=>(this.subscribers.push(t),()=>{const r=this.subscribers.indexOf(t);this.subscribers.splice(r,1)}),this.publish=t=>{this.subscribers.forEach(r=>r(t))},this.addToast=t=>{this.publish(t),this.toasts=[...this.toasts,t]},this.create=t=>{var r;const{message:i,...o}=t,l=typeof(t==null?void 0:t.id)=="number"||((r=t.id)==null?void 0:r.length)>0?t.id:V2++,a=this.toasts.find(g=>g.id===l),p=t.dismissible===void 0?!0:t.dismissible;return this.dismissedToasts.has(l)&&this.dismissedToasts.delete(l),a?this.toasts=this.toasts.map(g=>g.id===l?(this.publish({...g,...t,id:l,title:i}),{...g,...t,id:l,dismissible:p,title:i}):g):this.addToast({title:i,...o,dismissible:p,id:l}),l},this.dismiss=t=>(t?(this.dismissedToasts.add(t),requestAnimationFrame(()=>this.subscribers.forEach(r=>r({id:t,dismiss:!0})))):this.toasts.forEach(r=>{this.subscribers.forEach(i=>i({id:r.id,dismiss:!0}))}),t),this.message=(t,r)=>this.create({...r,message:t}),this.error=(t,r)=>this.create({...r,message:t,type:"error"}),this.success=(t,r)=>this.create({...r,type:"success",message:t}),this.info=(t,r)=>this.create({...r,type:"info",message:t}),this.warning=(t,r)=>this.create({...r,type:"warning",message:t}),this.loading=(t,r)=>this.create({...r,type:"loading",message:t}),this.promise=(t,r)=>{if(!r)return;let i;r.loading!==void 0&&(i=this.create({...r,promise:t,type:"loading",message:r.loading,description:typeof r.description!="function"?r.description:void 0}));const o=Promise.resolve(t instanceof Function?t():t);let l=i!==void 0,a;const p=o.then(async w=>{if(a=["resolve",w],Ft.isValidElement(w))l=!1,this.create({id:i,type:"default",message:w});else if(HM(w)&&!w.ok){l=!1;const S=typeof r.error=="function"?await r.error(`HTTP error! status: ${w.status}`):r.error,T=typeof r.description=="function"?await r.description(`HTTP error! status: ${w.status}`):r.description,O=typeof S=="object"&&!Ft.isValidElement(S)?S:{message:S};this.create({id:i,type:"error",description:T,...O})}else if(w instanceof Error){l=!1;const S=typeof r.error=="function"?await r.error(w):r.error,T=typeof r.description=="function"?await r.description(w):r.description,O=typeof S=="object"&&!Ft.isValidElement(S)?S:{message:S};this.create({id:i,type:"error",description:T,...O})}else if(r.success!==void 0){l=!1;const S=typeof r.success=="function"?await r.success(w):r.success,T=typeof r.description=="function"?await r.description(w):r.description,O=typeof S=="object"&&!Ft.isValidElement(S)?S:{message:S};this.create({id:i,type:"success",description:T,...O})}}).catch(async w=>{if(a=["reject",w],r.error!==void 0){l=!1;const j=typeof r.error=="function"?await r.error(w):r.error,S=typeof r.description=="function"?await r.description(w):r.description,E=typeof j=="object"&&!Ft.isValidElement(j)?j:{message:j};this.create({id:i,type:"error",description:S,...E})}}).finally(()=>{l&&(this.dismiss(i),i=void 0),r.finally==null||r.finally.call(r)}),g=()=>new Promise((w,j)=>p.then(()=>a[0]==="reject"?j(a[1]):w(a[1])).catch(j));return typeof i!="string"&&typeof i!="number"?{unwrap:g}:Object.assign(i,{unwrap:g})},this.custom=(t,r)=>{const i=(r==null?void 0:r.id)||V2++;return this.create({jsx:t(i),id:i,...r}),i},this.getActiveToasts=()=>this.toasts.filter(t=>!this.dismissedToasts.has(t.id)),this.subscribers=[],this.toasts=[],this.dismissedToasts=new Set}}const Lu=new VM,$M=(n,t)=>{const r=(t==null?void 0:t.id)||V2++;return Lu.addToast({title:n,...t,id:r}),r},HM=n=>n&&typeof n=="object"&&"ok"in n&&typeof n.ok=="boolean"&&"status"in n&&typeof n.status=="number",GM=$M,WM=()=>Lu.toasts,YM=()=>Lu.getActiveToasts(),uf=Object.assign(GM,{success:Lu.success,info:Lu.info,warning:Lu.warning,error:Lu.error,custom:Lu.custom,message:Lu.message,promise:Lu.promise,dismiss:Lu.dismiss,loading:Lu.loading},{getHistory:WM,getToasts:YM});IM("[data-sonner-toaster][dir=ltr],html[dir=ltr]{--toast-icon-margin-start:-3px;--toast-icon-margin-end:4px;--toast-svg-margin-start:-1px;--toast-svg-margin-end:0px;--toast-button-margin-start:auto;--toast-button-margin-end:0;--toast-close-button-start:0;--toast-close-button-end:unset;--toast-close-button-transform:translate(-35%, -35%)}[data-sonner-toaster][dir=rtl],html[dir=rtl]{--toast-icon-margin-start:4px;--toast-icon-margin-end:-3px;--toast-svg-margin-start:0px;--toast-svg-margin-end:-1px;--toast-button-margin-start:0;--toast-button-margin-end:auto;--toast-close-button-start:unset;--toast-close-button-end:0;--toast-close-button-transform:translate(35%, -35%)}[data-sonner-toaster]{position:fixed;width:var(--width);font-family:ui-sans-serif,system-ui,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;--gray1:hsl(0, 0%, 99%);--gray2:hsl(0, 0%, 97.3%);--gray3:hsl(0, 0%, 95.1%);--gray4:hsl(0, 0%, 93%);--gray5:hsl(0, 0%, 90.9%);--gray6:hsl(0, 0%, 88.7%);--gray7:hsl(0, 0%, 85.8%);--gray8:hsl(0, 0%, 78%);--gray9:hsl(0, 0%, 56.1%);--gray10:hsl(0, 0%, 52.3%);--gray11:hsl(0, 0%, 43.5%);--gray12:hsl(0, 0%, 9%);--border-radius:8px;box-sizing:border-box;padding:0;margin:0;list-style:none;outline:0;z-index:999999999;transition:transform .4s ease}@media (hover:none) and (pointer:coarse){[data-sonner-toaster][data-lifted=true]{transform:none}}[data-sonner-toaster][data-x-position=right]{right:var(--offset-right)}[data-sonner-toaster][data-x-position=left]{left:var(--offset-left)}[data-sonner-toaster][data-x-position=center]{left:50%;transform:translateX(-50%)}[data-sonner-toaster][data-y-position=top]{top:var(--offset-top)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--offset-bottom)}[data-sonner-toast]{--y:translateY(100%);--lift-amount:calc(var(--lift) * var(--gap));z-index:var(--z-index);position:absolute;opacity:0;transform:var(--y);touch-action:none;transition:transform .4s,opacity .4s,height .4s,box-shadow .2s;box-sizing:border-box;outline:0;overflow-wrap:anywhere}[data-sonner-toast][data-styled=true]{padding:16px;background:var(--normal-bg);border:1px solid var(--normal-border);color:var(--normal-text);border-radius:var(--border-radius);box-shadow:0 4px 12px rgba(0,0,0,.1);width:var(--width);font-size:13px;display:flex;align-items:center;gap:6px}[data-sonner-toast]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-y-position=top]{top:0;--y:translateY(-100%);--lift:1;--lift-amount:calc(1 * var(--gap))}[data-sonner-toast][data-y-position=bottom]{bottom:0;--y:translateY(100%);--lift:-1;--lift-amount:calc(var(--lift) * var(--gap))}[data-sonner-toast][data-styled=true] [data-description]{font-weight:400;line-height:1.4;color:#3f3f3f}[data-rich-colors=true][data-sonner-toast][data-styled=true] [data-description]{color:inherit}[data-sonner-toaster][data-sonner-theme=dark] [data-description]{color:#e8e8e8}[data-sonner-toast][data-styled=true] [data-title]{font-weight:500;line-height:1.5;color:inherit}[data-sonner-toast][data-styled=true] [data-icon]{display:flex;height:16px;width:16px;position:relative;justify-content:flex-start;align-items:center;flex-shrink:0;margin-left:var(--toast-icon-margin-start);margin-right:var(--toast-icon-margin-end)}[data-sonner-toast][data-promise=true] [data-icon]>svg{opacity:0;transform:scale(.8);transform-origin:center;animation:sonner-fade-in .3s ease forwards}[data-sonner-toast][data-styled=true] [data-icon]>*{flex-shrink:0}[data-sonner-toast][data-styled=true] [data-icon] svg{margin-left:var(--toast-svg-margin-start);margin-right:var(--toast-svg-margin-end)}[data-sonner-toast][data-styled=true] [data-content]{display:flex;flex-direction:column;gap:2px}[data-sonner-toast][data-styled=true] [data-button]{border-radius:4px;padding-left:8px;padding-right:8px;height:24px;font-size:12px;color:var(--normal-bg);background:var(--normal-text);margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end);border:none;font-weight:500;cursor:pointer;outline:0;display:flex;align-items:center;flex-shrink:0;transition:opacity .4s,box-shadow .2s}[data-sonner-toast][data-styled=true] [data-button]:focus-visible{box-shadow:0 0 0 2px rgba(0,0,0,.4)}[data-sonner-toast][data-styled=true] [data-button]:first-of-type{margin-left:var(--toast-button-margin-start);margin-right:var(--toast-button-margin-end)}[data-sonner-toast][data-styled=true] [data-cancel]{color:var(--normal-text);background:rgba(0,0,0,.08)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-styled=true] [data-cancel]{background:rgba(255,255,255,.3)}[data-sonner-toast][data-styled=true] [data-close-button]{position:absolute;left:var(--toast-close-button-start);right:var(--toast-close-button-end);top:0;height:20px;width:20px;display:flex;justify-content:center;align-items:center;padding:0;color:var(--gray12);background:var(--normal-bg);border:1px solid var(--gray4);transform:var(--toast-close-button-transform);border-radius:50%;cursor:pointer;z-index:1;transition:opacity .1s,background .2s,border-color .2s}[data-sonner-toast][data-styled=true] [data-close-button]:focus-visible{box-shadow:0 4px 12px rgba(0,0,0,.1),0 0 0 2px rgba(0,0,0,.2)}[data-sonner-toast][data-styled=true] [data-disabled=true]{cursor:not-allowed}[data-sonner-toast][data-styled=true]:hover [data-close-button]:hover{background:var(--gray2);border-color:var(--gray5)}[data-sonner-toast][data-swiping=true]::before{content:'';position:absolute;left:-100%;right:-100%;height:100%;z-index:-1}[data-sonner-toast][data-y-position=top][data-swiping=true]::before{bottom:50%;transform:scaleY(3) translateY(50%)}[data-sonner-toast][data-y-position=bottom][data-swiping=true]::before{top:50%;transform:scaleY(3) translateY(-50%)}[data-sonner-toast][data-swiping=false][data-removed=true]::before{content:'';position:absolute;inset:0;transform:scaleY(2)}[data-sonner-toast][data-expanded=true]::after{content:'';position:absolute;left:0;height:calc(var(--gap) + 1px);bottom:100%;width:100%}[data-sonner-toast][data-mounted=true]{--y:translateY(0);opacity:1}[data-sonner-toast][data-expanded=false][data-front=false]{--scale:var(--toasts-before) * 0.05 + 1;--y:translateY(calc(var(--lift-amount) * var(--toasts-before))) scale(calc(-1 * var(--scale)));height:var(--front-toast-height)}[data-sonner-toast]>*{transition:opacity .4s}[data-sonner-toast][data-x-position=right]{right:0}[data-sonner-toast][data-x-position=left]{left:0}[data-sonner-toast][data-expanded=false][data-front=false][data-styled=true]>*{opacity:0}[data-sonner-toast][data-visible=false]{opacity:0;pointer-events:none}[data-sonner-toast][data-mounted=true][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset)));height:var(--initial-height)}[data-sonner-toast][data-removed=true][data-front=true][data-swipe-out=false]{--y:translateY(calc(var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=true]{--y:translateY(calc(var(--lift) * var(--offset) + var(--lift) * -100%));opacity:0}[data-sonner-toast][data-removed=true][data-front=false][data-swipe-out=false][data-expanded=false]{--y:translateY(40%);opacity:0;transition:transform .5s,opacity .2s}[data-sonner-toast][data-removed=true][data-front=false]::before{height:calc(var(--initial-height) + 20%)}[data-sonner-toast][data-swiping=true]{transform:var(--y) translateY(var(--swipe-amount-y,0)) translateX(var(--swipe-amount-x,0));transition:none}[data-sonner-toast][data-swiped=true]{user-select:none}[data-sonner-toast][data-swipe-out=true][data-y-position=bottom],[data-sonner-toast][data-swipe-out=true][data-y-position=top]{animation-duration:.2s;animation-timing-function:ease-out;animation-fill-mode:forwards}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=left]{animation-name:swipe-out-left}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=right]{animation-name:swipe-out-right}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=up]{animation-name:swipe-out-up}[data-sonner-toast][data-swipe-out=true][data-swipe-direction=down]{animation-name:swipe-out-down}@keyframes swipe-out-left{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) - 100%));opacity:0}}@keyframes swipe-out-right{from{transform:var(--y) translateX(var(--swipe-amount-x));opacity:1}to{transform:var(--y) translateX(calc(var(--swipe-amount-x) + 100%));opacity:0}}@keyframes swipe-out-up{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) - 100%));opacity:0}}@keyframes swipe-out-down{from{transform:var(--y) translateY(var(--swipe-amount-y));opacity:1}to{transform:var(--y) translateY(calc(var(--swipe-amount-y) + 100%));opacity:0}}@media (max-width:600px){[data-sonner-toaster]{position:fixed;right:var(--mobile-offset-right);left:var(--mobile-offset-left);width:100%}[data-sonner-toaster][dir=rtl]{left:calc(var(--mobile-offset-left) * -1)}[data-sonner-toaster] [data-sonner-toast]{left:0;right:0;width:calc(100% - var(--mobile-offset-left) * 2)}[data-sonner-toaster][data-x-position=left]{left:var(--mobile-offset-left)}[data-sonner-toaster][data-y-position=bottom]{bottom:var(--mobile-offset-bottom)}[data-sonner-toaster][data-y-position=top]{top:var(--mobile-offset-top)}[data-sonner-toaster][data-x-position=center]{left:var(--mobile-offset-left);right:var(--mobile-offset-right);transform:none}}[data-sonner-toaster][data-sonner-theme=light]{--normal-bg:#fff;--normal-border:var(--gray4);--normal-text:var(--gray12);--success-bg:hsl(143, 85%, 96%);--success-border:hsl(145, 92%, 87%);--success-text:hsl(140, 100%, 27%);--info-bg:hsl(208, 100%, 97%);--info-border:hsl(221, 91%, 93%);--info-text:hsl(210, 92%, 45%);--warning-bg:hsl(49, 100%, 97%);--warning-border:hsl(49, 91%, 84%);--warning-text:hsl(31, 92%, 45%);--error-bg:hsl(359, 100%, 97%);--error-border:hsl(359, 100%, 94%);--error-text:hsl(360, 100%, 45%)}[data-sonner-toaster][data-sonner-theme=light] [data-sonner-toast][data-invert=true]{--normal-bg:#000;--normal-border:hsl(0, 0%, 20%);--normal-text:var(--gray1)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast][data-invert=true]{--normal-bg:#fff;--normal-border:var(--gray3);--normal-text:var(--gray12)}[data-sonner-toaster][data-sonner-theme=dark]{--normal-bg:#000;--normal-bg-hover:hsl(0, 0%, 12%);--normal-border:hsl(0, 0%, 20%);--normal-border-hover:hsl(0, 0%, 25%);--normal-text:var(--gray1);--success-bg:hsl(150, 100%, 6%);--success-border:hsl(147, 100%, 12%);--success-text:hsl(150, 86%, 65%);--info-bg:hsl(215, 100%, 6%);--info-border:hsl(223, 43%, 17%);--info-text:hsl(216, 87%, 65%);--warning-bg:hsl(64, 100%, 6%);--warning-border:hsl(60, 100%, 9%);--warning-text:hsl(46, 87%, 65%);--error-bg:hsl(358, 76%, 10%);--error-border:hsl(357, 89%, 16%);--error-text:hsl(358, 100%, 81%)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]{background:var(--normal-bg);border-color:var(--normal-border);color:var(--normal-text)}[data-sonner-toaster][data-sonner-theme=dark] [data-sonner-toast] [data-close-button]:hover{background:var(--normal-bg-hover);border-color:var(--normal-border-hover)}[data-rich-colors=true][data-sonner-toast][data-type=success]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=success] [data-close-button]{background:var(--success-bg);border-color:var(--success-border);color:var(--success-text)}[data-rich-colors=true][data-sonner-toast][data-type=info]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=info] [data-close-button]{background:var(--info-bg);border-color:var(--info-border);color:var(--info-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=warning] [data-close-button]{background:var(--warning-bg);border-color:var(--warning-border);color:var(--warning-text)}[data-rich-colors=true][data-sonner-toast][data-type=error]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}[data-rich-colors=true][data-sonner-toast][data-type=error] [data-close-button]{background:var(--error-bg);border-color:var(--error-border);color:var(--error-text)}.sonner-loading-wrapper{--size:16px;height:var(--size);width:var(--size);position:absolute;inset:0;z-index:10}.sonner-loading-wrapper[data-visible=false]{transform-origin:center;animation:sonner-fade-out .2s ease forwards}.sonner-spinner{position:relative;top:50%;left:50%;height:var(--size);width:var(--size)}.sonner-loading-bar{animation:sonner-spin 1.2s linear infinite;background:var(--gray11);border-radius:6px;height:8%;left:-10%;position:absolute;top:-3.9%;width:24%}.sonner-loading-bar:first-child{animation-delay:-1.2s;transform:rotate(.0001deg) translate(146%)}.sonner-loading-bar:nth-child(2){animation-delay:-1.1s;transform:rotate(30deg) translate(146%)}.sonner-loading-bar:nth-child(3){animation-delay:-1s;transform:rotate(60deg) translate(146%)}.sonner-loading-bar:nth-child(4){animation-delay:-.9s;transform:rotate(90deg) translate(146%)}.sonner-loading-bar:nth-child(5){animation-delay:-.8s;transform:rotate(120deg) translate(146%)}.sonner-loading-bar:nth-child(6){animation-delay:-.7s;transform:rotate(150deg) translate(146%)}.sonner-loading-bar:nth-child(7){animation-delay:-.6s;transform:rotate(180deg) translate(146%)}.sonner-loading-bar:nth-child(8){animation-delay:-.5s;transform:rotate(210deg) translate(146%)}.sonner-loading-bar:nth-child(9){animation-delay:-.4s;transform:rotate(240deg) translate(146%)}.sonner-loading-bar:nth-child(10){animation-delay:-.3s;transform:rotate(270deg) translate(146%)}.sonner-loading-bar:nth-child(11){animation-delay:-.2s;transform:rotate(300deg) translate(146%)}.sonner-loading-bar:nth-child(12){animation-delay:-.1s;transform:rotate(330deg) translate(146%)}@keyframes sonner-fade-in{0%{opacity:0;transform:scale(.8)}100%{opacity:1;transform:scale(1)}}@keyframes sonner-fade-out{0%{opacity:1;transform:scale(1)}100%{opacity:0;transform:scale(.8)}}@keyframes sonner-spin{0%{opacity:1}100%{opacity:.15}}@media (prefers-reduced-motion){.sonner-loading-bar,[data-sonner-toast],[data-sonner-toast]>*{transition:none!important;animation:none!important}}.sonner-loader{position:absolute;top:50%;left:50%;transform:translate(-50%,-50%);transform-origin:center;transition:opacity .2s,transform .2s}.sonner-loader[data-visible=false]{opacity:0;transform:scale(.8) translate(-50%,-50%)}");function j1(n){return n.label!==void 0}const ZM=3,KM="24px",XM="16px",dN=4e3,JM=356,QM=14,eD=45,tD=200;function sf(...n){return n.filter(Boolean).join(" ")}function rD(n){const[t,r]=n.split("-"),i=[];return t&&i.push(t),r&&i.push(r),i}const nD=n=>{var t,r,i,o,l,a,p,g,w;const{invert:j,toast:S,unstyled:T,interacting:E,setHeights:O,visibleToasts:R,heights:F,index:B,toasts:G,expanded:z,removeToast:ee,defaultRichColors:ie,closeButton:ge,style:K,cancelButtonStyle:J,actionButtonStyle:Se,className:_e="",descriptionClassName:re="",duration:ce,position:fe,gap:ye,expandByDefault:Fe,classNames:Q,icons:pe,closeButtonAriaLabel:me="Close toast"}=n,[Ue,Ke]=Ft.useState(null),[Re,te]=Ft.useState(null),[ue,Ne]=Ft.useState(!1),[Me,We]=Ft.useState(!1),[Ve,tt]=Ft.useState(!1),[Qe,St]=Ft.useState(!1),[Et,zt]=Ft.useState(!1),[Lt,wr]=Ft.useState(0),[_t,Ye]=Ft.useState(0),$r=Ft.useRef(S.duration||ce||dN),Cr=Ft.useRef(null),Zt=Ft.useRef(null),Be=B===0,it=B+1<=R,at=S.type,Tt=S.dismissible!==!1,kt=S.className||"",Ot=S.descriptionClassName||"",Qt=Ft.useMemo(()=>F.findIndex(xr=>xr.toastId===S.id)||0,[F,S.id]),zr=Ft.useMemo(()=>{var xr;return(xr=S.closeButton)!=null?xr:ge},[S.closeButton,ge]),Hr=Ft.useMemo(()=>S.duration||ce||dN,[S.duration,ce]),Ur=Ft.useRef(0),nn=Ft.useRef(0),_r=Ft.useRef(0),Ri=Ft.useRef(null),[_n,fi]=fe.split("-"),kn=Ft.useMemo(()=>F.reduce((xr,Lr,oe)=>oe>=Qt?xr:xr+Lr.height,0),[F,Qt]),yn=qM(),va=S.invert||j,zn=at==="loading";nn.current=Ft.useMemo(()=>Qt*ye+kn,[Qt,kn]),Ft.useEffect(()=>{$r.current=Hr},[Hr]),Ft.useEffect(()=>{Ne(!0)},[]),Ft.useEffect(()=>{const xr=Zt.current;if(xr){const Lr=xr.getBoundingClientRect().height;return Ye(Lr),O(oe=>[{toastId:S.id,height:Lr,position:S.position},...oe]),()=>O(oe=>oe.filter(xe=>xe.toastId!==S.id))}},[O,S.id]),Ft.useLayoutEffect(()=>{if(!ue)return;const xr=Zt.current,Lr=xr.style.height;xr.style.height="auto";const oe=xr.getBoundingClientRect().height;xr.style.height=Lr,Ye(oe),O(xe=>xe.find(Te=>Te.toastId===S.id)?xe.map(Te=>Te.toastId===S.id?{...Te,height:oe}:Te):[{toastId:S.id,height:oe,position:S.position},...xe])},[ue,S.title,S.description,O,S.id,S.jsx,S.action,S.cancel]);const Sa=Ft.useCallback(()=>{We(!0),wr(nn.current),O(xr=>xr.filter(Lr=>Lr.toastId!==S.id)),setTimeout(()=>{ee(S)},tD)},[S,ee,O,nn]);Ft.useEffect(()=>{if(S.promise&&at==="loading"||S.duration===1/0||S.type==="loading")return;let xr;return z||E||yn?(()=>{if(_r.current<Ur.current){const xe=new Date().getTime()-Ur.current;$r.current=$r.current-xe}_r.current=new Date().getTime()})():(()=>{$r.current!==1/0&&(Ur.current=new Date().getTime(),xr=setTimeout(()=>{S.onAutoClose==null||S.onAutoClose.call(S,S),Sa()},$r.current))})(),()=>clearTimeout(xr)},[z,E,S,at,yn,Sa]),Ft.useEffect(()=>{S.delete&&(Sa(),S.onDismiss==null||S.onDismiss.call(S,S))},[Sa,S.delete]);function wi(){var xr;if(pe!=null&&pe.loading){var Lr;return Ft.createElement("div",{className:sf(Q==null?void 0:Q.loader,S==null||(Lr=S.classNames)==null?void 0:Lr.loader,"sonner-loader"),"data-visible":at==="loading"},pe.loading)}return Ft.createElement(DM,{className:sf(Q==null?void 0:Q.loader,S==null||(xr=S.classNames)==null?void 0:xr.loader),visible:at==="loading"})}const Cs=S.icon||(pe==null?void 0:pe[at])||LM(at);var zs,pi;return Ft.createElement("li",{tabIndex:0,ref:Zt,className:sf(_e,kt,Q==null?void 0:Q.toast,S==null||(t=S.classNames)==null?void 0:t.toast,Q==null?void 0:Q.default,Q==null?void 0:Q[at],S==null||(r=S.classNames)==null?void 0:r[at]),"data-sonner-toast":"","data-rich-colors":(zs=S.richColors)!=null?zs:ie,"data-styled":!(S.jsx||S.unstyled||T),"data-mounted":ue,"data-promise":!!S.promise,"data-swiped":Et,"data-removed":Me,"data-visible":it,"data-y-position":_n,"data-x-position":fi,"data-index":B,"data-front":Be,"data-swiping":Ve,"data-dismissible":Tt,"data-type":at,"data-invert":va,"data-swipe-out":Qe,"data-swipe-direction":Re,"data-expanded":!!(z||Fe&&ue),"data-testid":S.testId,style:{"--index":B,"--toasts-before":B,"--z-index":G.length-B,"--offset":`${Me?Lt:nn.current}px`,"--initial-height":Fe?"auto":`${_t}px`,...K,...S.style},onDragEnd:()=>{tt(!1),Ke(null),Ri.current=null},onPointerDown:xr=>{xr.button!==2&&(zn||!Tt||(Cr.current=new Date,wr(nn.current),xr.target.setPointerCapture(xr.pointerId),xr.target.tagName!=="BUTTON"&&(tt(!0),Ri.current={x:xr.clientX,y:xr.clientY})))},onPointerUp:()=>{var xr,Lr,oe;if(Qe||!Tt)return;Ri.current=null;const xe=Number(((xr=Zt.current)==null?void 0:xr.style.getPropertyValue("--swipe-amount-x").replace("px",""))||0),Ce=Number(((Lr=Zt.current)==null?void 0:Lr.style.getPropertyValue("--swipe-amount-y").replace("px",""))||0),Te=new Date().getTime()-((oe=Cr.current)==null?void 0:oe.getTime()),De=Ue==="x"?xe:Ce,et=Math.abs(De)/Te;if(Math.abs(De)>=eD||et>.11){wr(nn.current),S.onDismiss==null||S.onDismiss.call(S,S),te(Ue==="x"?xe>0?"right":"left":Ce>0?"down":"up"),Sa(),St(!0);return}else{var nt,ke;(nt=Zt.current)==null||nt.style.setProperty("--swipe-amount-x","0px"),(ke=Zt.current)==null||ke.style.setProperty("--swipe-amount-y","0px")}zt(!1),tt(!1),Ke(null)},onPointerMove:xr=>{var Lr,oe,xe;if(!Ri.current||!Tt||((Lr=window.getSelection())==null?void 0:Lr.toString().length)>0)return;const Te=xr.clientY-Ri.current.y,De=xr.clientX-Ri.current.x;var et;const nt=(et=n.swipeDirections)!=null?et:rD(fe);!Ue&&(Math.abs(De)>1||Math.abs(Te)>1)&&Ke(Math.abs(De)>Math.abs(Te)?"x":"y");let ke={x:0,y:0};const qe=ht=>1/(1.5+Math.abs(ht)/20);if(Ue==="y"){if(nt.includes("top")||nt.includes("bottom"))if(nt.includes("top")&&Te<0||nt.includes("bottom")&&Te>0)ke.y=Te;else{const ht=Te*qe(Te);ke.y=Math.abs(ht)<Math.abs(Te)?ht:Te}}else if(Ue==="x"&&(nt.includes("left")||nt.includes("right")))if(nt.includes("left")&&De<0||nt.includes("right")&&De>0)ke.x=De;else{const ht=De*qe(De);ke.x=Math.abs(ht)<Math.abs(De)?ht:De}(Math.abs(ke.x)>0||Math.abs(ke.y)>0)&&zt(!0),(oe=Zt.current)==null||oe.style.setProperty("--swipe-amount-x",`${ke.x}px`),(xe=Zt.current)==null||xe.style.setProperty("--swipe-amount-y",`${ke.y}px`)}},zr&&!S.jsx&&at!=="loading"?Ft.createElement("button",{"aria-label":me,"data-disabled":zn,"data-close-button":!0,onClick:zn||!Tt?()=>{}:()=>{Sa(),S.onDismiss==null||S.onDismiss.call(S,S)},className:sf(Q==null?void 0:Q.closeButton,S==null||(i=S.classNames)==null?void 0:i.closeButton)},(pi=pe==null?void 0:pe.close)!=null?pi:UM):null,(at||S.icon||S.promise)&&S.icon!==null&&((pe==null?void 0:pe[at])!==null||S.icon)?Ft.createElement("div",{"data-icon":"",className:sf(Q==null?void 0:Q.icon,S==null||(o=S.classNames)==null?void 0:o.icon)},S.promise||S.type==="loading"&&!S.icon?S.icon||wi():null,S.type!=="loading"?Cs:null):null,Ft.createElement("div",{"data-content":"",className:sf(Q==null?void 0:Q.content,S==null||(l=S.classNames)==null?void 0:l.content)},Ft.createElement("div",{"data-title":"",className:sf(Q==null?void 0:Q.title,S==null||(a=S.classNames)==null?void 0:a.title)},S.jsx?S.jsx:typeof S.title=="function"?S.title():S.title),S.description?Ft.createElement("div",{"data-description":"",className:sf(re,Ot,Q==null?void 0:Q.description,S==null||(p=S.classNames)==null?void 0:p.description)},typeof S.description=="function"?S.description():S.description):null),Ft.isValidElement(S.cancel)?S.cancel:S.cancel&&j1(S.cancel)?Ft.createElement("button",{"data-button":!0,"data-cancel":!0,style:S.cancelButtonStyle||J,onClick:xr=>{j1(S.cancel)&&Tt&&(S.cancel.onClick==null||S.cancel.onClick.call(S.cancel,xr),Sa())},className:sf(Q==null?void 0:Q.cancelButton,S==null||(g=S.classNames)==null?void 0:g.cancelButton)},S.cancel.label):null,Ft.isValidElement(S.action)?S.action:S.action&&j1(S.action)?Ft.createElement("button",{"data-button":!0,"data-action":!0,style:S.actionButtonStyle||Se,onClick:xr=>{j1(S.action)&&(S.action.onClick==null||S.action.onClick.call(S.action,xr),!xr.defaultPrevented&&Sa())},className:sf(Q==null?void 0:Q.actionButton,S==null||(w=S.classNames)==null?void 0:w.actionButton)},S.action.label):null)};function hN(){if(typeof window>"u"||typeof document>"u")return"ltr";const n=document.documentElement.getAttribute("dir");return n==="auto"||!n?window.getComputedStyle(document.documentElement).direction:n}function iD(n,t){const r={};return[n,t].forEach((i,o)=>{const l=o===1,a=l?"--mobile-offset":"--offset",p=l?XM:KM;function g(w){["top","right","bottom","left"].forEach(j=>{r[`${a}-${j}`]=typeof w=="number"?`${w}px`:w})}typeof i=="number"||typeof i=="string"?g(i):typeof i=="object"?["top","right","bottom","left"].forEach(w=>{i[w]===void 0?r[`${a}-${w}`]=p:r[`${a}-${w}`]=typeof i[w]=="number"?`${i[w]}px`:i[w]}):g(p)}),r}const sD=Ft.forwardRef(function(t,r){const{id:i,invert:o,position:l="bottom-right",hotkey:a=["altKey","KeyT"],expand:p,closeButton:g,className:w,offset:j,mobileOffset:S,theme:T="light",richColors:E,duration:O,style:R,visibleToasts:F=ZM,toastOptions:B,dir:G=hN(),gap:z=QM,icons:ee,containerAriaLabel:ie="Notifications"}=t,[ge,K]=Ft.useState([]),J=Ft.useMemo(()=>i?ge.filter(ue=>ue.toasterId===i):ge.filter(ue=>!ue.toasterId),[ge,i]),Se=Ft.useMemo(()=>Array.from(new Set([l].concat(J.filter(ue=>ue.position).map(ue=>ue.position)))),[J,l]),[_e,re]=Ft.useState([]),[ce,fe]=Ft.useState(!1),[ye,Fe]=Ft.useState(!1),[Q,pe]=Ft.useState(T!=="system"?T:typeof window<"u"&&window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),me=Ft.useRef(null),Ue=a.join("+").replace(/Key/g,"").replace(/Digit/g,""),Ke=Ft.useRef(null),Re=Ft.useRef(!1),te=Ft.useCallback(ue=>{K(Ne=>{var Me;return(Me=Ne.find(We=>We.id===ue.id))!=null&&Me.delete||Lu.dismiss(ue.id),Ne.filter(({id:We})=>We!==ue.id)})},[]);return Ft.useEffect(()=>Lu.subscribe(ue=>{if(ue.dismiss){requestAnimationFrame(()=>{K(Ne=>Ne.map(Me=>Me.id===ue.id?{...Me,delete:!0}:Me))});return}setTimeout(()=>{Mw.flushSync(()=>{K(Ne=>{const Me=Ne.findIndex(We=>We.id===ue.id);return Me!==-1?[...Ne.slice(0,Me),{...Ne[Me],...ue},...Ne.slice(Me+1)]:[ue,...Ne]})})})}),[ge]),Ft.useEffect(()=>{if(T!=="system"){pe(T);return}if(T==="system"&&(window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches?pe("dark"):pe("light")),typeof window>"u")return;const ue=window.matchMedia("(prefers-color-scheme: dark)");try{ue.addEventListener("change",({matches:Ne})=>{pe(Ne?"dark":"light")})}catch{ue.addListener(({matches:Me})=>{try{pe(Me?"dark":"light")}catch(We){console.error(We)}})}},[T]),Ft.useEffect(()=>{ge.length<=1&&fe(!1)},[ge]),Ft.useEffect(()=>{const ue=Ne=>{var Me;if(a.every(tt=>Ne[tt]||Ne.code===tt)){var Ve;fe(!0),(Ve=me.current)==null||Ve.focus()}Ne.code==="Escape"&&(document.activeElement===me.current||(Me=me.current)!=null&&Me.contains(document.activeElement))&&fe(!1)};return document.addEventListener("keydown",ue),()=>document.removeEventListener("keydown",ue)},[a]),Ft.useEffect(()=>{if(me.current)return()=>{Ke.current&&(Ke.current.focus({preventScroll:!0}),Ke.current=null,Re.current=!1)}},[me.current]),Ft.createElement("section",{ref:r,"aria-label":`${ie} ${Ue}`,tabIndex:-1,"aria-live":"polite","aria-relevant":"additions text","aria-atomic":"false",suppressHydrationWarning:!0},Se.map((ue,Ne)=>{var Me;const[We,Ve]=ue.split("-");return J.length?Ft.createElement("ol",{key:ue,dir:G==="auto"?hN():G,tabIndex:-1,ref:me,className:w,"data-sonner-toaster":!0,"data-sonner-theme":Q,"data-y-position":We,"data-x-position":Ve,style:{"--front-toast-height":`${((Me=_e[0])==null?void 0:Me.height)||0}px`,"--width":`${JM}px`,"--gap":`${z}px`,...R,...iD(j,S)},onBlur:tt=>{Re.current&&!tt.currentTarget.contains(tt.relatedTarget)&&(Re.current=!1,Ke.current&&(Ke.current.focus({preventScroll:!0}),Ke.current=null))},onFocus:tt=>{tt.target instanceof HTMLElement&&tt.target.dataset.dismissible==="false"||Re.current||(Re.current=!0,Ke.current=tt.relatedTarget)},onMouseEnter:()=>fe(!0),onMouseMove:()=>fe(!0),onMouseLeave:()=>{ye||fe(!1)},onDragEnd:()=>fe(!1),onPointerDown:tt=>{tt.target instanceof HTMLElement&&tt.target.dataset.dismissible==="false"||Fe(!0)},onPointerUp:()=>Fe(!1)},J.filter(tt=>!tt.position&&Ne===0||tt.position===ue).map((tt,Qe)=>{var St,Et;return Ft.createElement(nD,{key:tt.id,icons:ee,index:Qe,toast:tt,defaultRichColors:E,duration:(St=B==null?void 0:B.duration)!=null?St:O,className:B==null?void 0:B.className,descriptionClassName:B==null?void 0:B.descriptionClassName,invert:o,visibleToasts:F,closeButton:(Et=B==null?void 0:B.closeButton)!=null?Et:g,interacting:ye,position:ue,style:B==null?void 0:B.style,unstyled:B==null?void 0:B.unstyled,classNames:B==null?void 0:B.classNames,cancelButtonStyle:B==null?void 0:B.cancelButtonStyle,actionButtonStyle:B==null?void 0:B.actionButtonStyle,closeButtonAriaLabel:B==null?void 0:B.closeButtonAriaLabel,removeToast:te,toasts:J.filter(zt=>zt.position==tt.position),heights:_e.filter(zt=>zt.position==tt.position),setHeights:re,expandByDefault:p,gap:z,expanded:ce,swipeDirections:t.swipeDirections})})):null}))}),aD=({...n})=>{const[t,r]=M.useState("system");return M.useEffect(()=>{const i=document.documentElement.classList.contains("dark");r(i?"dark":"light");const o=new MutationObserver(l=>{l.forEach(a=>{if(a.attributeName==="class"){const p=document.documentElement.classList.contains("dark");r(p?"dark":"light")}})});return o.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>o.disconnect()},[]),e.jsx(sD,{theme:t,className:"toaster group",toastOptions:{classNames:{toast:"group toast group-[.toaster]:bg-background group-[.toaster]:text-foreground group-[.toaster]:border-border group-[.toaster]:shadow-lg",description:"group-[.toast]:text-muted-foreground",actionButton:"group-[.toast]:bg-primary group-[.toast]:text-primary-foreground",cancelButton:"group-[.toast]:bg-muted group-[.toast]:text-muted-foreground"}},...n})};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const oD=n=>n.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),GA=(...n)=>n.filter((t,r,i)=>!!t&&t.trim()!==""&&i.indexOf(t)===r).join(" ").trim();/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var lD={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cD=M.forwardRef(({color:n="currentColor",size:t=24,strokeWidth:r=2,absoluteStrokeWidth:i,className:o="",children:l,iconNode:a,...p},g)=>M.createElement("svg",{ref:g,...lD,width:t,height:t,stroke:n,strokeWidth:i?Number(r)*24/Number(t):r,className:GA("lucide",o),...p},[...a.map(([w,j])=>M.createElement(w,j)),...Array.isArray(l)?l:[l]]));/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cr=(n,t)=>{const r=M.forwardRef(({className:i,...o},l)=>M.createElement(cD,{ref:l,iconNode:t,className:GA(`lucide-${oD(n)}`,i),...o}));return r.displayName=`${n}`,r};/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uD=[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]],pd=cr("ArrowLeft",uD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dD=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]],Fv=cr("ArrowRight",dD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hD=[["path",{d:"m3 8 4-4 4 4",key:"11wl7u"}],["path",{d:"M7 4v16",key:"1glfcx"}],["path",{d:"M11 12h4",key:"q8tih4"}],["path",{d:"M11 16h7",key:"uosisv"}],["path",{d:"M11 20h10",key:"jvxblo"}]],Qw=cr("ArrowUpNarrowWide",hD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const fD=[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]],vy=cr("Award",fD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pD=[["path",{d:"M10.268 21a2 2 0 0 0 3.464 0",key:"vwvbt9"}],["path",{d:"M3.262 15.326A1 1 0 0 0 4 17h16a1 1 0 0 0 .74-1.673C19.41 13.956 18 12.499 18 8A6 6 0 0 0 6 8c0 4.499-1.411 5.956-2.738 7.326",key:"11g9vi"}]],Ih=cr("Bell",pD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const mD=[["path",{d:"m19 21-7-4-7 4V5a2 2 0 0 1 2-2h10a2 2 0 0 1 2 2v16z",key:"1fy3hk"}]],kx=cr("Bookmark",mD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gD=[["path",{d:"M12 5a3 3 0 1 0-5.997.125 4 4 0 0 0-2.526 5.77 4 4 0 0 0 .556 6.588A4 4 0 1 0 12 18Z",key:"l5xja"}],["path",{d:"M12 5a3 3 0 1 1 5.997.125 4 4 0 0 1 2.526 5.77 4 4 0 0 1-.556 6.588A4 4 0 1 1 12 18Z",key:"ep3f8r"}],["path",{d:"M15 13a4.5 4.5 0 0 1-3-4 4.5 4.5 0 0 1-3 4",key:"1p4c4q"}],["path",{d:"M17.599 6.5a3 3 0 0 0 .399-1.375",key:"tmeiqw"}],["path",{d:"M6.003 5.125A3 3 0 0 0 6.401 6.5",key:"105sqy"}],["path",{d:"M3.477 10.896a4 4 0 0 1 .585-.396",key:"ql3yin"}],["path",{d:"M19.938 10.5a4 4 0 0 1 .585.396",key:"1qfode"}],["path",{d:"M6 18a4 4 0 0 1-1.967-.516",key:"2e4loj"}],["path",{d:"M19.967 17.484A4 4 0 0 1 18 18",key:"159ez6"}]],N1=cr("Brain",gD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vD=[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]],gm=cr("Briefcase",vD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yD=[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]],$o=cr("Building2",yD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xD=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]],mp=cr("Building",xD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bD=[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",key:"1nb95v"}],["line",{x1:"8",x2:"16",y1:"6",y2:"6",key:"x4nwl0"}],["line",{x1:"16",x2:"16",y1:"14",y2:"18",key:"wjye3r"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M8 14h.01",key:"6423bh"}],["path",{d:"M12 18h.01",key:"mhygvu"}],["path",{d:"M8 18h.01",key:"lrp35t"}]],Qv=cr("Calculator",bD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _D=[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]],gp=cr("Calendar",_D);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wD=[["path",{d:"M14.5 4h-5L7 7H4a2 2 0 0 0-2 2v9a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2V9a2 2 0 0 0-2-2h-3l-2.5-3z",key:"1tc9qg"}],["circle",{cx:"12",cy:"13",r:"3",key:"1vg3eu"}]],jD=cr("Camera",wD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ND=[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]],ey=cr("ChartColumn",ND);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SD=[["path",{d:"M21 12c.552 0 1.005-.449.95-.998a10 10 0 0 0-8.953-8.951c-.55-.055-.998.398-.998.95v8a1 1 0 0 0 1 1z",key:"pzmjnu"}],["path",{d:"M21.21 15.89A10 10 0 1 1 8 2.83",key:"k2fpak"}]],AD=cr("ChartPie",SD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CD=[["path",{d:"M18 6 7 17l-5-5",key:"116fxf"}],["path",{d:"m22 10-7.5 7.5L13 16",key:"ke71qq"}]],kD=cr("CheckCheck",CD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ED=[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]],Rm=cr("Check",ED);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TD=[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]],tb=cr("ChevronDown",TD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PD=[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]],WA=cr("ChevronLeft",PD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RD=[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]],ej=cr("ChevronRight",RD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ID=[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]],LD=cr("ChevronUp",ID);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]],jc=cr("CircleAlert",MD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DD=[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]],Nn=cr("CircleCheckBig",DD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],zD=cr("CircleCheck",OD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3",key:"1u773s"}],["path",{d:"M12 17h.01",key:"p32p05"}]],fN=cr("CircleHelp",FD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polygon",{points:"10 8 16 12 10 16 10 8",key:"1cimsy"}]],YA=cr("CirclePlay",BD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]],zx=cr("CircleX",UD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]],ZA=cr("Circle",qD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VD=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]],Xd=cr("Clock",VD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $D=[["rect",{width:"14",height:"14",x:"8",y:"8",rx:"2",ry:"2",key:"17jyea"}],["path",{d:"M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2",key:"zix9uf"}]],HD=cr("Copy",$D);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const GD=[["path",{d:"M11.562 3.266a.5.5 0 0 1 .876 0L15.39 8.87a1 1 0 0 0 1.516.294L21.183 5.5a.5.5 0 0 1 .798.519l-2.834 10.246a1 1 0 0 1-.956.734H5.81a1 1 0 0 1-.957-.734L2.02 6.02a.5.5 0 0 1 .798-.519l4.276 3.664a1 1 0 0 0 1.516-.294z",key:"1vdc57"}],["path",{d:"M5 21h14",key:"11awu3"}]],WD=cr("Crown",GD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const YD=[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]],yf=cr("DollarSign",YD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZD=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]],wc=cr("Download",ZD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const KD=[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["circle",{cx:"19",cy:"12",r:"1",key:"1wjl8i"}],["circle",{cx:"5",cy:"12",r:"1",key:"1pcz8c"}]],tj=cr("Ellipsis",KD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XD=[["path",{d:"M15 3h6v6",key:"1q9fwt"}],["path",{d:"M10 14 21 3",key:"gplh6r"}],["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}]],JD=cr("ExternalLink",XD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QD=[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]],ff=cr("EyeOff",QD);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const eO=[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Ua=cr("Eye",eO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const tO=[["path",{d:"M18 2h-3a5 5 0 0 0-5 5v3H7v4h3v8h4v-8h3l1-4h-4V7a1 1 0 0 1 1-1h3z",key:"1jg4f8"}]],rO=cr("Facebook",tO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const nO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m9 15 2 2 4-4",key:"1grp1n"}]],iO=cr("FileCheck",nO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const sO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]],Ys=cr("FileText",sO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const aO=[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"m14.5 12.5-5 5",key:"b62r18"}],["path",{d:"m9.5 12.5 5 5",key:"1rk7el"}]],oO=cr("FileX",aO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lO=[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]],Qx=cr("Filter",lO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const cO=[["path",{d:"M8.5 14.5A2.5 2.5 0 0 0 11 12c0-1.38-.5-2-1-3-1.072-2.143-.224-4.054 2-6 .5 2.5 2 4.9 4 6.5 2 1.6 3 3.5 3 5.5a7 7 0 1 1-14 0c0-1.153.433-2.294 1-3a2.5 2.5 0 0 0 2.5 2.5z",key:"96xj49"}]],rb=cr("Flame",cO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const uO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]],wm=cr("Globe",uO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const dO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",key:"afitv7"}],["path",{d:"M3 9h18",key:"1pudct"}],["path",{d:"M3 15h18",key:"5xshup"}],["path",{d:"M9 3v18",key:"fh3hqa"}],["path",{d:"M15 3v18",key:"14nvp0"}]],rj=cr("Grid3x3",dO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hO=[["path",{d:"m11 17 2 2a1 1 0 1 0 3-3",key:"efffak"}],["path",{d:"m14 14 2.5 2.5a1 1 0 1 0 3-3l-3.88-3.88a3 3 0 0 0-4.24 0l-.88.88a1 1 0 1 1-3-3l2.81-2.81a5.79 5.79 0 0 1 7.06-.87l.47.28a2 2 0 0 0 1.42.25L21 4",key:"9pr0kb"}],["path",{d:"m21 3 1 11h-2",key:"1tisrp"}],["path",{d:"M3 3 2 14l6.5 6.5a1 1 0 1 0 3-3",key:"1uvwmv"}],["path",{d:"M3 4h8",key:"1ep09j"}]],fO=cr("Handshake",hO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const pO=[["path",{d:"M3 14h3a2 2 0 0 1 2 2v3a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-7a9 9 0 0 1 18 0v7a2 2 0 0 1-2 2h-1a2 2 0 0 1-2-2v-3a2 2 0 0 1 2-2h3",key:"1xhozi"}]],mO=cr("Headphones",pO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const gO=[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]],Rg=cr("Heart",gO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vO=[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]],nj=cr("House",vO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yO=[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]],KA=cr("Image",yO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xO=[["polyline",{points:"22 12 16 12 14 15 10 15 8 12 2 12",key:"o97t9d"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}]],bO=cr("Inbox",xO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _O=[["path",{d:"M6 3h12",key:"ggurg9"}],["path",{d:"M6 8h12",key:"6g4wlu"}],["path",{d:"m6 13 8.5 8",key:"u1kupk"}],["path",{d:"M6 13h3",key:"wdp6ag"}],["path",{d:"M9 13c6.667 0 6.667-10 0-10",key:"1nkvk2"}]],ij=cr("IndianRupee",_O);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wO=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]],XA=cr("Info",wO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jO=[["rect",{width:"20",height:"20",x:"2",y:"2",rx:"5",ry:"5",key:"2e1cvw"}],["path",{d:"M16 11.37A4 4 0 1 1 12.63 8 4 4 0 0 1 16 11.37z",key:"9exkf1"}],["line",{x1:"17.5",x2:"17.51",y1:"6.5",y2:"6.5",key:"r4j83e"}]],NO=cr("Instagram",jO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SO=[["path",{d:"M2.586 17.414A2 2 0 0 0 2 18.828V21a1 1 0 0 0 1 1h3a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h1a1 1 0 0 0 1-1v-1a1 1 0 0 1 1-1h.172a2 2 0 0 0 1.414-.586l.814-.814a6.5 6.5 0 1 0-4-4z",key:"1s6t7t"}],["circle",{cx:"16.5",cy:"7.5",r:".5",fill:"currentColor",key:"w0ekpg"}]],JA=cr("KeyRound",SO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AO=[["path",{d:"M15 14c.2-1 .7-1.7 1.5-2.5 1-.9 1.5-2.2 1.5-3.5A6 6 0 0 0 6 8c0 1 .2 2.2 1.5 3.5.7.7 1.3 1.5 1.5 2.5",key:"1gvzjb"}],["path",{d:"M9 18h6",key:"x1upvd"}],["path",{d:"M10 22h4",key:"ceow96"}]],nb=cr("Lightbulb",AO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CO=[["path",{d:"M16 8a6 6 0 0 1 6 6v7h-4v-7a2 2 0 0 0-2-2 2 2 0 0 0-2 2v7h-4v-7a6 6 0 0 1 6-6z",key:"c2jq9f"}],["rect",{width:"4",height:"12",x:"2",y:"9",key:"mk3on5"}],["circle",{cx:"4",cy:"4",r:"2",key:"bt5ra8"}]],kO=cr("Linkedin",CO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const EO=[["path",{d:"M3 12h.01",key:"nlz23k"}],["path",{d:"M3 18h.01",key:"1tta3j"}],["path",{d:"M3 6h.01",key:"1rqtza"}],["path",{d:"M8 12h13",key:"1za7za"}],["path",{d:"M8 18h13",key:"1lx6n3"}],["path",{d:"M8 6h13",key:"ik3vkj"}]],sj=cr("List",EO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TO=[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]],eo=cr("LoaderCircle",TO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 9.9-1",key:"1mm8w8"}]],RO=cr("LockOpen",PO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const IO=[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]],Mh=cr("Lock",IO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LO=[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]],MO=cr("LogOut",LO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const DO=[["path",{d:"M21.2 8.4c.5.38.8.97.8 1.6v10a2 2 0 0 1-2 2H4a2 2 0 0 1-2-2V10a2 2 0 0 1 .8-1.6l8-6a2 2 0 0 1 2.4 0l8 6Z",key:"1jhwl8"}],["path",{d:"m22 10-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 10",key:"1qfld7"}]],OO=cr("MailOpen",DO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zO=[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]],bu=cr("Mail",zO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const FO=[["path",{d:"M20 10c0 4.993-5.539 10.193-7.399 11.799a1 1 0 0 1-1.202 0C9.539 20.193 4 14.993 4 10a8 8 0 0 1 16 0",key:"1r0f0z"}],["circle",{cx:"12",cy:"10",r:"3",key:"ilqhr7"}]],Ja=cr("MapPin",FO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const BO=[["path",{d:"M14.106 5.553a2 2 0 0 0 1.788 0l3.659-1.83A1 1 0 0 1 21 4.619v12.764a1 1 0 0 1-.553.894l-4.553 2.277a2 2 0 0 1-1.788 0l-4.212-2.106a2 2 0 0 0-1.788 0l-3.659 1.83A1 1 0 0 1 3 19.381V6.618a1 1 0 0 1 .553-.894l4.553-2.277a2 2 0 0 1 1.788 0z",key:"169xi5"}],["path",{d:"M15 5.764v15",key:"1pn4in"}],["path",{d:"M9 3.236v15",key:"1uimfh"}]],ib=cr("Map",BO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const UO=[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]],qO=cr("Menu",UO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const VO=[["path",{d:"M7.9 20A9 9 0 1 0 4 16.1L2 22Z",key:"vv11sd"}]],e0=cr("MessageCircle",VO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $O=[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]],sb=cr("MessageSquare",$O);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const HO=[["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}],["path",{d:"M18.89 13.23A7.12 7.12 0 0 0 19 12v-2",key:"80xlxr"}],["path",{d:"M5 10v2a7 7 0 0 0 12 5",key:"p2k8kg"}],["path",{d:"M15 9.34V5a3 3 0 0 0-5.68-1.33",key:"1gzdoj"}],["path",{d:"M9 9v3a3 3 0 0 0 5.12 2.12",key:"r2i35w"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],GO=cr("MicOff",HO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const WO=[["path",{d:"M12 2a3 3 0 0 0-3 3v7a3 3 0 0 0 6 0V5a3 3 0 0 0-3-3Z",key:"131961"}],["path",{d:"M19 10v2a7 7 0 0 1-14 0v-2",key:"1vc78b"}],["line",{x1:"12",x2:"12",y1:"19",y2:"22",key:"x3vr5v"}]],YO=cr("Mic",WO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ZO=[["path",{d:"M13.234 20.252 21 12.3",key:"1cbrk9"}],["path",{d:"m16 6-8.414 8.586a2 2 0 0 0 0 2.828 2 2 0 0 0 2.828 0l8.414-8.586a4 4 0 0 0 0-5.656 4 4 0 0 0-5.656 0l-8.415 8.585a6 6 0 1 0 8.486 8.486",key:"1pkts6"}]],KO=cr("Paperclip",ZO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const XO=[["line",{x1:"19",x2:"5",y1:"5",y2:"19",key:"1x9vlm"}],["circle",{cx:"6.5",cy:"6.5",r:"2.5",key:"4mh3h7"}],["circle",{cx:"17.5",cy:"17.5",r:"2.5",key:"1mdrzq"}]],JO=cr("Percent",XO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const QO=[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]],Kc=cr("Phone",QO);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const e8=[["polygon",{points:"6 3 20 12 6 21 6 3",key:"1oa8hb"}]],t8=cr("Play",e8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const r8=[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]],Lh=cr("Plus",r8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const n8=[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]],$2=cr("RefreshCw",n8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const i8=[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]],ty=cr("Save",i8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const s8=[["path",{d:"m16 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"7g6ntu"}],["path",{d:"m2 16 3-8 3 8c-.87.65-1.92 1-3 1s-2.13-.35-3-1Z",key:"ijws7r"}],["path",{d:"M7 21h10",key:"1b0cd5"}],["path",{d:"M12 3v18",key:"108xh3"}],["path",{d:"M3 7h2c2 0 5-1 7-2 2 1 5 2 7 2h2",key:"3gwbw2"}]],pN=cr("Scale",s8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const a8=[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]],md=cr("Search",a8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const o8=[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]],aj=cr("Send",o8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const l8=[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]],Bb=cr("Settings",l8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const c8=[["circle",{cx:"18",cy:"5",r:"3",key:"gq8acd"}],["circle",{cx:"6",cy:"12",r:"3",key:"w7nqdw"}],["circle",{cx:"18",cy:"19",r:"3",key:"1xt0gg"}],["line",{x1:"8.59",x2:"15.42",y1:"13.51",y2:"17.49",key:"47mynk"}],["line",{x1:"15.41",x2:"8.59",y1:"6.51",y2:"10.49",key:"1n3mei"}]],yy=cr("Share2",c8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u8=[["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["polyline",{points:"16 6 12 2 8 6",key:"m901s6"}],["line",{x1:"12",x2:"12",y1:"2",y2:"15",key:"1p0rca"}]],QA=cr("Share",u8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const d8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"M12 8v4",key:"1got3b"}],["path",{d:"M12 16h.01",key:"1drbdi"}]],h8=cr("ShieldAlert",d8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const f8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]],jm=cr("ShieldCheck",f8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const p8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}],["path",{d:"m14.5 9.5-5 5",key:"17q4r4"}],["path",{d:"m9.5 9.5 5 5",key:"18nt4w"}]],m8=cr("ShieldX",p8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const g8=[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]],bs=cr("Shield",g8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const v8=[["path",{d:"m10 20-1.25-2.5L6 18",key:"18frcb"}],["path",{d:"M10 4 8.75 6.5 6 6",key:"7mghy3"}],["path",{d:"m14 20 1.25-2.5L18 18",key:"1chtki"}],["path",{d:"m14 4 1.25 2.5L18 6",key:"1b4wsy"}],["path",{d:"m17 21-3-6h-4",key:"15hhxa"}],["path",{d:"m17 3-3 6 1.5 3",key:"11697g"}],["path",{d:"M2 12h6.5L10 9",key:"kv9z4n"}],["path",{d:"m20 10-1.5 2 1.5 2",key:"1swlpi"}],["path",{d:"M22 12h-6.5L14 15",key:"1mxi28"}],["path",{d:"m4 10 1.5 2L4 14",key:"k9enpj"}],["path",{d:"m7 21 3-6-1.5-3",key:"j8hb9u"}],["path",{d:"m7 3 3 6h4",key:"1otusx"}]],mN=cr("Snowflake",v8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const y8=[["path",{d:"M9.937 15.5A2 2 0 0 0 8.5 14.063l-6.135-1.582a.5.5 0 0 1 0-.962L8.5 9.936A2 2 0 0 0 9.937 8.5l1.582-6.135a.5.5 0 0 1 .963 0L14.063 8.5A2 2 0 0 0 15.5 9.937l6.135 1.581a.5.5 0 0 1 0 .964L15.5 14.063a2 2 0 0 0-1.437 1.437l-1.582 6.135a.5.5 0 0 1-.963 0z",key:"4pj2yx"}],["path",{d:"M20 3v4",key:"1olli1"}],["path",{d:"M22 5h-4",key:"1gvqau"}],["path",{d:"M4 17v2",key:"vumght"}],["path",{d:"M5 18H3",key:"zchphs"}]],hd=cr("Sparkles",y8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const x8=[["path",{d:"M12 3H5a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1m0v6g"}],["path",{d:"M18.375 2.625a1 1 0 0 1 3 3l-9.013 9.014a2 2 0 0 1-.853.505l-2.873.84a.5.5 0 0 1-.62-.62l.84-2.873a2 2 0 0 1 .506-.852z",key:"ohrbg2"}]],ab=cr("SquarePen",x8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const b8=[["path",{d:"M11.525 2.295a.53.53 0 0 1 .95 0l2.31 4.679a2.123 2.123 0 0 0 1.595 1.16l5.166.756a.53.53 0 0 1 .294.904l-3.736 3.638a2.123 2.123 0 0 0-.611 1.878l.882 5.14a.53.53 0 0 1-.771.56l-4.618-2.428a2.122 2.122 0 0 0-1.973 0L6.396 21.01a.53.53 0 0 1-.77-.56l.881-5.139a2.122 2.122 0 0 0-.611-1.879L2.16 9.795a.53.53 0 0 1 .294-.906l5.165-.755a2.122 2.122 0 0 0 1.597-1.16z",key:"r04s7s"}]],pf=cr("Star",b8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _8=[["path",{d:"m2 7 4.41-4.41A2 2 0 0 1 7.83 2h8.34a2 2 0 0 1 1.42.59L22 7",key:"ztvudi"}],["path",{d:"M4 12v8a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2v-8",key:"1b2hhj"}],["path",{d:"M15 22v-4a2 2 0 0 0-2-2h-2a2 2 0 0 0-2 2v4",key:"2ebpfo"}],["path",{d:"M2 7h20",key:"1fcdvo"}],["path",{d:"M22 7v3a2 2 0 0 1-2 2a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 16 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 12 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 8 12a2.7 2.7 0 0 1-1.59-.63.7.7 0 0 0-.82 0A2.7 2.7 0 0 1 4 12a2 2 0 0 1-2-2V7",key:"6c3vgh"}]],vm=cr("Store",_8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const w8=[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["circle",{cx:"12",cy:"12",r:"6",key:"1vlfrh"}],["circle",{cx:"12",cy:"12",r:"2",key:"1c9p78"}]],ry=cr("Target",w8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const j8=[["path",{d:"M12 9a4 4 0 0 0-2 7.5",key:"1jvsq6"}],["path",{d:"M12 3v2",key:"1w22ol"}],["path",{d:"m6.6 18.4-1.4 1.4",key:"w2yidj"}],["path",{d:"M20 4v10.54a4 4 0 1 1-4 0V4a2 2 0 0 1 4 0Z",key:"iof6y5"}],["path",{d:"M4 13H2",key:"118le4"}],["path",{d:"M6.34 7.34 4.93 5.93",key:"1brd51"}]],gN=cr("ThermometerSun",j8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const N8=[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]],xf=cr("Trash2",N8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const S8=[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]],na=cr("TrendingUp",S8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const A8=[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]],Xc=cr("TriangleAlert",A8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const C8=[["path",{d:"M22 4s-.7 2.1-2 3.4c1.6 10-9.4 17.3-18 11.6 2.2.1 4.4-.6 6-2C3 15.5.5 9.6 3 5c2.2 2.6 5.6 4.1 9 4-.9-4.2 4-6.6 7-3.8 1.1 0 3-1.2 3-1.2z",key:"pff0z6"}]],k8=cr("Twitter",C8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const E8=[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]],Jd=cr("Upload",E8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const T8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["polyline",{points:"16 11 18 13 22 9",key:"1pwet4"}]],P8=cr("UserCheck",T8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const R8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]],I8=cr("UserPlus",R8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const L8=[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]],vp=cr("User",L8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const M8=[["path",{d:"M18 21a8 8 0 0 0-16 0",key:"3ypg7q"}],["circle",{cx:"10",cy:"8",r:"5",key:"o932ke"}],["path",{d:"M22 20c0-3.37-2-6.5-4-8a5 5 0 0 0-.45-8.3",key:"10s06x"}]],D8=cr("UsersRound",M8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const O8=[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]],Go=cr("Users",O8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const z8=[["path",{d:"m16 13 5.223 3.482a.5.5 0 0 0 .777-.416V7.87a.5.5 0 0 0-.752-.432L16 10.5",key:"ftymec"}],["rect",{x:"2",y:"6",width:"14",height:"12",rx:"2",key:"158x01"}]],F8=cr("Video",z8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const B8=[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]],Gc=cr("X",B8);/**
 * @license lucide-react v0.477.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const U8=[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]],vN=cr("Zap",U8);function yN(n,t){if(typeof n=="function")return n(t);n!=null&&(n.current=t)}function wf(...n){return t=>{let r=!1;const i=n.map(o=>{const l=yN(o,t);return!r&&typeof l=="function"&&(r=!0),l});if(r)return()=>{for(let o=0;o<i.length;o++){const l=i[o];typeof l=="function"?l():yN(n[o],null)}}}}function Wn(...n){return M.useCallback(wf(...n),n)}var q8=Symbol.for("react.lazy"),ob=Lw[" use ".trim().toString()];function V8(n){return typeof n=="object"&&n!==null&&"then"in n}function e3(n){return n!=null&&typeof n=="object"&&"$$typeof"in n&&n.$$typeof===q8&&"_payload"in n&&V8(n._payload)}function t0(n){const t=$8(n),r=M.forwardRef((i,o)=>{let{children:l,...a}=i;e3(l)&&typeof ob=="function"&&(l=ob(l._payload));const p=M.Children.toArray(l),g=p.find(G8);if(g){const w=g.props.children,j=p.map(S=>S===g?M.Children.count(w)>1?M.Children.only(null):M.isValidElement(w)?w.props.children:null:S);return e.jsx(t,{...a,ref:o,children:M.isValidElement(w)?M.cloneElement(w,void 0,j):null})}return e.jsx(t,{...a,ref:o,children:l})});return r.displayName=`${n}.Slot`,r}var t3=t0("Slot");function $8(n){const t=M.forwardRef((r,i)=>{let{children:o,...l}=r;if(e3(o)&&typeof ob=="function"&&(o=ob(o._payload)),M.isValidElement(o)){const a=Y8(o),p=W8(l,o.props);return o.type!==M.Fragment&&(p.ref=i?wf(i,a):a),M.cloneElement(o,p)}return M.Children.count(o)>1?M.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var H8=Symbol("radix.slottable");function G8(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===H8}function W8(n,t){const r={...t};for(const i in t){const o=n[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...p)=>{const g=l(...p);return o(...p),g}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...n,...r}}function Y8(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}function r3(n){var t,r,i="";if(typeof n=="string"||typeof n=="number")i+=n;else if(typeof n=="object")if(Array.isArray(n)){var o=n.length;for(t=0;t<o;t++)n[t]&&(r=r3(n[t]))&&(i&&(i+=" "),i+=r)}else for(r in n)n[r]&&(i&&(i+=" "),i+=r);return i}function n3(){for(var n,t,r=0,i="",o=arguments.length;r<o;r++)(n=arguments[r])&&(t=r3(n))&&(i&&(i+=" "),i+=t);return i}const xN=n=>typeof n=="boolean"?`${n}`:n===0?"0":n,bN=n3,r0=(n,t)=>r=>{var i;if((t==null?void 0:t.variants)==null)return bN(n,r==null?void 0:r.class,r==null?void 0:r.className);const{variants:o,defaultVariants:l}=t,a=Object.keys(o).map(w=>{const j=r==null?void 0:r[w],S=l==null?void 0:l[w];if(j===null)return null;const T=xN(j)||xN(S);return o[w][T]}),p=r&&Object.entries(r).reduce((w,j)=>{let[S,T]=j;return T===void 0||(w[S]=T),w},{}),g=t==null||(i=t.compoundVariants)===null||i===void 0?void 0:i.reduce((w,j)=>{let{class:S,className:T,...E}=j;return Object.entries(E).every(O=>{let[R,F]=O;return Array.isArray(F)?F.includes({...l,...p}[R]):{...l,...p}[R]===F})?[...w,S,T]:w},[]);return bN(n,a,g,r==null?void 0:r.class,r==null?void 0:r.className)},Z8=(n,t)=>{const r=new Array(n.length+t.length);for(let i=0;i<n.length;i++)r[i]=n[i];for(let i=0;i<t.length;i++)r[n.length+i]=t[i];return r},K8=(n,t)=>({classGroupId:n,validator:t}),i3=(n=new Map,t=null,r)=>({nextPart:n,validators:t,classGroupId:r}),lb="-",_N=[],X8="arbitrary..",J8=n=>{const t=ez(n),{conflictingClassGroups:r,conflictingClassGroupModifiers:i}=n;return{getClassGroupId:a=>{if(a.startsWith("[")&&a.endsWith("]"))return Q8(a);const p=a.split(lb),g=p[0]===""&&p.length>1?1:0;return s3(p,g,t)},getConflictingClassGroupIds:(a,p)=>{if(p){const g=i[a],w=r[a];return g?w?Z8(w,g):g:w||_N}return r[a]||_N}}},s3=(n,t,r)=>{if(n.length-t===0)return r.classGroupId;const o=n[t],l=r.nextPart.get(o);if(l){const w=s3(n,t+1,l);if(w)return w}const a=r.validators;if(a===null)return;const p=t===0?n.join(lb):n.slice(t).join(lb),g=a.length;for(let w=0;w<g;w++){const j=a[w];if(j.validator(p))return j.classGroupId}},Q8=n=>n.slice(1,-1).indexOf(":")===-1?void 0:(()=>{const t=n.slice(1,-1),r=t.indexOf(":"),i=t.slice(0,r);return i?X8+i:void 0})(),ez=n=>{const{theme:t,classGroups:r}=n;return tz(r,t)},tz=(n,t)=>{const r=i3();for(const i in n){const o=n[i];oj(o,r,i,t)}return r},oj=(n,t,r,i)=>{const o=n.length;for(let l=0;l<o;l++){const a=n[l];rz(a,t,r,i)}},rz=(n,t,r,i)=>{if(typeof n=="string"){nz(n,t,r);return}if(typeof n=="function"){iz(n,t,r,i);return}sz(n,t,r,i)},nz=(n,t,r)=>{const i=n===""?t:a3(t,n);i.classGroupId=r},iz=(n,t,r,i)=>{if(az(n)){oj(n(i),t,r,i);return}t.validators===null&&(t.validators=[]),t.validators.push(K8(r,n))},sz=(n,t,r,i)=>{const o=Object.entries(n),l=o.length;for(let a=0;a<l;a++){const[p,g]=o[a];oj(g,a3(t,p),r,i)}},a3=(n,t)=>{let r=n;const i=t.split(lb),o=i.length;for(let l=0;l<o;l++){const a=i[l];let p=r.nextPart.get(a);p||(p=i3(),r.nextPart.set(a,p)),r=p}return r},az=n=>"isThemeGetter"in n&&n.isThemeGetter===!0,oz=n=>{if(n<1)return{get:()=>{},set:()=>{}};let t=0,r=Object.create(null),i=Object.create(null);const o=(l,a)=>{r[l]=a,t++,t>n&&(t=0,i=r,r=Object.create(null))};return{get(l){let a=r[l];if(a!==void 0)return a;if((a=i[l])!==void 0)return o(l,a),a},set(l,a){l in r?r[l]=a:o(l,a)}}},H2="!",wN=":",lz=[],jN=(n,t,r,i,o)=>({modifiers:n,hasImportantModifier:t,baseClassName:r,maybePostfixModifierPosition:i,isExternal:o}),cz=n=>{const{prefix:t,experimentalParseClassName:r}=n;let i=o=>{const l=[];let a=0,p=0,g=0,w;const j=o.length;for(let R=0;R<j;R++){const F=o[R];if(a===0&&p===0){if(F===wN){l.push(o.slice(g,R)),g=R+1;continue}if(F==="/"){w=R;continue}}F==="["?a++:F==="]"?a--:F==="("?p++:F===")"&&p--}const S=l.length===0?o:o.slice(g);let T=S,E=!1;S.endsWith(H2)?(T=S.slice(0,-1),E=!0):S.startsWith(H2)&&(T=S.slice(1),E=!0);const O=w&&w>g?w-g:void 0;return jN(l,E,T,O)};if(t){const o=t+wN,l=i;i=a=>a.startsWith(o)?l(a.slice(o.length)):jN(lz,!1,a,void 0,!0)}if(r){const o=i;i=l=>r({className:l,parseClassName:o})}return i},uz=n=>{const t=new Map;return n.orderSensitiveModifiers.forEach((r,i)=>{t.set(r,1e6+i)}),r=>{const i=[];let o=[];for(let l=0;l<r.length;l++){const a=r[l],p=a[0]==="[",g=t.has(a);p||g?(o.length>0&&(o.sort(),i.push(...o),o=[]),i.push(a)):o.push(a)}return o.length>0&&(o.sort(),i.push(...o)),i}},dz=n=>({cache:oz(n.cacheSize),parseClassName:cz(n),sortModifiers:uz(n),...J8(n)}),hz=/\s+/,fz=(n,t)=>{const{parseClassName:r,getClassGroupId:i,getConflictingClassGroupIds:o,sortModifiers:l}=t,a=[],p=n.trim().split(hz);let g="";for(let w=p.length-1;w>=0;w-=1){const j=p[w],{isExternal:S,modifiers:T,hasImportantModifier:E,baseClassName:O,maybePostfixModifierPosition:R}=r(j);if(S){g=j+(g.length>0?" "+g:g);continue}let F=!!R,B=i(F?O.substring(0,R):O);if(!B){if(!F){g=j+(g.length>0?" "+g:g);continue}if(B=i(O),!B){g=j+(g.length>0?" "+g:g);continue}F=!1}const G=T.length===0?"":T.length===1?T[0]:l(T).join(":"),z=E?G+H2:G,ee=z+B;if(a.indexOf(ee)>-1)continue;a.push(ee);const ie=o(B,F);for(let ge=0;ge<ie.length;++ge){const K=ie[ge];a.push(z+K)}g=j+(g.length>0?" "+g:g)}return g},pz=(...n)=>{let t=0,r,i,o="";for(;t<n.length;)(r=n[t++])&&(i=o3(r))&&(o&&(o+=" "),o+=i);return o},o3=n=>{if(typeof n=="string")return n;let t,r="";for(let i=0;i<n.length;i++)n[i]&&(t=o3(n[i]))&&(r&&(r+=" "),r+=t);return r},mz=(n,...t)=>{let r,i,o,l;const a=g=>{const w=t.reduce((j,S)=>S(j),n());return r=dz(w),i=r.cache.get,o=r.cache.set,l=p,p(g)},p=g=>{const w=i(g);if(w)return w;const j=fz(g,r);return o(g,j),j};return l=a,(...g)=>l(pz(...g))},gz=[],Ll=n=>{const t=r=>r[n]||gz;return t.isThemeGetter=!0,t},l3=/^\[(?:(\w[\w-]*):)?(.+)\]$/i,c3=/^\((?:(\w[\w-]*):)?(.+)\)$/i,vz=/^\d+\/\d+$/,yz=/^(\d+(\.\d+)?)?(xs|sm|md|lg|xl)$/,xz=/\d+(%|px|r?em|[sdl]?v([hwib]|min|max)|pt|pc|in|cm|mm|cap|ch|ex|r?lh|cq(w|h|i|b|min|max))|\b(calc|min|max|clamp)\(.+\)|^0$/,bz=/^(rgba?|hsla?|hwb|(ok)?(lab|lch)|color-mix)\(.+\)$/,_z=/^(inset_)?-?((\d+)?\.?(\d+)[a-z]+|0)_-?((\d+)?\.?(\d+)[a-z]+|0)/,wz=/^(url|image|image-set|cross-fade|element|(repeating-)?(linear|radial|conic)-gradient)\(.+\)$/,wv=n=>vz.test(n),Si=n=>!!n&&!Number.isNaN(Number(n)),am=n=>!!n&&Number.isInteger(Number(n)),Q_=n=>n.endsWith("%")&&Si(n.slice(0,-1)),op=n=>yz.test(n),jz=()=>!0,Nz=n=>xz.test(n)&&!bz.test(n),u3=()=>!1,Sz=n=>_z.test(n),Az=n=>wz.test(n),Cz=n=>!en(n)&&!tn(n),kz=n=>xy(n,f3,u3),en=n=>l3.test(n),pg=n=>xy(n,p3,Nz),e2=n=>xy(n,Iz,Si),NN=n=>xy(n,d3,u3),Ez=n=>xy(n,h3,Az),S1=n=>xy(n,m3,Sz),tn=n=>c3.test(n),vx=n=>by(n,p3),Tz=n=>by(n,Lz),SN=n=>by(n,d3),Pz=n=>by(n,f3),Rz=n=>by(n,h3),A1=n=>by(n,m3,!0),xy=(n,t,r)=>{const i=l3.exec(n);return i?i[1]?t(i[1]):r(i[2]):!1},by=(n,t,r=!1)=>{const i=c3.exec(n);return i?i[1]?t(i[1]):r:!1},d3=n=>n==="position"||n==="percentage",h3=n=>n==="image"||n==="url",f3=n=>n==="length"||n==="size"||n==="bg-size",p3=n=>n==="length",Iz=n=>n==="number",Lz=n=>n==="family-name",m3=n=>n==="shadow",Mz=()=>{const n=Ll("color"),t=Ll("font"),r=Ll("text"),i=Ll("font-weight"),o=Ll("tracking"),l=Ll("leading"),a=Ll("breakpoint"),p=Ll("container"),g=Ll("spacing"),w=Ll("radius"),j=Ll("shadow"),S=Ll("inset-shadow"),T=Ll("text-shadow"),E=Ll("drop-shadow"),O=Ll("blur"),R=Ll("perspective"),F=Ll("aspect"),B=Ll("ease"),G=Ll("animate"),z=()=>["auto","avoid","all","avoid-page","page","left","right","column"],ee=()=>["center","top","bottom","left","right","top-left","left-top","top-right","right-top","bottom-right","right-bottom","bottom-left","left-bottom"],ie=()=>[...ee(),tn,en],ge=()=>["auto","hidden","clip","visible","scroll"],K=()=>["auto","contain","none"],J=()=>[tn,en,g],Se=()=>[wv,"full","auto",...J()],_e=()=>[am,"none","subgrid",tn,en],re=()=>["auto",{span:["full",am,tn,en]},am,tn,en],ce=()=>[am,"auto",tn,en],fe=()=>["auto","min","max","fr",tn,en],ye=()=>["start","end","center","between","around","evenly","stretch","baseline","center-safe","end-safe"],Fe=()=>["start","end","center","stretch","center-safe","end-safe"],Q=()=>["auto",...J()],pe=()=>[wv,"auto","full","dvw","dvh","lvw","lvh","svw","svh","min","max","fit",...J()],me=()=>[n,tn,en],Ue=()=>[...ee(),SN,NN,{position:[tn,en]}],Ke=()=>["no-repeat",{repeat:["","x","y","space","round"]}],Re=()=>["auto","cover","contain",Pz,kz,{size:[tn,en]}],te=()=>[Q_,vx,pg],ue=()=>["","none","full",w,tn,en],Ne=()=>["",Si,vx,pg],Me=()=>["solid","dashed","dotted","double"],We=()=>["normal","multiply","screen","overlay","darken","lighten","color-dodge","color-burn","hard-light","soft-light","difference","exclusion","hue","saturation","color","luminosity"],Ve=()=>[Si,Q_,SN,NN],tt=()=>["","none",O,tn,en],Qe=()=>["none",Si,tn,en],St=()=>["none",Si,tn,en],Et=()=>[Si,tn,en],zt=()=>[wv,"full",...J()];return{cacheSize:500,theme:{animate:["spin","ping","pulse","bounce"],aspect:["video"],blur:[op],breakpoint:[op],color:[jz],container:[op],"drop-shadow":[op],ease:["in","out","in-out"],font:[Cz],"font-weight":["thin","extralight","light","normal","medium","semibold","bold","extrabold","black"],"inset-shadow":[op],leading:["none","tight","snug","normal","relaxed","loose"],perspective:["dramatic","near","normal","midrange","distant","none"],radius:[op],shadow:[op],spacing:["px",Si],text:[op],"text-shadow":[op],tracking:["tighter","tight","normal","wide","wider","widest"]},classGroups:{aspect:[{aspect:["auto","square",wv,en,tn,F]}],container:["container"],columns:[{columns:[Si,en,tn,p]}],"break-after":[{"break-after":z()}],"break-before":[{"break-before":z()}],"break-inside":[{"break-inside":["auto","avoid","avoid-page","avoid-column"]}],"box-decoration":[{"box-decoration":["slice","clone"]}],box:[{box:["border","content"]}],display:["block","inline-block","inline","flex","inline-flex","table","inline-table","table-caption","table-cell","table-column","table-column-group","table-footer-group","table-header-group","table-row-group","table-row","flow-root","grid","inline-grid","contents","list-item","hidden"],sr:["sr-only","not-sr-only"],float:[{float:["right","left","none","start","end"]}],clear:[{clear:["left","right","both","none","start","end"]}],isolation:["isolate","isolation-auto"],"object-fit":[{object:["contain","cover","fill","none","scale-down"]}],"object-position":[{object:ie()}],overflow:[{overflow:ge()}],"overflow-x":[{"overflow-x":ge()}],"overflow-y":[{"overflow-y":ge()}],overscroll:[{overscroll:K()}],"overscroll-x":[{"overscroll-x":K()}],"overscroll-y":[{"overscroll-y":K()}],position:["static","fixed","absolute","relative","sticky"],inset:[{inset:Se()}],"inset-x":[{"inset-x":Se()}],"inset-y":[{"inset-y":Se()}],start:[{start:Se()}],end:[{end:Se()}],top:[{top:Se()}],right:[{right:Se()}],bottom:[{bottom:Se()}],left:[{left:Se()}],visibility:["visible","invisible","collapse"],z:[{z:[am,"auto",tn,en]}],basis:[{basis:[wv,"full","auto",p,...J()]}],"flex-direction":[{flex:["row","row-reverse","col","col-reverse"]}],"flex-wrap":[{flex:["nowrap","wrap","wrap-reverse"]}],flex:[{flex:[Si,wv,"auto","initial","none",en]}],grow:[{grow:["",Si,tn,en]}],shrink:[{shrink:["",Si,tn,en]}],order:[{order:[am,"first","last","none",tn,en]}],"grid-cols":[{"grid-cols":_e()}],"col-start-end":[{col:re()}],"col-start":[{"col-start":ce()}],"col-end":[{"col-end":ce()}],"grid-rows":[{"grid-rows":_e()}],"row-start-end":[{row:re()}],"row-start":[{"row-start":ce()}],"row-end":[{"row-end":ce()}],"grid-flow":[{"grid-flow":["row","col","dense","row-dense","col-dense"]}],"auto-cols":[{"auto-cols":fe()}],"auto-rows":[{"auto-rows":fe()}],gap:[{gap:J()}],"gap-x":[{"gap-x":J()}],"gap-y":[{"gap-y":J()}],"justify-content":[{justify:[...ye(),"normal"]}],"justify-items":[{"justify-items":[...Fe(),"normal"]}],"justify-self":[{"justify-self":["auto",...Fe()]}],"align-content":[{content:["normal",...ye()]}],"align-items":[{items:[...Fe(),{baseline:["","last"]}]}],"align-self":[{self:["auto",...Fe(),{baseline:["","last"]}]}],"place-content":[{"place-content":ye()}],"place-items":[{"place-items":[...Fe(),"baseline"]}],"place-self":[{"place-self":["auto",...Fe()]}],p:[{p:J()}],px:[{px:J()}],py:[{py:J()}],ps:[{ps:J()}],pe:[{pe:J()}],pt:[{pt:J()}],pr:[{pr:J()}],pb:[{pb:J()}],pl:[{pl:J()}],m:[{m:Q()}],mx:[{mx:Q()}],my:[{my:Q()}],ms:[{ms:Q()}],me:[{me:Q()}],mt:[{mt:Q()}],mr:[{mr:Q()}],mb:[{mb:Q()}],ml:[{ml:Q()}],"space-x":[{"space-x":J()}],"space-x-reverse":["space-x-reverse"],"space-y":[{"space-y":J()}],"space-y-reverse":["space-y-reverse"],size:[{size:pe()}],w:[{w:[p,"screen",...pe()]}],"min-w":[{"min-w":[p,"screen","none",...pe()]}],"max-w":[{"max-w":[p,"screen","none","prose",{screen:[a]},...pe()]}],h:[{h:["screen","lh",...pe()]}],"min-h":[{"min-h":["screen","lh","none",...pe()]}],"max-h":[{"max-h":["screen","lh",...pe()]}],"font-size":[{text:["base",r,vx,pg]}],"font-smoothing":["antialiased","subpixel-antialiased"],"font-style":["italic","not-italic"],"font-weight":[{font:[i,tn,e2]}],"font-stretch":[{"font-stretch":["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded",Q_,en]}],"font-family":[{font:[Tz,en,t]}],"fvn-normal":["normal-nums"],"fvn-ordinal":["ordinal"],"fvn-slashed-zero":["slashed-zero"],"fvn-figure":["lining-nums","oldstyle-nums"],"fvn-spacing":["proportional-nums","tabular-nums"],"fvn-fraction":["diagonal-fractions","stacked-fractions"],tracking:[{tracking:[o,tn,en]}],"line-clamp":[{"line-clamp":[Si,"none",tn,e2]}],leading:[{leading:[l,...J()]}],"list-image":[{"list-image":["none",tn,en]}],"list-style-position":[{list:["inside","outside"]}],"list-style-type":[{list:["disc","decimal","none",tn,en]}],"text-alignment":[{text:["left","center","right","justify","start","end"]}],"placeholder-color":[{placeholder:me()}],"text-color":[{text:me()}],"text-decoration":["underline","overline","line-through","no-underline"],"text-decoration-style":[{decoration:[...Me(),"wavy"]}],"text-decoration-thickness":[{decoration:[Si,"from-font","auto",tn,pg]}],"text-decoration-color":[{decoration:me()}],"underline-offset":[{"underline-offset":[Si,"auto",tn,en]}],"text-transform":["uppercase","lowercase","capitalize","normal-case"],"text-overflow":["truncate","text-ellipsis","text-clip"],"text-wrap":[{text:["wrap","nowrap","balance","pretty"]}],indent:[{indent:J()}],"vertical-align":[{align:["baseline","top","middle","bottom","text-top","text-bottom","sub","super",tn,en]}],whitespace:[{whitespace:["normal","nowrap","pre","pre-line","pre-wrap","break-spaces"]}],break:[{break:["normal","words","all","keep"]}],wrap:[{wrap:["break-word","anywhere","normal"]}],hyphens:[{hyphens:["none","manual","auto"]}],content:[{content:["none",tn,en]}],"bg-attachment":[{bg:["fixed","local","scroll"]}],"bg-clip":[{"bg-clip":["border","padding","content","text"]}],"bg-origin":[{"bg-origin":["border","padding","content"]}],"bg-position":[{bg:Ue()}],"bg-repeat":[{bg:Ke()}],"bg-size":[{bg:Re()}],"bg-image":[{bg:["none",{linear:[{to:["t","tr","r","br","b","bl","l","tl"]},am,tn,en],radial:["",tn,en],conic:[am,tn,en]},Rz,Ez]}],"bg-color":[{bg:me()}],"gradient-from-pos":[{from:te()}],"gradient-via-pos":[{via:te()}],"gradient-to-pos":[{to:te()}],"gradient-from":[{from:me()}],"gradient-via":[{via:me()}],"gradient-to":[{to:me()}],rounded:[{rounded:ue()}],"rounded-s":[{"rounded-s":ue()}],"rounded-e":[{"rounded-e":ue()}],"rounded-t":[{"rounded-t":ue()}],"rounded-r":[{"rounded-r":ue()}],"rounded-b":[{"rounded-b":ue()}],"rounded-l":[{"rounded-l":ue()}],"rounded-ss":[{"rounded-ss":ue()}],"rounded-se":[{"rounded-se":ue()}],"rounded-ee":[{"rounded-ee":ue()}],"rounded-es":[{"rounded-es":ue()}],"rounded-tl":[{"rounded-tl":ue()}],"rounded-tr":[{"rounded-tr":ue()}],"rounded-br":[{"rounded-br":ue()}],"rounded-bl":[{"rounded-bl":ue()}],"border-w":[{border:Ne()}],"border-w-x":[{"border-x":Ne()}],"border-w-y":[{"border-y":Ne()}],"border-w-s":[{"border-s":Ne()}],"border-w-e":[{"border-e":Ne()}],"border-w-t":[{"border-t":Ne()}],"border-w-r":[{"border-r":Ne()}],"border-w-b":[{"border-b":Ne()}],"border-w-l":[{"border-l":Ne()}],"divide-x":[{"divide-x":Ne()}],"divide-x-reverse":["divide-x-reverse"],"divide-y":[{"divide-y":Ne()}],"divide-y-reverse":["divide-y-reverse"],"border-style":[{border:[...Me(),"hidden","none"]}],"divide-style":[{divide:[...Me(),"hidden","none"]}],"border-color":[{border:me()}],"border-color-x":[{"border-x":me()}],"border-color-y":[{"border-y":me()}],"border-color-s":[{"border-s":me()}],"border-color-e":[{"border-e":me()}],"border-color-t":[{"border-t":me()}],"border-color-r":[{"border-r":me()}],"border-color-b":[{"border-b":me()}],"border-color-l":[{"border-l":me()}],"divide-color":[{divide:me()}],"outline-style":[{outline:[...Me(),"none","hidden"]}],"outline-offset":[{"outline-offset":[Si,tn,en]}],"outline-w":[{outline:["",Si,vx,pg]}],"outline-color":[{outline:me()}],shadow:[{shadow:["","none",j,A1,S1]}],"shadow-color":[{shadow:me()}],"inset-shadow":[{"inset-shadow":["none",S,A1,S1]}],"inset-shadow-color":[{"inset-shadow":me()}],"ring-w":[{ring:Ne()}],"ring-w-inset":["ring-inset"],"ring-color":[{ring:me()}],"ring-offset-w":[{"ring-offset":[Si,pg]}],"ring-offset-color":[{"ring-offset":me()}],"inset-ring-w":[{"inset-ring":Ne()}],"inset-ring-color":[{"inset-ring":me()}],"text-shadow":[{"text-shadow":["none",T,A1,S1]}],"text-shadow-color":[{"text-shadow":me()}],opacity:[{opacity:[Si,tn,en]}],"mix-blend":[{"mix-blend":[...We(),"plus-darker","plus-lighter"]}],"bg-blend":[{"bg-blend":We()}],"mask-clip":[{"mask-clip":["border","padding","content","fill","stroke","view"]},"mask-no-clip"],"mask-composite":[{mask:["add","subtract","intersect","exclude"]}],"mask-image-linear-pos":[{"mask-linear":[Si]}],"mask-image-linear-from-pos":[{"mask-linear-from":Ve()}],"mask-image-linear-to-pos":[{"mask-linear-to":Ve()}],"mask-image-linear-from-color":[{"mask-linear-from":me()}],"mask-image-linear-to-color":[{"mask-linear-to":me()}],"mask-image-t-from-pos":[{"mask-t-from":Ve()}],"mask-image-t-to-pos":[{"mask-t-to":Ve()}],"mask-image-t-from-color":[{"mask-t-from":me()}],"mask-image-t-to-color":[{"mask-t-to":me()}],"mask-image-r-from-pos":[{"mask-r-from":Ve()}],"mask-image-r-to-pos":[{"mask-r-to":Ve()}],"mask-image-r-from-color":[{"mask-r-from":me()}],"mask-image-r-to-color":[{"mask-r-to":me()}],"mask-image-b-from-pos":[{"mask-b-from":Ve()}],"mask-image-b-to-pos":[{"mask-b-to":Ve()}],"mask-image-b-from-color":[{"mask-b-from":me()}],"mask-image-b-to-color":[{"mask-b-to":me()}],"mask-image-l-from-pos":[{"mask-l-from":Ve()}],"mask-image-l-to-pos":[{"mask-l-to":Ve()}],"mask-image-l-from-color":[{"mask-l-from":me()}],"mask-image-l-to-color":[{"mask-l-to":me()}],"mask-image-x-from-pos":[{"mask-x-from":Ve()}],"mask-image-x-to-pos":[{"mask-x-to":Ve()}],"mask-image-x-from-color":[{"mask-x-from":me()}],"mask-image-x-to-color":[{"mask-x-to":me()}],"mask-image-y-from-pos":[{"mask-y-from":Ve()}],"mask-image-y-to-pos":[{"mask-y-to":Ve()}],"mask-image-y-from-color":[{"mask-y-from":me()}],"mask-image-y-to-color":[{"mask-y-to":me()}],"mask-image-radial":[{"mask-radial":[tn,en]}],"mask-image-radial-from-pos":[{"mask-radial-from":Ve()}],"mask-image-radial-to-pos":[{"mask-radial-to":Ve()}],"mask-image-radial-from-color":[{"mask-radial-from":me()}],"mask-image-radial-to-color":[{"mask-radial-to":me()}],"mask-image-radial-shape":[{"mask-radial":["circle","ellipse"]}],"mask-image-radial-size":[{"mask-radial":[{closest:["side","corner"],farthest:["side","corner"]}]}],"mask-image-radial-pos":[{"mask-radial-at":ee()}],"mask-image-conic-pos":[{"mask-conic":[Si]}],"mask-image-conic-from-pos":[{"mask-conic-from":Ve()}],"mask-image-conic-to-pos":[{"mask-conic-to":Ve()}],"mask-image-conic-from-color":[{"mask-conic-from":me()}],"mask-image-conic-to-color":[{"mask-conic-to":me()}],"mask-mode":[{mask:["alpha","luminance","match"]}],"mask-origin":[{"mask-origin":["border","padding","content","fill","stroke","view"]}],"mask-position":[{mask:Ue()}],"mask-repeat":[{mask:Ke()}],"mask-size":[{mask:Re()}],"mask-type":[{"mask-type":["alpha","luminance"]}],"mask-image":[{mask:["none",tn,en]}],filter:[{filter:["","none",tn,en]}],blur:[{blur:tt()}],brightness:[{brightness:[Si,tn,en]}],contrast:[{contrast:[Si,tn,en]}],"drop-shadow":[{"drop-shadow":["","none",E,A1,S1]}],"drop-shadow-color":[{"drop-shadow":me()}],grayscale:[{grayscale:["",Si,tn,en]}],"hue-rotate":[{"hue-rotate":[Si,tn,en]}],invert:[{invert:["",Si,tn,en]}],saturate:[{saturate:[Si,tn,en]}],sepia:[{sepia:["",Si,tn,en]}],"backdrop-filter":[{"backdrop-filter":["","none",tn,en]}],"backdrop-blur":[{"backdrop-blur":tt()}],"backdrop-brightness":[{"backdrop-brightness":[Si,tn,en]}],"backdrop-contrast":[{"backdrop-contrast":[Si,tn,en]}],"backdrop-grayscale":[{"backdrop-grayscale":["",Si,tn,en]}],"backdrop-hue-rotate":[{"backdrop-hue-rotate":[Si,tn,en]}],"backdrop-invert":[{"backdrop-invert":["",Si,tn,en]}],"backdrop-opacity":[{"backdrop-opacity":[Si,tn,en]}],"backdrop-saturate":[{"backdrop-saturate":[Si,tn,en]}],"backdrop-sepia":[{"backdrop-sepia":["",Si,tn,en]}],"border-collapse":[{border:["collapse","separate"]}],"border-spacing":[{"border-spacing":J()}],"border-spacing-x":[{"border-spacing-x":J()}],"border-spacing-y":[{"border-spacing-y":J()}],"table-layout":[{table:["auto","fixed"]}],caption:[{caption:["top","bottom"]}],transition:[{transition:["","all","colors","opacity","shadow","transform","none",tn,en]}],"transition-behavior":[{transition:["normal","discrete"]}],duration:[{duration:[Si,"initial",tn,en]}],ease:[{ease:["linear","initial",B,tn,en]}],delay:[{delay:[Si,tn,en]}],animate:[{animate:["none",G,tn,en]}],backface:[{backface:["hidden","visible"]}],perspective:[{perspective:[R,tn,en]}],"perspective-origin":[{"perspective-origin":ie()}],rotate:[{rotate:Qe()}],"rotate-x":[{"rotate-x":Qe()}],"rotate-y":[{"rotate-y":Qe()}],"rotate-z":[{"rotate-z":Qe()}],scale:[{scale:St()}],"scale-x":[{"scale-x":St()}],"scale-y":[{"scale-y":St()}],"scale-z":[{"scale-z":St()}],"scale-3d":["scale-3d"],skew:[{skew:Et()}],"skew-x":[{"skew-x":Et()}],"skew-y":[{"skew-y":Et()}],transform:[{transform:[tn,en,"","none","gpu","cpu"]}],"transform-origin":[{origin:ie()}],"transform-style":[{transform:["3d","flat"]}],translate:[{translate:zt()}],"translate-x":[{"translate-x":zt()}],"translate-y":[{"translate-y":zt()}],"translate-z":[{"translate-z":zt()}],"translate-none":["translate-none"],accent:[{accent:me()}],appearance:[{appearance:["none","auto"]}],"caret-color":[{caret:me()}],"color-scheme":[{scheme:["normal","dark","light","light-dark","only-dark","only-light"]}],cursor:[{cursor:["auto","default","pointer","wait","text","move","help","not-allowed","none","context-menu","progress","cell","crosshair","vertical-text","alias","copy","no-drop","grab","grabbing","all-scroll","col-resize","row-resize","n-resize","e-resize","s-resize","w-resize","ne-resize","nw-resize","se-resize","sw-resize","ew-resize","ns-resize","nesw-resize","nwse-resize","zoom-in","zoom-out",tn,en]}],"field-sizing":[{"field-sizing":["fixed","content"]}],"pointer-events":[{"pointer-events":["auto","none"]}],resize:[{resize:["none","","y","x"]}],"scroll-behavior":[{scroll:["auto","smooth"]}],"scroll-m":[{"scroll-m":J()}],"scroll-mx":[{"scroll-mx":J()}],"scroll-my":[{"scroll-my":J()}],"scroll-ms":[{"scroll-ms":J()}],"scroll-me":[{"scroll-me":J()}],"scroll-mt":[{"scroll-mt":J()}],"scroll-mr":[{"scroll-mr":J()}],"scroll-mb":[{"scroll-mb":J()}],"scroll-ml":[{"scroll-ml":J()}],"scroll-p":[{"scroll-p":J()}],"scroll-px":[{"scroll-px":J()}],"scroll-py":[{"scroll-py":J()}],"scroll-ps":[{"scroll-ps":J()}],"scroll-pe":[{"scroll-pe":J()}],"scroll-pt":[{"scroll-pt":J()}],"scroll-pr":[{"scroll-pr":J()}],"scroll-pb":[{"scroll-pb":J()}],"scroll-pl":[{"scroll-pl":J()}],"snap-align":[{snap:["start","end","center","align-none"]}],"snap-stop":[{snap:["normal","always"]}],"snap-type":[{snap:["none","x","y","both"]}],"snap-strictness":[{snap:["mandatory","proximity"]}],touch:[{touch:["auto","none","manipulation"]}],"touch-x":[{"touch-pan":["x","left","right"]}],"touch-y":[{"touch-pan":["y","up","down"]}],"touch-pz":["touch-pinch-zoom"],select:[{select:["none","text","all","auto"]}],"will-change":[{"will-change":["auto","scroll","contents","transform",tn,en]}],fill:[{fill:["none",...me()]}],"stroke-w":[{stroke:[Si,vx,pg,e2]}],stroke:[{stroke:["none",...me()]}],"forced-color-adjust":[{"forced-color-adjust":["auto","none"]}]},conflictingClassGroups:{overflow:["overflow-x","overflow-y"],overscroll:["overscroll-x","overscroll-y"],inset:["inset-x","inset-y","start","end","top","right","bottom","left"],"inset-x":["right","left"],"inset-y":["top","bottom"],flex:["basis","grow","shrink"],gap:["gap-x","gap-y"],p:["px","py","ps","pe","pt","pr","pb","pl"],px:["pr","pl"],py:["pt","pb"],m:["mx","my","ms","me","mt","mr","mb","ml"],mx:["mr","ml"],my:["mt","mb"],size:["w","h"],"font-size":["leading"],"fvn-normal":["fvn-ordinal","fvn-slashed-zero","fvn-figure","fvn-spacing","fvn-fraction"],"fvn-ordinal":["fvn-normal"],"fvn-slashed-zero":["fvn-normal"],"fvn-figure":["fvn-normal"],"fvn-spacing":["fvn-normal"],"fvn-fraction":["fvn-normal"],"line-clamp":["display","overflow"],rounded:["rounded-s","rounded-e","rounded-t","rounded-r","rounded-b","rounded-l","rounded-ss","rounded-se","rounded-ee","rounded-es","rounded-tl","rounded-tr","rounded-br","rounded-bl"],"rounded-s":["rounded-ss","rounded-es"],"rounded-e":["rounded-se","rounded-ee"],"rounded-t":["rounded-tl","rounded-tr"],"rounded-r":["rounded-tr","rounded-br"],"rounded-b":["rounded-br","rounded-bl"],"rounded-l":["rounded-tl","rounded-bl"],"border-spacing":["border-spacing-x","border-spacing-y"],"border-w":["border-w-x","border-w-y","border-w-s","border-w-e","border-w-t","border-w-r","border-w-b","border-w-l"],"border-w-x":["border-w-r","border-w-l"],"border-w-y":["border-w-t","border-w-b"],"border-color":["border-color-x","border-color-y","border-color-s","border-color-e","border-color-t","border-color-r","border-color-b","border-color-l"],"border-color-x":["border-color-r","border-color-l"],"border-color-y":["border-color-t","border-color-b"],translate:["translate-x","translate-y","translate-none"],"translate-none":["translate","translate-x","translate-y","translate-z"],"scroll-m":["scroll-mx","scroll-my","scroll-ms","scroll-me","scroll-mt","scroll-mr","scroll-mb","scroll-ml"],"scroll-mx":["scroll-mr","scroll-ml"],"scroll-my":["scroll-mt","scroll-mb"],"scroll-p":["scroll-px","scroll-py","scroll-ps","scroll-pe","scroll-pt","scroll-pr","scroll-pb","scroll-pl"],"scroll-px":["scroll-pr","scroll-pl"],"scroll-py":["scroll-pt","scroll-pb"],touch:["touch-x","touch-y","touch-pz"],"touch-x":["touch"],"touch-y":["touch"],"touch-pz":["touch"]},conflictingClassGroupModifiers:{"font-size":["leading"]},orderSensitiveModifiers:["*","**","after","backdrop","before","details-content","file","first-letter","first-line","marker","placeholder","selection"]}},Dz=mz(Mz);function er(...n){return Dz(n3(n))}const lj=r0("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground shadow hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground shadow-sm hover:bg-destructive/90",outline:"border border-input bg-background shadow-sm hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground shadow-sm hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-9 px-4 py-2",sm:"h-8 rounded-md px-3 text-xs",lg:"h-10 rounded-md px-8",icon:"h-9 w-9"}},defaultVariants:{variant:"default",size:"default"}}),ze=M.forwardRef(({className:n,variant:t,size:r,asChild:i=!1,...o},l)=>{const a=i?t3:"button";return e.jsx(a,{className:er(lj({variant:t,size:r,className:n})),ref:l,...o})});ze.displayName="Button";const Oz=r0("inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground shadow hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground shadow hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function Gt({className:n,variant:t,...r}){return e.jsx("div",{className:er(Oz({variant:t}),n),...r})}function zz(n,t=[]){let r=[];function i(l,a){const p=M.createContext(a);p.displayName=l+"Context";const g=r.length;r=[...r,a];const w=S=>{var B;const{scope:T,children:E,...O}=S,R=((B=T==null?void 0:T[n])==null?void 0:B[g])||p,F=M.useMemo(()=>O,Object.values(O));return e.jsx(R.Provider,{value:F,children:E})};w.displayName=l+"Provider";function j(S,T){var R;const E=((R=T==null?void 0:T[n])==null?void 0:R[g])||p,O=M.useContext(E);if(O)return O;if(a!==void 0)return a;throw new Error(`\`${S}\` must be used within \`${l}\``)}return[w,j]}const o=()=>{const l=r.map(a=>M.createContext(a));return function(p){const g=(p==null?void 0:p[n])||l;return M.useMemo(()=>({[`__scope${n}`]:{...p,[n]:g}}),[p,g])}};return o.scopeName=n,[i,Fz(o,...t)]}function Fz(...n){const t=n[0];if(n.length===1)return t;const r=()=>{const i=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const a=i.reduce((p,{useScope:g,scopeName:w})=>{const S=g(l)[`__scope${w}`];return{...p,...S}},{});return M.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}function ic(n){const t=M.useRef(n);return M.useEffect(()=>{t.current=n}),M.useMemo(()=>(...r)=>{var i;return(i=t.current)==null?void 0:i.call(t,...r)},[])}var xl=globalThis!=null&&globalThis.document?M.useLayoutEffect:()=>{},Bz=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],cj=Bz.reduce((n,t)=>{const r=t0(`Primitive.${t}`),i=M.forwardRef((o,l)=>{const{asChild:a,...p}=o,g=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...p,ref:l})});return i.displayName=`Primitive.${t}`,{...n,[t]:i}},{}),t2={exports:{}},r2={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var AN;function Uz(){if(AN)return r2;AN=1;var n=Mb();function t(S,T){return S===T&&(S!==0||1/S===1/T)||S!==S&&T!==T}var r=typeof Object.is=="function"?Object.is:t,i=n.useState,o=n.useEffect,l=n.useLayoutEffect,a=n.useDebugValue;function p(S,T){var E=T(),O=i({inst:{value:E,getSnapshot:T}}),R=O[0].inst,F=O[1];return l(function(){R.value=E,R.getSnapshot=T,g(R)&&F({inst:R})},[S,E,T]),o(function(){return g(R)&&F({inst:R}),S(function(){g(R)&&F({inst:R})})},[S]),a(E),E}function g(S){var T=S.getSnapshot;S=S.value;try{var E=T();return!r(S,E)}catch{return!0}}function w(S,T){return T()}var j=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?w:p;return r2.useSyncExternalStore=n.useSyncExternalStore!==void 0?n.useSyncExternalStore:j,r2}var CN;function qz(){return CN||(CN=1,t2.exports=Uz()),t2.exports}var Vz=qz();function $z(){return Vz.useSyncExternalStore(Hz,()=>!0,()=>!1)}function Hz(){return()=>{}}var uj="Avatar",[Gz]=zz(uj),[Wz,g3]=Gz(uj),v3=M.forwardRef((n,t)=>{const{__scopeAvatar:r,...i}=n,[o,l]=M.useState("idle");return e.jsx(Wz,{scope:r,imageLoadingStatus:o,onImageLoadingStatusChange:l,children:e.jsx(cj.span,{...i,ref:t})})});v3.displayName=uj;var y3="AvatarImage",x3=M.forwardRef((n,t)=>{const{__scopeAvatar:r,src:i,onLoadingStatusChange:o=()=>{},...l}=n,a=g3(y3,r),p=Yz(i,l),g=ic(w=>{o(w),a.onImageLoadingStatusChange(w)});return xl(()=>{p!=="idle"&&g(p)},[p,g]),p==="loaded"?e.jsx(cj.img,{...l,ref:t,src:i}):null});x3.displayName=y3;var b3="AvatarFallback",_3=M.forwardRef((n,t)=>{const{__scopeAvatar:r,delayMs:i,...o}=n,l=g3(b3,r),[a,p]=M.useState(i===void 0);return M.useEffect(()=>{if(i!==void 0){const g=window.setTimeout(()=>p(!0),i);return()=>window.clearTimeout(g)}},[i]),a&&l.imageLoadingStatus!=="loaded"?e.jsx(cj.span,{...o,ref:t}):null});_3.displayName=b3;function kN(n,t){return n?t?(n.src!==t&&(n.src=t),n.complete&&n.naturalWidth>0?"loaded":"loading"):"error":"idle"}function Yz(n,{referrerPolicy:t,crossOrigin:r}){const i=$z(),o=M.useRef(null),l=i?(o.current||(o.current=new window.Image),o.current):null,[a,p]=M.useState(()=>kN(l,n));return xl(()=>{p(kN(l,n))},[l,n]),xl(()=>{const g=S=>()=>{p(S)};if(!l)return;const w=g("loaded"),j=g("error");return l.addEventListener("load",w),l.addEventListener("error",j),t&&(l.referrerPolicy=t),typeof r=="string"&&(l.crossOrigin=r),()=>{l.removeEventListener("load",w),l.removeEventListener("error",j)}},[l,r,t]),a}var w3=v3,j3=x3,N3=_3;const lf=M.forwardRef(({className:n,...t},r)=>e.jsx(w3,{ref:r,className:er("relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full",n),...t}));lf.displayName=w3.displayName;const cf=M.forwardRef(({className:n,...t},r)=>e.jsx(j3,{ref:r,className:er("aspect-square h-full w-full",n),...t}));cf.displayName=j3.displayName;const hp=M.forwardRef(({className:n,...t},r)=>e.jsx(N3,{ref:r,className:er("flex h-full w-full items-center justify-center rounded-full bg-muted",n),...t}));hp.displayName=N3.displayName;function Dr(n,t,{checkForDefaultPrevented:r=!0}={}){return function(o){if(n==null||n(o),r===!1||!o.defaultPrevented)return t==null?void 0:t(o)}}function Zz(n,t){const r=M.createContext(t),i=l=>{const{children:a,...p}=l,g=M.useMemo(()=>p,Object.values(p));return e.jsx(r.Provider,{value:g,children:a})};i.displayName=n+"Provider";function o(l){const a=M.useContext(r);if(a)return a;if(t!==void 0)return t;throw new Error(`\`${l}\` must be used within \`${n}\``)}return[i,o]}function Du(n,t=[]){let r=[];function i(l,a){const p=M.createContext(a),g=r.length;r=[...r,a];const w=S=>{var B;const{scope:T,children:E,...O}=S,R=((B=T==null?void 0:T[n])==null?void 0:B[g])||p,F=M.useMemo(()=>O,Object.values(O));return e.jsx(R.Provider,{value:F,children:E})};w.displayName=l+"Provider";function j(S,T){var R;const E=((R=T==null?void 0:T[n])==null?void 0:R[g])||p,O=M.useContext(E);if(O)return O;if(a!==void 0)return a;throw new Error(`\`${S}\` must be used within \`${l}\``)}return[w,j]}const o=()=>{const l=r.map(a=>M.createContext(a));return function(p){const g=(p==null?void 0:p[n])||l;return M.useMemo(()=>({[`__scope${n}`]:{...p,[n]:g}}),[p,g])}};return o.scopeName=n,[i,Kz(o,...t)]}function Kz(...n){const t=n[0];if(n.length===1)return t;const r=()=>{const i=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const a=i.reduce((p,{useScope:g,scopeName:w})=>{const S=g(l)[`__scope${w}`];return{...p,...S}},{});return M.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var Xz=Lw[" useInsertionEffect ".trim().toString()]||xl;function bf({prop:n,defaultProp:t,onChange:r=()=>{},caller:i}){const[o,l,a]=Jz({defaultProp:t,onChange:r}),p=n!==void 0,g=p?n:o;{const j=M.useRef(n!==void 0);M.useEffect(()=>{const S=j.current;S!==p&&console.warn(`${i} is changing from ${S?"controlled":"uncontrolled"} to ${p?"controlled":"uncontrolled"}. Components should not switch from controlled to uncontrolled (or vice versa). Decide between using a controlled or uncontrolled value for the lifetime of the component.`),j.current=p},[p,i])}const w=M.useCallback(j=>{var S;if(p){const T=Qz(j)?j(n):j;T!==n&&((S=a.current)==null||S.call(a,T))}else l(j)},[p,n,l,a]);return[g,w]}function Jz({defaultProp:n,onChange:t}){const[r,i]=M.useState(n),o=M.useRef(r),l=M.useRef(t);return Xz(()=>{l.current=t},[t]),M.useEffect(()=>{var a;o.current!==r&&((a=l.current)==null||a.call(l,r),o.current=r)},[r,o]),[r,i,l]}function Qz(n){return typeof n=="function"}function eF(n){const t=tF(n),r=M.forwardRef((i,o)=>{const{children:l,...a}=i,p=M.Children.toArray(l),g=p.find(nF);if(g){const w=g.props.children,j=p.map(S=>S===g?M.Children.count(w)>1?M.Children.only(null):M.isValidElement(w)?w.props.children:null:S);return e.jsx(t,{...a,ref:o,children:M.isValidElement(w)?M.cloneElement(w,void 0,j):null})}return e.jsx(t,{...a,ref:o,children:l})});return r.displayName=`${n}.Slot`,r}function tF(n){const t=M.forwardRef((r,i)=>{const{children:o,...l}=r;if(M.isValidElement(o)){const a=sF(o),p=iF(l,o.props);return o.type!==M.Fragment&&(p.ref=i?wf(i,a):a),M.cloneElement(o,p)}return M.Children.count(o)>1?M.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var rF=Symbol("radix.slottable");function nF(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===rF}function iF(n,t){const r={...t};for(const i in t){const o=n[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...p)=>{const g=l(...p);return o(...p),g}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...n,...r}}function sF(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}var aF=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cn=aF.reduce((n,t)=>{const r=eF(`Primitive.${t}`),i=M.forwardRef((o,l)=>{const{asChild:a,...p}=o,g=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...p,ref:l})});return i.displayName=`Primitive.${t}`,{...n,[t]:i}},{});function S3(n,t){n&&dy.flushSync(()=>n.dispatchEvent(t))}function EN(n){const t=oF(n),r=M.forwardRef((i,o)=>{const{children:l,...a}=i,p=M.Children.toArray(l),g=p.find(cF);if(g){const w=g.props.children,j=p.map(S=>S===g?M.Children.count(w)>1?M.Children.only(null):M.isValidElement(w)?w.props.children:null:S);return e.jsx(t,{...a,ref:o,children:M.isValidElement(w)?M.cloneElement(w,void 0,j):null})}return e.jsx(t,{...a,ref:o,children:l})});return r.displayName=`${n}.Slot`,r}function oF(n){const t=M.forwardRef((r,i)=>{const{children:o,...l}=r;if(M.isValidElement(o)){const a=dF(o),p=uF(l,o.props);return o.type!==M.Fragment&&(p.ref=i?wf(i,a):a),M.cloneElement(o,p)}return M.Children.count(o)>1?M.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var lF=Symbol("radix.slottable");function cF(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===lF}function uF(n,t){const r={...t};for(const i in t){const o=n[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...p)=>{const g=l(...p);return o(...p),g}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...n,...r}}function dF(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}function Ub(n){const t=n+"CollectionProvider",[r,i]=Du(t),[o,l]=r(t,{collectionRef:{current:null},itemMap:new Map}),a=R=>{const{scope:F,children:B}=R,G=Ft.useRef(null),z=Ft.useRef(new Map).current;return e.jsx(o,{scope:F,itemMap:z,collectionRef:G,children:B})};a.displayName=t;const p=n+"CollectionSlot",g=EN(p),w=Ft.forwardRef((R,F)=>{const{scope:B,children:G}=R,z=l(p,B),ee=Wn(F,z.collectionRef);return e.jsx(g,{ref:ee,children:G})});w.displayName=p;const j=n+"CollectionItemSlot",S="data-radix-collection-item",T=EN(j),E=Ft.forwardRef((R,F)=>{const{scope:B,children:G,...z}=R,ee=Ft.useRef(null),ie=Wn(F,ee),ge=l(j,B);return Ft.useEffect(()=>(ge.itemMap.set(ee,{ref:ee,...z}),()=>void ge.itemMap.delete(ee))),e.jsx(T,{[S]:"",ref:ie,children:G})});E.displayName=j;function O(R){const F=l(n+"CollectionConsumer",R);return Ft.useCallback(()=>{const G=F.collectionRef.current;if(!G)return[];const z=Array.from(G.querySelectorAll(`[${S}]`));return Array.from(F.itemMap.values()).sort((ge,K)=>z.indexOf(ge.ref.current)-z.indexOf(K.ref.current))},[F.collectionRef,F.itemMap])}return[{Provider:a,Slot:w,ItemSlot:E},O,i]}var hF=M.createContext(void 0);function _y(n){const t=M.useContext(hF);return n||t||"ltr"}function fF(n,t=globalThis==null?void 0:globalThis.document){const r=ic(n);M.useEffect(()=>{const i=o=>{o.key==="Escape"&&r(o)};return t.addEventListener("keydown",i,{capture:!0}),()=>t.removeEventListener("keydown",i,{capture:!0})},[r,t])}var pF="DismissableLayer",G2="dismissableLayer.update",mF="dismissableLayer.pointerDownOutside",gF="dismissableLayer.focusOutside",TN,A3=M.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),n0=M.forwardRef((n,t)=>{const{disableOutsidePointerEvents:r=!1,onEscapeKeyDown:i,onPointerDownOutside:o,onFocusOutside:l,onInteractOutside:a,onDismiss:p,...g}=n,w=M.useContext(A3),[j,S]=M.useState(null),T=(j==null?void 0:j.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,E]=M.useState({}),O=Wn(t,K=>S(K)),R=Array.from(w.layers),[F]=[...w.layersWithOutsidePointerEventsDisabled].slice(-1),B=R.indexOf(F),G=j?R.indexOf(j):-1,z=w.layersWithOutsidePointerEventsDisabled.size>0,ee=G>=B,ie=xF(K=>{const J=K.target,Se=[...w.branches].some(_e=>_e.contains(J));!ee||Se||(o==null||o(K),a==null||a(K),K.defaultPrevented||p==null||p())},T),ge=bF(K=>{const J=K.target;[...w.branches].some(_e=>_e.contains(J))||(l==null||l(K),a==null||a(K),K.defaultPrevented||p==null||p())},T);return fF(K=>{G===w.layers.size-1&&(i==null||i(K),!K.defaultPrevented&&p&&(K.preventDefault(),p()))},T),M.useEffect(()=>{if(j)return r&&(w.layersWithOutsidePointerEventsDisabled.size===0&&(TN=T.body.style.pointerEvents,T.body.style.pointerEvents="none"),w.layersWithOutsidePointerEventsDisabled.add(j)),w.layers.add(j),PN(),()=>{r&&w.layersWithOutsidePointerEventsDisabled.size===1&&(T.body.style.pointerEvents=TN)}},[j,T,r,w]),M.useEffect(()=>()=>{j&&(w.layers.delete(j),w.layersWithOutsidePointerEventsDisabled.delete(j),PN())},[j,w]),M.useEffect(()=>{const K=()=>E({});return document.addEventListener(G2,K),()=>document.removeEventListener(G2,K)},[]),e.jsx(Cn.div,{...g,ref:O,style:{pointerEvents:z?ee?"auto":"none":void 0,...n.style},onFocusCapture:Dr(n.onFocusCapture,ge.onFocusCapture),onBlurCapture:Dr(n.onBlurCapture,ge.onBlurCapture),onPointerDownCapture:Dr(n.onPointerDownCapture,ie.onPointerDownCapture)})});n0.displayName=pF;var vF="DismissableLayerBranch",yF=M.forwardRef((n,t)=>{const r=M.useContext(A3),i=M.useRef(null),o=Wn(t,i);return M.useEffect(()=>{const l=i.current;if(l)return r.branches.add(l),()=>{r.branches.delete(l)}},[r.branches]),e.jsx(Cn.div,{...n,ref:o})});yF.displayName=vF;function xF(n,t=globalThis==null?void 0:globalThis.document){const r=ic(n),i=M.useRef(!1),o=M.useRef(()=>{});return M.useEffect(()=>{const l=p=>{if(p.target&&!i.current){let g=function(){C3(mF,r,w,{discrete:!0})};const w={originalEvent:p};p.pointerType==="touch"?(t.removeEventListener("click",o.current),o.current=g,t.addEventListener("click",o.current,{once:!0})):g()}else t.removeEventListener("click",o.current);i.current=!1},a=window.setTimeout(()=>{t.addEventListener("pointerdown",l)},0);return()=>{window.clearTimeout(a),t.removeEventListener("pointerdown",l),t.removeEventListener("click",o.current)}},[t,r]),{onPointerDownCapture:()=>i.current=!0}}function bF(n,t=globalThis==null?void 0:globalThis.document){const r=ic(n),i=M.useRef(!1);return M.useEffect(()=>{const o=l=>{l.target&&!i.current&&C3(gF,r,{originalEvent:l},{discrete:!1})};return t.addEventListener("focusin",o),()=>t.removeEventListener("focusin",o)},[t,r]),{onFocusCapture:()=>i.current=!0,onBlurCapture:()=>i.current=!1}}function PN(){const n=new CustomEvent(G2);document.dispatchEvent(n)}function C3(n,t,r,{discrete:i}){const o=r.originalEvent.target,l=new CustomEvent(n,{bubbles:!1,cancelable:!0,detail:r});t&&o.addEventListener(n,t,{once:!0}),i?S3(o,l):o.dispatchEvent(l)}var n2=0;function qb(){M.useEffect(()=>{const n=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",n[0]??RN()),document.body.insertAdjacentElement("beforeend",n[1]??RN()),n2++,()=>{n2===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),n2--}},[])}function RN(){const n=document.createElement("span");return n.setAttribute("data-radix-focus-guard",""),n.tabIndex=0,n.style.outline="none",n.style.opacity="0",n.style.position="fixed",n.style.pointerEvents="none",n}var i2="focusScope.autoFocusOnMount",s2="focusScope.autoFocusOnUnmount",IN={bubbles:!1,cancelable:!0},_F="FocusScope",i0=M.forwardRef((n,t)=>{const{loop:r=!1,trapped:i=!1,onMountAutoFocus:o,onUnmountAutoFocus:l,...a}=n,[p,g]=M.useState(null),w=ic(o),j=ic(l),S=M.useRef(null),T=Wn(t,R=>g(R)),E=M.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;M.useEffect(()=>{if(i){let R=function(z){if(E.paused||!p)return;const ee=z.target;p.contains(ee)?S.current=ee:cm(S.current,{select:!0})},F=function(z){if(E.paused||!p)return;const ee=z.relatedTarget;ee!==null&&(p.contains(ee)||cm(S.current,{select:!0}))},B=function(z){if(document.activeElement===document.body)for(const ie of z)ie.removedNodes.length>0&&cm(p)};document.addEventListener("focusin",R),document.addEventListener("focusout",F);const G=new MutationObserver(B);return p&&G.observe(p,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",R),document.removeEventListener("focusout",F),G.disconnect()}}},[i,p,E.paused]),M.useEffect(()=>{if(p){MN.add(E);const R=document.activeElement;if(!p.contains(R)){const B=new CustomEvent(i2,IN);p.addEventListener(i2,w),p.dispatchEvent(B),B.defaultPrevented||(wF(CF(k3(p)),{select:!0}),document.activeElement===R&&cm(p))}return()=>{p.removeEventListener(i2,w),setTimeout(()=>{const B=new CustomEvent(s2,IN);p.addEventListener(s2,j),p.dispatchEvent(B),B.defaultPrevented||cm(R??document.body,{select:!0}),p.removeEventListener(s2,j),MN.remove(E)},0)}}},[p,w,j,E]);const O=M.useCallback(R=>{if(!r&&!i||E.paused)return;const F=R.key==="Tab"&&!R.altKey&&!R.ctrlKey&&!R.metaKey,B=document.activeElement;if(F&&B){const G=R.currentTarget,[z,ee]=jF(G);z&&ee?!R.shiftKey&&B===ee?(R.preventDefault(),r&&cm(z,{select:!0})):R.shiftKey&&B===z&&(R.preventDefault(),r&&cm(ee,{select:!0})):B===G&&R.preventDefault()}},[r,i,E.paused]);return e.jsx(Cn.div,{tabIndex:-1,...a,ref:T,onKeyDown:O})});i0.displayName=_F;function wF(n,{select:t=!1}={}){const r=document.activeElement;for(const i of n)if(cm(i,{select:t}),document.activeElement!==r)return}function jF(n){const t=k3(n),r=LN(t,n),i=LN(t.reverse(),n);return[r,i]}function k3(n){const t=[],r=document.createTreeWalker(n,NodeFilter.SHOW_ELEMENT,{acceptNode:i=>{const o=i.tagName==="INPUT"&&i.type==="hidden";return i.disabled||i.hidden||o?NodeFilter.FILTER_SKIP:i.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;r.nextNode();)t.push(r.currentNode);return t}function LN(n,t){for(const r of n)if(!NF(r,{upTo:t}))return r}function NF(n,{upTo:t}){if(getComputedStyle(n).visibility==="hidden")return!0;for(;n;){if(t!==void 0&&n===t)return!1;if(getComputedStyle(n).display==="none")return!0;n=n.parentElement}return!1}function SF(n){return n instanceof HTMLInputElement&&"select"in n}function cm(n,{select:t=!1}={}){if(n&&n.focus){const r=document.activeElement;n.focus({preventScroll:!0}),n!==r&&SF(n)&&t&&n.select()}}var MN=AF();function AF(){let n=[];return{add(t){const r=n[0];t!==r&&(r==null||r.pause()),n=DN(n,t),n.unshift(t)},remove(t){var r;n=DN(n,t),(r=n[0])==null||r.resume()}}}function DN(n,t){const r=[...n],i=r.indexOf(t);return i!==-1&&r.splice(i,1),r}function CF(n){return n.filter(t=>t.tagName!=="A")}var kF=Lw[" useId ".trim().toString()]||(()=>{}),EF=0;function Dh(n){const[t,r]=M.useState(kF());return xl(()=>{r(i=>i??String(EF++))},[n]),t?`radix-${t}`:""}const TF=["top","right","bottom","left"],Nm=Math.min,ld=Math.max,cb=Math.round,C1=Math.floor,mf=n=>({x:n,y:n}),PF={left:"right",right:"left",bottom:"top",top:"bottom"},RF={start:"end",end:"start"};function W2(n,t,r){return ld(n,Nm(t,r))}function yp(n,t){return typeof n=="function"?n(t):n}function xp(n){return n.split("-")[0]}function wy(n){return n.split("-")[1]}function dj(n){return n==="x"?"y":"x"}function hj(n){return n==="y"?"height":"width"}const IF=new Set(["top","bottom"]);function df(n){return IF.has(xp(n))?"y":"x"}function fj(n){return dj(df(n))}function LF(n,t,r){r===void 0&&(r=!1);const i=wy(n),o=fj(n),l=hj(o);let a=o==="x"?i===(r?"end":"start")?"right":"left":i==="start"?"bottom":"top";return t.reference[l]>t.floating[l]&&(a=ub(a)),[a,ub(a)]}function MF(n){const t=ub(n);return[Y2(n),t,Y2(t)]}function Y2(n){return n.replace(/start|end/g,t=>RF[t])}const ON=["left","right"],zN=["right","left"],DF=["top","bottom"],OF=["bottom","top"];function zF(n,t,r){switch(n){case"top":case"bottom":return r?t?zN:ON:t?ON:zN;case"left":case"right":return t?DF:OF;default:return[]}}function FF(n,t,r,i){const o=wy(n);let l=zF(xp(n),r==="start",i);return o&&(l=l.map(a=>a+"-"+o),t&&(l=l.concat(l.map(Y2)))),l}function ub(n){return n.replace(/left|right|bottom|top/g,t=>PF[t])}function BF(n){return{top:0,right:0,bottom:0,left:0,...n}}function E3(n){return typeof n!="number"?BF(n):{top:n,right:n,bottom:n,left:n}}function db(n){const{x:t,y:r,width:i,height:o}=n;return{width:i,height:o,top:r,left:t,right:t+i,bottom:r+o,x:t,y:r}}function FN(n,t,r){let{reference:i,floating:o}=n;const l=df(t),a=fj(t),p=hj(a),g=xp(t),w=l==="y",j=i.x+i.width/2-o.width/2,S=i.y+i.height/2-o.height/2,T=i[p]/2-o[p]/2;let E;switch(g){case"top":E={x:j,y:i.y-o.height};break;case"bottom":E={x:j,y:i.y+i.height};break;case"right":E={x:i.x+i.width,y:S};break;case"left":E={x:i.x-o.width,y:S};break;default:E={x:i.x,y:i.y}}switch(wy(t)){case"start":E[a]-=T*(r&&w?-1:1);break;case"end":E[a]+=T*(r&&w?-1:1);break}return E}const UF=async(n,t,r)=>{const{placement:i="bottom",strategy:o="absolute",middleware:l=[],platform:a}=r,p=l.filter(Boolean),g=await(a.isRTL==null?void 0:a.isRTL(t));let w=await a.getElementRects({reference:n,floating:t,strategy:o}),{x:j,y:S}=FN(w,i,g),T=i,E={},O=0;for(let R=0;R<p.length;R++){const{name:F,fn:B}=p[R],{x:G,y:z,data:ee,reset:ie}=await B({x:j,y:S,initialPlacement:i,placement:T,strategy:o,middlewareData:E,rects:w,platform:a,elements:{reference:n,floating:t}});j=G??j,S=z??S,E={...E,[F]:{...E[F],...ee}},ie&&O<=50&&(O++,typeof ie=="object"&&(ie.placement&&(T=ie.placement),ie.rects&&(w=ie.rects===!0?await a.getElementRects({reference:n,floating:t,strategy:o}):ie.rects),{x:j,y:S}=FN(w,T,g)),R=-1)}return{x:j,y:S,placement:T,strategy:o,middlewareData:E}};async function Fx(n,t){var r;t===void 0&&(t={});const{x:i,y:o,platform:l,rects:a,elements:p,strategy:g}=n,{boundary:w="clippingAncestors",rootBoundary:j="viewport",elementContext:S="floating",altBoundary:T=!1,padding:E=0}=yp(t,n),O=E3(E),F=p[T?S==="floating"?"reference":"floating":S],B=db(await l.getClippingRect({element:(r=await(l.isElement==null?void 0:l.isElement(F)))==null||r?F:F.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(p.floating)),boundary:w,rootBoundary:j,strategy:g})),G=S==="floating"?{x:i,y:o,width:a.floating.width,height:a.floating.height}:a.reference,z=await(l.getOffsetParent==null?void 0:l.getOffsetParent(p.floating)),ee=await(l.isElement==null?void 0:l.isElement(z))?await(l.getScale==null?void 0:l.getScale(z))||{x:1,y:1}:{x:1,y:1},ie=db(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({elements:p,rect:G,offsetParent:z,strategy:g}):G);return{top:(B.top-ie.top+O.top)/ee.y,bottom:(ie.bottom-B.bottom+O.bottom)/ee.y,left:(B.left-ie.left+O.left)/ee.x,right:(ie.right-B.right+O.right)/ee.x}}const qF=n=>({name:"arrow",options:n,async fn(t){const{x:r,y:i,placement:o,rects:l,platform:a,elements:p,middlewareData:g}=t,{element:w,padding:j=0}=yp(n,t)||{};if(w==null)return{};const S=E3(j),T={x:r,y:i},E=fj(o),O=hj(E),R=await a.getDimensions(w),F=E==="y",B=F?"top":"left",G=F?"bottom":"right",z=F?"clientHeight":"clientWidth",ee=l.reference[O]+l.reference[E]-T[E]-l.floating[O],ie=T[E]-l.reference[E],ge=await(a.getOffsetParent==null?void 0:a.getOffsetParent(w));let K=ge?ge[z]:0;(!K||!await(a.isElement==null?void 0:a.isElement(ge)))&&(K=p.floating[z]||l.floating[O]);const J=ee/2-ie/2,Se=K/2-R[O]/2-1,_e=Nm(S[B],Se),re=Nm(S[G],Se),ce=_e,fe=K-R[O]-re,ye=K/2-R[O]/2+J,Fe=W2(ce,ye,fe),Q=!g.arrow&&wy(o)!=null&&ye!==Fe&&l.reference[O]/2-(ye<ce?_e:re)-R[O]/2<0,pe=Q?ye<ce?ye-ce:ye-fe:0;return{[E]:T[E]+pe,data:{[E]:Fe,centerOffset:ye-Fe-pe,...Q&&{alignmentOffset:pe}},reset:Q}}}),VF=function(n){return n===void 0&&(n={}),{name:"flip",options:n,async fn(t){var r,i;const{placement:o,middlewareData:l,rects:a,initialPlacement:p,platform:g,elements:w}=t,{mainAxis:j=!0,crossAxis:S=!0,fallbackPlacements:T,fallbackStrategy:E="bestFit",fallbackAxisSideDirection:O="none",flipAlignment:R=!0,...F}=yp(n,t);if((r=l.arrow)!=null&&r.alignmentOffset)return{};const B=xp(o),G=df(p),z=xp(p)===p,ee=await(g.isRTL==null?void 0:g.isRTL(w.floating)),ie=T||(z||!R?[ub(p)]:MF(p)),ge=O!=="none";!T&&ge&&ie.push(...FF(p,R,O,ee));const K=[p,...ie],J=await Fx(t,F),Se=[];let _e=((i=l.flip)==null?void 0:i.overflows)||[];if(j&&Se.push(J[B]),S){const ye=LF(o,a,ee);Se.push(J[ye[0]],J[ye[1]])}if(_e=[..._e,{placement:o,overflows:Se}],!Se.every(ye=>ye<=0)){var re,ce;const ye=(((re=l.flip)==null?void 0:re.index)||0)+1,Fe=K[ye];if(Fe&&(!(S==="alignment"?G!==df(Fe):!1)||_e.every(me=>df(me.placement)===G?me.overflows[0]>0:!0)))return{data:{index:ye,overflows:_e},reset:{placement:Fe}};let Q=(ce=_e.filter(pe=>pe.overflows[0]<=0).sort((pe,me)=>pe.overflows[1]-me.overflows[1])[0])==null?void 0:ce.placement;if(!Q)switch(E){case"bestFit":{var fe;const pe=(fe=_e.filter(me=>{if(ge){const Ue=df(me.placement);return Ue===G||Ue==="y"}return!0}).map(me=>[me.placement,me.overflows.filter(Ue=>Ue>0).reduce((Ue,Ke)=>Ue+Ke,0)]).sort((me,Ue)=>me[1]-Ue[1])[0])==null?void 0:fe[0];pe&&(Q=pe);break}case"initialPlacement":Q=p;break}if(o!==Q)return{reset:{placement:Q}}}return{}}}};function BN(n,t){return{top:n.top-t.height,right:n.right-t.width,bottom:n.bottom-t.height,left:n.left-t.width}}function UN(n){return TF.some(t=>n[t]>=0)}const $F=function(n){return n===void 0&&(n={}),{name:"hide",options:n,async fn(t){const{rects:r}=t,{strategy:i="referenceHidden",...o}=yp(n,t);switch(i){case"referenceHidden":{const l=await Fx(t,{...o,elementContext:"reference"}),a=BN(l,r.reference);return{data:{referenceHiddenOffsets:a,referenceHidden:UN(a)}}}case"escaped":{const l=await Fx(t,{...o,altBoundary:!0}),a=BN(l,r.floating);return{data:{escapedOffsets:a,escaped:UN(a)}}}default:return{}}}}},T3=new Set(["left","top"]);async function HF(n,t){const{placement:r,platform:i,elements:o}=n,l=await(i.isRTL==null?void 0:i.isRTL(o.floating)),a=xp(r),p=wy(r),g=df(r)==="y",w=T3.has(a)?-1:1,j=l&&g?-1:1,S=yp(t,n);let{mainAxis:T,crossAxis:E,alignmentAxis:O}=typeof S=="number"?{mainAxis:S,crossAxis:0,alignmentAxis:null}:{mainAxis:S.mainAxis||0,crossAxis:S.crossAxis||0,alignmentAxis:S.alignmentAxis};return p&&typeof O=="number"&&(E=p==="end"?O*-1:O),g?{x:E*j,y:T*w}:{x:T*w,y:E*j}}const GF=function(n){return n===void 0&&(n=0),{name:"offset",options:n,async fn(t){var r,i;const{x:o,y:l,placement:a,middlewareData:p}=t,g=await HF(t,n);return a===((r=p.offset)==null?void 0:r.placement)&&(i=p.arrow)!=null&&i.alignmentOffset?{}:{x:o+g.x,y:l+g.y,data:{...g,placement:a}}}}},WF=function(n){return n===void 0&&(n={}),{name:"shift",options:n,async fn(t){const{x:r,y:i,placement:o}=t,{mainAxis:l=!0,crossAxis:a=!1,limiter:p={fn:F=>{let{x:B,y:G}=F;return{x:B,y:G}}},...g}=yp(n,t),w={x:r,y:i},j=await Fx(t,g),S=df(xp(o)),T=dj(S);let E=w[T],O=w[S];if(l){const F=T==="y"?"top":"left",B=T==="y"?"bottom":"right",G=E+j[F],z=E-j[B];E=W2(G,E,z)}if(a){const F=S==="y"?"top":"left",B=S==="y"?"bottom":"right",G=O+j[F],z=O-j[B];O=W2(G,O,z)}const R=p.fn({...t,[T]:E,[S]:O});return{...R,data:{x:R.x-r,y:R.y-i,enabled:{[T]:l,[S]:a}}}}}},YF=function(n){return n===void 0&&(n={}),{options:n,fn(t){const{x:r,y:i,placement:o,rects:l,middlewareData:a}=t,{offset:p=0,mainAxis:g=!0,crossAxis:w=!0}=yp(n,t),j={x:r,y:i},S=df(o),T=dj(S);let E=j[T],O=j[S];const R=yp(p,t),F=typeof R=="number"?{mainAxis:R,crossAxis:0}:{mainAxis:0,crossAxis:0,...R};if(g){const z=T==="y"?"height":"width",ee=l.reference[T]-l.floating[z]+F.mainAxis,ie=l.reference[T]+l.reference[z]-F.mainAxis;E<ee?E=ee:E>ie&&(E=ie)}if(w){var B,G;const z=T==="y"?"width":"height",ee=T3.has(xp(o)),ie=l.reference[S]-l.floating[z]+(ee&&((B=a.offset)==null?void 0:B[S])||0)+(ee?0:F.crossAxis),ge=l.reference[S]+l.reference[z]+(ee?0:((G=a.offset)==null?void 0:G[S])||0)-(ee?F.crossAxis:0);O<ie?O=ie:O>ge&&(O=ge)}return{[T]:E,[S]:O}}}},ZF=function(n){return n===void 0&&(n={}),{name:"size",options:n,async fn(t){var r,i;const{placement:o,rects:l,platform:a,elements:p}=t,{apply:g=()=>{},...w}=yp(n,t),j=await Fx(t,w),S=xp(o),T=wy(o),E=df(o)==="y",{width:O,height:R}=l.floating;let F,B;S==="top"||S==="bottom"?(F=S,B=T===(await(a.isRTL==null?void 0:a.isRTL(p.floating))?"start":"end")?"left":"right"):(B=S,F=T==="end"?"top":"bottom");const G=R-j.top-j.bottom,z=O-j.left-j.right,ee=Nm(R-j[F],G),ie=Nm(O-j[B],z),ge=!t.middlewareData.shift;let K=ee,J=ie;if((r=t.middlewareData.shift)!=null&&r.enabled.x&&(J=z),(i=t.middlewareData.shift)!=null&&i.enabled.y&&(K=G),ge&&!T){const _e=ld(j.left,0),re=ld(j.right,0),ce=ld(j.top,0),fe=ld(j.bottom,0);E?J=O-2*(_e!==0||re!==0?_e+re:ld(j.left,j.right)):K=R-2*(ce!==0||fe!==0?ce+fe:ld(j.top,j.bottom))}await g({...t,availableWidth:J,availableHeight:K});const Se=await a.getDimensions(p.floating);return O!==Se.width||R!==Se.height?{reset:{rects:!0}}:{}}}};function Vb(){return typeof window<"u"}function jy(n){return P3(n)?(n.nodeName||"").toLowerCase():"#document"}function gd(n){var t;return(n==null||(t=n.ownerDocument)==null?void 0:t.defaultView)||window}function jf(n){var t;return(t=(P3(n)?n.ownerDocument:n.document)||window.document)==null?void 0:t.documentElement}function P3(n){return Vb()?n instanceof Node||n instanceof gd(n).Node:!1}function Oh(n){return Vb()?n instanceof Element||n instanceof gd(n).Element:!1}function _f(n){return Vb()?n instanceof HTMLElement||n instanceof gd(n).HTMLElement:!1}function qN(n){return!Vb()||typeof ShadowRoot>"u"?!1:n instanceof ShadowRoot||n instanceof gd(n).ShadowRoot}const KF=new Set(["inline","contents"]);function s0(n){const{overflow:t,overflowX:r,overflowY:i,display:o}=zh(n);return/auto|scroll|overlay|hidden|clip/.test(t+i+r)&&!KF.has(o)}const XF=new Set(["table","td","th"]);function JF(n){return XF.has(jy(n))}const QF=[":popover-open",":modal"];function $b(n){return QF.some(t=>{try{return n.matches(t)}catch{return!1}})}const e7=["transform","translate","scale","rotate","perspective"],t7=["transform","translate","scale","rotate","perspective","filter"],r7=["paint","layout","strict","content"];function pj(n){const t=mj(),r=Oh(n)?zh(n):n;return e7.some(i=>r[i]?r[i]!=="none":!1)||(r.containerType?r.containerType!=="normal":!1)||!t&&(r.backdropFilter?r.backdropFilter!=="none":!1)||!t&&(r.filter?r.filter!=="none":!1)||t7.some(i=>(r.willChange||"").includes(i))||r7.some(i=>(r.contain||"").includes(i))}function n7(n){let t=Sm(n);for(;_f(t)&&!ny(t);){if(pj(t))return t;if($b(t))return null;t=Sm(t)}return null}function mj(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}const i7=new Set(["html","body","#document"]);function ny(n){return i7.has(jy(n))}function zh(n){return gd(n).getComputedStyle(n)}function Hb(n){return Oh(n)?{scrollLeft:n.scrollLeft,scrollTop:n.scrollTop}:{scrollLeft:n.scrollX,scrollTop:n.scrollY}}function Sm(n){if(jy(n)==="html")return n;const t=n.assignedSlot||n.parentNode||qN(n)&&n.host||jf(n);return qN(t)?t.host:t}function R3(n){const t=Sm(n);return ny(t)?n.ownerDocument?n.ownerDocument.body:n.body:_f(t)&&s0(t)?t:R3(t)}function Bx(n,t,r){var i;t===void 0&&(t=[]),r===void 0&&(r=!0);const o=R3(n),l=o===((i=n.ownerDocument)==null?void 0:i.body),a=gd(o);if(l){const p=Z2(a);return t.concat(a,a.visualViewport||[],s0(o)?o:[],p&&r?Bx(p):[])}return t.concat(o,Bx(o,[],r))}function Z2(n){return n.parent&&Object.getPrototypeOf(n.parent)?n.frameElement:null}function I3(n){const t=zh(n);let r=parseFloat(t.width)||0,i=parseFloat(t.height)||0;const o=_f(n),l=o?n.offsetWidth:r,a=o?n.offsetHeight:i,p=cb(r)!==l||cb(i)!==a;return p&&(r=l,i=a),{width:r,height:i,$:p}}function gj(n){return Oh(n)?n:n.contextElement}function qv(n){const t=gj(n);if(!_f(t))return mf(1);const r=t.getBoundingClientRect(),{width:i,height:o,$:l}=I3(t);let a=(l?cb(r.width):r.width)/i,p=(l?cb(r.height):r.height)/o;return(!a||!Number.isFinite(a))&&(a=1),(!p||!Number.isFinite(p))&&(p=1),{x:a,y:p}}const s7=mf(0);function L3(n){const t=gd(n);return!mj()||!t.visualViewport?s7:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function a7(n,t,r){return t===void 0&&(t=!1),!r||t&&r!==gd(n)?!1:t}function Ag(n,t,r,i){t===void 0&&(t=!1),r===void 0&&(r=!1);const o=n.getBoundingClientRect(),l=gj(n);let a=mf(1);t&&(i?Oh(i)&&(a=qv(i)):a=qv(n));const p=a7(l,r,i)?L3(l):mf(0);let g=(o.left+p.x)/a.x,w=(o.top+p.y)/a.y,j=o.width/a.x,S=o.height/a.y;if(l){const T=gd(l),E=i&&Oh(i)?gd(i):i;let O=T,R=Z2(O);for(;R&&i&&E!==O;){const F=qv(R),B=R.getBoundingClientRect(),G=zh(R),z=B.left+(R.clientLeft+parseFloat(G.paddingLeft))*F.x,ee=B.top+(R.clientTop+parseFloat(G.paddingTop))*F.y;g*=F.x,w*=F.y,j*=F.x,S*=F.y,g+=z,w+=ee,O=gd(R),R=Z2(O)}}return db({width:j,height:S,x:g,y:w})}function Gb(n,t){const r=Hb(n).scrollLeft;return t?t.left+r:Ag(jf(n)).left+r}function M3(n,t){const r=n.getBoundingClientRect(),i=r.left+t.scrollLeft-Gb(n,r),o=r.top+t.scrollTop;return{x:i,y:o}}function o7(n){let{elements:t,rect:r,offsetParent:i,strategy:o}=n;const l=o==="fixed",a=jf(i),p=t?$b(t.floating):!1;if(i===a||p&&l)return r;let g={scrollLeft:0,scrollTop:0},w=mf(1);const j=mf(0),S=_f(i);if((S||!S&&!l)&&((jy(i)!=="body"||s0(a))&&(g=Hb(i)),_f(i))){const E=Ag(i);w=qv(i),j.x=E.x+i.clientLeft,j.y=E.y+i.clientTop}const T=a&&!S&&!l?M3(a,g):mf(0);return{width:r.width*w.x,height:r.height*w.y,x:r.x*w.x-g.scrollLeft*w.x+j.x+T.x,y:r.y*w.y-g.scrollTop*w.y+j.y+T.y}}function l7(n){return Array.from(n.getClientRects())}function c7(n){const t=jf(n),r=Hb(n),i=n.ownerDocument.body,o=ld(t.scrollWidth,t.clientWidth,i.scrollWidth,i.clientWidth),l=ld(t.scrollHeight,t.clientHeight,i.scrollHeight,i.clientHeight);let a=-r.scrollLeft+Gb(n);const p=-r.scrollTop;return zh(i).direction==="rtl"&&(a+=ld(t.clientWidth,i.clientWidth)-o),{width:o,height:l,x:a,y:p}}const VN=25;function u7(n,t){const r=gd(n),i=jf(n),o=r.visualViewport;let l=i.clientWidth,a=i.clientHeight,p=0,g=0;if(o){l=o.width,a=o.height;const j=mj();(!j||j&&t==="fixed")&&(p=o.offsetLeft,g=o.offsetTop)}const w=Gb(i);if(w<=0){const j=i.ownerDocument,S=j.body,T=getComputedStyle(S),E=j.compatMode==="CSS1Compat"&&parseFloat(T.marginLeft)+parseFloat(T.marginRight)||0,O=Math.abs(i.clientWidth-S.clientWidth-E);O<=VN&&(l-=O)}else w<=VN&&(l+=w);return{width:l,height:a,x:p,y:g}}const d7=new Set(["absolute","fixed"]);function h7(n,t){const r=Ag(n,!0,t==="fixed"),i=r.top+n.clientTop,o=r.left+n.clientLeft,l=_f(n)?qv(n):mf(1),a=n.clientWidth*l.x,p=n.clientHeight*l.y,g=o*l.x,w=i*l.y;return{width:a,height:p,x:g,y:w}}function $N(n,t,r){let i;if(t==="viewport")i=u7(n,r);else if(t==="document")i=c7(jf(n));else if(Oh(t))i=h7(t,r);else{const o=L3(n);i={x:t.x-o.x,y:t.y-o.y,width:t.width,height:t.height}}return db(i)}function D3(n,t){const r=Sm(n);return r===t||!Oh(r)||ny(r)?!1:zh(r).position==="fixed"||D3(r,t)}function f7(n,t){const r=t.get(n);if(r)return r;let i=Bx(n,[],!1).filter(p=>Oh(p)&&jy(p)!=="body"),o=null;const l=zh(n).position==="fixed";let a=l?Sm(n):n;for(;Oh(a)&&!ny(a);){const p=zh(a),g=pj(a);!g&&p.position==="fixed"&&(o=null),(l?!g&&!o:!g&&p.position==="static"&&!!o&&d7.has(o.position)||s0(a)&&!g&&D3(n,a))?i=i.filter(j=>j!==a):o=p,a=Sm(a)}return t.set(n,i),i}function p7(n){let{element:t,boundary:r,rootBoundary:i,strategy:o}=n;const a=[...r==="clippingAncestors"?$b(t)?[]:f7(t,this._c):[].concat(r),i],p=a[0],g=a.reduce((w,j)=>{const S=$N(t,j,o);return w.top=ld(S.top,w.top),w.right=Nm(S.right,w.right),w.bottom=Nm(S.bottom,w.bottom),w.left=ld(S.left,w.left),w},$N(t,p,o));return{width:g.right-g.left,height:g.bottom-g.top,x:g.left,y:g.top}}function m7(n){const{width:t,height:r}=I3(n);return{width:t,height:r}}function g7(n,t,r){const i=_f(t),o=jf(t),l=r==="fixed",a=Ag(n,!0,l,t);let p={scrollLeft:0,scrollTop:0};const g=mf(0);function w(){g.x=Gb(o)}if(i||!i&&!l)if((jy(t)!=="body"||s0(o))&&(p=Hb(t)),i){const E=Ag(t,!0,l,t);g.x=E.x+t.clientLeft,g.y=E.y+t.clientTop}else o&&w();l&&!i&&o&&w();const j=o&&!i&&!l?M3(o,p):mf(0),S=a.left+p.scrollLeft-g.x-j.x,T=a.top+p.scrollTop-g.y-j.y;return{x:S,y:T,width:a.width,height:a.height}}function a2(n){return zh(n).position==="static"}function HN(n,t){if(!_f(n)||zh(n).position==="fixed")return null;if(t)return t(n);let r=n.offsetParent;return jf(n)===r&&(r=r.ownerDocument.body),r}function O3(n,t){const r=gd(n);if($b(n))return r;if(!_f(n)){let o=Sm(n);for(;o&&!ny(o);){if(Oh(o)&&!a2(o))return o;o=Sm(o)}return r}let i=HN(n,t);for(;i&&JF(i)&&a2(i);)i=HN(i,t);return i&&ny(i)&&a2(i)&&!pj(i)?r:i||n7(n)||r}const v7=async function(n){const t=this.getOffsetParent||O3,r=this.getDimensions,i=await r(n.floating);return{reference:g7(n.reference,await t(n.floating),n.strategy),floating:{x:0,y:0,width:i.width,height:i.height}}};function y7(n){return zh(n).direction==="rtl"}const x7={convertOffsetParentRelativeRectToViewportRelativeRect:o7,getDocumentElement:jf,getClippingRect:p7,getOffsetParent:O3,getElementRects:v7,getClientRects:l7,getDimensions:m7,getScale:qv,isElement:Oh,isRTL:y7};function z3(n,t){return n.x===t.x&&n.y===t.y&&n.width===t.width&&n.height===t.height}function b7(n,t){let r=null,i;const o=jf(n);function l(){var p;clearTimeout(i),(p=r)==null||p.disconnect(),r=null}function a(p,g){p===void 0&&(p=!1),g===void 0&&(g=1),l();const w=n.getBoundingClientRect(),{left:j,top:S,width:T,height:E}=w;if(p||t(),!T||!E)return;const O=C1(S),R=C1(o.clientWidth-(j+T)),F=C1(o.clientHeight-(S+E)),B=C1(j),z={rootMargin:-O+"px "+-R+"px "+-F+"px "+-B+"px",threshold:ld(0,Nm(1,g))||1};let ee=!0;function ie(ge){const K=ge[0].intersectionRatio;if(K!==g){if(!ee)return a();K?a(!1,K):i=setTimeout(()=>{a(!1,1e-7)},1e3)}K===1&&!z3(w,n.getBoundingClientRect())&&a(),ee=!1}try{r=new IntersectionObserver(ie,{...z,root:o.ownerDocument})}catch{r=new IntersectionObserver(ie,z)}r.observe(n)}return a(!0),l}function _7(n,t,r,i){i===void 0&&(i={});const{ancestorScroll:o=!0,ancestorResize:l=!0,elementResize:a=typeof ResizeObserver=="function",layoutShift:p=typeof IntersectionObserver=="function",animationFrame:g=!1}=i,w=gj(n),j=o||l?[...w?Bx(w):[],...Bx(t)]:[];j.forEach(B=>{o&&B.addEventListener("scroll",r,{passive:!0}),l&&B.addEventListener("resize",r)});const S=w&&p?b7(w,r):null;let T=-1,E=null;a&&(E=new ResizeObserver(B=>{let[G]=B;G&&G.target===w&&E&&(E.unobserve(t),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var z;(z=E)==null||z.observe(t)})),r()}),w&&!g&&E.observe(w),E.observe(t));let O,R=g?Ag(n):null;g&&F();function F(){const B=Ag(n);R&&!z3(R,B)&&r(),R=B,O=requestAnimationFrame(F)}return r(),()=>{var B;j.forEach(G=>{o&&G.removeEventListener("scroll",r),l&&G.removeEventListener("resize",r)}),S==null||S(),(B=E)==null||B.disconnect(),E=null,g&&cancelAnimationFrame(O)}}const w7=GF,j7=WF,N7=VF,S7=ZF,A7=$F,GN=qF,C7=YF,k7=(n,t,r)=>{const i=new Map,o={platform:x7,...r},l={...o.platform,_c:i};return UF(n,t,{...o,platform:l})};var E7=typeof document<"u",T7=function(){},B1=E7?M.useLayoutEffect:T7;function hb(n,t){if(n===t)return!0;if(typeof n!=typeof t)return!1;if(typeof n=="function"&&n.toString()===t.toString())return!0;let r,i,o;if(n&&t&&typeof n=="object"){if(Array.isArray(n)){if(r=n.length,r!==t.length)return!1;for(i=r;i--!==0;)if(!hb(n[i],t[i]))return!1;return!0}if(o=Object.keys(n),r=o.length,r!==Object.keys(t).length)return!1;for(i=r;i--!==0;)if(!{}.hasOwnProperty.call(t,o[i]))return!1;for(i=r;i--!==0;){const l=o[i];if(!(l==="_owner"&&n.$$typeof)&&!hb(n[l],t[l]))return!1}return!0}return n!==n&&t!==t}function F3(n){return typeof window>"u"?1:(n.ownerDocument.defaultView||window).devicePixelRatio||1}function WN(n,t){const r=F3(n);return Math.round(t*r)/r}function o2(n){const t=M.useRef(n);return B1(()=>{t.current=n}),t}function P7(n){n===void 0&&(n={});const{placement:t="bottom",strategy:r="absolute",middleware:i=[],platform:o,elements:{reference:l,floating:a}={},transform:p=!0,whileElementsMounted:g,open:w}=n,[j,S]=M.useState({x:0,y:0,strategy:r,placement:t,middlewareData:{},isPositioned:!1}),[T,E]=M.useState(i);hb(T,i)||E(i);const[O,R]=M.useState(null),[F,B]=M.useState(null),G=M.useCallback(me=>{me!==ge.current&&(ge.current=me,R(me))},[]),z=M.useCallback(me=>{me!==K.current&&(K.current=me,B(me))},[]),ee=l||O,ie=a||F,ge=M.useRef(null),K=M.useRef(null),J=M.useRef(j),Se=g!=null,_e=o2(g),re=o2(o),ce=o2(w),fe=M.useCallback(()=>{if(!ge.current||!K.current)return;const me={placement:t,strategy:r,middleware:T};re.current&&(me.platform=re.current),k7(ge.current,K.current,me).then(Ue=>{const Ke={...Ue,isPositioned:ce.current!==!1};ye.current&&!hb(J.current,Ke)&&(J.current=Ke,dy.flushSync(()=>{S(Ke)}))})},[T,t,r,re,ce]);B1(()=>{w===!1&&J.current.isPositioned&&(J.current.isPositioned=!1,S(me=>({...me,isPositioned:!1})))},[w]);const ye=M.useRef(!1);B1(()=>(ye.current=!0,()=>{ye.current=!1}),[]),B1(()=>{if(ee&&(ge.current=ee),ie&&(K.current=ie),ee&&ie){if(_e.current)return _e.current(ee,ie,fe);fe()}},[ee,ie,fe,_e,Se]);const Fe=M.useMemo(()=>({reference:ge,floating:K,setReference:G,setFloating:z}),[G,z]),Q=M.useMemo(()=>({reference:ee,floating:ie}),[ee,ie]),pe=M.useMemo(()=>{const me={position:r,left:0,top:0};if(!Q.floating)return me;const Ue=WN(Q.floating,j.x),Ke=WN(Q.floating,j.y);return p?{...me,transform:"translate("+Ue+"px, "+Ke+"px)",...F3(Q.floating)>=1.5&&{willChange:"transform"}}:{position:r,left:Ue,top:Ke}},[r,p,Q.floating,j.x,j.y]);return M.useMemo(()=>({...j,update:fe,refs:Fe,elements:Q,floatingStyles:pe}),[j,fe,Fe,Q,pe])}const R7=n=>{function t(r){return{}.hasOwnProperty.call(r,"current")}return{name:"arrow",options:n,fn(r){const{element:i,padding:o}=typeof n=="function"?n(r):n;return i&&t(i)?i.current!=null?GN({element:i.current,padding:o}).fn(r):{}:i?GN({element:i,padding:o}).fn(r):{}}}},I7=(n,t)=>({...w7(n),options:[n,t]}),L7=(n,t)=>({...j7(n),options:[n,t]}),M7=(n,t)=>({...C7(n),options:[n,t]}),D7=(n,t)=>({...N7(n),options:[n,t]}),O7=(n,t)=>({...S7(n),options:[n,t]}),z7=(n,t)=>({...A7(n),options:[n,t]}),F7=(n,t)=>({...R7(n),options:[n,t]});var B7="Arrow",B3=M.forwardRef((n,t)=>{const{children:r,width:i=10,height:o=5,...l}=n;return e.jsx(Cn.svg,{...l,ref:t,width:i,height:o,viewBox:"0 0 30 10",preserveAspectRatio:"none",children:n.asChild?r:e.jsx("polygon",{points:"0,0 30,0 15,10"})})});B3.displayName=B7;var U7=B3;function Wb(n){const[t,r]=M.useState(void 0);return xl(()=>{if(n){r({width:n.offsetWidth,height:n.offsetHeight});const i=new ResizeObserver(o=>{if(!Array.isArray(o)||!o.length)return;const l=o[0];let a,p;if("borderBoxSize"in l){const g=l.borderBoxSize,w=Array.isArray(g)?g[0]:g;a=w.inlineSize,p=w.blockSize}else a=n.offsetWidth,p=n.offsetHeight;r({width:a,height:p})});return i.observe(n,{box:"border-box"}),()=>i.unobserve(n)}else r(void 0)},[n]),t}var vj="Popper",[U3,Ny]=Du(vj),[q7,q3]=U3(vj),V3=n=>{const{__scopePopper:t,children:r}=n,[i,o]=M.useState(null);return e.jsx(q7,{scope:t,anchor:i,onAnchorChange:o,children:r})};V3.displayName=vj;var $3="PopperAnchor",H3=M.forwardRef((n,t)=>{const{__scopePopper:r,virtualRef:i,...o}=n,l=q3($3,r),a=M.useRef(null),p=Wn(t,a),g=M.useRef(null);return M.useEffect(()=>{const w=g.current;g.current=(i==null?void 0:i.current)||a.current,w!==g.current&&l.onAnchorChange(g.current)}),i?null:e.jsx(Cn.div,{...o,ref:p})});H3.displayName=$3;var yj="PopperContent",[V7,$7]=U3(yj),G3=M.forwardRef((n,t)=>{var Ve,tt,Qe,St,Et,zt;const{__scopePopper:r,side:i="bottom",sideOffset:o=0,align:l="center",alignOffset:a=0,arrowPadding:p=0,avoidCollisions:g=!0,collisionBoundary:w=[],collisionPadding:j=0,sticky:S="partial",hideWhenDetached:T=!1,updatePositionStrategy:E="optimized",onPlaced:O,...R}=n,F=q3(yj,r),[B,G]=M.useState(null),z=Wn(t,Lt=>G(Lt)),[ee,ie]=M.useState(null),ge=Wb(ee),K=(ge==null?void 0:ge.width)??0,J=(ge==null?void 0:ge.height)??0,Se=i+(l!=="center"?"-"+l:""),_e=typeof j=="number"?j:{top:0,right:0,bottom:0,left:0,...j},re=Array.isArray(w)?w:[w],ce=re.length>0,fe={padding:_e,boundary:re.filter(G7),altBoundary:ce},{refs:ye,floatingStyles:Fe,placement:Q,isPositioned:pe,middlewareData:me}=P7({strategy:"fixed",placement:Se,whileElementsMounted:(...Lt)=>_7(...Lt,{animationFrame:E==="always"}),elements:{reference:F.anchor},middleware:[I7({mainAxis:o+J,alignmentAxis:a}),g&&L7({mainAxis:!0,crossAxis:!1,limiter:S==="partial"?M7():void 0,...fe}),g&&D7({...fe}),O7({...fe,apply:({elements:Lt,rects:wr,availableWidth:_t,availableHeight:Ye})=>{const{width:$r,height:Cr}=wr.reference,Zt=Lt.floating.style;Zt.setProperty("--radix-popper-available-width",`${_t}px`),Zt.setProperty("--radix-popper-available-height",`${Ye}px`),Zt.setProperty("--radix-popper-anchor-width",`${$r}px`),Zt.setProperty("--radix-popper-anchor-height",`${Cr}px`)}}),ee&&F7({element:ee,padding:p}),W7({arrowWidth:K,arrowHeight:J}),T&&z7({strategy:"referenceHidden",...fe})]}),[Ue,Ke]=Z3(Q),Re=ic(O);xl(()=>{pe&&(Re==null||Re())},[pe,Re]);const te=(Ve=me.arrow)==null?void 0:Ve.x,ue=(tt=me.arrow)==null?void 0:tt.y,Ne=((Qe=me.arrow)==null?void 0:Qe.centerOffset)!==0,[Me,We]=M.useState();return xl(()=>{B&&We(window.getComputedStyle(B).zIndex)},[B]),e.jsx("div",{ref:ye.setFloating,"data-radix-popper-content-wrapper":"",style:{...Fe,transform:pe?Fe.transform:"translate(0, -200%)",minWidth:"max-content",zIndex:Me,"--radix-popper-transform-origin":[(St=me.transformOrigin)==null?void 0:St.x,(Et=me.transformOrigin)==null?void 0:Et.y].join(" "),...((zt=me.hide)==null?void 0:zt.referenceHidden)&&{visibility:"hidden",pointerEvents:"none"}},dir:n.dir,children:e.jsx(V7,{scope:r,placedSide:Ue,onArrowChange:ie,arrowX:te,arrowY:ue,shouldHideArrow:Ne,children:e.jsx(Cn.div,{"data-side":Ue,"data-align":Ke,...R,ref:z,style:{...R.style,animation:pe?void 0:"none"}})})})});G3.displayName=yj;var W3="PopperArrow",H7={top:"bottom",right:"left",bottom:"top",left:"right"},Y3=M.forwardRef(function(t,r){const{__scopePopper:i,...o}=t,l=$7(W3,i),a=H7[l.placedSide];return e.jsx("span",{ref:l.onArrowChange,style:{position:"absolute",left:l.arrowX,top:l.arrowY,[a]:0,transformOrigin:{top:"",right:"0 0",bottom:"center 0",left:"100% 0"}[l.placedSide],transform:{top:"translateY(100%)",right:"translateY(50%) rotate(90deg) translateX(-50%)",bottom:"rotate(180deg)",left:"translateY(50%) rotate(-90deg) translateX(50%)"}[l.placedSide],visibility:l.shouldHideArrow?"hidden":void 0},children:e.jsx(U7,{...o,ref:r,style:{...o.style,display:"block"}})})});Y3.displayName=W3;function G7(n){return n!==null}var W7=n=>({name:"transformOrigin",options:n,fn(t){var F,B,G;const{placement:r,rects:i,middlewareData:o}=t,a=((F=o.arrow)==null?void 0:F.centerOffset)!==0,p=a?0:n.arrowWidth,g=a?0:n.arrowHeight,[w,j]=Z3(r),S={start:"0%",center:"50%",end:"100%"}[j],T=(((B=o.arrow)==null?void 0:B.x)??0)+p/2,E=(((G=o.arrow)==null?void 0:G.y)??0)+g/2;let O="",R="";return w==="bottom"?(O=a?S:`${T}px`,R=`${-g}px`):w==="top"?(O=a?S:`${T}px`,R=`${i.floating.height+g}px`):w==="right"?(O=`${-g}px`,R=a?S:`${E}px`):w==="left"&&(O=`${i.floating.width+g}px`,R=a?S:`${E}px`),{data:{x:O,y:R}}}});function Z3(n){const[t,r="center"]=n.split("-");return[t,r]}var xj=V3,Yb=H3,bj=G3,_j=Y3,Y7="Portal",a0=M.forwardRef((n,t)=>{var p;const{container:r,...i}=n,[o,l]=M.useState(!1);xl(()=>l(!0),[]);const a=r||o&&((p=globalThis==null?void 0:globalThis.document)==null?void 0:p.body);return a?Mw.createPortal(e.jsx(Cn.div,{...i,ref:t}),a):null});a0.displayName=Y7;function Z7(n,t){return M.useReducer((r,i)=>t[r][i]??r,n)}var Jc=n=>{const{present:t,children:r}=n,i=K7(t),o=typeof r=="function"?r({present:i.isPresent}):M.Children.only(r),l=Wn(i.ref,X7(o));return typeof r=="function"||i.isPresent?M.cloneElement(o,{ref:l}):null};Jc.displayName="Presence";function K7(n){const[t,r]=M.useState(),i=M.useRef(null),o=M.useRef(n),l=M.useRef("none"),a=n?"mounted":"unmounted",[p,g]=Z7(a,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return M.useEffect(()=>{const w=k1(i.current);l.current=p==="mounted"?w:"none"},[p]),xl(()=>{const w=i.current,j=o.current;if(j!==n){const T=l.current,E=k1(w);n?g("MOUNT"):E==="none"||(w==null?void 0:w.display)==="none"?g("UNMOUNT"):g(j&&T!==E?"ANIMATION_OUT":"UNMOUNT"),o.current=n}},[n,g]),xl(()=>{if(t){let w;const j=t.ownerDocument.defaultView??window,S=E=>{const R=k1(i.current).includes(CSS.escape(E.animationName));if(E.target===t&&R&&(g("ANIMATION_END"),!o.current)){const F=t.style.animationFillMode;t.style.animationFillMode="forwards",w=j.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=F)})}},T=E=>{E.target===t&&(l.current=k1(i.current))};return t.addEventListener("animationstart",T),t.addEventListener("animationcancel",S),t.addEventListener("animationend",S),()=>{j.clearTimeout(w),t.removeEventListener("animationstart",T),t.removeEventListener("animationcancel",S),t.removeEventListener("animationend",S)}}else g("ANIMATION_END")},[t,g]),{isPresent:["mounted","unmountSuspended"].includes(p),ref:M.useCallback(w=>{i.current=w?getComputedStyle(w):null,r(w)},[])}}function k1(n){return(n==null?void 0:n.animationName)||"none"}function X7(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}var l2="rovingFocusGroup.onEntryFocus",J7={bubbles:!1,cancelable:!0},o0="RovingFocusGroup",[K2,K3,Q7]=Ub(o0),[eB,Zb]=Du(o0,[Q7]),[tB,rB]=eB(o0),X3=M.forwardRef((n,t)=>e.jsx(K2.Provider,{scope:n.__scopeRovingFocusGroup,children:e.jsx(K2.Slot,{scope:n.__scopeRovingFocusGroup,children:e.jsx(nB,{...n,ref:t})})}));X3.displayName=o0;var nB=M.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:r,orientation:i,loop:o=!1,dir:l,currentTabStopId:a,defaultCurrentTabStopId:p,onCurrentTabStopIdChange:g,onEntryFocus:w,preventScrollOnEntryFocus:j=!1,...S}=n,T=M.useRef(null),E=Wn(t,T),O=_y(l),[R,F]=bf({prop:a,defaultProp:p??null,onChange:g,caller:o0}),[B,G]=M.useState(!1),z=ic(w),ee=K3(r),ie=M.useRef(!1),[ge,K]=M.useState(0);return M.useEffect(()=>{const J=T.current;if(J)return J.addEventListener(l2,z),()=>J.removeEventListener(l2,z)},[z]),e.jsx(tB,{scope:r,orientation:i,dir:O,loop:o,currentTabStopId:R,onItemFocus:M.useCallback(J=>F(J),[F]),onItemShiftTab:M.useCallback(()=>G(!0),[]),onFocusableItemAdd:M.useCallback(()=>K(J=>J+1),[]),onFocusableItemRemove:M.useCallback(()=>K(J=>J-1),[]),children:e.jsx(Cn.div,{tabIndex:B||ge===0?-1:0,"data-orientation":i,...S,ref:E,style:{outline:"none",...n.style},onMouseDown:Dr(n.onMouseDown,()=>{ie.current=!0}),onFocus:Dr(n.onFocus,J=>{const Se=!ie.current;if(J.target===J.currentTarget&&Se&&!B){const _e=new CustomEvent(l2,J7);if(J.currentTarget.dispatchEvent(_e),!_e.defaultPrevented){const re=ee().filter(Q=>Q.focusable),ce=re.find(Q=>Q.active),fe=re.find(Q=>Q.id===R),Fe=[ce,fe,...re].filter(Boolean).map(Q=>Q.ref.current);eC(Fe,j)}}ie.current=!1}),onBlur:Dr(n.onBlur,()=>G(!1))})})}),J3="RovingFocusGroupItem",Q3=M.forwardRef((n,t)=>{const{__scopeRovingFocusGroup:r,focusable:i=!0,active:o=!1,tabStopId:l,children:a,...p}=n,g=Dh(),w=l||g,j=rB(J3,r),S=j.currentTabStopId===w,T=K3(r),{onFocusableItemAdd:E,onFocusableItemRemove:O,currentTabStopId:R}=j;return M.useEffect(()=>{if(i)return E(),()=>O()},[i,E,O]),e.jsx(K2.ItemSlot,{scope:r,id:w,focusable:i,active:o,children:e.jsx(Cn.span,{tabIndex:S?0:-1,"data-orientation":j.orientation,...p,ref:t,onMouseDown:Dr(n.onMouseDown,F=>{i?j.onItemFocus(w):F.preventDefault()}),onFocus:Dr(n.onFocus,()=>j.onItemFocus(w)),onKeyDown:Dr(n.onKeyDown,F=>{if(F.key==="Tab"&&F.shiftKey){j.onItemShiftTab();return}if(F.target!==F.currentTarget)return;const B=aB(F,j.orientation,j.dir);if(B!==void 0){if(F.metaKey||F.ctrlKey||F.altKey||F.shiftKey)return;F.preventDefault();let z=T().filter(ee=>ee.focusable).map(ee=>ee.ref.current);if(B==="last")z.reverse();else if(B==="prev"||B==="next"){B==="prev"&&z.reverse();const ee=z.indexOf(F.currentTarget);z=j.loop?oB(z,ee+1):z.slice(ee+1)}setTimeout(()=>eC(z))}}),children:typeof a=="function"?a({isCurrentTabStop:S,hasTabStop:R!=null}):a})})});Q3.displayName=J3;var iB={ArrowLeft:"prev",ArrowUp:"prev",ArrowRight:"next",ArrowDown:"next",PageUp:"first",Home:"first",PageDown:"last",End:"last"};function sB(n,t){return t!=="rtl"?n:n==="ArrowLeft"?"ArrowRight":n==="ArrowRight"?"ArrowLeft":n}function aB(n,t,r){const i=sB(n.key,r);if(!(t==="vertical"&&["ArrowLeft","ArrowRight"].includes(i))&&!(t==="horizontal"&&["ArrowUp","ArrowDown"].includes(i)))return iB[i]}function eC(n,t=!1){const r=document.activeElement;for(const i of n)if(i===r||(i.focus({preventScroll:t}),document.activeElement!==r))return}function oB(n,t){return n.map((r,i)=>n[(t+i)%n.length])}var tC=X3,rC=Q3;function lB(n){const t=cB(n),r=M.forwardRef((i,o)=>{const{children:l,...a}=i,p=M.Children.toArray(l),g=p.find(dB);if(g){const w=g.props.children,j=p.map(S=>S===g?M.Children.count(w)>1?M.Children.only(null):M.isValidElement(w)?w.props.children:null:S);return e.jsx(t,{...a,ref:o,children:M.isValidElement(w)?M.cloneElement(w,void 0,j):null})}return e.jsx(t,{...a,ref:o,children:l})});return r.displayName=`${n}.Slot`,r}function cB(n){const t=M.forwardRef((r,i)=>{const{children:o,...l}=r;if(M.isValidElement(o)){const a=fB(o),p=hB(l,o.props);return o.type!==M.Fragment&&(p.ref=i?wf(i,a):a),M.cloneElement(o,p)}return M.Children.count(o)>1?M.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var uB=Symbol("radix.slottable");function dB(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===uB}function hB(n,t){const r={...t};for(const i in t){const o=n[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...p)=>{const g=l(...p);return o(...p),g}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...n,...r}}function fB(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}var pB=function(n){if(typeof document>"u")return null;var t=Array.isArray(n)?n[0]:n;return t.ownerDocument.body},jv=new WeakMap,E1=new WeakMap,T1={},c2=0,nC=function(n){return n&&(n.host||nC(n.parentNode))},mB=function(n,t){return t.map(function(r){if(n.contains(r))return r;var i=nC(r);return i&&n.contains(i)?i:(console.error("aria-hidden",r,"in not contained inside",n,". Doing nothing"),null)}).filter(function(r){return!!r})},gB=function(n,t,r,i){var o=mB(t,Array.isArray(n)?n:[n]);T1[r]||(T1[r]=new WeakMap);var l=T1[r],a=[],p=new Set,g=new Set(o),w=function(S){!S||p.has(S)||(p.add(S),w(S.parentNode))};o.forEach(w);var j=function(S){!S||g.has(S)||Array.prototype.forEach.call(S.children,function(T){if(p.has(T))j(T);else try{var E=T.getAttribute(i),O=E!==null&&E!=="false",R=(jv.get(T)||0)+1,F=(l.get(T)||0)+1;jv.set(T,R),l.set(T,F),a.push(T),R===1&&O&&E1.set(T,!0),F===1&&T.setAttribute(r,"true"),O||T.setAttribute(i,"true")}catch(B){console.error("aria-hidden: cannot operate on ",T,B)}})};return j(t),p.clear(),c2++,function(){a.forEach(function(S){var T=jv.get(S)-1,E=l.get(S)-1;jv.set(S,T),l.set(S,E),T||(E1.has(S)||S.removeAttribute(i),E1.delete(S)),E||S.removeAttribute(r)}),c2--,c2||(jv=new WeakMap,jv=new WeakMap,E1=new WeakMap,T1={})}},Kb=function(n,t,r){r===void 0&&(r="data-aria-hidden");var i=Array.from(Array.isArray(n)?n:[n]),o=pB(n);return o?(i.push.apply(i,Array.from(o.querySelectorAll("[aria-live], script"))),gB(i,o,r,"aria-hidden")):function(){return null}},U1="right-scroll-bar-position",q1="width-before-scroll-bar",vB="with-scroll-bars-hidden",yB="--removed-body-scroll-bar-size";function u2(n,t){return typeof n=="function"?n(t):n&&(n.current=t),n}function xB(n,t){var r=M.useState(function(){return{value:n,callback:t,facade:{get current(){return r.value},set current(i){var o=r.value;o!==i&&(r.value=i,r.callback(i,o))}}}})[0];return r.callback=t,r.facade}var bB=typeof window<"u"?M.useLayoutEffect:M.useEffect,YN=new WeakMap;function _B(n,t){var r=xB(null,function(i){return n.forEach(function(o){return u2(o,i)})});return bB(function(){var i=YN.get(r);if(i){var o=new Set(i),l=new Set(n),a=r.current;o.forEach(function(p){l.has(p)||u2(p,null)}),l.forEach(function(p){o.has(p)||u2(p,a)})}YN.set(r,n)},[n]),r}function wB(n){return n}function jB(n,t){t===void 0&&(t=wB);var r=[],i=!1,o={read:function(){if(i)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return r.length?r[r.length-1]:n},useMedium:function(l){var a=t(l,i);return r.push(a),function(){r=r.filter(function(p){return p!==a})}},assignSyncMedium:function(l){for(i=!0;r.length;){var a=r;r=[],a.forEach(l)}r={push:function(p){return l(p)},filter:function(){return r}}},assignMedium:function(l){i=!0;var a=[];if(r.length){var p=r;r=[],p.forEach(l),a=r}var g=function(){var j=a;a=[],j.forEach(l)},w=function(){return Promise.resolve().then(g)};w(),r={push:function(j){a.push(j),w()},filter:function(j){return a=a.filter(j),r}}}};return o}function NB(n){n===void 0&&(n={});var t=jB(null);return t.options=Zd({async:!0,ssr:!1},n),t}var iC=function(n){var t=n.sideCar,r=Tm(n,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var i=t.read();if(!i)throw new Error("Sidecar medium not found");return M.createElement(i,Zd({},r))};iC.isSideCarExport=!0;function SB(n,t){return n.useMedium(t),iC}var sC=NB(),d2=function(){},Xb=M.forwardRef(function(n,t){var r=M.useRef(null),i=M.useState({onScrollCapture:d2,onWheelCapture:d2,onTouchMoveCapture:d2}),o=i[0],l=i[1],a=n.forwardProps,p=n.children,g=n.className,w=n.removeScrollBar,j=n.enabled,S=n.shards,T=n.sideCar,E=n.noRelative,O=n.noIsolation,R=n.inert,F=n.allowPinchZoom,B=n.as,G=B===void 0?"div":B,z=n.gapMode,ee=Tm(n,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noRelative","noIsolation","inert","allowPinchZoom","as","gapMode"]),ie=T,ge=_B([r,t]),K=Zd(Zd({},ee),o);return M.createElement(M.Fragment,null,j&&M.createElement(ie,{sideCar:sC,removeScrollBar:w,shards:S,noRelative:E,noIsolation:O,inert:R,setCallbacks:l,allowPinchZoom:!!F,lockRef:r,gapMode:z}),a?M.cloneElement(M.Children.only(p),Zd(Zd({},K),{ref:ge})):M.createElement(G,Zd({},K,{className:g,ref:ge}),p))});Xb.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};Xb.classNames={fullWidth:q1,zeroRight:U1};var AB=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function CB(){if(!document)return null;var n=document.createElement("style");n.type="text/css";var t=AB();return t&&n.setAttribute("nonce",t),n}function kB(n,t){n.styleSheet?n.styleSheet.cssText=t:n.appendChild(document.createTextNode(t))}function EB(n){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(n)}var TB=function(){var n=0,t=null;return{add:function(r){n==0&&(t=CB())&&(kB(t,r),EB(t)),n++},remove:function(){n--,!n&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},PB=function(){var n=TB();return function(t,r){M.useEffect(function(){return n.add(t),function(){n.remove()}},[t&&r])}},aC=function(){var n=PB(),t=function(r){var i=r.styles,o=r.dynamic;return n(i,o),null};return t},RB={left:0,top:0,right:0,gap:0},h2=function(n){return parseInt(n||"",10)||0},IB=function(n){var t=window.getComputedStyle(document.body),r=t[n==="padding"?"paddingLeft":"marginLeft"],i=t[n==="padding"?"paddingTop":"marginTop"],o=t[n==="padding"?"paddingRight":"marginRight"];return[h2(r),h2(i),h2(o)]},LB=function(n){if(n===void 0&&(n="margin"),typeof window>"u")return RB;var t=IB(n),r=document.documentElement.clientWidth,i=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,i-r+t[2]-t[0])}},MB=aC(),Vv="data-scroll-locked",DB=function(n,t,r,i){var o=n.left,l=n.top,a=n.right,p=n.gap;return r===void 0&&(r="margin"),`
  .`.concat(vB,` {
   overflow: hidden `).concat(i,`;
   padding-right: `).concat(p,"px ").concat(i,`;
  }
  body[`).concat(Vv,`] {
    overflow: hidden `).concat(i,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(i,";"),r==="margin"&&`
    padding-left: `.concat(o,`px;
    padding-top: `).concat(l,`px;
    padding-right: `).concat(a,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(p,"px ").concat(i,`;
    `),r==="padding"&&"padding-right: ".concat(p,"px ").concat(i,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(U1,` {
    right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(q1,` {
    margin-right: `).concat(p,"px ").concat(i,`;
  }
  
  .`).concat(U1," .").concat(U1,` {
    right: 0 `).concat(i,`;
  }
  
  .`).concat(q1," .").concat(q1,` {
    margin-right: 0 `).concat(i,`;
  }
  
  body[`).concat(Vv,`] {
    `).concat(yB,": ").concat(p,`px;
  }
`)},ZN=function(){var n=parseInt(document.body.getAttribute(Vv)||"0",10);return isFinite(n)?n:0},OB=function(){M.useEffect(function(){return document.body.setAttribute(Vv,(ZN()+1).toString()),function(){var n=ZN()-1;n<=0?document.body.removeAttribute(Vv):document.body.setAttribute(Vv,n.toString())}},[])},zB=function(n){var t=n.noRelative,r=n.noImportant,i=n.gapMode,o=i===void 0?"margin":i;OB();var l=M.useMemo(function(){return LB(o)},[o]);return M.createElement(MB,{styles:DB(l,!t,o,r?"":"!important")})},X2=!1;if(typeof window<"u")try{var P1=Object.defineProperty({},"passive",{get:function(){return X2=!0,!0}});window.addEventListener("test",P1,P1),window.removeEventListener("test",P1,P1)}catch{X2=!1}var Nv=X2?{passive:!1}:!1,FB=function(n){return n.tagName==="TEXTAREA"},oC=function(n,t){if(!(n instanceof Element))return!1;var r=window.getComputedStyle(n);return r[t]!=="hidden"&&!(r.overflowY===r.overflowX&&!FB(n)&&r[t]==="visible")},BB=function(n){return oC(n,"overflowY")},UB=function(n){return oC(n,"overflowX")},KN=function(n,t){var r=t.ownerDocument,i=t;do{typeof ShadowRoot<"u"&&i instanceof ShadowRoot&&(i=i.host);var o=lC(n,i);if(o){var l=cC(n,i),a=l[1],p=l[2];if(a>p)return!0}i=i.parentNode}while(i&&i!==r.body);return!1},qB=function(n){var t=n.scrollTop,r=n.scrollHeight,i=n.clientHeight;return[t,r,i]},VB=function(n){var t=n.scrollLeft,r=n.scrollWidth,i=n.clientWidth;return[t,r,i]},lC=function(n,t){return n==="v"?BB(t):UB(t)},cC=function(n,t){return n==="v"?qB(t):VB(t)},$B=function(n,t){return n==="h"&&t==="rtl"?-1:1},HB=function(n,t,r,i,o){var l=$B(n,window.getComputedStyle(t).direction),a=l*i,p=r.target,g=t.contains(p),w=!1,j=a>0,S=0,T=0;do{if(!p)break;var E=cC(n,p),O=E[0],R=E[1],F=E[2],B=R-F-l*O;(O||B)&&lC(n,p)&&(S+=B,T+=O);var G=p.parentNode;p=G&&G.nodeType===Node.DOCUMENT_FRAGMENT_NODE?G.host:G}while(!g&&p!==document.body||g&&(t.contains(p)||t===p));return(j&&Math.abs(S)<1||!j&&Math.abs(T)<1)&&(w=!0),w},R1=function(n){return"changedTouches"in n?[n.changedTouches[0].clientX,n.changedTouches[0].clientY]:[0,0]},XN=function(n){return[n.deltaX,n.deltaY]},JN=function(n){return n&&"current"in n?n.current:n},GB=function(n,t){return n[0]===t[0]&&n[1]===t[1]},WB=function(n){return`
  .block-interactivity-`.concat(n,` {pointer-events: none;}
  .allow-interactivity-`).concat(n,` {pointer-events: all;}
`)},YB=0,Sv=[];function ZB(n){var t=M.useRef([]),r=M.useRef([0,0]),i=M.useRef(),o=M.useState(YB++)[0],l=M.useState(aC)[0],a=M.useRef(n);M.useEffect(function(){a.current=n},[n]),M.useEffect(function(){if(n.inert){document.body.classList.add("block-interactivity-".concat(o));var R=$w([n.lockRef.current],(n.shards||[]).map(JN),!0).filter(Boolean);return R.forEach(function(F){return F.classList.add("allow-interactivity-".concat(o))}),function(){document.body.classList.remove("block-interactivity-".concat(o)),R.forEach(function(F){return F.classList.remove("allow-interactivity-".concat(o))})}}},[n.inert,n.lockRef.current,n.shards]);var p=M.useCallback(function(R,F){if("touches"in R&&R.touches.length===2||R.type==="wheel"&&R.ctrlKey)return!a.current.allowPinchZoom;var B=R1(R),G=r.current,z="deltaX"in R?R.deltaX:G[0]-B[0],ee="deltaY"in R?R.deltaY:G[1]-B[1],ie,ge=R.target,K=Math.abs(z)>Math.abs(ee)?"h":"v";if("touches"in R&&K==="h"&&ge.type==="range")return!1;var J=KN(K,ge);if(!J)return!0;if(J?ie=K:(ie=K==="v"?"h":"v",J=KN(K,ge)),!J)return!1;if(!i.current&&"changedTouches"in R&&(z||ee)&&(i.current=ie),!ie)return!0;var Se=i.current||ie;return HB(Se,F,R,Se==="h"?z:ee)},[]),g=M.useCallback(function(R){var F=R;if(!(!Sv.length||Sv[Sv.length-1]!==l)){var B="deltaY"in F?XN(F):R1(F),G=t.current.filter(function(ie){return ie.name===F.type&&(ie.target===F.target||F.target===ie.shadowParent)&&GB(ie.delta,B)})[0];if(G&&G.should){F.cancelable&&F.preventDefault();return}if(!G){var z=(a.current.shards||[]).map(JN).filter(Boolean).filter(function(ie){return ie.contains(F.target)}),ee=z.length>0?p(F,z[0]):!a.current.noIsolation;ee&&F.cancelable&&F.preventDefault()}}},[]),w=M.useCallback(function(R,F,B,G){var z={name:R,delta:F,target:B,should:G,shadowParent:KB(B)};t.current.push(z),setTimeout(function(){t.current=t.current.filter(function(ee){return ee!==z})},1)},[]),j=M.useCallback(function(R){r.current=R1(R),i.current=void 0},[]),S=M.useCallback(function(R){w(R.type,XN(R),R.target,p(R,n.lockRef.current))},[]),T=M.useCallback(function(R){w(R.type,R1(R),R.target,p(R,n.lockRef.current))},[]);M.useEffect(function(){return Sv.push(l),n.setCallbacks({onScrollCapture:S,onWheelCapture:S,onTouchMoveCapture:T}),document.addEventListener("wheel",g,Nv),document.addEventListener("touchmove",g,Nv),document.addEventListener("touchstart",j,Nv),function(){Sv=Sv.filter(function(R){return R!==l}),document.removeEventListener("wheel",g,Nv),document.removeEventListener("touchmove",g,Nv),document.removeEventListener("touchstart",j,Nv)}},[]);var E=n.removeScrollBar,O=n.inert;return M.createElement(M.Fragment,null,O?M.createElement(l,{styles:WB(o)}):null,E?M.createElement(zB,{noRelative:n.noRelative,gapMode:n.gapMode}):null)}function KB(n){for(var t=null;n!==null;)n instanceof ShadowRoot&&(t=n.host,n=n.host),n=n.parentNode;return t}const XB=SB(sC,ZB);var l0=M.forwardRef(function(n,t){return M.createElement(Xb,Zd({},n,{ref:t,sideCar:XB}))});l0.classNames=Xb.classNames;var J2=["Enter"," "],JB=["ArrowDown","PageUp","Home"],uC=["ArrowUp","PageDown","End"],QB=[...JB,...uC],e9={ltr:[...J2,"ArrowRight"],rtl:[...J2,"ArrowLeft"]},t9={ltr:["ArrowLeft"],rtl:["ArrowRight"]},c0="Menu",[Ux,r9,n9]=Ub(c0),[Ig,dC]=Du(c0,[n9,Ny,Zb]),Jb=Ny(),hC=Zb(),[i9,Lg]=Ig(c0),[s9,u0]=Ig(c0),fC=n=>{const{__scopeMenu:t,open:r=!1,children:i,dir:o,onOpenChange:l,modal:a=!0}=n,p=Jb(t),[g,w]=M.useState(null),j=M.useRef(!1),S=ic(l),T=_y(o);return M.useEffect(()=>{const E=()=>{j.current=!0,document.addEventListener("pointerdown",O,{capture:!0,once:!0}),document.addEventListener("pointermove",O,{capture:!0,once:!0})},O=()=>j.current=!1;return document.addEventListener("keydown",E,{capture:!0}),()=>{document.removeEventListener("keydown",E,{capture:!0}),document.removeEventListener("pointerdown",O,{capture:!0}),document.removeEventListener("pointermove",O,{capture:!0})}},[]),e.jsx(xj,{...p,children:e.jsx(i9,{scope:t,open:r,onOpenChange:S,content:g,onContentChange:w,children:e.jsx(s9,{scope:t,onClose:M.useCallback(()=>S(!1),[S]),isUsingKeyboardRef:j,dir:T,modal:a,children:i})})})};fC.displayName=c0;var a9="MenuAnchor",wj=M.forwardRef((n,t)=>{const{__scopeMenu:r,...i}=n,o=Jb(r);return e.jsx(Yb,{...o,...i,ref:t})});wj.displayName=a9;var jj="MenuPortal",[o9,pC]=Ig(jj,{forceMount:void 0}),mC=n=>{const{__scopeMenu:t,forceMount:r,children:i,container:o}=n,l=Lg(jj,t);return e.jsx(o9,{scope:t,forceMount:r,children:e.jsx(Jc,{present:r||l.open,children:e.jsx(a0,{asChild:!0,container:o,children:i})})})};mC.displayName=jj;var Kd="MenuContent",[l9,Nj]=Ig(Kd),gC=M.forwardRef((n,t)=>{const r=pC(Kd,n.__scopeMenu),{forceMount:i=r.forceMount,...o}=n,l=Lg(Kd,n.__scopeMenu),a=u0(Kd,n.__scopeMenu);return e.jsx(Ux.Provider,{scope:n.__scopeMenu,children:e.jsx(Jc,{present:i||l.open,children:e.jsx(Ux.Slot,{scope:n.__scopeMenu,children:a.modal?e.jsx(c9,{...o,ref:t}):e.jsx(u9,{...o,ref:t})})})})}),c9=M.forwardRef((n,t)=>{const r=Lg(Kd,n.__scopeMenu),i=M.useRef(null),o=Wn(t,i);return M.useEffect(()=>{const l=i.current;if(l)return Kb(l)},[]),e.jsx(Sj,{...n,ref:o,trapFocus:r.open,disableOutsidePointerEvents:r.open,disableOutsideScroll:!0,onFocusOutside:Dr(n.onFocusOutside,l=>l.preventDefault(),{checkForDefaultPrevented:!1}),onDismiss:()=>r.onOpenChange(!1)})}),u9=M.forwardRef((n,t)=>{const r=Lg(Kd,n.__scopeMenu);return e.jsx(Sj,{...n,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,disableOutsideScroll:!1,onDismiss:()=>r.onOpenChange(!1)})}),d9=lB("MenuContent.ScrollLock"),Sj=M.forwardRef((n,t)=>{const{__scopeMenu:r,loop:i=!1,trapFocus:o,onOpenAutoFocus:l,onCloseAutoFocus:a,disableOutsidePointerEvents:p,onEntryFocus:g,onEscapeKeyDown:w,onPointerDownOutside:j,onFocusOutside:S,onInteractOutside:T,onDismiss:E,disableOutsideScroll:O,...R}=n,F=Lg(Kd,r),B=u0(Kd,r),G=Jb(r),z=hC(r),ee=r9(r),[ie,ge]=M.useState(null),K=M.useRef(null),J=Wn(t,K,F.onContentChange),Se=M.useRef(0),_e=M.useRef(""),re=M.useRef(0),ce=M.useRef(null),fe=M.useRef("right"),ye=M.useRef(0),Fe=O?l0:M.Fragment,Q=O?{as:d9,allowPinchZoom:!0}:void 0,pe=Ue=>{var Ve,tt;const Ke=_e.current+Ue,Re=ee().filter(Qe=>!Qe.disabled),te=document.activeElement,ue=(Ve=Re.find(Qe=>Qe.ref.current===te))==null?void 0:Ve.textValue,Ne=Re.map(Qe=>Qe.textValue),Me=j9(Ne,Ke,ue),We=(tt=Re.find(Qe=>Qe.textValue===Me))==null?void 0:tt.ref.current;(function Qe(St){_e.current=St,window.clearTimeout(Se.current),St!==""&&(Se.current=window.setTimeout(()=>Qe(""),1e3))})(Ke),We&&setTimeout(()=>We.focus())};M.useEffect(()=>()=>window.clearTimeout(Se.current),[]),qb();const me=M.useCallback(Ue=>{var Re,te;return fe.current===((Re=ce.current)==null?void 0:Re.side)&&S9(Ue,(te=ce.current)==null?void 0:te.area)},[]);return e.jsx(l9,{scope:r,searchRef:_e,onItemEnter:M.useCallback(Ue=>{me(Ue)&&Ue.preventDefault()},[me]),onItemLeave:M.useCallback(Ue=>{var Ke;me(Ue)||((Ke=K.current)==null||Ke.focus(),ge(null))},[me]),onTriggerLeave:M.useCallback(Ue=>{me(Ue)&&Ue.preventDefault()},[me]),pointerGraceTimerRef:re,onPointerGraceIntentChange:M.useCallback(Ue=>{ce.current=Ue},[]),children:e.jsx(Fe,{...Q,children:e.jsx(i0,{asChild:!0,trapped:o,onMountAutoFocus:Dr(l,Ue=>{var Ke;Ue.preventDefault(),(Ke=K.current)==null||Ke.focus({preventScroll:!0})}),onUnmountAutoFocus:a,children:e.jsx(n0,{asChild:!0,disableOutsidePointerEvents:p,onEscapeKeyDown:w,onPointerDownOutside:j,onFocusOutside:S,onInteractOutside:T,onDismiss:E,children:e.jsx(tC,{asChild:!0,...z,dir:B.dir,orientation:"vertical",loop:i,currentTabStopId:ie,onCurrentTabStopIdChange:ge,onEntryFocus:Dr(g,Ue=>{B.isUsingKeyboardRef.current||Ue.preventDefault()}),preventScrollOnEntryFocus:!0,children:e.jsx(bj,{role:"menu","aria-orientation":"vertical","data-state":RC(F.open),"data-radix-menu-content":"",dir:B.dir,...G,...R,ref:J,style:{outline:"none",...R.style},onKeyDown:Dr(R.onKeyDown,Ue=>{const Re=Ue.target.closest("[data-radix-menu-content]")===Ue.currentTarget,te=Ue.ctrlKey||Ue.altKey||Ue.metaKey,ue=Ue.key.length===1;Re&&(Ue.key==="Tab"&&Ue.preventDefault(),!te&&ue&&pe(Ue.key));const Ne=K.current;if(Ue.target!==Ne||!QB.includes(Ue.key))return;Ue.preventDefault();const We=ee().filter(Ve=>!Ve.disabled).map(Ve=>Ve.ref.current);uC.includes(Ue.key)&&We.reverse(),_9(We)}),onBlur:Dr(n.onBlur,Ue=>{Ue.currentTarget.contains(Ue.target)||(window.clearTimeout(Se.current),_e.current="")}),onPointerMove:Dr(n.onPointerMove,qx(Ue=>{const Ke=Ue.target,Re=ye.current!==Ue.clientX;if(Ue.currentTarget.contains(Ke)&&Re){const te=Ue.clientX>ye.current?"right":"left";fe.current=te,ye.current=Ue.clientX}}))})})})})})})});gC.displayName=Kd;var h9="MenuGroup",Aj=M.forwardRef((n,t)=>{const{__scopeMenu:r,...i}=n;return e.jsx(Cn.div,{role:"group",...i,ref:t})});Aj.displayName=h9;var f9="MenuLabel",vC=M.forwardRef((n,t)=>{const{__scopeMenu:r,...i}=n;return e.jsx(Cn.div,{...i,ref:t})});vC.displayName=f9;var fb="MenuItem",QN="menu.itemSelect",Qb=M.forwardRef((n,t)=>{const{disabled:r=!1,onSelect:i,...o}=n,l=M.useRef(null),a=u0(fb,n.__scopeMenu),p=Nj(fb,n.__scopeMenu),g=Wn(t,l),w=M.useRef(!1),j=()=>{const S=l.current;if(!r&&S){const T=new CustomEvent(QN,{bubbles:!0,cancelable:!0});S.addEventListener(QN,E=>i==null?void 0:i(E),{once:!0}),S3(S,T),T.defaultPrevented?w.current=!1:a.onClose()}};return e.jsx(yC,{...o,ref:g,disabled:r,onClick:Dr(n.onClick,j),onPointerDown:S=>{var T;(T=n.onPointerDown)==null||T.call(n,S),w.current=!0},onPointerUp:Dr(n.onPointerUp,S=>{var T;w.current||(T=S.currentTarget)==null||T.click()}),onKeyDown:Dr(n.onKeyDown,S=>{const T=p.searchRef.current!=="";r||T&&S.key===" "||J2.includes(S.key)&&(S.currentTarget.click(),S.preventDefault())})})});Qb.displayName=fb;var yC=M.forwardRef((n,t)=>{const{__scopeMenu:r,disabled:i=!1,textValue:o,...l}=n,a=Nj(fb,r),p=hC(r),g=M.useRef(null),w=Wn(t,g),[j,S]=M.useState(!1),[T,E]=M.useState("");return M.useEffect(()=>{const O=g.current;O&&E((O.textContent??"").trim())},[l.children]),e.jsx(Ux.ItemSlot,{scope:r,disabled:i,textValue:o??T,children:e.jsx(rC,{asChild:!0,...p,focusable:!i,children:e.jsx(Cn.div,{role:"menuitem","data-highlighted":j?"":void 0,"aria-disabled":i||void 0,"data-disabled":i?"":void 0,...l,ref:w,onPointerMove:Dr(n.onPointerMove,qx(O=>{i?a.onItemLeave(O):(a.onItemEnter(O),O.defaultPrevented||O.currentTarget.focus({preventScroll:!0}))})),onPointerLeave:Dr(n.onPointerLeave,qx(O=>a.onItemLeave(O))),onFocus:Dr(n.onFocus,()=>S(!0)),onBlur:Dr(n.onBlur,()=>S(!1))})})})}),p9="MenuCheckboxItem",xC=M.forwardRef((n,t)=>{const{checked:r=!1,onCheckedChange:i,...o}=n;return e.jsx(NC,{scope:n.__scopeMenu,checked:r,children:e.jsx(Qb,{role:"menuitemcheckbox","aria-checked":pb(r)?"mixed":r,...o,ref:t,"data-state":kj(r),onSelect:Dr(o.onSelect,()=>i==null?void 0:i(pb(r)?!0:!r),{checkForDefaultPrevented:!1})})})});xC.displayName=p9;var bC="MenuRadioGroup",[m9,g9]=Ig(bC,{value:void 0,onValueChange:()=>{}}),_C=M.forwardRef((n,t)=>{const{value:r,onValueChange:i,...o}=n,l=ic(i);return e.jsx(m9,{scope:n.__scopeMenu,value:r,onValueChange:l,children:e.jsx(Aj,{...o,ref:t})})});_C.displayName=bC;var wC="MenuRadioItem",jC=M.forwardRef((n,t)=>{const{value:r,...i}=n,o=g9(wC,n.__scopeMenu),l=r===o.value;return e.jsx(NC,{scope:n.__scopeMenu,checked:l,children:e.jsx(Qb,{role:"menuitemradio","aria-checked":l,...i,ref:t,"data-state":kj(l),onSelect:Dr(i.onSelect,()=>{var a;return(a=o.onValueChange)==null?void 0:a.call(o,r)},{checkForDefaultPrevented:!1})})})});jC.displayName=wC;var Cj="MenuItemIndicator",[NC,v9]=Ig(Cj,{checked:!1}),SC=M.forwardRef((n,t)=>{const{__scopeMenu:r,forceMount:i,...o}=n,l=v9(Cj,r);return e.jsx(Jc,{present:i||pb(l.checked)||l.checked===!0,children:e.jsx(Cn.span,{...o,ref:t,"data-state":kj(l.checked)})})});SC.displayName=Cj;var y9="MenuSeparator",AC=M.forwardRef((n,t)=>{const{__scopeMenu:r,...i}=n;return e.jsx(Cn.div,{role:"separator","aria-orientation":"horizontal",...i,ref:t})});AC.displayName=y9;var x9="MenuArrow",CC=M.forwardRef((n,t)=>{const{__scopeMenu:r,...i}=n,o=Jb(r);return e.jsx(_j,{...o,...i,ref:t})});CC.displayName=x9;var b9="MenuSub",[aZ,kC]=Ig(b9),jx="MenuSubTrigger",EC=M.forwardRef((n,t)=>{const r=Lg(jx,n.__scopeMenu),i=u0(jx,n.__scopeMenu),o=kC(jx,n.__scopeMenu),l=Nj(jx,n.__scopeMenu),a=M.useRef(null),{pointerGraceTimerRef:p,onPointerGraceIntentChange:g}=l,w={__scopeMenu:n.__scopeMenu},j=M.useCallback(()=>{a.current&&window.clearTimeout(a.current),a.current=null},[]);return M.useEffect(()=>j,[j]),M.useEffect(()=>{const S=p.current;return()=>{window.clearTimeout(S),g(null)}},[p,g]),e.jsx(wj,{asChild:!0,...w,children:e.jsx(yC,{id:o.triggerId,"aria-haspopup":"menu","aria-expanded":r.open,"aria-controls":o.contentId,"data-state":RC(r.open),...n,ref:wf(t,o.onTriggerChange),onClick:S=>{var T;(T=n.onClick)==null||T.call(n,S),!(n.disabled||S.defaultPrevented)&&(S.currentTarget.focus(),r.open||r.onOpenChange(!0))},onPointerMove:Dr(n.onPointerMove,qx(S=>{l.onItemEnter(S),!S.defaultPrevented&&!n.disabled&&!r.open&&!a.current&&(l.onPointerGraceIntentChange(null),a.current=window.setTimeout(()=>{r.onOpenChange(!0),j()},100))})),onPointerLeave:Dr(n.onPointerLeave,qx(S=>{var E,O;j();const T=(E=r.content)==null?void 0:E.getBoundingClientRect();if(T){const R=(O=r.content)==null?void 0:O.dataset.side,F=R==="right",B=F?-5:5,G=T[F?"left":"right"],z=T[F?"right":"left"];l.onPointerGraceIntentChange({area:[{x:S.clientX+B,y:S.clientY},{x:G,y:T.top},{x:z,y:T.top},{x:z,y:T.bottom},{x:G,y:T.bottom}],side:R}),window.clearTimeout(p.current),p.current=window.setTimeout(()=>l.onPointerGraceIntentChange(null),300)}else{if(l.onTriggerLeave(S),S.defaultPrevented)return;l.onPointerGraceIntentChange(null)}})),onKeyDown:Dr(n.onKeyDown,S=>{var E;const T=l.searchRef.current!=="";n.disabled||T&&S.key===" "||e9[i.dir].includes(S.key)&&(r.onOpenChange(!0),(E=r.content)==null||E.focus(),S.preventDefault())})})})});EC.displayName=jx;var TC="MenuSubContent",PC=M.forwardRef((n,t)=>{const r=pC(Kd,n.__scopeMenu),{forceMount:i=r.forceMount,...o}=n,l=Lg(Kd,n.__scopeMenu),a=u0(Kd,n.__scopeMenu),p=kC(TC,n.__scopeMenu),g=M.useRef(null),w=Wn(t,g);return e.jsx(Ux.Provider,{scope:n.__scopeMenu,children:e.jsx(Jc,{present:i||l.open,children:e.jsx(Ux.Slot,{scope:n.__scopeMenu,children:e.jsx(Sj,{id:p.contentId,"aria-labelledby":p.triggerId,...o,ref:w,align:"start",side:a.dir==="rtl"?"left":"right",disableOutsidePointerEvents:!1,disableOutsideScroll:!1,trapFocus:!1,onOpenAutoFocus:j=>{var S;a.isUsingKeyboardRef.current&&((S=g.current)==null||S.focus()),j.preventDefault()},onCloseAutoFocus:j=>j.preventDefault(),onFocusOutside:Dr(n.onFocusOutside,j=>{j.target!==p.trigger&&l.onOpenChange(!1)}),onEscapeKeyDown:Dr(n.onEscapeKeyDown,j=>{a.onClose(),j.preventDefault()}),onKeyDown:Dr(n.onKeyDown,j=>{var E;const S=j.currentTarget.contains(j.target),T=t9[a.dir].includes(j.key);S&&T&&(l.onOpenChange(!1),(E=p.trigger)==null||E.focus(),j.preventDefault())})})})})})});PC.displayName=TC;function RC(n){return n?"open":"closed"}function pb(n){return n==="indeterminate"}function kj(n){return pb(n)?"indeterminate":n?"checked":"unchecked"}function _9(n){const t=document.activeElement;for(const r of n)if(r===t||(r.focus(),document.activeElement!==t))return}function w9(n,t){return n.map((r,i)=>n[(t+i)%n.length])}function j9(n,t,r){const o=t.length>1&&Array.from(t).every(w=>w===t[0])?t[0]:t,l=r?n.indexOf(r):-1;let a=w9(n,Math.max(l,0));o.length===1&&(a=a.filter(w=>w!==r));const g=a.find(w=>w.toLowerCase().startsWith(o.toLowerCase()));return g!==r?g:void 0}function N9(n,t){const{x:r,y:i}=n;let o=!1;for(let l=0,a=t.length-1;l<t.length;a=l++){const p=t[l],g=t[a],w=p.x,j=p.y,S=g.x,T=g.y;j>i!=T>i&&r<(S-w)*(i-j)/(T-j)+w&&(o=!o)}return o}function S9(n,t){if(!t)return!1;const r={x:n.clientX,y:n.clientY};return N9(r,t)}function qx(n){return t=>t.pointerType==="mouse"?n(t):void 0}var A9=fC,C9=wj,k9=mC,E9=gC,T9=Aj,P9=vC,R9=Qb,I9=xC,L9=_C,M9=jC,D9=SC,O9=AC,z9=CC,F9=EC,B9=PC,e_="DropdownMenu",[U9]=Du(e_,[dC]),_u=dC(),[q9,IC]=U9(e_),LC=n=>{const{__scopeDropdownMenu:t,children:r,dir:i,open:o,defaultOpen:l,onOpenChange:a,modal:p=!0}=n,g=_u(t),w=M.useRef(null),[j,S]=bf({prop:o,defaultProp:l??!1,onChange:a,caller:e_});return e.jsx(q9,{scope:t,triggerId:Dh(),triggerRef:w,contentId:Dh(),open:j,onOpenChange:S,onOpenToggle:M.useCallback(()=>S(T=>!T),[S]),modal:p,children:e.jsx(A9,{...g,open:j,onOpenChange:S,dir:i,modal:p,children:r})})};LC.displayName=e_;var MC="DropdownMenuTrigger",DC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,disabled:i=!1,...o}=n,l=IC(MC,r),a=_u(r);return e.jsx(C9,{asChild:!0,...a,children:e.jsx(Cn.button,{type:"button",id:l.triggerId,"aria-haspopup":"menu","aria-expanded":l.open,"aria-controls":l.open?l.contentId:void 0,"data-state":l.open?"open":"closed","data-disabled":i?"":void 0,disabled:i,...o,ref:wf(t,l.triggerRef),onPointerDown:Dr(n.onPointerDown,p=>{!i&&p.button===0&&p.ctrlKey===!1&&(l.onOpenToggle(),l.open||p.preventDefault())}),onKeyDown:Dr(n.onKeyDown,p=>{i||(["Enter"," "].includes(p.key)&&l.onOpenToggle(),p.key==="ArrowDown"&&l.onOpenChange(!0),["Enter"," ","ArrowDown"].includes(p.key)&&p.preventDefault())})})})});DC.displayName=MC;var V9="DropdownMenuPortal",OC=n=>{const{__scopeDropdownMenu:t,...r}=n,i=_u(t);return e.jsx(k9,{...i,...r})};OC.displayName=V9;var zC="DropdownMenuContent",FC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=IC(zC,r),l=_u(r),a=M.useRef(!1);return e.jsx(E9,{id:o.contentId,"aria-labelledby":o.triggerId,...l,...i,ref:t,onCloseAutoFocus:Dr(n.onCloseAutoFocus,p=>{var g;a.current||(g=o.triggerRef.current)==null||g.focus(),a.current=!1,p.preventDefault()}),onInteractOutside:Dr(n.onInteractOutside,p=>{const g=p.detail.originalEvent,w=g.button===0&&g.ctrlKey===!0,j=g.button===2||w;(!o.modal||j)&&(a.current=!0)}),style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});FC.displayName=zC;var $9="DropdownMenuGroup",H9=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(T9,{...o,...i,ref:t})});H9.displayName=$9;var G9="DropdownMenuLabel",BC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(P9,{...o,...i,ref:t})});BC.displayName=G9;var W9="DropdownMenuItem",UC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(R9,{...o,...i,ref:t})});UC.displayName=W9;var Y9="DropdownMenuCheckboxItem",qC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(I9,{...o,...i,ref:t})});qC.displayName=Y9;var Z9="DropdownMenuRadioGroup",K9=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(L9,{...o,...i,ref:t})});K9.displayName=Z9;var X9="DropdownMenuRadioItem",VC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(M9,{...o,...i,ref:t})});VC.displayName=X9;var J9="DropdownMenuItemIndicator",$C=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(D9,{...o,...i,ref:t})});$C.displayName=J9;var Q9="DropdownMenuSeparator",HC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(O9,{...o,...i,ref:t})});HC.displayName=Q9;var eU="DropdownMenuArrow",tU=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(z9,{...o,...i,ref:t})});tU.displayName=eU;var rU="DropdownMenuSubTrigger",GC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(F9,{...o,...i,ref:t})});GC.displayName=rU;var nU="DropdownMenuSubContent",WC=M.forwardRef((n,t)=>{const{__scopeDropdownMenu:r,...i}=n,o=_u(r);return e.jsx(B9,{...o,...i,ref:t,style:{...n.style,"--radix-dropdown-menu-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-dropdown-menu-content-available-width":"var(--radix-popper-available-width)","--radix-dropdown-menu-content-available-height":"var(--radix-popper-available-height)","--radix-dropdown-menu-trigger-width":"var(--radix-popper-anchor-width)","--radix-dropdown-menu-trigger-height":"var(--radix-popper-anchor-height)"}})});WC.displayName=nU;var iU=LC,sU=DC,aU=OC,YC=FC,ZC=BC,KC=UC,XC=qC,JC=VC,QC=$C,ek=HC,tk=GC,rk=WC;const Q2=iU,ew=sU,oU=M.forwardRef(({className:n,inset:t,children:r,...i},o)=>e.jsxs(tk,{ref:o,className:er("flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",t&&"pl-8",n),...i,children:[r,e.jsx(ej,{className:"ml-auto"})]}));oU.displayName=tk.displayName;const lU=M.forwardRef(({className:n,...t},r)=>e.jsx(rk,{ref:r,className:er("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...t}));lU.displayName=rk.displayName;const mb=M.forwardRef(({className:n,sideOffset:t=4,...r},i)=>e.jsx(aU,{children:e.jsx(YC,{ref:i,sideOffset:t,className:er("z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md","data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...r})}));mb.displayName=YC.displayName;const Wd=M.forwardRef(({className:n,inset:t,...r},i)=>e.jsx(KC,{ref:i,className:er("relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&>svg]:size-4 [&>svg]:shrink-0",t&&"pl-8",n),...r}));Wd.displayName=KC.displayName;const cU=M.forwardRef(({className:n,children:t,checked:r,...i},o)=>e.jsxs(XC,{ref:o,className:er("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),checked:r,...i,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(QC,{children:e.jsx(Rm,{className:"h-4 w-4"})})}),t]}));cU.displayName=XC.displayName;const uU=M.forwardRef(({className:n,children:t,...r},i)=>e.jsxs(JC,{ref:i,className:er("relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...r,children:[e.jsx("span",{className:"absolute left-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(QC,{children:e.jsx(ZA,{className:"h-2 w-2 fill-current"})})}),t]}));uU.displayName=JC.displayName;const dU=M.forwardRef(({className:n,inset:t,...r},i)=>e.jsx(ZC,{ref:i,className:er("px-2 py-1.5 text-sm font-semibold",t&&"pl-8",n),...r}));dU.displayName=ZC.displayName;const tw=M.forwardRef(({className:n,...t},r)=>e.jsx(ek,{ref:r,className:er("-mx-1 my-1 h-px bg-muted",n),...t}));tw.displayName=ek.displayName;function hU(n){const t=fU(n),r=M.forwardRef((i,o)=>{const{children:l,...a}=i,p=M.Children.toArray(l),g=p.find(mU);if(g){const w=g.props.children,j=p.map(S=>S===g?M.Children.count(w)>1?M.Children.only(null):M.isValidElement(w)?w.props.children:null:S);return e.jsx(t,{...a,ref:o,children:M.isValidElement(w)?M.cloneElement(w,void 0,j):null})}return e.jsx(t,{...a,ref:o,children:l})});return r.displayName=`${n}.Slot`,r}function fU(n){const t=M.forwardRef((r,i)=>{const{children:o,...l}=r;if(M.isValidElement(o)){const a=vU(o),p=gU(l,o.props);return o.type!==M.Fragment&&(p.ref=i?wf(i,a):a),M.cloneElement(o,p)}return M.Children.count(o)>1?M.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var pU=Symbol("radix.slottable");function mU(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===pU}function gU(n,t){const r={...t};for(const i in t){const o=n[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...p)=>{const g=l(...p);return o(...p),g}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...n,...r}}function vU(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}var t_="Dialog",[nk,ik]=Du(t_),[yU,Uh]=nk(t_),sk=n=>{const{__scopeDialog:t,children:r,open:i,defaultOpen:o,onOpenChange:l,modal:a=!0}=n,p=M.useRef(null),g=M.useRef(null),[w,j]=bf({prop:i,defaultProp:o??!1,onChange:l,caller:t_});return e.jsx(yU,{scope:t,triggerRef:p,contentRef:g,contentId:Dh(),titleId:Dh(),descriptionId:Dh(),open:w,onOpenChange:j,onOpenToggle:M.useCallback(()=>j(S=>!S),[j]),modal:a,children:r})};sk.displayName=t_;var ak="DialogTrigger",ok=M.forwardRef((n,t)=>{const{__scopeDialog:r,...i}=n,o=Uh(ak,r),l=Wn(t,o.triggerRef);return e.jsx(Cn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":Pj(o.open),...i,ref:l,onClick:Dr(n.onClick,o.onOpenToggle)})});ok.displayName=ak;var Ej="DialogPortal",[xU,lk]=nk(Ej,{forceMount:void 0}),ck=n=>{const{__scopeDialog:t,forceMount:r,children:i,container:o}=n,l=Uh(Ej,t);return e.jsx(xU,{scope:t,forceMount:r,children:M.Children.map(i,a=>e.jsx(Jc,{present:r||l.open,children:e.jsx(a0,{asChild:!0,container:o,children:a})}))})};ck.displayName=Ej;var gb="DialogOverlay",uk=M.forwardRef((n,t)=>{const r=lk(gb,n.__scopeDialog),{forceMount:i=r.forceMount,...o}=n,l=Uh(gb,n.__scopeDialog);return l.modal?e.jsx(Jc,{present:i||l.open,children:e.jsx(_U,{...o,ref:t})}):null});uk.displayName=gb;var bU=hU("DialogOverlay.RemoveScroll"),_U=M.forwardRef((n,t)=>{const{__scopeDialog:r,...i}=n,o=Uh(gb,r);return e.jsx(l0,{as:bU,allowPinchZoom:!0,shards:[o.contentRef],children:e.jsx(Cn.div,{"data-state":Pj(o.open),...i,ref:t,style:{pointerEvents:"auto",...i.style}})})}),Cg="DialogContent",dk=M.forwardRef((n,t)=>{const r=lk(Cg,n.__scopeDialog),{forceMount:i=r.forceMount,...o}=n,l=Uh(Cg,n.__scopeDialog);return e.jsx(Jc,{present:i||l.open,children:l.modal?e.jsx(wU,{...o,ref:t}):e.jsx(jU,{...o,ref:t})})});dk.displayName=Cg;var wU=M.forwardRef((n,t)=>{const r=Uh(Cg,n.__scopeDialog),i=M.useRef(null),o=Wn(t,r.contentRef,i);return M.useEffect(()=>{const l=i.current;if(l)return Kb(l)},[]),e.jsx(hk,{...n,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dr(n.onCloseAutoFocus,l=>{var a;l.preventDefault(),(a=r.triggerRef.current)==null||a.focus()}),onPointerDownOutside:Dr(n.onPointerDownOutside,l=>{const a=l.detail.originalEvent,p=a.button===0&&a.ctrlKey===!0;(a.button===2||p)&&l.preventDefault()}),onFocusOutside:Dr(n.onFocusOutside,l=>l.preventDefault())})}),jU=M.forwardRef((n,t)=>{const r=Uh(Cg,n.__scopeDialog),i=M.useRef(!1),o=M.useRef(!1);return e.jsx(hk,{...n,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var a,p;(a=n.onCloseAutoFocus)==null||a.call(n,l),l.defaultPrevented||(i.current||(p=r.triggerRef.current)==null||p.focus(),l.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:l=>{var g,w;(g=n.onInteractOutside)==null||g.call(n,l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=l.target;((w=r.triggerRef.current)==null?void 0:w.contains(a))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),hk=M.forwardRef((n,t)=>{const{__scopeDialog:r,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,...a}=n,p=Uh(Cg,r),g=M.useRef(null),w=Wn(t,g);return qb(),e.jsxs(e.Fragment,{children:[e.jsx(i0,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:l,children:e.jsx(n0,{role:"dialog",id:p.contentId,"aria-describedby":p.descriptionId,"aria-labelledby":p.titleId,"data-state":Pj(p.open),...a,ref:w,onDismiss:()=>p.onOpenChange(!1)})}),e.jsxs(e.Fragment,{children:[e.jsx(SU,{titleId:p.titleId}),e.jsx(CU,{contentRef:g,descriptionId:p.descriptionId})]})]})}),Tj="DialogTitle",fk=M.forwardRef((n,t)=>{const{__scopeDialog:r,...i}=n,o=Uh(Tj,r);return e.jsx(Cn.h2,{id:o.titleId,...i,ref:t})});fk.displayName=Tj;var pk="DialogDescription",mk=M.forwardRef((n,t)=>{const{__scopeDialog:r,...i}=n,o=Uh(pk,r);return e.jsx(Cn.p,{id:o.descriptionId,...i,ref:t})});mk.displayName=pk;var gk="DialogClose",vk=M.forwardRef((n,t)=>{const{__scopeDialog:r,...i}=n,o=Uh(gk,r);return e.jsx(Cn.button,{type:"button",...i,ref:t,onClick:Dr(n.onClick,()=>o.onOpenChange(!1))})});vk.displayName=gk;function Pj(n){return n?"open":"closed"}var yk="DialogTitleWarning",[NU,xk]=Zz(yk,{contentName:Cg,titleName:Tj,docsSlug:"dialog"}),SU=({titleId:n})=>{const t=xk(yk),r=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return M.useEffect(()=>{n&&(document.getElementById(n)||console.error(r))},[r,n]),null},AU="DialogDescriptionWarning",CU=({contentRef:n,descriptionId:t})=>{const i=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${xk(AU).contentName}}.`;return M.useEffect(()=>{var l;const o=(l=n.current)==null?void 0:l.getAttribute("aria-describedby");t&&o&&(document.getElementById(t)||console.warn(i))},[i,n,t]),null},Rj=sk,Ij=ok,Lj=ck,d0=uk,h0=dk,f0=fk,p0=mk,r_=vk;const kU=Rj,EU=Ij,TU=Lj,bk=M.forwardRef(({className:n,...t},r)=>e.jsx(d0,{className:er("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...t,ref:r}));bk.displayName=d0.displayName;const PU=r0("fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=closed]:duration-300 data-[state=open]:duration-500 data-[state=open]:animate-in data-[state=closed]:animate-out",{variants:{side:{top:"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top",bottom:"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom",left:"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm",right:"inset-y-0 right-0 h-full w-3/4 border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm"}},defaultVariants:{side:"right"}}),_k=M.forwardRef(({side:n="right",className:t,children:r,...i},o)=>e.jsxs(TU,{children:[e.jsx(bk,{}),e.jsxs(h0,{ref:o,className:er(PU({side:n}),t),...i,children:[e.jsxs(r_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary",children:[e.jsx(Gc,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]}),r]})]}));_k.displayName=h0.displayName;const RU=M.forwardRef(({className:n,...t},r)=>e.jsx(f0,{ref:r,className:er("text-lg font-semibold text-foreground",n),...t}));RU.displayName=f0.displayName;const IU=M.forwardRef(({className:n,...t},r)=>e.jsx(p0,{ref:r,className:er("text-sm text-muted-foreground",n),...t}));IU.displayName=p0.displayName;function LU({onAIChatOpen:n,className:t}){const r=xd(),i=[{name:"Home",href:"/",icon:nj,isActive:r.pathname==="/"},{name:"Search",href:"/businesses",icon:md,isActive:r.pathname.startsWith("/businesses")||r.pathname.startsWith("/franchises")},{name:"Saved",href:"/saved",icon:Rg,isActive:r.pathname==="/saved",badge:5},{name:"AI Chat",href:"#",icon:e0,isActive:!1,isAIChat:!0},{name:"Profile",href:"/profile",icon:vp,isActive:r.pathname==="/profile"}],o=l=>{l.isAIChat&&n&&n()};return e.jsxs("div",{className:`md:hidden ${t}`,children:[e.jsx("div",{className:"fixed bottom-0 left-0 right-0 z-50 bg-background/95 backdrop-blur-sm border-t border-border",children:e.jsx("div",{className:"flex items-center justify-around py-2 px-4",children:i.map(l=>{const a=l.icon;return l.isAIChat?e.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>o(l),className:"flex flex-col items-center gap-1 h-auto py-2 px-3 relative",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"p-1.5 bg-primary rounded-full",children:e.jsx(a,{className:"h-4 w-4 text-white"})}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]}),e.jsx("span",{className:"text-xs font-medium text-primary",children:l.name})]},l.name):e.jsxs(Kr,{to:l.href,className:`flex flex-col items-center gap-1 py-2 px-3 rounded-lg transition-colors relative ${l.isActive?"text-primary bg-primary/10":"text-muted-foreground hover:text-foreground"}`,children:[e.jsxs("div",{className:"relative",children:[e.jsx(a,{className:`h-5 w-5 ${l.isActive?"text-primary":""}`}),l.badge&&e.jsx(Gt,{className:"absolute -top-2 -right-2 h-4 w-4 flex items-center justify-center p-0 text-xs",children:l.badge})]}),e.jsx("span",{className:"text-xs font-medium",children:l.name})]},l.name)})})}),e.jsx("div",{className:"h-20"})]})}const Wt=M.forwardRef(({className:n,type:t,...r},i)=>e.jsx("input",{type:t,className:er("flex h-9 w-full rounded-md border border-input bg-transparent px-3 py-1 text-base shadow-sm transition-colors file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:i,...r}));Wt.displayName="Input";const ot=M.forwardRef(({className:n,...t},r)=>e.jsx("div",{ref:r,className:er("rounded-xl border bg-card text-card-foreground shadow",n),...t}));ot.displayName="Card";const Vt=M.forwardRef(({className:n,...t},r)=>e.jsx("div",{ref:r,className:er("flex flex-col space-y-1.5 p-6",n),...t}));Vt.displayName="CardHeader";const Ht=M.forwardRef(({className:n,...t},r)=>e.jsx("div",{ref:r,className:er("font-semibold leading-none tracking-tight",n),...t}));Ht.displayName="CardTitle";const Ji=M.forwardRef(({className:n,...t},r)=>e.jsx("div",{ref:r,className:er("text-sm text-muted-foreground",n),...t}));Ji.displayName="CardDescription";const ut=M.forwardRef(({className:n,...t},r)=>e.jsx("div",{ref:r,className:er("p-6 pt-0",n),...t}));ut.displayName="CardContent";const Mj=M.forwardRef(({className:n,...t},r)=>e.jsx("div",{ref:r,className:er("flex items-center p-6 pt-0",n),...t}));Mj.displayName="CardFooter";function Vx(n,[t,r]){return Math.min(r,Math.max(t,n))}function MU(n,t){return M.useReducer((r,i)=>t[r][i]??r,n)}var Dj="ScrollArea",[wk]=Du(Dj),[DU,Qd]=wk(Dj),jk=M.forwardRef((n,t)=>{const{__scopeScrollArea:r,type:i="hover",dir:o,scrollHideDelay:l=600,...a}=n,[p,g]=M.useState(null),[w,j]=M.useState(null),[S,T]=M.useState(null),[E,O]=M.useState(null),[R,F]=M.useState(null),[B,G]=M.useState(0),[z,ee]=M.useState(0),[ie,ge]=M.useState(!1),[K,J]=M.useState(!1),Se=Wn(t,re=>g(re)),_e=_y(o);return e.jsx(DU,{scope:r,type:i,dir:_e,scrollHideDelay:l,scrollArea:p,viewport:w,onViewportChange:j,content:S,onContentChange:T,scrollbarX:E,onScrollbarXChange:O,scrollbarXEnabled:ie,onScrollbarXEnabledChange:ge,scrollbarY:R,onScrollbarYChange:F,scrollbarYEnabled:K,onScrollbarYEnabledChange:J,onCornerWidthChange:G,onCornerHeightChange:ee,children:e.jsx(Cn.div,{dir:_e,...a,ref:Se,style:{position:"relative","--radix-scroll-area-corner-width":B+"px","--radix-scroll-area-corner-height":z+"px",...n.style}})})});jk.displayName=Dj;var Nk="ScrollAreaViewport",Sk=M.forwardRef((n,t)=>{const{__scopeScrollArea:r,children:i,nonce:o,...l}=n,a=Qd(Nk,r),p=M.useRef(null),g=Wn(t,p,a.onViewportChange);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-scroll-area-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-scroll-area-viewport]::-webkit-scrollbar{display:none}"},nonce:o}),e.jsx(Cn.div,{"data-radix-scroll-area-viewport":"",...l,ref:g,style:{overflowX:a.scrollbarXEnabled?"scroll":"hidden",overflowY:a.scrollbarYEnabled?"scroll":"hidden",...n.style},children:e.jsx("div",{ref:a.onContentChange,style:{minWidth:"100%",display:"table"},children:i})})]})});Sk.displayName=Nk;var Nf="ScrollAreaScrollbar",Oj=M.forwardRef((n,t)=>{const{forceMount:r,...i}=n,o=Qd(Nf,n.__scopeScrollArea),{onScrollbarXEnabledChange:l,onScrollbarYEnabledChange:a}=o,p=n.orientation==="horizontal";return M.useEffect(()=>(p?l(!0):a(!0),()=>{p?l(!1):a(!1)}),[p,l,a]),o.type==="hover"?e.jsx(OU,{...i,ref:t,forceMount:r}):o.type==="scroll"?e.jsx(zU,{...i,ref:t,forceMount:r}):o.type==="auto"?e.jsx(Ak,{...i,ref:t,forceMount:r}):o.type==="always"?e.jsx(zj,{...i,ref:t}):null});Oj.displayName=Nf;var OU=M.forwardRef((n,t)=>{const{forceMount:r,...i}=n,o=Qd(Nf,n.__scopeScrollArea),[l,a]=M.useState(!1);return M.useEffect(()=>{const p=o.scrollArea;let g=0;if(p){const w=()=>{window.clearTimeout(g),a(!0)},j=()=>{g=window.setTimeout(()=>a(!1),o.scrollHideDelay)};return p.addEventListener("pointerenter",w),p.addEventListener("pointerleave",j),()=>{window.clearTimeout(g),p.removeEventListener("pointerenter",w),p.removeEventListener("pointerleave",j)}}},[o.scrollArea,o.scrollHideDelay]),e.jsx(Jc,{present:r||l,children:e.jsx(Ak,{"data-state":l?"visible":"hidden",...i,ref:t})})}),zU=M.forwardRef((n,t)=>{const{forceMount:r,...i}=n,o=Qd(Nf,n.__scopeScrollArea),l=n.orientation==="horizontal",a=i_(()=>g("SCROLL_END"),100),[p,g]=MU("hidden",{hidden:{SCROLL:"scrolling"},scrolling:{SCROLL_END:"idle",POINTER_ENTER:"interacting"},interacting:{SCROLL:"interacting",POINTER_LEAVE:"idle"},idle:{HIDE:"hidden",SCROLL:"scrolling",POINTER_ENTER:"interacting"}});return M.useEffect(()=>{if(p==="idle"){const w=window.setTimeout(()=>g("HIDE"),o.scrollHideDelay);return()=>window.clearTimeout(w)}},[p,o.scrollHideDelay,g]),M.useEffect(()=>{const w=o.viewport,j=l?"scrollLeft":"scrollTop";if(w){let S=w[j];const T=()=>{const E=w[j];S!==E&&(g("SCROLL"),a()),S=E};return w.addEventListener("scroll",T),()=>w.removeEventListener("scroll",T)}},[o.viewport,l,g,a]),e.jsx(Jc,{present:r||p!=="hidden",children:e.jsx(zj,{"data-state":p==="hidden"?"hidden":"visible",...i,ref:t,onPointerEnter:Dr(n.onPointerEnter,()=>g("POINTER_ENTER")),onPointerLeave:Dr(n.onPointerLeave,()=>g("POINTER_LEAVE"))})})}),Ak=M.forwardRef((n,t)=>{const r=Qd(Nf,n.__scopeScrollArea),{forceMount:i,...o}=n,[l,a]=M.useState(!1),p=n.orientation==="horizontal",g=i_(()=>{if(r.viewport){const w=r.viewport.offsetWidth<r.viewport.scrollWidth,j=r.viewport.offsetHeight<r.viewport.scrollHeight;a(p?w:j)}},10);return iy(r.viewport,g),iy(r.content,g),e.jsx(Jc,{present:i||l,children:e.jsx(zj,{"data-state":l?"visible":"hidden",...o,ref:t})})}),zj=M.forwardRef((n,t)=>{const{orientation:r="vertical",...i}=n,o=Qd(Nf,n.__scopeScrollArea),l=M.useRef(null),a=M.useRef(0),[p,g]=M.useState({content:0,viewport:0,scrollbar:{size:0,paddingStart:0,paddingEnd:0}}),w=Pk(p.viewport,p.content),j={...i,sizes:p,onSizesChange:g,hasThumb:w>0&&w<1,onThumbChange:T=>l.current=T,onThumbPointerUp:()=>a.current=0,onThumbPointerDown:T=>a.current=T};function S(T,E){return $U(T,a.current,p,E)}return r==="horizontal"?e.jsx(FU,{...j,ref:t,onThumbPositionChange:()=>{if(o.viewport&&l.current){const T=o.viewport.scrollLeft,E=eS(T,p,o.dir);l.current.style.transform=`translate3d(${E}px, 0, 0)`}},onWheelScroll:T=>{o.viewport&&(o.viewport.scrollLeft=T)},onDragScroll:T=>{o.viewport&&(o.viewport.scrollLeft=S(T,o.dir))}}):r==="vertical"?e.jsx(BU,{...j,ref:t,onThumbPositionChange:()=>{if(o.viewport&&l.current){const T=o.viewport.scrollTop,E=eS(T,p);l.current.style.transform=`translate3d(0, ${E}px, 0)`}},onWheelScroll:T=>{o.viewport&&(o.viewport.scrollTop=T)},onDragScroll:T=>{o.viewport&&(o.viewport.scrollTop=S(T))}}):null}),FU=M.forwardRef((n,t)=>{const{sizes:r,onSizesChange:i,...o}=n,l=Qd(Nf,n.__scopeScrollArea),[a,p]=M.useState(),g=M.useRef(null),w=Wn(t,g,l.onScrollbarXChange);return M.useEffect(()=>{g.current&&p(getComputedStyle(g.current))},[g]),e.jsx(kk,{"data-orientation":"horizontal",...o,ref:w,sizes:r,style:{bottom:0,left:l.dir==="rtl"?"var(--radix-scroll-area-corner-width)":0,right:l.dir==="ltr"?"var(--radix-scroll-area-corner-width)":0,"--radix-scroll-area-thumb-width":n_(r)+"px",...n.style},onThumbPointerDown:j=>n.onThumbPointerDown(j.x),onDragScroll:j=>n.onDragScroll(j.x),onWheelScroll:(j,S)=>{if(l.viewport){const T=l.viewport.scrollLeft+j.deltaX;n.onWheelScroll(T),Ik(T,S)&&j.preventDefault()}},onResize:()=>{g.current&&l.viewport&&a&&i({content:l.viewport.scrollWidth,viewport:l.viewport.offsetWidth,scrollbar:{size:g.current.clientWidth,paddingStart:yb(a.paddingLeft),paddingEnd:yb(a.paddingRight)}})}})}),BU=M.forwardRef((n,t)=>{const{sizes:r,onSizesChange:i,...o}=n,l=Qd(Nf,n.__scopeScrollArea),[a,p]=M.useState(),g=M.useRef(null),w=Wn(t,g,l.onScrollbarYChange);return M.useEffect(()=>{g.current&&p(getComputedStyle(g.current))},[g]),e.jsx(kk,{"data-orientation":"vertical",...o,ref:w,sizes:r,style:{top:0,right:l.dir==="ltr"?0:void 0,left:l.dir==="rtl"?0:void 0,bottom:"var(--radix-scroll-area-corner-height)","--radix-scroll-area-thumb-height":n_(r)+"px",...n.style},onThumbPointerDown:j=>n.onThumbPointerDown(j.y),onDragScroll:j=>n.onDragScroll(j.y),onWheelScroll:(j,S)=>{if(l.viewport){const T=l.viewport.scrollTop+j.deltaY;n.onWheelScroll(T),Ik(T,S)&&j.preventDefault()}},onResize:()=>{g.current&&l.viewport&&a&&i({content:l.viewport.scrollHeight,viewport:l.viewport.offsetHeight,scrollbar:{size:g.current.clientHeight,paddingStart:yb(a.paddingTop),paddingEnd:yb(a.paddingBottom)}})}})}),[UU,Ck]=wk(Nf),kk=M.forwardRef((n,t)=>{const{__scopeScrollArea:r,sizes:i,hasThumb:o,onThumbChange:l,onThumbPointerUp:a,onThumbPointerDown:p,onThumbPositionChange:g,onDragScroll:w,onWheelScroll:j,onResize:S,...T}=n,E=Qd(Nf,r),[O,R]=M.useState(null),F=Wn(t,Se=>R(Se)),B=M.useRef(null),G=M.useRef(""),z=E.viewport,ee=i.content-i.viewport,ie=ic(j),ge=ic(g),K=i_(S,10);function J(Se){if(B.current){const _e=Se.clientX-B.current.left,re=Se.clientY-B.current.top;w({x:_e,y:re})}}return M.useEffect(()=>{const Se=_e=>{const re=_e.target;(O==null?void 0:O.contains(re))&&ie(_e,ee)};return document.addEventListener("wheel",Se,{passive:!1}),()=>document.removeEventListener("wheel",Se,{passive:!1})},[z,O,ee,ie]),M.useEffect(ge,[i,ge]),iy(O,K),iy(E.content,K),e.jsx(UU,{scope:r,scrollbar:O,hasThumb:o,onThumbChange:ic(l),onThumbPointerUp:ic(a),onThumbPositionChange:ge,onThumbPointerDown:ic(p),children:e.jsx(Cn.div,{...T,ref:F,style:{position:"absolute",...T.style},onPointerDown:Dr(n.onPointerDown,Se=>{Se.button===0&&(Se.target.setPointerCapture(Se.pointerId),B.current=O.getBoundingClientRect(),G.current=document.body.style.webkitUserSelect,document.body.style.webkitUserSelect="none",E.viewport&&(E.viewport.style.scrollBehavior="auto"),J(Se))}),onPointerMove:Dr(n.onPointerMove,J),onPointerUp:Dr(n.onPointerUp,Se=>{const _e=Se.target;_e.hasPointerCapture(Se.pointerId)&&_e.releasePointerCapture(Se.pointerId),document.body.style.webkitUserSelect=G.current,E.viewport&&(E.viewport.style.scrollBehavior=""),B.current=null})})})}),vb="ScrollAreaThumb",Ek=M.forwardRef((n,t)=>{const{forceMount:r,...i}=n,o=Ck(vb,n.__scopeScrollArea);return e.jsx(Jc,{present:r||o.hasThumb,children:e.jsx(qU,{ref:t,...i})})}),qU=M.forwardRef((n,t)=>{const{__scopeScrollArea:r,style:i,...o}=n,l=Qd(vb,r),a=Ck(vb,r),{onThumbPositionChange:p}=a,g=Wn(t,S=>a.onThumbChange(S)),w=M.useRef(void 0),j=i_(()=>{w.current&&(w.current(),w.current=void 0)},100);return M.useEffect(()=>{const S=l.viewport;if(S){const T=()=>{if(j(),!w.current){const E=HU(S,p);w.current=E,p()}};return p(),S.addEventListener("scroll",T),()=>S.removeEventListener("scroll",T)}},[l.viewport,j,p]),e.jsx(Cn.div,{"data-state":a.hasThumb?"visible":"hidden",...o,ref:g,style:{width:"var(--radix-scroll-area-thumb-width)",height:"var(--radix-scroll-area-thumb-height)",...i},onPointerDownCapture:Dr(n.onPointerDownCapture,S=>{const E=S.target.getBoundingClientRect(),O=S.clientX-E.left,R=S.clientY-E.top;a.onThumbPointerDown({x:O,y:R})}),onPointerUp:Dr(n.onPointerUp,a.onThumbPointerUp)})});Ek.displayName=vb;var Fj="ScrollAreaCorner",Tk=M.forwardRef((n,t)=>{const r=Qd(Fj,n.__scopeScrollArea),i=!!(r.scrollbarX&&r.scrollbarY);return r.type!=="scroll"&&i?e.jsx(VU,{...n,ref:t}):null});Tk.displayName=Fj;var VU=M.forwardRef((n,t)=>{const{__scopeScrollArea:r,...i}=n,o=Qd(Fj,r),[l,a]=M.useState(0),[p,g]=M.useState(0),w=!!(l&&p);return iy(o.scrollbarX,()=>{var S;const j=((S=o.scrollbarX)==null?void 0:S.offsetHeight)||0;o.onCornerHeightChange(j),g(j)}),iy(o.scrollbarY,()=>{var S;const j=((S=o.scrollbarY)==null?void 0:S.offsetWidth)||0;o.onCornerWidthChange(j),a(j)}),w?e.jsx(Cn.div,{...i,ref:t,style:{width:l,height:p,position:"absolute",right:o.dir==="ltr"?0:void 0,left:o.dir==="rtl"?0:void 0,bottom:0,...n.style}}):null});function yb(n){return n?parseInt(n,10):0}function Pk(n,t){const r=n/t;return isNaN(r)?0:r}function n_(n){const t=Pk(n.viewport,n.content),r=n.scrollbar.paddingStart+n.scrollbar.paddingEnd,i=(n.scrollbar.size-r)*t;return Math.max(i,18)}function $U(n,t,r,i="ltr"){const o=n_(r),l=o/2,a=t||l,p=o-a,g=r.scrollbar.paddingStart+a,w=r.scrollbar.size-r.scrollbar.paddingEnd-p,j=r.content-r.viewport,S=i==="ltr"?[0,j]:[j*-1,0];return Rk([g,w],S)(n)}function eS(n,t,r="ltr"){const i=n_(t),o=t.scrollbar.paddingStart+t.scrollbar.paddingEnd,l=t.scrollbar.size-o,a=t.content-t.viewport,p=l-i,g=r==="ltr"?[0,a]:[a*-1,0],w=Vx(n,g);return Rk([0,a],[0,p])(w)}function Rk(n,t){return r=>{if(n[0]===n[1]||t[0]===t[1])return t[0];const i=(t[1]-t[0])/(n[1]-n[0]);return t[0]+i*(r-n[0])}}function Ik(n,t){return n>0&&n<t}var HU=(n,t=()=>{})=>{let r={left:n.scrollLeft,top:n.scrollTop},i=0;return(function o(){const l={left:n.scrollLeft,top:n.scrollTop},a=r.left!==l.left,p=r.top!==l.top;(a||p)&&t(),r=l,i=window.requestAnimationFrame(o)})(),()=>window.cancelAnimationFrame(i)};function i_(n,t){const r=ic(n),i=M.useRef(0);return M.useEffect(()=>()=>window.clearTimeout(i.current),[]),M.useCallback(()=>{window.clearTimeout(i.current),i.current=window.setTimeout(r,t)},[r,t])}function iy(n,t){const r=ic(t);xl(()=>{let i=0;if(n){const o=new ResizeObserver(()=>{cancelAnimationFrame(i),i=window.requestAnimationFrame(r)});return o.observe(n),()=>{window.cancelAnimationFrame(i),o.unobserve(n)}}},[n,r])}var Lk=jk,GU=Sk,WU=Tk;const Mk=M.forwardRef(({className:n,children:t,...r},i)=>e.jsxs(Lk,{ref:i,className:er("relative overflow-hidden",n),...r,children:[e.jsx(GU,{className:"h-full w-full rounded-[inherit]",children:t}),e.jsx(Dk,{}),e.jsx(WU,{})]}));Mk.displayName=Lk.displayName;const Dk=M.forwardRef(({className:n,orientation:t="vertical",...r},i)=>e.jsx(Oj,{ref:i,orientation:t,className:er("flex touch-none select-none transition-colors",t==="vertical"&&"h-full w-2.5 border-l border-l-transparent p-[1px]",t==="horizontal"&&"h-2.5 flex-col border-t border-t-transparent p-[1px]",n),...r,children:e.jsx(Ek,{className:"relative flex-1 rounded-full bg-border"})}));Dk.displayName=Oj.displayName;var tS;(function(n){n.STRING="string",n.NUMBER="number",n.INTEGER="integer",n.BOOLEAN="boolean",n.ARRAY="array",n.OBJECT="object"})(tS||(tS={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var rS;(function(n){n.LANGUAGE_UNSPECIFIED="language_unspecified",n.PYTHON="python"})(rS||(rS={}));var nS;(function(n){n.OUTCOME_UNSPECIFIED="outcome_unspecified",n.OUTCOME_OK="outcome_ok",n.OUTCOME_FAILED="outcome_failed",n.OUTCOME_DEADLINE_EXCEEDED="outcome_deadline_exceeded"})(nS||(nS={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iS=["user","model","function","system"];var sS;(function(n){n.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",n.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",n.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",n.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",n.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",n.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY"})(sS||(sS={}));var aS;(function(n){n.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",n.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",n.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",n.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",n.BLOCK_NONE="BLOCK_NONE"})(aS||(aS={}));var oS;(function(n){n.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",n.NEGLIGIBLE="NEGLIGIBLE",n.LOW="LOW",n.MEDIUM="MEDIUM",n.HIGH="HIGH"})(oS||(oS={}));var lS;(function(n){n.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",n.SAFETY="SAFETY",n.OTHER="OTHER"})(lS||(lS={}));var Ex;(function(n){n.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",n.STOP="STOP",n.MAX_TOKENS="MAX_TOKENS",n.SAFETY="SAFETY",n.RECITATION="RECITATION",n.LANGUAGE="LANGUAGE",n.BLOCKLIST="BLOCKLIST",n.PROHIBITED_CONTENT="PROHIBITED_CONTENT",n.SPII="SPII",n.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",n.OTHER="OTHER"})(Ex||(Ex={}));var cS;(function(n){n.TASK_TYPE_UNSPECIFIED="TASK_TYPE_UNSPECIFIED",n.RETRIEVAL_QUERY="RETRIEVAL_QUERY",n.RETRIEVAL_DOCUMENT="RETRIEVAL_DOCUMENT",n.SEMANTIC_SIMILARITY="SEMANTIC_SIMILARITY",n.CLASSIFICATION="CLASSIFICATION",n.CLUSTERING="CLUSTERING"})(cS||(cS={}));var uS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.AUTO="AUTO",n.ANY="ANY",n.NONE="NONE"})(uS||(uS={}));var dS;(function(n){n.MODE_UNSPECIFIED="MODE_UNSPECIFIED",n.MODE_DYNAMIC="MODE_DYNAMIC"})(dS||(dS={}));/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wc extends Error{constructor(t){super(`[GoogleGenerativeAI Error]: ${t}`)}}class Av extends Wc{constructor(t,r){super(t),this.response=r}}class Ok extends Wc{constructor(t,r,i,o){super(t),this.status=r,this.statusText=i,this.errorDetails=o}}class ym extends Wc{}class zk extends Wc{}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const YU="https://generativelanguage.googleapis.com",ZU="v1beta",KU="0.24.1",XU="genai-js";var kg;(function(n){n.GENERATE_CONTENT="generateContent",n.STREAM_GENERATE_CONTENT="streamGenerateContent",n.COUNT_TOKENS="countTokens",n.EMBED_CONTENT="embedContent",n.BATCH_EMBED_CONTENTS="batchEmbedContents"})(kg||(kg={}));class JU{constructor(t,r,i,o,l){this.model=t,this.task=r,this.apiKey=i,this.stream=o,this.requestOptions=l}toString(){var t,r;const i=((t=this.requestOptions)===null||t===void 0?void 0:t.apiVersion)||ZU;let l=`${((r=this.requestOptions)===null||r===void 0?void 0:r.baseUrl)||YU}/${i}/${this.model}:${this.task}`;return this.stream&&(l+="?alt=sse"),l}}function QU(n){const t=[];return n!=null&&n.apiClient&&t.push(n.apiClient),t.push(`${XU}/${KU}`),t.join(" ")}async function eq(n){var t;const r=new Headers;r.append("Content-Type","application/json"),r.append("x-goog-api-client",QU(n.requestOptions)),r.append("x-goog-api-key",n.apiKey);let i=(t=n.requestOptions)===null||t===void 0?void 0:t.customHeaders;if(i){if(!(i instanceof Headers))try{i=new Headers(i)}catch(o){throw new ym(`unable to convert customHeaders value ${JSON.stringify(i)} to Headers: ${o.message}`)}for(const[o,l]of i.entries()){if(o==="x-goog-api-key")throw new ym(`Cannot set reserved header name ${o}`);if(o==="x-goog-api-client")throw new ym(`Header name ${o} can only be set using the apiClient field`);r.append(o,l)}}return r}async function tq(n,t,r,i,o,l){const a=new JU(n,t,r,i,l);return{url:a.toString(),fetchOptions:Object.assign(Object.assign({},sq(l)),{method:"POST",headers:await eq(a),body:o})}}async function m0(n,t,r,i,o,l={},a=fetch){const{url:p,fetchOptions:g}=await tq(n,t,r,i,o,l);return rq(p,g,a)}async function rq(n,t,r=fetch){let i;try{i=await r(n,t)}catch(o){nq(o,n)}return i.ok||await iq(i,n),i}function nq(n,t){let r=n;throw r.name==="AbortError"?(r=new zk(`Request aborted when fetching ${t.toString()}: ${n.message}`),r.stack=n.stack):n instanceof Ok||n instanceof ym||(r=new Wc(`Error fetching from ${t.toString()}: ${n.message}`),r.stack=n.stack),r}async function iq(n,t){let r="",i;try{const o=await n.json();r=o.error.message,o.error.details&&(r+=` ${JSON.stringify(o.error.details)}`,i=o.error.details)}catch{}throw new Ok(`Error fetching from ${t.toString()}: [${n.status} ${n.statusText}] ${r}`,n.status,n.statusText,i)}function sq(n){const t={};if((n==null?void 0:n.signal)!==void 0||(n==null?void 0:n.timeout)>=0){const r=new AbortController;(n==null?void 0:n.timeout)>=0&&setTimeout(()=>r.abort(),n.timeout),n!=null&&n.signal&&n.signal.addEventListener("abort",()=>{r.abort()}),t.signal=r.signal}return t}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Bj(n){return n.text=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning text from the first candidate only. Access response.candidates directly to use the other candidates.`),V1(n.candidates[0]))throw new Av(`${um(n)}`,n);return aq(n)}else if(n.promptFeedback)throw new Av(`Text not available. ${um(n)}`,n);return""},n.functionCall=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),V1(n.candidates[0]))throw new Av(`${um(n)}`,n);return console.warn("response.functionCall() is deprecated. Use response.functionCalls() instead."),hS(n)[0]}else if(n.promptFeedback)throw new Av(`Function call not available. ${um(n)}`,n)},n.functionCalls=()=>{if(n.candidates&&n.candidates.length>0){if(n.candidates.length>1&&console.warn(`This response had ${n.candidates.length} candidates. Returning function calls from the first candidate only. Access response.candidates directly to use the other candidates.`),V1(n.candidates[0]))throw new Av(`${um(n)}`,n);return hS(n)}else if(n.promptFeedback)throw new Av(`Function call not available. ${um(n)}`,n)},n}function aq(n){var t,r,i,o;const l=[];if(!((r=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(o=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||o===void 0?void 0:o.parts)a.text&&l.push(a.text),a.executableCode&&l.push("\n```"+a.executableCode.language+`
`+a.executableCode.code+"\n```\n"),a.codeExecutionResult&&l.push("\n```\n"+a.codeExecutionResult.output+"\n```\n");return l.length>0?l.join(""):""}function hS(n){var t,r,i,o;const l=[];if(!((r=(t=n.candidates)===null||t===void 0?void 0:t[0].content)===null||r===void 0)&&r.parts)for(const a of(o=(i=n.candidates)===null||i===void 0?void 0:i[0].content)===null||o===void 0?void 0:o.parts)a.functionCall&&l.push(a.functionCall);if(l.length>0)return l}const oq=[Ex.RECITATION,Ex.SAFETY,Ex.LANGUAGE];function V1(n){return!!n.finishReason&&oq.includes(n.finishReason)}function um(n){var t,r,i;let o="";if((!n.candidates||n.candidates.length===0)&&n.promptFeedback)o+="Response was blocked",!((t=n.promptFeedback)===null||t===void 0)&&t.blockReason&&(o+=` due to ${n.promptFeedback.blockReason}`),!((r=n.promptFeedback)===null||r===void 0)&&r.blockReasonMessage&&(o+=`: ${n.promptFeedback.blockReasonMessage}`);else if(!((i=n.candidates)===null||i===void 0)&&i[0]){const l=n.candidates[0];V1(l)&&(o+=`Candidate was blocked due to ${l.finishReason}`,l.finishMessage&&(o+=`: ${l.finishMessage}`))}return o}function $x(n){return this instanceof $x?(this.v=n,this):new $x(n)}function lq(n,t,r){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var i=r.apply(n,t||[]),o,l=[];return o={},a("next"),a("throw"),a("return"),o[Symbol.asyncIterator]=function(){return this},o;function a(T){i[T]&&(o[T]=function(E){return new Promise(function(O,R){l.push([T,E,O,R])>1||p(T,E)})})}function p(T,E){try{g(i[T](E))}catch(O){S(l[0][3],O)}}function g(T){T.value instanceof $x?Promise.resolve(T.value.v).then(w,j):S(l[0][2],T)}function w(T){p("next",T)}function j(T){p("throw",T)}function S(T,E){T(E),l.shift(),l.length&&p(l[0][0],l[0][1])}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const fS=/^data\: (.*)(?:\n\n|\r\r|\r\n\r\n)/;function cq(n){const t=n.body.pipeThrough(new TextDecoderStream("utf8",{fatal:!0})),r=hq(t),[i,o]=r.tee();return{stream:dq(i),response:uq(o)}}async function uq(n){const t=[],r=n.getReader();for(;;){const{done:i,value:o}=await r.read();if(i)return Bj(fq(t));t.push(o)}}function dq(n){return lq(this,arguments,function*(){const r=n.getReader();for(;;){const{value:i,done:o}=yield $x(r.read());if(o)break;yield yield $x(Bj(i))}})}function hq(n){const t=n.getReader();return new ReadableStream({start(i){let o="";return l();function l(){return t.read().then(({value:a,done:p})=>{if(p){if(o.trim()){i.error(new Wc("Failed to parse stream"));return}i.close();return}o+=a;let g=o.match(fS),w;for(;g;){try{w=JSON.parse(g[1])}catch{i.error(new Wc(`Error parsing JSON response: "${g[1]}"`));return}i.enqueue(w),o=o.substring(g[0].length),g=o.match(fS)}return l()}).catch(a=>{let p=a;throw p.stack=a.stack,p.name==="AbortError"?p=new zk("Request aborted when reading from the stream"):p=new Wc("Error reading from the stream"),p})}}})}function fq(n){const t=n[n.length-1],r={promptFeedback:t==null?void 0:t.promptFeedback};for(const i of n){if(i.candidates){let o=0;for(const l of i.candidates)if(r.candidates||(r.candidates=[]),r.candidates[o]||(r.candidates[o]={index:o}),r.candidates[o].citationMetadata=l.citationMetadata,r.candidates[o].groundingMetadata=l.groundingMetadata,r.candidates[o].finishReason=l.finishReason,r.candidates[o].finishMessage=l.finishMessage,r.candidates[o].safetyRatings=l.safetyRatings,l.content&&l.content.parts){r.candidates[o].content||(r.candidates[o].content={role:l.content.role||"user",parts:[]});const a={};for(const p of l.content.parts)p.text&&(a.text=p.text),p.functionCall&&(a.functionCall=p.functionCall),p.executableCode&&(a.executableCode=p.executableCode),p.codeExecutionResult&&(a.codeExecutionResult=p.codeExecutionResult),Object.keys(a).length===0&&(a.text=""),r.candidates[o].content.parts.push(a)}o++}i.usageMetadata&&(r.usageMetadata=i.usageMetadata)}return r}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Fk(n,t,r,i){const o=await m0(t,kg.STREAM_GENERATE_CONTENT,n,!0,JSON.stringify(r),i);return cq(o)}async function Bk(n,t,r,i){const l=await(await m0(t,kg.GENERATE_CONTENT,n,!1,JSON.stringify(r),i)).json();return{response:Bj(l)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Uk(n){if(n!=null){if(typeof n=="string")return{role:"system",parts:[{text:n}]};if(n.text)return{role:"system",parts:[n]};if(n.parts)return n.role?n:{role:"system",parts:n.parts}}}function Hx(n){let t=[];if(typeof n=="string")t=[{text:n}];else for(const r of n)typeof r=="string"?t.push({text:r}):t.push(r);return pq(t)}function pq(n){const t={role:"user",parts:[]},r={role:"function",parts:[]};let i=!1,o=!1;for(const l of n)"functionResponse"in l?(r.parts.push(l),o=!0):(t.parts.push(l),i=!0);if(i&&o)throw new Wc("Within a single message, FunctionResponse cannot be mixed with other type of part in the request for sending chat message.");if(!i&&!o)throw new Wc("No content is provided for sending chat message.");return i?t:r}function mq(n,t){var r;let i={model:t==null?void 0:t.model,generationConfig:t==null?void 0:t.generationConfig,safetySettings:t==null?void 0:t.safetySettings,tools:t==null?void 0:t.tools,toolConfig:t==null?void 0:t.toolConfig,systemInstruction:t==null?void 0:t.systemInstruction,cachedContent:(r=t==null?void 0:t.cachedContent)===null||r===void 0?void 0:r.name,contents:[]};const o=n.generateContentRequest!=null;if(n.contents){if(o)throw new ym("CountTokensRequest must have one of contents or generateContentRequest, not both.");i.contents=n.contents}else if(o)i=Object.assign(Object.assign({},i),n.generateContentRequest);else{const l=Hx(n);i.contents=[l]}return{generateContentRequest:i}}function pS(n){let t;return n.contents?t=n:t={contents:[Hx(n)]},n.systemInstruction&&(t.systemInstruction=Uk(n.systemInstruction)),t}function gq(n){return typeof n=="string"||Array.isArray(n)?{content:Hx(n)}:n}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const mS=["text","inlineData","functionCall","functionResponse","executableCode","codeExecutionResult"],vq={user:["text","inlineData"],function:["functionResponse"],model:["text","functionCall","executableCode","codeExecutionResult"],system:["text"]};function yq(n){let t=!1;for(const r of n){const{role:i,parts:o}=r;if(!t&&i!=="user")throw new Wc(`First content should be with role 'user', got ${i}`);if(!iS.includes(i))throw new Wc(`Each item should include role field. Got ${i} but valid roles are: ${JSON.stringify(iS)}`);if(!Array.isArray(o))throw new Wc("Content should have 'parts' property with an array of Parts");if(o.length===0)throw new Wc("Each Content should have at least one part");const l={text:0,inlineData:0,functionCall:0,functionResponse:0,fileData:0,executableCode:0,codeExecutionResult:0};for(const p of o)for(const g of mS)g in p&&(l[g]+=1);const a=vq[i];for(const p of mS)if(!a.includes(p)&&l[p]>0)throw new Wc(`Content with role '${i}' can't contain '${p}' part`);t=!0}}function gS(n){var t;if(n.candidates===void 0||n.candidates.length===0)return!1;const r=(t=n.candidates[0])===null||t===void 0?void 0:t.content;if(r===void 0||r.parts===void 0||r.parts.length===0)return!1;for(const i of r.parts)if(i===void 0||Object.keys(i).length===0||i.text!==void 0&&i.text==="")return!1;return!0}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const vS="SILENT_ERROR";class xq{constructor(t,r,i,o={}){this.model=r,this.params=i,this._requestOptions=o,this._history=[],this._sendPromise=Promise.resolve(),this._apiKey=t,i!=null&&i.history&&(yq(i.history),this._history=i.history)}async getHistory(){return await this._sendPromise,this._history}async sendMessage(t,r={}){var i,o,l,a,p,g;await this._sendPromise;const w=Hx(t),j={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,w]},S=Object.assign(Object.assign({},this._requestOptions),r);let T;return this._sendPromise=this._sendPromise.then(()=>Bk(this._apiKey,this.model,j,S)).then(E=>{var O;if(gS(E.response)){this._history.push(w);const R=Object.assign({parts:[],role:"model"},(O=E.response.candidates)===null||O===void 0?void 0:O[0].content);this._history.push(R)}else{const R=um(E.response);R&&console.warn(`sendMessage() was unsuccessful. ${R}. Inspect response object for details.`)}T=E}).catch(E=>{throw this._sendPromise=Promise.resolve(),E}),await this._sendPromise,T}async sendMessageStream(t,r={}){var i,o,l,a,p,g;await this._sendPromise;const w=Hx(t),j={safetySettings:(i=this.params)===null||i===void 0?void 0:i.safetySettings,generationConfig:(o=this.params)===null||o===void 0?void 0:o.generationConfig,tools:(l=this.params)===null||l===void 0?void 0:l.tools,toolConfig:(a=this.params)===null||a===void 0?void 0:a.toolConfig,systemInstruction:(p=this.params)===null||p===void 0?void 0:p.systemInstruction,cachedContent:(g=this.params)===null||g===void 0?void 0:g.cachedContent,contents:[...this._history,w]},S=Object.assign(Object.assign({},this._requestOptions),r),T=Fk(this._apiKey,this.model,j,S);return this._sendPromise=this._sendPromise.then(()=>T).catch(E=>{throw new Error(vS)}).then(E=>E.response).then(E=>{if(gS(E)){this._history.push(w);const O=Object.assign({},E.candidates[0].content);O.role||(O.role="model"),this._history.push(O)}else{const O=um(E);O&&console.warn(`sendMessageStream() was unsuccessful. ${O}. Inspect response object for details.`)}}).catch(E=>{E.message!==vS&&console.error(E)}),T}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function bq(n,t,r,i){return(await m0(t,kg.COUNT_TOKENS,n,!1,JSON.stringify(r),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function _q(n,t,r,i){return(await m0(t,kg.EMBED_CONTENT,n,!1,JSON.stringify(r),i)).json()}async function wq(n,t,r,i){const o=r.requests.map(a=>Object.assign(Object.assign({},a),{model:t}));return(await m0(t,kg.BATCH_EMBED_CONTENTS,n,!1,JSON.stringify({requests:o}),i)).json()}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class yS{constructor(t,r,i={}){this.apiKey=t,this._requestOptions=i,r.model.includes("/")?this.model=r.model:this.model=`models/${r.model}`,this.generationConfig=r.generationConfig||{},this.safetySettings=r.safetySettings||[],this.tools=r.tools,this.toolConfig=r.toolConfig,this.systemInstruction=Uk(r.systemInstruction),this.cachedContent=r.cachedContent}async generateContent(t,r={}){var i;const o=pS(t),l=Object.assign(Object.assign({},this._requestOptions),r);return Bk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},o),l)}async generateContentStream(t,r={}){var i;const o=pS(t),l=Object.assign(Object.assign({},this._requestOptions),r);return Fk(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(i=this.cachedContent)===null||i===void 0?void 0:i.name},o),l)}startChat(t){var r;return new xq(this.apiKey,this.model,Object.assign({generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:(r=this.cachedContent)===null||r===void 0?void 0:r.name},t),this._requestOptions)}async countTokens(t,r={}){const i=mq(t,{model:this.model,generationConfig:this.generationConfig,safetySettings:this.safetySettings,tools:this.tools,toolConfig:this.toolConfig,systemInstruction:this.systemInstruction,cachedContent:this.cachedContent}),o=Object.assign(Object.assign({},this._requestOptions),r);return bq(this.apiKey,this.model,i,o)}async embedContent(t,r={}){const i=gq(t),o=Object.assign(Object.assign({},this._requestOptions),r);return _q(this.apiKey,this.model,i,o)}async batchEmbedContents(t,r={}){const i=Object.assign(Object.assign({},this._requestOptions),r);return wq(this.apiKey,this.model,t,i)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Im{constructor(t){this.apiKey=t}getGenerativeModel(t,r){if(!t.model)throw new Wc("Must provide a model name. Example: genai.getGenerativeModel({ model: 'my-model-name' })");return new yS(this.apiKey,t,r)}getGenerativeModelFromCachedContent(t,r,i){if(!t.name)throw new ym("Cached content must contain a `name` field.");if(!t.model)throw new ym("Cached content must contain a `model` field.");const o=["model","systemInstruction"];for(const a of o)if(r!=null&&r[a]&&t[a]&&(r==null?void 0:r[a])!==t[a]){if(a==="model"){const p=r.model.startsWith("models/")?r.model.replace("models/",""):r.model,g=t.model.startsWith("models/")?t.model.replace("models/",""):t.model;if(p===g)continue}throw new ym(`Different value for "${a}" specified in modelParams (${r[a]}) and cachedContent (${t[a]})`)}const l=Object.assign(Object.assign({},r),{model:t.model,tools:t.tools,toolConfig:t.toolConfig,systemInstruction:t.systemInstruction,cachedContent:t});return new yS(this.apiKey,l,i)}}const jq=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU"),Nq={ajay:{name:"Ajay Kumar",role:"Business Acquisition Specialist",systemPrompt:`You are Ajay Kumar, a Business Acquisition Specialist with 8+ years of experience in business acquisitions, valuations, and due diligence. Your expertise includes:
- Business valuation using multiple methods (DCF, comparable sales, asset-based)
- Due diligence processes (financial, legal, operational)
- Market analysis and competitive positioning
- Negotiation strategies and deal structuring
- ROI calculations and financial projections

You provide practical, actionable advice to buyers looking to acquire businesses. Be professional, knowledgeable, and helpful. When discussing valuations or financials, always remind users to consult with financial advisors for final decisions.

Format your responses clearly with bullet points and specific numbers when possible. If you need more information to provide accurate advice, ask clarifying questions.`},vijay:{name:"Vijay Sharma",role:"Franchise Development Expert",systemPrompt:`You are Vijay Sharma, a Franchise Development Expert specializing in franchise models, territory planning, and franchisee success. Your expertise includes:
- Franchise business models and structures
- ROI analysis for franchise investments
- Territory planning and market assessment
- Franchise agreement evaluation
- Multi-unit development strategies
- Franchise compliance and legal considerations

You help aspiring franchisees evaluate opportunities and make informed decisions. Be encouraging yet realistic about franchise investments. Provide detailed analysis of costs, potential returns, and risks.

Format your responses clearly with specific numbers, timelines, and actionable steps. Always emphasize the importance of reviewing the Franchise Disclosure Document (FDD).`}};class jg{static async sendMessage(t,r,i,o=[]){var l;try{const a=Nq[r];let p="";i!=null&&i.businessData&&(p+=`

Business Context:
${JSON.stringify(i.businessData,null,2)}`),i!=null&&i.franchiseData&&(p+=`

Franchise Context:
${JSON.stringify(i.franchiseData,null,2)}`);const g=o.filter(E=>E.role==="user"||E.role==="model").map(E=>({role:E.role,parts:[{text:E.parts}]}));g.length>0&&g[0].role!=="user"&&g.shift();const w=this.model.startChat({history:g,generationConfig:{temperature:.7,topK:40,topP:.95,maxOutputTokens:1024}}),j=g.length===0?`${a.systemPrompt}${p}

User: ${t}`:t;return(await(await w.sendMessage(j)).response).text()}catch(a){throw console.error("Gemini API Error:",a),(l=a.message)!=null&&l.includes("API key")?new Error("Invalid API key. Please check your Google AI API key in environment variables."):new Error(`AI service error: ${a.message||"Unknown error"}`)}}static async generateValuation(t){const r=`As a business valuation expert, provide a detailed valuation analysis for the following business:

Revenue: ${t.revenue?`${t.revenue.toLocaleString()}`:"Not provided"}
Annual Profit: ${t.profit?`${t.profit.toLocaleString()}`:"Not provided"}
Assets: ${t.assets?`${t.assets.toLocaleString()}`:"Not provided"}
Industry: ${t.industry||"Not specified"}
Location: ${t.location||"Not specified"}
Year Established: ${t.yearEstablished||"Not specified"}

Provide:
1. Estimated valuation range using multiple methods (revenue multiple, EBITDA multiple, asset-based)
2. Key valuation factors and assumptions
3. Industry-specific considerations
4. Potential risks and red flags
5. Recommended due diligence steps

Format the response clearly with specific numbers in Indian Rupees ().`;try{return(await(await this.model.generateContent(r)).response).text()}catch(i){throw console.error("Valuation generation error:",i),new Error("Failed to generate valuation analysis")}}static async generateFranchiseROI(t){const r=`As a franchise investment expert, provide a detailed ROI analysis for the following franchise opportunity:

Brand: ${t.brandName||"Franchise"}
Franchise Fee: ${t.franchiseFee?`${t.franchiseFee.toLocaleString()}`:"Not provided"}
Total Investment: ${t.totalInvestment?`${t.totalInvestment.toLocaleString()}`:"Not provided"}
Royalty: ${t.royaltyPercentage?`${t.royaltyPercentage}%`:"Not provided"}
Average Unit Revenue: ${t.averageRevenue?`${t.averageRevenue.toLocaleString()}`:"Not provided"}

Provide:
1. Estimated ROI and payback period
2. Year-by-year profit projections (first 5 years)
3. Break-even analysis
4. Cash flow considerations
5. Risk assessment
6. Comparison with industry benchmarks

Format the response with specific numbers in Indian Rupees () and realistic timelines.`;try{return(await(await this.model.generateContent(r)).response).text()}catch(i){throw console.error("ROI generation error:",i),new Error("Failed to generate ROI analysis")}}static async generateMarketAnalysis(t){const r=`Provide a comprehensive market analysis for:

Industry: ${t.industry||"Not specified"}
Location: ${t.location||"India"}
Business Type: ${t.businessType||"Not specified"}

Include:
1. Market size and growth trends in India
2. Competitive landscape
3. Target customer demographics
4. Entry barriers and opportunities
5. Regulatory considerations
6. Growth potential and risks
7. Key success factors

Provide specific insights relevant to the Indian market with data-driven recommendations.`;try{return(await(await this.model.generateContent(r)).response).text()}catch(i){throw console.error("Market analysis error:",i),new Error("Failed to generate market analysis")}}static async analyzeDocument(t,r){const o=`${{financial:"Analyze this financial document and provide key insights, red flags, and recommendations:",legal:"Review this legal document and highlight important clauses, risks, and compliance issues:",operational:"Analyze this operational document and provide insights on efficiency, processes, and improvements:"}[r]}

${t.substring(0,5e3)}`;try{return(await(await this.model.generateContent(o)).response).text()}catch(l){throw console.error("Document analysis error:",l),new Error("Failed to analyze document")}}static async generateDueDiligenceChecklist(t){const r=`Create a comprehensive due diligence checklist for acquiring a business with these details:

Industry: ${t.industry||"Not specified"}
Business Type: ${t.businessType||"Not specified"}
Transaction Size: ${t.transactionSize?`${t.transactionSize.toLocaleString()}`:"Not specified"}

Provide a detailed checklist covering:
1. Financial due diligence items
2. Legal and compliance review
3. Operational assessment
4. Market and competitive analysis
5. Human resources review
6. Technology and IP audit
7. Environmental and regulatory compliance

Format as a structured checklist with priorities (Critical, Important, Recommended).`;try{return(await(await this.model.generateContent(r)).response).text()}catch(i){throw console.error("Checklist generation error:",i),new Error("Failed to generate checklist")}}}nf(jg,"model",jq.getGenerativeModel({model:"gemini-pro"}));const Ml={ajay:{name:"Ajay Kumar",role:"Business Acquisition Specialist",avatar:"https://github.com/yusufhilmi.png",expertise:["Business Valuation","Due Diligence","Negotiation","Market Analysis"],description:"Expert in business acquisitions with 8+ years experience"},vijay:{name:"Vijay Sharma",role:"Franchise Development Expert",avatar:"https://github.com/kdrnp.png",expertise:["Franchise Models","ROI Analysis","Brand Evaluation","Territory Planning"],description:"Franchise specialist helping entrepreneurs find the right opportunities"}},Sq={ajay:[{icon:ey,label:"Business Valuation",action:"valuation"},{icon:Ys,label:"Due Diligence",action:"due-diligence"},{icon:na,label:"Market Analysis",action:"market-analysis"},{icon:Qv,label:"ROI Calculator",action:"roi-calculator"}],vijay:[{icon:$o,label:"Franchise Comparison",action:"comparison"},{icon:Qv,label:"Investment Calculator",action:"investment-calc"},{icon:na,label:"ROI Projections",action:"roi-projections"},{icon:Ys,label:"Franchise Guide",action:"guide"}]};function qk({className:n}){const[t,r]=M.useState(!1),[i,o]=M.useState(null),[l,a]=M.useState([]),[p,g]=M.useState(""),[w,j]=M.useState(!1),S=M.useRef(null),T=M.useRef(null),E=()=>{var z;(z=S.current)==null||z.scrollIntoView({behavior:"smooth"})};M.useEffect(()=>{E()},[l]);const O=z=>{o(z);const ee={id:Date.now().toString(),type:"agent",content:`Hi! I'm ${Ml[z].name}, your ${Ml[z].role}. ${Ml[z].description}. How can I help you today?`,timestamp:new Date,agent:z,suggestions:z==="ajay"?["Find businesses under 50L","Help with due diligence","Business valuation","Market analysis"]:["Show franchise opportunities","Calculate ROI","Compare franchises","Investment planning"]};a([ee])},R=async()=>{if(!p.trim()||!i||w)return;const z={id:Date.now().toString(),type:"user",content:p,timestamp:new Date};a(ee=>[...ee,z]),g(""),j(!0);try{const ee=l.map(K=>({role:K.type==="user"?"user":"model",parts:K.content,timestamp:K.timestamp})),ie=await jg.sendMessage(p,i,{},ee),ge={id:(Date.now()+1).toString(),type:"agent",content:ie,timestamp:new Date,agent:i,suggestions:F(p,i)};a(K=>[...K,ge])}catch(ee){console.error("AI Error:",ee);const ie={id:(Date.now()+1).toString(),type:"agent",content:`I apologize, but I'm having trouble connecting to the AI service. ${ee.message||"Please try again."}`,timestamp:new Date,agent:i};a(ge=>[...ge,ie])}finally{j(!1)}},F=(z,ee)=>ee==="ajay"?["Show similar businesses","Schedule due diligence","Get market report","Calculate financing options"]:["Compare with other franchises","Show ROI breakdown","Find similar opportunities","Get investment guide"],B=async z=>{const ie={valuation:"I need help with business valuation for a potential acquisition","due-diligence":"Can you guide me through the due diligence process?","market-analysis":"I'd like a market analysis for this business sector","roi-calculator":"Help me calculate ROI for this business opportunity",comparison:"I want to compare different franchise opportunities","investment-calc":"Help me calculate total investment required","roi-projections":"Show me ROI projections for this franchise",guide:"I need a comprehensive franchise investment guide"}[z]||"";ie&&(g(ie),setTimeout(()=>{const ge=document.querySelector('[data-send-button="true"]');ge==null||ge.click()},100))},G=z=>{g(z)};return t?e.jsxs(ot,{className:`fixed bottom-24 md:bottom-6 right-4 md:right-6 w-[calc(100vw-2rem)] md:w-96 h-[calc(100vh-8rem)] md:h-[600px] shadow-xl z-50 flex flex-col ${n}`,children:[e.jsxs(Vt,{className:"pb-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ht,{className:"text-lg",children:"AI Assistant"}),e.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>r(!1),children:e.jsx(Gc,{className:"h-4 w-4"})})]}),i&&e.jsxs("div",{className:"flex items-center gap-3 mt-2",children:[e.jsxs(lf,{className:"h-8 w-8",children:[e.jsx(cf,{src:Ml[i].avatar}),e.jsx(hp,{children:Ml[i].name.charAt(0)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:Ml[i].name}),e.jsx("div",{className:"text-xs text-muted-foreground",children:Ml[i].role})]})]})]}),e.jsx(ut,{className:"flex-1 flex flex-col p-0",children:i?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-3 border-b",children:[e.jsx("div",{className:"text-xs font-medium mb-2",children:"Quick Actions"}),e.jsx("div",{className:"grid grid-cols-2 gap-2",children:Sq[i].map(z=>e.jsxs(ze,{variant:"outline",size:"sm",className:"h-8 text-xs justify-start",onClick:()=>B(z.action),children:[e.jsx(z.icon,{className:"h-3 w-3 mr-1"}),z.label]},z.action))})]}),e.jsx(Mk,{className:"flex-1 p-4",children:e.jsxs("div",{className:"space-y-4",children:[l.map(z=>e.jsx("div",{className:`flex ${z.type==="user"?"justify-end":"justify-start"}`,children:e.jsxs("div",{className:`max-w-[80%] ${z.type==="user"?"order-2":"order-1"}`,children:[e.jsxs("div",{className:`flex items-start gap-2 ${z.type==="user"?"flex-row-reverse":"flex-row"}`,children:[e.jsx(lf,{className:"h-6 w-6",children:z.type==="user"?e.jsx(hp,{className:"bg-primary text-primary-foreground",children:e.jsx(vp,{className:"h-3 w-3"})}):e.jsx(cf,{src:Ml[z.agent].avatar})}),e.jsx("div",{className:`rounded-lg p-3 ${z.type==="user"?"bg-primary text-primary-foreground":"bg-muted"}`,children:e.jsx("p",{className:"text-sm",children:z.content})})]}),z.suggestions&&e.jsx("div",{className:"mt-2 space-y-1",children:z.suggestions.map((ee,ie)=>e.jsx(ze,{variant:"ghost",size:"sm",className:"h-6 text-xs justify-start w-full",onClick:()=>G(ee),children:ee},ie))})]})},z.id)),w&&e.jsx("div",{className:"flex justify-start",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(lf,{className:"h-6 w-6",children:e.jsx(cf,{src:Ml[i].avatar})}),e.jsx("div",{className:"bg-muted rounded-lg p-3",children:e.jsxs("div",{className:"flex space-x-1",children:[e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce"}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),e.jsx("div",{className:"w-2 h-2 bg-muted-foreground rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})]})}),e.jsx("div",{ref:S})]})}),e.jsxs("div",{className:"p-3 border-t",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{variant:"outline",size:"icon",onClick:()=>{var z;return(z=T.current)==null?void 0:z.click()},children:e.jsx(KO,{className:"h-4 w-4"})}),e.jsx(Wt,{value:p,onChange:z=>g(z.target.value),placeholder:"Type your message...",onKeyPress:z=>{z.key==="Enter"&&!z.shiftKey&&(z.preventDefault(),R())},className:"flex-1"}),e.jsx(ze,{onClick:R,disabled:!p.trim()||w,"data-send-button":"true",children:w?e.jsx(eo,{className:"h-4 w-4 animate-spin"}):e.jsx(aj,{className:"h-4 w-4"})})]}),e.jsx("input",{ref:T,type:"file",className:"hidden",multiple:!0,accept:".pdf,.doc,.docx,.jpg,.png"})]})]}):e.jsxs("div",{className:"p-4 space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"font-semibold mb-2",children:"Choose Your AI Assistant"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"Select the specialist who can best help you"})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ot,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>O("ajay"),children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs(lf,{children:[e.jsx(cf,{src:Ml.ajay.avatar}),e.jsx(hp,{children:"A"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Ml.ajay.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:Ml.ajay.role})]}),e.jsx($o,{className:"h-5 w-5 text-blue-500 ml-auto"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:Ml.ajay.description}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ml.ajay.expertise.map(z=>e.jsx(Gt,{variant:"secondary",className:"text-xs",children:z},z))})]})}),e.jsx(ot,{className:"cursor-pointer hover:bg-muted/50 transition-colors",onClick:()=>O("vijay"),children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-2",children:[e.jsxs(lf,{children:[e.jsx(cf,{src:Ml.vijay.avatar}),e.jsx(hp,{children:"V"})]}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:Ml.vijay.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:Ml.vijay.role})]}),e.jsx(gm,{className:"h-5 w-5 text-green-500 ml-auto"})]}),e.jsx("p",{className:"text-xs text-muted-foreground mb-2",children:Ml.vijay.description}),e.jsx("div",{className:"flex flex-wrap gap-1",children:Ml.vijay.expertise.map(z=>e.jsx(Gt,{variant:"secondary",className:"text-xs",children:z},z))})]})})]})]})})]}):e.jsx(ze,{onClick:()=>r(!0),className:`fixed bottom-24 md:bottom-6 right-4 md:right-6 h-14 w-14 rounded-full shadow-lg hover:shadow-xl transition-all duration-200 z-50 bg-primary hover:bg-primary/90 ${n}`,size:"icon",children:e.jsxs("div",{className:"relative",children:[e.jsx(e0,{className:"h-6 w-6 text-white"}),e.jsx("div",{className:"absolute -top-1 -right-1 w-3 h-3 bg-green-500 rounded-full animate-pulse"})]})})}var Aq=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],Cq=Aq.reduce((n,t)=>{const r=t0(`Primitive.${t}`),i=M.forwardRef((o,l)=>{const{asChild:a,...p}=o,g=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...p,ref:l})});return i.displayName=`Primitive.${t}`,{...n,[t]:i}},{}),kq="Separator",xS="horizontal",Eq=["horizontal","vertical"],Vk=M.forwardRef((n,t)=>{const{decorative:r,orientation:i=xS,...o}=n,l=Tq(i)?i:xS,p=r?{role:"none"}:{"aria-orientation":l==="vertical"?l:void 0,role:"separator"};return e.jsx(Cq.div,{"data-orientation":l,...p,...o,ref:t})});Vk.displayName=kq;function Tq(n){return Eq.includes(n)}var $k=Vk;const Ho=M.forwardRef(({className:n,orientation:t="horizontal",decorative:r=!0,...i},o)=>e.jsx($k,{ref:o,decorative:r,orientation:t,className:er("shrink-0 bg-border",t==="horizontal"?"h-[1px] w-full":"h-full w-[1px]",n),...i}));Ho.displayName=$k.displayName;function Hk(){const n=new Date().getFullYear();return e.jsx("footer",{className:"bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 text-slate-200",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-8 mb-8",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx($o,{className:"h-8 w-8 text-blue-400"}),e.jsx("span",{className:"text-2xl font-bold text-white",children:"BizSearch"})]}),e.jsx("p",{className:"text-sm text-slate-400 mb-4",children:"India's leading marketplace for buying, selling, and investing in verified businesses and franchise opportunities."}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx("a",{href:"https://facebook.com",target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-slate-800 hover:bg-blue-600 rounded-full transition-colors",children:e.jsx(rO,{className:"h-4 w-4"})}),e.jsx("a",{href:"https://twitter.com",target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-slate-800 hover:bg-blue-400 rounded-full transition-colors",children:e.jsx(k8,{className:"h-4 w-4"})}),e.jsx("a",{href:"https://linkedin.com",target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-slate-800 hover:bg-blue-700 rounded-full transition-colors",children:e.jsx(kO,{className:"h-4 w-4"})}),e.jsx("a",{href:"https://instagram.com",target:"_blank",rel:"noopener noreferrer",className:"p-2 bg-slate-800 hover:bg-pink-600 rounded-full transition-colors",children:e.jsx(NO,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(Kr,{to:"/businesses",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Browse Businesses"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/franchises",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Franchise Opportunities"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/add-business-listing",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"List Your Business"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/about",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"About Us"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/contact",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Contact Support"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Legal"}),e.jsxs("ul",{className:"space-y-2",children:[e.jsx("li",{children:e.jsx(Kr,{to:"/privacy",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/terms",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/cookie-policy",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Cookie Policy"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/refund-policy",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Refund Policy"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/disclaimer",className:"text-sm text-slate-400 hover:text-blue-400 transition-colors",children:"Disclaimer"})})]})]}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-white mb-4",children:"Contact Us"}),e.jsxs("ul",{className:"space-y-3",children:[e.jsxs("li",{className:"flex items-start gap-2 text-sm text-slate-400",children:[e.jsx(Ja,{className:"h-4 w-4 mt-0.5 flex-shrink-0 text-blue-400"}),e.jsxs("span",{children:["123 Business Hub, MG Road",e.jsx("br",{}),"Bangalore, Karnataka 560001"]})]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(bu,{className:"h-4 w-4 flex-shrink-0 text-blue-400"}),e.jsx("a",{href:"mailto:support@bizsearch.in",className:"hover:text-blue-400 transition-colors",children:"support@bizsearch.in"})]}),e.jsxs("li",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(Kc,{className:"h-4 w-4 flex-shrink-0 text-blue-400"}),e.jsx("a",{href:"tel:+911800123456",className:"hover:text-blue-400 transition-colors",children:"+91 1800 123 456"})]})]})]})]}),e.jsx(Ho,{className:"bg-slate-700 mb-6"}),e.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm text-slate-400",children:[e.jsx(bs,{className:"h-4 w-4 text-blue-400"}),e.jsx("span",{children:"All businesses are verified and secure"})]}),e.jsxs("p",{className:"text-sm text-slate-400",children:[" ",n," BizSearch. All rights reserved."]})]})]})})}function Dl({children:n}){var z,ee,ie,ge;const[t,r]=M.useState(!1),[i,o]=M.useState(!1),[l,a]=M.useState(!1),p=xd(),g=Na(),{user:w,profile:j,signOut:S}=Io(),{savedCount:T}=VA(),{unreadCount:E}=HA(),O=()=>{console.log("Help & Support clicked")},R=async()=>{try{const{error:K}=await S();if(K){console.error("Sign out error:",K);return}g("/",{replace:!0})}catch(K){console.error("Sign out failed:",K)}},F=()=>{a(!0)},B=[{name:"Home",href:"/",icon:$o},{name:"Businesses",href:"/businesses",icon:$o},{name:"Franchises",href:"/franchises",icon:gm},{name:"About",href:"/about",icon:fN},{name:"Contact",href:"/contact",icon:Kc}],G=K=>K==="/"?p.pathname==="/":p.pathname.startsWith(K);return e.jsxs("div",{className:"min-h-screen bg-background",children:[e.jsx("header",{className:"sticky top-0 z-50 w-full border-b bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"flex h-16 items-center justify-between",children:[e.jsxs(Kr,{to:"/",className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary rounded-lg",children:e.jsx($o,{className:"h-5 w-5 text-primary-foreground"})}),e.jsx("span",{className:"text-xl font-bold",children:"BizSearch"}),e.jsx(Gt,{variant:"secondary",className:"hidden sm:inline-flex",children:"AI-Powered"})]}),e.jsxs("nav",{className:"hidden md:flex items-center space-x-6",children:[e.jsx(Kr,{to:"/businesses",className:`text-sm font-medium transition-colors hover:text-primary ${G("/businesses")?"text-primary":"text-muted-foreground"}`,children:"Business for Sale"}),e.jsx(Kr,{to:"/franchises",className:`text-sm font-medium transition-colors hover:text-primary ${G("/franchises")?"text-primary":"text-muted-foreground"}`,children:"Franchise"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[w&&e.jsxs(Q2,{children:[e.jsx(ew,{asChild:!0,children:e.jsxs(ze,{variant:"default",size:"sm",className:"hidden sm:flex items-center gap-2",children:[e.jsx(Lh,{className:"h-4 w-4"}),e.jsx("span",{children:"List Your Business"}),e.jsx(tb,{className:"h-3 w-3"})]})}),e.jsxs(mb,{align:"end",className:"w-56",children:[e.jsx(Kr,{to:"/add-business-listing",children:e.jsxs(Wd,{children:[e.jsx(vm,{className:"mr-2 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"Sell a Business"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"List your business for sale"})]})]})}),e.jsx(Kr,{to:"/add-franchise-listing",children:e.jsxs(Wd,{children:[e.jsx(gm,{className:"mr-2 h-4 w-4"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:"List Franchise"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Offer franchise opportunities"})]})]})})]})]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:F,className:"hidden sm:flex items-center space-x-2","data-ai-chat":!0,children:[e.jsx(e0,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"AI Advisor"}),e.jsx("div",{className:"w-2 h-2 bg-green-400 rounded-full animate-pulse"})]}),e.jsx(Kr,{to:"/businesses",children:e.jsx(ze,{variant:"ghost",size:"icon",className:"hidden sm:flex",children:e.jsx(md,{className:"h-4 w-4"})})}),e.jsx(Kr,{to:"/saved",children:e.jsxs(ze,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(kx,{className:"h-4 w-4"}),T>0&&e.jsx(Gt,{className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs bg-blue-600",children:T})]})}),e.jsx(Kr,{to:"/notifications",children:e.jsxs(ze,{variant:"ghost",size:"icon",className:"relative",children:[e.jsx(Ih,{className:"h-4 w-4"}),E>0&&e.jsx(Gt,{className:"absolute -top-1 -right-1 h-4 w-4 flex items-center justify-center p-0 text-xs",children:E})]})}),w?e.jsxs(Q2,{children:[e.jsx(ew,{asChild:!0,children:e.jsxs(ze,{variant:"ghost",className:"flex items-center space-x-2",children:[e.jsxs(lf,{className:"h-8 w-8",children:[e.jsx(cf,{src:(j==null?void 0:j.avatar_url)||void 0}),e.jsx(hp,{children:((ee=(z=j==null?void 0:j.display_name)==null?void 0:z[0])==null?void 0:ee.toUpperCase())||((ge=(ie=w==null?void 0:w.email)==null?void 0:ie[0])==null?void 0:ge.toUpperCase())||"U"})]}),e.jsx(tb,{className:"h-4 w-4"})]})}),e.jsxs(mb,{align:"end",className:"w-56",children:[j&&e.jsxs("div",{className:"px-2 py-1.5 text-sm",children:[e.jsx("p",{className:"font-medium",children:j.display_name}),e.jsx("p",{className:"text-xs text-muted-foreground",children:j.email})]}),e.jsx(tw,{}),e.jsx(Kr,{to:"/profile",children:e.jsxs(Wd,{children:[e.jsx(vp,{className:"mr-2 h-4 w-4"}),"Profile"]})}),e.jsx(Kr,{to:"/my-listings",children:e.jsxs(Wd,{children:[e.jsx(vm,{className:"mr-2 h-4 w-4"}),"My Listings"]})}),e.jsx(Kr,{to:"/saved",children:e.jsxs(Wd,{children:[e.jsx(kx,{className:"mr-2 h-4 w-4"}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"Saved Listings"}),T>0&&e.jsx(Gt,{variant:"secondary",className:"ml-2 text-xs",children:T})]})]})}),e.jsx(Kr,{to:"/notifications",children:e.jsxs(Wd,{children:[e.jsx(Ih,{className:"mr-2 h-4 w-4"}),e.jsxs("div",{className:"flex items-center justify-between w-full",children:[e.jsx("span",{children:"Notifications"}),E>0&&e.jsx(Gt,{className:"ml-2 text-xs",children:E})]})]})}),e.jsx(tw,{}),e.jsx(Kr,{to:"/contact",children:e.jsxs(Wd,{onClick:O,children:[e.jsx(fN,{className:"mr-2 h-4 w-4"}),"Help & Support"]})}),e.jsxs(Wd,{onClick:R,className:"text-destructive focus:text-destructive cursor-pointer",children:[e.jsx(MO,{className:"mr-2 h-4 w-4"}),"Sign Out"]})]})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(Kr,{to:"/login",children:e.jsx(ze,{variant:"ghost",size:"sm",children:"Sign In"})}),e.jsx(Kr,{to:"/signup",children:e.jsx(ze,{variant:"default",size:"sm",children:"Sign Up"})})]}),e.jsxs(kU,{open:t,onOpenChange:r,children:[e.jsx(EU,{asChild:!0,children:e.jsx(ze,{variant:"ghost",size:"icon",className:"md:hidden",children:e.jsx(qO,{className:"h-5 w-5"})})}),e.jsx(_k,{side:"right",className:"w-80",children:e.jsxs("div",{className:"flex flex-col space-y-4 mt-8",children:[B.map(K=>e.jsxs(Kr,{to:K.href,onClick:()=>r(!1),className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium transition-colors ${G(K.href)?"bg-primary text-primary-foreground":"text-muted-foreground hover:text-foreground hover:bg-muted"}`,children:[e.jsx(K.icon,{className:"h-5 w-5"}),e.jsx("span",{children:K.name})]},K.name)),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"px-4 py-2 text-sm font-medium text-muted-foreground",children:"List Your Business"}),e.jsxs(Kr,{to:"/add-business-listing",onClick:()=>r(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium bg-primary text-primary-foreground",children:[e.jsx($o,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"Sell Your Business"}),e.jsx("span",{className:"text-xs opacity-80",children:"List your business for sale"})]})]}),e.jsxs(Kr,{to:"/add-franchise-listing",onClick:()=>r(!1),className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-sm font-medium border border-primary text-primary hover:bg-primary hover:text-primary-foreground",children:[e.jsx(gm,{className:"h-5 w-5"}),e.jsxs("div",{className:"flex flex-col",children:[e.jsx("span",{children:"List Franchise"}),e.jsx("span",{className:"text-xs opacity-80",children:"Offer franchise opportunities"})]})]})]})]})})]})]})]})})}),e.jsx("main",{className:"flex-1 pb-20 md:pb-0",children:n}),e.jsx(LU,{onAIChatOpen:F}),l&&e.jsx(qk,{}),e.jsx("footer",{className:"bg-muted/50 border-t",children:e.jsxs("div",{className:"container mx-auto px-4 py-12",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx("div",{className:"flex items-center justify-center w-8 h-8 bg-primary rounded-lg",children:e.jsx($o,{className:"h-5 w-5 text-primary-foreground"})}),e.jsx("span",{className:"text-xl font-bold",children:"BizSearch"})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"India's leading AI-powered platform for business acquisitions and franchise opportunities."}),e.jsxs("div",{className:"flex space-x-4",children:[e.jsx(ze,{variant:"ghost",size:"icon",children:e.jsx(Kc,{className:"h-4 w-4"})}),e.jsx(ze,{variant:"ghost",size:"icon",children:e.jsx(bu,{className:"h-4 w-4"})}),e.jsx(ze,{variant:"ghost",size:"icon",children:e.jsx(Ja,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Quick Links"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(Kr,{to:"/businesses",className:"text-muted-foreground hover:text-foreground",children:"Browse Businesses"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/franchises",className:"text-muted-foreground hover:text-foreground",children:"Franchise Opportunities"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/sell",className:"text-muted-foreground hover:text-foreground",children:"Sell Your Business"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/valuation",className:"text-muted-foreground hover:text-foreground",children:"Business Valuation"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Support"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(Kr,{to:"/help",className:"text-muted-foreground hover:text-foreground",children:"Help Center"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/contact",className:"text-muted-foreground hover:text-foreground",children:"Contact Us"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/faq",className:"text-muted-foreground hover:text-foreground",children:"FAQ"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/guides",className:"text-muted-foreground hover:text-foreground",children:"Buying Guides"})})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-sm font-semibold",children:"Legal"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:e.jsx(Kr,{to:"/privacy",className:"text-muted-foreground hover:text-foreground",children:"Privacy Policy"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/terms",className:"text-muted-foreground hover:text-foreground",children:"Terms of Service"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/cookies",className:"text-muted-foreground hover:text-foreground",children:"Cookie Policy"})}),e.jsx("li",{children:e.jsx(Kr,{to:"/disclaimer",className:"text-muted-foreground hover:text-foreground",children:"Disclaimer"})})]})]})]}),e.jsxs("div",{className:"border-t mt-8 pt-8 flex flex-col md:flex-row justify-between items-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:" 2024 BizSearch. All rights reserved."}),e.jsxs("div",{className:"flex items-center space-x-4 mt-4 md:mt-0",children:[e.jsx(Gt,{variant:"outline",className:"text-xs",children:"Trusted Platform"}),e.jsx(Gt,{variant:"outline",className:"text-xs",children:"Verified Listings"}),e.jsx(Gt,{variant:"outline",className:"text-xs",children:"Secure Transactions"})]})]})]})}),p.pathname!=="/"&&e.jsx(Hk,{})]})}function Pq(n){const t=Rq(n),r=M.forwardRef((i,o)=>{const{children:l,...a}=i,p=M.Children.toArray(l),g=p.find(Lq);if(g){const w=g.props.children,j=p.map(S=>S===g?M.Children.count(w)>1?M.Children.only(null):M.isValidElement(w)?w.props.children:null:S);return e.jsx(t,{...a,ref:o,children:M.isValidElement(w)?M.cloneElement(w,void 0,j):null})}return e.jsx(t,{...a,ref:o,children:l})});return r.displayName=`${n}.Slot`,r}function Rq(n){const t=M.forwardRef((r,i)=>{const{children:o,...l}=r;if(M.isValidElement(o)){const a=Dq(o),p=Mq(l,o.props);return o.type!==M.Fragment&&(p.ref=i?wf(i,a):a),M.cloneElement(o,p)}return M.Children.count(o)>1?M.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var Iq=Symbol("radix.slottable");function Lq(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===Iq}function Mq(n,t){const r={...t};for(const i in t){const o=n[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...p)=>{const g=l(...p);return o(...p),g}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...n,...r}}function Dq(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}function s_(n){const t=M.useRef({value:n,previous:n});return M.useMemo(()=>(t.current.value!==n&&(t.current.previous=t.current.value,t.current.value=n),t.current.previous),[n])}var Gk=Object.freeze({position:"absolute",border:0,width:1,height:1,padding:0,margin:-1,overflow:"hidden",clip:"rect(0, 0, 0, 0)",whiteSpace:"nowrap",wordWrap:"normal"}),Oq="VisuallyHidden",zq=M.forwardRef((n,t)=>e.jsx(Cn.span,{...n,ref:t,style:{...Gk,...n.style}}));zq.displayName=Oq;var Fq=[" ","Enter","ArrowUp","ArrowDown"],Bq=[" ","Enter"],Eg="Select",[a_,o_,Uq]=Ub(Eg),[Sy]=Du(Eg,[Uq,Ny]),l_=Ny(),[qq,Lm]=Sy(Eg),[Vq,$q]=Sy(Eg),Wk=n=>{const{__scopeSelect:t,children:r,open:i,defaultOpen:o,onOpenChange:l,value:a,defaultValue:p,onValueChange:g,dir:w,name:j,autoComplete:S,disabled:T,required:E,form:O}=n,R=l_(t),[F,B]=M.useState(null),[G,z]=M.useState(null),[ee,ie]=M.useState(!1),ge=_y(w),[K,J]=bf({prop:i,defaultProp:o??!1,onChange:l,caller:Eg}),[Se,_e]=bf({prop:a,defaultProp:p,onChange:g,caller:Eg}),re=M.useRef(null),ce=F?O||!!F.closest("form"):!0,[fe,ye]=M.useState(new Set),Fe=Array.from(fe).map(Q=>Q.props.value).join(";");return e.jsx(xj,{...R,children:e.jsxs(qq,{required:E,scope:t,trigger:F,onTriggerChange:B,valueNode:G,onValueNodeChange:z,valueNodeHasChildren:ee,onValueNodeHasChildrenChange:ie,contentId:Dh(),value:Se,onValueChange:_e,open:K,onOpenChange:J,dir:ge,triggerPointerDownPosRef:re,disabled:T,children:[e.jsx(a_.Provider,{scope:t,children:e.jsx(Vq,{scope:n.__scopeSelect,onNativeOptionAdd:M.useCallback(Q=>{ye(pe=>new Set(pe).add(Q))},[]),onNativeOptionRemove:M.useCallback(Q=>{ye(pe=>{const me=new Set(pe);return me.delete(Q),me})},[]),children:r})}),ce?e.jsxs(vE,{"aria-hidden":!0,required:E,tabIndex:-1,name:j,autoComplete:S,value:Se,onChange:Q=>_e(Q.target.value),disabled:T,form:O,children:[Se===void 0?e.jsx("option",{value:""}):null,Array.from(fe)]},Fe):null]})})};Wk.displayName=Eg;var Yk="SelectTrigger",Zk=M.forwardRef((n,t)=>{const{__scopeSelect:r,disabled:i=!1,...o}=n,l=l_(r),a=Lm(Yk,r),p=a.disabled||i,g=Wn(t,a.onTriggerChange),w=o_(r),j=M.useRef("touch"),[S,T,E]=xE(R=>{const F=w().filter(z=>!z.disabled),B=F.find(z=>z.value===a.value),G=bE(F,R,B);G!==void 0&&a.onValueChange(G.value)}),O=R=>{p||(a.onOpenChange(!0),E()),R&&(a.triggerPointerDownPosRef.current={x:Math.round(R.pageX),y:Math.round(R.pageY)})};return e.jsx(Yb,{asChild:!0,...l,children:e.jsx(Cn.button,{type:"button",role:"combobox","aria-controls":a.contentId,"aria-expanded":a.open,"aria-required":a.required,"aria-autocomplete":"none",dir:a.dir,"data-state":a.open?"open":"closed",disabled:p,"data-disabled":p?"":void 0,"data-placeholder":yE(a.value)?"":void 0,...o,ref:g,onClick:Dr(o.onClick,R=>{R.currentTarget.focus(),j.current!=="mouse"&&O(R)}),onPointerDown:Dr(o.onPointerDown,R=>{j.current=R.pointerType;const F=R.target;F.hasPointerCapture(R.pointerId)&&F.releasePointerCapture(R.pointerId),R.button===0&&R.ctrlKey===!1&&R.pointerType==="mouse"&&(O(R),R.preventDefault())}),onKeyDown:Dr(o.onKeyDown,R=>{const F=S.current!=="";!(R.ctrlKey||R.altKey||R.metaKey)&&R.key.length===1&&T(R.key),!(F&&R.key===" ")&&Fq.includes(R.key)&&(O(),R.preventDefault())})})})});Zk.displayName=Yk;var Kk="SelectValue",Xk=M.forwardRef((n,t)=>{const{__scopeSelect:r,className:i,style:o,children:l,placeholder:a="",...p}=n,g=Lm(Kk,r),{onValueNodeHasChildrenChange:w}=g,j=l!==void 0,S=Wn(t,g.onValueNodeChange);return xl(()=>{w(j)},[w,j]),e.jsx(Cn.span,{...p,ref:S,style:{pointerEvents:"none"},children:yE(g.value)?e.jsx(e.Fragment,{children:a}):l})});Xk.displayName=Kk;var Hq="SelectIcon",Jk=M.forwardRef((n,t)=>{const{__scopeSelect:r,children:i,...o}=n;return e.jsx(Cn.span,{"aria-hidden":!0,...o,ref:t,children:i||""})});Jk.displayName=Hq;var Gq="SelectPortal",Qk=n=>e.jsx(a0,{asChild:!0,...n});Qk.displayName=Gq;var Tg="SelectContent",eE=M.forwardRef((n,t)=>{const r=Lm(Tg,n.__scopeSelect),[i,o]=M.useState();if(xl(()=>{o(new DocumentFragment)},[]),!r.open){const l=i;return l?dy.createPortal(e.jsx(tE,{scope:n.__scopeSelect,children:e.jsx(a_.Slot,{scope:n.__scopeSelect,children:e.jsx("div",{children:n.children})})}),l):null}return e.jsx(rE,{...n,ref:t})});eE.displayName=Tg;var Ch=10,[tE,Mm]=Sy(Tg),Wq="SelectContentImpl",Yq=Pq("SelectContent.RemoveScroll"),rE=M.forwardRef((n,t)=>{const{__scopeSelect:r,position:i="item-aligned",onCloseAutoFocus:o,onEscapeKeyDown:l,onPointerDownOutside:a,side:p,sideOffset:g,align:w,alignOffset:j,arrowPadding:S,collisionBoundary:T,collisionPadding:E,sticky:O,hideWhenDetached:R,avoidCollisions:F,...B}=n,G=Lm(Tg,r),[z,ee]=M.useState(null),[ie,ge]=M.useState(null),K=Wn(t,Ve=>ee(Ve)),[J,Se]=M.useState(null),[_e,re]=M.useState(null),ce=o_(r),[fe,ye]=M.useState(!1),Fe=M.useRef(!1);M.useEffect(()=>{if(z)return Kb(z)},[z]),qb();const Q=M.useCallback(Ve=>{const[tt,...Qe]=ce().map(zt=>zt.ref.current),[St]=Qe.slice(-1),Et=document.activeElement;for(const zt of Ve)if(zt===Et||(zt==null||zt.scrollIntoView({block:"nearest"}),zt===tt&&ie&&(ie.scrollTop=0),zt===St&&ie&&(ie.scrollTop=ie.scrollHeight),zt==null||zt.focus(),document.activeElement!==Et))return},[ce,ie]),pe=M.useCallback(()=>Q([J,z]),[Q,J,z]);M.useEffect(()=>{fe&&pe()},[fe,pe]);const{onOpenChange:me,triggerPointerDownPosRef:Ue}=G;M.useEffect(()=>{if(z){let Ve={x:0,y:0};const tt=St=>{var Et,zt;Ve={x:Math.abs(Math.round(St.pageX)-(((Et=Ue.current)==null?void 0:Et.x)??0)),y:Math.abs(Math.round(St.pageY)-(((zt=Ue.current)==null?void 0:zt.y)??0))}},Qe=St=>{Ve.x<=10&&Ve.y<=10?St.preventDefault():z.contains(St.target)||me(!1),document.removeEventListener("pointermove",tt),Ue.current=null};return Ue.current!==null&&(document.addEventListener("pointermove",tt),document.addEventListener("pointerup",Qe,{capture:!0,once:!0})),()=>{document.removeEventListener("pointermove",tt),document.removeEventListener("pointerup",Qe,{capture:!0})}}},[z,me,Ue]),M.useEffect(()=>{const Ve=()=>me(!1);return window.addEventListener("blur",Ve),window.addEventListener("resize",Ve),()=>{window.removeEventListener("blur",Ve),window.removeEventListener("resize",Ve)}},[me]);const[Ke,Re]=xE(Ve=>{const tt=ce().filter(Et=>!Et.disabled),Qe=tt.find(Et=>Et.ref.current===document.activeElement),St=bE(tt,Ve,Qe);St&&setTimeout(()=>St.ref.current.focus())}),te=M.useCallback((Ve,tt,Qe)=>{const St=!Fe.current&&!Qe;(G.value!==void 0&&G.value===tt||St)&&(Se(Ve),St&&(Fe.current=!0))},[G.value]),ue=M.useCallback(()=>z==null?void 0:z.focus(),[z]),Ne=M.useCallback((Ve,tt,Qe)=>{const St=!Fe.current&&!Qe;(G.value!==void 0&&G.value===tt||St)&&re(Ve)},[G.value]),Me=i==="popper"?rw:nE,We=Me===rw?{side:p,sideOffset:g,align:w,alignOffset:j,arrowPadding:S,collisionBoundary:T,collisionPadding:E,sticky:O,hideWhenDetached:R,avoidCollisions:F}:{};return e.jsx(tE,{scope:r,content:z,viewport:ie,onViewportChange:ge,itemRefCallback:te,selectedItem:J,onItemLeave:ue,itemTextRefCallback:Ne,focusSelectedItem:pe,selectedItemText:_e,position:i,isPositioned:fe,searchRef:Ke,children:e.jsx(l0,{as:Yq,allowPinchZoom:!0,children:e.jsx(i0,{asChild:!0,trapped:G.open,onMountAutoFocus:Ve=>{Ve.preventDefault()},onUnmountAutoFocus:Dr(o,Ve=>{var tt;(tt=G.trigger)==null||tt.focus({preventScroll:!0}),Ve.preventDefault()}),children:e.jsx(n0,{asChild:!0,disableOutsidePointerEvents:!0,onEscapeKeyDown:l,onPointerDownOutside:a,onFocusOutside:Ve=>Ve.preventDefault(),onDismiss:()=>G.onOpenChange(!1),children:e.jsx(Me,{role:"listbox",id:G.contentId,"data-state":G.open?"open":"closed",dir:G.dir,onContextMenu:Ve=>Ve.preventDefault(),...B,...We,onPlaced:()=>ye(!0),ref:K,style:{display:"flex",flexDirection:"column",outline:"none",...B.style},onKeyDown:Dr(B.onKeyDown,Ve=>{const tt=Ve.ctrlKey||Ve.altKey||Ve.metaKey;if(Ve.key==="Tab"&&Ve.preventDefault(),!tt&&Ve.key.length===1&&Re(Ve.key),["ArrowUp","ArrowDown","Home","End"].includes(Ve.key)){let St=ce().filter(Et=>!Et.disabled).map(Et=>Et.ref.current);if(["ArrowUp","End"].includes(Ve.key)&&(St=St.slice().reverse()),["ArrowUp","ArrowDown"].includes(Ve.key)){const Et=Ve.target,zt=St.indexOf(Et);St=St.slice(zt+1)}setTimeout(()=>Q(St)),Ve.preventDefault()}})})})})})})});rE.displayName=Wq;var Zq="SelectItemAlignedPosition",nE=M.forwardRef((n,t)=>{const{__scopeSelect:r,onPlaced:i,...o}=n,l=Lm(Tg,r),a=Mm(Tg,r),[p,g]=M.useState(null),[w,j]=M.useState(null),S=Wn(t,K=>j(K)),T=o_(r),E=M.useRef(!1),O=M.useRef(!0),{viewport:R,selectedItem:F,selectedItemText:B,focusSelectedItem:G}=a,z=M.useCallback(()=>{if(l.trigger&&l.valueNode&&p&&w&&R&&F&&B){const K=l.trigger.getBoundingClientRect(),J=w.getBoundingClientRect(),Se=l.valueNode.getBoundingClientRect(),_e=B.getBoundingClientRect();if(l.dir!=="rtl"){const Et=_e.left-J.left,zt=Se.left-Et,Lt=K.left-zt,wr=K.width+Lt,_t=Math.max(wr,J.width),Ye=window.innerWidth-Ch,$r=Vx(zt,[Ch,Math.max(Ch,Ye-_t)]);p.style.minWidth=wr+"px",p.style.left=$r+"px"}else{const Et=J.right-_e.right,zt=window.innerWidth-Se.right-Et,Lt=window.innerWidth-K.right-zt,wr=K.width+Lt,_t=Math.max(wr,J.width),Ye=window.innerWidth-Ch,$r=Vx(zt,[Ch,Math.max(Ch,Ye-_t)]);p.style.minWidth=wr+"px",p.style.right=$r+"px"}const re=T(),ce=window.innerHeight-Ch*2,fe=R.scrollHeight,ye=window.getComputedStyle(w),Fe=parseInt(ye.borderTopWidth,10),Q=parseInt(ye.paddingTop,10),pe=parseInt(ye.borderBottomWidth,10),me=parseInt(ye.paddingBottom,10),Ue=Fe+Q+fe+me+pe,Ke=Math.min(F.offsetHeight*5,Ue),Re=window.getComputedStyle(R),te=parseInt(Re.paddingTop,10),ue=parseInt(Re.paddingBottom,10),Ne=K.top+K.height/2-Ch,Me=ce-Ne,We=F.offsetHeight/2,Ve=F.offsetTop+We,tt=Fe+Q+Ve,Qe=Ue-tt;if(tt<=Ne){const Et=re.length>0&&F===re[re.length-1].ref.current;p.style.bottom="0px";const zt=w.clientHeight-R.offsetTop-R.offsetHeight,Lt=Math.max(Me,We+(Et?ue:0)+zt+pe),wr=tt+Lt;p.style.height=wr+"px"}else{const Et=re.length>0&&F===re[0].ref.current;p.style.top="0px";const Lt=Math.max(Ne,Fe+R.offsetTop+(Et?te:0)+We)+Qe;p.style.height=Lt+"px",R.scrollTop=tt-Ne+R.offsetTop}p.style.margin=`${Ch}px 0`,p.style.minHeight=Ke+"px",p.style.maxHeight=ce+"px",i==null||i(),requestAnimationFrame(()=>E.current=!0)}},[T,l.trigger,l.valueNode,p,w,R,F,B,l.dir,i]);xl(()=>z(),[z]);const[ee,ie]=M.useState();xl(()=>{w&&ie(window.getComputedStyle(w).zIndex)},[w]);const ge=M.useCallback(K=>{K&&O.current===!0&&(z(),G==null||G(),O.current=!1)},[z,G]);return e.jsx(Xq,{scope:r,contentWrapper:p,shouldExpandOnScrollRef:E,onScrollButtonChange:ge,children:e.jsx("div",{ref:g,style:{display:"flex",flexDirection:"column",position:"fixed",zIndex:ee},children:e.jsx(Cn.div,{...o,ref:S,style:{boxSizing:"border-box",maxHeight:"100%",...o.style}})})})});nE.displayName=Zq;var Kq="SelectPopperPosition",rw=M.forwardRef((n,t)=>{const{__scopeSelect:r,align:i="start",collisionPadding:o=Ch,...l}=n,a=l_(r);return e.jsx(bj,{...a,...l,ref:t,align:i,collisionPadding:o,style:{boxSizing:"border-box",...l.style,"--radix-select-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-select-content-available-width":"var(--radix-popper-available-width)","--radix-select-content-available-height":"var(--radix-popper-available-height)","--radix-select-trigger-width":"var(--radix-popper-anchor-width)","--radix-select-trigger-height":"var(--radix-popper-anchor-height)"}})});rw.displayName=Kq;var[Xq,Uj]=Sy(Tg,{}),nw="SelectViewport",iE=M.forwardRef((n,t)=>{const{__scopeSelect:r,nonce:i,...o}=n,l=Mm(nw,r),a=Uj(nw,r),p=Wn(t,l.onViewportChange),g=M.useRef(0);return e.jsxs(e.Fragment,{children:[e.jsx("style",{dangerouslySetInnerHTML:{__html:"[data-radix-select-viewport]{scrollbar-width:none;-ms-overflow-style:none;-webkit-overflow-scrolling:touch;}[data-radix-select-viewport]::-webkit-scrollbar{display:none}"},nonce:i}),e.jsx(a_.Slot,{scope:r,children:e.jsx(Cn.div,{"data-radix-select-viewport":"",role:"presentation",...o,ref:p,style:{position:"relative",flex:1,overflow:"hidden auto",...o.style},onScroll:Dr(o.onScroll,w=>{const j=w.currentTarget,{contentWrapper:S,shouldExpandOnScrollRef:T}=a;if(T!=null&&T.current&&S){const E=Math.abs(g.current-j.scrollTop);if(E>0){const O=window.innerHeight-Ch*2,R=parseFloat(S.style.minHeight),F=parseFloat(S.style.height),B=Math.max(R,F);if(B<O){const G=B+E,z=Math.min(O,G),ee=G-z;S.style.height=z+"px",S.style.bottom==="0px"&&(j.scrollTop=ee>0?ee:0,S.style.justifyContent="flex-end")}}}g.current=j.scrollTop})})})]})});iE.displayName=nw;var sE="SelectGroup",[Jq,Qq]=Sy(sE),eV=M.forwardRef((n,t)=>{const{__scopeSelect:r,...i}=n,o=Dh();return e.jsx(Jq,{scope:r,id:o,children:e.jsx(Cn.div,{role:"group","aria-labelledby":o,...i,ref:t})})});eV.displayName=sE;var aE="SelectLabel",oE=M.forwardRef((n,t)=>{const{__scopeSelect:r,...i}=n,o=Qq(aE,r);return e.jsx(Cn.div,{id:o.id,...i,ref:t})});oE.displayName=aE;var xb="SelectItem",[tV,lE]=Sy(xb),cE=M.forwardRef((n,t)=>{const{__scopeSelect:r,value:i,disabled:o=!1,textValue:l,...a}=n,p=Lm(xb,r),g=Mm(xb,r),w=p.value===i,[j,S]=M.useState(l??""),[T,E]=M.useState(!1),O=Wn(t,G=>{var z;return(z=g.itemRefCallback)==null?void 0:z.call(g,G,i,o)}),R=Dh(),F=M.useRef("touch"),B=()=>{o||(p.onValueChange(i),p.onOpenChange(!1))};if(i==="")throw new Error("A <Select.Item /> must have a value prop that is not an empty string. This is because the Select value can be set to an empty string to clear the selection and show the placeholder.");return e.jsx(tV,{scope:r,value:i,disabled:o,textId:R,isSelected:w,onItemTextChange:M.useCallback(G=>{S(z=>z||((G==null?void 0:G.textContent)??"").trim())},[]),children:e.jsx(a_.ItemSlot,{scope:r,value:i,disabled:o,textValue:j,children:e.jsx(Cn.div,{role:"option","aria-labelledby":R,"data-highlighted":T?"":void 0,"aria-selected":w&&T,"data-state":w?"checked":"unchecked","aria-disabled":o||void 0,"data-disabled":o?"":void 0,tabIndex:o?void 0:-1,...a,ref:O,onFocus:Dr(a.onFocus,()=>E(!0)),onBlur:Dr(a.onBlur,()=>E(!1)),onClick:Dr(a.onClick,()=>{F.current!=="mouse"&&B()}),onPointerUp:Dr(a.onPointerUp,()=>{F.current==="mouse"&&B()}),onPointerDown:Dr(a.onPointerDown,G=>{F.current=G.pointerType}),onPointerMove:Dr(a.onPointerMove,G=>{var z;F.current=G.pointerType,o?(z=g.onItemLeave)==null||z.call(g):F.current==="mouse"&&G.currentTarget.focus({preventScroll:!0})}),onPointerLeave:Dr(a.onPointerLeave,G=>{var z;G.currentTarget===document.activeElement&&((z=g.onItemLeave)==null||z.call(g))}),onKeyDown:Dr(a.onKeyDown,G=>{var ee;((ee=g.searchRef)==null?void 0:ee.current)!==""&&G.key===" "||(Bq.includes(G.key)&&B(),G.key===" "&&G.preventDefault())})})})})});cE.displayName=xb;var Nx="SelectItemText",uE=M.forwardRef((n,t)=>{const{__scopeSelect:r,className:i,style:o,...l}=n,a=Lm(Nx,r),p=Mm(Nx,r),g=lE(Nx,r),w=$q(Nx,r),[j,S]=M.useState(null),T=Wn(t,B=>S(B),g.onItemTextChange,B=>{var G;return(G=p.itemTextRefCallback)==null?void 0:G.call(p,B,g.value,g.disabled)}),E=j==null?void 0:j.textContent,O=M.useMemo(()=>e.jsx("option",{value:g.value,disabled:g.disabled,children:E},g.value),[g.disabled,g.value,E]),{onNativeOptionAdd:R,onNativeOptionRemove:F}=w;return xl(()=>(R(O),()=>F(O)),[R,F,O]),e.jsxs(e.Fragment,{children:[e.jsx(Cn.span,{id:g.textId,...l,ref:T}),g.isSelected&&a.valueNode&&!a.valueNodeHasChildren?dy.createPortal(l.children,a.valueNode):null]})});uE.displayName=Nx;var dE="SelectItemIndicator",hE=M.forwardRef((n,t)=>{const{__scopeSelect:r,...i}=n;return lE(dE,r).isSelected?e.jsx(Cn.span,{"aria-hidden":!0,...i,ref:t}):null});hE.displayName=dE;var iw="SelectScrollUpButton",fE=M.forwardRef((n,t)=>{const r=Mm(iw,n.__scopeSelect),i=Uj(iw,n.__scopeSelect),[o,l]=M.useState(!1),a=Wn(t,i.onScrollButtonChange);return xl(()=>{if(r.viewport&&r.isPositioned){let p=function(){const w=g.scrollTop>0;l(w)};const g=r.viewport;return p(),g.addEventListener("scroll",p),()=>g.removeEventListener("scroll",p)}},[r.viewport,r.isPositioned]),o?e.jsx(mE,{...n,ref:a,onAutoScroll:()=>{const{viewport:p,selectedItem:g}=r;p&&g&&(p.scrollTop=p.scrollTop-g.offsetHeight)}}):null});fE.displayName=iw;var sw="SelectScrollDownButton",pE=M.forwardRef((n,t)=>{const r=Mm(sw,n.__scopeSelect),i=Uj(sw,n.__scopeSelect),[o,l]=M.useState(!1),a=Wn(t,i.onScrollButtonChange);return xl(()=>{if(r.viewport&&r.isPositioned){let p=function(){const w=g.scrollHeight-g.clientHeight,j=Math.ceil(g.scrollTop)<w;l(j)};const g=r.viewport;return p(),g.addEventListener("scroll",p),()=>g.removeEventListener("scroll",p)}},[r.viewport,r.isPositioned]),o?e.jsx(mE,{...n,ref:a,onAutoScroll:()=>{const{viewport:p,selectedItem:g}=r;p&&g&&(p.scrollTop=p.scrollTop+g.offsetHeight)}}):null});pE.displayName=sw;var mE=M.forwardRef((n,t)=>{const{__scopeSelect:r,onAutoScroll:i,...o}=n,l=Mm("SelectScrollButton",r),a=M.useRef(null),p=o_(r),g=M.useCallback(()=>{a.current!==null&&(window.clearInterval(a.current),a.current=null)},[]);return M.useEffect(()=>()=>g(),[g]),xl(()=>{var j;const w=p().find(S=>S.ref.current===document.activeElement);(j=w==null?void 0:w.ref.current)==null||j.scrollIntoView({block:"nearest"})},[p]),e.jsx(Cn.div,{"aria-hidden":!0,...o,ref:t,style:{flexShrink:0,...o.style},onPointerDown:Dr(o.onPointerDown,()=>{a.current===null&&(a.current=window.setInterval(i,50))}),onPointerMove:Dr(o.onPointerMove,()=>{var w;(w=l.onItemLeave)==null||w.call(l),a.current===null&&(a.current=window.setInterval(i,50))}),onPointerLeave:Dr(o.onPointerLeave,()=>{g()})})}),rV="SelectSeparator",gE=M.forwardRef((n,t)=>{const{__scopeSelect:r,...i}=n;return e.jsx(Cn.div,{"aria-hidden":!0,...i,ref:t})});gE.displayName=rV;var aw="SelectArrow",nV=M.forwardRef((n,t)=>{const{__scopeSelect:r,...i}=n,o=l_(r),l=Lm(aw,r),a=Mm(aw,r);return l.open&&a.position==="popper"?e.jsx(_j,{...o,...i,ref:t}):null});nV.displayName=aw;var iV="SelectBubbleInput",vE=M.forwardRef(({__scopeSelect:n,value:t,...r},i)=>{const o=M.useRef(null),l=Wn(i,o),a=s_(t);return M.useEffect(()=>{const p=o.current;if(!p)return;const g=window.HTMLSelectElement.prototype,j=Object.getOwnPropertyDescriptor(g,"value").set;if(a!==t&&j){const S=new Event("change",{bubbles:!0});j.call(p,t),p.dispatchEvent(S)}},[a,t]),e.jsx(Cn.select,{...r,style:{...Gk,...r.style},ref:l,defaultValue:t})});vE.displayName=iV;function yE(n){return n===""||n===void 0}function xE(n){const t=ic(n),r=M.useRef(""),i=M.useRef(0),o=M.useCallback(a=>{const p=r.current+a;t(p),(function g(w){r.current=w,window.clearTimeout(i.current),w!==""&&(i.current=window.setTimeout(()=>g(""),1e3))})(p)},[t]),l=M.useCallback(()=>{r.current="",window.clearTimeout(i.current)},[]);return M.useEffect(()=>()=>window.clearTimeout(i.current),[]),[r,o,l]}function bE(n,t,r){const o=t.length>1&&Array.from(t).every(w=>w===t[0])?t[0]:t,l=r?n.indexOf(r):-1;let a=sV(n,Math.max(l,0));o.length===1&&(a=a.filter(w=>w!==r));const g=a.find(w=>w.textValue.toLowerCase().startsWith(o.toLowerCase()));return g!==r?g:void 0}function sV(n,t){return n.map((r,i)=>n[(t+i)%n.length])}var aV=Wk,_E=Zk,oV=Xk,lV=Jk,cV=Qk,wE=eE,uV=iE,jE=oE,NE=cE,dV=uE,hV=hE,SE=fE,AE=pE,CE=gE;const ys=aV,xs=oV,as=M.forwardRef(({className:n,children:t,...r},i)=>e.jsxs(_E,{ref:i,className:er("flex h-9 w-full items-center justify-between whitespace-nowrap rounded-md border border-input bg-transparent px-3 py-2 text-sm shadow-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-1 focus:ring-ring disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1",n),...r,children:[t,e.jsx(lV,{asChild:!0,children:e.jsx(tb,{className:"h-4 w-4 opacity-50"})})]}));as.displayName=_E.displayName;const kE=M.forwardRef(({className:n,...t},r)=>e.jsx(SE,{ref:r,className:er("flex cursor-default items-center justify-center py-1",n),...t,children:e.jsx(LD,{className:"h-4 w-4"})}));kE.displayName=SE.displayName;const EE=M.forwardRef(({className:n,...t},r)=>e.jsx(AE,{ref:r,className:er("flex cursor-default items-center justify-center py-1",n),...t,children:e.jsx(tb,{className:"h-4 w-4"})}));EE.displayName=AE.displayName;const os=M.forwardRef(({className:n,children:t,position:r="popper",...i},o)=>e.jsx(cV,{children:e.jsxs(wE,{ref:o,className:er("relative z-50 max-h-96 min-w-[8rem] overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r==="popper"&&"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1",n),position:r,...i,children:[e.jsx(kE,{}),e.jsx(uV,{className:er("p-1",r==="popper"&&"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]"),children:t}),e.jsx(EE,{})]})}));os.displayName=wE.displayName;const fV=M.forwardRef(({className:n,...t},r)=>e.jsx(jE,{ref:r,className:er("px-2 py-1.5 text-sm font-semibold",n),...t}));fV.displayName=jE.displayName;const pr=M.forwardRef(({className:n,children:t,...r},i)=>e.jsxs(NE,{ref:i,className:er("relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-2 pr-8 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50",n),...r,children:[e.jsx("span",{className:"absolute right-2 flex h-3.5 w-3.5 items-center justify-center",children:e.jsx(hV,{children:e.jsx(Rm,{className:"h-4 w-4"})})}),e.jsx(dV,{children:t})]}));pr.displayName=NE.displayName;const pV=M.forwardRef(({className:n,...t},r)=>e.jsx(CE,{ref:r,className:er("-mx-1 my-1 h-px bg-muted",n),...t}));pV.displayName=CE.displayName;var TE=["PageUp","PageDown"],PE=["ArrowUp","ArrowDown","ArrowLeft","ArrowRight"],RE={"from-left":["Home","PageDown","ArrowDown","ArrowLeft"],"from-right":["Home","PageDown","ArrowDown","ArrowRight"],"from-bottom":["Home","PageDown","ArrowDown","ArrowLeft"],"from-top":["Home","PageDown","ArrowUp","ArrowLeft"]},Ay="Slider",[ow,mV,gV]=Ub(Ay),[IE]=Du(Ay,[gV]),[vV,c_]=IE(Ay),LE=M.forwardRef((n,t)=>{const{name:r,min:i=0,max:o=100,step:l=1,orientation:a="horizontal",disabled:p=!1,minStepsBetweenThumbs:g=0,defaultValue:w=[i],value:j,onValueChange:S=()=>{},onValueCommit:T=()=>{},inverted:E=!1,form:O,...R}=n,F=M.useRef(new Set),B=M.useRef(0),z=a==="horizontal"?yV:xV,[ee=[],ie]=bf({prop:j,defaultProp:w,onChange:re=>{var fe;(fe=[...F.current][B.current])==null||fe.focus(),S(re)}}),ge=M.useRef(ee);function K(re){const ce=NV(ee,re);_e(re,ce)}function J(re){_e(re,B.current)}function Se(){const re=ge.current[B.current];ee[B.current]!==re&&T(ee)}function _e(re,ce,{commit:fe}={commit:!1}){const ye=kV(l),Fe=EV(Math.round((re-i)/l)*l+i,ye),Q=Vx(Fe,[i,o]);ie((pe=[])=>{const me=wV(pe,Q,ce);if(CV(me,g*l)){B.current=me.indexOf(Q);const Ue=String(me)!==String(pe);return Ue&&fe&&T(me),Ue?me:pe}else return pe})}return e.jsx(vV,{scope:n.__scopeSlider,name:r,disabled:p,min:i,max:o,valueIndexToChangeRef:B,thumbs:F.current,values:ee,orientation:a,form:O,children:e.jsx(ow.Provider,{scope:n.__scopeSlider,children:e.jsx(ow.Slot,{scope:n.__scopeSlider,children:e.jsx(z,{"aria-disabled":p,"data-disabled":p?"":void 0,...R,ref:t,onPointerDown:Dr(R.onPointerDown,()=>{p||(ge.current=ee)}),min:i,max:o,inverted:E,onSlideStart:p?void 0:K,onSlideMove:p?void 0:J,onSlideEnd:p?void 0:Se,onHomeKeyDown:()=>!p&&_e(i,0,{commit:!0}),onEndKeyDown:()=>!p&&_e(o,ee.length-1,{commit:!0}),onStepKeyDown:({event:re,direction:ce})=>{if(!p){const Fe=TE.includes(re.key)||re.shiftKey&&PE.includes(re.key)?10:1,Q=B.current,pe=ee[Q],me=l*Fe*ce;_e(pe+me,Q,{commit:!0})}}})})})})});LE.displayName=Ay;var[ME,DE]=IE(Ay,{startEdge:"left",endEdge:"right",size:"width",direction:1}),yV=M.forwardRef((n,t)=>{const{min:r,max:i,dir:o,inverted:l,onSlideStart:a,onSlideMove:p,onSlideEnd:g,onStepKeyDown:w,...j}=n,[S,T]=M.useState(null),E=Wn(t,z=>T(z)),O=M.useRef(void 0),R=_y(o),F=R==="ltr",B=F&&!l||!F&&l;function G(z){const ee=O.current||S.getBoundingClientRect(),ie=[0,ee.width],K=qj(ie,B?[r,i]:[i,r]);return O.current=ee,K(z-ee.left)}return e.jsx(ME,{scope:n.__scopeSlider,startEdge:B?"left":"right",endEdge:B?"right":"left",direction:B?1:-1,size:"width",children:e.jsx(OE,{dir:R,"data-orientation":"horizontal",...j,ref:E,style:{...j.style,"--radix-slider-thumb-transform":"translateX(-50%)"},onSlideStart:z=>{const ee=G(z.clientX);a==null||a(ee)},onSlideMove:z=>{const ee=G(z.clientX);p==null||p(ee)},onSlideEnd:()=>{O.current=void 0,g==null||g()},onStepKeyDown:z=>{const ie=RE[B?"from-left":"from-right"].includes(z.key);w==null||w({event:z,direction:ie?-1:1})}})})}),xV=M.forwardRef((n,t)=>{const{min:r,max:i,inverted:o,onSlideStart:l,onSlideMove:a,onSlideEnd:p,onStepKeyDown:g,...w}=n,j=M.useRef(null),S=Wn(t,j),T=M.useRef(void 0),E=!o;function O(R){const F=T.current||j.current.getBoundingClientRect(),B=[0,F.height],z=qj(B,E?[i,r]:[r,i]);return T.current=F,z(R-F.top)}return e.jsx(ME,{scope:n.__scopeSlider,startEdge:E?"bottom":"top",endEdge:E?"top":"bottom",size:"height",direction:E?1:-1,children:e.jsx(OE,{"data-orientation":"vertical",...w,ref:S,style:{...w.style,"--radix-slider-thumb-transform":"translateY(50%)"},onSlideStart:R=>{const F=O(R.clientY);l==null||l(F)},onSlideMove:R=>{const F=O(R.clientY);a==null||a(F)},onSlideEnd:()=>{T.current=void 0,p==null||p()},onStepKeyDown:R=>{const B=RE[E?"from-bottom":"from-top"].includes(R.key);g==null||g({event:R,direction:B?-1:1})}})})}),OE=M.forwardRef((n,t)=>{const{__scopeSlider:r,onSlideStart:i,onSlideMove:o,onSlideEnd:l,onHomeKeyDown:a,onEndKeyDown:p,onStepKeyDown:g,...w}=n,j=c_(Ay,r);return e.jsx(Cn.span,{...w,ref:t,onKeyDown:Dr(n.onKeyDown,S=>{S.key==="Home"?(a(S),S.preventDefault()):S.key==="End"?(p(S),S.preventDefault()):TE.concat(PE).includes(S.key)&&(g(S),S.preventDefault())}),onPointerDown:Dr(n.onPointerDown,S=>{const T=S.target;T.setPointerCapture(S.pointerId),S.preventDefault(),j.thumbs.has(T)?T.focus():i(S)}),onPointerMove:Dr(n.onPointerMove,S=>{S.target.hasPointerCapture(S.pointerId)&&o(S)}),onPointerUp:Dr(n.onPointerUp,S=>{const T=S.target;T.hasPointerCapture(S.pointerId)&&(T.releasePointerCapture(S.pointerId),l(S))})})}),zE="SliderTrack",FE=M.forwardRef((n,t)=>{const{__scopeSlider:r,...i}=n,o=c_(zE,r);return e.jsx(Cn.span,{"data-disabled":o.disabled?"":void 0,"data-orientation":o.orientation,...i,ref:t})});FE.displayName=zE;var lw="SliderRange",BE=M.forwardRef((n,t)=>{const{__scopeSlider:r,...i}=n,o=c_(lw,r),l=DE(lw,r),a=M.useRef(null),p=Wn(t,a),g=o.values.length,w=o.values.map(T=>VE(T,o.min,o.max)),j=g>1?Math.min(...w):0,S=100-Math.max(...w);return e.jsx(Cn.span,{"data-orientation":o.orientation,"data-disabled":o.disabled?"":void 0,...i,ref:p,style:{...n.style,[l.startEdge]:j+"%",[l.endEdge]:S+"%"}})});BE.displayName=lw;var cw="SliderThumb",UE=M.forwardRef((n,t)=>{const r=mV(n.__scopeSlider),[i,o]=M.useState(null),l=Wn(t,p=>o(p)),a=M.useMemo(()=>i?r().findIndex(p=>p.ref.current===i):-1,[r,i]);return e.jsx(bV,{...n,ref:l,index:a})}),bV=M.forwardRef((n,t)=>{const{__scopeSlider:r,index:i,name:o,...l}=n,a=c_(cw,r),p=DE(cw,r),[g,w]=M.useState(null),j=Wn(t,G=>w(G)),S=g?a.form||!!g.closest("form"):!0,T=Wb(g),E=a.values[i],O=E===void 0?0:VE(E,a.min,a.max),R=jV(i,a.values.length),F=T==null?void 0:T[p.size],B=F?SV(F,O,p.direction):0;return M.useEffect(()=>{if(g)return a.thumbs.add(g),()=>{a.thumbs.delete(g)}},[g,a.thumbs]),e.jsxs("span",{style:{transform:"var(--radix-slider-thumb-transform)",position:"absolute",[p.startEdge]:`calc(${O}% + ${B}px)`},children:[e.jsx(ow.ItemSlot,{scope:n.__scopeSlider,children:e.jsx(Cn.span,{role:"slider","aria-label":n["aria-label"]||R,"aria-valuemin":a.min,"aria-valuenow":E,"aria-valuemax":a.max,"aria-orientation":a.orientation,"data-orientation":a.orientation,"data-disabled":a.disabled?"":void 0,tabIndex:a.disabled?void 0:0,...l,ref:j,style:E===void 0?{display:"none"}:n.style,onFocus:Dr(n.onFocus,()=>{a.valueIndexToChangeRef.current=i})})}),S&&e.jsx(qE,{name:o??(a.name?a.name+(a.values.length>1?"[]":""):void 0),form:a.form,value:E},i)]})});UE.displayName=cw;var _V="RadioBubbleInput",qE=M.forwardRef(({__scopeSlider:n,value:t,...r},i)=>{const o=M.useRef(null),l=Wn(o,i),a=s_(t);return M.useEffect(()=>{const p=o.current;if(!p)return;const g=window.HTMLInputElement.prototype,j=Object.getOwnPropertyDescriptor(g,"value").set;if(a!==t&&j){const S=new Event("input",{bubbles:!0});j.call(p,t),p.dispatchEvent(S)}},[a,t]),e.jsx(Cn.input,{style:{display:"none"},...r,ref:l,defaultValue:t})});qE.displayName=_V;function wV(n=[],t,r){const i=[...n];return i[r]=t,i.sort((o,l)=>o-l)}function VE(n,t,r){const l=100/(r-t)*(n-t);return Vx(l,[0,100])}function jV(n,t){return t>2?`Value ${n+1} of ${t}`:t===2?["Minimum","Maximum"][n]:void 0}function NV(n,t){if(n.length===1)return 0;const r=n.map(o=>Math.abs(o-t)),i=Math.min(...r);return r.indexOf(i)}function SV(n,t,r){const i=n/2,l=qj([0,50],[0,i]);return(i-l(t)*r)*r}function AV(n){return n.slice(0,-1).map((t,r)=>n[r+1]-t)}function CV(n,t){if(t>0){const r=AV(n);return Math.min(...r)>=t}return!0}function qj(n,t){return r=>{if(n[0]===n[1]||t[0]===t[1])return t[0];const i=(t[1]-t[0])/(n[1]-n[0]);return t[0]+i*(r-n[0])}}function kV(n){return(String(n).split(".")[1]||"").length}function EV(n,t){const r=Math.pow(10,t);return Math.round(n*r)/r}var $E=LE,TV=FE,PV=BE,RV=UE;const $v=M.forwardRef(({className:n,...t},r)=>e.jsxs($E,{ref:r,className:er("relative flex w-full touch-none select-none items-center",n),...t,children:[e.jsx(TV,{className:"relative h-1.5 w-full grow overflow-hidden rounded-full bg-primary/20",children:e.jsx(PV,{className:"absolute h-full bg-primary"})}),e.jsx(RV,{className:"block h-4 w-4 rounded-full border border-primary/50 bg-background shadow transition-colors focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50"})]}));$v.displayName=$E.displayName;function IV(n){const t=LV(n),r=M.forwardRef((i,o)=>{const{children:l,...a}=i,p=M.Children.toArray(l),g=p.find(DV);if(g){const w=g.props.children,j=p.map(S=>S===g?M.Children.count(w)>1?M.Children.only(null):M.isValidElement(w)?w.props.children:null:S);return e.jsx(t,{...a,ref:o,children:M.isValidElement(w)?M.cloneElement(w,void 0,j):null})}return e.jsx(t,{...a,ref:o,children:l})});return r.displayName=`${n}.Slot`,r}function LV(n){const t=M.forwardRef((r,i)=>{const{children:o,...l}=r;if(M.isValidElement(o)){const a=zV(o),p=OV(l,o.props);return o.type!==M.Fragment&&(p.ref=i?wf(i,a):a),M.cloneElement(o,p)}return M.Children.count(o)>1?M.Children.only(null):null});return t.displayName=`${n}.SlotClone`,t}var MV=Symbol("radix.slottable");function DV(n){return M.isValidElement(n)&&typeof n.type=="function"&&"__radixId"in n.type&&n.type.__radixId===MV}function OV(n,t){const r={...t};for(const i in t){const o=n[i],l=t[i];/^on[A-Z]/.test(i)?o&&l?r[i]=(...p)=>{const g=l(...p);return o(...p),g}:o&&(r[i]=o):i==="style"?r[i]={...o,...l}:i==="className"&&(r[i]=[o,l].filter(Boolean).join(" "))}return{...n,...r}}function zV(n){var i,o;let t=(i=Object.getOwnPropertyDescriptor(n.props,"ref"))==null?void 0:i.get,r=t&&"isReactWarning"in t&&t.isReactWarning;return r?n.ref:(t=(o=Object.getOwnPropertyDescriptor(n,"ref"))==null?void 0:o.get,r=t&&"isReactWarning"in t&&t.isReactWarning,r?n.props.ref:n.props.ref||n.ref)}var u_="Popover",[HE]=Du(u_,[Ny]),g0=Ny(),[FV,Dm]=HE(u_),GE=n=>{const{__scopePopover:t,children:r,open:i,defaultOpen:o,onOpenChange:l,modal:a=!1}=n,p=g0(t),g=M.useRef(null),[w,j]=M.useState(!1),[S,T]=bf({prop:i,defaultProp:o??!1,onChange:l,caller:u_});return e.jsx(xj,{...p,children:e.jsx(FV,{scope:t,contentId:Dh(),triggerRef:g,open:S,onOpenChange:T,onOpenToggle:M.useCallback(()=>T(E=>!E),[T]),hasCustomAnchor:w,onCustomAnchorAdd:M.useCallback(()=>j(!0),[]),onCustomAnchorRemove:M.useCallback(()=>j(!1),[]),modal:a,children:r})})};GE.displayName=u_;var WE="PopoverAnchor",BV=M.forwardRef((n,t)=>{const{__scopePopover:r,...i}=n,o=Dm(WE,r),l=g0(r),{onCustomAnchorAdd:a,onCustomAnchorRemove:p}=o;return M.useEffect(()=>(a(),()=>p()),[a,p]),e.jsx(Yb,{...l,...i,ref:t})});BV.displayName=WE;var YE="PopoverTrigger",ZE=M.forwardRef((n,t)=>{const{__scopePopover:r,...i}=n,o=Dm(YE,r),l=g0(r),a=Wn(t,o.triggerRef),p=e.jsx(Cn.button,{type:"button","aria-haspopup":"dialog","aria-expanded":o.open,"aria-controls":o.contentId,"data-state":eT(o.open),...i,ref:a,onClick:Dr(n.onClick,o.onOpenToggle)});return o.hasCustomAnchor?p:e.jsx(Yb,{asChild:!0,...l,children:p})});ZE.displayName=YE;var Vj="PopoverPortal",[UV,qV]=HE(Vj,{forceMount:void 0}),KE=n=>{const{__scopePopover:t,forceMount:r,children:i,container:o}=n,l=Dm(Vj,t);return e.jsx(UV,{scope:t,forceMount:r,children:e.jsx(Jc,{present:r||l.open,children:e.jsx(a0,{asChild:!0,container:o,children:i})})})};KE.displayName=Vj;var sy="PopoverContent",XE=M.forwardRef((n,t)=>{const r=qV(sy,n.__scopePopover),{forceMount:i=r.forceMount,...o}=n,l=Dm(sy,n.__scopePopover);return e.jsx(Jc,{present:i||l.open,children:l.modal?e.jsx($V,{...o,ref:t}):e.jsx(HV,{...o,ref:t})})});XE.displayName=sy;var VV=IV("PopoverContent.RemoveScroll"),$V=M.forwardRef((n,t)=>{const r=Dm(sy,n.__scopePopover),i=M.useRef(null),o=Wn(t,i),l=M.useRef(!1);return M.useEffect(()=>{const a=i.current;if(a)return Kb(a)},[]),e.jsx(l0,{as:VV,allowPinchZoom:!0,children:e.jsx(JE,{...n,ref:o,trapFocus:r.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Dr(n.onCloseAutoFocus,a=>{var p;a.preventDefault(),l.current||(p=r.triggerRef.current)==null||p.focus()}),onPointerDownOutside:Dr(n.onPointerDownOutside,a=>{const p=a.detail.originalEvent,g=p.button===0&&p.ctrlKey===!0,w=p.button===2||g;l.current=w},{checkForDefaultPrevented:!1}),onFocusOutside:Dr(n.onFocusOutside,a=>a.preventDefault(),{checkForDefaultPrevented:!1})})})}),HV=M.forwardRef((n,t)=>{const r=Dm(sy,n.__scopePopover),i=M.useRef(!1),o=M.useRef(!1);return e.jsx(JE,{...n,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:l=>{var a,p;(a=n.onCloseAutoFocus)==null||a.call(n,l),l.defaultPrevented||(i.current||(p=r.triggerRef.current)==null||p.focus(),l.preventDefault()),i.current=!1,o.current=!1},onInteractOutside:l=>{var g,w;(g=n.onInteractOutside)==null||g.call(n,l),l.defaultPrevented||(i.current=!0,l.detail.originalEvent.type==="pointerdown"&&(o.current=!0));const a=l.target;((w=r.triggerRef.current)==null?void 0:w.contains(a))&&l.preventDefault(),l.detail.originalEvent.type==="focusin"&&o.current&&l.preventDefault()}})}),JE=M.forwardRef((n,t)=>{const{__scopePopover:r,trapFocus:i,onOpenAutoFocus:o,onCloseAutoFocus:l,disableOutsidePointerEvents:a,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:w,onInteractOutside:j,...S}=n,T=Dm(sy,r),E=g0(r);return qb(),e.jsx(i0,{asChild:!0,loop:!0,trapped:i,onMountAutoFocus:o,onUnmountAutoFocus:l,children:e.jsx(n0,{asChild:!0,disableOutsidePointerEvents:a,onInteractOutside:j,onEscapeKeyDown:p,onPointerDownOutside:g,onFocusOutside:w,onDismiss:()=>T.onOpenChange(!1),children:e.jsx(bj,{"data-state":eT(T.open),role:"dialog",id:T.contentId,...E,...S,ref:t,style:{...S.style,"--radix-popover-content-transform-origin":"var(--radix-popper-transform-origin)","--radix-popover-content-available-width":"var(--radix-popper-available-width)","--radix-popover-content-available-height":"var(--radix-popper-available-height)","--radix-popover-trigger-width":"var(--radix-popper-anchor-width)","--radix-popover-trigger-height":"var(--radix-popper-anchor-height)"}})})})}),QE="PopoverClose",GV=M.forwardRef((n,t)=>{const{__scopePopover:r,...i}=n,o=Dm(QE,r);return e.jsx(Cn.button,{type:"button",...i,ref:t,onClick:Dr(n.onClick,()=>o.onOpenChange(!1))})});GV.displayName=QE;var WV="PopoverArrow",YV=M.forwardRef((n,t)=>{const{__scopePopover:r,...i}=n,o=g0(r);return e.jsx(_j,{...o,...i,ref:t})});YV.displayName=WV;function eT(n){return n?"open":"closed"}var ZV=GE,KV=ZE,XV=KE,tT=XE;const JV=ZV,QV=KV,rT=M.forwardRef(({className:n,align:t="center",sideOffset:r=4,...i},o)=>e.jsx(XV,{children:e.jsx(tT,{ref:o,align:t,sideOffset:r,className:er("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",n),...i})}));rT.displayName=tT.displayName;const bS=["All Industries","Food & Beverage","Technology","Health & Fitness","Retail","Education","Agriculture","Manufacturing","Services"],e$=["All Locations","Mumbai","Delhi","Bangalore","Pune","Chennai","Hyderabad","Kolkata","Ahmedabad"],t$=["All Types","Private Limited","Partnership","Sole Proprietorship","LLP","Franchise"],f2={business:[{icon:"",text:"Restaurant Mumbai",query:"restaurant in Mumbai"},{icon:"",text:"Caf under 25L",query:"caf under 25L"},{icon:"",text:"Tech Business",query:"tech business Bangalore"},{icon:"",text:"Manufacturing",query:"manufacturing business"},{icon:"",text:"Retail Store",query:"retail store"}],franchise:[{icon:"",text:"Food Franchise",query:"food franchise under 20L"},{icon:"",text:"Education",query:"education franchise"},{icon:"",text:"Fitness",query:"fitness franchise"},{icon:"",text:"Retail Franchise",query:"retail franchise under 15L"},{icon:"",text:"Convenience Store",query:"convenience store franchise"}]},r$={business:[{label:"Under 10L",priceRange:[0,1e6]},{label:"10L - 50L",priceRange:[1e6,5e6]},{label:"50L - 1Cr",priceRange:[5e6,1e7]}],franchise:[{label:"Under 5L",priceRange:[0,5e5]},{label:"5L - 20L",priceRange:[5e5,2e6]},{label:"20L+",priceRange:[2e6,1e7]}]};function $j({onSearch:n,onSearchTypeChange:t,className:r}){const[i,o]=M.useState("business"),[l,a]=M.useState(""),[p,g]=M.useState(!1),[w,j]=M.useState(!1),[S,T]=M.useState({industry:"All Industries",location:"All Locations",priceRange:[0,1e7],businessType:"All Types",employees:"Any",established:"Any"}),[E,O]=M.useState(!1),R=()=>{n==null||n(l,i,S)},F=()=>{if("webkitSpeechRecognition"in window||"SpeechRecognition"in window){const z=window.webkitSpeechRecognition||window.SpeechRecognition,ee=new z;ee.continuous=!1,ee.interimResults=!1,ee.lang="en-IN",ee.onstart=()=>{O(!0)},ee.onresult=ie=>{const ge=ie.results[0][0].transcript;a(ge),O(!1)},ee.onerror=()=>{O(!1),alert("Voice recognition error. Please try again.")},ee.onend=()=>{O(!1)},ee.start()}else alert("Voice recognition not supported in this browser.")},B=(z,ee)=>{T(ie=>({...ie,[z]:ee}))},G=z=>z>=1e7?"1Cr+":z>=1e6?`${(z/1e6).toFixed(1)}Cr`:z>=1e5?`${(z/1e5).toFixed(1)}L`:`${z.toLocaleString()}`;return e.jsxs("div",{className:`w-full max-w-4xl mx-auto space-y-6 ${r}`,children:[e.jsx("div",{className:"flex items-center justify-center",children:e.jsxs("div",{className:"flex bg-muted rounded-xl p-1.5 w-full max-w-lg shadow-sm",children:[e.jsxs(ze,{variant:i==="business"?"default":"ghost",size:"lg",onClick:()=>{o("business"),t==null||t("business")},className:"flex items-center gap-3 relative flex-1 h-12 text-sm font-medium",children:[e.jsx("div",{className:`p-2 rounded-full ${i==="business"?"bg-white/20":"bg-muted-foreground/10"}`,children:e.jsx($o,{className:"h-5 w-5"})}),e.jsx("span",{className:"hidden sm:inline",children:"Businesses for Sale"}),e.jsx("span",{className:"sm:hidden",children:"Business"})]}),e.jsxs(ze,{variant:i==="franchise"?"default":"ghost",size:"lg",onClick:()=>{o("franchise"),t==null||t("franchise")},className:"flex items-center gap-3 relative flex-1 h-12 text-sm font-medium",children:[e.jsx("div",{className:`p-2 rounded-full ${i==="franchise"?"bg-white/20":"bg-muted-foreground/10"}`,children:e.jsx(gm,{className:"h-5 w-5"})}),e.jsx("span",{className:"hidden sm:inline",children:"Franchise Opportunities"}),e.jsx("span",{className:"sm:hidden",children:"Franchise"})]})]})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 items-center",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(md,{className:"absolute left-4 top-1/2 transform -translate-y-1/2 text-muted-foreground h-5 w-5"}),e.jsx(Wt,{placeholder:i==="business"?" Search for restaurants, retail stores, tech startups...":" Search for food, education, fitness franchises...",value:l,onChange:z=>{a(z.target.value),j(z.target.value.length>0)},onFocus:()=>l.length===0&&j(!0),onBlur:()=>setTimeout(()=>j(!1),200),className:"pl-12 pr-12 h-14 text-base shadow-lg border-2 focus:border-primary transition-all duration-200 rounded-xl font-medium",onKeyPress:z=>{z.key==="Enter"&&(R(),j(!1))}}),w&&e.jsx("div",{className:"absolute top-full mt-2 left-0 right-0 bg-white rounded-xl shadow-2xl border-2 border-muted z-50 max-h-96 overflow-y-auto",children:l.length===0?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-3",children:" Popular Searches"}),e.jsx("div",{className:"space-y-1",children:f2[i].map((z,ee)=>e.jsxs("button",{onClick:()=>{a(z.query),j(!1)},className:"w-full text-left px-3 py-2.5 hover:bg-primary/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx("span",{className:"text-xl",children:z.icon}),e.jsx("span",{className:"font-medium group-hover:text-primary",children:z.text})]},ee))})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-3",children:" Quick Price Filters"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:r$[i].map((z,ee)=>e.jsx("button",{onClick:()=>{B("priceRange",z.priceRange),j(!1)},className:"px-4 py-2 bg-muted hover:bg-primary hover:text-white rounded-full text-sm font-medium transition-colors",children:z.label},ee))})]})]}):e.jsx(e.Fragment,{children:e.jsxs("div",{className:"p-4",children:[e.jsx("div",{className:"text-xs font-semibold text-muted-foreground uppercase tracking-wide mb-3",children:" Suggestions"}),e.jsxs("div",{className:"space-y-1",children:[f2[i].filter(z=>z.query.toLowerCase().includes(l.toLowerCase())).map((z,ee)=>e.jsxs("button",{onClick:()=>{a(z.query),j(!1)},className:"w-full text-left px-3 py-2.5 hover:bg-primary/10 rounded-lg transition-colors flex items-center gap-3 group",children:[e.jsx(md,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"font-medium group-hover:text-primary",children:z.query})]},ee)),f2[i].filter(z=>z.query.toLowerCase().includes(l.toLowerCase())).length===0&&e.jsxs("div",{className:"px-3 py-4 text-center text-muted-foreground text-sm",children:['Press Enter to search for "',l,'"']})]})]})})}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",onClick:F,className:`absolute right-2 top-1/2 transform -translate-y-1/2 h-10 w-10 p-0 rounded-full ${E?"text-red-500 animate-pulse bg-red-50":"text-muted-foreground hover:text-primary hover:bg-primary/10"}`,children:E?e.jsx(GO,{className:"h-5 w-5"}):e.jsx(YO,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"flex gap-3 flex-shrink-0",children:[e.jsxs(JV,{open:p,onOpenChange:g,children:[e.jsx(QV,{asChild:!0,children:e.jsxs(ze,{variant:"outline",size:"lg",className:"flex items-center gap-2 h-12 shadow-sm border-2 hover:border-primary transition-all duration-200",children:[e.jsx(Qx,{className:"h-4 w-4"}),"Filters",(S.industry!=="All Industries"||S.location!=="All Locations"||S.priceRange[0]>0||S.priceRange[1]<1e7)&&e.jsx(Gt,{variant:"secondary",className:"ml-1",children:[S.industry!=="All Industries"?1:0,S.location!=="All Locations"?1:0,S.priceRange[0]>0||S.priceRange[1]<1e7?1:0].reduce((z,ee)=>z+ee,0)})]})}),e.jsx(rT,{className:"w-80",align:"end",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Industry"}),e.jsxs(ys,{value:S.industry,onValueChange:z=>B("industry",z),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsx(os,{children:bS.map(z=>e.jsx(pr,{value:z,children:z},z))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Location"}),e.jsxs(ys,{value:S.location,onValueChange:z=>B("location",z),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsx(os,{children:e$.map(z=>e.jsx(pr,{value:z,children:z},z))})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:i==="business"?"Price Range":"Investment Range"}),e.jsxs("div",{className:"px-2",children:[e.jsx($v,{value:S.priceRange,onValueChange:z=>B("priceRange",z),max:1e7,min:0,step:1e5,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-xs text-muted-foreground mt-1",children:[e.jsx("span",{children:G(S.priceRange[0])}),e.jsx("span",{children:G(S.priceRange[1])})]})]})]}),i==="business"&&e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium mb-2 block",children:"Business Type"}),e.jsxs(ys,{value:S.businessType,onValueChange:z=>B("businessType",z),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsx(os,{children:t$.map(z=>e.jsx(pr,{value:z,children:z},z))})]})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>{T({industry:"All Industries",location:"All Locations",priceRange:[0,1e7],businessType:"All Types",employees:"Any",established:"Any"})},className:"flex-1",children:"Clear"}),e.jsx(ze,{size:"sm",onClick:()=>{g(!1),R()},className:"flex-1",children:"Apply"})]})]})})]}),e.jsxs(ze,{onClick:()=>{R(),j(!1)},size:"lg",className:"px-10 h-14 shadow-lg bg-gradient-to-r from-blue-600 to-blue-700 hover:from-blue-700 hover:to-blue-800 transition-all duration-200 font-bold text-base rounded-xl",children:[e.jsx(md,{className:"h-5 w-5 mr-2"}),"Search"]})]})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-3 font-semibold",children:" Browse by Industry:"}),e.jsx("div",{className:"flex flex-wrap justify-center gap-2 max-w-3xl mx-auto",children:bS.slice(1,7).map(z=>e.jsx("button",{onClick:()=>{B("industry",z),R()},className:"text-sm px-4 py-2 bg-white hover:bg-primary hover:text-white rounded-full transition-all duration-200 font-medium border-2 border-muted hover:border-primary shadow-sm",children:z},z))})]}),(S.industry!=="All Industries"||S.location!=="All Locations"||S.priceRange[0]>0||S.priceRange[1]<1e7)&&e.jsxs("div",{className:"flex flex-wrap justify-center gap-2",children:[S.industry!=="All Industries"&&e.jsxs(Gt,{variant:"secondary",className:"flex items-center gap-1",children:[S.industry,e.jsx("button",{onClick:()=>B("industry","All Industries"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:""})]}),S.location!=="All Locations"&&e.jsxs(Gt,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(Ja,{className:"h-3 w-3"}),S.location,e.jsx("button",{onClick:()=>B("location","All Locations"),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:""})]}),(S.priceRange[0]>0||S.priceRange[1]<1e7)&&e.jsxs(Gt,{variant:"secondary",className:"flex items-center gap-1",children:[e.jsx(yf,{className:"h-3 w-3"}),G(S.priceRange[0])," -"," ",G(S.priceRange[1]),e.jsx("button",{onClick:()=>B("priceRange",[0,1e7]),className:"ml-1 hover:bg-muted-foreground/20 rounded-full p-0.5",children:""})]})]})]})}function n$({onSearch:n,className:t}){const[r,i]=M.useState("business"),o=(a,p,g)=>{i(p),n?n(a,p,g):console.log("Search submitted:",{query:a,type:p,filters:g})},l=[{label:"Buyers",value:"10,000+",icon:Go,emoji:""},{label:"Listings",value:"5,000+",icon:na,emoji:""},{label:"Success Rate",value:"95%",icon:pf,emoji:""},{label:"Deals Closed",value:"3,200+",icon:bs,emoji:""}];return e.jsxs("section",{className:`relative overflow-hidden ${t}`,children:[e.jsxs("div",{className:"absolute inset-0 bg-gradient-to-br from-blue-600 via-blue-700 to-indigo-800",children:[e.jsx("div",{className:"absolute inset-0 bg-black/20"}),e.jsx("div",{className:"absolute inset-0 opacity-10",children:e.jsx("div",{className:"w-full h-full",style:{backgroundImage:`url("data:image/svg+xml,%3Csvg width='60' height='60' viewBox='0 0 60 60' xmlns='http://www.w3.org/2000/svg'%3E%3Cg fill='none' fill-rule='evenodd'%3E%3Cg fill='%23ffffff' fill-opacity='0.5'%3E%3Ccircle cx='30' cy='30' r='2'/%3E%3C/g%3E%3C/g%3E%3C/svg%3E")`,backgroundRepeat:"repeat"}})})]}),e.jsx("div",{className:"relative z-10 container mx-auto px-4 py-16 lg:py-24",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsxs(Gt,{className:"mb-6 bg-white/10 text-white border-white/20 hover:bg-white/20",children:[e.jsx(bs,{className:"h-3 w-3 mr-1"}),"AI-Powered Business Discovery Platform"]}),e.jsxs("h1",{className:"text-4xl md:text-5xl lg:text-6xl font-bold text-white mb-6 leading-tight",children:["Find Your Perfect",e.jsx("span",{className:"block bg-gradient-to-r from-yellow-400 to-orange-400 bg-clip-text text-transparent",children:"Business Opportunity"})]}),e.jsx("p",{className:"text-xl md:text-2xl text-blue-100 mb-8 max-w-3xl mx-auto leading-relaxed",children:"Buy verified businesses or discover top franchise opportunities with AI-powered guidance."}),e.jsx("div",{className:"mb-12",children:e.jsx($j,{onSearch:o,onSearchTypeChange:i,className:"bg-white/95 backdrop-blur-sm rounded-2xl p-6 shadow-2xl"})}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center mb-16",children:[e.jsx(Kr,{to:"/businesses",children:e.jsxs(ze,{size:"lg",className:"bg-white text-blue-600 hover:bg-blue-50 px-8 py-3 w-full sm:w-auto",children:["Browse Businesses",e.jsx(Fv,{className:"ml-2 h-5 w-5"})]})}),e.jsx(Kr,{to:"/add-business-listing",children:e.jsxs(ze,{size:"lg",variant:"outline",className:"border-white/30 text-white hover:bg-white/10 px-8 py-3 w-full sm:w-auto",children:[e.jsx(t8,{className:"mr-2 h-5 w-5"}),"List Your Business"]})})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-8",children:l.map((a,p)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-white/10 rounded-full backdrop-blur-sm",children:e.jsx("div",{className:"text-2xl",children:a.emoji})})}),e.jsx("div",{className:"text-2xl md:text-3xl font-bold text-white mb-1",children:a.value}),e.jsx("div",{className:"text-xs md:text-sm text-blue-200 font-medium",children:a.label})]},p))})]})}),e.jsx("div",{className:"absolute bottom-0 left-0 right-0",children:e.jsxs("svg",{viewBox:"0 0 1200 120",preserveAspectRatio:"none",className:"w-full h-12 md:h-20",children:[e.jsx("path",{d:"M0,0V46.29c47.79,22.2,103.59,32.17,158,28,70.36-5.37,136.33-33.31,206.8-37.5C438.64,32.43,512.34,53.67,583,72.05c69.27,18,138.3,24.88,209.4,13.08,36.15-6,69.85-17.84,104.45-29.34C989.49,25,1113-14.29,1200,52.47V0Z",opacity:".25",className:"fill-background"}),e.jsx("path",{d:"M0,0V15.81C13,36.92,27.64,56.86,47.69,72.05,99.41,111.27,165,111,224.58,91.58c31.15-10.15,60.09-26.07,89.67-39.8,40.92-19,84.73-46,130.83-49.67,36.26-2.85,70.9,9.42,98.6,31.56,31.77,25.39,62.32,62,103.63,73,40.44,10.79,81.35-6.69,119.13-24.28s75.16-39,116.92-43.05c59.73-5.85,113.28,22.88,168.9,38.84,30.2,8.66,59,6.17,87.09-7.5,22.43-10.89,48-26.93,60.65-49.24V0Z",opacity:".5",className:"fill-background"}),e.jsx("path",{d:"M0,0V5.63C149.93,59,314.09,71.32,475.83,42.57c43-7.64,84.23-20.12,127.61-26.46,59-8.63,112.48,12.24,165.56,35.4C827.93,77.22,886,95.24,951.2,90c86.53-7,172.46-45.71,248.8-84.81V0Z",className:"fill-background"})]})})]})}function xm({business:n,onSave:t,onShare:r,onContact:i,onViewDetails:o,onMoreLikeThis:l,isSaved:a=!1,className:p}){const g=j=>j>=1e7?`${(j/1e7).toFixed(1)}Cr`:j>=1e6?`${(j/1e6).toFixed(1)}Cr`:j>=1e5?`${(j/1e5).toFixed(1)}L`:`${j.toLocaleString()}`,w=j=>j>=1e7?`${(j/1e7).toFixed(1)}Cr`:j>=1e6?`${(j/1e6).toFixed(1)}Cr`:j>=1e5?`${(j/1e5).toFixed(1)}L`:`${j.toLocaleString()}`;return e.jsxs(ot,{className:`group hover:shadow-2xl transition-all duration-300 card-hover-lift cursor-pointer ${p}`,onClick:()=>o==null?void 0:o(n.id),children:[e.jsxs(ut,{className:"p-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-video bg-muted rounded-t-lg overflow-hidden",children:n.images&&n.images.length>0?e.jsx("img",{src:n.images[0],alt:n.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-blue-100 to-blue-200 flex items-center justify-center",children:e.jsx("span",{className:"text-2xl font-bold text-blue-600",children:n.name.charAt(0)})})}),n.logo&&e.jsxs(lf,{className:"absolute -bottom-6 left-4 h-12 w-12 border-2 border-background",children:[e.jsx(cf,{src:n.logo,alt:n.name}),e.jsx(hp,{children:n.name.charAt(0)})]}),e.jsx(ze,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 bg-background/80 backdrop-blur-sm hover:bg-background",onClick:j=>{j.stopPropagation(),t==null||t(n.id)},children:e.jsx(Rg,{className:`h-4 w-4 ${a?"fill-red-500 text-red-500":""}`})}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[n.trending&&e.jsxs(Gt,{className:"bg-orange-500 hover:bg-orange-600 text-white",children:[e.jsx(na,{className:"h-3 w-3 mr-1"}),"Trending"]}),n.featured&&e.jsxs(Gt,{className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:[e.jsx(pf,{className:"h-3 w-3 mr-1"}),"Featured"]}),n.badges.includes("Hot Deal")&&e.jsx(Gt,{className:"bg-red-500 hover:bg-red-600 text-white animate-pulse",children:" Hot Deal"}),n.badges.includes("New")&&e.jsx(Gt,{className:"bg-green-500 hover:bg-green-600 text-white",children:" New"})]})]}),e.jsxs("div",{className:"p-4 pt-8",children:[e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg leading-tight line-clamp-1",children:n.name}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(Ja,{className:"h-4 w-4 mr-1 flex-shrink-0"}),e.jsx("span",{className:"line-clamp-1",children:n.location})]})]}),e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(Gt,{variant:"secondary",children:n.industry}),e.jsx(Gt,{variant:"outline",children:n.businessType})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Price"}),e.jsx("div",{className:"font-semibold text-lg",children:g(n.price)})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Revenue"}),e.jsx("div",{className:"font-semibold text-lg",children:n.revenue?w(n.revenue):"N/A"})]})]}),e.jsxs("div",{className:"flex items-center justify-between text-sm text-muted-foreground mb-4",children:[e.jsxs("div",{className:"flex items-center",children:[e.jsx(gp,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:["Est. ",n.establishedYear]})]}),e.jsxs("div",{className:"flex items-center",children:[e.jsx(Go,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[n.employees," employees"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:n.badges&&n.badges.map(j=>e.jsxs(Gt,{variant:j==="Verified"?"default":"secondary",className:`text-xs ${j==="Verified"?"bg-green-500 hover:bg-green-600":""}`,children:[j==="Verified"&&e.jsx(bs,{className:"h-3 w-3 mr-1"}),j]},j))}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-4",children:n.description}),n.highlights&&n.highlights.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Key Highlights"}),e.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:n.highlights.slice(0,2).map((j,S)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(pf,{className:"h-3 w-3 mr-2 mt-0.5 flex-shrink-0 text-yellow-500"}),e.jsx("span",{className:"line-clamp-1",children:j})]},S))})]})]})]}),e.jsx(Mj,{className:"p-4 pt-0",children:e.jsxs("div",{className:"w-full space-y-3",children:[e.jsx(Ho,{}),n.broker_name&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Contact: ",n.broker_name]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:j=>{j.stopPropagation(),i==null||i(n.id)},children:[e.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Contact"]}),e.jsx(ze,{variant:"outline",size:"sm",onClick:j=>{j.stopPropagation(),r==null||r(n.id)},children:e.jsx(yy,{className:"h-4 w-4"})}),e.jsx(ze,{size:"sm",className:"flex-1",onClick:j=>{j.stopPropagation(),o==null||o(n.id)},children:"View Details"})]}),l&&e.jsx(ze,{variant:"ghost",size:"sm",className:"w-full text-xs text-muted-foreground hover:text-primary",onClick:j=>{j.stopPropagation(),l==null||l(n.id)},children:" More Like This (AI)"})]})]})})]})}function Ng({franchise:n,onSave:t,onShare:r,onContact:i,onViewDetails:o,onMoreLikeThis:l,isSaved:a=!1,className:p}){var O;const g=R=>!R||R===0?"0":R>=1e7?`${(R/1e7).toFixed(1)}Cr`:R>=1e6?`${(R/1e6).toFixed(1)}Cr`:R>=1e5?`${(R/1e5).toFixed(1)}L`:`${R.toLocaleString()}`,w=R=>R>=50?"text-green-600":R>=30?"text-yellow-600":"text-red-600",j=n.expected_roi_percentage||0,S=n.brand_name||n.brandName||"Franchise",T=n.logo_url||n.logo,E=n.total_outlets||n.outlets||0;return e.jsxs(ot,{className:`group hover:shadow-2xl transition-all duration-300 card-hover-lift cursor-pointer ${p}`,onClick:()=>o==null?void 0:o(n.id),children:[e.jsxs(ut,{className:"p-0",children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"aspect-video bg-gradient-to-br from-blue-50 to-indigo-100 rounded-t-lg overflow-hidden",children:n.images&&n.images.length>0?e.jsx("img",{src:typeof n.images=="string"?n.images:n.images[0],alt:S,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-200"}):e.jsx("div",{className:"w-full h-full bg-gradient-to-br from-purple-100 to-purple-200 flex items-center justify-center",children:e.jsx("span",{className:"text-3xl font-bold text-purple-600",children:S.charAt(0)})})}),e.jsxs(lf,{className:"absolute -bottom-6 left-4 h-12 w-12 border-2 border-background",children:[e.jsx(cf,{src:T,alt:S}),e.jsx(hp,{className:"bg-primary text-primary-foreground",children:S.charAt(0)})]}),e.jsx(ze,{variant:"ghost",size:"icon",className:"absolute top-2 right-2 bg-background/80 backdrop-blur-sm hover:bg-background",onClick:R=>{R.stopPropagation(),t==null||t(n.id)},children:e.jsx(Rg,{className:`h-4 w-4 ${a?"fill-red-500 text-red-500":""}`})}),e.jsxs("div",{className:"absolute top-2 left-2 flex flex-col gap-1",children:[n.featured&&e.jsxs(Gt,{className:"bg-yellow-500 hover:bg-yellow-600 text-white",children:[e.jsx(vy,{className:"h-3 w-3 mr-1"}),"Featured"]}),n.trending&&e.jsxs(Gt,{className:"bg-orange-500 hover:bg-orange-600 text-white",children:[e.jsx(na,{className:"h-3 w-3 mr-1"}),"Trending"]}),n.badges&&n.badges.includes&&n.badges.includes("Hot Deal")&&e.jsx(Gt,{className:"bg-red-500 hover:bg-red-600 text-white animate-pulse",children:" Hot Deal"}),n.badges&&n.badges.includes&&n.badges.includes("New")&&e.jsx(Gt,{className:"bg-green-500 hover:bg-green-600 text-white",children:" New"}),j>=50&&e.jsx(Gt,{className:"bg-emerald-500 hover:bg-emerald-600 text-white",children:" High ROI"})]})]}),e.jsxs("div",{className:"p-4 pt-8",children:[e.jsxs("div",{className:"space-y-2 mb-3",children:[e.jsx("h3",{className:"font-semibold text-lg leading-tight line-clamp-1",children:S}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Gt,{variant:"secondary",children:n.industry}),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(mp,{className:"h-4 w-4 mr-1"}),e.jsxs("span",{children:[E," outlets"]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Investment"}),e.jsxs("div",{className:"font-semibold text-lg",children:["",g(n.total_investment_min||0)," - ",g(n.total_investment_max||0)]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Expected ROI"}),e.jsxs("div",{className:`font-semibold text-lg ${w(j)}`,children:[j,"% (Y1)"]})]})]}),e.jsxs("div",{className:"space-y-2 mb-4",children:[e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Franchise Fee:"}),e.jsx("span",{className:"font-medium",children:g(n.franchise_fee)})]}),e.jsxs("div",{className:"flex justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Royalty:"}),e.jsxs("span",{className:"font-medium flex items-center",children:[e.jsx(JO,{className:"h-3 w-3 mr-1"}),n.royalty_percentage||0,"%"]})]})]}),e.jsx("div",{className:"flex flex-wrap gap-1 mb-4",children:n.badges&&Array.isArray(n.badges)&&n.badges.map(R=>e.jsxs(Gt,{variant:R==="Verified"?"default":"secondary",className:`text-xs ${R==="Verified"?"bg-green-500 hover:bg-green-600":""}`,children:[R==="Verified"&&e.jsx(bs,{className:"h-3 w-3 mr-1"}),R]},R))}),e.jsx("p",{className:"text-sm text-muted-foreground line-clamp-2 mb-4",children:n.description}),n.highlights&&n.highlights.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-2",children:"Key Highlights"}),e.jsx("ul",{className:"text-sm text-muted-foreground space-y-1",children:n.highlights.slice(0,2).map((R,F)=>e.jsxs("li",{className:"flex items-start",children:[e.jsx(pf,{className:"h-3 w-3 mr-2 mt-0.5 flex-shrink-0 text-yellow-500"}),e.jsx("span",{className:"line-clamp-1",children:R})]},F))})]}),e.jsxs("div",{className:"flex flex-wrap gap-2 mb-4",children:[n.support_provided&&n.support_provided.length>0&&e.jsxs(Gt,{variant:"outline",className:"text-xs",children:[e.jsx(D8,{className:"h-3 w-3 mr-1"}),"Training & Support"]}),n.marketing_support&&e.jsx(Gt,{variant:"outline",className:"text-xs",children:"Financing Available"})]}),n.territories&&n.territories.length>0&&e.jsxs("div",{className:"mb-4",children:[e.jsx("div",{className:"text-sm font-medium mb-1",children:"Available Territories"}),e.jsxs("div",{className:"flex flex-wrap gap-1",children:[n.territories.slice(0,3).map((R,F)=>e.jsxs(Gt,{variant:"outline",className:"text-xs",children:[e.jsx(Ja,{className:"h-3 w-3 mr-1"}),R]},F)),n.territories.length>3&&e.jsxs(Gt,{variant:"outline",className:"text-xs",children:["+",n.territories.length-3," more"]})]})]})]})]}),e.jsx(Mj,{className:"p-4 pt-0",children:e.jsxs("div",{className:"w-full space-y-3",children:[e.jsx(Ho,{}),((O=n.contact)==null?void 0:O.franchiseDeveloper)&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Contact: ",n.contact.franchiseDeveloper]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:R=>{R.stopPropagation(),i==null||i(n.id)},children:[e.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Contact"]}),e.jsx(ze,{variant:"outline",size:"sm",onClick:R=>{R.stopPropagation(),r==null||r(n.id)},children:e.jsx(yy,{className:"h-4 w-4"})}),e.jsx(ze,{size:"sm",className:"flex-1",onClick:R=>{R.stopPropagation(),o==null||o(n.id)},children:"View Details"})]}),l&&e.jsx(ze,{variant:"ghost",size:"sm",className:"w-full text-xs text-muted-foreground hover:text-primary",onClick:R=>{R.stopPropagation(),l==null||l(n.id)},children:" More Like This (AI)"})]})]})})]})}const Hj=[{id:"biz-001",name:"Mumbai Cafe Chain",industry:"Food & Beverage",location:"Bandra, Mumbai",city:"Mumbai",state:"Maharashtra",priceRange:"45L - 50L",price:475e4,revenueRange:"80L - 1Cr",revenue:9e6,establishedYear:2018,employees:25,businessType:"Franchise",description:"Established cafe chain with 3 outlets in prime Mumbai locations. Known for specialty coffee and continental cuisine. Strong brand presence and loyal customer base.",highlights:["3 prime location outlets","Established brand with loyal customers","Consistent 15% annual growth","Trained staff and management systems"],badges:["Verified","Trending","Hot Deal"],images:["https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800","https://images.unsplash.com/photo-1559925393-8be0ec4767c8?w=800","https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800"],logo:"https://images.unsplash.com/photo-1572442388796-11668a67e53d?w=200",financials:[{year:2023,revenue:9e6,profit:135e4,expenses:765e4},{year:2022,revenue:78e5,profit:117e4,expenses:663e4},{year:2021,revenue:65e5,profit:975e3,expenses:5525e3}],assets:["Kitchen equipment","Furniture & fixtures","POS systems","Inventory","Brand rights"],operations:{hours:"7:00 AM - 11:00 PM",daysOpen:7,seasonality:"Year-round with peak during festivals"},verification:{verified:!0,documentsVerified:!0,identityVerified:!0},contact:{brokerName:"Rajesh Sharma",phone:"+91 98765 43210",email:"rajesh@bizsearch.com"},featured:!0,trending:!0,createdAt:"2024-01-15"},{id:"biz-002",name:"Tech Solutions Pvt Ltd",industry:"Technology",location:"Whitefield, Bangalore",city:"Bangalore",state:"Karnataka",priceRange:"1.2Cr - 1.5Cr",price:135e5,revenueRange:"2Cr - 3Cr",revenue:25e6,establishedYear:2015,employees:45,businessType:"Private Limited",description:"Software development company specializing in web and mobile applications. Strong client base across US and Europe with recurring revenue model.",highlights:["45+ skilled developers","International client base","Recurring revenue model","Modern office setup"],badges:["Verified","High Growth","New"],images:["https://images.unsplash.com/photo-1497366216548-37526070297c?w=800","https://images.unsplash.com/photo-1522071820081-009f0129c71c?w=800"],financials:[{year:2023,revenue:25e6,profit:5e6,expenses:2e7},{year:2022,revenue:2e7,profit:4e6,expenses:16e6},{year:2021,revenue:15e6,profit:3e6,expenses:12e6}],assets:["Office space","Computer equipment","Software licenses","Client contracts"],operations:{hours:"9:00 AM - 6:00 PM",daysOpen:5,seasonality:"Consistent year-round"},verification:{verified:!0,documentsVerified:!0,identityVerified:!0},contact:{brokerName:"Priya Nair",phone:"+91 98765 43211",email:"priya@bizsearch.com"},featured:!0,trending:!1,createdAt:"2024-01-10"},{id:"biz-003",name:"Fitness First Gym",industry:"Health & Fitness",location:"Koramangala, Bangalore",city:"Bangalore",state:"Karnataka",priceRange:"25L - 30L",price:275e4,revenueRange:"40L - 50L",revenue:45e5,establishedYear:2019,employees:12,businessType:"Partnership",description:"Well-equipped gym with modern facilities and experienced trainers. Located in prime Koramangala area with high footfall and membership base.",highlights:["Modern equipment worth 15L","500+ active members","Prime location","Experienced trainer team"],badges:["Verified","Prime Location"],images:["https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=800","https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800"],financials:[{year:2023,revenue:45e5,profit:9e5,expenses:36e5},{year:2022,revenue:38e5,profit:76e4,expenses:304e4},{year:2021,revenue:32e5,profit:64e4,expenses:256e4}],assets:["Gym equipment","Sound system","AC units","Membership database"],operations:{hours:"5:00 AM - 11:00 PM",daysOpen:7,seasonality:"Peak during Jan-Mar and Sep-Nov"},verification:{verified:!0,documentsVerified:!0,identityVerified:!1},contact:{phone:"+91 98765 43212",email:"fitness@bizsearch.com"},featured:!1,trending:!0,createdAt:"2024-01-08"},{id:"biz-004",name:"Organic Farm & Store",industry:"Agriculture",location:"Pune, Maharashtra",city:"Pune",state:"Maharashtra",priceRange:"60L - 75L",price:68e5,revenueRange:"1Cr - 1.5Cr",revenue:12e6,establishedYear:2016,employees:20,businessType:"Private Limited",description:"Organic farming operation with retail store and online presence. Certified organic produce with direct-to-consumer sales model.",highlights:["50 acres certified organic farm","Retail store + online sales","Government certifications","Growing demand for organic"],badges:["Verified","Certified Organic","Sustainable"],images:["https://images.unsplash.com/photo-1500937386664-56d1dfef3854?w=800","https://images.unsplash.com/photo-1416879595882-3373a0480b5b?w=800"],financials:[{year:2023,revenue:12e6,profit:24e5,expenses:96e5},{year:2022,revenue:1e7,profit:2e6,expenses:8e6},{year:2021,revenue:85e5,profit:17e5,expenses:68e5}],assets:["50 acres farmland","Farm equipment","Retail store","Inventory","Certifications"],operations:{hours:"6:00 AM - 8:00 PM",daysOpen:6,seasonality:"Seasonal crop cycles"},verification:{verified:!0,documentsVerified:!0,identityVerified:!0},contact:{brokerName:"Amit Patil",phone:"+91 98765 43213",email:"amit@bizsearch.com"},featured:!0,trending:!1,createdAt:"2024-01-05"},{id:"biz-005",name:"Fashion Boutique Chain",industry:"Retail",location:"Khan Market, Delhi",city:"Delhi",state:"Delhi",priceRange:"35L - 40L",price:375e4,revenueRange:"60L - 80L",revenue:72e5,establishedYear:2017,employees:18,businessType:"Partnership",description:"Trendy fashion boutique with 2 outlets in premium Delhi locations. Curated collection of designer wear and accessories with strong social media presence.",highlights:["2 premium location stores","Strong social media following","Curated designer collection","Loyal customer base"],badges:["Verified","Trendy","Hot Deal"],images:["https://images.unsplash.com/photo-1441986300917-64674bd600d8?w=800","https://images.unsplash.com/photo-1445205170230-053b83016050?w=800"],financials:[{year:2023,revenue:72e5,profit:108e4,expenses:612e4},{year:2022,revenue:65e5,profit:975e3,expenses:5525e3},{year:2021,revenue:58e5,profit:87e4,expenses:493e4}],assets:["Store fixtures","Inventory","POS systems","Brand assets"],operations:{hours:"10:00 AM - 9:00 PM",daysOpen:7,seasonality:"Peak during festivals and wedding season"},verification:{verified:!0,documentsVerified:!0,identityVerified:!0},contact:{brokerName:"Sneha Gupta",phone:"+91 98765 43214",email:"sneha@bizsearch.com"},featured:!1,trending:!0,createdAt:"2024-01-12"}],_S=()=>Hj.filter(n=>n.featured),wS=()=>Hj.filter(n=>n.trending),Gj=[{id:"fran-001",brandName:"CoffeeHub Express",industry:"Food & Beverage",investmentRequired:"15L - 25L",investmentMin:15e5,investmentMax:25e5,franchiseFee:5e5,royaltyPercentage:6,outlets:150,territories:["Mumbai","Delhi","Bangalore","Pune","Chennai"],description:"Leading coffee franchise with proven business model and strong brand recognition. Perfect for entrepreneurs looking to enter the booming coffee market.",brandStory:"Started in 2015, CoffeeHub Express has revolutionized the coffee experience in India with premium quality coffee at affordable prices.",businessModel:"Quick service coffee shop with takeaway and limited seating. Focus on high-quality coffee, quick service, and strategic locations.",competitiveEdge:["Proprietary coffee blend","30-second service guarantee","Prime location strategy","Strong digital presence"],investmentBreakdown:{franchiseFee:5e5,equipment:8e5,inventory:2e5,marketing:15e4,workingCapital:3e5,other:5e4},support:{training:"2 weeks intensive training + ongoing support",marketing:"National campaigns + local marketing support",operations:"Operations manual + regular audits",technology:"POS system + mobile app integration"},roiProjections:[{year:1,revenue:36e5,profit:54e4,roi:27},{year:2,revenue:42e5,profit:84e4,roi:42},{year:3,revenue:48e5,profit:12e5,roi:60}],requirements:{spaceRequired:"200-400 sq ft",experience:"No prior experience required",investment:"15L - 25L liquid capital",location:"High footfall areas, malls, offices"},badges:["Verified","Top Performer","Hot Deal"],images:["https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800","https://images.unsplash.com/photo-1559925393-8be0ec4767c8?w=800"],logo:"https://images.unsplash.com/photo-1572442388796-11668a67e53d?w=200",verification:{verified:!0,documentsVerified:!0,brandVerified:!0},contact:{franchiseDeveloper:"Rohit Mehta",phone:"+91 98765 54321",email:"rohit@coffeehub.com",website:"www.coffeehubexpress.com"},featured:!0,trending:!0,multiUnit:!0,financing:!0,createdAt:"2024-01-15"},{id:"fran-002",brandName:"FitZone Gym",industry:"Health & Fitness",investmentRequired:"40L - 60L",investmentMin:4e6,investmentMax:6e6,franchiseFee:1e6,royaltyPercentage:8,outlets:85,territories:["Tier 1 & Tier 2 cities"],description:"Premium fitness franchise with state-of-the-art equipment and comprehensive fitness programs. Proven track record of successful franchisees.",brandStory:"FitZone has been transforming lives through fitness for over 8 years, with a focus on personalized training and community building.",businessModel:"Full-service gym with personal training, group classes, and wellness programs. Membership-based recurring revenue model.",competitiveEdge:["Latest fitness equipment","Certified trainer network","Comprehensive wellness programs","Strong member retention"],investmentBreakdown:{franchiseFee:1e6,equipment:3e6,inventory:2e5,marketing:3e5,workingCapital:5e5,other:0},support:{training:"4 weeks comprehensive training program",marketing:"Grand opening support + ongoing campaigns",operations:"Operations support + business coaching",technology:"Gym management software + member app"},roiProjections:[{year:1,revenue:72e5,profit:144e4,roi:24},{year:2,revenue:84e5,profit:252e4,roi:42},{year:3,revenue:96e5,profit:384e4,roi:64}],requirements:{spaceRequired:"3000-5000 sq ft",experience:"Business or fitness background preferred",investment:"40L - 60L total investment",location:"Residential areas with parking"},badges:["Verified","Premium Brand","High ROI"],images:["https://images.unsplash.com/photo-1534438327276-14e5300c3a48?w=800","https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=800"],logo:"https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=200",verification:{verified:!0,documentsVerified:!0,brandVerified:!0},contact:{franchiseDeveloper:"Priya Sharma",phone:"+91 98765 54322",email:"priya@fitzone.com",website:"www.fitzonegym.com"},featured:!0,trending:!1,multiUnit:!0,financing:!0,createdAt:"2024-01-12"},{id:"fran-003",brandName:"EduSmart Learning Center",industry:"Education",investmentRequired:"8L - 15L",investmentMin:8e5,investmentMax:15e5,franchiseFee:3e5,royaltyPercentage:5,outlets:200,territories:["Pan India"],description:"Leading education franchise offering after-school programs, test prep, and skill development courses for students aged 6-18.",brandStory:"EduSmart has been empowering students for academic excellence for over 10 years with innovative teaching methodologies.",businessModel:"After-school learning center with structured programs, small batch sizes, and personalized attention.",competitiveEdge:["Proven curriculum","Technology-enabled learning","Experienced faculty training","Strong parent satisfaction"],investmentBreakdown:{franchiseFee:3e5,equipment:2e5,inventory:1e5,marketing:1e5,workingCapital:2e5,other:1e5},support:{training:"3 weeks training + curriculum support",marketing:"Enrollment campaigns + digital marketing",operations:"Academic support + quality monitoring",technology:"Learning management system + parent app"},roiProjections:[{year:1,revenue:18e5,profit:36e4,roi:36},{year:2,revenue:24e5,profit:72e4,roi:72},{year:3,revenue:3e6,profit:12e5,roi:120}],requirements:{spaceRequired:"1000-1500 sq ft",experience:"Education background preferred",investment:"8L - 15L total investment",location:"Residential areas near schools"},badges:["Verified","Education Leader","New"],images:["https://images.unsplash.com/photo-1497486751825-1233686d5d80?w=800","https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=800"],logo:"https://images.unsplash.com/photo-1503676260728-1c00da094a0b?w=200",verification:{verified:!0,documentsVerified:!0,brandVerified:!0},contact:{franchiseDeveloper:"Dr. Anita Rao",phone:"+91 98765 54323",email:"anita@edusmart.com",website:"www.edusmartlearning.com"},featured:!1,trending:!0,multiUnit:!0,financing:!1,createdAt:"2024-01-10"},{id:"fran-004",brandName:"QuickBite Food Truck",industry:"Food & Beverage",investmentRequired:"12L - 18L",investmentMin:12e5,investmentMax:18e5,franchiseFee:4e5,royaltyPercentage:4,outlets:75,territories:["Metro cities"],description:"Mobile food franchise specializing in healthy fast food. Perfect for entrepreneurs wanting flexibility and lower overhead costs.",brandStory:"QuickBite revolutionized street food with healthy, hygienic, and delicious options served from custom-designed food trucks.",businessModel:"Mobile food service with fixed routes and event catering. Focus on healthy fast food and premium ingredients.",competitiveEdge:["Healthy fast food concept","Mobile flexibility","Lower overhead costs","Event catering opportunities"],investmentBreakdown:{franchiseFee:4e5,equipment:6e5,inventory:1e5,marketing:1e5,workingCapital:2e5,other:4e5},support:{training:"2 weeks operational training",marketing:"Launch support + social media marketing",operations:"Route planning + vendor support",technology:"Mobile POS + order management app"},roiProjections:[{year:1,revenue:24e5,profit:48e4,roi:32},{year:2,revenue:3e6,profit:75e4,roi:50},{year:3,revenue:36e5,profit:108e4,roi:72}],requirements:{spaceRequired:"Food truck provided",experience:"Food service experience preferred",investment:"12L - 18L total investment",location:"High traffic areas, events"},badges:["Verified","Mobile Business","Hot Deal"],images:["https://images.unsplash.com/photo-1565299624946-b28f40a0ca4b?w=800","https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=800"],logo:"https://images.unsplash.com/photo-1414235077428-338989a2e8c0?w=200",verification:{verified:!0,documentsVerified:!0,brandVerified:!0},contact:{franchiseDeveloper:"Vikram Singh",phone:"+91 98765 54324",email:"vikram@quickbite.com",website:"www.quickbitefoodtruck.com"},featured:!1,trending:!0,multiUnit:!1,financing:!0,createdAt:"2024-01-08"},{id:"fran-005",brandName:"TechRepair Pro",industry:"Technology",investmentRequired:"5L - 10L",investmentMin:5e5,investmentMax:1e6,franchiseFee:2e5,royaltyPercentage:6,outlets:120,territories:["All major cities"],description:"Mobile and laptop repair franchise with doorstep service model. Growing demand for device repair services with excellent margins.",brandStory:"TechRepair Pro has been the trusted name in device repair for 6 years, known for quality service and quick turnaround times.",businessModel:"Device repair service with both store and doorstep service options. Focus on smartphones, laptops, and tablets.",competitiveEdge:["Doorstep service model","Quick turnaround time","Genuine spare parts","Skilled technician training"],investmentBreakdown:{franchiseFee:2e5,equipment:3e5,inventory:2e5,marketing:5e4,workingCapital:15e4,other:1e5},support:{training:"3 weeks technical training",marketing:"Digital marketing + local campaigns",operations:"Technical support + spare parts supply",technology:"Service management app + customer portal"},roiProjections:[{year:1,revenue:15e5,profit:45e4,roi:45},{year:2,revenue:2e6,profit:7e5,roi:70},{year:3,revenue:25e5,profit:1e6,roi:100}],requirements:{spaceRequired:"300-500 sq ft + service vehicle",experience:"Technical background preferred",investment:"5L - 10L total investment",location:"Commercial areas with good connectivity"},badges:["Verified","Tech Service","Doorstep Service"],images:["https://images.unsplash.com/photo-1581092160562-40aa08e78837?w=800","https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?w=800"],logo:"https://images.unsplash.com/photo-1517077304055-6e89abbf09b0?w=200",verification:{verified:!0,documentsVerified:!0,brandVerified:!0},contact:{franchiseDeveloper:"Suresh Kumar",phone:"+91 98765 54325",email:"suresh@techrepairpro.com",website:"www.techrepairpro.com"},featured:!0,trending:!1,multiUnit:!0,financing:!1,createdAt:"2024-01-05"}],jS=()=>Gj.filter(n=>n.featured),i$=()=>Gj.filter(n=>n.trending);function p2({type:n="mixed",title:t,subtitle:r,onViewAll:i,onMoreLikeThis:o,className:l}){const a=Na(),[p,g]=M.useState(0),[w,j]=M.useState(!0),[S,T]=M.useState(0),[E,O]=M.useState(0),F=(()=>{switch(n){case"business":return[..._S(),...wS()].slice(0,8);case"franchise":return[...jS(),...i$()].slice(0,8);case"mixed":default:return[..._S().slice(0,3),...jS().slice(0,3),...wS().slice(0,2)]}})(),B=window.innerWidth<768?1:3,G=Math.max(0,F.length-B);M.useEffect(()=>{if(!w)return;const re=setInterval(()=>{g(ce=>ce>=G?0:ce+1)},4e3);return()=>clearInterval(re)},[w,G]);const z=()=>{j(!1),g(re=>re<=0?G:re-1)},ee=()=>{j(!1),g(re=>re>=G?0:re+1)},ie=re=>{j(!1),g(re)},ge=re=>{T(re.targetTouches[0].clientX)},K=re=>{O(re.targetTouches[0].clientX)},J=()=>{S-E>75&&ee(),S-E<-75&&z()},Se={business:"Featured Businesses",franchise:"Top Franchise Opportunities",mixed:"Featured Opportunities"},_e={business:"Discover verified businesses ready for acquisition",franchise:"Explore profitable franchise opportunities",mixed:"Handpicked businesses and franchises for you"};return e.jsx("section",{className:`py-12 ${l}`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex flex-col md:flex-row md:items-center md:justify-between mb-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-2",children:t||Se[n]}),e.jsx("p",{className:"text-muted-foreground",children:r||_e[n]})]}),e.jsxs("div",{className:"flex items-center gap-4 mt-4 md:mt-0",children:[e.jsx("div",{className:"hidden md:flex gap-2",children:Array.from({length:G+1}).map((re,ce)=>e.jsx("button",{onClick:()=>ie(ce),className:`w-2 h-2 rounded-full transition-colors ${ce===p?"bg-primary":"bg-muted"}`},ce))}),e.jsxs("div",{className:"hidden md:flex gap-2",children:[e.jsx(ze,{variant:"outline",size:"icon",onClick:z,disabled:F.length<=B,children:e.jsx(WA,{className:"h-4 w-4"})}),e.jsx(ze,{variant:"outline",size:"icon",onClick:ee,disabled:F.length<=B,children:e.jsx(ej,{className:"h-4 w-4"})})]}),i&&e.jsxs(ze,{onClick:i,className:"hidden md:flex",children:["View All",e.jsx(Ua,{className:"ml-2 h-4 w-4"})]})]})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"md:hidden",children:e.jsx("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide",onTouchStart:ge,onTouchMove:K,onTouchEnd:J,style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:F.map((re,ce)=>e.jsx("div",{className:"flex-shrink-0 w-80 snap-start",children:"brandName"in re?e.jsx(Ng,{franchise:re,onSave:fe=>console.log("Save franchise:",fe),onShare:fe=>console.log("Share franchise:",fe),onContact:fe=>console.log("Contact franchise:",fe),onViewDetails:fe=>a(`/franchise/${fe}`),onMoreLikeThis:fe=>o==null?void 0:o(fe,"franchise")}):e.jsx(xm,{business:re,onSave:fe=>console.log("Save business:",fe),onShare:fe=>console.log("Share business:",fe),onContact:fe=>console.log("Contact business:",fe),onViewDetails:fe=>a(`/business/${fe}`),onMoreLikeThis:fe=>o==null?void 0:o(fe,"business")})},`${re.id}-${ce}`))})}),e.jsx("div",{className:"hidden md:block overflow-hidden",children:e.jsx("div",{className:"flex transition-transform duration-500 ease-in-out",style:{transform:`translateX(-${p*(100/B)}%)`,width:`${F.length/B*100}%`},children:F.map((re,ce)=>e.jsx("div",{className:"flex-shrink-0 px-2",style:{width:`${100/F.length}%`},children:"brandName"in re?e.jsx(Ng,{franchise:re,onSave:fe=>console.log("Save franchise:",fe),onShare:fe=>console.log("Share franchise:",fe),onContact:fe=>console.log("Contact franchise:",fe),onViewDetails:fe=>a(`/franchise/${fe}`),onMoreLikeThis:fe=>o==null?void 0:o(fe,"franchise")}):e.jsx(xm,{business:re,onSave:fe=>console.log("Save business:",fe),onShare:fe=>console.log("Share business:",fe),onContact:fe=>console.log("Contact business:",fe),onViewDetails:fe=>a(`/business/${fe}`),onMoreLikeThis:fe=>o==null?void 0:o(fe,"business")})},`${re.id}-${ce}`))})})]}),i&&e.jsx("div",{className:"flex justify-center mt-8 md:hidden",children:e.jsxs(ze,{onClick:i,children:["View All Opportunities",e.jsx(Ua,{className:"ml-2 h-4 w-4"})]})}),e.jsx("div",{className:"hidden md:flex justify-center mt-6",children:e.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>j(!w),className:"text-muted-foreground hover:text-foreground",children:[w?"Pause":"Play"," Auto-scroll"]})}),e.jsx("div",{className:"md:hidden flex justify-center gap-2 mt-6",children:Array.from({length:Math.min(F.length,5)}).map((re,ce)=>e.jsx("div",{className:`h-2 rounded-full transition-all ${ce===p%Math.min(F.length,5)?"bg-primary w-8":"bg-muted w-2"}`},ce))})]})})}function s$({variant:n="full",className:t}){const r=[{icon:bs,label:"Verified Platform",description:"All listings verified by our experts",color:"bg-green-500"},{icon:Nn,label:"Document Verified",description:"Legal documents authenticated",color:"bg-blue-500"},{icon:Mh,label:"Secure Transactions",description:"Bank-grade security & escrow",color:"bg-purple-500"},{icon:vy,label:"Industry Recognition",description:"Trusted by leading brokers",color:"bg-orange-500"}],i=[{icon:Go,value:"25,000+",label:"Happy Customers",growth:"+15%",color:"text-blue-600"},{icon:Nn,value:"95%",label:"Success Rate",growth:"+2%",color:"text-green-600"},{icon:pf,value:"4.9/5",label:"Customer Rating",growth:"",color:"text-yellow-600"},{icon:wm,value:"50+",label:"Cities Covered",growth:"+5 new",color:"text-purple-600"}],o=[{icon:Kc,title:"24/7 Support",description:"Round-the-clock customer assistance"},{icon:Xd,title:"Quick Response",description:"Average response time under 2 hours"},{icon:bs,title:"Money Back Guarantee",description:"100% satisfaction guaranteed"},{icon:Mh,title:"Privacy Protected",description:"Your data is safe and secure"}],l=[{name:"Rajesh Sharma",role:"Business Owner",avatar:"https://github.com/yusufhilmi.png",rating:5,text:"Found my dream restaurant through BizSearch. The AI assistant made the process so smooth!"},{name:"Priya Nair",role:"Franchise Owner",avatar:"https://github.com/kdrnp.png",rating:5,text:"Excellent platform with verified listings. Vijay helped me choose the perfect franchise opportunity."},{name:"Amit Patil",role:"Investor",avatar:"https://github.com/yahyabedirhan.png",rating:5,text:"Professional service and genuine listings. Highly recommend for serious business buyers."}];return n==="minimal"?e.jsxs("div",{className:`flex items-center gap-4 ${t}`,children:[r.slice(0,2).map((a,p)=>e.jsxs(Gt,{className:`${a.color} text-white`,children:[e.jsx(a.icon,{className:"h-3 w-3 mr-1"}),a.label]},p)),e.jsxs("div",{className:"flex items-center text-sm text-muted-foreground",children:[e.jsx(pf,{className:"h-4 w-4 text-yellow-500 mr-1"}),"4.9/5 (2,500+ reviews)"]})]}):n==="compact"?e.jsxs("div",{className:`space-y-6 ${t}`,children:[e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:r.map((a,p)=>e.jsxs("div",{className:"flex items-center gap-2 p-3 bg-muted/50 rounded-lg",children:[e.jsx("div",{className:`p-2 ${a.color} rounded-full`,children:e.jsx(a.icon,{className:"h-4 w-4 text-white"})}),e.jsx("div",{children:e.jsx("div",{className:"font-medium text-sm",children:a.label})})]},p))}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.map((a,p)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:`text-2xl font-bold ${a.color}`,children:a.value}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.label})]},p))})]}):e.jsx("section",{className:`py-12 bg-muted/30 ${t}`,children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Why Choose BizSearch?"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"India's most trusted platform for business acquisitions and franchise opportunities, backed by industry-leading security and verification processes."})]}),e.jsxs("div",{className:"space-y-12",children:[e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:r.map((a,p)=>e.jsx(ot,{className:"text-center hover:shadow-lg transition-shadow",children:e.jsxs(ut,{className:"p-6",children:[e.jsx("div",{className:`inline-flex p-4 ${a.color} rounded-full mb-4`,children:e.jsx(a.icon,{className:"h-8 w-8 text-white"})}),e.jsx("h3",{className:"font-semibold mb-2",children:a.label}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]})},p))}),e.jsxs("div",{className:"bg-white rounded-2xl p-8",children:[e.jsx("h3",{className:"text-2xl font-bold text-center mb-8",children:"Our Track Record"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-8",children:i.map((a,p)=>e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"flex justify-center mb-3",children:e.jsx("div",{className:"p-3 bg-muted rounded-full",children:e.jsx(a.icon,{className:`h-6 w-6 ${a.color}`})})}),e.jsx("div",{className:`text-3xl font-bold ${a.color} mb-1`,children:a.value}),e.jsx("div",{className:"text-sm font-medium mb-1",children:a.label}),e.jsxs("div",{className:"text-xs text-muted-foreground flex items-center justify-center",children:[e.jsx(na,{className:"h-3 w-3 mr-1"}),a.growth]})]},p))})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:o.map((a,p)=>e.jsxs("div",{className:"flex items-start gap-4 p-4 bg-white rounded-lg",children:[e.jsx("div",{className:"p-2 bg-primary/10 rounded-lg",children:e.jsx(a.icon,{className:"h-5 w-5 text-primary"})}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-1",children:a.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:a.description})]})]},p))}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-2xl font-bold text-center mb-8",children:"What Our Customers Say"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:l.map((a,p)=>e.jsx(ot,{className:"hover:shadow-lg transition-shadow",children:e.jsxs(ut,{className:"p-6",children:[e.jsxs("div",{className:"flex items-center gap-3 mb-4",children:[e.jsx("img",{src:a.avatar,alt:a.name,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:a.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:a.role})]})]}),e.jsx("div",{className:"flex mb-3",children:Array.from({length:a.rating}).map((g,w)=>e.jsx(pf,{className:"h-4 w-4 fill-yellow-400 text-yellow-400"},w))}),e.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',a.text,'"']})]})},p))})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Trusted & Certified"}),e.jsxs("div",{className:"flex justify-center items-center gap-8 opacity-60",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"SSL Secured"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"ISO Certified"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Mh,{className:"h-6 w-6"}),e.jsx("span",{className:"text-sm font-medium",children:"GDPR Compliant"})]})]})]})]})]})})}const a$=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU");class $1{static async parseSearchQuery(t){const r=`Parse this natural language business search query into structured search parameters:

Query: "${t}"

Extract and return ONLY a JSON object (no markdown, no code blocks) with these fields:
{
  "industries": [<array of industry names if mentioned>],
  "locations": [<array of cities/states if mentioned>],
  "priceRange": {"min": <number or null>, "max": <number or null>},
  "revenueRange": {"min": <number or null>, "max": <number or null>},
  "businessType": "<type if mentioned like restaurant, retail, manufacturing, etc>",
  "keywords": [<array of relevant keywords>],
  "investmentGoal": "<buyer's goal if implied like passive income, growth, etc>"
}

Examples:
- "coffee shop in Mumbai under 50 lakhs"  {"industries":["food & beverage","cafe"],"locations":["Mumbai"],"priceRange":{"max":5000000},"businessType":"cafe","keywords":["coffee","shop"]}
- "profitable tech startup Bangalore"  {"industries":["technology","software"],"locations":["Bangalore"],"businessType":"startup","keywords":["tech","profitable"]}
- "franchise opportunities with passive income"  {"businessType":"franchise","investmentGoal":"passive income","keywords":["franchise"]}

Convert lakhs/crores to numbers (1 lakh = 100000, 1 crore = 10000000).
Return ONLY the JSON:`;try{const a=(await(await this.model.generateContent(r)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(a)}catch(i){return console.error("Query parsing error:",i),this.basicParse(t)}}static basicParse(t){const r=t.toLowerCase(),i={keywords:t.split(" ").filter(j=>j.length>3)},o=t.match(/(\d+)\s*(?:lakh|lac)/i),l=t.match(/(\d+)\s*crore/i);if(o){const j=parseInt(o[1]);(r.includes("under")||r.includes("below"))&&(i.priceRange={max:j*1e5})}if(l){const j=parseInt(l[1]);(r.includes("under")||r.includes("below"))&&(i.priceRange={max:j*1e7})}const p=["restaurant","cafe","food","retail","shop","store","tech","software","saas","manufacturing","franchise","hotel","gym","fitness","education","school"].filter(j=>r.includes(j));p.length>0&&(i.industries=p);const w=["Mumbai","Delhi","Bangalore","Hyderabad","Chennai","Kolkata","Pune","Ahmedabad","Jaipur","Surat"].filter(j=>t.toLowerCase().includes(j.toLowerCase()));return w.length>0&&(i.locations=w),i}static async smartSearch(t){try{const r=await this.parseSearchQuery(t);let i=ar.from("businesses").select("*").eq("status","active");if(r.industries&&r.industries.length>0){const p=r.industries.map(g=>`industry.ilike.%${g}%`).join(",");i=i.or(p)}if(r.locations&&r.locations.length>0){const p=r.locations.map(g=>`city.ilike.%${g}%,state.ilike.%${g}%`).join(",");i=i.or(p)}if(r.priceRange&&(r.priceRange.min&&(i=i.gte("price",r.priceRange.min)),r.priceRange.max&&(i=i.lte("price",r.priceRange.max))),r.revenueRange&&(r.revenueRange.min&&(i=i.gte("revenue",r.revenueRange.min)),r.revenueRange.max&&(i=i.lte("revenue",r.revenueRange.max))),r.keywords&&r.keywords.length>0){const p=r.keywords.map(g=>`name.ilike.%${g}%,description.ilike.%${g}%`).join(",");i=i.or(p)}const{data:o,error:l}=await i.order("created_at",{ascending:!1}).limit(50);if(l)throw l;const a=await this.generateSuggestions(t,r);return{businesses:o||[],searchIntent:r,totalResults:(o==null?void 0:o.length)||0,suggestions:a}}catch(r){throw console.error("Smart search error:",r),r}}static async generateSuggestions(t,r){var o;const i=`Given this business search query: "${t}"

Generate 3-5 related search suggestions that might help the user find better matches.

Suggestions should:
- Be more specific or explore related options
- Include location variations if applicable
- Suggest price range adjustments
- Explore similar industries
- Be natural language queries

Provide ONLY the suggestions, one per line:`;try{return(await(await this.model.generateContent(i)).response).text().trim().split(`
`).filter(g=>g.trim().length>0).map(g=>g.replace(/^\d+\.\s*/,"").replace(/^-\s*/,"").trim()).slice(0,5)}catch(l){console.error("Suggestion generation error:",l);const a=[];return r.industries&&r.industries[0]&&a.push(`Successful ${r.industries[0]} businesses for sale`),r.locations&&r.locations[0]&&a.push(`High-profit businesses in ${r.locations[0]}`),(o=r.priceRange)!=null&&o.max&&a.push(`Businesses under ${r.priceRange.max/1e5} lakhs`),a}}static async getAutocompleteSuggestions(t){if(t.length<3)return[];try{const{data:r}=await ar.from("businesses").select("name, industry, city").or(`name.ilike.%${t}%,industry.ilike.%${t}%,city.ilike.%${t}%`).limit(10);if(!r)return[];const i=new Set;return r.forEach(o=>{var l,a,p;(l=o.name)!=null&&l.toLowerCase().includes(t.toLowerCase())&&i.add(o.name),(a=o.industry)!=null&&a.toLowerCase().includes(t.toLowerCase())&&i.add(`${o.industry} businesses`),(p=o.city)!=null&&p.toLowerCase().includes(t.toLowerCase())&&i.add(`Businesses in ${o.city}`)}),Array.from(i).slice(0,5)}catch(r){return console.error("Autocomplete error:",r),[]}}static async explainResults(t,r,i){const o=`Explain to the user what businesses you're showing them based on their search.

Original Query: "${t}"
Extracted Intent: ${JSON.stringify(r)}
Results Found: ${i}

Write a friendly 1-2 sentence explanation of what we found and why.

Examples:
- "I found 12 cafes and restaurants in Mumbai within your budget of 50 lakhs."
- "Here are 8 profitable tech startups in Bangalore that match your criteria."
- "Showing you 15 franchise opportunities focused on passive income."

Write ONLY the explanation:`;try{return(await(await this.model.generateContent(o)).response).text().trim()}catch{return`Found ${i} businesses matching "${t}"`}}}nf($1,"model",a$.getGenerativeModel({model:"gemini-pro"}));function o$({onSearch:n,onResultsFound:t,placeholder:r="Try: 'coffee shop in Mumbai under 50 lakhs' or 'profitable tech startup Bangalore'",className:i,showSuggestions:o=!0}){const[l,a]=M.useState(""),[p,g]=M.useState(!1),[w,j]=M.useState([]),[S,T]=M.useState(!1),[E,O]=M.useState(""),R=M.useRef(null),F=M.useRef(null);M.useEffect(()=>{const ge=setTimeout(async()=>{if(l.length>=3&&o)try{const K=await $1.getAutocompleteSuggestions(l);j(K),T(!0)}catch(K){console.error("Autocomplete error:",K)}else j([]),T(!1)},300);return()=>clearTimeout(ge)},[l,o]),M.useEffect(()=>{const ie=ge=>{var K;F.current&&!F.current.contains(ge.target)&&!((K=R.current)!=null&&K.contains(ge.target))&&T(!1)};return document.addEventListener("mousedown",ie),()=>document.removeEventListener("mousedown",ie)},[]);const B=async ie=>{const ge=ie||l;if(ge.trim()){g(!0),T(!1),O("");try{const K=await $1.smartSearch(ge),J=await $1.explainResults(ge,K.searchIntent,K.totalResults);O(J),n(ge,K.searchIntent),t&&t(K.businesses,K.searchIntent)}catch(K){console.error("Search error:",K),n(ge)}finally{g(!1)}}},G=ie=>{ie.key==="Enter"&&B()},z=ie=>{a(ie),B(ie)},ee=["Restaurant Mumbai under 1 crore","Tech startup Bangalore","Franchise opportunities","Profitable retail business","Manufacturing business"];return e.jsxs("div",{className:er("relative w-full",i),children:[e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute left-3 top-1/2 -translate-y-1/2",children:e.jsx(md,{className:"h-5 w-5 text-muted-foreground"})}),e.jsx(Wt,{ref:R,type:"text",placeholder:r,value:l,onChange:ie=>a(ie.target.value),onKeyDown:G,onFocus:()=>l.length>=3&&T(!0),className:"pl-11 pr-24 h-12 text-base",disabled:p}),e.jsx("div",{className:"absolute right-2 top-1/2 -translate-y-1/2 flex items-center gap-2",children:p?e.jsxs("div",{className:"flex items-center gap-2 px-3 py-1.5 bg-primary/10 rounded-md",children:[e.jsx(eo,{className:"h-4 w-4 animate-spin text-primary"}),e.jsx("span",{className:"text-xs font-medium text-primary",children:"Searching..."})]}):e.jsxs(ze,{size:"sm",onClick:()=>B(),disabled:!l.trim(),className:"h-8",children:[e.jsx(hd,{className:"h-4 w-4 mr-1"}),"Search"]})})]}),E&&e.jsx("div",{className:"mt-3 p-3 bg-blue-50 dark:bg-blue-950/20 rounded-lg border border-blue-200 dark:border-blue-800",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(hd,{className:"h-4 w-4 text-blue-600 dark:text-blue-400 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-blue-900 dark:text-blue-100",children:E})]})}),S&&w.length>0&&e.jsx(ot,{ref:F,className:"absolute top-full left-0 right-0 mt-2 p-2 z-50 shadow-lg",children:e.jsx("div",{className:"space-y-1",children:w.map((ie,ge)=>e.jsxs("button",{onClick:()=>z(ie),className:"w-full text-left px-3 py-2 hover:bg-muted rounded-md transition-colors flex items-center gap-2 group",children:[e.jsx(md,{className:"h-4 w-4 text-muted-foreground group-hover:text-foreground"}),e.jsx("span",{className:"text-sm",children:ie})]},ge))})}),!l&&o&&e.jsxs("div",{className:"mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(na,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm font-medium text-muted-foreground",children:"Popular Searches"})]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ee.map((ie,ge)=>e.jsx(Gt,{variant:"outline",className:"cursor-pointer hover:bg-muted transition-colors",onClick:()=>{a(ie),B(ie)},children:ie},ge))})]})]})}var l$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],c$=l$.reduce((n,t)=>{const r=t0(`Primitive.${t}`),i=M.forwardRef((o,l)=>{const{asChild:a,...p}=o,g=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...p,ref:l})});return i.displayName=`Primitive.${t}`,{...n,[t]:i}},{}),u$="Label",nT=M.forwardRef((n,t)=>e.jsx(c$.label,{...n,ref:t,onMouseDown:r=>{var o;r.target.closest("button, input, select, textarea")||((o=n.onMouseDown)==null||o.call(n,r),!r.defaultPrevented&&r.detail>1&&r.preventDefault())}}));nT.displayName=u$;var iT=nT;const d$=r0("text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70"),ct=M.forwardRef(({className:n,...t},r)=>e.jsx(iT,{ref:r,className:er(d$(),n),...t}));ct.displayName=iT.displayName;const h$=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU");class sT{static async findMatches(t,r){try{const{data:i,error:o}=await ar.from("businesses").select("*").eq("status","active").order("created_at",{ascending:!1});if(o)throw o;if(!i||i.length===0)return[];let l=i;t.budget&&(l=i.filter(p=>{const g=p.price||0;return g>=(t.budget.min||0)&&g<=(t.budget.max||1/0)})),t.industries&&t.industries.length>0&&(l=l.filter(p=>t.industries.some(g=>{var w;return(w=p.industry)==null?void 0:w.toLowerCase().includes(g.toLowerCase())}))),t.locations&&t.locations.length>0&&(l=l.filter(p=>t.locations.some(g=>{var w,j;return((w=p.city)==null?void 0:w.toLowerCase().includes(g.toLowerCase()))||((j=p.state)==null?void 0:j.toLowerCase().includes(g.toLowerCase()))})));const a=[];for(const p of l.slice(0,20))try{const g=await this.analyzeMatch(p,t,r);g.matchScore>=60&&a.push({businessId:p.id,business:p,...g})}catch(g){console.error("Error analyzing business match:",g)}return a.sort((p,g)=>g.matchScore-p.matchScore),a.slice(0,10)}catch(i){throw console.error("Matchmaker error:",i),i}}static async analyzeMatch(t,r,i){var l,a,p,g,w,j,S,T,E,O,R;const o=`As an AI business matchmaker, analyze how well this business matches the buyer's profile:

BUSINESS:
- Name: ${t.name}
- Industry: ${t.industry}
- Location: ${t.city}, ${t.state}
- Price: ${((l=t.price)==null?void 0:l.toLocaleString())||"N/A"}
- Revenue: ${((a=t.revenue)==null?void 0:a.toLocaleString())||"N/A"}
- Employees: ${t.employees||"N/A"}
- Description: ${(p=t.description)==null?void 0:p.substring(0,300)}

BUYER PREFERENCES:
- Budget: ${((w=(g=r.budget)==null?void 0:g.min)==null?void 0:w.toLocaleString())||0} - ${((S=(j=r.budget)==null?void 0:j.max)==null?void 0:S.toLocaleString())||"unlimited"}
- Interested Industries: ${((T=r.industries)==null?void 0:T.join(", "))||"Any"}
- Preferred Locations: ${((E=r.locations)==null?void 0:E.join(", "))||"Any"}
- Experience: ${((O=r.experience)==null?void 0:O.join(", "))||"N/A"}
- Investment Goals: ${r.investmentGoals||"N/A"}
- Risk Tolerance: ${r.riskTolerance||"medium"}
- Time Commitment: ${r.timeCommitment||"N/A"}
- Skills: ${((R=r.skills)==null?void 0:R.join(", "))||"N/A"}

Provide your analysis in this EXACT JSON format (no markdown, no code blocks):
{
  "matchScore": <number 0-100>,
  "matchReasons": ["reason 1", "reason 2", "reason 3"],
  "concerns": ["concern 1", "concern 2"],
  "aiRecommendation": "<one paragraph recommendation>"
}`;try{const z=(await(await this.model.generateContent(o)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),ee=JSON.parse(z);return{matchScore:Math.min(100,Math.max(0,ee.matchScore||50)),matchReasons:ee.matchReasons||[],concerns:ee.concerns||[],aiRecommendation:ee.aiRecommendation||"Further analysis recommended."}}catch(F){return console.error("AI analysis error:",F),this.basicMatch(t,r)}}static basicMatch(t,r){let i=50;const o=[],l=[];if(r.budget){const a=t.price||0;a>=r.budget.min&&a<=r.budget.max?(i+=20,o.push("Price within budget")):l.push("Price outside preferred budget range")}return r.industries&&r.industries.length>0&&r.industries.some(p=>{var g;return(g=t.industry)==null?void 0:g.toLowerCase().includes(p.toLowerCase())})&&(i+=15,o.push("Matches industry preference")),r.locations&&r.locations.length>0&&r.locations.some(p=>{var g,w;return((g=t.city)==null?void 0:g.toLowerCase().includes(p.toLowerCase()))||((w=t.state)==null?void 0:w.toLowerCase().includes(p.toLowerCase()))})&&(i+=15,o.push("In preferred location")),{matchScore:Math.min(100,i),matchReasons:o.length>0?o:["Basic compatibility"],concerns:l.length>0?l:[],aiRecommendation:`This business has a ${i}% compatibility match with your profile. ${o.join(". ")}.`}}static async getPersonalizedRecommendations(t,r=5){try{const{data:i}=await ar.from("saved_listings").select("*, businesses(*)").eq("user_id",t).eq("listing_type","business"),{data:o}=await ar.from("inquiries").select("*, businesses(*)").eq("sender_id",t).eq("listing_type","business"),l=[...(i||[]).map(S=>S.businesses),...(o||[]).map(S=>S.businesses)].filter(Boolean),a=[...new Set(l.map(S=>S.industry))],p=[...new Set(l.map(S=>S.city))],g=l.reduce((S,T)=>S+(T.price||0),0)/l.length||0,w={industries:a,locations:p,budget:{min:g*.7,max:g*1.3}};return(await this.findMatches(w)).slice(0,r).map(S=>S.business)}catch(i){return console.error("Recommendation error:",i),[]}}}nf(sT,"model",h$.getGenerativeModel({model:"gemini-pro"}));function f$({userId:n,onClose:t,className:r}){const[i,o]=M.useState("preferences"),[l,a]=M.useState(!1),[p,g]=M.useState([]),[w,j]=M.useState([1e6,1e7]),[S,T]=M.useState([]),[E,O]=M.useState([]),[R,F]=M.useState([]),[B,G]=M.useState(""),[z,ee]=M.useState("medium"),[ie,ge]=M.useState("full-time"),K=["Food & Beverage","Technology","Retail","Healthcare","Education","Manufacturing","Services","E-commerce"],J=["Mumbai","Delhi","Bangalore","Hyderabad","Chennai","Pune","Ahmedabad","Kolkata"],Se=async()=>{a(!0);try{const fe={budget:{min:w[0],max:w[1]},industries:S.length>0?S:void 0,locations:E.length>0?E:void 0,experience:R.length>0?R:void 0,investmentGoals:B||void 0,riskTolerance:z,timeCommitment:ie},ye=await sT.findMatches(fe);g(ye),o("results")}catch(fe){console.error("Matchmaker error:",fe)}finally{a(!1)}},_e=fe=>{T(ye=>ye.includes(fe)?ye.filter(Fe=>Fe!==fe):[...ye,fe])},re=fe=>{O(ye=>ye.includes(fe)?ye.filter(Fe=>Fe!==fe):[...ye,fe])},ce=fe=>fe>=1e7?`${(fe/1e7).toFixed(1)}Cr`:fe>=1e5?`${(fe/1e5).toFixed(1)}L`:`${fe.toLocaleString()}`;return e.jsx("div",{className:er("w-full",r),children:i==="preferences"?e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(hd,{className:"h-5 w-5 text-purple-500"}),"AI Business Matchmaker"]}),e.jsx(Ji,{children:"Tell us what you're looking for, and our AI will find perfect business matches"})]}),t&&e.jsx(ze,{variant:"ghost",size:"icon",onClick:t,children:e.jsx(Gc,{className:"h-4 w-4"})})]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Budget Range"}),e.jsx("div",{className:"px-2",children:e.jsx($v,{value:w,onValueChange:fe=>j(fe),min:5e5,max:5e7,step:5e5,className:"w-full"})}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground",children:[e.jsx("span",{children:ce(w[0])}),e.jsx("span",{children:ce(w[1])})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Preferred Industries (Select multiple)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:K.map(fe=>e.jsxs(Gt,{variant:S.includes(fe)?"default":"outline",className:"cursor-pointer transition-colors",onClick:()=>_e(fe),children:[fe,S.includes(fe)&&e.jsx(Nn,{className:"h-3 w-3 ml-1"})]},fe))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Preferred Locations (Select multiple)"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:J.map(fe=>e.jsxs(Gt,{variant:E.includes(fe)?"default":"outline",className:"cursor-pointer transition-colors",onClick:()=>re(fe),children:[fe,E.includes(fe)&&e.jsx(Nn,{className:"h-3 w-3 ml-1"})]},fe))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Risk Tolerance"}),e.jsxs(ys,{value:z,onValueChange:fe=>ee(fe),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"low",children:"Low - Stable, established businesses"}),e.jsx(pr,{value:"medium",children:"Medium - Balanced risk-reward"}),e.jsx(pr,{value:"high",children:"High - Growth potential, higher risk"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Time Commitment"}),e.jsxs(ys,{value:ie,onValueChange:fe=>ge(fe),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"part-time",children:"Part-time / Passive Income"}),e.jsx(pr,{value:"full-time",children:"Full-time Involvement"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Investment Goal (Optional)"}),e.jsx(Wt,{placeholder:"e.g., Passive income, Quick growth, Long-term stability",value:B,onChange:fe=>G(fe.target.value)})]}),e.jsx(ze,{onClick:Se,disabled:l,className:"w-full",size:"lg",children:l?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Finding Perfect Matches..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hd,{className:"mr-2 h-4 w-4"}),"Find My Perfect Businesses"]})})]})]}):e.jsxs("div",{className:"space-y-6",children:[e.jsx(ot,{children:e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5 text-green-500"}),p.length," Perfect Matches Found"]}),e.jsx(Ji,{children:"Ranked by AI compatibility with your preferences"})]}),e.jsx(ze,{variant:"outline",onClick:()=>o("preferences"),children:"Refine Search"})]})})}),p.length===0?e.jsx(ot,{children:e.jsxs(ut,{className:"py-12 text-center",children:[e.jsx(jc,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"font-semibold text-lg mb-2",children:"No matches found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your preferences to see more results"}),e.jsx(ze,{onClick:()=>o("preferences"),children:"Update Preferences"})]})}):p.map((fe,ye)=>e.jsxs(ot,{className:"overflow-hidden",children:[e.jsxs("div",{className:"bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-950/20 dark:to-blue-950/20 p-4 border-b",children:[e.jsxs("div",{className:"flex items-center justify-between mb-3",children:[e.jsxs(Gt,{variant:"secondary",className:"text-base px-3 py-1",children:["#",ye+1," Match Score: ",fe.matchScore,"%"]}),e.jsx("div",{className:"flex gap-1",children:Array.from({length:5}).map((Fe,Q)=>e.jsx("div",{className:er("h-2 w-8 rounded-full",Q<Math.round(fe.matchScore/20)?"bg-green-500":"bg-gray-200 dark:bg-gray-700")},Q))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Why this matches:"}),e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1 mt-1",children:fe.matchReasons.map((Fe,Q)=>e.jsxs("li",{children:[" ",Fe]},Q))})]})]}),fe.concerns.length>0&&e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(jc,{className:"h-4 w-4 text-amber-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:"Points to consider:"}),e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1 mt-1",children:fe.concerns.map((Fe,Q)=>e.jsxs("li",{children:[" ",Fe]},Q))})]})]}),e.jsx("div",{className:"bg-white/50 dark:bg-black/20 rounded-lg p-3 mt-3",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(hd,{className:"h-4 w-4 text-purple-600 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-xs font-medium text-purple-900 dark:text-purple-100",children:"AI Recommendation:"}),e.jsx("p",{className:"text-xs text-purple-800 dark:text-purple-200 mt-1",children:fe.aiRecommendation})]})]})})]})]}),e.jsx(ut,{className:"p-4",children:e.jsx(xm,{business:fe.business})})]},fe.businessId))]})})}function p$(n,t=[]){let r=[];function i(l,a){const p=M.createContext(a);p.displayName=l+"Context";const g=r.length;r=[...r,a];const w=S=>{var B;const{scope:T,children:E,...O}=S,R=((B=T==null?void 0:T[n])==null?void 0:B[g])||p,F=M.useMemo(()=>O,Object.values(O));return e.jsx(R.Provider,{value:F,children:E})};w.displayName=l+"Provider";function j(S,T){var R;const E=((R=T==null?void 0:T[n])==null?void 0:R[g])||p,O=M.useContext(E);if(O)return O;if(a!==void 0)return a;throw new Error(`\`${S}\` must be used within \`${l}\``)}return[w,j]}const o=()=>{const l=r.map(a=>M.createContext(a));return function(p){const g=(p==null?void 0:p[n])||l;return M.useMemo(()=>({[`__scope${n}`]:{...p,[n]:g}}),[p,g])}};return o.scopeName=n,[i,m$(o,...t)]}function m$(...n){const t=n[0];if(n.length===1)return t;const r=()=>{const i=n.map(o=>({useScope:o(),scopeName:o.scopeName}));return function(l){const a=i.reduce((p,{useScope:g,scopeName:w})=>{const S=g(l)[`__scope${w}`];return{...p,...S}},{});return M.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return r.scopeName=t.scopeName,r}var g$=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","select","span","svg","ul"],aT=g$.reduce((n,t)=>{const r=t0(`Primitive.${t}`),i=M.forwardRef((o,l)=>{const{asChild:a,...p}=o,g=a?r:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),e.jsx(g,{...p,ref:l})});return i.displayName=`Primitive.${t}`,{...n,[t]:i}},{}),Wj="Progress",Yj=100,[v$]=p$(Wj),[y$,x$]=v$(Wj),oT=M.forwardRef((n,t)=>{const{__scopeProgress:r,value:i=null,max:o,getValueLabel:l=b$,...a}=n;(o||o===0)&&!NS(o)&&console.error(_$(`${o}`,"Progress"));const p=NS(o)?o:Yj;i!==null&&!SS(i,p)&&console.error(w$(`${i}`,"Progress"));const g=SS(i,p)?i:null,w=bb(g)?l(g,p):void 0;return e.jsx(y$,{scope:r,value:g,max:p,children:e.jsx(aT.div,{"aria-valuemax":p,"aria-valuemin":0,"aria-valuenow":bb(g)?g:void 0,"aria-valuetext":w,role:"progressbar","data-state":uT(g,p),"data-value":g??void 0,"data-max":p,...a,ref:t})})});oT.displayName=Wj;var lT="ProgressIndicator",cT=M.forwardRef((n,t)=>{const{__scopeProgress:r,...i}=n,o=x$(lT,r);return e.jsx(aT.div,{"data-state":uT(o.value,o.max),"data-value":o.value??void 0,"data-max":o.max,...i,ref:t})});cT.displayName=lT;function b$(n,t){return`${Math.round(n/t*100)}%`}function uT(n,t){return n==null?"indeterminate":n===t?"complete":"loading"}function bb(n){return typeof n=="number"}function NS(n){return bb(n)&&!isNaN(n)&&n>0}function SS(n,t){return bb(n)&&!isNaN(n)&&n<=t&&n>=0}function _$(n,t){return`Invalid prop \`max\` of value \`${n}\` supplied to \`${t}\`. Only numbers greater than 0 are valid max values. Defaulting to \`${Yj}\`.`}function w$(n,t){return`Invalid prop \`value\` of value \`${n}\` supplied to \`${t}\`. The \`value\` prop must be:
  - a positive number
  - less than the value passed to \`max\` (or ${Yj} if no \`max\` prop is set)
  - \`null\` or \`undefined\` if the progress is indeterminate.

Defaulting to \`null\`.`}var dT=oT,j$=cT;const vo=M.forwardRef(({className:n,value:t,...r},i)=>e.jsx(dT,{ref:i,className:er("relative h-2 w-full overflow-hidden rounded-full bg-primary/20",n),...r,children:e.jsx(j$,{className:"h-full w-full flex-1 bg-primary transition-all",style:{transform:`translateX(-${100-(t||0)}%)`}})}));vo.displayName=dT.displayName;var d_="Tabs",[N$]=Du(d_,[Zb]),hT=Zb(),[S$,Zj]=N$(d_),fT=M.forwardRef((n,t)=>{const{__scopeTabs:r,value:i,onValueChange:o,defaultValue:l,orientation:a="horizontal",dir:p,activationMode:g="automatic",...w}=n,j=_y(p),[S,T]=bf({prop:i,onChange:o,defaultProp:l??"",caller:d_});return e.jsx(S$,{scope:r,baseId:Dh(),value:S,onValueChange:T,orientation:a,dir:j,activationMode:g,children:e.jsx(Cn.div,{dir:j,"data-orientation":a,...w,ref:t})})});fT.displayName=d_;var pT="TabsList",mT=M.forwardRef((n,t)=>{const{__scopeTabs:r,loop:i=!0,...o}=n,l=Zj(pT,r),a=hT(r);return e.jsx(tC,{asChild:!0,...a,orientation:l.orientation,dir:l.dir,loop:i,children:e.jsx(Cn.div,{role:"tablist","aria-orientation":l.orientation,...o,ref:t})})});mT.displayName=pT;var gT="TabsTrigger",vT=M.forwardRef((n,t)=>{const{__scopeTabs:r,value:i,disabled:o=!1,...l}=n,a=Zj(gT,r),p=hT(r),g=bT(a.baseId,i),w=_T(a.baseId,i),j=i===a.value;return e.jsx(rC,{asChild:!0,...p,focusable:!o,active:j,children:e.jsx(Cn.button,{type:"button",role:"tab","aria-selected":j,"aria-controls":w,"data-state":j?"active":"inactive","data-disabled":o?"":void 0,disabled:o,id:g,...l,ref:t,onMouseDown:Dr(n.onMouseDown,S=>{!o&&S.button===0&&S.ctrlKey===!1?a.onValueChange(i):S.preventDefault()}),onKeyDown:Dr(n.onKeyDown,S=>{[" ","Enter"].includes(S.key)&&a.onValueChange(i)}),onFocus:Dr(n.onFocus,()=>{const S=a.activationMode!=="manual";!j&&!o&&S&&a.onValueChange(i)})})})});vT.displayName=gT;var yT="TabsContent",xT=M.forwardRef((n,t)=>{const{__scopeTabs:r,value:i,forceMount:o,children:l,...a}=n,p=Zj(yT,r),g=bT(p.baseId,i),w=_T(p.baseId,i),j=i===p.value,S=M.useRef(j);return M.useEffect(()=>{const T=requestAnimationFrame(()=>S.current=!1);return()=>cancelAnimationFrame(T)},[]),e.jsx(Jc,{present:o||j,children:({present:T})=>e.jsx(Cn.div,{"data-state":j?"active":"inactive","data-orientation":p.orientation,role:"tabpanel","aria-labelledby":g,hidden:!T,id:w,tabIndex:0,...a,ref:t,style:{...n.style,animationDuration:S.current?"0s":void 0},children:T&&l})})});xT.displayName=yT;function bT(n,t){return`${n}-trigger-${t}`}function _T(n,t){return`${n}-content-${t}`}var A$=fT,wT=mT,jT=vT,NT=xT;const _p=A$,Sf=M.forwardRef(({className:n,...t},r)=>e.jsx(wT,{ref:r,className:er("inline-flex h-9 items-center justify-center rounded-lg bg-muted p-1 text-muted-foreground",n),...t}));Sf.displayName=wT.displayName;const Di=M.forwardRef(({className:n,...t},r)=>e.jsx(jT,{ref:r,className:er("inline-flex items-center justify-center whitespace-nowrap rounded-md px-3 py-1 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow",n),...t}));Di.displayName=jT.displayName;const Qi=M.forwardRef(({className:n,...t},r)=>e.jsx(NT,{ref:r,className:er("mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2",n),...t}));Qi.displayName=NT.displayName;var h_="Checkbox",[C$]=Du(h_),[k$,Kj]=C$(h_);function E$(n){const{__scopeCheckbox:t,checked:r,children:i,defaultChecked:o,disabled:l,form:a,name:p,onCheckedChange:g,required:w,value:j="on",internal_do_not_use_render:S}=n,[T,E]=bf({prop:r,defaultProp:o??!1,onChange:g,caller:h_}),[O,R]=M.useState(null),[F,B]=M.useState(null),G=M.useRef(!1),z=O?!!a||!!O.closest("form"):!0,ee={checked:T,disabled:l,setChecked:E,control:O,setControl:R,name:p,form:a,value:j,hasConsumerStoppedPropagationRef:G,required:w,defaultChecked:bm(o)?!1:o,isFormControl:z,bubbleInput:F,setBubbleInput:B};return e.jsx(k$,{scope:t,...ee,children:T$(S)?S(ee):i})}var ST="CheckboxTrigger",AT=M.forwardRef(({__scopeCheckbox:n,onKeyDown:t,onClick:r,...i},o)=>{const{control:l,value:a,disabled:p,checked:g,required:w,setControl:j,setChecked:S,hasConsumerStoppedPropagationRef:T,isFormControl:E,bubbleInput:O}=Kj(ST,n),R=Wn(o,j),F=M.useRef(g);return M.useEffect(()=>{const B=l==null?void 0:l.form;if(B){const G=()=>S(F.current);return B.addEventListener("reset",G),()=>B.removeEventListener("reset",G)}},[l,S]),e.jsx(Cn.button,{type:"button",role:"checkbox","aria-checked":bm(g)?"mixed":g,"aria-required":w,"data-state":PT(g),"data-disabled":p?"":void 0,disabled:p,value:a,...i,ref:R,onKeyDown:Dr(t,B=>{B.key==="Enter"&&B.preventDefault()}),onClick:Dr(r,B=>{S(G=>bm(G)?!0:!G),O&&E&&(T.current=B.isPropagationStopped(),T.current||B.stopPropagation())})})});AT.displayName=ST;var Xj=M.forwardRef((n,t)=>{const{__scopeCheckbox:r,name:i,checked:o,defaultChecked:l,required:a,disabled:p,value:g,onCheckedChange:w,form:j,...S}=n;return e.jsx(E$,{__scopeCheckbox:r,checked:o,defaultChecked:l,disabled:p,required:a,onCheckedChange:w,name:i,form:j,value:g,internal_do_not_use_render:({isFormControl:T})=>e.jsxs(e.Fragment,{children:[e.jsx(AT,{...S,ref:t,__scopeCheckbox:r}),T&&e.jsx(TT,{__scopeCheckbox:r})]})})});Xj.displayName=h_;var CT="CheckboxIndicator",kT=M.forwardRef((n,t)=>{const{__scopeCheckbox:r,forceMount:i,...o}=n,l=Kj(CT,r);return e.jsx(Jc,{present:i||bm(l.checked)||l.checked===!0,children:e.jsx(Cn.span,{"data-state":PT(l.checked),"data-disabled":l.disabled?"":void 0,...o,ref:t,style:{pointerEvents:"none",...n.style}})})});kT.displayName=CT;var ET="CheckboxBubbleInput",TT=M.forwardRef(({__scopeCheckbox:n,...t},r)=>{const{control:i,hasConsumerStoppedPropagationRef:o,checked:l,defaultChecked:a,required:p,disabled:g,name:w,value:j,form:S,bubbleInput:T,setBubbleInput:E}=Kj(ET,n),O=Wn(r,E),R=s_(l),F=Wb(i);M.useEffect(()=>{const G=T;if(!G)return;const z=window.HTMLInputElement.prototype,ie=Object.getOwnPropertyDescriptor(z,"checked").set,ge=!o.current;if(R!==l&&ie){const K=new Event("click",{bubbles:ge});G.indeterminate=bm(l),ie.call(G,bm(l)?!1:l),G.dispatchEvent(K)}},[T,R,l,o]);const B=M.useRef(bm(l)?!1:l);return e.jsx(Cn.input,{type:"checkbox","aria-hidden":!0,defaultChecked:a??B.current,required:p,disabled:g,name:w,value:j,form:S,...t,tabIndex:-1,ref:O,style:{...t.style,...F,position:"absolute",pointerEvents:"none",opacity:0,margin:0,transform:"translateX(-100%)"}})});TT.displayName=ET;function T$(n){return typeof n=="function"}function bm(n){return n==="indeterminate"}function PT(n){return bm(n)?"indeterminate":n?"checked":"unchecked"}const ss=M.forwardRef(({className:n,...t},r)=>e.jsx(Xj,{ref:r,className:er("peer h-4 w-4 shrink-0 rounded-sm border border-primary shadow focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground",n),...t,children:e.jsx(kT,{className:er("flex items-center justify-center text-current"),children:e.jsx(Rm,{className:"h-4 w-4"})})}));ss.displayName=Xj.displayName;const P$=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU");class RT{static async generateDueDiligenceReport(t){var i;const r=`As a senior M&A advisor, conduct a comprehensive due diligence analysis for this business acquisition:

BUSINESS DETAILS:
- Name: ${t.name}
- Industry: ${t.industry}
- Asking Price: ${t.price.toLocaleString()}
- Annual Revenue: ${t.revenue?`${t.revenue.toLocaleString()}`:"Not disclosed"}
- Annual Profit: ${t.profit?`${t.profit.toLocaleString()}`:"Not disclosed"}
- Employees: ${t.employees||"Not specified"}
- Years in Business: ${t.established_year?new Date().getFullYear()-t.established_year:"Unknown"}
- Location: ${t.location||"Not specified"}
- Assets: ${t.assets?`${t.assets.toLocaleString()}`:"Not disclosed"}
- Liabilities: ${t.liabilities?`${t.liabilities.toLocaleString()}`:"Not disclosed"}
- Description: ${(i=t.description)==null?void 0:i.substring(0,500)}

Provide a detailed due diligence report in this EXACT JSON format (no markdown):
{
  "overallRiskScore": <number 0-100>,
  "recommendation": "<Proceed|Proceed with Caution|High Risk|Do Not Proceed>",
  "criticalIssues": ["issue 1", "issue 2"],
  "warnings": ["warning 1", "warning 2", "warning 3"],
  "positiveFactors": ["factor 1", "factor 2", "factor 3"],
  "financialAnalysis": {
    "score": <number 0-100>,
    "findings": ["finding 1", "finding 2", "finding 3"],
    "redFlags": ["flag 1", "flag 2"]
  },
  "legalAnalysis": {
    "score": <number 0-100>,
    "findings": ["finding 1", "finding 2"],
    "redFlags": ["flag 1"]
  },
  "operationalAnalysis": {
    "score": <number 0-100>,
    "findings": ["finding 1", "finding 2"],
    "redFlags": ["flag 1"]
  },
  "marketAnalysis": {
    "score": <number 0-100>,
    "findings": ["finding 1", "finding 2"],
    "opportunities": ["opportunity 1", "opportunity 2"]
  }
}`;try{const a=(await(await this.model.generateContent(r)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),p=JSON.parse(a),g=await jg.generateDueDiligenceChecklist({industry:t.industry,transactionSize:t.price}),w=this.parseChecklistText(g);return{...p,checklist:w}}catch(o){return console.error("Due diligence generation error:",o),this.generateBasicReport(t)}}static parseChecklistText(t){const r=[],i=t.split(`
`);let o="General";for(const l of i){const a=l.trim();if(a){if(a.match(/^\d+\.\s+[A-Z]/)){o=a.replace(/^\d+\.\s+/,"").replace(/:$/,"");continue}if(a.startsWith("-")||a.startsWith("")||a.match(/^\d+\)/)){const p=a.replace(/^[-]\s*/,"").replace(/^\d+\)\s*/,"");let g="Recommended";p.toLowerCase().includes("critical")||p.toLowerCase().includes("must")?g="Critical":(p.toLowerCase().includes("important")||p.toLowerCase().includes("should"))&&(g="Important"),r.push({category:o,item:p.replace(/\(Critical\)/gi,"").replace(/\(Important\)/gi,"").trim(),priority:g,completed:!1})}}}return r}static generateBasicReport(t){const r=t.revenue?t.price/t.revenue:0,i=t.revenue&&t.profit?t.profit/t.revenue*100:0,o=r>5?70:r>3?50:30;return{overallRiskScore:o,recommendation:o>60?"Proceed with Caution":"Proceed",criticalIssues:r>5?["High price-to-revenue ratio"]:[],warnings:["Request complete financial statements for last 3 years","Verify all legal licenses and permits","Conduct customer concentration analysis"],positiveFactors:[t.established_year&&new Date().getFullYear()-t.established_year>5?"Established business with proven track record":"Business opportunity in growing market",i>15?"Healthy profit margins":"Revenue generating business"],financialAnalysis:{score:i>15?75:60,findings:[`Price-to-revenue multiple: ${r.toFixed(2)}x`,i>0?`Profit margin: ${i.toFixed(1)}%`:"Profit data needed"],redFlags:r>5?["Valuation appears high"]:[]},legalAnalysis:{score:70,findings:["Legal verification required","Check for pending litigation"],redFlags:[]},operationalAnalysis:{score:70,findings:["Operational assessment needed","Review customer contracts"],redFlags:[]},marketAnalysis:{score:75,findings:[`${t.industry} industry analysis needed`],opportunities:["Market expansion potential","Digital transformation opportunities"]},checklist:[{category:"Financial",item:"Review 3 years of tax returns",priority:"Critical",completed:!1},{category:"Financial",item:"Analyze profit & loss statements",priority:"Critical",completed:!1},{category:"Financial",item:"Verify accounts receivable/payable",priority:"Important",completed:!1},{category:"Legal",item:"Verify business licenses",priority:"Critical",completed:!1},{category:"Legal",item:"Check for litigation history",priority:"Important",completed:!1},{category:"Operational",item:"Interview key employees",priority:"Important",completed:!1},{category:"Operational",item:"Review supplier contracts",priority:"Recommended",completed:!1},{category:"Market",item:"Analyze competitive landscape",priority:"Important",completed:!1}]}}static async analyzeSpecificArea(t,r,i){var a,p;const l=`${{financial:`Conduct detailed financial due diligence for ${r.name}. Revenue: ${(a=r.revenue)==null?void 0:a.toLocaleString()}, Profit: ${(p=r.profit)==null?void 0:p.toLocaleString()}.`,legal:`Conduct legal due diligence for ${r.name} in ${r.industry} industry, located in ${r.location}.`,operational:`Analyze operational aspects of ${r.name}. Employees: ${r.employees}, Years: ${r.established_year?new Date().getFullYear()-r.established_year:"Unknown"}.`,market:`Analyze market position for ${r.name} in ${r.industry} industry in ${r.location}.`}[t]}

Provide analysis in this JSON format:
{
  "score": <number 0-100>,
  "findings": ["finding 1", "finding 2", "finding 3"],
  "recommendations": ["recommendation 1", "recommendation 2"]
}`;try{const j=(await(await this.model.generateContent(l)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(j)}catch{return{score:70,findings:[`Detailed ${t} analysis required`,"Request additional documentation"],recommendations:[`Engage ${t} specialist`,"Conduct thorough review"]}}}static async generateRiskAssessment(t){var i,o;const r=`Assess investment risks for acquiring ${t.name}:

Price: ${(i=t.price)==null?void 0:i.toLocaleString()}
Revenue: ${((o=t.revenue)==null?void 0:o.toLocaleString())||"Not disclosed"}
Industry: ${t.industry}
Location: ${t.location}

Provide risk assessment in JSON:
{
  "riskLevel": "<Low|Medium|High|Very High>",
  "riskScore": <number 0-100>,
  "keyRisks": [
    {"risk": "Risk description", "impact": "Impact description", "mitigation": "Mitigation strategy"}
  ]
}`;try{const p=(await(await this.model.generateContent(r)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(p)}catch{return{riskLevel:"Medium",riskScore:50,keyRisks:[{risk:"Financial verification needed",impact:"Cannot fully assess financial health",mitigation:"Request 3 years of audited financials"}]}}}}nf(RT,"model",P$.getGenerativeModel({model:"gemini-pro"}));function R$({businessData:n,onClose:t,className:r}){const[i,o]=M.useState(null),[l,a]=M.useState(!1),[p,g]=M.useState("overview"),w=async()=>{a(!0);try{const T=await RT.generateDueDiligenceReport(n);o(T)}catch(T){console.error("Error generating due diligence report:",T)}finally{a(!1)}},j=T=>T>=75?"text-red-600 bg-red-50 border-red-200":T>=50?"text-orange-600 bg-orange-50 border-orange-200":T>=25?"text-yellow-600 bg-yellow-50 border-yellow-200":"text-green-600 bg-green-50 border-green-200",S=T=>T>=75?e.jsx(zx,{className:"h-5 w-5"}):T>=50?e.jsx(Xc,{className:"h-5 w-5"}):T>=25?e.jsx(jc,{className:"h-5 w-5"}):e.jsx(Nn,{className:"h-5 w-5"});return e.jsx("div",{className:er("w-full",r),children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"h-6 w-6 text-blue-600"}),"Due Diligence Report"]}),e.jsxs(Ji,{children:["AI-powered comprehensive analysis for ",n.name]})]}),!i&&e.jsx(ze,{onClick:w,disabled:l,children:l?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Generating..."]}):e.jsxs(e.Fragment,{children:[e.jsx(bs,{className:"mr-2 h-4 w-4"}),"Generate Report"]})})]})}),i&&e.jsxs(ut,{children:[e.jsxs(_p,{value:p,onValueChange:g,children:[e.jsxs(Sf,{className:"grid w-full grid-cols-5",children:[e.jsx(Di,{value:"overview",children:"Overview"}),e.jsx(Di,{value:"financial",children:"Financial"}),e.jsx(Di,{value:"legal",children:"Legal"}),e.jsx(Di,{value:"operational",children:"Operational"}),e.jsx(Di,{value:"checklist",children:"Checklist"})]}),e.jsxs(Qi,{value:"overview",className:"space-y-4",children:[e.jsx(ot,{className:er("border-2",j(i.overallRiskScore)),children:e.jsxs(ut,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[S(i.overallRiskScore),e.jsx("h3",{className:"font-semibold",children:"Overall Risk Assessment"})]}),e.jsx(Gt,{variant:i.overallRiskScore>=50?"destructive":"default",children:i.recommendation})]}),e.jsx(vo,{value:100-i.overallRiskScore,className:"h-3"}),e.jsxs("p",{className:"text-sm mt-2",children:["Risk Score: ",i.overallRiskScore,"/100 (Lower is better)"]})]})}),i.criticalIssues.length>0&&e.jsxs(ot,{className:"border-red-200 bg-red-50",children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"text-red-800 flex items-center gap-2",children:[e.jsx(zx,{className:"h-5 w-5"}),"Critical Issues"]})}),e.jsx(ut,{children:e.jsx("ul",{className:"space-y-2",children:i.criticalIssues.map((T,E)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-red-700",children:[e.jsx(Xc,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),T]},E))})})]}),i.warnings.length>0&&e.jsxs(ot,{className:"border-orange-200 bg-orange-50",children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"text-orange-800 flex items-center gap-2",children:[e.jsx(Xc,{className:"h-5 w-5"}),"Warnings"]})}),e.jsx(ut,{children:e.jsx("ul",{className:"space-y-2",children:i.warnings.map((T,E)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-orange-700",children:[e.jsx(jc,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),T]},E))})})]}),i.positiveFactors.length>0&&e.jsxs(ot,{className:"border-green-200 bg-green-50",children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"text-green-800 flex items-center gap-2",children:[e.jsx(Nn,{className:"h-5 w-5"}),"Positive Factors"]})}),e.jsx(ut,{children:e.jsx("ul",{className:"space-y-2",children:i.positiveFactors.map((T,E)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-green-700",children:[e.jsx(Nn,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),T]},E))})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(I1,{title:"Financial",score:i.financialAnalysis.score,icon:e.jsx(ey,{className:"h-5 w-5"})}),e.jsx(I1,{title:"Legal",score:i.legalAnalysis.score,icon:e.jsx(pN,{className:"h-5 w-5"})}),e.jsx(I1,{title:"Operational",score:i.operationalAnalysis.score,icon:e.jsx(gm,{className:"h-5 w-5"})}),e.jsx(I1,{title:"Market",score:i.marketAnalysis.score,icon:e.jsx(na,{className:"h-5 w-5"})})]})]}),e.jsx(Qi,{value:"financial",children:e.jsx(m2,{title:"Financial Due Diligence",score:i.financialAnalysis.score,findings:i.financialAnalysis.findings,redFlags:i.financialAnalysis.redFlags,icon:e.jsx(ey,{className:"h-6 w-6 text-blue-600"})})}),e.jsx(Qi,{value:"legal",children:e.jsx(m2,{title:"Legal Due Diligence",score:i.legalAnalysis.score,findings:i.legalAnalysis.findings,redFlags:i.legalAnalysis.redFlags,icon:e.jsx(pN,{className:"h-6 w-6 text-purple-600"})})}),e.jsx(Qi,{value:"operational",children:e.jsx(m2,{title:"Operational Due Diligence",score:i.operationalAnalysis.score,findings:i.operationalAnalysis.findings,redFlags:i.operationalAnalysis.redFlags,icon:e.jsx(gm,{className:"h-6 w-6 text-green-600"})})}),e.jsx(Qi,{value:"checklist",children:e.jsx(I$,{checklist:i.checklist})})]}),e.jsxs("div",{className:"flex gap-3 mt-6",children:[e.jsxs(ze,{className:"flex-1",children:[e.jsx(wc,{className:"mr-2 h-4 w-4"}),"Download Report"]}),e.jsxs(ze,{variant:"outline",className:"flex-1",children:[e.jsx(Ys,{className:"mr-2 h-4 w-4"}),"Share with Advisor"]})]})]})]})})}function I1({title:n,score:t,icon:r}){const i=o=>o>=75?"text-green-600":o>=50?"text-yellow-600":"text-red-600";return e.jsx(ot,{children:e.jsxs(ut,{className:"pt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("div",{className:i(t),children:r}),e.jsx("h4",{className:"font-medium text-sm",children:n})]}),e.jsxs("div",{className:er("text-2xl font-bold",i(t)),children:[t,e.jsx("span",{className:"text-sm text-muted-foreground",children:"/100"})]})]})})}function m2({title:n,score:t,findings:r,redFlags:i,icon:o}){return e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[o,n]}),e.jsxs("div",{className:"mt-4",children:[e.jsx(vo,{value:t,className:"h-3"}),e.jsxs("p",{className:"text-sm text-muted-foreground mt-2",children:["Score: ",t,"/100"]})]})]}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Key Findings:"}),e.jsx("ul",{className:"space-y-2",children:r.map((l,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Nn,{className:"h-4 w-4 text-blue-600 mt-0.5 flex-shrink-0"}),l]},a))})]}),i.length>0&&e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2 text-red-600",children:"Red Flags:"}),e.jsx("ul",{className:"space-y-2",children:i.map((l,a)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm text-red-600",children:[e.jsx(Xc,{className:"h-4 w-4 mt-0.5 flex-shrink-0"}),l]},a))})]})]})]})}function I$({checklist:n}){const[t,r]=M.useState(n),i=l=>{const a=[...t];a[l].completed=!a[l].completed,r(a)},o=[...new Set(t.map(l=>l.category))];return e.jsx("div",{className:"space-y-4",children:o.map(l=>e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{className:"text-lg",children:l})}),e.jsx(ut,{children:e.jsx("ul",{className:"space-y-3",children:t.filter(a=>a.category===l).map((a,p)=>e.jsxs("li",{className:"flex items-start gap-3",children:[e.jsx(ss,{checked:a.completed,onCheckedChange:()=>{const g=t.findIndex(w=>w.category===a.category&&w.item===a.item);i(g)}}),e.jsxs("div",{className:"flex-1",children:[e.jsx("p",{className:er("text-sm",a.completed&&"line-through text-muted-foreground"),children:a.item}),e.jsx(Gt,{variant:a.priority==="Critical"?"destructive":a.priority==="Important"?"default":"secondary",className:"text-xs mt-1",children:a.priority})]})]},p))})})]},l))})}const L$=r0("relative w-full rounded-lg border px-4 py-3 text-sm [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground [&>svg~*]:pl-7",{variants:{variant:{default:"bg-background text-foreground",destructive:"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive"}},defaultVariants:{variant:"default"}}),bl=M.forwardRef(({className:n,variant:t,...r},i)=>e.jsx("div",{ref:i,role:"alert",className:er(L$({variant:t}),n),...r}));bl.displayName="Alert";const M$=M.forwardRef(({className:n,...t},r)=>e.jsx("h5",{ref:r,className:er("mb-1 font-medium leading-none tracking-tight",n),...t}));M$.displayName="AlertTitle";const _l=M.forwardRef(({className:n,...t},r)=>e.jsx("div",{ref:r,className:er("text-sm [&_p]:leading-relaxed",n),...t}));_l.displayName="AlertDescription";const D$=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU");class uw{static async analyzeDocument(t,r){const i=r||this.detectDocumentType(t),o=`Analyze this ${i} document and provide insights:

DOCUMENT TEXT:
${t.substring(0,15e3)}

Provide analysis in this EXACT JSON format (no markdown):
{
  "documentType": "${i}",
  "summary": "<2-3 sentence summary>",
  "keyFindings": ["finding 1", "finding 2", "finding 3"],
  "redFlags": ["red flag 1", "red flag 2"],
  "recommendations": ["recommendation 1", "recommendation 2"],
  "extractedData": {
    "revenue": <number or null>,
    "profit": <number or null>,
    "assets": <number or null>,
    "liabilities": <number or null>,
    "dates": ["date1", "date2"],
    "parties": ["party1", "party2"],
    "amounts": [amount1, amount2]
  },
  "confidenceScore": <number 0-100>
}`;try{const p=(await(await this.model.generateContent(o)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(p)}catch(l){return console.error("Document analysis error:",l),this.generateBasicAnalysis(t,i)}}static async extractTextFromFile(t){const r=t.type;if(r==="text/plain")return await t.text();if(r==="application/pdf")try{return await this.extractPDFText(t)}catch{throw new Error("PDF extraction not yet implemented. Please use text files.")}throw r==="application/vnd.openxmlformats-officedocument.wordprocessingml.document"?new Error("DOCX extraction not yet implemented. Please use text or PDF files."):new Error("Unsupported file type. Please upload PDF or TXT files.")}static async extractPDFText(t){try{if(typeof window<"u"&&window.pdfjsLib){const r=window.pdfjsLib,i=await t.arrayBuffer(),o=await r.getDocument({data:i}).promise;let l="";for(let a=1;a<=o.numPages;a++){const w=(await(await o.getPage(a)).getTextContent()).items.map(j=>j.str).join(" ");l+=w+`
`}return l}}catch(r){console.error("PDF extraction error:",r)}try{return await t.text()}catch{return`[PDF Document: ${t.name}]

Note: PDF text extraction requires pdf.js library. Please install pdfjs-dist or provide the text manually.`}}static detectDocumentType(t){const r=t.toLowerCase(),o=["revenue","profit","loss","balance sheet","income statement","cash flow","assets","liabilities","ebitda"].some(w=>r.includes(w)),a=["agreement","contract","terms","conditions","liability","indemnity","clause","party","whereas"].some(w=>r.includes(w)),g=["process","procedure","workflow","operations","staff","inventory","production"].some(w=>r.includes(w));return o?"financial":a?"legal":g?"operational":"financial"}static generateBasicAnalysis(t,r){const i=t.split(/\s+/).length;return{documentType:r,summary:`${r.charAt(0).toUpperCase()+r.slice(1)} document with approximately ${i} words. Manual review recommended.`,keyFindings:["Document uploaded successfully","Preliminary scan completed","Detailed analysis requires expert review"],redFlags:[],recommendations:["Share with financial advisor for detailed review","Verify all numbers and dates","Request clarification on any unclear terms"],confidenceScore:50}}static async compareDocuments(t){if(t.length<2)throw new Error("Need at least 2 documents to compare");const r=`Compare these ${t.length} business documents and identify discrepancies:

${t.map((i,o)=>`
DOCUMENT ${o+1}: ${i.name}
${i.text.substring(0,3e3)}
`).join(`
`)}

Provide comparison in JSON:
{
  "summary": "<overall comparison summary>",
  "discrepancies": ["discrepancy 1", "discrepancy 2"],
  "consistentFactors": ["consistent factor 1", "consistent factor 2"]
}`;try{const l=(await(await this.model.generateContent(r)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(l)}catch{return{summary:"Documents uploaded for comparison",discrepancies:["Manual comparison required"],consistentFactors:["All documents received"]}}}static async extractDataFields(t,r){const i=`Extract these specific fields from the document:

Fields to extract: ${r.join(", ")}

Document text:
${t.substring(0,5e3)}

Return JSON object with field names as keys and extracted values.`;try{const a=(await(await this.model.generateContent(i)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(a)}catch{const l={};return r.forEach(a=>{l[a]=null}),l}}static async verifyDocument(t,r,i){const o=`As a document verification expert, analyze this ${r} document for authenticity:

DOCUMENT TEXT:
${t.substring(0,1e4)}

METADATA:
${i?JSON.stringify(i,null,2):"None provided"}

Check for:
1. Document structure and formatting consistency
2. Numerical consistency and plausibility
3. Professional language and terminology
4. Completeness of required information
5. Signs of alteration or tampering
6. Date and timeline consistency
7. Signature and authorization presence
8. Industry-standard format compliance

Provide analysis in EXACT JSON format (no markdown):
{
  "isAuthentic": <boolean>,
  "authenticityScore": <0-100>,
  "issues": ["issue 1", "issue 2"],
  "suggestions": ["suggestion 1", "suggestion 2"],
  "documentIntegrity": "<High|Medium|Low|Questionable>",
  "tamperedSections": ["section 1 if found"]
}`;try{const p=(await(await this.model.generateContent(o)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(p)}catch(l){return console.error("Document verification error:",l),{isAuthentic:!0,authenticityScore:70,issues:[],suggestions:["Manual verification recommended"],documentIntegrity:"Medium",tamperedSections:[]}}}static async redactSensitiveData(t,r){const i={redactEmails:!0,redactPhones:!0,redactSSN:!0,redactAccountNumbers:!0,redactNames:!1,...r};let o=t;const l=[];if(i.redactEmails){const a=/\b[A-Za-z0-9._%+-]+@[A-Za-z0-9.-]+\.[A-Z|a-z]{2,}\b/g,p=t.matchAll(a);for(const g of p){const w=g[0],j="[EMAIL REDACTED]";o=o.replace(w,j),l.push({type:"email",originalValue:w,redactedValue:j,location:{start:g.index||0,end:(g.index||0)+w.length}})}}if(i.redactPhones){const a=/(\+?\d{1,3}[-.\s]?)?(\(?\d{3}\)?[-.\s]?)?\d{3}[-.\s]?\d{4}/g,p=t.matchAll(a);for(const g of p){const w=g[0];if(w.length>=10){const j="[PHONE REDACTED]";o=o.replace(w,j),l.push({type:"phone",originalValue:w,redactedValue:j,location:{start:g.index||0,end:(g.index||0)+w.length}})}}}if(i.redactSSN){const a=/\b\d{3}-\d{2}-\d{4}\b/g,p=/\b\d{4}\s\d{4}\s\d{4}\b/g,g=t.matchAll(a);for(const j of g){const S=j[0],T="[SSN REDACTED]";o=o.replace(S,T),l.push({type:"ssn",originalValue:S,redactedValue:T,location:{start:j.index||0,end:(j.index||0)+S.length}})}const w=t.matchAll(p);for(const j of w){const S=j[0],T="[AADHAAR REDACTED]";o=o.replace(S,T),l.push({type:"ssn",originalValue:S,redactedValue:T,location:{start:j.index||0,end:(j.index||0)+S.length}})}}if(i.redactAccountNumbers){const a=/\b(?:Account|A\/C|Acct)[:\s#]*([0-9]{6,18})\b/gi,p=t.matchAll(a);for(const g of p){const w=g[0],j="[ACCOUNT REDACTED]";o=o.replace(w,j),l.push({type:"account",originalValue:w,redactedValue:j,location:{start:g.index||0,end:(g.index||0)+w.length}})}}if(i.redactNames){const a=await this.redactNamesWithAI(o);o=a.text,l.push(...a.items)}if(i.customPatterns)for(const{pattern:a,replacement:p}of i.customPatterns){const g=t.matchAll(a);for(const w of g){const j=w[0];o=o.replace(j,p),l.push({type:"custom",originalValue:j,redactedValue:p,location:{start:w.index||0,end:(w.index||0)+j.length}})}}return{originalText:t,redactedText:o,redactedItems:l,redactionCount:l.length}}static async redactNamesWithAI(t){const r=`Identify all person names in this text and list them:

TEXT:
${t.substring(0,5e3)}

Return JSON array of names found:
["Name 1", "Name 2", ...]`;try{const l=(await(await this.model.generateContent(r)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim(),a=JSON.parse(l);let p=t;const g=[];return a.forEach(w=>{const j=p.indexOf(w);if(j!==-1){const S="[NAME REDACTED]";p=p.replace(w,S),g.push({type:"name",originalValue:w,redactedValue:S,location:{start:j,end:j+w.length}})}}),{text:p,items:g}}catch{return{text:t,items:[]}}}static async autoFillFromDocument(t,r){r.map(o=>o.fieldName).join(", ");const i=`Extract data from this document to auto-fill form fields:

DOCUMENT:
${t.substring(0,8e3)}

FORM FIELDS TO FILL:
${r.map(o=>`- ${o.fieldName} (${o.fieldType}): ${o.label}`).join(`
`)}

Return EXACT JSON format (no markdown):
{
  "<field_name>": "<extracted value>",
  ...
}

Only include fields where you found relevant data. Leave out fields with no data.`;try{const a=(await(await this.model.generateContent(i)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(a)}catch(o){return console.error("Auto-fill extraction error:",o),{}}}}nf(uw,"model",D$.getGenerativeModel({model:"gemini-pro"}));function O$({onClose:n,className:t}){const[r,i]=M.useState([]),[o,l]=M.useState(new Map),[a,p]=M.useState(!1),[g,w]=M.useState(null),j=M.useRef(null),S=F=>{const B=Array.from(F.target.files||[]);i(G=>[...G,...B]),w(null)},T=F=>{i(B=>B.filter((G,z)=>z!==F)),l(B=>{const G=new Map(B);return G.delete(r[F].name),G})},E=async()=>{if(r.length===0)return;p(!0),w(null);const F=new Map(o);for(const B of r)try{const G=await uw.extractTextFromFile(B),z=await uw.analyzeDocument(G);F.set(B.name,z)}catch(G){w(`Error analyzing ${B.name}: ${G.message}`)}l(F),p(!1)},O=F=>{switch(F){case"financial":return"bg-blue-100 text-blue-800 border-blue-200";case"legal":return"bg-purple-100 text-purple-800 border-purple-200";case"operational":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},R=F=>F>=75?"text-green-600":F>=50?"text-yellow-600":"text-red-600";return e.jsx("div",{className:er("w-full",t),children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"h-6 w-6 text-blue-600"}),"AI Document Analyzer"]}),e.jsx(Ji,{children:"Upload business documents for AI-powered analysis"})]}),n&&e.jsx(ze,{variant:"ghost",size:"icon",onClick:n,children:e.jsx(Gc,{className:"h-4 w-4"})})]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:er("border-2 border-dashed rounded-lg p-8 text-center transition-colors",r.length>0?"border-blue-300 bg-blue-50":"border-gray-300 hover:border-blue-400"),onClick:()=>{var F;return(F=j.current)==null?void 0:F.click()},style:{cursor:"pointer"},children:[e.jsx(Jd,{className:"h-12 w-12 mx-auto text-gray-400 mb-4"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"Click to upload or drag and drop"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"PDF, TXT files (Max 10MB per file)"}),e.jsx("input",{ref:j,type:"file",multiple:!0,accept:".pdf,.txt",onChange:S,className:"hidden"})]}),g&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:g})}),r.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h3",{className:"font-medium",children:["Uploaded Documents (",r.length,")"]}),e.jsx(ze,{onClick:E,disabled:a,size:"sm",children:a?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Analyzing..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Ua,{className:"mr-2 h-4 w-4"}),"Analyze All"]})})]}),e.jsx("div",{className:"space-y-2",children:r.map((F,B)=>{const G=o.get(F.name);return e.jsx(ot,{className:"border-2",children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Ys,{className:"h-4 w-4 text-gray-500"}),e.jsx("span",{className:"font-medium text-sm",children:F.name}),e.jsxs("span",{className:"text-xs text-muted-foreground",children:["(",(F.size/1024).toFixed(1)," KB)"]}),G&&e.jsx(Gt,{className:er("text-xs",O(G.documentType)),children:G.documentType.toUpperCase()})]}),G&&e.jsxs("div",{className:"space-y-3 mt-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"text-xs text-muted-foreground",children:"Confidence:"}),e.jsxs("span",{className:er("text-sm font-semibold",R(G.confidenceScore)),children:[G.confidenceScore,"%"]})]}),e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-gray-700 mb-1",children:"Summary:"}),e.jsx("p",{className:"text-sm text-gray-600",children:G.summary})]}),G.keyFindings.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-gray-700 mb-1",children:"Key Findings:"}),e.jsx("ul",{className:"space-y-1",children:G.keyFindings.map((z,ee)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs",children:[e.jsx(Nn,{className:"h-3 w-3 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:z})]},ee))})]}),G.redFlags.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-red-700 mb-1",children:"Red Flags:"}),e.jsx("ul",{className:"space-y-1",children:G.redFlags.map((z,ee)=>e.jsxs("li",{className:"flex items-start gap-2 text-xs text-red-600",children:[e.jsx(Xc,{className:"h-3 w-3 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:z})]},ee))})]}),G.recommendations.length>0&&e.jsxs("div",{children:[e.jsx("h5",{className:"text-xs font-medium text-blue-700 mb-1",children:"Recommendations:"}),e.jsx("ul",{className:"space-y-1",children:G.recommendations.map((z,ee)=>e.jsxs("li",{className:"text-xs text-blue-600",children:[" ",z]},ee))})]}),G.extractedData&&Object.keys(G.extractedData).length>0&&e.jsxs("div",{className:"bg-gray-50 p-3 rounded-md",children:[e.jsx("h5",{className:"text-xs font-medium text-gray-700 mb-2",children:"Extracted Data:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs",children:[G.extractedData.revenue&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Revenue: "}),e.jsxs("span",{className:"font-medium",children:["",G.extractedData.revenue.toLocaleString()]})]}),G.extractedData.profit&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Profit: "}),e.jsxs("span",{className:"font-medium",children:["",G.extractedData.profit.toLocaleString()]})]}),G.extractedData.assets&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Assets: "}),e.jsxs("span",{className:"font-medium",children:["",G.extractedData.assets.toLocaleString()]})]}),G.extractedData.liabilities&&e.jsxs("div",{children:[e.jsx("span",{className:"text-muted-foreground",children:"Liabilities: "}),e.jsxs("span",{className:"font-medium",children:["",G.extractedData.liabilities.toLocaleString()]})]})]})]})]})]}),e.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>T(B),className:"ml-2",children:e.jsx(Gc,{className:"h-4 w-4"})})]})})},B)})})]}),o.size>0&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ze,{className:"flex-1",children:[e.jsx(wc,{className:"mr-2 h-4 w-4"}),"Download Analysis Report"]}),e.jsx(ze,{variant:"outline",className:"flex-1",children:"Share with Advisor"})]}),e.jsxs("div",{className:"bg-blue-50 p-4 rounded-lg",children:[e.jsx("h4",{className:"text-sm font-medium text-blue-900 mb-2",children:"Supported Documents:"}),e.jsxs("div",{className:"grid grid-cols-2 gap-2 text-xs text-blue-800",children:[e.jsx("div",{children:" Financial Statements (P&L, Balance Sheet)"}),e.jsx("div",{children:" Tax Returns"}),e.jsx("div",{children:" Legal Agreements"}),e.jsx("div",{children:" Contracts"}),e.jsx("div",{children:" Operational Reports"}),e.jsx("div",{children:" Business Plans"})]})]})]})]})})}const z$=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU");class IT{static async qualifyBuyer(t,r){try{const i=this.calculateFinancialScore(t,r),o=this.calculateExperienceScore(t,r),l=this.calculateSeriousnessScore(t),a=this.calculateFitScore(t,r),p=Math.round(i*.35+o*.25+l*.25+a*.15),g=await this.analyzeWithAI(t,r,{financialScore:i,experienceScore:o,seriousnessScore:l,fitScore:a,overallScore:p}),w=this.getQualificationLevel(p),j=this.getPriorityRank(p,l),S=this.estimateCloseProbability(p,l,t.previousInquiries||0);return{leadId:t.userId,overallScore:p,qualificationLevel:w,financialScore:i,experienceScore:o,seriousnessScore:l,fitScore:a,strengths:g.strengths,concerns:g.concerns,recommendedAction:g.recommendedAction,nextSteps:g.nextSteps,estimatedCloseProbability:S,priorityRank:j}}catch(i){throw console.error("Buyer qualification error:",i),i}}static calculateFinancialScore(t,r){if(!t.budget||!r.price)return 50;const i=t.budget.max,o=t.budget.min,l=r.price;return l>=o&&l<=i?100:l<=i*1.2?80:l<=i*1.4?60:l>i*1.5?30:l<o*.7?40:50}static calculateExperienceScore(t,r){return!t.experience||t.experience.length===0?40:t.experience.some(o=>{var l,a;return((l=r.industry)==null?void 0:l.toLowerCase().includes(o.toLowerCase()))||o.toLowerCase().includes(((a=r.industry)==null?void 0:a.toLowerCase())||"")})?90:t.experience.length>0?65:40}static calculateSeriousnessScore(t){let r=0;r+=(t.profileCompleteness||0)*.3,t.verificationStatus==="verified"?r+=25:t.verificationStatus==="pending"&&(r+=15);const i=t.previousInquiries||0;i>=5?r+=15:i>=3?r+=10:i>=1&&(r+=5);const o=t.savedListings||0;o>=10?r+=10:o>=5?r+=7:o>=1&&(r+=4);const l=t.timeOnPlatform||0;if(l>=30?r+=10:l>=14?r+=7:l>=7&&(r+=4),t.inquiryMessage){const a=t.inquiryMessage.split(" ").length;a>=50?r+=10:a>=20?r+=7:a>=10&&(r+=4)}return Math.min(100,Math.round(r))}static calculateFitScore(t,r){let i=50;return t.industries&&r.industry&&t.industries.some(l=>{var a;return(a=r.industry)==null?void 0:a.toLowerCase().includes(l.toLowerCase())})&&(i+=30),t.investmentTimeline==="immediate"||t.investmentTimeline==="1-3 months"?i+=20:t.investmentTimeline==="3-6 months"&&(i+=10),Math.min(100,i)}static async analyzeWithAI(t,r,i){var l,a,p,g,w,j,S,T;const o=`As a lead qualification expert, analyze this buyer inquiry:

BUYER PROFILE:
- Budget: ${((a=(l=t.budget)==null?void 0:l.min)==null?void 0:a.toLocaleString())||"N/A"} - ${((g=(p=t.budget)==null?void 0:p.max)==null?void 0:g.toLocaleString())||"N/A"}
- Industries: ${((w=t.industries)==null?void 0:w.join(", "))||"Not specified"}
- Experience: ${((j=t.experience)==null?void 0:j.join(", "))||"No experience listed"}
- Occupation: ${t.currentOccupation||"Not specified"}
- Timeline: ${t.investmentTimeline||"Not specified"}
- Previous Inquiries: ${t.previousInquiries||0}
- Profile Completeness: ${t.profileCompleteness||0}%
- Verification: ${t.verificationStatus||"unverified"}
- Message: "${t.inquiryMessage||"No message"}"

BUSINESS:
- Price: ${((S=r.price)==null?void 0:S.toLocaleString())||"N/A"}
- Industry: ${r.industry||"N/A"}
- Revenue: ${((T=r.revenue)==null?void 0:T.toLocaleString())||"N/A"}

SCORES:
- Financial: ${i.financialScore}/100
- Experience: ${i.experienceScore}/100
- Seriousness: ${i.seriousnessScore}/100
- Overall: ${i.overallScore}/100

Provide analysis in this EXACT JSON format (no markdown):
{
  "strengths": ["strength 1", "strength 2", "strength 3"],
  "concerns": ["concern 1", "concern 2"],
  "recommendedAction": "One clear action to take",
  "nextSteps": ["step 1", "step 2", "step 3"]
}`;try{const R=(await(await this.model.generateContent(o)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(R)}catch{return this.generateFallbackAnalysis(t,r,i)}}static generateFallbackAnalysis(t,r,i){const o=[],l=[];i.financialScore>=80&&o.push("Budget aligns well with business price"),i.experienceScore>=70&&o.push("Has relevant industry experience"),i.seriousnessScore>=70&&o.push("Shows high engagement on platform"),t.verificationStatus==="verified"&&o.push("Verified buyer profile"),i.financialScore<60&&l.push("Budget may be insufficient"),i.experienceScore<50&&l.push("Limited industry experience"),i.seriousnessScore<50&&l.push("Low engagement signals"),(!t.verificationStatus||t.verificationStatus==="unverified")&&l.push("Profile not verified");const a=i.overallScore>=70?"Schedule a call or meeting to discuss the opportunity":i.overallScore>=50?"Send detailed information and gauge interest":"Request more information before investing time";return{strengths:o,concerns:l,recommendedAction:a,nextSteps:["Review buyer's complete profile","Verify financial capability","Schedule discovery call"]}}static getQualificationLevel(t){return t>=75?"Hot Lead":t>=55?"Warm Lead":t>=35?"Cold Lead":"Unqualified"}static getPriorityRank(t,r){return t>=75&&r>=70?"High":t>=55?"Medium":"Low"}static estimateCloseProbability(t,r,i){let o=t*.6+r*.4;return i>=5&&(o*=1.1),i===0&&(o*=.8),Math.min(100,Math.round(o))}static async qualifyAndRankBuyers(t,r){return(await Promise.all(t.map(o=>this.qualifyBuyer(o,r)))).sort((o,l)=>l.overallScore-o.overallScore)}static async getBuyerInsights(t){var r,i,o,l,a;try{const{data:p}=await ar.from("inquiries").select("*, sender:profiles!sender_id(*)").eq("recipient_id",t).order("created_at",{ascending:!1});if(!p||p.length===0)return{totalInquiries:0,hotLeads:0,warmLeads:0,coldLeads:0,averageQualificationScore:0,topLeads:[]};const g=[];for(const E of p.slice(0,50)){const O={userId:E.sender_id,name:(r=E.sender)==null?void 0:r.full_name,email:(i=E.sender)==null?void 0:i.email,phone:(o=E.sender)==null?void 0:o.phone,inquiryMessage:E.message,previousInquiries:p.filter(F=>F.sender_id===E.sender_id).length},R=await this.qualifyBuyer(O,{id:E.listing_id,price:(l=E.business)==null?void 0:l.price,industry:(a=E.business)==null?void 0:a.industry});g.push(R)}const w=g.filter(E=>E.qualificationLevel==="Hot Lead").length,j=g.filter(E=>E.qualificationLevel==="Warm Lead").length,S=g.filter(E=>E.qualificationLevel==="Cold Lead").length,T=g.reduce((E,O)=>E+O.overallScore,0)/g.length;return{totalInquiries:p.length,hotLeads:w,warmLeads:j,coldLeads:S,averageQualificationScore:Math.round(T),topLeads:g.slice(0,10)}}catch(p){throw console.error("Buyer insights error:",p),p}}}nf(IT,"model",z$.getGenerativeModel({model:"gemini-pro"}));function F$({sellerId:n,onClose:t,className:r}){var T;const[i,o]=M.useState(null),[l,a]=M.useState(!0),[p,g]=M.useState(null);M.useEffect(()=>{w()},[n]);const w=async()=>{a(!0);try{const E=await IT.getBuyerInsights(n);o(E)}catch(E){console.error("Error loading buyer insights:",E)}finally{a(!1)}},j=E=>{switch(E){case"Hot Lead":return e.jsx(rb,{className:"h-5 w-5 text-red-500"});case"Warm Lead":return e.jsx(gN,{className:"h-5 w-5 text-orange-500"});case"Cold Lead":return e.jsx(mN,{className:"h-5 w-5 text-blue-500"});default:return e.jsx(jc,{className:"h-5 w-5 text-gray-500"})}},S=E=>{switch(E){case"Hot Lead":return"bg-red-50 border-red-200 dark:bg-red-950/20";case"Warm Lead":return"bg-orange-50 border-orange-200 dark:bg-orange-950/20";case"Cold Lead":return"bg-blue-50 border-blue-200 dark:bg-blue-950/20";default:return"bg-gray-50 border-gray-200"}};return l?e.jsx(ot,{className:er("w-full",r),children:e.jsxs(ut,{className:"p-8 text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Analyzing your leads..."})]})}):e.jsxs("div",{className:er("w-full max-w-6xl mx-auto",r),children:[t&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(ze,{variant:"ghost",size:"icon",onClick:t,children:e.jsx(Gc,{className:"h-4 w-4"})})}),e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsxs(Ht,{className:"text-2xl flex items-center gap-2",children:[e.jsx(Go,{className:"h-6 w-6"}),"AI Buyer Qualification Dashboard"]}),e.jsx(Ji,{children:"AI-powered lead scoring and prioritization for your listings"})]}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Inquiries"}),e.jsx("div",{className:"text-2xl font-bold",children:(i==null?void 0:i.totalInquiries)||0})]})}),e.jsx(ot,{className:"bg-red-50 border-red-200 dark:bg-red-950/20",children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(rb,{className:"h-4 w-4"}),"Hot Leads"]}),e.jsx("div",{className:"text-2xl font-bold text-red-600",children:(i==null?void 0:i.hotLeads)||0})]})}),e.jsx(ot,{className:"bg-orange-50 border-orange-200 dark:bg-orange-950/20",children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(gN,{className:"h-4 w-4"}),"Warm Leads"]}),e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:(i==null?void 0:i.warmLeads)||0})]})}),e.jsx(ot,{className:"bg-blue-50 border-blue-200 dark:bg-blue-950/20",children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"text-sm text-muted-foreground flex items-center gap-1",children:[e.jsx(mN,{className:"h-4 w-4"}),"Cold Leads"]}),e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:(i==null?void 0:i.coldLeads)||0})]})})]}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx("span",{className:"text-sm font-medium",children:"Average Lead Quality Score"}),e.jsxs("span",{className:"text-xl font-bold",children:[(i==null?void 0:i.averageQualificationScore)||0,"/100"]})]}),e.jsx(vo,{value:(i==null?void 0:i.averageQualificationScore)||0,className:"h-2"})]})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-4",children:"Top Qualified Leads"}),e.jsxs("div",{className:"space-y-3",children:[(T=i==null?void 0:i.topLeads)==null?void 0:T.map((E,O)=>e.jsx(ot,{className:er("cursor-pointer transition-all hover:shadow-lg",S(E.qualificationLevel),(p==null?void 0:p.leadId)===E.leadId&&"ring-2 ring-primary"),onClick:()=>g((p==null?void 0:p.leadId)===E.leadId?null:E),children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[j(E.qualificationLevel),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsxs("span",{className:"font-semibold",children:["Lead #",O+1]}),e.jsxs(Gt,{variant:E.priorityRank==="High"?"destructive":"secondary",children:[E.priorityRank," Priority"]}),e.jsx(Gt,{variant:"outline",children:E.qualificationLevel})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-2 mt-2",children:[e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"Financial"}),e.jsxs("div",{className:"font-semibold",children:[E.financialScore,"/100"]})]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"Experience"}),e.jsxs("div",{className:"font-semibold",children:[E.experienceScore,"/100"]})]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"Seriousness"}),e.jsxs("div",{className:"font-semibold",children:[E.seriousnessScore,"/100"]})]}),e.jsxs("div",{className:"text-xs",children:[e.jsx("div",{className:"text-muted-foreground",children:"Overall"}),e.jsxs("div",{className:"font-bold text-primary",children:[E.overallScore,"/100"]})]})]}),(p==null?void 0:p.leadId)===E.leadId&&e.jsxs("div",{className:"mt-4 pt-4 border-t space-y-3",children:[e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold mb-2 flex items-center gap-1",children:[e.jsx(zD,{className:"h-4 w-4 text-green-600"}),"Strengths"]}),e.jsx("ul",{className:"space-y-1",children:E.strengths.map((R,F)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{children:R})]},F))})]}),E.concerns.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"text-sm font-semibold mb-2 flex items-center gap-1",children:[e.jsx(jc,{className:"h-4 w-4 text-orange-600"}),"Concerns"]}),e.jsx("ul",{className:"space-y-1",children:E.concerns.map((R,F)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsx("span",{className:"text-orange-600",children:""}),e.jsx("span",{children:R})]},F))})]}),e.jsxs("div",{className:"bg-white dark:bg-gray-900 p-3 rounded-lg",children:[e.jsx("div",{className:"text-sm font-semibold mb-1",children:"AI Recommendation"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:E.recommendedAction})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm font-semibold mb-2",children:"Next Steps"}),e.jsx("ol",{className:"space-y-1",children:E.nextSteps.map((R,F)=>e.jsxs("li",{className:"text-sm text-muted-foreground flex items-start gap-2",children:[e.jsxs("span",{className:"font-semibold",children:[F+1,"."]}),e.jsx("span",{children:R})]},F))})]}),e.jsxs("div",{className:"bg-blue-50 dark:bg-blue-950/20 p-3 rounded-lg",children:[e.jsxs("div",{className:"flex items-center justify-between mb-1",children:[e.jsx("span",{className:"text-sm font-semibold",children:"Estimated Close Probability"}),e.jsxs("span",{className:"text-lg font-bold text-blue-600",children:[E.estimatedCloseProbability,"%"]})]}),e.jsx(vo,{value:E.estimatedCloseProbability,className:"h-2"})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ze,{size:"sm",className:"flex-1",children:[e.jsx(bu,{className:"h-4 w-4 mr-2"}),"Contact Lead"]}),e.jsxs(ze,{size:"sm",variant:"outline",className:"flex-1",children:[e.jsx(gp,{className:"h-4 w-4 mr-2"}),"Schedule Call"]})]})]})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Score"}),e.jsx("div",{className:"text-2xl font-bold",children:E.overallScore})]})]})})},E.leadId)),(!(i!=null&&i.topLeads)||i.topLeads.length===0)&&e.jsx(ot,{children:e.jsxs(ut,{className:"p-8 text-center text-muted-foreground",children:[e.jsx(Go,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No buyer inquiries yet. Start promoting your listings to attract qualified buyers!"})]})})]})]})]})]})]})}const B$=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU");class LT{static async matchFranchisee(t,r){const i=[];for(const o of r){const l=await this.scoreMatch(t,o);l.matchScore>=40&&i.push(l)}return i.sort((o,l)=>l.matchScore-o.matchScore)}static async scoreMatch(t,r){const i=this.calculateFinancialFit(t,r),o=this.calculateExperienceFit(t,r),l=this.calculatePersonalityFit(t,r),a=this.calculateCommitmentFit(t,r),p=Math.round(i*.35+o*.3+l*.2+a*.15),g=await this.analyzeMatchWithAI(t,r,{financialFitScore:i,experienceFitScore:o,personalityFitScore:l,commitmentFitScore:a,matchScore:p}),w=this.getMatchLevel(p),j=this.calculateSuccessProbability(p,t,r);return{franchiseeId:t.userId,franchise:r,matchScore:p,financialFitScore:i,experienceFitScore:o,personalityFitScore:l,commitmentFitScore:a,successProbability:j,matchLevel:w,strengths:g.strengths,concerns:g.concerns,recommendation:g.recommendation,expectedROI:g.expectedROI,estimatedBreakEven:g.estimatedBreakEven}}static calculateFinancialFit(t,r){let i=0;if(t.budget){const o=r.totalInvestment.max,l=t.budget.max;l>=o?i+=40:l>=o*.8?i+=30:l>=o*.6?i+=20:i+=10}if(t.liquidCapital&&r.minimumLiquidCapital){const o=t.liquidCapital/r.minimumLiquidCapital;o>=1.5?i+=30:o>=1.2?i+=25:o>=1?i+=20:o>=.8&&(i+=10)}else i+=15;if(t.netWorth&&r.minimumNetWorth){const o=t.netWorth/r.minimumNetWorth;o>=2?i+=20:o>=1.5?i+=15:o>=1?i+=10:o>=.8&&(i+=5)}else i+=10;return t.creditScore&&(t.creditScore>=750?i+=10:t.creditScore>=700?i+=7:t.creditScore>=650&&(i+=4)),Math.min(100,i)}static calculateExperienceFit(t,r){let i=0;if(t.businessExperience&&t.businessExperience.length>0){const o=t.businessExperience.some(l=>r.industry.toLowerCase().includes(l.toLowerCase())||l.toLowerCase().includes(r.industry.toLowerCase()));o&&t.industryExperience?t.industryExperience>=5?i+=40:t.industryExperience>=3?i+=30:t.industryExperience>=1&&(i+=20):o?i+=25:t.businessExperience.length>0&&(i+=15)}if(t.managementExperience&&(t.managementExperience>=10?i+=30:t.managementExperience>=5?i+=25:t.managementExperience>=3?i+=20:t.managementExperience>=1&&(i+=15)),t.educationLevel)switch(t.educationLevel){case"phd":case"masters":i+=20;break;case"bachelors":i+=15;break;case"high-school":i+=10;break}return t.multiUnitInterest&&r.multiUnitDiscount&&(i+=10),Math.min(100,i)}static calculatePersonalityFit(t,r){let i=50;if(t.personalityTraits&&t.personalityTraits.length>0){const o=["leadership","decisive","ambitious","confident"];t.personalityTraits.some(j=>o.some(S=>j.toLowerCase().includes(S)))&&(i+=15);const a=["collaborative","team player","cooperative"];t.personalityTraits.some(j=>a.some(S=>j.toLowerCase().includes(S)))&&(i+=15);const g=["detail-oriented","organized","systematic"];if(t.personalityTraits.some(j=>g.some(S=>j.toLowerCase().includes(S)))&&(i+=10),r.industry.includes("Service")||r.industry.includes("Food")){const j=["customer-focused","friendly","service-oriented"];t.personalityTraits.some(T=>j.some(E=>T.toLowerCase().includes(E)))&&(i+=10)}}return Math.min(100,i)}static calculateCommitmentFit(t,r){let i=50;return t.timeCommitment==="full-time"?i+=50:t.timeCommitment==="semi-absentee"?r.successRate&&r.successRate>=80?i+=35:i+=25:t.timeCommitment==="part-time"?i+=20:t.timeCommitment==="absentee"&&(i+=15),t.preferredLocations&&r.territoriesAvailable&&(t.preferredLocations.some(l=>r.territoriesAvailable.some(a=>a.toLowerCase().includes(l.toLowerCase())))?i+=25:i+=10),t.hasReferencesChecked&&(i+=25),Math.min(100,i)}static async analyzeMatchWithAI(t,r,i){var l,a,p,g,w,j,S;const o=`As a franchise matching expert, analyze this franchisee-franchise match:

FRANCHISEE PROFILE:
- Experience: ${t.managementExperience||0} years management, ${t.industryExperience||0} years in industry
- Education: ${t.educationLevel||"not specified"}
- Budget: ${((a=(l=t.budget)==null?void 0:l.min)==null?void 0:a.toLocaleString())||"N/A"} - ${((g=(p=t.budget)==null?void 0:p.max)==null?void 0:g.toLocaleString())||"N/A"}
- Liquid Capital: ${((w=t.liquidCapital)==null?void 0:w.toLocaleString())||"N/A"}
- Net Worth: ${((j=t.netWorth)==null?void 0:j.toLocaleString())||"N/A"}
- Time Commitment: ${t.timeCommitment||"not specified"}
- Multi-unit Interest: ${t.multiUnitInterest?"Yes":"No"}

FRANCHISE OPPORTUNITY:
- Brand: ${r.brandName}
- Industry: ${r.industry}
- Franchise Fee: ${r.franchiseFee.toLocaleString()}
- Total Investment: ${r.totalInvestment.min.toLocaleString()} - ${r.totalInvestment.max.toLocaleString()}
- Royalty: ${r.royaltyPercentage}%
- Required Net Worth: ${((S=r.minimumNetWorth)==null?void 0:S.toLocaleString())||"N/A"}
- Success Rate: ${r.successRate||"N/A"}%
- Average ROI: ${r.averageROI||"N/A"}%

MATCH SCORES:
- Financial Fit: ${i.financialFitScore}/100
- Experience Fit: ${i.experienceFitScore}/100
- Personality Fit: ${i.personalityFitScore}/100
- Overall Match: ${i.matchScore}/100

Provide analysis in EXACT JSON format (no markdown):
{
  "strengths": ["strength 1", "strength 2", "strength 3"],
  "concerns": ["concern 1", "concern 2"],
  "recommendation": "One clear recommendation",
  "expectedROI": {"year1": <number>, "year3": <number>, "year5": <number>},
  "estimatedBreakEven": <months as number>
}`;try{const O=(await(await this.model.generateContent(o)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(O)}catch(T){return console.error("AI analysis error:",T),this.generateFallbackAnalysis(t,r,i)}}static generateFallbackAnalysis(t,r,i){const o=[],l=[];i.financialFitScore>=80&&o.push("Strong financial capacity"),i.experienceFitScore>=70&&o.push("Relevant industry experience"),t.multiUnitInterest&&r.multiUnitDiscount&&o.push("Multi-unit potential for growth"),i.financialFitScore<60&&l.push("Financial capacity may be stretched"),i.experienceFitScore<50&&l.push("Limited relevant experience"),i.commitmentFitScore<60&&l.push("Time commitment alignment unclear");const a=i.matchScore>=75?"Excellent match - recommend proceeding with franchise application":i.matchScore>=60?"Good match - schedule discovery day to learn more":"Fair match - consider other franchise options as well";return{strengths:o,concerns:l,recommendation:a,expectedROI:r.averageROI?{year1:r.averageROI*.6,year3:r.averageROI,year5:r.averageROI*1.3}:void 0,estimatedBreakEven:18}}static getMatchLevel(t){return t>=80?"Excellent Match":t>=65?"Good Match":t>=45?"Fair Match":"Poor Match"}static calculateSuccessProbability(t,r,i){let o=t;return i.successRate&&(o=(o+i.successRate)/2),r.hasReferencesChecked&&(o*=1.1),r.multiUnitInterest&&(o*=1.05),Math.min(100,Math.round(o))}static async findBestMatches(t,r=10){try{const{data:i,error:o}=await ar.from("franchises").select("*").eq("status","active").order("created_at",{ascending:!1});if(o)throw o;if(!i||i.length===0)return[];const l=i.map(p=>({franchiseId:p.id,brandName:p.brand_name||p.name,industry:p.industry,franchiseFee:p.franchise_fee,totalInvestment:p.total_investment||{min:p.franchise_fee,max:p.franchise_fee*3},royaltyPercentage:p.royalty_percentage||6,requiredExperience:p.required_experience,idealFranchiseeProfile:p.ideal_franchisee,supportProvided:p.support_provided||[],trainingDuration:p.training_duration,territoriesAvailable:p.territories_available||[],minimumNetWorth:p.minimum_net_worth,minimumLiquidCapital:p.minimum_liquid_capital,multiUnitDiscount:p.multi_unit_discount,successRate:p.success_rate,averageROI:p.average_roi}));return(await this.matchFranchisee(t,l)).slice(0,r)}catch(i){return console.error("Find matches error:",i),[]}}}nf(LT,"model",B$.getGenerativeModel({model:"gemini-pro"}));function U$({onClose:n,className:t}){var T,E;const[r,i]=M.useState("profile"),[o,l]=M.useState({}),[a,p]=M.useState([]),[g,w]=M.useState(!1),j=async()=>{var O,R;w(!0);try{const F={userId:"current_user",budget:{min:Number((O=o.budget)==null?void 0:O.min)||0,max:Number((R=o.budget)==null?void 0:R.max)||0},liquidCapital:Number(o.liquidCapital)||0,netWorth:Number(o.netWorth)||0,managementExperience:Number(o.managementExperience)||0,timeCommitment:o.timeCommitment||"full-time"},B=await LT.findBestMatches(F,10);p(B),i("results")}catch(F){console.error("Error finding matches:",F)}finally{w(!1)}},S=O=>O>=80?"text-green-600 bg-green-50 border-green-200":O>=65?"text-blue-600 bg-blue-50 border-blue-200":O>=45?"text-orange-600 bg-orange-50 border-orange-200":"text-gray-600 bg-gray-50 border-gray-200";return e.jsxs("div",{className:er("w-full max-w-4xl mx-auto",t),children:[n&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(ze,{variant:"ghost",size:"icon",onClick:n,children:e.jsx(Gc,{className:"h-4 w-4"})})}),e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsxs(Ht,{className:"text-2xl flex items-center gap-2",children:[e.jsx(ry,{className:"h-6 w-6"}),"AI Franchisee Matcher"]}),e.jsx(Ji,{children:"Find franchise opportunities that match your profile and goals"})]}),e.jsx(ut,{children:r==="profile"?e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ct,{children:"Budget Range (Min)"}),e.jsx(Wt,{type:"number",placeholder:"e.g., 1000000",value:((T=o.budget)==null?void 0:T.min)||"",onChange:O=>{var R;return l({...o,budget:{...o.budget,min:Number(O.target.value),max:((R=o.budget)==null?void 0:R.max)||0}})}})]}),e.jsxs("div",{children:[e.jsx(ct,{children:"Budget Range (Max)"}),e.jsx(Wt,{type:"number",placeholder:"e.g., 5000000",value:((E=o.budget)==null?void 0:E.max)||"",onChange:O=>{var R;return l({...o,budget:{...o.budget,max:Number(O.target.value),min:((R=o.budget)==null?void 0:R.min)||0}})}})]}),e.jsxs("div",{children:[e.jsx(ct,{children:"Liquid Capital Available"}),e.jsx(Wt,{type:"number",placeholder:"Cash available",value:o.liquidCapital||"",onChange:O=>l({...o,liquidCapital:Number(O.target.value)})})]}),e.jsxs("div",{children:[e.jsx(ct,{children:"Net Worth"}),e.jsx(Wt,{type:"number",placeholder:"Total assets - liabilities",value:o.netWorth||"",onChange:O=>l({...o,netWorth:Number(O.target.value)})})]}),e.jsxs("div",{children:[e.jsx(ct,{children:"Management Experience (years)"}),e.jsx(Wt,{type:"number",placeholder:"e.g., 5",value:o.managementExperience||"",onChange:O=>l({...o,managementExperience:Number(O.target.value)})})]}),e.jsxs("div",{children:[e.jsx(ct,{children:"Time Commitment"}),e.jsxs("select",{className:"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm",value:o.timeCommitment||"full-time",onChange:O=>l({...o,timeCommitment:O.target.value}),children:[e.jsx("option",{value:"full-time",children:"Full-time"}),e.jsx("option",{value:"part-time",children:"Part-time"}),e.jsx("option",{value:"semi-absentee",children:"Semi-absentee"}),e.jsx("option",{value:"absentee",children:"Absentee"})]})]})]}),e.jsx(ze,{onClick:j,disabled:g,className:"w-full",children:g?"Finding Matches...":"Find My Perfect Franchise"})]}):e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"text-lg font-semibold",children:["Top ",a.length," Franchise Matches"]}),e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>i("profile"),children:"Refine Search"})]}),a.map((O,R)=>e.jsx(ot,{className:er("border-2",S(O.matchScore)),children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-bold text-lg",children:O.franchise.brandName}),e.jsx("p",{className:"text-sm text-muted-foreground",children:O.franchise.industry})]}),e.jsxs(Gt,{className:S(O.matchScore),children:[O.matchScore,"% Match"]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-3 mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Financial Fit"}),e.jsx(vo,{value:O.financialFitScore,className:"h-1.5 mt-1"}),e.jsxs("div",{className:"text-xs font-semibold mt-1",children:[O.financialFitScore,"/100"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Experience Fit"}),e.jsx(vo,{value:O.experienceFitScore,className:"h-1.5 mt-1"}),e.jsxs("div",{className:"text-xs font-semibold mt-1",children:[O.experienceFitScore,"/100"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Success Probability"}),e.jsx(vo,{value:O.successProbability,className:"h-1.5 mt-1"}),e.jsxs("div",{className:"text-xs font-semibold mt-1",children:[O.successProbability,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs text-muted-foreground",children:"Match Level"}),e.jsx(Gt,{variant:"outline",className:"mt-1",children:O.matchLevel})]})]}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(yf,{className:"h-4 w-4"}),e.jsxs("span",{children:["Investment: ",O.franchise.totalInvestment.min.toLocaleString()," - ",O.franchise.totalInvestment.max.toLocaleString()]})]}),O.estimatedBreakEven&&e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsxs("span",{children:["Break-even: ",O.estimatedBreakEven," months"]})]})]}),e.jsxs("div",{className:"mt-3 pt-3 border-t",children:[e.jsx("div",{className:"text-xs font-semibold mb-1",children:"Why this matches you:"}),e.jsx("ul",{className:"text-xs space-y-1",children:O.strengths.slice(0,3).map((F,B)=>e.jsxs("li",{className:"flex items-start gap-1",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{children:F})]},B))})]}),e.jsx(ze,{className:"w-full mt-3",size:"sm",children:"View Franchise Details"})]})},O.franchiseeId+R)),a.length===0&&e.jsx(ot,{children:e.jsxs(ut,{className:"p-8 text-center text-muted-foreground",children:[e.jsx(ry,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),e.jsx("p",{children:"No matches found. Try adjusting your criteria."})]})})]})})]})]})}const q$=new Im("AIzaSyDA1C1RXqj1ZGGJMrBnPtCRG3KZrADJxkU");class MT{static async analyzeTerritory(t,r,i){try{const[o,l]=this.parseLocation(t),a=await this.getAITerritoryAnalysis(o,l,r,i),p=this.calculateDemographicScore(a.demographics),g=this.calculateEconomicScore(a.economicIndicators),w=this.calculateCompetitionScore(a.competitionAnalysis),j=this.calculateMarketPotentialScore(a.marketPotential),S=Math.round(p*.25+g*.3+w*.25+j*.2),T=this.getViabilityLevel(S);return{location:t,city:o,state:l,viabilityScore:S,viabilityLevel:T,demographicScore:p,economicScore:g,competitionScore:w,marketPotentialScore:j,...a}}catch(o){return console.error("Territory analysis error:",o),this.getFallbackAnalysis(t,r)}}static async getAITerritoryAnalysis(t,r,i,o){const l=`As a franchise territory analyst, provide a comprehensive analysis for opening a ${o||i} franchise in ${t}, ${r}, India.

Analyze the following aspects and provide data in EXACT JSON format (no markdown):

{
  "demographics": {
    "population": <number>,
    "medianAge": <number>,
    "medianIncome": <number in rupees>,
    "householdSize": <number>,
    "educationLevel": "<description>",
    "employmentRate": <percentage as number>
  },
  "economicIndicators": {
    "gdpGrowth": <percentage as number>,
    "unemploymentRate": <percentage as number>,
    "businessGrowth": <percentage as number>,
    "disposableIncome": <number in rupees>
  },
  "competitionAnalysis": {
    "directCompetitors": <number>,
    "indirectCompetitors": <number>,
    "marketSaturation": "<Low|Medium|High>",
    "competitiveAdvantages": ["advantage 1", "advantage 2", "advantage 3"],
    "competitiveChallenges": ["challenge 1", "challenge 2"]
  },
  "marketPotential": {
    "estimatedCustomerBase": <number>,
    "projectedRevenue": {
      "year1": <number>,
      "year3": <number>,
      "year5": <number>
    },
    "growthPotential": "<High|Medium|Low>",
    "seasonality": "<description of seasonal patterns>"
  },
  "risks": ["risk 1", "risk 2", "risk 3"],
  "opportunities": ["opportunity 1", "opportunity 2", "opportunity 3"],
  "recommendations": ["recommendation 1", "recommendation 2", "recommendation 3"],
  "estimatedROI": <percentage as number>,
  "breakEvenMonths": <number>
}

Focus on Indian market data and conditions. Be realistic and data-driven.`;try{const g=(await(await this.model.generateContent(l)).response).text().replace(/```json\n?/g,"").replace(/```\n?/g,"").trim();return JSON.parse(g)}catch(a){throw console.error("AI territory analysis error:",a),a}}static calculateDemographicScore(t){let r=0;t.population>=2e6?r+=30:t.population>=1e6?r+=25:t.population>=5e5?r+=20:t.population>=2e5?r+=15:r+=10,t.medianIncome>=6e5?r+=30:t.medianIncome>=4e5?r+=25:t.medianIncome>=3e5?r+=20:t.medianIncome>=2e5?r+=15:r+=10,t.employmentRate>=95?r+=20:t.employmentRate>=90?r+=15:t.employmentRate>=85?r+=10:r+=5;const i=t.educationLevel.toLowerCase();return i.includes("high")||i.includes("graduate")?r+=20:i.includes("college")||i.includes("bachelor")?r+=15:r+=10,Math.min(100,r)}static calculateEconomicScore(t){let r=0;return t.gdpGrowth>=8?r+=30:t.gdpGrowth>=6?r+=25:t.gdpGrowth>=4?r+=20:t.gdpGrowth>=2?r+=15:r+=10,t.unemploymentRate<=3?r+=25:t.unemploymentRate<=5?r+=20:t.unemploymentRate<=7?r+=15:t.unemploymentRate<=10?r+=10:r+=5,t.businessGrowth>=15?r+=25:t.businessGrowth>=10?r+=20:t.businessGrowth>=5?r+=15:r+=10,t.disposableIncome>=2e5?r+=20:t.disposableIncome>=15e4?r+=15:t.disposableIncome>=1e5?r+=10:r+=5,Math.min(100,r)}static calculateCompetitionScore(t){let r=50;switch(t.marketSaturation){case"Low":r+=40;break;case"Medium":r+=25;break;case"High":r+=10;break}return t.directCompetitors<=3?r+=20:t.directCompetitors<=5?r+=15:t.directCompetitors<=10?r+=10:r+=5,r+=Math.min(20,t.competitiveAdvantages.length*5),r-=Math.min(20,t.competitiveChallenges.length*5),Math.max(0,Math.min(100,r))}static calculateMarketPotentialScore(t){let r=0;switch(t.growthPotential){case"High":r+=40;break;case"Medium":r+=25;break;case"Low":r+=15;break}t.estimatedCustomerBase>=1e5?r+=30:t.estimatedCustomerBase>=5e4?r+=25:t.estimatedCustomerBase>=25e3?r+=20:t.estimatedCustomerBase>=1e4?r+=15:r+=10;const i=t.projectedRevenue.year1,o=t.projectedRevenue.year5;if(o>0&&i>0){const l=(o-i)/i*100;l>=150?r+=30:l>=100?r+=25:l>=50?r+=20:r+=15}return Math.min(100,r)}static getViabilityLevel(t){return t>=80?"Excellent":t>=65?"Good":t>=45?"Fair":"Poor"}static parseLocation(t){const r=t.split(",").map(i=>i.trim());return r.length>=2?[r[0],r[1]]:[t,"India"]}static async compareTerritories(t,r,i){const o=[];for(const g of t){const w=await this.analyzeTerritory(g,r,i);o.push(w)}o.sort((g,w)=>w.viabilityScore-g.viabilityScore);const l=o[0],a=o.map((g,w)=>({location:g.location,score:g.viabilityScore,reason:w===0?`Best choice: ${g.viabilityLevel} viability with ${g.estimatedROI}% estimated ROI`:`${g.viabilityLevel} viability, ranks #${w+1} overall`})),p=await this.generateComparisonSummary(o,r);return{territories:o,bestTerritory:l,ranking:a,summary:p}}static async generateComparisonSummary(t,r){const i=`Summarize this territory comparison for a ${r} franchise in 2-3 sentences:

${t.map((o,l)=>`
${l+1}. ${o.location}: ${o.viabilityScore}/100 viability score
   - Demographics: ${o.demographicScore}/100
   - Economics: ${o.economicScore}/100
   - Competition: ${o.competitionScore}/100
   - Market Potential: ${o.marketPotentialScore}/100
`).join(`
`)}

Provide ONLY the summary text (no JSON, no markdown):`;try{return(await(await this.model.generateContent(i)).response).text().trim()}catch{return`Analyzed ${t.length} territories for ${r} franchise. ${t[0].location} shows the strongest potential with a ${t[0].viabilityScore}/100 viability score.`}}static getFallbackAnalysis(t,r){const[i,o]=this.parseLocation(t);return{location:t,city:i,state:o,viabilityScore:65,viabilityLevel:"Good",demographicScore:65,economicScore:70,competitionScore:60,marketPotentialScore:65,demographics:{population:1e6,medianAge:32,medianIncome:4e5,householdSize:4,educationLevel:"College educated",employmentRate:92},economicIndicators:{gdpGrowth:6.5,unemploymentRate:5.2,businessGrowth:8,disposableIncome:15e4},competitionAnalysis:{directCompetitors:5,indirectCompetitors:15,marketSaturation:"Medium",competitiveAdvantages:["Growing market","Strong brand recognition potential"],competitiveChallenges:["Existing competition"]},marketPotential:{estimatedCustomerBase:5e4,projectedRevenue:{year1:5e6,year3:8e6,year5:12e6},growthPotential:"Medium",seasonality:"Moderate seasonal variation"},risks:["Market competition","Economic fluctuations"],opportunities:["Growing demographics","Increasing disposable income"],recommendations:[`Conduct detailed market research in ${i}`,"Visit existing franchises in the area","Analyze local consumer behavior"],estimatedROI:18,breakEvenMonths:18}}static async getTopTerritories(t,r,i="India",o=10){const l=["Mumbai, Maharashtra","Delhi, NCR","Bangalore, Karnataka","Hyderabad, Telangana","Chennai, Tamil Nadu","Kolkata, West Bengal","Pune, Maharashtra","Ahmedabad, Gujarat","Jaipur, Rajasthan","Surat, Gujarat","Lucknow, Uttar Pradesh","Chandigarh, Punjab","Indore, Madhya Pradesh","Kochi, Kerala","Coimbatore, Tamil Nadu"],a=[];for(const p of l.slice(0,o)){const g=await this.analyzeTerritory(p,t,r);a.push(g)}return a.sort((p,g)=>g.viabilityScore-p.viabilityScore)}}nf(MT,"model",q$.getGenerativeModel({model:"gemini-pro"}));function V$({franchiseBrand:n,franchiseIndustry:t,onClose:r,className:i}){const[o,l]=M.useState(""),[a,p]=M.useState(t||""),[g,w]=M.useState(n||""),[j,S]=M.useState(null),[T,E]=M.useState(!1),O=async()=>{if(!(!o||!a)){E(!0);try{const F=await MT.analyzeTerritory(o,a,g);S(F)}catch(F){console.error("Error analyzing territory:",F)}finally{E(!1)}}},R=F=>{switch(F){case"Excellent":return"bg-green-50 border-green-200 text-green-700";case"Good":return"bg-blue-50 border-blue-200 text-blue-700";case"Fair":return"bg-orange-50 border-orange-200 text-orange-700";default:return"bg-red-50 border-red-200 text-red-700"}};return e.jsxs("div",{className:er("w-full max-w-4xl mx-auto",i),children:[r&&e.jsx("div",{className:"flex justify-end mb-4",children:e.jsx(ze,{variant:"ghost",size:"icon",onClick:r,children:e.jsx(Gc,{className:"h-4 w-4"})})}),e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsxs(Ht,{className:"text-2xl flex items-center gap-2",children:[e.jsx(Ja,{className:"h-6 w-6"}),"AI Territory Analyzer"]}),e.jsx(Ji,{children:"Analyze franchise viability with AI-powered demographic and market insights"})]}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{children:[e.jsx(ct,{children:"Location (City, State)"}),e.jsx(Wt,{placeholder:"e.g., Mumbai, Maharashtra",value:o,onChange:F=>l(F.target.value)})]}),e.jsxs("div",{children:[e.jsx(ct,{children:"Industry"}),e.jsx(Wt,{placeholder:"e.g., Food & Beverage",value:a,onChange:F=>p(F.target.value)})]}),e.jsxs("div",{children:[e.jsx(ct,{children:"Brand (Optional)"}),e.jsx(Wt,{placeholder:"e.g., Subway",value:g,onChange:F=>w(F.target.value)})]})]}),e.jsx(ze,{onClick:O,disabled:T||!o||!a,className:"w-full",children:T?"Analyzing Territory...":"Analyze Territory"}),j&&e.jsxs("div",{className:"space-y-4 mt-6",children:[e.jsx(ot,{className:er("border-2",R(j.viabilityLevel)),children:e.jsx(ut,{className:"p-6",children:e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-4xl font-bold mb-2",children:[j.viabilityScore,"/100"]}),e.jsxs(Gt,{className:R(j.viabilityLevel),children:[j.viabilityLevel," Viability"]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:j.location})]})})}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Demographics"}),e.jsx(vo,{value:j.demographicScore,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[j.demographicScore,"/100"]})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Economics"}),e.jsx(vo,{value:j.economicScore,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[j.economicScore,"/100"]})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Competition"}),e.jsx(vo,{value:j.competitionScore,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[j.competitionScore,"/100"]})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx("div",{className:"text-xs text-muted-foreground mb-2",children:"Market Potential"}),e.jsx(vo,{value:j.marketPotentialScore,className:"h-2 mb-1"}),e.jsxs("div",{className:"text-lg font-bold",children:[j.marketPotentialScore,"/100"]})]})})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-4",children:[e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx(Go,{className:"h-5 w-5 text-muted-foreground mb-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Population"}),e.jsx("div",{className:"font-semibold",children:j.demographics.population.toLocaleString()})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx(na,{className:"h-5 w-5 text-muted-foreground mb-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Median Income"}),e.jsxs("div",{className:"font-semibold",children:["",j.demographics.medianIncome.toLocaleString()]})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4",children:[e.jsx(mp,{className:"h-5 w-5 text-muted-foreground mb-2"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Direct Competitors"}),e.jsx("div",{className:"font-semibold",children:j.competitionAnalysis.directCompetitors})]})})]}),e.jsx(ot,{className:"bg-blue-50 border-blue-200",children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Estimated ROI"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[j.estimatedROI,"%"]})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"Break-even"}),e.jsxs("div",{className:"text-2xl font-bold text-blue-600",children:[j.breakEvenMonths," months"]})]})]})})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{className:"text-sm",children:"Opportunities"})}),e.jsx(ut,{children:e.jsx("ul",{className:"space-y-2",children:j.opportunities.map((F,B)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"text-green-600",children:""}),e.jsx("span",{children:F})]},B))})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"text-sm flex items-center gap-2",children:[e.jsx(jc,{className:"h-4 w-4"}),"Risks"]})}),e.jsx(ut,{children:e.jsx("ul",{className:"space-y-2",children:j.risks.map((F,B)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsx("span",{className:"text-orange-600",children:"!"}),e.jsx("span",{children:F})]},B))})})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{className:"text-sm",children:"AI Recommendations"})}),e.jsx(ut,{children:e.jsx("ol",{className:"space-y-2",children:j.recommendations.map((F,B)=>e.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[e.jsxs("span",{className:"font-semibold",children:[B+1,"."]}),e.jsx("span",{children:F})]},B))})})]})]})]})]})]})}const $$=[{id:"1",buyerName:"Rajesh Kumar",businessName:"TechStart Solutions",industry:"Technology",dealValue:"2.5 Cr",timeline:"45 days",image:"https://github.com/yusufhilmi.png",testimonial:"BizSearch made finding and acquiring my dream tech business incredibly smooth. The AI agent Ajay provided invaluable insights throughout the process."},{id:"2",buyerName:"Priya Sharma",businessName:"Caf Delight Franchise",industry:"Food & Beverage",dealValue:"35 L",timeline:"30 days",image:"https://github.com/kdrnp.png",testimonial:"Vijay helped me find the perfect franchise opportunity. The ROI projections were accurate and the support was exceptional."},{id:"3",buyerName:"Amit Patel",businessName:"HealthCare Plus",industry:"Healthcare",dealValue:"1.8 Cr",timeline:"60 days",image:"https://github.com/yahyabedirhan.png",testimonial:"The verification process and document management made the entire acquisition transparent and secure."}],H$=[{label:"Active Listings",value:"12,500+",icon:na},{label:"Successful Deals",value:"3,200+",icon:jm},{label:"Verified Users",value:"45,000+",icon:Go},{label:"Average Rating",value:"4.8/5",icon:pf}],G$=[{title:"Smart Matching",description:"AI-powered recommendations based on your preferences and investment capacity",icon:"",illustration:""},{title:"Market Analysis",description:"Real-time market insights and competitive analysis for informed decisions",icon:"",illustration:""},{title:"ROI Projections",description:"Accurate return on investment calculations with risk assessment",icon:"",illustration:""},{title:"Document Review",description:"AI-assisted document verification and due diligence support",icon:"",illustration:""}],W$=[{name:"HDFC Bank",logo:"https://logo.clearbit.com/hdfcbank.com",fallback:"HDFC"},{name:"ICICI Bank",logo:"https://logo.clearbit.com/icicibank.com",fallback:"ICICI"},{name:"Kotak Mahindra",logo:"https://logo.clearbit.com/kotak.com",fallback:"Kotak"},{name:"Axis Bank",logo:"https://logo.clearbit.com/axisbank.com",fallback:"Axis"},{name:"SBI",logo:"https://logo.clearbit.com/sbi.co.in",fallback:"SBI"},{name:"Yes Bank",logo:"https://logo.clearbit.com/yesbank.in",fallback:"Yes"}];function Y$({className:n}){const[t,r]=Ft.useState(!1),[i,o]=Ft.useState(!1),[l,a]=Ft.useState(!1),[p,g]=Ft.useState(!1),[w,j]=Ft.useState(!1),[S,T]=Ft.useState(!1),[E,O]=Ft.useState(!1),R=Na(),{user:F}=Io(),B=(J,Se,_e)=>{console.log("Homepage search:",{query:J,type:Se,filters:_e})},G=()=>{console.log("View all businesses clicked")},z=()=>{console.log("View all franchises clicked")},ee=()=>{window.location.href="/about#success-stories"},ie=()=>{r(!0)},ge=()=>{r(!0)},K=()=>{r(!0)};return e.jsxs("div",{className:er("min-h-screen",n),children:[e.jsx(n$,{onSearch:B}),e.jsx("section",{className:"py-12 bg-gradient-to-br from-purple-50 via-blue-50 to-indigo-50 dark:from-purple-950/20 dark:via-blue-950/20 dark:to-indigo-950/20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(Gt,{className:"mb-4",variant:"secondary",children:[e.jsx(hd,{className:"h-3 w-3 mr-1"}),"NEW: AI-Powered Phase 1 Features"]}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Find Your Perfect Business with AI"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto text-lg",children:"Our AI assistants help you discover, evaluate, and acquire businesses faster and smarter"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[e.jsxs(ot,{className:"hover:shadow-xl transition-all hover:-translate-y-1",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center mb-3",children:e.jsx(vN,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsx(Ht,{className:"text-xl",children:"Smart Search"})]}),e.jsxs(ut,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:'Use natural language to find businesses. Try "coffee shop in Mumbai under 50 lakhs"'}),e.jsx(ze,{variant:"outline",className:"w-full",onClick:()=>{const J=document.querySelector("[data-smart-search]");J==null||J.scrollIntoView({behavior:"smooth"})},children:"Try Smart Search"})]})]}),e.jsxs(ot,{className:"hover:shadow-xl transition-all hover:-translate-y-1 border-purple-200 dark:border-purple-800",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-100 dark:bg-purple-900 flex items-center justify-center mb-3",children:e.jsx(ry,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsx(Ht,{className:"text-xl",children:"AI Matchmaker"})]}),e.jsxs(ut,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Get personalized business recommendations based on your budget, skills, and goals"}),e.jsxs(ze,{className:"w-full bg-purple-600 hover:bg-purple-700",onClick:()=>o(!0),children:[e.jsx(hd,{className:"h-4 w-4 mr-2"}),"Find My Match"]})]})]}),e.jsxs(ot,{className:"hover:shadow-xl transition-all hover:-translate-y-1",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-green-100 dark:bg-green-900 flex items-center justify-center mb-3",children:e.jsx(hd,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsx(Ht,{className:"text-xl",children:"AI Advisor"})]}),e.jsxs(ut,{children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"Chat with Ajay or Vijay for expert advice on acquisitions, valuations, and more"}),e.jsx(ze,{variant:"outline",className:"w-full",onClick:()=>r(!0),children:"Chat with AI Advisor"})]})]})]}),e.jsxs(ot,{className:"bg-white/50 dark:bg-gray-900/50 backdrop-blur","data-smart-search":!0,children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"text-center flex items-center justify-center gap-2",children:[e.jsx(vN,{className:"h-5 w-5 text-blue-600"}),"Try Smart Search Now"]})}),e.jsx(ut,{children:e.jsx(o$,{onSearch:(J,Se)=>{console.log("Smart search:",J,Se),R("/businesses",{state:{searchQuery:J,searchIntent:Se}})},placeholder:"Try: 'profitable restaurant Mumbai under 1 crore' or 'tech startup Bangalore'"})})]})]})}),e.jsx("section",{className:"py-8 md:py-16 bg-background",children:e.jsx(p2,{type:"mixed",title:"Featured Opportunities",subtitle:"Handpicked businesses and franchises for you",onViewAll:G,onMoreLikeThis:K,className:"space-y-6 md:space-y-4"})}),e.jsx("section",{className:"py-16 bg-gradient-to-br from-indigo-50 via-purple-50 to-pink-50 dark:from-indigo-950/20 dark:via-purple-950/20 dark:to-pink-950/20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs(Gt,{className:"mb-4",variant:"secondary",children:[e.jsx(bs,{className:"h-3 w-3 mr-1"}),"Phase 2: Decision Support Tools"]}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Make Informed Decisions with AI"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto text-lg",children:"Advanced AI tools to assess risk, verify documents, and conduct due diligence"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(ot,{className:"hover:shadow-2xl transition-all hover:-translate-y-1 border-blue-200 dark:border-blue-800",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-blue-100 dark:bg-blue-900 flex items-center justify-center mb-3",children:e.jsx(ey,{className:"h-6 w-6 text-blue-600 dark:text-blue-400"})}),e.jsx(Ht,{className:"text-xl",children:"AI Valuation Advisor"}),e.jsx(Ji,{children:"Get instant business valuations using multiple methods (DCF, EBITDA, asset-based)"})]}),e.jsxs(ut,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Revenue & profit multiples"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Market comparables analysis"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Fair price recommendations"]})]}),e.jsx(ze,{variant:"outline",className:"w-full",onClick:()=>r(!0),children:"Try Valuation Tool"})]})]}),e.jsxs(ot,{className:"hover:shadow-2xl transition-all hover:-translate-y-1 border-purple-200 dark:border-purple-800",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-purple-100 dark:bg-purple-900 flex items-center justify-center mb-3",children:e.jsx(bs,{className:"h-6 w-6 text-purple-600 dark:text-purple-400"})}),e.jsx(Ht,{className:"text-xl",children:"Due Diligence Assistant"}),e.jsx(Ji,{children:"Comprehensive risk assessment and due diligence checklist generation"})]}),e.jsxs(ut,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Financial, legal & operational analysis"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Risk scoring & red flag detection"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Custom checklist creation"]})]}),e.jsx(ze,{className:"w-full bg-purple-600 hover:bg-purple-700",onClick:()=>a(!0),children:"Start Due Diligence"})]})]}),e.jsxs(ot,{className:"hover:shadow-2xl transition-all hover:-translate-y-1 border-pink-200 dark:border-pink-800",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-pink-100 dark:bg-pink-900 flex items-center justify-center mb-3",children:e.jsx(Ys,{className:"h-6 w-6 text-pink-600 dark:text-pink-400"})}),e.jsx(Ht,{className:"text-xl",children:"Document Analyzer"}),e.jsx(Ji,{children:"Upload and analyze financial statements, contracts, and legal documents"})]}),e.jsxs(ut,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Auto data extraction from PDFs"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Red flag identification"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Document authenticity check"]})]}),e.jsxs(ze,{variant:"outline",className:"w-full",onClick:()=>g(!0),children:[e.jsx(Jd,{className:"mr-2 h-4 w-4"}),"Upload Documents"]})]})]})]}),e.jsx(ot,{className:"mt-8 bg-red-50 dark:bg-red-950/20 border-red-200 dark:border-red-800",children:e.jsx(ut,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900 flex items-center justify-center",children:e.jsx(bs,{className:"h-6 w-6 text-red-600"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-red-900 dark:text-red-100 mb-1",children:"AI Fraud Detection Active"}),e.jsx("p",{className:"text-sm text-red-700 dark:text-red-300",children:"All listings are automatically scanned for suspicious activity, unrealistic claims, and fraud patterns. Your safety is our priority."})]}),e.jsx(Gt,{variant:"destructive",children:"LIVE"})]})})})]})}),e.jsx("section",{className:"py-16 bg-gradient-to-br from-green-50 via-teal-50 to-emerald-50 dark:from-green-950/20 dark:via-teal-950/20 dark:to-emerald-950/20",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs(Gt,{className:"mb-4",variant:"secondary",children:[e.jsx(rb,{className:"h-3 w-3 mr-1"}),"For Sellers & Franchisors"]}),e.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-4",children:"Qualify Buyers & Analyze Markets with AI"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto text-lg",children:"Advanced tools to identify serious buyers and find the best locations"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs(ot,{className:"hover:shadow-2xl transition-all hover:-translate-y-1 border-orange-200 dark:border-orange-800",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-orange-100 dark:bg-orange-900 flex items-center justify-center mb-3",children:e.jsx(rb,{className:"h-6 w-6 text-orange-600 dark:text-orange-400"})}),e.jsx(Ht,{className:"text-xl",children:"AI Buyer Qualifier"}),e.jsx(Ji,{children:"Score and prioritize buyer inquiries - identify hot leads instantly"})]}),e.jsxs(ut,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Financial capacity scoring"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Experience & seriousness analysis"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Deal close probability"]})]}),e.jsx(ze,{className:"w-full bg-orange-600 hover:bg-orange-700",onClick:()=>F?j(!0):R("/signin"),children:"Qualify Buyers"})]})]}),e.jsxs(ot,{className:"hover:shadow-2xl transition-all hover:-translate-y-1 border-teal-200 dark:border-teal-800",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-teal-100 dark:bg-teal-900 flex items-center justify-center mb-3",children:e.jsx(ry,{className:"h-6 w-6 text-teal-600 dark:text-teal-400"})}),e.jsx(Ht,{className:"text-xl",children:"Franchisee Matcher"}),e.jsx(Ji,{children:"Find franchisees that perfectly match your brand requirements"})]}),e.jsxs(ut,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Financial & experience fit scoring"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Personality compatibility"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Success probability prediction"]})]}),e.jsx(ze,{className:"w-full bg-teal-600 hover:bg-teal-700",onClick:()=>T(!0),children:"Find Franchisees"})]})]}),e.jsxs(ot,{className:"hover:shadow-2xl transition-all hover:-translate-y-1 border-emerald-200 dark:border-emerald-800",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"w-12 h-12 rounded-lg bg-emerald-100 dark:bg-emerald-900 flex items-center justify-center mb-3",children:e.jsx(Ja,{className:"h-6 w-6 text-emerald-600 dark:text-emerald-400"})}),e.jsx(Ht,{className:"text-xl",children:"Territory Analyzer"}),e.jsx(Ji,{children:"AI-powered location analysis for franchise expansion"})]}),e.jsxs(ut,{children:[e.jsxs("ul",{className:"space-y-2 text-sm text-muted-foreground mb-4",children:[e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Demographics & economics scoring"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"Competition & market analysis"]}),e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),"ROI & break-even projections"]})]}),e.jsxs(ze,{variant:"outline",className:"w-full",onClick:()=>O(!0),children:[e.jsx(Ja,{className:"mr-2 h-4 w-4"}),"Analyze Territory"]})]})]})]})]})}),e.jsx("section",{className:"py-12 md:py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-8 md:mb-12",children:[e.jsx("h2",{className:"text-2xl md:text-3xl font-bold mb-4",children:"Trusted by Thousands"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto text-sm md:text-base",children:"Join India's largest marketplace for business acquisitions and franchise opportunities"})]}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:H$.map((J,Se)=>{const _e=J.icon;return e.jsx(ot,{className:"text-center hover:shadow-lg transition-shadow",children:e.jsxs(ut,{className:"pt-4 md:pt-6 pb-4 md:pb-6",children:[e.jsx(_e,{className:"h-6 w-6 md:h-8 md:w-8 mx-auto mb-2 md:mb-3 text-primary"}),e.jsx("div",{className:"text-xl md:text-2xl font-bold mb-1",children:J.value}),e.jsx("div",{className:"text-xs md:text-sm text-muted-foreground",children:J.label})]})},Se)})})]})}),e.jsx("section",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"AI-Powered Intelligence"}),e.jsx("p",{className:"text-muted-foreground max-w-2xl mx-auto",children:"Our AI agents Ajay and Vijay provide personalized assistance throughout your business journey"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-12",children:G$.map((J,Se)=>e.jsx(ot,{className:"text-center hover:shadow-lg transition-shadow group",children:e.jsxs(ut,{className:"pt-6",children:[e.jsx("div",{className:"text-4xl mb-2 group-hover:scale-110 transition-transform",children:J.icon}),e.jsx("div",{className:"text-2xl mb-4 opacity-60",children:J.illustration}),e.jsx("h3",{className:"font-semibold mb-2",children:J.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:J.description})]})},Se))}),e.jsxs("div",{className:"text-center space-y-4",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(ze,{size:"lg",className:"gap-2 bg-blue-600 hover:bg-blue-700",onClick:ge,children:" Try AI Assistant Now"}),e.jsx(Kr,{to:"/businesses",children:e.jsx(ze,{size:"lg",variant:"outline",className:"gap-2 w-full sm:w-auto",children:" Browse All Opportunities"})})]}),e.jsxs(ze,{variant:"ghost",className:"gap-2",onClick:ie,children:[e.jsx(YA,{className:"h-5 w-5"}),"See AI in Action"]})]})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-12",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Success Stories"}),e.jsx("p",{className:"text-muted-foreground",children:"Real stories from entrepreneurs who found their perfect business match"})]}),e.jsxs(ze,{variant:"outline",onClick:ee,className:"gap-2",children:["View All Stories",e.jsx(Fv,{className:"h-4 w-4"})]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:$$.map(J=>e.jsxs(ot,{className:"hover:shadow-lg transition-shadow",children:[e.jsxs(Vt,{children:[e.jsxs("div",{className:"flex items-center gap-3 mb-3",children:[e.jsx("img",{src:J.image,alt:J.buyerName,className:"w-12 h-12 rounded-full object-cover border-2 border-primary/20"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-semibold",children:J.buyerName}),e.jsx("div",{className:"text-sm text-muted-foreground",children:J.businessName})]})]}),e.jsxs("div",{className:"flex gap-2 mb-3",children:[e.jsx(Gt,{variant:"secondary",children:J.industry}),e.jsxs(Gt,{variant:"outline",className:"text-green-600 border-green-600",children:[" ",J.dealValue]}),e.jsxs(Gt,{variant:"outline",className:"text-blue-600 border-blue-600",children:[" ",J.timeline]})]})]}),e.jsx(ut,{children:e.jsxs("p",{className:"text-sm text-muted-foreground italic",children:['"',J.testimonial,'"']})})]},J.id))})]})}),e.jsx("section",{className:"py-8 md:py-16 bg-background",children:e.jsx(p2,{type:"business",title:"Top Business Categories",subtitle:"Explore businesses across different industries",onViewAll:G,onMoreLikeThis:K})}),e.jsx("section",{className:"py-8 md:py-16 bg-muted/30",children:e.jsx(p2,{type:"franchise",title:"Premium Franchise Opportunities",subtitle:"High-ROI franchise opportunities with proven track records",onViewAll:z,onMoreLikeThis:K})}),e.jsx("section",{className:"py-16 bg-background",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsx(s$,{variant:"full"}),e.jsxs("div",{className:"mt-12 text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-6",children:"Trusted by Leading Financial Partners"}),e.jsx("div",{className:"flex flex-wrap justify-center items-center gap-8 opacity-70 hover:opacity-100 transition-opacity",children:W$.map((J,Se)=>e.jsxs("div",{className:"group flex items-center gap-3 px-4 py-2 bg-white rounded-lg shadow-sm hover:shadow-md transition-all",children:[e.jsxs("div",{className:"w-8 h-8 flex items-center justify-center",children:[e.jsx("img",{src:J.logo,alt:J.name,className:"w-full h-full object-contain",onError:_e=>{_e.currentTarget.style.display="none",_e.currentTarget.nextElementSibling.classList.remove("hidden")}}),e.jsx("div",{className:"hidden w-8 h-8 bg-gradient-to-br from-blue-500 to-blue-600 rounded-full flex items-center justify-center text-white text-xs font-bold",children:J.fallback.substring(0,2)})]}),e.jsx("span",{className:"text-sm font-medium text-slate-700 group-hover:text-blue-600 transition-colors",children:J.name})]},Se))})]})]})}),e.jsx("section",{className:"py-16 bg-gradient-to-r from-blue-600 to-indigo-700 text-white",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold mb-4",children:"Ready to Find Your Perfect Business?"}),e.jsx("p",{className:"text-lg mb-8 opacity-90 max-w-2xl mx-auto",children:"Join thousands of successful entrepreneurs who found their dream business or franchise through BizSearch"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-2xl mx-auto",children:[e.jsx(ot,{className:"p-6 bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-colors",children:e.jsxs(ut,{className:"p-0 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"I want to Buy a Business"}),e.jsx("p",{className:"text-sm opacity-80 mb-4",children:"Find verified businesses ready for acquisition"}),e.jsx(Kr,{to:"/businesses",className:"w-full",children:e.jsxs(ze,{size:"lg",variant:"secondary",className:"w-full gap-2",children:["Browse Businesses",e.jsx(Fv,{className:"h-5 w-5"})]})})]})}),e.jsx(ot,{className:"p-6 bg-white/10 backdrop-blur-sm border-white/20 hover:bg-white/20 transition-colors",children:e.jsxs(ut,{className:"p-0 text-center",children:[e.jsx("div",{className:"text-4xl mb-3",children:""}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"I want to Sell a Business"}),e.jsx("p",{className:"text-sm opacity-80 mb-4",children:"List your business and reach qualified buyers"}),e.jsx(Kr,{to:"/add-business-listing",className:"w-full",children:e.jsxs(ze,{size:"lg",variant:"outline",className:"w-full gap-2 bg-transparent border-white text-white hover:bg-white hover:text-blue-600",children:["List My Business",e.jsx(Fv,{className:"h-5 w-5"})]})})]})})]}),e.jsx("div",{className:"mt-8",children:e.jsx(Kr,{to:"/franchises",children:e.jsxs(ze,{variant:"ghost",className:"gap-2 text-white hover:bg-white/10",children:["Or explore franchise opportunities",e.jsx(Fv,{className:"h-4 w-4"})]})})})]})}),t&&e.jsx(qk,{}),i&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx(f$,{onClose:()=>o(!1)})})}),l&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:e.jsx(R$,{businessData:{name:"Sample Business",industry:"Technology",price:5e6,revenue:1e7,profit:2e6,employees:25,established_year:2018,location:"Mumbai, Maharashtra"},onClose:()=>a(!1)})})}),p&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx(O$,{onClose:()=>g(!1)})})}),w&&F&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"w-full max-w-6xl max-h-[90vh] overflow-y-auto",children:e.jsx(F$,{sellerId:F.id,onClose:()=>j(!1)})})}),S&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx(U$,{onClose:()=>T(!1)})})}),E&&e.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black/50 backdrop-blur-sm",children:e.jsx("div",{className:"w-full max-w-4xl max-h-[90vh] overflow-y-auto",children:e.jsx(V$,{onClose:()=>O(!1)})})}),e.jsx(Hk,{})]})}const AS=["Technology","Food & Beverage","Retail","Healthcare","Manufacturing","Education","Real Estate","Automotive","Finance","Hospitality","Beauty & Wellness","Agriculture"],CS=["Mumbai","Delhi","Bangalore","Chennai","Kolkata","Hyderabad","Pune","Ahmedabad","Jaipur","Lucknow"],Z$=["Sole Proprietorship","Partnership","Private Limited","Public Limited","LLP","One Person Company"],K$=["Identity Verified","Document Verified","Financial Verified","Legal Verified","Broker Verified"];function DT({type:n,onFiltersChange:t,onApplyFilters:r,className:i}){const[o,l]=M.useState({searchType:n,industry:[],location:[],priceRange:[0,1e7],revenueRange:[0,5e7],businessAge:"",employees:"",businessType:[],financing:!1,verification:[],franchiseFee:[0,5e6],royaltyPercentage:[0,20],trainingDuration:"",outlets:"",multiUnit:!1}),[a,p]=M.useState(!1),[g,w]=M.useState(!1),j=R=>{const F={...o,...R};l(F),w(!0),t==null||t(F)},S=(R,F)=>{const B=o[R],G=B.includes(F)?B.filter(z=>z!==F):[...B,F];j({[R]:G})},T=()=>{const R={searchType:n,industry:[],location:[],priceRange:[0,1e7],revenueRange:[0,5e7],businessAge:"",employees:"",businessType:[],financing:!1,verification:[],franchiseFee:[0,5e6],royaltyPercentage:[0,20],trainingDuration:"",outlets:"",multiUnit:!1};l(R),w(!0),t==null||t(R)},E=()=>{let R=0;return o.industry.length>0&&R++,o.location.length>0&&R++,(o.priceRange[0]>0||o.priceRange[1]<1e7)&&R++,(o.revenueRange[0]>0||o.revenueRange[1]<5e7)&&R++,o.businessAge&&R++,o.employees&&R++,o.businessType.length>0&&R++,o.financing&&R++,o.verification.length>0&&R++,n==="franchise"&&((o.franchiseFee[0]>0||o.franchiseFee[1]<5e6)&&R++,(o.royaltyPercentage[0]>0||o.royaltyPercentage[1]<20)&&R++,o.trainingDuration&&R++,o.outlets&&R++,o.multiUnit&&R++),R},O=R=>R>=1e7?`${(R/1e7).toFixed(1)}Cr`:R>=1e5?`${(R/1e5).toFixed(1)}L`:R>=1e3?`${(R/1e3).toFixed(0)}K`:`${R.toLocaleString()}`;return e.jsxs(ot,{className:er("w-full",i),children:[e.jsx(Vt,{className:"pb-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Qx,{className:"h-5 w-5"}),"Filters",E()>0&&e.jsx(Gt,{variant:"secondary",className:"ml-2",children:E()})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[E()>0&&e.jsxs(ze,{variant:"ghost",size:"sm",onClick:T,className:"text-red-600 hover:text-red-700 hover:bg-red-50",children:[e.jsx(Gc,{className:"h-4 w-4 mr-1"}),"Clear All"]}),e.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>p(!a),children:a?"Less":"More"})]})]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ct,{className:"flex items-center gap-2",children:[e.jsx(mp,{className:"h-4 w-4"}),"Industry"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:AS.slice(0,a?AS.length:6).map(R=>e.jsxs(Gt,{variant:o.industry.includes(R)?"default":"outline",className:"cursor-pointer hover:bg-primary/90",onClick:()=>S("industry",R),children:[R,o.industry.includes(R)&&e.jsx(Gc,{className:"h-3 w-3 ml-1"})]},R))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ct,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-4 w-4"}),"Location"]}),e.jsx("div",{className:"flex flex-wrap gap-2",children:CS.slice(0,a?CS.length:5).map(R=>e.jsxs(Gt,{variant:o.location.includes(R)?"default":"outline",className:"cursor-pointer hover:bg-primary/90",onClick:()=>S("location",R),children:[R,o.location.includes(R)&&e.jsx(Gc,{className:"h-3 w-3 ml-1"})]},R))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ct,{className:"flex items-center gap-2",children:[e.jsx(ij,{className:"h-4 w-4"}),n==="business"?"Business Price":"Investment Required"]}),e.jsxs("div",{className:"px-2",children:[e.jsx($v,{value:n==="business"?o.priceRange:o.franchiseFee,onValueChange:R=>j(n==="business"?{priceRange:R}:{franchiseFee:R}),max:n==="business"?1e7:5e6,step:1e5,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-1",children:[e.jsx("span",{children:O(n==="business"?o.priceRange[0]:o.franchiseFee[0])}),e.jsx("span",{children:O(n==="business"?o.priceRange[1]:o.franchiseFee[1])})]})]})]}),n==="business"&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ct,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4"}),"Annual Revenue"]}),e.jsxs("div",{className:"px-2",children:[e.jsx($v,{value:o.revenueRange,onValueChange:R=>j({revenueRange:R}),max:5e7,step:5e5,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-1",children:[e.jsx("span",{children:O(o.revenueRange[0])}),e.jsx("span",{children:O(o.revenueRange[1])})]})]})]}),n==="franchise"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Royalty Percentage"}),e.jsxs("div",{className:"px-2",children:[e.jsx($v,{value:o.royaltyPercentage,onValueChange:R=>j({royaltyPercentage:R}),max:20,step:.5,className:"w-full"}),e.jsxs("div",{className:"flex justify-between text-sm text-muted-foreground mt-1",children:[e.jsxs("span",{children:[o.royaltyPercentage[0],"%"]}),e.jsxs("span",{children:[o.royaltyPercentage[1],"%"]})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Number of Outlets"}),e.jsxs(ys,{value:o.outlets,onValueChange:R=>j({outlets:R}),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select outlet range"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"any",children:"Any"}),e.jsx(pr,{value:"1-10",children:"1-10 outlets"}),e.jsx(pr,{value:"11-50",children:"11-50 outlets"}),e.jsx(pr,{value:"51-100",children:"51-100 outlets"}),e.jsx(pr,{value:"100+",children:"100+ outlets"})]})]})]})]}),a&&e.jsxs(e.Fragment,{children:[e.jsx(Ho,{}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ct,{className:"flex items-center gap-2",children:[e.jsx(gp,{className:"h-4 w-4"}),"Business Age"]}),e.jsxs(ys,{value:o.businessAge,onValueChange:R=>j({businessAge:R}),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select business age"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"any",children:"Any"}),e.jsx(pr,{value:"0-2",children:"0-2 years"}),e.jsx(pr,{value:"3-5",children:"3-5 years"}),e.jsx(pr,{value:"6-10",children:"6-10 years"}),e.jsx(pr,{value:"10+",children:"10+ years"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs(ct,{className:"flex items-center gap-2",children:[e.jsx(Go,{className:"h-4 w-4"}),"Number of Employees"]}),e.jsxs(ys,{value:o.employees,onValueChange:R=>j({employees:R}),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select employee count"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"any",children:"Any"}),e.jsx(pr,{value:"1-10",children:"1-10 employees"}),e.jsx(pr,{value:"11-50",children:"11-50 employees"}),e.jsx(pr,{value:"51-200",children:"51-200 employees"}),e.jsx(pr,{value:"200+",children:"200+ employees"})]})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Business Type"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:Z$.map(R=>e.jsxs(Gt,{variant:o.businessType.includes(R)?"default":"outline",className:"cursor-pointer hover:bg-primary/90",onClick:()=>S("businessType",R),children:[R,o.businessType.includes(R)&&e.jsx(Gc,{className:"h-3 w-3 ml-1"})]},R))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Verification Status"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:K$.map(R=>e.jsxs(Gt,{variant:o.verification.includes(R)?"default":"outline",className:"cursor-pointer hover:bg-primary/90",onClick:()=>S("verification",R),children:[R,o.verification.includes(R)&&e.jsx(Gc,{className:"h-3 w-3 ml-1"})]},R))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"financing",checked:o.financing,onCheckedChange:R=>j({financing:!!R})}),e.jsx(ct,{htmlFor:"financing",children:"Financing Available"})]}),n==="franchise"&&e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"multiUnit",checked:o.multiUnit,onCheckedChange:R=>j({multiUnit:!!R})}),e.jsx(ct,{htmlFor:"multiUnit",children:"Multi-Unit Development"})]})]})]})]})]})}class f_{static async getBusinesses(t){console.log(" Fetching businesses with filters:",t);try{const r="https://suiexvkyakjvexnldvmr.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8";console.log(" Using direct fetch to:",`${r}/rest/v1/businesses?select=*&order=created_at.desc`);const o=await fetch(`${r}/rest/v1/businesses?select=*&order=created_at.desc`,{headers:{apikey:i,Authorization:`Bearer ${i}`,"Content-Type":"application/json",Prefer:"return=representation"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();return console.log(" Businesses fetched via direct fetch:",(l==null?void 0:l.length)||0,"businesses"),l}catch(r){throw console.error(" Exception in getBusinesses:",r),r}}static async getBusinessById(t){const{data:r,error:i}=await ar.from("businesses").select("*, profiles(*)").eq("id",t).single();if(i)throw i;return r}static async getBusinessBySlug(t){const{data:r,error:i}=await ar.from("businesses").select("*, profiles(*)").eq("slug",t).single();if(i)throw i;return r}static async getFeaturedBusinesses(t=10){const{data:r,error:i}=await ar.from("businesses").select("*").eq("status","active").eq("featured",!0).order("created_at",{ascending:!1}).limit(t);if(i)throw i;return r}static async getTrendingBusinesses(t=10){const{data:r,error:i}=await ar.from("businesses").select("*").eq("status","active").eq("trending",!0).order("views_count",{ascending:!1}).limit(t);if(i)throw i;return r}static async createBusiness(t,r){const{data:i,error:o}=await ar.from("businesses").insert({seller_id:t,...r}).select().single();if(o)throw o;return i}static async updateBusiness(t,r){const{data:i,error:o}=await ar.from("businesses").update(r).eq("id",t).select().single();if(o)throw o;return i}static async deleteBusiness(t){const{error:r}=await ar.from("businesses").delete().eq("id",t);if(r)throw r}static async getUserBusinesses(t){const{data:r,error:i}=await ar.from("businesses").select("*").eq("seller_id",t).order("created_at",{ascending:!1});if(i)throw i;return r}static async searchBusinesses(t,r){let i=ar.from("businesses").select("*").eq("status","active").or(`name.ilike.%${t}%,description.ilike.%${t}%,industry.ilike.%${t}%`);r&&(r.industry&&r.industry.length>0&&(i=i.in("industry",r.industry)),r.city&&r.city.length>0&&(i=i.in("city",r.city)));const{data:o,error:l}=await i.order("created_at",{ascending:!1});if(l)throw l;return o}static async saveBusiness(t,r,i){const{data:o,error:l}=await ar.from("saved_listings").insert({user_id:t,listing_type:"business",listing_id:r,notes:i}).select().single();if(l)throw l;return o}static async unsaveBusiness(t,r){const{error:i}=await ar.from("saved_listings").delete().eq("user_id",t).eq("listing_type","business").eq("listing_id",r);if(i)throw i}static async getSavedBusinesses(t){const{data:r,error:i}=await ar.from("saved_listings").select("*, businesses(*)").eq("user_id",t).eq("listing_type","business").order("created_at",{ascending:!1});if(i)throw i;return r}static async isBusinessSaved(t,r){const{data:i,error:o}=await ar.from("saved_listings").select("id").eq("user_id",t).eq("listing_type","business").eq("listing_id",r).maybeSingle();if(o)throw o;return!!i}static async sendInquiry(t,r,i,o,l,a,p){const{data:g,error:w}=await ar.from("inquiries").insert({sender_id:t,listing_type:"business",listing_id:r,recipient_id:i,message:o,subject:l,contact_email:a,contact_phone:p}).select().single();if(w)throw w;return await ar.from("businesses").update({inquiries_count:ar.rpc("increment",{x:1})}).eq("id",r),g}static async getBusinessInquiries(t,r){const{data:i,error:o}=await ar.from("inquiries").select("*, sender:profiles!sender_id(*)").eq("listing_type","business").eq("listing_id",t).eq("recipient_id",r).order("created_at",{ascending:!1});if(o)throw o;return i}static async getBusinessesByIndustry(t){const{data:r,error:i}=await ar.from("businesses").select("*").eq("status","active").eq("industry",t).order("created_at",{ascending:!1});if(i)throw i;return r}static async getBusinessesByLocation(t,r){let i=ar.from("businesses").select("*").eq("status","active");t&&(i=i.eq("city",t)),r&&(i=i.eq("state",r));const{data:o,error:l}=await i.order("created_at",{ascending:!1});if(l)throw l;return o}static async publishBusiness(t){const{data:r,error:i}=await ar.from("businesses").update({status:"active",published_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return r}static async markAsSold(t){const{data:r,error:i}=await ar.from("businesses").update({status:"sold",sold_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return r}}function OT({type:n="card",count:t=3}){return n==="card"?e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:Array.from({length:t}).map((r,i)=>e.jsxs(ot,{className:"overflow-hidden animate-pulse",children:[e.jsx("div",{className:"h-48 bg-gradient-to-r from-slate-200 via-slate-300 to-slate-200 bg-[length:200%_100%] animate-shimmer"}),e.jsxs(ut,{className:"p-4 space-y-3",children:[e.jsx("div",{className:"h-6 bg-slate-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("div",{className:"h-3 bg-slate-200 rounded"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-5/6"})]}),e.jsxs("div",{className:"flex gap-2 mt-4",children:[e.jsx("div",{className:"h-8 bg-slate-200 rounded flex-1"}),e.jsx("div",{className:"h-8 bg-slate-200 rounded flex-1"})]})]})]},i))}):n==="list"?e.jsx("div",{className:"space-y-4",children:Array.from({length:t}).map((r,i)=>e.jsxs("div",{className:"flex gap-4 p-4 bg-white rounded-lg shadow animate-pulse",children:[e.jsx("div",{className:"h-24 w-24 bg-slate-200 rounded flex-shrink-0"}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsx("div",{className:"h-5 bg-slate-200 rounded w-3/4"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-1/2"}),e.jsx("div",{className:"h-3 bg-slate-200 rounded w-full"})]})]},i))}):e.jsxs("div",{className:"space-y-6 animate-pulse",children:[e.jsx("div",{className:"h-96 bg-slate-200 rounded-lg"}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-8 bg-slate-200 rounded w-1/3"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-5/6"}),e.jsx("div",{className:"h-4 bg-slate-200 rounded w-4/6"})]})]})}function zT({type:n="no-results",title:t,description:r,actionText:i,actionLink:o,onAction:l}){const p={"no-results":{icon:md,defaultTitle:"No Results Found",defaultDescription:"We couldn't find any opportunities matching your criteria. Try adjusting your filters or search terms.",defaultActionText:"Clear Filters",illustration:e.jsxs("svg",{className:"w-64 h-64 mx-auto mb-6 opacity-50",viewBox:"0 0 200 200",fill:"none",children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#E2E8F0"}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"#CBD5E1"}),e.jsx("path",{d:"M100 60 L100 100 L130 130",stroke:"#64748B",strokeWidth:"6",strokeLinecap:"round"}),e.jsx("circle",{cx:"140",cy:"140",r:"15",fill:"#3B82F6"})]})},"no-data":{icon:$o,defaultTitle:"No Listings Available Yet",defaultDescription:"We're constantly adding new opportunities. Check back soon or subscribe to get notified when new listings are available.",defaultActionText:"Browse Other Categories",illustration:e.jsxs("svg",{className:"w-64 h-64 mx-auto mb-6 opacity-50",viewBox:"0 0 200 200",fill:"none",children:[e.jsx("rect",{x:"40",y:"60",width:"120",height:"100",fill:"#E2E8F0",rx:"8"}),e.jsx("rect",{x:"60",y:"80",width:"30",height:"25",fill:"#CBD5E1",rx:"2"}),e.jsx("rect",{x:"110",y:"80",width:"30",height:"25",fill:"#CBD5E1",rx:"2"}),e.jsx("rect",{x:"60",y:"115",width:"30",height:"25",fill:"#CBD5E1",rx:"2"}),e.jsx("rect",{x:"110",y:"115",width:"30",height:"25",fill:"#CBD5E1",rx:"2"}),e.jsx("rect",{x:"70",y:"145",width:"60",height:"10",fill:"#3B82F6",rx:"2"})]})},error:{icon:jc,defaultTitle:"Oops! Something Went Wrong",defaultDescription:"We're having trouble loading the data. Please try again in a moment.",defaultActionText:"Retry",illustration:e.jsxs("svg",{className:"w-64 h-64 mx-auto mb-6 opacity-50",viewBox:"0 0 200 200",fill:"none",children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#FEE2E2"}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"#FECACA"}),e.jsx("path",{d:"M100 70 L100 110",stroke:"#EF4444",strokeWidth:"8",strokeLinecap:"round"}),e.jsx("circle",{cx:"100",cy:"130",r:"5",fill:"#EF4444"})]})},"coming-soon":{icon:na,defaultTitle:"Coming Soon",defaultDescription:"We're working on bringing you amazing opportunities in this category. Stay tuned!",defaultActionText:"Explore Other Categories",illustration:e.jsxs("svg",{className:"w-64 h-64 mx-auto mb-6 opacity-50",viewBox:"0 0 200 200",fill:"none",children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#DBEAFE"}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"#BFDBFE"}),e.jsx("path",{d:"M80 100 L95 115 L120 85",stroke:"#3B82F6",strokeWidth:"8",strokeLinecap:"round",strokeLinejoin:"round"})]})}}[n],g=p.icon;return e.jsxs("div",{className:"flex flex-col items-center justify-center py-16 px-4 text-center",children:[p.illustration,e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-primary/10 rounded-full mb-4",children:e.jsx(g,{className:"h-8 w-8 text-primary"})}),e.jsx("h3",{className:"text-2xl font-bold text-foreground mb-2",children:t||p.defaultTitle}),e.jsx("p",{className:"text-muted-foreground max-w-md mb-6",children:r||p.defaultDescription}),(i||o||l)&&e.jsx(e.Fragment,{children:o?e.jsx(Kr,{to:o,children:e.jsx(ze,{size:"lg",className:"gap-2",children:i||p.defaultActionText})}):e.jsx(ze,{size:"lg",onClick:l,className:"gap-2",children:i||p.defaultActionText})})]})}function kS({className:n}){const t=Na(),[r,i]=M.useState([]),[o,l]=M.useState(!0),[a,p]=M.useState(""),[g,w]=M.useState(null),[j,S]=M.useState("grid"),[T,E]=M.useState("relevance"),[O,R]=M.useState(!0),[F,B]=M.useState(new Set),[G,z]=M.useState(1),ee=12;M.useEffect(()=>{(async()=>{console.log(" BusinessListings: Starting fetch..."),l(!0);try{const Fe=await f_.getBusinesses({});console.log(" BusinessListings: Received result:",Fe),Fe&&Array.isArray(Fe)?(i(Fe),console.log(" BusinessListings: Set",Fe.length,"businesses from database")):(i([]),console.log(" BusinessListings: No businesses in database"))}catch(Fe){console.error(" BusinessListings: Error fetching businesses:",Fe),i([])}finally{l(!1),console.log(" BusinessListings: Loading complete")}})()},[]);const ie=M.useMemo(()=>{let ye=[...r];if(a.trim()){const Fe=a.toLowerCase();ye=ye.filter(Q=>Q.name.toLowerCase().includes(Fe)||Q.industry.toLowerCase().includes(Fe)||Q.location.toLowerCase().includes(Fe)||Q.description.toLowerCase().includes(Fe))}switch(g&&(g.industry.length>0&&(ye=ye.filter(Fe=>g.industry.includes(Fe.industry))),g.location.length>0&&(ye=ye.filter(Fe=>g.location.some(Q=>Fe.location.includes(Q)))),(g.priceRange[0]>0||g.priceRange[1]<1e7)&&(ye=ye.filter(Fe=>{const Q=Fe.price;return Q>=g.priceRange[0]&&Q<=g.priceRange[1]})),(g.revenueRange[0]>0||g.revenueRange[1]<5e7)&&(ye=ye.filter(Fe=>{const Q=Fe.revenue||0;return Q>=g.revenueRange[0]&&Q<=g.revenueRange[1]})),g.businessAge&&(ye=ye.filter(Fe=>{const Q=new Date().getFullYear()-Fe.establishedYear;switch(g.businessAge){case"0-2":return Q<=2;case"3-5":return Q>=3&&Q<=5;case"6-10":return Q>=6&&Q<=10;case"10+":return Q>10;default:return!0}})),g.employees&&(ye=ye.filter(Fe=>{const Q=Fe.employees;switch(g.employees){case"1-10":return Q<=10;case"11-50":return Q>=11&&Q<=50;case"51-200":return Q>=51&&Q<=200;case"200+":return Q>200;default:return!0}})),g.verification.length>0&&(ye=ye.filter(Fe=>g.verification.some(Q=>Fe.badges.includes(Q)))),g.financing&&(ye=ye.filter(Fe=>Fe.badges.includes("Financing Available")))),T){case"price-low":ye.sort((Fe,Q)=>Fe.price-Q.price);break;case"price-high":ye.sort((Fe,Q)=>Q.price-Fe.price);break;case"revenue-high":ye.sort((Fe,Q)=>(Q.revenue||0)-(Fe.revenue||0));break;case"newest":ye.sort((Fe,Q)=>Q.establishedYear-Fe.establishedYear);break;case"oldest":ye.sort((Fe,Q)=>Fe.establishedYear-Q.establishedYear);break}return ye},[a,g,T,r]),ge=Math.ceil(ie.length/ee),K=ie.slice((G-1)*ee,G*ee),J=(ye,Fe,Q)=>{p(ye),z(1)},Se=ye=>{w(ye),z(1)},_e=ye=>{B(Fe=>{const Q=new Set(Fe);return Q.has(ye)?Q.delete(ye):Q.add(ye),Q})},re=ye=>{console.log("Share business:",ye)},ce=ye=>{console.log("Contact business:",ye)},fe=ye=>{t(`/business/${ye}`)};return o?e.jsx("div",{className:er("min-h-screen bg-background",n),children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Businesses for Sale"}),e.jsx(OT,{type:"card",count:6})]})}):!o&&ie.length===0&&r.length===0?e.jsx("div",{className:er("min-h-screen bg-background",n),children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Businesses for Sale"}),e.jsx(zT,{type:"no-data",title:"No Businesses Available Yet",description:"We're constantly adding new business opportunities. Check back soon or get notified when new listings are added.",actionText:"List Your Business",actionLink:"/add-business-listing"})]})}):e.jsxs("div",{className:er("min-h-screen bg-background",n),children:[e.jsx("div",{className:"bg-white border-b",children:e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Business Listings"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Discover verified businesses ready for acquisition"}),e.jsx("div",{className:"flex justify-center",children:e.jsx($j,{onSearch:J})})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[O&&e.jsx("div",{className:"lg:w-80 space-y-6",children:e.jsx(DT,{type:"business",onFiltersChange:Se})}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>R(!O),className:"gap-2",children:[e.jsx(Qx,{className:"h-4 w-4"}),O?"Hide":"Show"," Filters"]}),e.jsx(Ho,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[ie.length," businesses found"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qw,{className:"h-4 w-4"}),e.jsxs(ys,{value:T,onValueChange:ye=>E(ye),children:[e.jsx(as,{className:"w-40",children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"relevance",children:"Relevance"}),e.jsx(pr,{value:"price-low",children:"Price: Low to High"}),e.jsx(pr,{value:"price-high",children:"Price: High to Low"}),e.jsx(pr,{value:"revenue-high",children:"Revenue: High to Low"}),e.jsx(pr,{value:"newest",children:"Newest First"}),e.jsx(pr,{value:"oldest",children:"Oldest First"})]})]})]}),e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(ze,{variant:j==="grid"?"default":"ghost",size:"sm",onClick:()=>S("grid"),className:"rounded-r-none",children:e.jsx(rj,{className:"h-4 w-4"})}),e.jsx(ze,{variant:j==="list"?"default":"ghost",size:"sm",onClick:()=>S("list"),className:"rounded-none",children:e.jsx(sj,{className:"h-4 w-4"})}),e.jsx(ze,{variant:j==="map"?"default":"ghost",size:"sm",onClick:()=>S("map"),className:"rounded-l-none",children:e.jsx(ib,{className:"h-4 w-4"})})]})]})]})})}),g&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[g.industry.map(ye=>e.jsxs(Gt,{variant:"secondary",children:["Industry: ",ye]},ye)),g.location.map(ye=>e.jsxs(Gt,{variant:"secondary",children:["Location: ",ye]},ye)),(g.priceRange[0]>0||g.priceRange[1]<1e7)&&e.jsxs(Gt,{variant:"secondary",children:["Price: ",(g.priceRange[0]/1e5).toFixed(1),"L - ",(g.priceRange[1]/1e5).toFixed(1),"L"]})]}),o?e.jsx(ot,{children:e.jsx(ut,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading businesses..."})]})})}):j==="grid"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide",children:[K.map(ye=>e.jsx("div",{className:"flex-none w-80 snap-start",children:e.jsx(xm,{business:ye,onSave:_e,onShare:re,onContact:ce,onViewDetails:fe,isSaved:F.has(ye.id)})},ye.id)),K.length===0&&e.jsx("div",{className:"flex-none w-80 p-8 text-center text-muted-foreground",children:"No businesses match your criteria"})]}),e.jsx("div",{className:"flex justify-center gap-1 mt-4",children:Array.from({length:Math.min(5,Math.ceil(K.length/3))},(ye,Fe)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${Fe===0?"bg-primary":"bg-muted"}`},Fe))})]}),e.jsx("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:K.map(ye=>e.jsx(xm,{business:ye,onSave:_e,onShare:re,onContact:ce,onViewDetails:fe,isSaved:F.has(ye.id)},ye.id))})]}),j==="list"&&e.jsx("div",{className:"space-y-4",children:K.map(ye=>e.jsx(xm,{business:ye,onSave:_e,onShare:re,onContact:ce,onViewDetails:fe,isSaved:F.has(ye.id),className:"flex flex-row items-center p-4 h-auto"},ye.id))}),j==="map"&&e.jsx(ot,{className:"h-96",children:e.jsx(ut,{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ib,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Map View"}),e.jsx("p",{className:"text-muted-foreground",children:"Interactive map view coming soon"})]})})}),ie.length===0&&e.jsx(ot,{children:e.jsxs(ut,{className:"p-12 text-center",children:[e.jsx(md,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No businesses found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or filters"}),e.jsx(ze,{variant:"outline",onClick:()=>{p(""),w(null),z(1)},children:"Clear All Filters"})]})}),ge>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ze,{variant:"outline",disabled:G===1,onClick:()=>z(G-1),children:"Previous"}),Array.from({length:Math.min(5,ge)},(ye,Fe)=>{const Q=Fe+1;return e.jsx(ze,{variant:G===Q?"default":"outline",onClick:()=>z(Q),children:Q},Q)}),e.jsx(ze,{variant:"outline",disabled:G===ge,onClick:()=>z(G+1),children:"Next"})]})]})]})})]})}class Gx{static async getFranchises(t){console.log(" Fetching franchises with filters:",t);try{const r="https://suiexvkyakjvexnldvmr.supabase.co",i="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InN1aWV4dmt5YWtqdmV4bmxkdm1yIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMzMTQ5MjUsImV4cCI6MjA3ODg5MDkyNX0.klziXLpuhXrgOQtJIYYOf5-ViekTs-lkiy9JxpBqtK8",o=await fetch(`${r}/rest/v1/franchises?select=*&order=created_at.desc`,{headers:{apikey:i,Authorization:`Bearer ${i}`,"Content-Type":"application/json",Prefer:"return=representation"}});if(!o.ok)throw new Error(`HTTP error! status: ${o.status}`);const l=await o.json();return console.log(" Franchises fetched:",(l==null?void 0:l.length)||0,"franchises"),l}catch(r){throw console.error(" Exception in getFranchises:",r),r}}static async getFranchiseById(t){const{data:r,error:i}=await ar.from("franchises").select("*, profiles(*)").eq("id",t).single();if(i)throw i;return r}static async getFranchiseBySlug(t){const{data:r,error:i}=await ar.from("franchises").select("*, profiles(*)").eq("slug",t).single();if(i)throw i;return r}static async getFeaturedFranchises(t=10){const{data:r,error:i}=await ar.from("franchises").select("*").eq("status","active").eq("featured",!0).order("created_at",{ascending:!1}).limit(t);if(i)throw i;return r}static async createFranchise(t,r){const{data:i,error:o}=await ar.from("franchises").insert({franchisor_id:t,...r,status:"pending_review"}).select().single();if(o)throw o;return i}static async updateFranchise(t,r){const{data:i,error:o}=await ar.from("franchises").update(r).eq("id",t).select().single();if(o)throw o;return i}static async deleteFranchise(t){const{error:r}=await ar.from("franchises").delete().eq("id",t);if(r)throw r}static async getUserFranchises(t){const{data:r,error:i}=await ar.from("franchises").select("*").eq("franchisor_id",t).order("created_at",{ascending:!1});if(i)throw i;return r}static async submitForReview(t){return this.updateFranchise(t,{status:"pending_review"})}static async publishFranchise(t){const{data:r,error:i}=await ar.from("franchises").update({status:"active",published_at:new Date().toISOString()}).eq("id",t).select().single();if(i)throw i;return r}static async incrementViews(t){const{error:r}=await ar.rpc("increment_franchise_views",{franchise_id:t});r&&console.error("Error incrementing views:",r)}}const ES=[{label:"Under 10L",min:0,max:1e6},{label:"10L - 25L",min:1e6,max:25e5},{label:"25L - 50L",min:25e5,max:5e6},{label:"50L - 1Cr",min:5e6,max:1e7},{label:"Above 1Cr",min:1e7,max:1/0}];function X$({className:n}){const t=Na(),[r,i]=M.useState([]),[o,l]=M.useState(!0),[a,p]=M.useState(""),[g,w]=M.useState(null),[j,S]=M.useState("grid"),[T,E]=M.useState("relevance"),[O,R]=M.useState(!0),[F,B]=M.useState(new Set),[G,z]=M.useState(1),[ee,ie]=M.useState(""),ge=12;M.useEffect(()=>{(async()=>{l(!0);try{const pe=await Gx.getFranchises({});pe&&Array.isArray(pe)?(i(pe),console.log(" FranchiseListings: Set",pe.length,"franchises from database")):(i([]),console.log(" FranchiseListings: No franchises in database"))}catch(pe){console.error(" FranchiseListings: Error:",pe),i([])}finally{l(!1)}})()},[]);const K=M.useMemo(()=>{let Q=[...r];if(a.trim()){const pe=a.toLowerCase();Q=Q.filter(me=>{var Ue;return((Ue=me.brandName)==null?void 0:Ue.toLowerCase().includes(pe))||me.industry.toLowerCase().includes(pe)||me.description.toLowerCase().includes(pe)||(me.competitiveEdge||me.highlights||[]).some(Ke=>Ke==null?void 0:Ke.toLowerCase().includes(pe))})}if(ee){const pe=ES.find(me=>me.label===ee);pe&&(Q=Q.filter(me=>{const Ue=me.total_investment_min||me.total_investment_max||0;return Ue>=pe.min&&Ue<=pe.max}))}switch(g&&(g.industry.length>0&&(Q=Q.filter(pe=>g.industry.includes(pe.industry))),(g.franchiseFee[0]>0||g.franchiseFee[1]<5e6)&&(Q=Q.filter(pe=>{const me=pe.total_investment_min||pe.total_investment_max||0;return me>=g.franchiseFee[0]&&me<=g.franchiseFee[1]})),(g.royaltyPercentage[0]>0||g.royaltyPercentage[1]<20)&&(Q=Q.filter(pe=>{const me=pe.royalty_percentage||pe.royaltyPercentage||0;return me>=g.royaltyPercentage[0]&&me<=g.royaltyPercentage[1]})),g.outlets&&(Q=Q.filter(pe=>{const me=pe.total_outlets||pe.outlets||0;switch(g.outlets){case"1-10":return me<=10;case"11-50":return me>=11&&me<=50;case"51-100":return me>=51&&me<=100;case"100+":return me>100;default:return!0}})),g.multiUnit&&(Q=Q.filter(pe=>pe.badges.includes("Multi-Unit Available"))),g.financing&&(Q=Q.filter(pe=>pe.badges.includes("Financing Available"))),g.verification.length>0&&(Q=Q.filter(pe=>g.verification.some(me=>pe.badges.includes(me))))),T){case"investment-low":Q.sort((pe,me)=>(pe.total_investment_min||0)-(me.total_investment_min||0));break;case"investment-high":Q.sort((pe,me)=>(me.total_investment_min||0)-(pe.total_investment_min||0));break;case"roi-high":Q.sort((pe,me)=>{const Ue=pe.expected_roi_percentage||0;return(me.expected_roi_percentage||0)-Ue});break;case"outlets-high":Q.sort((pe,me)=>(me.total_outlets||me.outlets||0)-(pe.total_outlets||pe.outlets||0));break}return Q},[a,g,T,ee,r]),J=Math.ceil(K.length/ge),Se=K.slice((G-1)*ge,G*ge),_e=(Q,pe,me)=>{p(Q),z(1)},re=Q=>{w(Q),z(1)},ce=Q=>{B(pe=>{const me=new Set(pe);return me.has(Q)?me.delete(Q):me.add(Q),me})},fe=Q=>{console.log("Share franchise:",Q)},ye=Q=>{console.log("Contact franchise:",Q)},Fe=Q=>{t(`/franchise/${Q}`)};return o?e.jsx("div",{className:er("min-h-screen bg-background",n),children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Franchise Opportunities"}),e.jsx(OT,{type:"card",count:6})]})}):!o&&K.length===0&&r.length===0?e.jsx("div",{className:er("min-h-screen bg-background",n),children:e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-6",children:"Franchise Opportunities"}),e.jsx(zT,{type:"no-data",title:"No Franchises Available Yet",description:"We're constantly adding new franchise opportunities. Check back soon!",actionText:"List Your Franchise",actionLink:"/add-franchise-listing"})]})}):e.jsxs("div",{className:er("min-h-screen bg-background",n),children:[e.jsx("div",{className:"bg-background border-b border-border",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"text-center mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2 text-foreground",children:"Franchise Opportunities"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Discover proven franchise opportunities with high ROI potential"}),e.jsx("div",{className:"flex justify-center",children:e.jsx($j,{onSearch:_e})})]}),e.jsxs("div",{className:"mt-6",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[e.jsx(na,{className:"h-4 w-4"}),e.jsx("span",{className:"text-sm font-medium",children:"Investment Range:"})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[e.jsx(ze,{variant:ee===""?"default":"outline",size:"sm",onClick:()=>ie(""),children:"All Ranges"}),ES.map(Q=>e.jsx(ze,{variant:ee===Q.label?"default":"outline",size:"sm",onClick:()=>ie(Q.label),children:Q.label},Q.label))]})]})]})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"flex flex-col lg:flex-row gap-6",children:[O&&e.jsx("div",{className:"lg:w-80 space-y-6",children:e.jsx(DT,{type:"franchise",onFiltersChange:re})}),e.jsxs("div",{className:"flex-1 space-y-6",children:[e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>R(!O),className:"gap-2",children:[e.jsx(Qx,{className:"h-4 w-4"}),O?"Hide":"Show"," Filters"]}),e.jsx(Ho,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[K.length," franchises found"]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qw,{className:"h-4 w-4"}),e.jsxs(ys,{value:T,onValueChange:Q=>E(Q),children:[e.jsx(as,{className:"w-48",children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"relevance",children:"Relevance"}),e.jsx(pr,{value:"investment-low",children:"Investment: Low to High"}),e.jsx(pr,{value:"investment-high",children:"Investment: High to Low"}),e.jsx(pr,{value:"roi-high",children:"ROI: High to Low"}),e.jsx(pr,{value:"outlets-high",children:"Most Outlets"}),e.jsx(pr,{value:"newest",children:"Newest Brands"})]})]})]}),e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(ze,{variant:j==="grid"?"default":"ghost",size:"sm",onClick:()=>S("grid"),className:"rounded-r-none",children:e.jsx(rj,{className:"h-4 w-4"})}),e.jsx(ze,{variant:j==="list"?"default":"ghost",size:"sm",onClick:()=>S("list"),className:"rounded-none",children:e.jsx(sj,{className:"h-4 w-4"})}),e.jsx(ze,{variant:j==="map"?"default":"ghost",size:"sm",onClick:()=>S("map"),className:"rounded-l-none",children:e.jsx(ib,{className:"h-4 w-4"})})]})]})]})})}),(g||ee)&&e.jsxs("div",{className:"flex flex-wrap gap-2",children:[ee&&e.jsxs(Gt,{variant:"secondary",children:["Investment: ",ee]}),g==null?void 0:g.industry.map(Q=>e.jsxs(Gt,{variant:"secondary",children:["Industry: ",Q]},Q)),g&&(g.franchiseFee[0]>0||g.franchiseFee[1]<5e6)&&e.jsxs(Gt,{variant:"secondary",children:["Investment: ",(g.franchiseFee[0]/1e5).toFixed(1),"L - ",(g.franchiseFee[1]/1e5).toFixed(1),"L"]}),g&&(g.royaltyPercentage[0]>0||g.royaltyPercentage[1]<20)&&e.jsxs(Gt,{variant:"secondary",children:["Royalty: ",g.royaltyPercentage[0],"% -"," ",g.royaltyPercentage[1],"%"]})]}),o?e.jsx(ot,{children:e.jsx(ut,{className:"p-12 text-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading franchises..."})]})})}):j==="grid"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"md:hidden",children:[e.jsxs("div",{className:"flex gap-4 overflow-x-auto pb-4 snap-x snap-mandatory scrollbar-hide",children:[Se.map(Q=>e.jsx("div",{className:"flex-none w-80 snap-start",children:e.jsx(Ng,{franchise:Q,onSave:ce,onShare:fe,onContact:ye,onViewDetails:Fe,isSaved:F.has(Q.id)})},Q.id)),Se.length===0&&e.jsx("div",{className:"flex-none w-80 p-8 text-center text-muted-foreground",children:"No franchises match your criteria"})]}),e.jsx("div",{className:"flex justify-center gap-1 mt-4",children:Array.from({length:Math.min(5,Math.ceil(Se.length/3))},(Q,pe)=>e.jsx("div",{className:`w-2 h-2 rounded-full ${pe===0?"bg-primary":"bg-muted"}`},pe))})]}),e.jsx("div",{className:"hidden md:grid grid-cols-1 md:grid-cols-2 xl:grid-cols-3 gap-6",children:Se.map(Q=>e.jsx(Ng,{franchise:Q,onSave:ce,onShare:fe,onContact:ye,onViewDetails:Fe,isSaved:F.has(Q.id)},Q.id))})]}),j==="list"&&e.jsx("div",{className:"space-y-4",children:Se.map(Q=>e.jsx(Ng,{franchise:Q,onSave:ce,onShare:fe,onContact:ye,onViewDetails:Fe,isSaved:F.has(Q.id),className:"flex flex-row items-center p-4 h-auto"},Q.id))}),j==="map"&&e.jsx(ot,{className:"h-96",children:e.jsx(ut,{className:"p-6 flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(ib,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold mb-2",children:"Territory Map"}),e.jsx("p",{className:"text-muted-foreground",children:"Interactive territory availability map coming soon"})]})})}),K.length===0&&e.jsx(ot,{children:e.jsxs(ut,{className:"p-12 text-center",children:[e.jsx(md,{className:"h-12 w-12 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"font-semibold mb-2",children:"No franchises found"}),e.jsx("p",{className:"text-muted-foreground mb-4",children:"Try adjusting your search criteria or filters"}),e.jsx(ze,{variant:"outline",onClick:()=>{p(""),w(null),ie(""),z(1)},children:"Clear All Filters"})]})}),J>1&&e.jsxs("div",{className:"flex justify-center gap-2",children:[e.jsx(ze,{variant:"outline",disabled:G===1,onClick:()=>z(G-1),children:"Previous"}),Array.from({length:Math.min(5,J)},(Q,pe)=>{const me=pe+1;return e.jsx(ze,{variant:G===me?"default":"outline",onClick:()=>z(me),children:me},me)}),e.jsx(ze,{variant:"outline",disabled:G===J,onClick:()=>z(G+1),children:"Next"})]})]})]})})]})}const Mg=Rj,Jj=Ij,J$=Lj,FT=M.forwardRef(({className:n,...t},r)=>e.jsx(d0,{ref:r,className:er("fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...t}));FT.displayName=d0.displayName;const Om=M.forwardRef(({className:n,children:t,...r},i)=>e.jsxs(J$,{children:[e.jsx(FT,{}),e.jsxs(h0,{ref:i,className:er("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...r,children:[t,e.jsxs(r_,{className:"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground",children:[e.jsx(Gc,{className:"h-4 w-4"}),e.jsx("span",{className:"sr-only",children:"Close"})]})]})]}));Om.displayName=h0.displayName;const zm=({className:n,...t})=>e.jsx("div",{className:er("flex flex-col space-y-1.5 text-center sm:text-left",n),...t});zm.displayName="DialogHeader";const Qj=({className:n,...t})=>e.jsx("div",{className:er("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...t});Qj.displayName="DialogFooter";const Fm=M.forwardRef(({className:n,...t},r)=>e.jsx(f0,{ref:r,className:er("text-lg font-semibold leading-none tracking-tight",n),...t}));Fm.displayName=f0.displayName;const v0=M.forwardRef(({className:n,...t},r)=>e.jsx(p0,{ref:r,className:er("text-sm text-muted-foreground",n),...t}));v0.displayName=p0.displayName;const Fl=M.forwardRef(({className:n,...t},r)=>e.jsx("textarea",{className:er("flex min-h-[60px] w-full rounded-md border border-input bg-transparent px-3 py-2 text-base shadow-sm placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",n),ref:r,...t}));Fl.displayName="Textarea";const Q$="modulepreload",eH=function(n){return"/"+n},TS={},_b=function(t,r,i){let o=Promise.resolve();if(r&&r.length>0){let a=function(w){return Promise.all(w.map(j=>Promise.resolve(j).then(S=>({status:"fulfilled",value:S}),S=>({status:"rejected",reason:S}))))};document.getElementsByTagName("link");const p=document.querySelector("meta[property=csp-nonce]"),g=(p==null?void 0:p.nonce)||(p==null?void 0:p.getAttribute("nonce"));o=a(r.map(w=>{if(w=eH(w),w in TS)return;TS[w]=!0;const j=w.endsWith(".css"),S=j?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${w}"]${S}`))return;const T=document.createElement("link");if(T.rel=j?"stylesheet":Q$,j||(T.as="script"),T.crossOrigin="",T.href=w,g&&T.setAttribute("nonce",g),document.head.appendChild(T),j)return new Promise((E,O)=>{T.addEventListener("load",E),T.addEventListener("error",()=>O(new Error(`Unable to preload CSS for ${w}`)))})}))}function l(a){const p=new Event("vite:preloadError",{cancelable:!0});if(p.payload=a,window.dispatchEvent(p),!p.defaultPrevented)throw a}return o.then(a=>{for(const p of a||[])p.status==="rejected"&&l(p.reason);return t().catch(l)})};function Zs(n){"@babel/helpers - typeof";return Zs=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zs(n)}var Yc=Uint8Array,fd=Uint16Array,e5=Int32Array,p_=new Yc([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),m_=new Yc([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),dw=new Yc([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),BT=function(n,t){for(var r=new fd(31),i=0;i<31;++i)r[i]=t+=1<<n[i-1];for(var o=new e5(r[30]),i=1;i<30;++i)for(var l=r[i];l<r[i+1];++l)o[l]=l-r[i]<<5|i;return{b:r,r:o}},UT=BT(p_,2),qT=UT.b,hw=UT.r;qT[28]=258,hw[258]=28;var VT=BT(m_,0),tH=VT.b,PS=VT.r,fw=new fd(32768);for(var Ba=0;Ba<32768;++Ba){var om=(Ba&43690)>>1|(Ba&21845)<<1;om=(om&52428)>>2|(om&13107)<<2,om=(om&61680)>>4|(om&3855)<<4,fw[Ba]=((om&65280)>>8|(om&255)<<8)>>1}var gf=(function(n,t,r){for(var i=n.length,o=0,l=new fd(t);o<i;++o)n[o]&&++l[n[o]-1];var a=new fd(t);for(o=1;o<t;++o)a[o]=a[o-1]+l[o-1]<<1;var p;if(r){p=new fd(1<<t);var g=15-t;for(o=0;o<i;++o)if(n[o])for(var w=o<<4|n[o],j=t-n[o],S=a[n[o]-1]++<<j,T=S|(1<<j)-1;S<=T;++S)p[fw[S]>>g]=w}else for(p=new fd(i),o=0;o<i;++o)n[o]&&(p[o]=fw[a[n[o]-1]++]>>15-n[o]);return p}),Am=new Yc(288);for(var Ba=0;Ba<144;++Ba)Am[Ba]=8;for(var Ba=144;Ba<256;++Ba)Am[Ba]=9;for(var Ba=256;Ba<280;++Ba)Am[Ba]=7;for(var Ba=280;Ba<288;++Ba)Am[Ba]=8;var Wx=new Yc(32);for(var Ba=0;Ba<32;++Ba)Wx[Ba]=5;var rH=gf(Am,9,0),nH=gf(Am,9,1),iH=gf(Wx,5,0),sH=gf(Wx,5,1),g2=function(n){for(var t=n[0],r=1;r<n.length;++r)n[r]>t&&(t=n[r]);return t},jh=function(n,t,r){var i=t/8|0;return(n[i]|n[i+1]<<8)>>(t&7)&r},v2=function(n,t){var r=t/8|0;return(n[r]|n[r+1]<<8|n[r+2]<<16)>>(t&7)},t5=function(n){return(n+7)/8|0},$T=function(n,t,r){return(r==null||r>n.length)&&(r=n.length),new Yc(n.subarray(t,r))},aH=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],Eh=function(n,t,r){var i=new Error(t||aH[n]);if(i.code=n,Error.captureStackTrace&&Error.captureStackTrace(i,Eh),!r)throw i;return i},oH=function(n,t,r,i){var o=n.length,l=0;if(!o||t.f&&!t.l)return r||new Yc(0);var a=!r,p=a||t.i!=2,g=t.i;a&&(r=new Yc(o*3));var w=function(Et){var zt=r.length;if(Et>zt){var Lt=new Yc(Math.max(zt*2,Et));Lt.set(r),r=Lt}},j=t.f||0,S=t.p||0,T=t.b||0,E=t.l,O=t.d,R=t.m,F=t.n,B=o*8;do{if(!E){j=jh(n,S,1);var G=jh(n,S+1,3);if(S+=3,G)if(G==1)E=nH,O=sH,R=9,F=5;else if(G==2){var ge=jh(n,S,31)+257,K=jh(n,S+10,15)+4,J=ge+jh(n,S+5,31)+1;S+=14;for(var Se=new Yc(J),_e=new Yc(19),re=0;re<K;++re)_e[dw[re]]=jh(n,S+re*3,7);S+=K*3;for(var ce=g2(_e),fe=(1<<ce)-1,ye=gf(_e,ce,1),re=0;re<J;){var Fe=ye[jh(n,S,fe)];S+=Fe&15;var z=Fe>>4;if(z<16)Se[re++]=z;else{var Q=0,pe=0;for(z==16?(pe=3+jh(n,S,3),S+=2,Q=Se[re-1]):z==17?(pe=3+jh(n,S,7),S+=3):z==18&&(pe=11+jh(n,S,127),S+=7);pe--;)Se[re++]=Q}}var me=Se.subarray(0,ge),Ue=Se.subarray(ge);R=g2(me),F=g2(Ue),E=gf(me,R,1),O=gf(Ue,F,1)}else Eh(1);else{var z=t5(S)+4,ee=n[z-4]|n[z-3]<<8,ie=z+ee;if(ie>o){g&&Eh(0);break}p&&w(T+ee),r.set(n.subarray(z,ie),T),t.b=T+=ee,t.p=S=ie*8,t.f=j;continue}if(S>B){g&&Eh(0);break}}p&&w(T+131072);for(var Ke=(1<<R)-1,Re=(1<<F)-1,te=S;;te=S){var Q=E[v2(n,S)&Ke],ue=Q>>4;if(S+=Q&15,S>B){g&&Eh(0);break}if(Q||Eh(2),ue<256)r[T++]=ue;else if(ue==256){te=S,E=null;break}else{var Ne=ue-254;if(ue>264){var re=ue-257,Me=p_[re];Ne=jh(n,S,(1<<Me)-1)+qT[re],S+=Me}var We=O[v2(n,S)&Re],Ve=We>>4;We||Eh(3),S+=We&15;var Ue=tH[Ve];if(Ve>3){var Me=m_[Ve];Ue+=v2(n,S)&(1<<Me)-1,S+=Me}if(S>B){g&&Eh(0);break}p&&w(T+131072);var tt=T+Ne;if(T<Ue){var Qe=l-Ue,St=Math.min(Ue,tt);for(Qe+T<0&&Eh(3);T<St;++T)r[T]=i[Qe+T]}for(;T<tt;++T)r[T]=r[T-Ue]}}t.l=E,t.p=te,t.b=T,t.f=j,E&&(j=1,t.m=R,t.d=O,t.n=F)}while(!j);return T!=r.length&&a?$T(r,0,T):r.subarray(0,T)},lp=function(n,t,r){r<<=t&7;var i=t/8|0;n[i]|=r,n[i+1]|=r>>8},yx=function(n,t,r){r<<=t&7;var i=t/8|0;n[i]|=r,n[i+1]|=r>>8,n[i+2]|=r>>16},y2=function(n,t){for(var r=[],i=0;i<n.length;++i)n[i]&&r.push({s:i,f:n[i]});var o=r.length,l=r.slice();if(!o)return{t:GT,l:0};if(o==1){var a=new Yc(r[0].s+1);return a[r[0].s]=1,{t:a,l:1}}r.sort(function(ie,ge){return ie.f-ge.f}),r.push({s:-1,f:25001});var p=r[0],g=r[1],w=0,j=1,S=2;for(r[0]={s:-1,f:p.f+g.f,l:p,r:g};j!=o-1;)p=r[r[w].f<r[S].f?w++:S++],g=r[w!=j&&r[w].f<r[S].f?w++:S++],r[j++]={s:-1,f:p.f+g.f,l:p,r:g};for(var T=l[0].s,i=1;i<o;++i)l[i].s>T&&(T=l[i].s);var E=new fd(T+1),O=pw(r[j-1],E,0);if(O>t){var i=0,R=0,F=O-t,B=1<<F;for(l.sort(function(ge,K){return E[K.s]-E[ge.s]||ge.f-K.f});i<o;++i){var G=l[i].s;if(E[G]>t)R+=B-(1<<O-E[G]),E[G]=t;else break}for(R>>=F;R>0;){var z=l[i].s;E[z]<t?R-=1<<t-E[z]++-1:++i}for(;i>=0&&R;--i){var ee=l[i].s;E[ee]==t&&(--E[ee],++R)}O=t}return{t:new Yc(E),l:O}},pw=function(n,t,r){return n.s==-1?Math.max(pw(n.l,t,r+1),pw(n.r,t,r+1)):t[n.s]=r},RS=function(n){for(var t=n.length;t&&!n[--t];);for(var r=new fd(++t),i=0,o=n[0],l=1,a=function(g){r[i++]=g},p=1;p<=t;++p)if(n[p]==o&&p!=t)++l;else{if(!o&&l>2){for(;l>138;l-=138)a(32754);l>2&&(a(l>10?l-11<<5|28690:l-3<<5|12305),l=0)}else if(l>3){for(a(o),--l;l>6;l-=6)a(8304);l>2&&(a(l-3<<5|8208),l=0)}for(;l--;)a(o);l=1,o=n[p]}return{c:r.subarray(0,i),n:t}},xx=function(n,t){for(var r=0,i=0;i<t.length;++i)r+=n[i]*t[i];return r},HT=function(n,t,r){var i=r.length,o=t5(t+2);n[o]=i&255,n[o+1]=i>>8,n[o+2]=n[o]^255,n[o+3]=n[o+1]^255;for(var l=0;l<i;++l)n[o+l+4]=r[l];return(o+4+i)*8},IS=function(n,t,r,i,o,l,a,p,g,w,j){lp(t,j++,r),++o[256];for(var S=y2(o,15),T=S.t,E=S.l,O=y2(l,15),R=O.t,F=O.l,B=RS(T),G=B.c,z=B.n,ee=RS(R),ie=ee.c,ge=ee.n,K=new fd(19),J=0;J<G.length;++J)++K[G[J]&31];for(var J=0;J<ie.length;++J)++K[ie[J]&31];for(var Se=y2(K,7),_e=Se.t,re=Se.l,ce=19;ce>4&&!_e[dw[ce-1]];--ce);var fe=w+5<<3,ye=xx(o,Am)+xx(l,Wx)+a,Fe=xx(o,T)+xx(l,R)+a+14+3*ce+xx(K,_e)+2*K[16]+3*K[17]+7*K[18];if(g>=0&&fe<=ye&&fe<=Fe)return HT(t,j,n.subarray(g,g+w));var Q,pe,me,Ue;if(lp(t,j,1+(Fe<ye)),j+=2,Fe<ye){Q=gf(T,E,0),pe=T,me=gf(R,F,0),Ue=R;var Ke=gf(_e,re,0);lp(t,j,z-257),lp(t,j+5,ge-1),lp(t,j+10,ce-4),j+=14;for(var J=0;J<ce;++J)lp(t,j+3*J,_e[dw[J]]);j+=3*ce;for(var Re=[G,ie],te=0;te<2;++te)for(var ue=Re[te],J=0;J<ue.length;++J){var Ne=ue[J]&31;lp(t,j,Ke[Ne]),j+=_e[Ne],Ne>15&&(lp(t,j,ue[J]>>5&127),j+=ue[J]>>12)}}else Q=rH,pe=Am,me=iH,Ue=Wx;for(var J=0;J<p;++J){var Me=i[J];if(Me>255){var Ne=Me>>18&31;yx(t,j,Q[Ne+257]),j+=pe[Ne+257],Ne>7&&(lp(t,j,Me>>23&31),j+=p_[Ne]);var We=Me&31;yx(t,j,me[We]),j+=Ue[We],We>3&&(yx(t,j,Me>>5&8191),j+=m_[We])}else yx(t,j,Q[Me]),j+=pe[Me]}return yx(t,j,Q[256]),j+pe[256]},lH=new e5([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),GT=new Yc(0),cH=function(n,t,r,i,o,l){var a=l.z||n.length,p=new Yc(i+a+5*(1+Math.ceil(a/7e3))+o),g=p.subarray(i,p.length-o),w=l.l,j=(l.r||0)&7;if(t){j&&(g[0]=l.r>>3);for(var S=lH[t-1],T=S>>13,E=S&8191,O=(1<<r)-1,R=l.p||new fd(32768),F=l.h||new fd(O+1),B=Math.ceil(r/3),G=2*B,z=function(wr){return(n[wr]^n[wr+1]<<B^n[wr+2]<<G)&O},ee=new e5(25e3),ie=new fd(288),ge=new fd(32),K=0,J=0,Se=l.i||0,_e=0,re=l.w||0,ce=0;Se+2<a;++Se){var fe=z(Se),ye=Se&32767,Fe=F[fe];if(R[ye]=Fe,F[fe]=ye,re<=Se){var Q=a-Se;if((K>7e3||_e>24576)&&(Q>423||!w)){j=IS(n,g,0,ee,ie,ge,J,_e,ce,Se-ce,j),_e=K=J=0,ce=Se;for(var pe=0;pe<286;++pe)ie[pe]=0;for(var pe=0;pe<30;++pe)ge[pe]=0}var me=2,Ue=0,Ke=E,Re=ye-Fe&32767;if(Q>2&&fe==z(Se-Re))for(var te=Math.min(T,Q)-1,ue=Math.min(32767,Se),Ne=Math.min(258,Q);Re<=ue&&--Ke&&ye!=Fe;){if(n[Se+me]==n[Se+me-Re]){for(var Me=0;Me<Ne&&n[Se+Me]==n[Se+Me-Re];++Me);if(Me>me){if(me=Me,Ue=Re,Me>te)break;for(var We=Math.min(Re,Me-2),Ve=0,pe=0;pe<We;++pe){var tt=Se-Re+pe&32767,Qe=R[tt],St=tt-Qe&32767;St>Ve&&(Ve=St,Fe=tt)}}}ye=Fe,Fe=R[ye],Re+=ye-Fe&32767}if(Ue){ee[_e++]=268435456|hw[me]<<18|PS[Ue];var Et=hw[me]&31,zt=PS[Ue]&31;J+=p_[Et]+m_[zt],++ie[257+Et],++ge[zt],re=Se+me,++K}else ee[_e++]=n[Se],++ie[n[Se]]}}for(Se=Math.max(Se,re);Se<a;++Se)ee[_e++]=n[Se],++ie[n[Se]];j=IS(n,g,w,ee,ie,ge,J,_e,ce,Se-ce,j),w||(l.r=j&7|g[j/8|0]<<3,j-=7,l.h=F,l.p=R,l.i=Se,l.w=re)}else{for(var Se=l.w||0;Se<a+w;Se+=65535){var Lt=Se+65535;Lt>=a&&(g[j/8|0]=w,Lt=a),j=HT(g,j+1,n.subarray(Se,Lt))}l.i=a}return $T(p,0,i+t5(j)+o)},WT=function(){var n=1,t=0;return{p:function(r){for(var i=n,o=t,l=r.length|0,a=0;a!=l;){for(var p=Math.min(a+2655,l);a<p;++a)o+=i+=r[a];i=(i&65535)+15*(i>>16),o=(o&65535)+15*(o>>16)}n=i,t=o},d:function(){return n%=65521,t%=65521,(n&255)<<24|(n&65280)<<8|(t&255)<<8|t>>8}}},uH=function(n,t,r,i,o){if(!o&&(o={l:1},t.dictionary)){var l=t.dictionary.subarray(-32768),a=new Yc(l.length+n.length);a.set(l),a.set(n,l.length),n=a,o.w=l.length}return cH(n,t.level==null?6:t.level,t.mem==null?o.l?Math.ceil(Math.max(8,Math.min(13,Math.log(n.length)))*1.5):20:12+t.mem,r,i,o)},YT=function(n,t,r){for(;r;++t)n[t]=r,r>>>=8},dH=function(n,t){var r=t.level,i=r==0?0:r<6?1:r==9?3:2;if(n[0]=120,n[1]=i<<6|(t.dictionary&&32),n[1]|=31-(n[0]<<8|n[1])%31,t.dictionary){var o=WT();o.p(t.dictionary),YT(n,2,o.d())}},hH=function(n,t){return((n[0]&15)!=8||n[0]>>4>7||(n[0]<<8|n[1])%31)&&Eh(6,"invalid zlib data"),(n[1]>>5&1)==1&&Eh(6,"invalid zlib data: "+(n[1]&32?"need":"unexpected")+" dictionary"),(n[1]>>3&4)+2};function mw(n,t){t||(t={});var r=WT();r.p(n);var i=uH(n,t,t.dictionary?6:2,4);return dH(i,t),YT(i,i.length-4,r.d()),i}function fH(n,t){return oH(n.subarray(hH(n),-4),{i:2},t,t)}var pH=typeof TextDecoder<"u"&&new TextDecoder,mH=0;try{pH.decode(GT,{stream:!0}),mH=1}catch{}var qn=(function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this})();function x2(){qn.console&&typeof qn.console.log=="function"&&qn.console.log.apply(qn.console,arguments)}var ga={log:x2,warn:function(n){qn.console&&(typeof qn.console.warn=="function"?qn.console.warn.apply(qn.console,arguments):x2.call(null,arguments))},error:function(n){qn.console&&(typeof qn.console.error=="function"?qn.console.error.apply(qn.console,arguments):x2(n))}};function b2(n,t,r){var i=new XMLHttpRequest;i.open("GET",n),i.responseType="blob",i.onload=function(){gg(i.response,t,r)},i.onerror=function(){ga.error("could not download file")},i.send()}function LS(n){var t=new XMLHttpRequest;t.open("HEAD",n,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function L1(n){try{n.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),n.dispatchEvent(t)}}var Tx,gw,gg=qn.saveAs||((typeof window>"u"?"undefined":Zs(window))!=="object"||window!==qn?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(n,t,r){var i=qn.URL||qn.webkitURL,o=document.createElement("a");t=t||n.name||"download",o.download=t,o.rel="noopener",typeof n=="string"?(o.href=n,o.origin!==location.origin?LS(o.href)?b2(n,t,r):L1(o,o.target="_blank"):L1(o)):(o.href=i.createObjectURL(n),setTimeout((function(){i.revokeObjectURL(o.href)}),4e4),setTimeout((function(){L1(o)}),0))}:"msSaveOrOpenBlob"in navigator?function(n,t,r){if(t=t||n.name||"download",typeof n=="string")if(LS(n))b2(n,t,r);else{var i=document.createElement("a");i.href=n,i.target="_blank",setTimeout((function(){L1(i)}))}else navigator.msSaveOrOpenBlob((function(o,l){return l===void 0?l={autoBom:!1}:Zs(l)!=="object"&&(ga.warn("Deprecated: Expected third argument to be a object"),l={autoBom:!l}),l.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(o.type)?new Blob(["\uFEFF",o],{type:o.type}):o})(n,r),t)}:function(n,t,r,i){if((i=i||open("","_blank"))&&(i.document.title=i.document.body.innerText="downloading..."),typeof n=="string")return b2(n,t,r);var o=n.type==="application/octet-stream",l=/constructor/i.test(qn.HTMLElement)||qn.safari,a=/CriOS\/[\d]+/.test(navigator.userAgent);if((a||o&&l)&&(typeof FileReader>"u"?"undefined":Zs(FileReader))==="object"){var p=new FileReader;p.onloadend=function(){var j=p.result;j=a?j:j.replace(/^data:[^;]*;/,"data:attachment/file;"),i?i.location.href=j:location=j,i=null},p.readAsDataURL(n)}else{var g=qn.URL||qn.webkitURL,w=g.createObjectURL(n);i?i.location=w:location.href=w,i=null,setTimeout((function(){g.revokeObjectURL(w)}),4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function ZT(n){var t;n=n||"",this.ok=!1,n.charAt(0)=="#"&&(n=n.substr(1,6)),n={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[n=(n=n.replace(/ /g,"")).toLowerCase()]||n;for(var r=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(p){return[parseInt(p[1]),parseInt(p[2]),parseInt(p[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(p){return[parseInt(p[1],16),parseInt(p[2],16),parseInt(p[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(p){return[parseInt(p[1]+p[1],16),parseInt(p[2]+p[2],16),parseInt(p[3]+p[3],16)]}}],i=0;i<r.length;i++){var o=r[i].re,l=r[i].process,a=o.exec(n);a&&(t=l(a),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var p=this.r.toString(16),g=this.g.toString(16),w=this.b.toString(16);return p.length==1&&(p="0"+p),g.length==1&&(g="0"+g),w.length==1&&(w="0"+w),"#"+p+g+w}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function _2(n,t){var r=n[0],i=n[1],o=n[2],l=n[3];r=qc(r,i,o,l,t[0],7,-680876936),l=qc(l,r,i,o,t[1],12,-389564586),o=qc(o,l,r,i,t[2],17,606105819),i=qc(i,o,l,r,t[3],22,-1044525330),r=qc(r,i,o,l,t[4],7,-176418897),l=qc(l,r,i,o,t[5],12,1200080426),o=qc(o,l,r,i,t[6],17,-1473231341),i=qc(i,o,l,r,t[7],22,-45705983),r=qc(r,i,o,l,t[8],7,1770035416),l=qc(l,r,i,o,t[9],12,-1958414417),o=qc(o,l,r,i,t[10],17,-42063),i=qc(i,o,l,r,t[11],22,-1990404162),r=qc(r,i,o,l,t[12],7,1804603682),l=qc(l,r,i,o,t[13],12,-40341101),o=qc(o,l,r,i,t[14],17,-1502002290),r=Vc(r,i=qc(i,o,l,r,t[15],22,1236535329),o,l,t[1],5,-165796510),l=Vc(l,r,i,o,t[6],9,-1069501632),o=Vc(o,l,r,i,t[11],14,643717713),i=Vc(i,o,l,r,t[0],20,-373897302),r=Vc(r,i,o,l,t[5],5,-701558691),l=Vc(l,r,i,o,t[10],9,38016083),o=Vc(o,l,r,i,t[15],14,-660478335),i=Vc(i,o,l,r,t[4],20,-405537848),r=Vc(r,i,o,l,t[9],5,568446438),l=Vc(l,r,i,o,t[14],9,-1019803690),o=Vc(o,l,r,i,t[3],14,-187363961),i=Vc(i,o,l,r,t[8],20,1163531501),r=Vc(r,i,o,l,t[13],5,-1444681467),l=Vc(l,r,i,o,t[2],9,-51403784),o=Vc(o,l,r,i,t[7],14,1735328473),r=$c(r,i=Vc(i,o,l,r,t[12],20,-1926607734),o,l,t[5],4,-378558),l=$c(l,r,i,o,t[8],11,-2022574463),o=$c(o,l,r,i,t[11],16,1839030562),i=$c(i,o,l,r,t[14],23,-35309556),r=$c(r,i,o,l,t[1],4,-1530992060),l=$c(l,r,i,o,t[4],11,1272893353),o=$c(o,l,r,i,t[7],16,-155497632),i=$c(i,o,l,r,t[10],23,-1094730640),r=$c(r,i,o,l,t[13],4,681279174),l=$c(l,r,i,o,t[0],11,-358537222),o=$c(o,l,r,i,t[3],16,-722521979),i=$c(i,o,l,r,t[6],23,76029189),r=$c(r,i,o,l,t[9],4,-640364487),l=$c(l,r,i,o,t[12],11,-421815835),o=$c(o,l,r,i,t[15],16,530742520),r=Hc(r,i=$c(i,o,l,r,t[2],23,-995338651),o,l,t[0],6,-198630844),l=Hc(l,r,i,o,t[7],10,1126891415),o=Hc(o,l,r,i,t[14],15,-1416354905),i=Hc(i,o,l,r,t[5],21,-57434055),r=Hc(r,i,o,l,t[12],6,1700485571),l=Hc(l,r,i,o,t[3],10,-1894986606),o=Hc(o,l,r,i,t[10],15,-1051523),i=Hc(i,o,l,r,t[1],21,-2054922799),r=Hc(r,i,o,l,t[8],6,1873313359),l=Hc(l,r,i,o,t[15],10,-30611744),o=Hc(o,l,r,i,t[6],15,-1560198380),i=Hc(i,o,l,r,t[13],21,1309151649),r=Hc(r,i,o,l,t[4],6,-145523070),l=Hc(l,r,i,o,t[11],10,-1120210379),o=Hc(o,l,r,i,t[2],15,718787259),i=Hc(i,o,l,r,t[9],21,-343485551),n[0]=fm(r,n[0]),n[1]=fm(i,n[1]),n[2]=fm(o,n[2]),n[3]=fm(l,n[3])}function g_(n,t,r,i,o,l){return t=fm(fm(t,n),fm(i,l)),fm(t<<o|t>>>32-o,r)}function qc(n,t,r,i,o,l,a){return g_(t&r|~t&i,n,t,o,l,a)}function Vc(n,t,r,i,o,l,a){return g_(t&i|r&~i,n,t,o,l,a)}function $c(n,t,r,i,o,l,a){return g_(t^r^i,n,t,o,l,a)}function Hc(n,t,r,i,o,l,a){return g_(r^(t|~i),n,t,o,l,a)}function KT(n){var t,r=n.length,i=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=n.length;t+=64)_2(i,gH(n.substring(t-64,t)));n=n.substring(t-64);var o=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<n.length;t++)o[t>>2]|=n.charCodeAt(t)<<(t%4<<3);if(o[t>>2]|=128<<(t%4<<3),t>55)for(_2(i,o),t=0;t<16;t++)o[t]=0;return o[14]=8*r,_2(i,o),i}function gH(n){var t,r=[];for(t=0;t<64;t+=4)r[t>>2]=n.charCodeAt(t)+(n.charCodeAt(t+1)<<8)+(n.charCodeAt(t+2)<<16)+(n.charCodeAt(t+3)<<24);return r}Tx=qn.atob.bind(qn),gw=qn.btoa.bind(qn);var MS="0123456789abcdef".split("");function vH(n){for(var t="",r=0;r<4;r++)t+=MS[n>>8*r+4&15]+MS[n>>8*r&15];return t}function yH(n){return String.fromCharCode((255&n)>>0,(65280&n)>>8,(16711680&n)>>16,(4278190080&n)>>24)}function vw(n){return KT(n).map(yH).join("")}var xH=(function(n){for(var t=0;t<n.length;t++)n[t]=vH(n[t]);return n.join("")})(KT("hello"))!="5d41402abc4b2a76b9719d911017c592";function fm(n,t){if(xH){var r=(65535&n)+(65535&t);return(n>>16)+(t>>16)+(r>>16)<<16|65535&r}return n+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function yw(n,t){var r,i,o,l;if(n!==r){for(var a=(o=n,l=1+(256/n.length>>0),new Array(l+1).join(o)),p=[],g=0;g<256;g++)p[g]=g;var w=0;for(g=0;g<256;g++){var j=p[g];w=(w+j+a.charCodeAt(g))%256,p[g]=p[w],p[w]=j}r=n,i=p}else p=i;var S=t.length,T=0,E=0,O="";for(g=0;g<S;g++)E=(E+(j=p[T=(T+1)%256]))%256,p[T]=p[E],p[E]=j,a=p[(p[T]+p[E])%256],O+=String.fromCharCode(t.charCodeAt(g)^a);return O}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var DS={print:4,modify:8,copy:16,"annot-forms":32};function Lv(n,t,r,i){this.v=1,this.r=2;var o=192;n.forEach((function(p){if(DS.perm!==void 0)throw new Error("Invalid permission: "+p);o+=DS[p]})),this.padding="(N^NuAd\0NV\b..\0h>/\fdSiz";var l=(t+this.padding).substr(0,32),a=(r+this.padding).substr(0,32);this.O=this.processOwnerPassword(l,a),this.P=-(1+(255^o)),this.encryptionKey=vw(l+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(i)).substr(0,5),this.U=yw(this.encryptionKey,this.padding)}function Mv(n){if(/[^\u0000-\u00ff]/.test(n))throw new Error("Invalid PDF Name Object: "+n+", Only accept ASCII characters.");for(var t="",r=n.length,i=0;i<r;i++){var o=n.charCodeAt(i);o<33||o===35||o===37||o===40||o===41||o===47||o===60||o===62||o===91||o===93||o===123||o===125||o>126?t+="#"+("0"+o.toString(16)).slice(-2):t+=n[i]}return t}function OS(n){if(Zs(n)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(r,i,o){if(o=o||!1,typeof r!="string"||typeof i!="function"||typeof o!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(r)||(t[r]={});var l=Math.random().toString(35);return t[r][l]=[i,!!o],l},this.unsubscribe=function(r){for(var i in t)if(t[i][r])return delete t[i][r],Object.keys(t[i]).length===0&&delete t[i],!0;return!1},this.publish=function(r){if(t.hasOwnProperty(r)){var i=Array.prototype.slice.call(arguments,1),o=[];for(var l in t[r]){var a=t[r][l];try{a[0].apply(n,i)}catch(p){qn.console&&ga.error("jsPDF PubSub Error",p.message,p)}a[1]&&o.push(l)}o.length&&o.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function wb(n){if(!(this instanceof wb))return new wb(n);var t="opacity,stroke-opacity".split(",");for(var r in n)n.hasOwnProperty(r)&&t.indexOf(r)>=0&&(this[r]=n[r]);this.id="",this.objectNumber=-1}function XT(n,t){this.gState=n,this.matrix=t,this.id="",this.objectNumber=-1}function bg(n,t,r,i,o){if(!(this instanceof bg))return new bg(n,t,r,i,o);this.type=n==="axial"?2:3,this.coords=t,this.colors=r,XT.call(this,i,o)}function Bv(n,t,r,i,o){if(!(this instanceof Bv))return new Bv(n,t,r,i,o);this.boundingBox=n,this.xStep=t,this.yStep=r,this.stream="",this.cloneIndex=0,XT.call(this,i,o)}function Bn(n){var t,r=typeof arguments[0]=="string"?arguments[0]:"p",i=arguments[1],o=arguments[2],l=arguments[3],a=[],p=1,g=16,w="S",j=null;Zs(n=n||{})==="object"&&(r=n.orientation,i=n.unit||i,o=n.format||o,l=n.compress||n.compressPdf||l,(j=n.encryption||null)!==null&&(j.userPassword=j.userPassword||"",j.ownerPassword=j.ownerPassword||"",j.userPermissions=j.userPermissions||[]),p=typeof n.userUnit=="number"?Math.abs(n.userUnit):1,n.precision!==void 0&&(t=n.precision),n.floatPrecision!==void 0&&(g=n.floatPrecision),w=n.defaultPathOperation||"S"),a=n.filters||(l===!0?["FlateEncode"]:a),i=i||"mm",r=(""+(r||"P")).toLowerCase();var S=n.putOnlyUsedFonts||!1,T={},E={internal:{},__private__:{}};E.__private__.PubSub=OS;var O="1.3",R=E.__private__.getPdfVersion=function(){return O};E.__private__.setPdfVersion=function(H){O=H};var F={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};E.__private__.getPageFormats=function(){return F};var B=E.__private__.getPageFormat=function(H){return F[H]};o=o||"a4";var G={COMPAT:"compat",ADVANCED:"advanced"},z=G.COMPAT;function ee(){this.saveGraphicsState(),Ye(new De(_r,0,0,-_r,0,ru()*_r).toString()+" cm"),this.setFontSize(this.getFontSize()/_r),w="n",z=G.ADVANCED}function ie(){this.restoreGraphicsState(),w="S",z=G.COMPAT}var ge=E.__private__.combineFontStyleAndFontWeight=function(H,be){if(H=="bold"&&be=="normal"||H=="bold"&&be==400||H=="normal"&&be=="italic"||H=="bold"&&be=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return be&&(H=be==400||be==="normal"?H==="italic"?"italic":"normal":be!=700&&be!=="bold"||H!=="normal"?(be==700?"bold":be)+""+H:"bold"),H};E.advancedAPI=function(H){var be=z===G.COMPAT;return be&&ee.call(this),typeof H!="function"||(H(this),be&&ie.call(this)),this},E.compatAPI=function(H){var be=z===G.ADVANCED;return be&&ie.call(this),typeof H!="function"||(H(this),be&&ee.call(this)),this},E.isAdvancedAPI=function(){return z===G.ADVANCED};var K,J=function(H){if(z!==G.ADVANCED)throw new Error(H+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},Se=E.roundToPrecision=E.__private__.roundToPrecision=function(H,be){var Ze=t||be;if(isNaN(H)||isNaN(Ze))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return H.toFixed(Ze).replace(/0+$/,"")};K=E.hpf=E.__private__.hpf=typeof g=="number"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(H,g)}:g==="smart"?function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(H,H>-1&&H<1?16:5)}:function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.hpf");return Se(H,16)};var _e=E.f2=E.__private__.f2=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f2");return Se(H,2)},re=E.__private__.f3=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.f3");return Se(H,3)},ce=E.scale=E.__private__.scale=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.scale");return z===G.COMPAT?H*_r:z===G.ADVANCED?H:void 0},fe=function(H){return z===G.COMPAT?ru()-H:z===G.ADVANCED?H:void 0},ye=function(H){return ce(fe(H))};E.__private__.setPrecision=E.setPrecision=function(H){typeof parseInt(H,10)=="number"&&(t=parseInt(H,10))};var Fe,Q="00000000000000000000000000000000",pe=E.__private__.getFileId=function(){return Q},me=E.__private__.setFileId=function(H){return Q=H!==void 0&&/^[a-fA-F0-9]{32}$/.test(H)?H.toUpperCase():Q.split("").map((function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))})).join(""),j!==null&&(Es=new Lv(j.userPermissions,j.userPassword,j.ownerPassword,Q)),Q};E.setFileId=function(H){return me(H),this},E.getFileId=function(){return pe()};var Ue=E.__private__.convertDateToPDFDate=function(H){var be=H.getTimezoneOffset(),Ze=be<0?"+":"-",dt=Math.floor(Math.abs(be/60)),vt=Math.abs(be%60),$t=[Ze,Ne(dt),"'",Ne(vt),"'"].join("");return["D:",H.getFullYear(),Ne(H.getMonth()+1),Ne(H.getDate()),Ne(H.getHours()),Ne(H.getMinutes()),Ne(H.getSeconds()),$t].join("")},Ke=E.__private__.convertPDFDateToDate=function(H){var be=parseInt(H.substr(2,4),10),Ze=parseInt(H.substr(6,2),10)-1,dt=parseInt(H.substr(8,2),10),vt=parseInt(H.substr(10,2),10),$t=parseInt(H.substr(12,2),10),lr=parseInt(H.substr(14,2),10);return new Date(be,Ze,dt,vt,$t,lr,0)},Re=E.__private__.setCreationDate=function(H){var be;if(H===void 0&&(H=new Date),H instanceof Date)be=Ue(H);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(H))throw new Error("Invalid argument passed to jsPDF.setCreationDate");be=H}return Fe=be},te=E.__private__.getCreationDate=function(H){var be=Fe;return H==="jsDate"&&(be=Ke(Fe)),be};E.setCreationDate=function(H){return Re(H),this},E.getCreationDate=function(H){return te(H)};var ue,Ne=E.__private__.padd2=function(H){return("0"+parseInt(H)).slice(-2)},Me=E.__private__.padd2Hex=function(H){return("00"+(H=H.toString())).substr(H.length)},We=0,Ve=[],tt=[],Qe=0,St=[],Et=[],zt=!1,Lt=tt,wr=function(){We=0,Qe=0,tt=[],Ve=[],St=[],bt=ht(),Mt=ht()};E.__private__.setCustomOutputDestination=function(H){zt=!0,Lt=H};var _t=function(H){zt||(Lt=H)};E.__private__.resetCustomOutputDestination=function(){zt=!1,Lt=tt};var Ye=E.__private__.out=function(H){return H=H.toString(),Qe+=H.length+1,Lt.push(H),Lt},$r=E.__private__.write=function(H){return Ye(arguments.length===1?H.toString():Array.prototype.join.call(arguments," "))},Cr=E.__private__.getArrayBuffer=function(H){for(var be=H.length,Ze=new ArrayBuffer(be),dt=new Uint8Array(Ze);be--;)dt[be]=H.charCodeAt(be);return Ze},Zt=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];E.__private__.getStandardFonts=function(){return Zt};var Be=n.fontSize||16;E.__private__.setFontSize=E.setFontSize=function(H){return Be=z===G.ADVANCED?H/_r:H,this};var it,at=E.__private__.getFontSize=E.getFontSize=function(){return z===G.COMPAT?Be:Be*_r},Tt=n.R2L||!1;E.__private__.setR2L=E.setR2L=function(H){return Tt=H,this},E.__private__.getR2L=E.getR2L=function(){return Tt};var kt,Ot=E.__private__.setZoomMode=function(H){var be=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(H))it=H;else if(isNaN(H)){if(be.indexOf(H)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+H+'" is not recognized.');it=H}else it=parseInt(H,10)};E.__private__.getZoomMode=function(){return it};var Qt,zr=E.__private__.setPageMode=function(H){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(H)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+H+'" is not recognized.');kt=H};E.__private__.getPageMode=function(){return kt};var Hr=E.__private__.setLayoutMode=function(H){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(H)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+H+'" is not recognized.');Qt=H};E.__private__.getLayoutMode=function(){return Qt},E.__private__.setDisplayMode=E.setDisplayMode=function(H,be,Ze){return Ot(H),Hr(be),zr(Ze),this};var Ur={title:"",subject:"",author:"",keywords:"",creator:""};E.__private__.getDocumentProperty=function(H){if(Object.keys(Ur).indexOf(H)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Ur[H]},E.__private__.getDocumentProperties=function(){return Ur},E.__private__.setDocumentProperties=E.setProperties=E.setDocumentProperties=function(H){for(var be in Ur)Ur.hasOwnProperty(be)&&H[be]&&(Ur[be]=H[be]);return this},E.__private__.setDocumentProperty=function(H,be){if(Object.keys(Ur).indexOf(H)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Ur[H]=be};var nn,_r,Ri,_n,fi,kn={},yn={},va=[],zn={},Sa={},wi={},Cs={},zs=null,pi=0,xr=[],Lr=new OS(E),oe=n.hotfixes||[],xe={},Ce={},Te=[],De=function H(be,Ze,dt,vt,$t,lr){if(!(this instanceof H))return new H(be,Ze,dt,vt,$t,lr);isNaN(be)&&(be=1),isNaN(Ze)&&(Ze=0),isNaN(dt)&&(dt=0),isNaN(vt)&&(vt=1),isNaN($t)&&($t=0),isNaN(lr)&&(lr=0),this._matrix=[be,Ze,dt,vt,$t,lr]};Object.defineProperty(De.prototype,"sx",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(De.prototype,"shy",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(De.prototype,"shx",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(De.prototype,"sy",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(De.prototype,"tx",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(De.prototype,"ty",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(De.prototype,"a",{get:function(){return this._matrix[0]},set:function(H){this._matrix[0]=H}}),Object.defineProperty(De.prototype,"b",{get:function(){return this._matrix[1]},set:function(H){this._matrix[1]=H}}),Object.defineProperty(De.prototype,"c",{get:function(){return this._matrix[2]},set:function(H){this._matrix[2]=H}}),Object.defineProperty(De.prototype,"d",{get:function(){return this._matrix[3]},set:function(H){this._matrix[3]=H}}),Object.defineProperty(De.prototype,"e",{get:function(){return this._matrix[4]},set:function(H){this._matrix[4]=H}}),Object.defineProperty(De.prototype,"f",{get:function(){return this._matrix[5]},set:function(H){this._matrix[5]=H}}),Object.defineProperty(De.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(De.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(De.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(De.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),De.prototype.join=function(H){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(K).join(H)},De.prototype.multiply=function(H){var be=H.sx*this.sx+H.shy*this.shx,Ze=H.sx*this.shy+H.shy*this.sy,dt=H.shx*this.sx+H.sy*this.shx,vt=H.shx*this.shy+H.sy*this.sy,$t=H.tx*this.sx+H.ty*this.shx+this.tx,lr=H.tx*this.shy+H.ty*this.sy+this.ty;return new De(be,Ze,dt,vt,$t,lr)},De.prototype.decompose=function(){var H=this.sx,be=this.shy,Ze=this.shx,dt=this.sy,vt=this.tx,$t=this.ty,lr=Math.sqrt(H*H+be*be),Or=(H/=lr)*Ze+(be/=lr)*dt;Ze-=H*Or,dt-=be*Or;var Zr=Math.sqrt(Ze*Ze+dt*dt);return Or/=Zr,H*(dt/=Zr)<be*(Ze/=Zr)&&(H=-H,be=-be,Or=-Or,lr=-lr),{scale:new De(lr,0,0,Zr,0,0),translate:new De(1,0,0,1,vt,$t),rotate:new De(H,be,-be,H,0,0),skew:new De(1,0,Or,1,0,0)}},De.prototype.toString=function(H){return this.join(" ")},De.prototype.inversed=function(){var H=this.sx,be=this.shy,Ze=this.shx,dt=this.sy,vt=this.tx,$t=this.ty,lr=1/(H*dt-be*Ze),Or=dt*lr,Zr=-be*lr,Pn=-Ze*lr,dn=H*lr;return new De(Or,Zr,Pn,dn,-Or*vt-Pn*$t,-Zr*vt-dn*$t)},De.prototype.applyToPoint=function(H){var be=H.x*this.sx+H.y*this.shx+this.tx,Ze=H.x*this.shy+H.y*this.sy+this.ty;return new kl(be,Ze)},De.prototype.applyToRectangle=function(H){var be=this.applyToPoint(H),Ze=this.applyToPoint(new kl(H.x+H.w,H.y+H.h));return new dc(be.x,be.y,Ze.x-be.x,Ze.y-be.y)},De.prototype.clone=function(){var H=this.sx,be=this.shy,Ze=this.shx,dt=this.sy,vt=this.tx,$t=this.ty;return new De(H,be,Ze,dt,vt,$t)},E.Matrix=De;var et=E.matrixMult=function(H,be){return be.multiply(H)},nt=new De(1,0,0,1,0,0);E.unitMatrix=E.identityMatrix=nt;var ke=function(H,be){if(!Sa[H]){var Ze=(be instanceof bg?"Sh":"P")+(Object.keys(zn).length+1).toString(10);be.id=Ze,Sa[H]=Ze,zn[Ze]=be,Lr.publish("addPattern",be)}};E.ShadingPattern=bg,E.TilingPattern=Bv,E.addShadingPattern=function(H,be){return J("addShadingPattern()"),ke(H,be),this},E.beginTilingPattern=function(H){J("beginTilingPattern()"),rh(H.boundingBox[0],H.boundingBox[1],H.boundingBox[2]-H.boundingBox[0],H.boundingBox[3]-H.boundingBox[1],H.matrix)},E.endTilingPattern=function(H,be){J("endTilingPattern()"),be.stream=Et[ue].join(`
`),ke(H,be),Lr.publish("endTilingPattern",be),Te.pop().restore()};var qe=E.__private__.newObject=function(){var H=ht();return qt(H,!0),H},ht=E.__private__.newObjectDeferred=function(){return We++,Ve[We]=function(){return Qe},We},qt=function(H,be){return be=typeof be=="boolean"&&be,Ve[H]=Qe,be&&Ye(H+" 0 obj"),H},Xt=E.__private__.newAdditionalObject=function(){var H={objId:ht(),content:""};return St.push(H),H},bt=ht(),Mt=ht(),dr=E.__private__.decodeColorString=function(H){var be=H.split(" ");if(be.length!==2||be[1]!=="g"&&be[1]!=="G")be.length===5&&(be[4]==="k"||be[4]==="K")&&(be=[(1-be[0])*(1-be[3]),(1-be[1])*(1-be[3]),(1-be[2])*(1-be[3]),"r"]);else{var Ze=parseFloat(be[0]);be=[Ze,Ze,Ze,"r"]}for(var dt="#",vt=0;vt<3;vt++)dt+=("0"+Math.floor(255*parseFloat(be[vt])).toString(16)).slice(-2);return dt},mr=E.__private__.encodeColorString=function(H){var be;typeof H=="string"&&(H={ch1:H});var Ze=H.ch1,dt=H.ch2,vt=H.ch3,$t=H.ch4,lr=H.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ze=="string"&&Ze.charAt(0)!=="#"){var Or=new ZT(Ze);if(Or.ok)Ze=Or.toHex();else if(!/^\d*\.?\d*$/.test(Ze))throw new Error('Invalid color "'+Ze+'" passed to jsPDF.encodeColorString.')}if(typeof Ze=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ze)&&(Ze="#"+Ze[1]+Ze[1]+Ze[2]+Ze[2]+Ze[3]+Ze[3]),typeof Ze=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ze)){var Zr=parseInt(Ze.substr(1),16);Ze=Zr>>16&255,dt=Zr>>8&255,vt=255&Zr}if(dt===void 0||$t===void 0&&Ze===dt&&dt===vt)if(typeof Ze=="string")be=Ze+" "+lr[0];else switch(H.precision){case 2:be=_e(Ze/255)+" "+lr[0];break;case 3:default:be=re(Ze/255)+" "+lr[0]}else if($t===void 0||Zs($t)==="object"){if($t&&!isNaN($t.a)&&$t.a===0)return be=["1.","1.","1.",lr[1]].join(" ");if(typeof Ze=="string")be=[Ze,dt,vt,lr[1]].join(" ");else switch(H.precision){case 2:be=[_e(Ze/255),_e(dt/255),_e(vt/255),lr[1]].join(" ");break;default:case 3:be=[re(Ze/255),re(dt/255),re(vt/255),lr[1]].join(" ")}}else if(typeof Ze=="string")be=[Ze,dt,vt,$t,lr[2]].join(" ");else switch(H.precision){case 2:be=[_e(Ze),_e(dt),_e(vt),_e($t),lr[2]].join(" ");break;case 3:default:be=[re(Ze),re(dt),re(vt),re($t),lr[2]].join(" ")}return be},jt=E.__private__.getFilters=function(){return a},gr=E.__private__.putStream=function(H){var be=(H=H||{}).data||"",Ze=H.filters||jt(),dt=H.alreadyAppliedFilters||[],vt=H.addLength1||!1,$t=be.length,lr=H.objectId,Or=function(ba){return ba};if(j!==null&&lr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");j!==null&&(Or=Es.encryptor(lr,0));var Zr={};Ze===!0&&(Ze=["FlateEncode"]);var Pn=H.additionalKeyValues||[],dn=(Zr=Bn.API.processDataByFilters!==void 0?Bn.API.processDataByFilters(be,Ze):{data:be,reverseChain:[]}).reverseChain+(Array.isArray(dt)?dt.join(" "):dt.toString());if(Zr.data.length!==0&&(Pn.push({key:"Length",value:Zr.data.length}),vt===!0&&Pn.push({key:"Length1",value:$t})),dn.length!=0)if(dn.split("/").length-1==1)Pn.push({key:"Filter",value:dn});else{Pn.push({key:"Filter",value:"["+dn+"]"});for(var Kn=0;Kn<Pn.length;Kn+=1)if(Pn[Kn].key==="DecodeParms"){for(var _s=[],ts=0;ts<Zr.reverseChain.split("/").length-1;ts+=1)_s.push("null");_s.push(Pn[Kn].value),Pn[Kn].value="["+_s.join(" ")+"]"}}Ye("<<");for(var Sn=0;Sn<Pn.length;Sn++)Ye("/"+Pn[Sn].key+" "+Pn[Sn].value);Ye(">>"),Zr.data.length!==0&&(Ye("stream"),Ye(Or(Zr.data)),Ye("endstream"))},or=E.__private__.putPage=function(H){var be=H.number,Ze=H.data,dt=H.objId,vt=H.contentsObjId;qt(dt,!0),Ye("<</Type /Page"),Ye("/Parent "+H.rootDictionaryObjId+" 0 R"),Ye("/Resources "+H.resourceDictionaryObjId+" 0 R"),Ye("/MediaBox ["+parseFloat(K(H.mediaBox.bottomLeftX))+" "+parseFloat(K(H.mediaBox.bottomLeftY))+" "+K(H.mediaBox.topRightX)+" "+K(H.mediaBox.topRightY)+"]"),H.cropBox!==null&&Ye("/CropBox ["+K(H.cropBox.bottomLeftX)+" "+K(H.cropBox.bottomLeftY)+" "+K(H.cropBox.topRightX)+" "+K(H.cropBox.topRightY)+"]"),H.bleedBox!==null&&Ye("/BleedBox ["+K(H.bleedBox.bottomLeftX)+" "+K(H.bleedBox.bottomLeftY)+" "+K(H.bleedBox.topRightX)+" "+K(H.bleedBox.topRightY)+"]"),H.trimBox!==null&&Ye("/TrimBox ["+K(H.trimBox.bottomLeftX)+" "+K(H.trimBox.bottomLeftY)+" "+K(H.trimBox.topRightX)+" "+K(H.trimBox.topRightY)+"]"),H.artBox!==null&&Ye("/ArtBox ["+K(H.artBox.bottomLeftX)+" "+K(H.artBox.bottomLeftY)+" "+K(H.artBox.topRightX)+" "+K(H.artBox.topRightY)+"]"),typeof H.userUnit=="number"&&H.userUnit!==1&&Ye("/UserUnit "+H.userUnit),Lr.publish("putPage",{objId:dt,pageContext:xr[be],pageNumber:be,page:Ze}),Ye("/Contents "+vt+" 0 R"),Ye(">>"),Ye("endobj");var $t=Ze.join(`
`);return z===G.ADVANCED&&($t+=`
Q`),qt(vt,!0),gr({data:$t,filters:jt(),objectId:vt}),Ye("endobj"),dt},fr=E.__private__.putPages=function(){var H,be,Ze=[];for(H=1;H<=pi;H++)xr[H].objId=ht(),xr[H].contentsObjId=ht();for(H=1;H<=pi;H++)Ze.push(or({number:H,data:Et[H],objId:xr[H].objId,contentsObjId:xr[H].contentsObjId,mediaBox:xr[H].mediaBox,cropBox:xr[H].cropBox,bleedBox:xr[H].bleedBox,trimBox:xr[H].trimBox,artBox:xr[H].artBox,userUnit:xr[H].userUnit,rootDictionaryObjId:bt,resourceDictionaryObjId:Mt}));qt(bt,!0),Ye("<</Type /Pages");var dt="/Kids [";for(be=0;be<pi;be++)dt+=Ze[be]+" 0 R ";Ye(dt+"]"),Ye("/Count "+pi),Ye(">>"),Ye("endobj"),Lr.publish("postPutPages")},an=function(H){Lr.publish("putFont",{font:H,out:Ye,newObject:qe,putStream:gr}),H.isAlreadyPutted!==!0&&(H.objectNumber=qe(),Ye("<<"),Ye("/Type /Font"),Ye("/BaseFont /"+Mv(H.postScriptName)),Ye("/Subtype /Type1"),typeof H.encoding=="string"&&Ye("/Encoding /"+H.encoding),Ye("/FirstChar 32"),Ye("/LastChar 255"),Ye(">>"),Ye("endobj"))},yr=function(){for(var H in kn)kn.hasOwnProperty(H)&&(S===!1||S===!0&&T.hasOwnProperty(H))&&an(kn[H])},xn=function(H){H.objectNumber=qe();var be=[];be.push({key:"Type",value:"/XObject"}),be.push({key:"Subtype",value:"/Form"}),be.push({key:"BBox",value:"["+[K(H.x),K(H.y),K(H.x+H.width),K(H.y+H.height)].join(" ")+"]"}),be.push({key:"Matrix",value:"["+H.matrix.toString()+"]"});var Ze=H.pages[1].join(`
`);gr({data:Ze,additionalKeyValues:be,objectId:H.objectNumber}),Ye("endobj")},$n=function(){for(var H in xe)xe.hasOwnProperty(H)&&xn(xe[H])},bn=function(H,be){var Ze,dt=[],vt=1/(be-1);for(Ze=0;Ze<1;Ze+=vt)dt.push(Ze);if(dt.push(1),H[0].offset!=0){var $t={offset:0,color:H[0].color};H.unshift($t)}if(H[H.length-1].offset!=1){var lr={offset:1,color:H[H.length-1].color};H.push(lr)}for(var Or="",Zr=0,Pn=0;Pn<dt.length;Pn++){for(Ze=dt[Pn];Ze>H[Zr+1].offset;)Zr++;var dn=H[Zr].offset,Kn=(Ze-dn)/(H[Zr+1].offset-dn),_s=H[Zr].color,ts=H[Zr+1].color;Or+=Me(Math.round((1-Kn)*_s[0]+Kn*ts[0]).toString(16))+Me(Math.round((1-Kn)*_s[1]+Kn*ts[1]).toString(16))+Me(Math.round((1-Kn)*_s[2]+Kn*ts[2]).toString(16))}return Or.trim()},Un=function(H,be){be||(be=21);var Ze=qe(),dt=bn(H.colors,be),vt=[];vt.push({key:"FunctionType",value:"0"}),vt.push({key:"Domain",value:"[0.0 1.0]"}),vt.push({key:"Size",value:"["+be+"]"}),vt.push({key:"BitsPerSample",value:"8"}),vt.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),vt.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),gr({data:dt,additionalKeyValues:vt,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ze}),Ye("endobj"),H.objectNumber=qe(),Ye("<< /ShadingType "+H.type),Ye("/ColorSpace /DeviceRGB");var $t="/Coords ["+K(parseFloat(H.coords[0]))+" "+K(parseFloat(H.coords[1]))+" ";H.type===2?$t+=K(parseFloat(H.coords[2]))+" "+K(parseFloat(H.coords[3])):$t+=K(parseFloat(H.coords[2]))+" "+K(parseFloat(H.coords[3]))+" "+K(parseFloat(H.coords[4]))+" "+K(parseFloat(H.coords[5])),Ye($t+="]"),H.matrix&&Ye("/Matrix ["+H.matrix.toString()+"]"),Ye("/Function "+Ze+" 0 R"),Ye("/Extend [true true]"),Ye(">>"),Ye("endobj")},Xr=function(H,be){var Ze=ht(),dt=qe();be.push({resourcesOid:Ze,objectOid:dt}),H.objectNumber=dt;var vt=[];vt.push({key:"Type",value:"/Pattern"}),vt.push({key:"PatternType",value:"1"}),vt.push({key:"PaintType",value:"1"}),vt.push({key:"TilingType",value:"1"}),vt.push({key:"BBox",value:"["+H.boundingBox.map(K).join(" ")+"]"}),vt.push({key:"XStep",value:K(H.xStep)}),vt.push({key:"YStep",value:K(H.yStep)}),vt.push({key:"Resources",value:Ze+" 0 R"}),H.matrix&&vt.push({key:"Matrix",value:"["+H.matrix.toString()+"]"}),gr({data:H.stream,additionalKeyValues:vt,objectId:H.objectNumber}),Ye("endobj")},Ks=function(H){var be;for(be in zn)zn.hasOwnProperty(be)&&(zn[be]instanceof bg?Un(zn[be]):zn[be]instanceof Bv&&Xr(zn[be],H))},ti=function(H){for(var be in H.objectNumber=qe(),Ye("<<"),H)switch(be){case"opacity":Ye("/ca "+_e(H[be]));break;case"stroke-opacity":Ye("/CA "+_e(H[be]))}Ye(">>"),Ye("endobj")},Ii=function(){var H;for(H in wi)wi.hasOwnProperty(H)&&ti(wi[H])},Hn=function(){for(var H in Ye("/XObject <<"),xe)xe.hasOwnProperty(H)&&xe[H].objectNumber>=0&&Ye("/"+H+" "+xe[H].objectNumber+" 0 R");Lr.publish("putXobjectDict"),Ye(">>")},Fn=function(){Es.oid=qe(),Ye("<<"),Ye("/Filter /Standard"),Ye("/V "+Es.v),Ye("/R "+Es.r),Ye("/U <"+Es.toHexString(Es.U)+">"),Ye("/O <"+Es.toHexString(Es.O)+">"),Ye("/P "+Es.P),Ye(">>"),Ye("endobj")},Yn=function(){for(var H in Ye("/Font <<"),kn)kn.hasOwnProperty(H)&&(S===!1||S===!0&&T.hasOwnProperty(H))&&Ye("/"+H+" "+kn[H].objectNumber+" 0 R");Ye(">>")},qa=function(){if(Object.keys(zn).length>0){for(var H in Ye("/Shading <<"),zn)zn.hasOwnProperty(H)&&zn[H]instanceof bg&&zn[H].objectNumber>=0&&Ye("/"+H+" "+zn[H].objectNumber+" 0 R");Lr.publish("putShadingPatternDict"),Ye(">>")}},Nc=function(H){if(Object.keys(zn).length>0){for(var be in Ye("/Pattern <<"),zn)zn.hasOwnProperty(be)&&zn[be]instanceof E.TilingPattern&&zn[be].objectNumber>=0&&zn[be].objectNumber<H&&Ye("/"+be+" "+zn[be].objectNumber+" 0 R");Lr.publish("putTilingPatternDict"),Ye(">>")}},ks=function(){if(Object.keys(wi).length>0){var H;for(H in Ye("/ExtGState <<"),wi)wi.hasOwnProperty(H)&&wi[H].objectNumber>=0&&Ye("/"+H+" "+wi[H].objectNumber+" 0 R");Lr.publish("putGStateDict"),Ye(">>")}},ri=function(H){qt(H.resourcesOid,!0),Ye("<<"),Ye("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),Yn(),qa(),Nc(H.objectOid),ks(),Hn(),Ye(">>"),Ye("endobj")},Wo=function(){var H=[];yr(),Ii(),$n(),Ks(H),Lr.publish("putResources"),H.forEach(ri),ri({resourcesOid:Mt,objectOid:Number.MAX_SAFE_INTEGER}),Lr.publish("postPutResources")},Aa=function(){Lr.publish("putAdditionalObjects");for(var H=0;H<St.length;H++){var be=St[H];qt(be.objId,!0),Ye(be.content),Ye("endobj")}Lr.publish("postPutAdditionalObjects")},es=function(H){yn[H.fontName]=yn[H.fontName]||{},yn[H.fontName][H.fontStyle]=H.id},Qc=function(H,be,Ze,dt,vt){var $t={id:"F"+(Object.keys(kn).length+1).toString(10),postScriptName:H,fontName:be,fontStyle:Ze,encoding:dt,isStandardFont:vt||!1,metadata:{}};return Lr.publish("addFont",{font:$t,instance:this}),kn[$t.id]=$t,es($t),$t.id},ya=function(H){for(var be=0,Ze=Zt.length;be<Ze;be++){var dt=Qc.call(this,H[be][0],H[be][1],H[be][2],Zt[be][3],!0);S===!1&&(T[dt]=!0);var vt=H[be][0].split("-");es({id:dt,fontName:vt[0],fontStyle:vt[1]||""})}Lr.publish("addFonts",{fonts:kn,dictionary:yn})},Oi=function(H){return H.foo=function(){try{return H.apply(this,arguments)}catch(dt){var be=dt.stack||"";~be.indexOf(" at ")&&(be=be.split(" at ")[1]);var Ze="Error in function "+be.split(`
`)[0].split("<")[0]+": "+dt.message;if(!qn.console)throw new Error(Ze);qn.console.error(Ze,dt),qn.alert&&alert(Ze)}},H.foo.bar=H,H.foo},xa=function(H,be){var Ze,dt,vt,$t,lr,Or,Zr,Pn,dn;if(vt=(be=be||{}).sourceEncoding||"Unicode",lr=be.outputEncoding,(be.autoencode||lr)&&kn[nn].metadata&&kn[nn].metadata[vt]&&kn[nn].metadata[vt].encoding&&($t=kn[nn].metadata[vt].encoding,!lr&&kn[nn].encoding&&(lr=kn[nn].encoding),!lr&&$t.codePages&&(lr=$t.codePages[0]),typeof lr=="string"&&(lr=$t[lr]),lr)){for(Zr=!1,Or=[],Ze=0,dt=H.length;Ze<dt;Ze++)(Pn=lr[H.charCodeAt(Ze)])?Or.push(String.fromCharCode(Pn)):Or.push(H[Ze]),Or[Ze].charCodeAt(0)>>8&&(Zr=!0);H=Or.join("")}for(Ze=H.length;Zr===void 0&&Ze!==0;)H.charCodeAt(Ze-1)>>8&&(Zr=!0),Ze--;if(!Zr)return H;for(Or=be.noBOM?[]:[254,255],Ze=0,dt=H.length;Ze<dt;Ze++){if((dn=(Pn=H.charCodeAt(Ze))>>8)>>8)throw new Error("Character at position "+Ze+" of string '"+H+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");Or.push(dn),Or.push(Pn-(dn<<8))}return String.fromCharCode.apply(void 0,Or)},Zn=E.__private__.pdfEscape=E.pdfEscape=function(H,be){return xa(H,be).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},cs=E.__private__.beginPage=function(H){Et[++pi]=[],xr[pi]={objId:0,contentsObjId:0,userUnit:Number(p),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(H[0]),topRightY:Number(H[1])}},to(pi),_t(Et[ue])},Va=function(H,be){var Ze,dt,vt;switch(r=be||r,typeof H=="string"&&(Ze=B(H.toLowerCase()),Array.isArray(Ze)&&(dt=Ze[0],vt=Ze[1])),Array.isArray(H)&&(dt=H[0]*_r,vt=H[1]*_r),isNaN(dt)&&(dt=o[0],vt=o[1]),(dt>14400||vt>14400)&&(ga.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),dt=Math.min(14400,dt),vt=Math.min(14400,vt)),o=[dt,vt],r.substr(0,1)){case"l":vt>dt&&(o=[vt,dt]);break;case"p":dt>vt&&(o=[vt,dt])}cs(o),tu(Ha),Ye(Lo),lc!==0&&Ye(lc+" J"),cc!==0&&Ye(cc+" j"),Lr.publish("addPage",{pageNumber:pi})},th=function(H){H>0&&H<=pi&&(Et.splice(H,1),xr.splice(H,1),pi--,ue>pi&&(ue=pi),this.setPage(ue))},to=function(H){H>0&&H<=pi&&(ue=H)},wu=E.__private__.getNumberOfPages=E.getNumberOfPages=function(){return Et.length-1},wl=function(H,be,Ze){var dt,vt=void 0;return Ze=Ze||{},H=H!==void 0?H:kn[nn].fontName,be=be!==void 0?be:kn[nn].fontStyle,dt=H.toLowerCase(),yn[dt]!==void 0&&yn[dt][be]!==void 0?vt=yn[dt][be]:yn[H]!==void 0&&yn[H][be]!==void 0?vt=yn[H][be]:Ze.disableWarning===!1&&ga.warn("Unable to look up font label for font '"+H+"', '"+be+"'. Refer to getFontList() for available fonts."),vt||Ze.noFallback||(vt=yn.times[be])==null&&(vt=yn.times.normal),vt},ia=E.__private__.putInfo=function(){var H=qe(),be=function(dt){return dt};for(var Ze in j!==null&&(be=Es.encryptor(H,0)),Ye("<<"),Ye("/Producer ("+Zn(be("jsPDF "+Bn.version))+")"),Ur)Ur.hasOwnProperty(Ze)&&Ur[Ze]&&Ye("/"+Ze.substr(0,1).toUpperCase()+Ze.substr(1)+" ("+Zn(be(Ur[Ze]))+")");Ye("/CreationDate ("+Zn(be(Fe))+")"),Ye(">>"),Ye("endobj")},Ca=E.__private__.putCatalog=function(H){var be=(H=H||{}).rootDictionaryObjId||bt;switch(qe(),Ye("<<"),Ye("/Type /Catalog"),Ye("/Pages "+be+" 0 R"),it||(it="fullwidth"),it){case"fullwidth":Ye("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Ye("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Ye("/OpenAction [3 0 R /Fit]");break;case"original":Ye("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ze=""+it;Ze.substr(Ze.length-1)==="%"&&(it=parseInt(it)/100),typeof it=="number"&&Ye("/OpenAction [3 0 R /XYZ null null "+_e(it)+"]")}switch(Qt||(Qt="continuous"),Qt){case"continuous":Ye("/PageLayout /OneColumn");break;case"single":Ye("/PageLayout /SinglePage");break;case"two":case"twoleft":Ye("/PageLayout /TwoColumnLeft");break;case"tworight":Ye("/PageLayout /TwoColumnRight")}kt&&Ye("/PageMode /"+kt),Lr.publish("putCatalog"),Ye(">>"),Ye("endobj")},$a=E.__private__.putTrailer=function(){Ye("trailer"),Ye("<<"),Ye("/Size "+(We+1)),Ye("/Root "+We+" 0 R"),Ye("/Info "+(We-1)+" 0 R"),j!==null&&Ye("/Encrypt "+Es.oid+" 0 R"),Ye("/ID [ <"+Q+"> <"+Q+"> ]"),Ye(">>")},Sc=E.__private__.putHeader=function(){Ye("%PDF-"+O),Ye("%")},$h=E.__private__.putXRef=function(){var H="0000000000";Ye("xref"),Ye("0 "+(We+1)),Ye("0000000000 65535 f ");for(var be=1;be<=We;be++)typeof Ve[be]=="function"?Ye((H+Ve[be]()).slice(-10)+" 00000 n "):Ve[be]!==void 0?Ye((H+Ve[be]).slice(-10)+" 00000 n "):Ye("0000000000 00000 n ")},sc=E.__private__.buildDocument=function(){wr(),_t(tt),Lr.publish("buildDocument"),Sc(),fr(),Aa(),Wo(),j!==null&&Fn(),ia(),Ca();var H=Qe;return $h(),$a(),Ye("startxref"),Ye(""+H),Ye("%%EOF"),_t(Et[ue]),tt.join(`
`)},ju=E.__private__.getBlob=function(H){return new Blob([Cr(H)],{type:"application/pdf"})},bd=E.output=E.__private__.output=Oi((function(H,be){switch(typeof(be=be||{})=="string"?be={filename:be}:be.filename=be.filename||"generated.pdf",H){case void 0:return sc();case"save":E.save(be.filename);break;case"arraybuffer":return Cr(sc());case"blob":return ju(sc());case"bloburi":case"bloburl":if(qn.URL!==void 0&&typeof qn.URL.createObjectURL=="function")return qn.URL&&qn.URL.createObjectURL(ju(sc()))||void 0;ga.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ze="",dt=sc();try{Ze=gw(dt)}catch{Ze=gw(unescape(encodeURIComponent(dt)))}return"data:application/pdf;filename="+be.filename+";base64,"+Ze;case"pdfobjectnewwindow":if(Object.prototype.toString.call(qn)==="[object Window]"){var vt="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",$t=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';be.pdfObjectUrl&&(vt=be.pdfObjectUrl,$t="");var lr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+vt+'"'+$t+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(be)+");<\/script></body></html>",Or=qn.open();return Or!==null&&Or.document.write(lr),Or}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(qn)==="[object Window]"){var Zr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(be.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+be.filename+'" width="500px" height="400px" /></body></html>',Pn=qn.open();if(Pn!==null){Pn.document.write(Zr);var dn=this;Pn.document.documentElement.querySelector("#pdfViewer").onload=function(){Pn.document.title=be.filename,Pn.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(dn.output("bloburl"))}}return Pn}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(qn)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var Kn='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",be)+'"></iframe></body></html>',_s=qn.open();if(_s!==null&&(_s.document.write(Kn),_s.document.title=be.filename),_s||typeof safari>"u")return _s;break;case"datauri":case"dataurl":return qn.document.location.href=this.output("datauristring",be);default:return null}})),Nu=function(H){return Array.isArray(oe)===!0&&oe.indexOf(H)>-1};switch(i){case"pt":_r=1;break;case"mm":_r=72/25.4;break;case"cm":_r=72/2.54;break;case"in":_r=72;break;case"px":_r=Nu("px_scaling")==1?.75:96/72;break;case"pc":case"em":_r=12;break;case"ex":_r=6;break;default:if(typeof i!="number")throw new Error("Invalid unit: "+i);_r=i}var Es=null;Re(),me();var _d=function(H){return j!==null?Es.encryptor(H,0):function(be){return be}},zu=E.__private__.getPageInfo=E.getPageInfo=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:xr[H].objId,pageNumber:H,pageContext:xr[H]}},cn=E.__private__.getPageInfoByObjId=function(H){if(isNaN(H)||H%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var be in xr)if(xr[be].objId===H)break;return zu(be)},Ac=E.__private__.getCurrentPageInfo=E.getCurrentPageInfo=function(){return{objId:xr[ue].objId,pageNumber:ue,pageContext:xr[ue]}};E.addPage=function(){return Va.apply(this,arguments),this},E.setPage=function(){return to.apply(this,arguments),_t.call(this,Et[ue]),this},E.insertPage=function(H){return this.addPage(),this.movePage(ue,H),this},E.movePage=function(H,be){var Ze,dt;if(H>be){Ze=Et[H],dt=xr[H];for(var vt=H;vt>be;vt--)Et[vt]=Et[vt-1],xr[vt]=xr[vt-1];Et[be]=Ze,xr[be]=dt,this.setPage(be)}else if(H<be){Ze=Et[H],dt=xr[H];for(var $t=H;$t<be;$t++)Et[$t]=Et[$t+1],xr[$t]=xr[$t+1];Et[be]=Ze,xr[be]=dt,this.setPage(be)}return this},E.deletePage=function(){return th.apply(this,arguments),this},E.__private__.text=E.text=function(H,be,Ze,dt,vt){var $t,lr,Or,Zr,Pn,dn,Kn,_s,ts,Sn=(dt=dt||{}).scope||this;if(typeof H=="number"&&typeof be=="number"&&(typeof Ze=="string"||Array.isArray(Ze))){var ba=Ze;Ze=be,be=H,H=ba}if(arguments[3]instanceof De?(J("The transform parameter of text() with a Matrix value"),ts=vt):(Or=arguments[4],Zr=arguments[5],Zs(Kn=arguments[3])==="object"&&Kn!==null||(typeof Or=="string"&&(Zr=Or,Or=null),typeof Kn=="string"&&(Zr=Kn,Kn=null),typeof Kn=="number"&&(Or=Kn,Kn=null),dt={flags:Kn,angle:Or,align:Zr})),isNaN(be)||isNaN(Ze)||H==null)throw new Error("Invalid arguments passed to jsPDF.text");if(H.length===0)return Sn;var Ea="",oa=!1,Ko=typeof dt.lineHeightFactor=="number"?dt.lineHeightFactor:eu,Ec=Sn.internal.scaleFactor;function nh(Xn){return Xn=Xn.split("	").join(Array(dt.TabLen||9).join(" ")),Zn(Xn,Kn)}function nu(Xn){for(var zi,mn=Xn.concat(),sr=[],Rs=mn.length;Rs--;)typeof(zi=mn.shift())=="string"?sr.push(zi):Array.isArray(Xn)&&(zi.length===1||zi[1]===void 0&&zi[2]===void 0)?sr.push(zi[0]):sr.push([zi[0],zi[1],zi[2]]);return sr}function hc(Xn,zi){var mn;if(typeof Xn=="string")mn=zi(Xn)[0];else if(Array.isArray(Xn)){for(var sr,Rs,mc=Xn.concat(),rl=[],bo=mc.length;bo--;)typeof(sr=mc.shift())=="string"?rl.push(zi(sr)[0]):Array.isArray(sr)&&typeof sr[0]=="string"&&(Rs=zi(sr[0],sr[1],sr[2]),rl.push([Rs[0],Rs[1],Rs[2]]));mn=rl}return mn}var Xo=!1,Vl=!0;if(typeof H=="string")Xo=!0;else if(Array.isArray(H)){var iu=H.concat();lr=[];for(var Jo,Ta=iu.length;Ta--;)(typeof(Jo=iu.shift())!="string"||Array.isArray(Jo)&&typeof Jo[0]!="string")&&(Vl=!1);Xo=Vl}if(Xo===!1)throw new Error('Type of text must be string or Array. "'+H+'" is not recognized.');typeof H=="string"&&(H=H.match(/[\r?\n]/)?H.split(/\r\n|\r|\n/g):[H]);var $l=Be/Sn.internal.scaleFactor,Ga=$l*(Ko-1);switch(dt.baseline){case"bottom":Ze-=Ga;break;case"top":Ze+=$l-Ga;break;case"hanging":Ze+=$l-2*Ga;break;case"middle":Ze+=$l/2-Ga}if((dn=dt.maxWidth||0)>0&&(typeof H=="string"?H=Sn.splitTextToSize(H,dn):Object.prototype.toString.call(H)==="[object Array]"&&(H=H.reduce((function(Xn,zi){return Xn.concat(Sn.splitTextToSize(zi,dn))}),[]))),$t={text:H,x:be,y:Ze,options:dt,mutex:{pdfEscape:Zn,activeFontKey:nn,fonts:kn,activeFontSize:Be}},Lr.publish("preProcessText",$t),H=$t.text,Or=(dt=$t.options).angle,!(ts instanceof De)&&Or&&typeof Or=="number"){Or*=Math.PI/180,dt.rotationDirection===0&&(Or=-Or),z===G.ADVANCED&&(Or=-Or);var su=Math.cos(Or),qu=Math.sin(Or);ts=new De(su,qu,-qu,su,0,0)}else Or&&Or instanceof De&&(ts=Or);z!==G.ADVANCED||ts||(ts=nt),(Pn=dt.charSpace||Cl)!==void 0&&(Ea+=K(ce(Pn))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(_s=dt.horizontalScale)!==void 0&&(Ea+=K(100*_s)+` Tz
`),dt.lang;var yo=-1,Tc=dt.renderingMode!==void 0?dt.renderingMode:dt.stroke,au=Sn.internal.getCurrentPageInfo().pageContext;switch(Tc){case 0:case!1:case"fill":yo=0;break;case 1:case!0:case"stroke":yo=1;break;case 2:case"fillThenStroke":yo=2;break;case 3:case"invisible":yo=3;break;case 4:case"fillAndAddForClipping":yo=4;break;case 5:case"strokeAndAddPathForClipping":yo=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":yo=6;break;case 7:case"addToPathForClipping":yo=7}var Vu=au.usedRenderingMode!==void 0?au.usedRenderingMode:-1;yo!==-1?Ea+=yo+` Tr
`:Vu!==-1&&(Ea+=`0 Tr
`),yo!==-1&&(au.usedRenderingMode=yo),Zr=dt.align||"left";var Qo,ou=Be*Ko,Gh=Sn.internal.pageSize.getWidth(),Pa=kn[nn];Pn=dt.charSpace||Cl,dn=dt.maxWidth||0,Kn=Object.assign({autoencode:!0,noBOM:!0},dt.flags);var el=[],lu=function(Xn){return Sn.getStringUnitWidth(Xn,{font:Pa,charSpace:Pn,fontSize:Be,doKerning:!1})*Be/Ec};if(Object.prototype.toString.call(H)==="[object Array]"){var xo;lr=nu(H),Zr!=="left"&&(Qo=lr.map(lu));var Ra,fc=0;if(Zr==="right"){be-=Qo[0],H=[],Ta=lr.length;for(var El=0;El<Ta;El++)El===0?(Ra=Sl(be),xo=Zo(Ze)):(Ra=ce(fc-Qo[El]),xo=-ou),H.push([lr[El],Ra,xo]),fc=Qo[El]}else if(Zr==="center"){be-=Qo[0]/2,H=[],Ta=lr.length;for(var pc=0;pc<Ta;pc++)pc===0?(Ra=Sl(be),xo=Zo(Ze)):(Ra=ce((fc-Qo[pc])/2),xo=-ou),H.push([lr[pc],Ra,xo]),fc=Qo[pc]}else if(Zr==="left"){H=[],Ta=lr.length;for(var Mo=0;Mo<Ta;Mo++)H.push(lr[Mo])}else if(Zr==="justify"&&Pa.encoding==="Identity-H"){H=[],Ta=lr.length,dn=dn!==0?dn:Gh;for(var Hl=0,Li=0;Li<Ta;Li++)if(xo=Li===0?Zo(Ze):-ou,Ra=Li===0?Sl(be):Hl,Li<Ta-1){var ji=ce((dn-Qo[Li])/(lr[Li].split(" ").length-1)),Ia=lr[Li].split(" ");H.push([Ia[0]+" ",Ra,xo]),Hl=0;for(var Ps=1;Ps<Ia.length;Ps++){var Wa=(lu(Ia[Ps-1]+" "+Ia[Ps])-lu(Ia[Ps]))*Ec+ji;Ps==Ia.length-1?H.push([Ia[Ps],Wa,0]):H.push([Ia[Ps]+" ",Wa,0]),Hl-=Wa}}else H.push([lr[Li],Ra,xo]);H.push(["",Hl,0])}else{if(Zr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(H=[],Ta=lr.length,dn=dn!==0?dn:Gh,Li=0;Li<Ta;Li++)xo=Li===0?Zo(Ze):-ou,Ra=Li===0?Sl(be):0,Li<Ta-1?el.push(K(ce((dn-Qo[Li])/(lr[Li].split(" ").length-1)))):el.push(0),H.push([lr[Li],Ra,xo])}}var Rn=typeof dt.R2L=="boolean"?dt.R2L:Tt;Rn===!0&&(H=hc(H,(function(Xn,zi,mn){return[Xn.split("").reverse().join(""),zi,mn]}))),$t={text:H,x:be,y:Ze,options:dt,mutex:{pdfEscape:Zn,activeFontKey:nn,fonts:kn,activeFontSize:Be}},Lr.publish("postProcessText",$t),H=$t.text,oa=$t.mutex.isHex||!1;var bi=kn[nn].encoding;bi!=="WinAnsiEncoding"&&bi!=="StandardEncoding"||(H=hc(H,(function(Xn,zi,mn){return[nh(Xn),zi,mn]}))),lr=nu(H),H=[];for(var ws,Gl,tl,Wl=0,Sd=1,$u=Array.isArray(lr[0])?Sd:Wl,Yl="",Pc=function(Xn,zi,mn){var sr="";return mn instanceof De?(mn=typeof dt.angle=="number"?et(mn,new De(1,0,0,1,Xn,zi)):et(new De(1,0,0,1,Xn,zi),mn),z===G.ADVANCED&&(mn=et(new De(1,0,0,-1,0,0),mn)),sr=mn.join(" ")+` Tm
`):sr=K(Xn)+" "+K(zi)+` Td
`,sr},la=0;la<lr.length;la++){switch(Yl="",$u){case Sd:tl=(oa?"<":"(")+lr[la][0]+(oa?">":")"),ws=parseFloat(lr[la][1]),Gl=parseFloat(lr[la][2]);break;case Wl:tl=(oa?"<":"(")+lr[la]+(oa?">":")"),ws=Sl(be),Gl=Zo(Ze)}el!==void 0&&el[la]!==void 0&&(Yl=el[la]+` Tw
`),la===0?H.push(Yl+Pc(ws,Gl,ts)+tl):$u===Wl?H.push(Yl+tl):$u===Sd&&H.push(Yl+Pc(ws,Gl,ts)+tl)}H=$u===Wl?H.join(` Tj
T* `):H.join(` Tj
`),H+=` Tj
`;var _i=`BT
/`;return _i+=nn+" "+Be+` Tf
`,_i+=K(Be*Ko)+` TL
`,_i+=Ts+`
`,_i+=Ea,_i+=H,Ye(_i+="ET"),T[nn]=!0,Sn};var Su=E.__private__.clip=E.clip=function(H){return Ye(H==="evenodd"?"W*":"W"),this};E.clipEvenOdd=function(){return Su("evenodd")},E.__private__.discardPath=E.discardPath=function(){return Ye("n"),this};var jl=E.__private__.isValidStyle=function(H){var be=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(H)!==-1&&(be=!0),be};E.__private__.setDefaultPathOperation=E.setDefaultPathOperation=function(H){return jl(H)&&(w=H),this};var Au=E.__private__.getStyle=E.getStyle=function(H){var be=w;switch(H){case"D":case"S":be="S";break;case"F":be="f";break;case"FD":case"DF":be="B";break;case"f":case"f*":case"B":case"B*":be=H}return be},ka=E.close=function(){return Ye("h"),this};E.stroke=function(){return Ye("S"),this},E.fill=function(H){return sa("f",H),this},E.fillEvenOdd=function(H){return sa("f*",H),this},E.fillStroke=function(H){return sa("B",H),this},E.fillStrokeEvenOdd=function(H){return sa("B*",H),this};var sa=function(H,be){Zs(be)==="object"?ro(be,H):Ye(H)},Yo=function(H){H===null||z===G.ADVANCED&&H===void 0||(H=Au(H),Ye(H))};function Nl(H,be,Ze,dt,vt){var $t=new Bv(be||this.boundingBox,Ze||this.xStep,dt||this.yStep,this.gState,vt||this.matrix);$t.stream=this.stream;var lr=H+"$$"+this.cloneIndex+++"$$";return ke(lr,$t),$t}var ro=function(H,be){var Ze=Sa[H.key],dt=zn[Ze];if(dt instanceof bg)Ye("q"),Ye(Bl(be)),dt.gState&&E.setGState(dt.gState),Ye(H.matrix.toString()+" cm"),Ye("/"+Ze+" sh"),Ye("Q");else if(dt instanceof Bv){var vt=new De(1,0,0,-1,0,ru());H.matrix&&(vt=vt.multiply(H.matrix||nt),Ze=Nl.call(dt,H.key,H.boundingBox,H.xStep,H.yStep,vt).id),Ye("q"),Ye("/Pattern cs"),Ye("/"+Ze+" scn"),dt.gState&&E.setGState(dt.gState),Ye(be),Ye("Q")}},Bl=function(H){switch(H){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},ac=E.moveTo=function(H,be){return Ye(K(ce(H))+" "+K(ye(be))+" m"),this},aa=E.lineTo=function(H,be){return Ye(K(ce(H))+" "+K(ye(be))+" l"),this},Ai=E.curveTo=function(H,be,Ze,dt,vt,$t){return Ye([K(ce(H)),K(ye(be)),K(ce(Ze)),K(ye(dt)),K(ce(vt)),K(ye($t)),"c"].join(" ")),this};E.__private__.line=E.line=function(H,be,Ze,dt,vt){if(isNaN(H)||isNaN(be)||isNaN(Ze)||isNaN(dt)||!jl(vt))throw new Error("Invalid arguments passed to jsPDF.line");return z===G.COMPAT?this.lines([[Ze-H,dt-be]],H,be,[1,1],vt||"S"):this.lines([[Ze-H,dt-be]],H,be,[1,1]).stroke()},E.__private__.lines=E.lines=function(H,be,Ze,dt,vt,$t){var lr,Or,Zr,Pn,dn,Kn,_s,ts,Sn,ba,Ea,oa;if(typeof H=="number"&&(oa=Ze,Ze=be,be=H,H=oa),dt=dt||[1,1],$t=$t||!1,isNaN(be)||isNaN(Ze)||!Array.isArray(H)||!Array.isArray(dt)||!jl(vt)||typeof $t!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for(ac(be,Ze),lr=dt[0],Or=dt[1],Pn=H.length,ba=be,Ea=Ze,Zr=0;Zr<Pn;Zr++)(dn=H[Zr]).length===2?(ba=dn[0]*lr+ba,Ea=dn[1]*Or+Ea,aa(ba,Ea)):(Kn=dn[0]*lr+ba,_s=dn[1]*Or+Ea,ts=dn[2]*lr+ba,Sn=dn[3]*Or+Ea,ba=dn[4]*lr+ba,Ea=dn[5]*Or+Ea,Ai(Kn,_s,ts,Sn,ba,Ea));return $t&&ka(),Yo(vt),this},E.path=function(H){for(var be=0;be<H.length;be++){var Ze=H[be],dt=Ze.c;switch(Ze.op){case"m":ac(dt[0],dt[1]);break;case"l":aa(dt[0],dt[1]);break;case"c":Ai.apply(this,dt);break;case"h":ka()}}return this},E.__private__.rect=E.rect=function(H,be,Ze,dt,vt){if(isNaN(H)||isNaN(be)||isNaN(Ze)||isNaN(dt)||!jl(vt))throw new Error("Invalid arguments passed to jsPDF.rect");return z===G.COMPAT&&(dt=-dt),Ye([K(ce(H)),K(ye(be)),K(ce(Ze)),K(ce(dt)),"re"].join(" ")),Yo(vt),this},E.__private__.triangle=E.triangle=function(H,be,Ze,dt,vt,$t,lr){if(isNaN(H)||isNaN(be)||isNaN(Ze)||isNaN(dt)||isNaN(vt)||isNaN($t)||!jl(lr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ze-H,dt-be],[vt-Ze,$t-dt],[H-vt,be-$t]],H,be,[1,1],lr,!0),this},E.__private__.roundedRect=E.roundedRect=function(H,be,Ze,dt,vt,$t,lr){if(isNaN(H)||isNaN(be)||isNaN(Ze)||isNaN(dt)||isNaN(vt)||isNaN($t)||!jl(lr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var Or=4/3*(Math.SQRT2-1);return vt=Math.min(vt,.5*Ze),$t=Math.min($t,.5*dt),this.lines([[Ze-2*vt,0],[vt*Or,0,vt,$t-$t*Or,vt,$t],[0,dt-2*$t],[0,$t*Or,-vt*Or,$t,-vt,$t],[2*vt-Ze,0],[-vt*Or,0,-vt,-$t*Or,-vt,-$t],[0,2*$t-dt],[0,-$t*Or,vt*Or,-$t,vt,-$t]],H+vt,be,[1,1],lr,!0),this},E.__private__.ellipse=E.ellipse=function(H,be,Ze,dt,vt){if(isNaN(H)||isNaN(be)||isNaN(Ze)||isNaN(dt)||!jl(vt))throw new Error("Invalid arguments passed to jsPDF.ellipse");var $t=4/3*(Math.SQRT2-1)*Ze,lr=4/3*(Math.SQRT2-1)*dt;return ac(H+Ze,be),Ai(H+Ze,be-lr,H+$t,be-dt,H,be-dt),Ai(H-$t,be-dt,H-Ze,be-lr,H-Ze,be),Ai(H-Ze,be+lr,H-$t,be+dt,H,be+dt),Ai(H+$t,be+dt,H+Ze,be+lr,H+Ze,be),Yo(vt),this},E.__private__.circle=E.circle=function(H,be,Ze,dt){if(isNaN(H)||isNaN(be)||isNaN(Ze)||!jl(dt))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(H,be,Ze,Ze,dt)},E.setFont=function(H,be,Ze){return Ze&&(be=ge(be,Ze)),nn=wl(H,be,{disableWarning:!1}),this};var oc=E.__private__.getFont=E.getFont=function(){return kn[wl.apply(E,arguments)]};E.__private__.getFontList=E.getFontList=function(){var H,be,Ze={};for(H in yn)if(yn.hasOwnProperty(H))for(be in Ze[H]=[],yn[H])yn[H].hasOwnProperty(be)&&Ze[H].push(be);return Ze},E.addFont=function(H,be,Ze,dt,vt){var $t=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&$t.indexOf(arguments[3])!==-1?vt=arguments[3]:arguments[3]&&$t.indexOf(arguments[3])==-1&&(Ze=ge(Ze,dt)),vt=vt||"Identity-H",Qc.call(this,H,be,Ze,vt)};var eu,Ha=n.lineWidth||.200025,Ul=E.__private__.getLineWidth=E.getLineWidth=function(){return Ha},tu=E.__private__.setLineWidth=E.setLineWidth=function(H){return Ha=H,Ye(K(ce(H))+" w"),this};E.__private__.setLineDash=Bn.API.setLineDash=Bn.API.setLineDashPattern=function(H,be){if(H=H||[],be=be||0,isNaN(be)||!Array.isArray(H))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return H=H.map((function(Ze){return K(ce(Ze))})).join(" "),be=K(ce(be)),Ye("["+H+"] "+be+" d"),this};var Cc=E.__private__.getLineHeight=E.getLineHeight=function(){return Be*eu};E.__private__.getLineHeight=E.getLineHeight=function(){return Be*eu};var wd=E.__private__.setLineHeightFactor=E.setLineHeightFactor=function(H){return typeof(H=H||1.15)=="number"&&(eu=H),this},Cu=E.__private__.getLineHeightFactor=E.getLineHeightFactor=function(){return eu};wd(n.lineHeight);var Sl=E.__private__.getHorizontalCoordinate=function(H){return ce(H)},Zo=E.__private__.getVerticalCoordinate=function(H){return z===G.ADVANCED?H:xr[ue].mediaBox.topRightY-xr[ue].mediaBox.bottomLeftY-ce(H)},jd=E.__private__.getHorizontalCoordinateString=E.getHorizontalCoordinateString=function(H){return K(Sl(H))},Al=E.__private__.getVerticalCoordinateString=E.getVerticalCoordinateString=function(H){return K(Zo(H))},Lo=n.strokeColor||"0 G";E.__private__.getStrokeColor=E.getDrawColor=function(){return dr(Lo)},E.__private__.setStrokeColor=E.setDrawColor=function(H,be,Ze,dt){return Lo=mr({ch1:H,ch2:be,ch3:Ze,ch4:dt,pdfColorType:"draw",precision:2}),Ye(Lo),this};var Nd=n.fillColor||"0 g";E.__private__.getFillColor=E.getFillColor=function(){return dr(Nd)},E.__private__.setFillColor=E.setFillColor=function(H,be,Ze,dt){return Nd=mr({ch1:H,ch2:be,ch3:Ze,ch4:dt,pdfColorType:"fill",precision:2}),Ye(Nd),this};var Ts=n.textColor||"0 g",Fu=E.__private__.getTextColor=E.getTextColor=function(){return dr(Ts)};E.__private__.setTextColor=E.setTextColor=function(H,be,Ze,dt){return Ts=mr({ch1:H,ch2:be,ch3:Ze,ch4:dt,pdfColorType:"text",precision:3}),this};var Cl=n.charSpace,kc=E.__private__.getCharSpace=E.getCharSpace=function(){return parseFloat(Cl||0)};E.__private__.setCharSpace=E.setCharSpace=function(H){if(isNaN(H))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return Cl=H,this};var lc=0;E.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},E.__private__.setLineCap=E.setLineCap=function(H){var be=E.CapJoinStyles[H];if(be===void 0)throw new Error("Line cap style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return lc=be,Ye(be+" J"),this};var cc=0;E.__private__.setLineJoin=E.setLineJoin=function(H){var be=E.CapJoinStyles[H];if(be===void 0)throw new Error("Line join style of '"+H+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return cc=be,Ye(be+" j"),this},E.__private__.setLineMiterLimit=E.__private__.setMiterLimit=E.setLineMiterLimit=E.setMiterLimit=function(H){if(H=H||0,isNaN(H))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Ye(K(ce(H))+" M"),this},E.GState=wb,E.setGState=function(H){(H=typeof H=="string"?wi[Cs[H]]:uc(null,H)).equals(zs)||(Ye("/"+H.id+" gs"),zs=H)};var uc=function(H,be){if(!H||!Cs[H]){var Ze=!1;for(var dt in wi)if(wi.hasOwnProperty(dt)&&wi[dt].equals(be)){Ze=!0;break}if(Ze)be=wi[dt];else{var vt="GS"+(Object.keys(wi).length+1).toString(10);wi[vt]=be,be.id=vt}return H&&(Cs[H]=be.id),Lr.publish("addGState",be),be}};E.addGState=function(H,be){return uc(H,be),this},E.saveGraphicsState=function(){return Ye("q"),va.push({key:nn,size:Be,color:Ts}),this},E.restoreGraphicsState=function(){Ye("Q");var H=va.pop();return nn=H.key,Be=H.size,Ts=H.color,zs=null,this},E.setCurrentTransformationMatrix=function(H){return Ye(H.toString()+" cm"),this},E.comment=function(H){return Ye("#"+H),this};var kl=function(H,be){var Ze=H||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ze},set:function($t){isNaN($t)||(Ze=parseFloat($t))}});var dt=be||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return dt},set:function($t){isNaN($t)||(dt=parseFloat($t))}});var vt="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return vt},set:function($t){vt=$t.toString()}}),this},dc=function(H,be,Ze,dt){kl.call(this,H,be),this.type="rect";var vt=Ze||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return vt},set:function(lr){isNaN(lr)||(vt=parseFloat(lr))}});var $t=dt||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return $t},set:function(lr){isNaN(lr)||($t=parseFloat(lr))}}),this},ql=function(){this.page=pi,this.currentPage=ue,this.pages=Et.slice(0),this.pagesContext=xr.slice(0),this.x=Ri,this.y=_n,this.matrix=fi,this.width=Bu(ue),this.height=ru(ue),this.outputDestination=Lt,this.id="",this.objectNumber=-1};ql.prototype.restore=function(){pi=this.page,ue=this.currentPage,xr=this.pagesContext,Et=this.pages,Ri=this.x,_n=this.y,fi=this.matrix,ku(ue,this.width),Uu(ue,this.height),Lt=this.outputDestination};var rh=function(H,be,Ze,dt,vt){Te.push(new ql),pi=ue=0,Et=[],Ri=H,_n=be,fi=vt,cs([Ze,dt])},Hh=function(H){if(Ce[H])Te.pop().restore();else{var be=new ql,Ze="Xo"+(Object.keys(xe).length+1).toString(10);be.id=Ze,Ce[H]=Ze,xe[Ze]=be,Lr.publish("addFormObject",be),Te.pop().restore()}};for(var ni in E.beginFormObject=function(H,be,Ze,dt,vt){return rh(H,be,Ze,dt,vt),this},E.endFormObject=function(H){return Hh(H),this},E.doFormObject=function(H,be){var Ze=xe[Ce[H]];return Ye("q"),Ye(be.toString()+" cm"),Ye("/"+Ze.id+" Do"),Ye("Q"),this},E.getFormObject=function(H){var be=xe[Ce[H]];return{x:be.x,y:be.y,width:be.width,height:be.height,matrix:be.matrix}},E.save=function(H,be){return H=H||"generated.pdf",(be=be||{}).returnPromise=be.returnPromise||!1,be.returnPromise===!1?(gg(ju(sc()),H),typeof gg.unload=="function"&&qn.setTimeout&&setTimeout(gg.unload,911),this):new Promise((function(Ze,dt){try{var vt=gg(ju(sc()),H);typeof gg.unload=="function"&&qn.setTimeout&&setTimeout(gg.unload,911),Ze(vt)}catch($t){dt($t.message)}}))},Bn.API)Bn.API.hasOwnProperty(ni)&&(ni==="events"&&Bn.API.events.length?(function(H,be){var Ze,dt,vt;for(vt=be.length-1;vt!==-1;vt--)Ze=be[vt][0],dt=be[vt][1],H.subscribe.apply(H,[Ze].concat(typeof dt=="function"?[dt]:dt))})(Lr,Bn.API.events):E[ni]=Bn.API[ni]);var Bu=E.getPageWidth=function(H){return(xr[H=H||ue].mediaBox.topRightX-xr[H].mediaBox.bottomLeftX)/_r},ku=E.setPageWidth=function(H,be){xr[H].mediaBox.topRightX=be*_r+xr[H].mediaBox.bottomLeftX},ru=E.getPageHeight=function(H){return(xr[H=H||ue].mediaBox.topRightY-xr[H].mediaBox.bottomLeftY)/_r},Uu=E.setPageHeight=function(H,be){xr[H].mediaBox.topRightY=be*_r+xr[H].mediaBox.bottomLeftY};return E.internal={pdfEscape:Zn,getStyle:Au,getFont:oc,getFontSize:at,getCharSpace:kc,getTextColor:Fu,getLineHeight:Cc,getLineHeightFactor:Cu,getLineWidth:Ul,write:$r,getHorizontalCoordinate:Sl,getVerticalCoordinate:Zo,getCoordinateString:jd,getVerticalCoordinateString:Al,collections:{},newObject:qe,newAdditionalObject:Xt,newObjectDeferred:ht,newObjectDeferredBegin:qt,getFilters:jt,putStream:gr,events:Lr,scaleFactor:_r,pageSize:{getWidth:function(){return Bu(ue)},setWidth:function(H){ku(ue,H)},getHeight:function(){return ru(ue)},setHeight:function(H){Uu(ue,H)}},encryptionOptions:j,encryption:Es,getEncryptor:_d,output:bd,getNumberOfPages:wu,pages:Et,out:Ye,f2:_e,f3:re,getPageInfo:zu,getPageInfoByObjId:cn,getCurrentPageInfo:Ac,getPDFVersion:R,Point:kl,Rectangle:dc,Matrix:De,hasHotfix:Nu},Object.defineProperty(E.internal.pageSize,"width",{get:function(){return Bu(ue)},set:function(H){ku(ue,H)},enumerable:!0,configurable:!0}),Object.defineProperty(E.internal.pageSize,"height",{get:function(){return ru(ue)},set:function(H){Uu(ue,H)},enumerable:!0,configurable:!0}),ya.call(E,Zt),nn="F1",Va(o,r),Lr.publish("initialized"),E}Lv.prototype.lsbFirstWord=function(n){return String.fromCharCode(n>>0&255,n>>8&255,n>>16&255,n>>24&255)},Lv.prototype.toHexString=function(n){return n.split("").map((function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)})).join("")},Lv.prototype.hexToBytes=function(n){for(var t=[],r=0;r<n.length;r+=2)t.push(String.fromCharCode(parseInt(n.substr(r,2),16)));return t.join("")},Lv.prototype.processOwnerPassword=function(n,t){return yw(vw(t).substr(0,5),n)},Lv.prototype.encryptor=function(n,t){var r=vw(this.encryptionKey+String.fromCharCode(255&n,n>>8&255,n>>16&255,255&t,t>>8&255)).substr(0,10);return function(i){return yw(r,i)}},wb.prototype.equals=function(n){var t,r="id,objectNumber,equals";if(!n||Zs(n)!==Zs(this))return!1;var i=0;for(t in this)if(!(r.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!n.hasOwnProperty(t)||this[t]!==n[t])return!1;i++}for(t in n)n.hasOwnProperty(t)&&r.indexOf(t)<0&&i--;return i===0},Bn.API={events:[]},Bn.version="2.5.2";var Po=Bn.API,r5=1,Dg=function(n){return n.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},Cv=function(n){return n.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},oi=function(n){return n.toFixed(2)},lm=function(n){return n.toFixed(5)};Po.__acroform__={};var Ou=function(n,t){n.prototype=Object.create(t.prototype),n.prototype.constructor=n},zS=function(n){return n*r5},of=function(n){var t=new QT,r=rn.internal.getHeight(n)||0,i=rn.internal.getWidth(n)||0;return t.BBox=[0,0,Number(oi(i)),Number(oi(r))],t},bH=Po.__acroform__.setBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return n|=1<<t},_H=Po.__acroform__.clearBit=function(n,t){if(n=n||0,t=t||0,isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return n&=~(1<<t)},wH=Po.__acroform__.getBit=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return(n&1<<t)==0?0:1},Uo=Po.__acroform__.getBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return wH(n,t-1)},qo=Po.__acroform__.setBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return bH(n,t-1)},Vo=Po.__acroform__.clearBitForPdf=function(n,t){if(isNaN(n)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return _H(n,t-1)},jH=Po.__acroform__.calculateCoordinates=function(n,t){var r=t.internal.getHorizontalCoordinate,i=t.internal.getVerticalCoordinate,o=n[0],l=n[1],a=n[2],p=n[3],g={};return g.lowerLeft_X=r(o)||0,g.lowerLeft_Y=i(l+p)||0,g.upperRight_X=r(o+a)||0,g.upperRight_Y=i(l)||0,[Number(oi(g.lowerLeft_X)),Number(oi(g.lowerLeft_Y)),Number(oi(g.upperRight_X)),Number(oi(g.upperRight_Y))]},NH=function(n){if(n.appearanceStreamContent)return n.appearanceStreamContent;if(n.V||n.DV){var t=[],r=n._V||n.DV,i=xw(n,r),o=n.scope.internal.getFont(n.fontName,n.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(n.scope.__private__.encodeColorString(n.color)),t.push("/"+o+" "+oi(i.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(i.text),t.push("ET"),t.push("Q"),t.push("EMC");var l=of(n);return l.scope=n.scope,l.stream=t.join(`
`),l}},xw=function(n,t){var r=n.fontSize===0?n.maxFontSize:n.fontSize,i={text:"",fontSize:""},o=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");o=n.multiline?o.map((function(re){return re.split(`
`)})):o.map((function(re){return[re]}));var l=r,a=rn.internal.getHeight(n)||0;a=a<0?-a:a;var p=rn.internal.getWidth(n)||0;p=p<0?-p:p;var g=function(re,ce,fe){if(re+1<o.length){var ye=ce+" "+o[re+1][0];return M1(ye,n,fe).width<=p-4}return!1};l++;e:for(;l>0;){t="",l--;var w,j,S=M1("3",n,l).height,T=n.multiline?a-l:(a-S)/2,E=T+=2,O=0,R=0,F=0;if(l<=0){t=`(...) Tj
`,t+="% Width of Text: "+M1(t,n,l=12).width+", FieldWidth:"+p+`
`;break}for(var B="",G=0,z=0;z<o.length;z++)if(o.hasOwnProperty(z)){var ee=!1;if(o[z].length!==1&&F!==o[z].length-1){if((S+2)*(G+2)+2>a)continue e;B+=o[z][F],ee=!0,R=z,z--}else{B=(B+=o[z][F]+" ").substr(B.length-1)==" "?B.substr(0,B.length-1):B;var ie=parseInt(z),ge=g(ie,B,l),K=z>=o.length-1;if(ge&&!K){B+=" ",F=0;continue}if(ge||K){if(K)R=ie;else if(n.multiline&&(S+2)*(G+2)+2>a)continue e}else{if(!n.multiline||(S+2)*(G+2)+2>a)continue e;R=ie}}for(var J="",Se=O;Se<=R;Se++){var _e=o[Se];if(n.multiline){if(Se===R){J+=_e[F]+" ",F=(F+1)%_e.length;continue}if(Se===O){J+=_e[_e.length-1]+" ";continue}}J+=_e[0]+" "}switch(J=J.substr(J.length-1)==" "?J.substr(0,J.length-1):J,j=M1(J,n,l).width,n.textAlign){case"right":w=p-j-2;break;case"center":w=(p-j)/2;break;case"left":default:w=2}t+=oi(w)+" "+oi(E)+` Td
`,t+="("+Dg(J)+`) Tj
`,t+=-oi(w)+` 0 Td
`,E=-(l+2),j=0,O=ee?R:R+1,G++,B=""}break}return i.text=t,i.fontSize=l,i},M1=function(n,t,r){var i=t.scope.internal.getFont(t.fontName,t.fontStyle),o=t.scope.getStringUnitWidth(n,{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r);return{height:t.scope.getStringUnitWidth("3",{font:i,fontSize:parseFloat(r),charSpace:0})*parseFloat(r)*1.5,width:o}},SH={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},AH=function(n,t){var r={type:"reference",object:n};t.internal.getPageInfo(n.page).pageContext.annotations.find((function(i){return i.type===r.type&&i.object===r.object}))===void 0&&t.internal.getPageInfo(n.page).pageContext.annotations.push(r)},CH=function(n,t){for(var r in n)if(n.hasOwnProperty(r)){var i=r,o=n[r];t.internal.newObjectDeferredBegin(o.objId,!0),Zs(o)==="object"&&typeof o.putStream=="function"&&o.putStream(),delete n[i]}},kH=function(n,t){if(t.scope=n,n.internal!==void 0&&(n.internal.acroformPlugin===void 0||n.internal.acroformPlugin.isInitialized===!1)){if(qh.FieldNum=0,n.internal.acroformPlugin=JSON.parse(JSON.stringify(SH)),n.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");r5=n.internal.scaleFactor,n.internal.acroformPlugin.acroFormDictionaryRoot=new e6,n.internal.acroformPlugin.acroFormDictionaryRoot.scope=n,n.internal.acroformPlugin.acroFormDictionaryRoot._eventID=n.internal.events.subscribe("postPutResources",(function(){(function(r){r.internal.events.unsubscribe(r.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete r.internal.acroformPlugin.acroFormDictionaryRoot._eventID,r.internal.acroformPlugin.printedOut=!0})(n)})),n.internal.events.subscribe("buildDocument",(function(){(function(r){r.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var i=r.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];l.objId=void 0,l.hasAnnotation&&AH(l,r)}})(n)})),n.internal.events.subscribe("putCatalog",(function(){(function(r){if(r.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");r.internal.write("/AcroForm "+r.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(n)})),n.internal.events.subscribe("postPutPages",(function(r){(function(i,o){var l=!i;for(var a in i||(o.internal.newObjectDeferredBegin(o.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),o.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),i=i||o.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(i.hasOwnProperty(a)){var p=i[a],g=[],w=p.Rect;if(p.Rect&&(p.Rect=jH(p.Rect,o)),o.internal.newObjectDeferredBegin(p.objId,!0),p.DA=rn.createDefaultAppearanceStream(p),Zs(p)==="object"&&typeof p.getKeyValueListForStream=="function"&&(g=p.getKeyValueListForStream()),p.Rect=w,p.hasAppearanceStream&&!p.appearanceStreamContent){var j=NH(p);g.push({key:"AP",value:"<</N "+j+">>"}),o.internal.acroformPlugin.xForms.push(j)}if(p.appearanceStreamContent){var S="";for(var T in p.appearanceStreamContent)if(p.appearanceStreamContent.hasOwnProperty(T)){var E=p.appearanceStreamContent[T];if(S+="/"+T+" ",S+="<<",Object.keys(E).length>=1||Array.isArray(E)){for(var a in E)if(E.hasOwnProperty(a)){var O=E[a];typeof O=="function"&&(O=O.call(o,p)),S+="/"+a+" "+O+" ",o.internal.acroformPlugin.xForms.indexOf(O)>=0||o.internal.acroformPlugin.xForms.push(O)}}else typeof(O=E)=="function"&&(O=O.call(o,p)),S+="/"+a+" "+O,o.internal.acroformPlugin.xForms.indexOf(O)>=0||o.internal.acroformPlugin.xForms.push(O);S+=">>"}g.push({key:"AP",value:`<<
`+S+">>"})}o.internal.putStream({additionalKeyValues:g,objectId:p.objId}),o.internal.out("endobj")}l&&CH(o.internal.acroformPlugin.xForms,o)})(r,n)})),n.internal.acroformPlugin.isInitialized=!0}},JT=Po.__acroform__.arrayToPdfArray=function(n,t,r){var i=function(a){return a};if(Array.isArray(n)){for(var o="[",l=0;l<n.length;l++)switch(l!==0&&(o+=" "),Zs(n[l])){case"boolean":case"number":case"object":o+=n[l].toString();break;case"string":n[l].substr(0,1)!=="/"?(t!==void 0&&r&&(i=r.internal.getEncryptor(t)),o+="("+Dg(i(n[l].toString()))+")"):o+=n[l].toString()}return o+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},w2=function(n,t,r){var i=function(o){return o};return t!==void 0&&r&&(i=r.internal.getEncryptor(t)),(n=n||"").toString(),n="("+Dg(i(n))+")"},hf=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(n){this._objId=n}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};hf.prototype.toString=function(){return this.objId+" 0 R"},hf.prototype.putStream=function(){var n=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:n,objectId:this.objId}),this.scope.internal.out("endobj")},hf.prototype.getKeyValueListForStream=function(){var n=[],t=Object.getOwnPropertyNames(this).filter((function(l){return l!="content"&&l!="appearanceStreamContent"&&l!="scope"&&l!="objId"&&l.substring(0,1)!="_"}));for(var r in t)if(Object.getOwnPropertyDescriptor(this,t[r]).configurable===!1){var i=t[r],o=this[i];o&&(Array.isArray(o)?n.push({key:i,value:JT(o,this.objId,this.scope)}):o instanceof hf?(o.scope=this.scope,n.push({key:i,value:o.objId+" 0 R"})):typeof o!="function"&&n.push({key:i,value:o}))}return n};var QT=function(){hf.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var n,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(r){t=r}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(r){n=r.trim()},get:function(){return n||null}})};Ou(QT,hf);var e6=function(){hf.call(this);var n,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(n){var r=function(i){return i};return this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),"("+Dg(r(n))+")"}},set:function(r){n=r}})};Ou(e6,hf);var qh=function n(){hf.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute F supplied.');t=B}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!Uo(t,3)},set:function(B){B?this.F=qo(t,3):this.F=Vo(t,3)}});var r=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return r},set:function(B){if(isNaN(B))throw new Error('Invalid value "'+B+'" for attribute Ff supplied.');r=B}});var i=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(i.length!==0)return i},set:function(B){i=B!==void 0?B:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[0])?0:i[0]},set:function(B){i[0]=B}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[1])?0:i[1]},set:function(B){i[1]=B}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[2])?0:i[2]},set:function(B){i[2]=B}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!i||isNaN(i[3])?0:i[3]},set:function(B){i[3]=B}});var o="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return o},set:function(B){switch(B){case"/Btn":case"/Tx":case"/Ch":case"/Sig":o=B;break;default:throw new Error('Invalid value "'+B+'" for attribute FT supplied.')}}});var l=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!l||l.length<1){if(this instanceof jb)return;l="FieldObject"+n.FieldNum++}var B=function(G){return G};return this.scope&&(B=this.scope.internal.getEncryptor(this.objId)),"("+Dg(B(l))+")"},set:function(B){l=B.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return l},set:function(B){l=B}});var a="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return a},set:function(B){a=B}});var p="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return p},set:function(B){p=B}});var g=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return g},set:function(B){g=B}});var w=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return w===void 0?50/r5:w},set:function(B){w=B}});var j="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return j},set:function(B){j=B}});var S="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!S||this instanceof jb||this instanceof Sg))return w2(S,this.objId,this.scope)},set:function(B){B=B.toString(),S=B}});var T=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof nc?T:w2(T,this.objId,this.scope)},set:function(B){B=B.toString(),T=this instanceof nc?B:B.substr(0,1)==="("?Cv(B.substr(1,B.length-2)):Cv(B)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof nc?Cv(T.substr(1,T.length-1)):T},set:function(B){B=B.toString(),T=this instanceof nc?"/"+B:B}});var E=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(E)return E},set:function(B){this.V=B}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(E)return this instanceof nc?E:w2(E,this.objId,this.scope)},set:function(B){B=B.toString(),E=this instanceof nc?B:B.substr(0,1)==="("?Cv(B.substr(1,B.length-2)):Cv(B)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof nc?Cv(E.substr(1,E.length-1)):E},set:function(B){B=B.toString(),E=this instanceof nc?"/"+B:B}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var O,R=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return R},set:function(B){B=!!B,R=B}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(O)return O},set:function(B){O=B}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,1)},set:function(B){B?this.Ff=qo(this.Ff,1):this.Ff=Vo(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,2)},set:function(B){B?this.Ff=qo(this.Ff,2):this.Ff=Vo(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,3)},set:function(B){B?this.Ff=qo(this.Ff,3):this.Ff=Vo(this.Ff,3)}});var F=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(F!==null)return F},set:function(B){if([0,1,2].indexOf(B)===-1)throw new Error('Invalid value "'+B+'" for attribute Q supplied.');F=B}}),Object.defineProperty(this,"textAlign",{get:function(){var B;switch(F){case 0:default:B="left";break;case 1:B="center";break;case 2:B="right"}return B},configurable:!0,enumerable:!0,set:function(B){switch(B){case"right":case 2:F=2;break;case"center":case 1:F=1;break;case"left":case 0:default:F=0}}})};Ou(qh,hf);var Hv=function(){qh.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var n=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return n},set:function(r){n=r}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return JT(t,this.objId,this.scope)},set:function(r){var i,o;o=[],typeof(i=r)=="string"&&(o=(function(l,a,p){p||(p=1);for(var g,w=[];g=a.exec(l);)w.push(g[p]);return w})(i,/\((.*?)\)/g)),t=o}}),this.getOptions=function(){return t},this.setOptions=function(r){t=r,this.sort&&t.sort()},this.addOption=function(r){r=(r=r||"").toString(),t.push(r),this.sort&&t.sort()},this.removeOption=function(r,i){for(i=i||!1,r=(r=r||"").toString();t.indexOf(r)!==-1&&(t.splice(t.indexOf(r),1),i!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,18)},set:function(r){r?this.Ff=qo(this.Ff,18):this.Ff=Vo(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,19)},set:function(r){this.combo===!0&&(r?this.Ff=qo(this.Ff,19):this.Ff=Vo(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,20)},set:function(r){r?(this.Ff=qo(this.Ff,20),t.sort()):this.Ff=Vo(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,22)},set:function(r){r?this.Ff=qo(this.Ff,22):this.Ff=Vo(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(r){r?this.Ff=qo(this.Ff,23):this.Ff=Vo(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,27)},set:function(r){r?this.Ff=qo(this.Ff,27):this.Ff=Vo(this.Ff,27)}}),this.hasAppearanceStream=!1};Ou(Hv,qh);var Gv=function(){Hv.call(this),this.fontName="helvetica",this.combo=!1};Ou(Gv,Hv);var Wv=function(){Gv.call(this),this.combo=!0};Ou(Wv,Gv);var H1=function(){Wv.call(this),this.edit=!0};Ou(H1,Wv);var nc=function(){qh.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,15)},set:function(r){r?this.Ff=qo(this.Ff,15):this.Ff=Vo(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,16)},set:function(r){r?this.Ff=qo(this.Ff,16):this.Ff=Vo(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,17)},set:function(r){r?this.Ff=qo(this.Ff,17):this.Ff=Vo(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(r){r?this.Ff=qo(this.Ff,26):this.Ff=Vo(this.Ff,26)}});var n,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var r=function(l){return l};if(this.scope&&(r=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var i,o=[];for(i in o.push("<<"),t)o.push("/"+i+" ("+Dg(r(t[i]))+")");return o.push(">>"),o.join(`
`)}},set:function(r){Zs(r)==="object"&&(t=r)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(r){typeof r=="string"&&(t.CA=r)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(r){n=r}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(r){n="/"+r}})};Ou(nc,qh);var G1=function(){nc.call(this),this.pushButton=!0};Ou(G1,nc);var Yv=function(){nc.call(this),this.radio=!0,this.pushButton=!1;var n=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t!==void 0?t:[]}})};Ou(Yv,nc);var jb=function(){var n,t;qh.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return n},set:function(o){n=o}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(o){t=o}});var r,i={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var o=function(p){return p};this.scope&&(o=this.scope.internal.getEncryptor(this.objId));var l,a=[];for(l in a.push("<<"),i)a.push("/"+l+" ("+Dg(o(i[l]))+")");return a.push(">>"),a.join(`
`)},set:function(o){Zs(o)==="object"&&(i=o)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return i.CA||""},set:function(o){typeof o=="string"&&(i.CA=o)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return r},set:function(o){r=o}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return r.substr(1,r.length-1)},set:function(o){r="/"+o}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=rn.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};Ou(jb,qh),Yv.prototype.setAppearance=function(n){if(!("createAppearanceStream"in n)||!("getCA"in n))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var r=this.Kids[t];r.appearanceStreamContent=n.createAppearanceStream(r.optionName),r.caption=n.getCA()}},Yv.prototype.createOption=function(n){var t=new jb;return t.Parent=this,t.optionName=n,this.Kids.push(t),EH.call(this.scope,t),t};var W1=function(){nc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=rn.CheckBox.createAppearanceStream()};Ou(W1,nc);var Sg=function(){qh.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,13)},set:function(t){t?this.Ff=qo(this.Ff,13):this.Ff=Vo(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,21)},set:function(t){t?this.Ff=qo(this.Ff,21):this.Ff=Vo(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,23)},set:function(t){t?this.Ff=qo(this.Ff,23):this.Ff=Vo(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,24)},set:function(t){t?this.Ff=qo(this.Ff,24):this.Ff=Vo(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,25)},set:function(t){t?this.Ff=qo(this.Ff,25):this.Ff=Vo(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,26)},set:function(t){t?this.Ff=qo(this.Ff,26):this.Ff=Vo(this.Ff,26)}});var n=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return n},set:function(t){n=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return n},set:function(t){Number.isInteger(t)&&(n=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};Ou(Sg,qh);var Y1=function(){Sg.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!Uo(this.Ff,14)},set:function(n){n?this.Ff=qo(this.Ff,14):this.Ff=Vo(this.Ff,14)}}),this.password=!0};Ou(Y1,Sg);var rn={CheckBox:{createAppearanceStream:function(){return{N:{On:rn.CheckBox.YesNormal},D:{On:rn.CheckBox.YesPushDown,Off:rn.CheckBox.OffPushDown}}},YesPushDown:function(n){var t=of(n);t.scope=n.scope;var r=[],i=n.scope.internal.getFont(n.fontName,n.fontStyle).id,o=n.scope.__private__.encodeColorString(n.color),l=xw(n,n.caption);return r.push("0.749023 g"),r.push("0 0 "+oi(rn.internal.getWidth(n))+" "+oi(rn.internal.getHeight(n))+" re"),r.push("f"),r.push("BMC"),r.push("q"),r.push("0 0 1 rg"),r.push("/"+i+" "+oi(l.fontSize)+" Tf "+o),r.push("BT"),r.push(l.text),r.push("ET"),r.push("Q"),r.push("EMC"),t.stream=r.join(`
`),t},YesNormal:function(n){var t=of(n);t.scope=n.scope;var r=n.scope.internal.getFont(n.fontName,n.fontStyle).id,i=n.scope.__private__.encodeColorString(n.color),o=[],l=rn.internal.getHeight(n),a=rn.internal.getWidth(n),p=xw(n,n.caption);return o.push("1 g"),o.push("0 0 "+oi(a)+" "+oi(l)+" re"),o.push("f"),o.push("q"),o.push("0 0 1 rg"),o.push("0 0 "+oi(a-1)+" "+oi(l-1)+" re"),o.push("W"),o.push("n"),o.push("0 g"),o.push("BT"),o.push("/"+r+" "+oi(p.fontSize)+" Tf "+i),o.push(p.text),o.push("ET"),o.push("Q"),t.stream=o.join(`
`),t},OffPushDown:function(n){var t=of(n);t.scope=n.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+oi(rn.internal.getWidth(n))+" "+oi(rn.internal.getHeight(n))+" re"),r.push("f"),t.stream=r.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(n){var t={D:{Off:rn.RadioButton.Circle.OffPushDown},N:{}};return t.N[n]=rn.RadioButton.Circle.YesNormal,t.D[n]=rn.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(n){var t=of(n);t.scope=n.scope;var r=[],i=rn.internal.getWidth(n)<=rn.internal.getHeight(n)?rn.internal.getWidth(n)/4:rn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var o=rn.internal.Bezier_C,l=Number((i*o).toFixed(5));return r.push("q"),r.push("1 0 0 1 "+lm(rn.internal.getWidth(n)/2)+" "+lm(rn.internal.getHeight(n)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+l+" "+l+" "+i+" 0 "+i+" c"),r.push("-"+l+" "+i+" -"+i+" "+l+" -"+i+" 0 c"),r.push("-"+i+" -"+l+" -"+l+" -"+i+" 0 -"+i+" c"),r.push(l+" -"+i+" "+i+" -"+l+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(n){var t=of(n);t.scope=n.scope;var r=[],i=rn.internal.getWidth(n)<=rn.internal.getHeight(n)?rn.internal.getWidth(n)/4:rn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*rn.internal.Bezier_C).toFixed(5)),a=Number((i*rn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+lm(rn.internal.getWidth(n)/2)+" "+lm(rn.internal.getHeight(n)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),r.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),r.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),r.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),r.push("f"),r.push("Q"),r.push("0 g"),r.push("q"),r.push("1 0 0 1 "+lm(rn.internal.getWidth(n)/2)+" "+lm(rn.internal.getHeight(n)/2)+" cm"),r.push(i+" 0 m"),r.push(i+" "+a+" "+a+" "+i+" 0 "+i+" c"),r.push("-"+a+" "+i+" -"+i+" "+a+" -"+i+" 0 c"),r.push("-"+i+" -"+a+" -"+a+" -"+i+" 0 -"+i+" c"),r.push(a+" -"+i+" "+i+" -"+a+" "+i+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(n){var t=of(n);t.scope=n.scope;var r=[],i=rn.internal.getWidth(n)<=rn.internal.getHeight(n)?rn.internal.getWidth(n)/4:rn.internal.getHeight(n)/4;i=Number((.9*i).toFixed(5));var o=Number((2*i).toFixed(5)),l=Number((o*rn.internal.Bezier_C).toFixed(5));return r.push("0.749023 g"),r.push("q"),r.push("1 0 0 1 "+lm(rn.internal.getWidth(n)/2)+" "+lm(rn.internal.getHeight(n)/2)+" cm"),r.push(o+" 0 m"),r.push(o+" "+l+" "+l+" "+o+" 0 "+o+" c"),r.push("-"+l+" "+o+" -"+o+" "+l+" -"+o+" 0 c"),r.push("-"+o+" -"+l+" -"+l+" -"+o+" 0 -"+o+" c"),r.push(l+" -"+o+" "+o+" -"+l+" "+o+" 0 c"),r.push("f"),r.push("Q"),t.stream=r.join(`
`),t}},Cross:{createAppearanceStream:function(n){var t={D:{Off:rn.RadioButton.Cross.OffPushDown},N:{}};return t.N[n]=rn.RadioButton.Cross.YesNormal,t.D[n]=rn.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(n){var t=of(n);t.scope=n.scope;var r=[],i=rn.internal.calculateCross(n);return r.push("q"),r.push("1 1 "+oi(rn.internal.getWidth(n)-2)+" "+oi(rn.internal.getHeight(n)-2)+" re"),r.push("W"),r.push("n"),r.push(oi(i.x1.x)+" "+oi(i.x1.y)+" m"),r.push(oi(i.x2.x)+" "+oi(i.x2.y)+" l"),r.push(oi(i.x4.x)+" "+oi(i.x4.y)+" m"),r.push(oi(i.x3.x)+" "+oi(i.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},YesPushDown:function(n){var t=of(n);t.scope=n.scope;var r=rn.internal.calculateCross(n),i=[];return i.push("0.749023 g"),i.push("0 0 "+oi(rn.internal.getWidth(n))+" "+oi(rn.internal.getHeight(n))+" re"),i.push("f"),i.push("q"),i.push("1 1 "+oi(rn.internal.getWidth(n)-2)+" "+oi(rn.internal.getHeight(n)-2)+" re"),i.push("W"),i.push("n"),i.push(oi(r.x1.x)+" "+oi(r.x1.y)+" m"),i.push(oi(r.x2.x)+" "+oi(r.x2.y)+" l"),i.push(oi(r.x4.x)+" "+oi(r.x4.y)+" m"),i.push(oi(r.x3.x)+" "+oi(r.x3.y)+" l"),i.push("s"),i.push("Q"),t.stream=i.join(`
`),t},OffPushDown:function(n){var t=of(n);t.scope=n.scope;var r=[];return r.push("0.749023 g"),r.push("0 0 "+oi(rn.internal.getWidth(n))+" "+oi(rn.internal.getHeight(n))+" re"),r.push("f"),t.stream=r.join(`
`),t}}},createDefaultAppearanceStream:function(n){var t=n.scope.internal.getFont(n.fontName,n.fontStyle).id,r=n.scope.__private__.encodeColorString(n.color);return"/"+t+" "+n.fontSize+" Tf "+r}};rn.internal={Bezier_C:.551915024494,calculateCross:function(n){var t=rn.internal.getWidth(n),r=rn.internal.getHeight(n),i=Math.min(t,r);return{x1:{x:(t-i)/2,y:(r-i)/2+i},x2:{x:(t-i)/2+i,y:(r-i)/2},x3:{x:(t-i)/2,y:(r-i)/2},x4:{x:(t-i)/2+i,y:(r-i)/2+i}}}},rn.internal.getWidth=function(n){var t=0;return Zs(n)==="object"&&(t=zS(n.Rect[2])),t},rn.internal.getHeight=function(n){var t=0;return Zs(n)==="object"&&(t=zS(n.Rect[3])),t};var EH=Po.addField=function(n){if(kH(this,n),!(n instanceof qh))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=n).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),n.page=n.scope.internal.getCurrentPageInfo().pageNumber,this};Po.AcroFormChoiceField=Hv,Po.AcroFormListBox=Gv,Po.AcroFormComboBox=Wv,Po.AcroFormEditBox=H1,Po.AcroFormButton=nc,Po.AcroFormPushButton=G1,Po.AcroFormRadioButton=Yv,Po.AcroFormCheckBox=W1,Po.AcroFormTextField=Sg,Po.AcroFormPasswordField=Y1,Po.AcroFormAppearance=rn,Po.AcroForm={ChoiceField:Hv,ListBox:Gv,ComboBox:Wv,EditBox:H1,Button:nc,PushButton:G1,RadioButton:Yv,CheckBox:W1,TextField:Sg,PasswordField:Y1,Appearance:rn},Bn.AcroForm={ChoiceField:Hv,ListBox:Gv,ComboBox:Wv,EditBox:H1,Button:nc,PushButton:G1,RadioButton:Yv,CheckBox:W1,TextField:Sg,PasswordField:Y1,Appearance:rn};Bn.AcroForm;function t6(n){return n.reduce((function(t,r,i){return t[r]=i,t}),{})}(function(n){n.__addimage__={};var t="UNKNOWN",r={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},i=n.__addimage__.getImageFileTypeByImageData=function(re,ce){var fe,ye,Fe,Q,pe,me=t;if((ce=ce||t)==="RGBA"||re.data!==void 0&&re.data instanceof Uint8ClampedArray&&"height"in re&&"width"in re)return"RGBA";if(ge(re))for(pe in r)for(Fe=r[pe],fe=0;fe<Fe.length;fe+=1){for(Q=!0,ye=0;ye<Fe[fe].length;ye+=1)if(Fe[fe][ye]!==void 0&&Fe[fe][ye]!==re[ye]){Q=!1;break}if(Q===!0){me=pe;break}}else for(pe in r)for(Fe=r[pe],fe=0;fe<Fe.length;fe+=1){for(Q=!0,ye=0;ye<Fe[fe].length;ye+=1)if(Fe[fe][ye]!==void 0&&Fe[fe][ye]!==re.charCodeAt(ye)){Q=!1;break}if(Q===!0){me=pe;break}}return me===t&&ce!==t&&(me=ce),me},o=function re(ce){for(var fe=this.internal.write,ye=this.internal.putStream,Fe=(0,this.internal.getFilters)();Fe.indexOf("FlateEncode")!==-1;)Fe.splice(Fe.indexOf("FlateEncode"),1);ce.objectId=this.internal.newObject();var Q=[];if(Q.push({key:"Type",value:"/XObject"}),Q.push({key:"Subtype",value:"/Image"}),Q.push({key:"Width",value:ce.width}),Q.push({key:"Height",value:ce.height}),ce.colorSpace===F.INDEXED?Q.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(ce.palette.length/3-1)+" "+("sMask"in ce&&ce.sMask!==void 0?ce.objectId+2:ce.objectId+1)+" 0 R]"}):(Q.push({key:"ColorSpace",value:"/"+ce.colorSpace}),ce.colorSpace===F.DEVICE_CMYK&&Q.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Q.push({key:"BitsPerComponent",value:ce.bitsPerComponent}),"decodeParameters"in ce&&ce.decodeParameters!==void 0&&Q.push({key:"DecodeParms",value:"<<"+ce.decodeParameters+">>"}),"transparency"in ce&&Array.isArray(ce.transparency)){for(var pe="",me=0,Ue=ce.transparency.length;me<Ue;me++)pe+=ce.transparency[me]+" "+ce.transparency[me]+" ";Q.push({key:"Mask",value:"["+pe+"]"})}ce.sMask!==void 0&&Q.push({key:"SMask",value:ce.objectId+1+" 0 R"});var Ke=ce.filter!==void 0?["/"+ce.filter]:void 0;if(ye({data:ce.data,additionalKeyValues:Q,alreadyAppliedFilters:Ke,objectId:ce.objectId}),fe("endobj"),"sMask"in ce&&ce.sMask!==void 0){var Re="/Predictor "+ce.predictor+" /Colors 1 /BitsPerComponent "+ce.bitsPerComponent+" /Columns "+ce.width,te={width:ce.width,height:ce.height,colorSpace:"DeviceGray",bitsPerComponent:ce.bitsPerComponent,decodeParameters:Re,data:ce.sMask};"filter"in ce&&(te.filter=ce.filter),re.call(this,te)}if(ce.colorSpace===F.INDEXED){var ue=this.internal.newObject();ye({data:J(new Uint8Array(ce.palette)),objectId:ue}),fe("endobj")}},l=function(){var re=this.internal.collections.addImage_images;for(var ce in re)o.call(this,re[ce])},a=function(){var re,ce=this.internal.collections.addImage_images,fe=this.internal.write;for(var ye in ce)fe("/I"+(re=ce[ye]).index,re.objectId,"0","R")},p=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",l),this.internal.events.subscribe("putXobjectDict",a))},g=function(){var re=this.internal.collections.addImage_images;return p.call(this),re},w=function(){return Object.keys(this.internal.collections.addImage_images).length},j=function(re){return typeof n["process"+re.toUpperCase()]=="function"},S=function(re){return Zs(re)==="object"&&re.nodeType===1},T=function(re,ce){if(re.nodeName==="IMG"&&re.hasAttribute("src")){var fe=""+re.getAttribute("src");if(fe.indexOf("data:image/")===0)return Tx(unescape(fe).split("base64,").pop());var ye=n.loadFile(fe,!0);if(ye!==void 0)return ye}if(re.nodeName==="CANVAS"){if(re.width===0||re.height===0)throw new Error("Given canvas must have data. Canvas width: "+re.width+", height: "+re.height);var Fe;switch(ce){case"PNG":Fe="image/png";break;case"WEBP":Fe="image/webp";break;case"JPEG":case"JPG":default:Fe="image/jpeg"}return Tx(re.toDataURL(Fe,1).split("base64,").pop())}},E=function(re){var ce=this.internal.collections.addImage_images;if(ce){for(var fe in ce)if(re===ce[fe].alias)return ce[fe]}},O=function(re,ce,fe){return re||ce||(re=-96,ce=-96),re<0&&(re=-1*fe.width*72/re/this.internal.scaleFactor),ce<0&&(ce=-1*fe.height*72/ce/this.internal.scaleFactor),re===0&&(re=ce*fe.width/fe.height),ce===0&&(ce=re*fe.height/fe.width),[re,ce]},R=function(re,ce,fe,ye,Fe,Q){var pe=O.call(this,fe,ye,Fe),me=this.internal.getCoordinateString,Ue=this.internal.getVerticalCoordinateString,Ke=g.call(this);if(fe=pe[0],ye=pe[1],Ke[Fe.index]=Fe,Q){Q*=Math.PI/180;var Re=Math.cos(Q),te=Math.sin(Q),ue=function(Me){return Me.toFixed(4)},Ne=[ue(Re),ue(te),ue(-1*te),ue(Re),0,0,"cm"]}this.internal.write("q"),Q?(this.internal.write([1,"0","0",1,me(re),Ue(ce+ye),"cm"].join(" ")),this.internal.write(Ne.join(" ")),this.internal.write([me(fe),"0","0",me(ye),"0","0","cm"].join(" "))):this.internal.write([me(fe),"0","0",me(ye),me(re),Ue(ce+ye),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Fe.index+" Do"),this.internal.write("Q")},F=n.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};n.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var B=n.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},G=n.__addimage__.sHashCode=function(re){var ce,fe,ye=0;if(typeof re=="string")for(fe=re.length,ce=0;ce<fe;ce++)ye=(ye<<5)-ye+re.charCodeAt(ce),ye|=0;else if(ge(re))for(fe=re.byteLength/2,ce=0;ce<fe;ce++)ye=(ye<<5)-ye+re[ce],ye|=0;return ye},z=n.__addimage__.validateStringAsBase64=function(re){(re=re||"").toString().trim();var ce=!0;return re.length===0&&(ce=!1),re.length%4!=0&&(ce=!1),/^[A-Za-z0-9+/]+$/.test(re.substr(0,re.length-2))===!1&&(ce=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(re.substr(-2))===!1&&(ce=!1),ce},ee=n.__addimage__.extractImageFromDataUrl=function(re){var ce=(re=re||"").split("base64,"),fe=null;if(ce.length===2){var ye=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(ce[0]);Array.isArray(ye)&&(fe={mimeType:ye[1],charset:ye[2],data:ce[1]})}return fe},ie=n.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};n.__addimage__.isArrayBuffer=function(re){return ie()&&re instanceof ArrayBuffer};var ge=n.__addimage__.isArrayBufferView=function(re){return ie()&&typeof Uint32Array<"u"&&(re instanceof Int8Array||re instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&re instanceof Uint8ClampedArray||re instanceof Int16Array||re instanceof Uint16Array||re instanceof Int32Array||re instanceof Uint32Array||re instanceof Float32Array||re instanceof Float64Array)},K=n.__addimage__.binaryStringToUint8Array=function(re){for(var ce=re.length,fe=new Uint8Array(ce),ye=0;ye<ce;ye++)fe[ye]=re.charCodeAt(ye);return fe},J=n.__addimage__.arrayBufferToBinaryString=function(re){for(var ce="",fe=ge(re)?re:new Uint8Array(re),ye=0;ye<fe.length;ye+=8192)ce+=String.fromCharCode.apply(null,fe.subarray(ye,ye+8192));return ce};n.addImage=function(){var re,ce,fe,ye,Fe,Q,pe,me,Ue;if(typeof arguments[1]=="number"?(ce=t,fe=arguments[1],ye=arguments[2],Fe=arguments[3],Q=arguments[4],pe=arguments[5],me=arguments[6],Ue=arguments[7]):(ce=arguments[1],fe=arguments[2],ye=arguments[3],Fe=arguments[4],Q=arguments[5],pe=arguments[6],me=arguments[7],Ue=arguments[8]),Zs(re=arguments[0])==="object"&&!S(re)&&"imageData"in re){var Ke=re;re=Ke.imageData,ce=Ke.format||ce||t,fe=Ke.x||fe||0,ye=Ke.y||ye||0,Fe=Ke.w||Ke.width||Fe,Q=Ke.h||Ke.height||Q,pe=Ke.alias||pe,me=Ke.compression||me,Ue=Ke.rotation||Ke.angle||Ue}var Re=this.internal.getFilters();if(me===void 0&&Re.indexOf("FlateEncode")!==-1&&(me="SLOW"),isNaN(fe)||isNaN(ye))throw new Error("Invalid coordinates passed to jsPDF.addImage");p.call(this);var te=Se.call(this,re,ce,pe,me);return R.call(this,fe,ye,Fe,Q,te,Ue),this};var Se=function(re,ce,fe,ye){var Fe,Q,pe;if(typeof re=="string"&&i(re)===t){re=unescape(re);var me=_e(re,!1);(me!==""||(me=n.loadFile(re,!0))!==void 0)&&(re=me)}if(S(re)&&(re=T(re,ce)),ce=i(re,ce),!j(ce))throw new Error("addImage does not support files of type '"+ce+"', please ensure that a plugin for '"+ce+"' support is added.");if(((pe=fe)==null||pe.length===0)&&(fe=(function(Ue){return typeof Ue=="string"||ge(Ue)?G(Ue):ge(Ue.data)?G(Ue.data):null})(re)),(Fe=E.call(this,fe))||(ie()&&(re instanceof Uint8Array||ce==="RGBA"||(Q=re,re=K(re))),Fe=this["process"+ce.toUpperCase()](re,w.call(this),fe,(function(Ue){return Ue&&typeof Ue=="string"&&(Ue=Ue.toUpperCase()),Ue in n.image_compression?Ue:B.NONE})(ye),Q)),!Fe)throw new Error("An unknown error occurred whilst processing the image.");return Fe},_e=n.__addimage__.convertBase64ToBinaryString=function(re,ce){var fe;ce=typeof ce!="boolean"||ce;var ye,Fe="";if(typeof re=="string"){ye=(fe=ee(re))!==null?fe.data:re;try{Fe=Tx(ye)}catch(Q){if(ce)throw z(ye)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Q.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Fe};n.getImageProperties=function(re){var ce,fe,ye="";if(S(re)&&(re=T(re)),typeof re=="string"&&i(re)===t&&((ye=_e(re,!1))===""&&(ye=n.loadFile(re)||""),re=ye),fe=i(re),!j(fe))throw new Error("addImage does not support files of type '"+fe+"', please ensure that a plugin for '"+fe+"' support is added.");if(!ie()||re instanceof Uint8Array||(re=K(re)),!(ce=this["process"+fe.toUpperCase()](re)))throw new Error("An unknown error occurred whilst processing the image");return ce.fileType=fe,ce}})(Bn.API),(function(n){var t=function(r){if(r!==void 0&&r!="")return!0};Bn.API.events.push(["addPage",function(r){this.internal.getPageInfo(r.pageNumber).pageContext.annotations=[]}]),n.events.push(["putPage",function(r){for(var i,o,l,a=this.internal.getCoordinateString,p=this.internal.getVerticalCoordinateString,g=this.internal.getPageInfoByObjId(r.objId),w=r.pageContext.annotations,j=!1,S=0;S<w.length&&!j;S++)switch((i=w[S]).type){case"link":(t(i.options.url)||t(i.options.pageNumber))&&(j=!0);break;case"reference":case"text":case"freetext":j=!0}if(j!=0){this.internal.write("/Annots [");for(var T=0;T<w.length;T++){i=w[T];var E=this.internal.pdfEscape,O=this.internal.getEncryptor(r.objId);switch(i.type){case"reference":this.internal.write(" "+i.object.objId+" 0 R ");break;case"text":var R=this.internal.newAdditionalObject(),F=this.internal.newAdditionalObject(),B=this.internal.getEncryptor(R.objId),G=i.title||"Note";l="<</Type /Annot /Subtype /Text "+(o="/Rect ["+a(i.bounds.x)+" "+p(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w)+" "+p(i.bounds.y)+"] ")+"/Contents ("+E(B(i.contents))+")",l+=" /Popup "+F.objId+" 0 R",l+=" /P "+g.objId+" 0 R",l+=" /T ("+E(B(G))+") >>",R.content=l;var z=R.objId+" 0 R";l="<</Type /Annot /Subtype /Popup "+(o="/Rect ["+a(i.bounds.x+30)+" "+p(i.bounds.y+i.bounds.h)+" "+a(i.bounds.x+i.bounds.w+30)+" "+p(i.bounds.y)+"] ")+" /Parent "+z,i.open&&(l+=" /Open true"),l+=" >>",F.content=l,this.internal.write(R.objId,"0 R",F.objId,"0 R");break;case"freetext":o="/Rect ["+a(i.bounds.x)+" "+p(i.bounds.y)+" "+a(i.bounds.x+i.bounds.w)+" "+p(i.bounds.y+i.bounds.h)+"] ";var ee=i.color||"#000000";l="<</Type /Annot /Subtype /FreeText "+o+"/Contents ("+E(O(i.contents))+")",l+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+ee+")",l+=" /Border [0 0 0]",l+=" >>",this.internal.write(l);break;case"link":if(i.options.name){var ie=this.annotations._nameMap[i.options.name];i.options.pageNumber=ie.page,i.options.top=ie.y}else i.options.top||(i.options.top=0);if(o="/Rect ["+i.finalBounds.x+" "+i.finalBounds.y+" "+i.finalBounds.w+" "+i.finalBounds.h+"] ",l="",i.options.url)l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /A <</S /URI /URI ("+E(O(i.options.url))+") >>";else if(i.options.pageNumber)switch(l="<</Type /Annot /Subtype /Link "+o+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(i.options.pageNumber).objId+" 0 R",i.options.magFactor=i.options.magFactor||"XYZ",i.options.magFactor){case"Fit":l+=" /Fit]";break;case"FitH":l+=" /FitH "+i.options.top+"]";break;case"FitV":i.options.left=i.options.left||0,l+=" /FitV "+i.options.left+"]";break;case"XYZ":default:var ge=p(i.options.top);i.options.left=i.options.left||0,i.options.zoom===void 0&&(i.options.zoom=0),l+=" /XYZ "+i.options.left+" "+ge+" "+i.options.zoom+"]"}l!=""&&(l+=" >>",this.internal.write(l))}}this.internal.write("]")}}]),n.createAnnotation=function(r){var i=this.internal.getCurrentPageInfo();switch(r.type){case"link":this.link(r.bounds.x,r.bounds.y,r.bounds.w,r.bounds.h,r);break;case"text":case"freetext":i.pageContext.annotations.push(r)}},n.link=function(r,i,o,l,a){var p=this.internal.getCurrentPageInfo(),g=this.internal.getCoordinateString,w=this.internal.getVerticalCoordinateString;p.pageContext.annotations.push({finalBounds:{x:g(r),y:w(i),w:g(r+o),h:w(i+l)},options:a,type:"link"})},n.textWithLink=function(r,i,o,l){var a,p,g=this.getTextWidth(r),w=this.internal.getLineHeight()/this.internal.scaleFactor;if(l.maxWidth!==void 0){p=l.maxWidth;var j=this.splitTextToSize(r,p).length;a=Math.ceil(w*j)}else p=g,a=w;return this.text(r,i,o,l),o+=.2*w,l.align==="center"&&(i-=g/2),l.align==="right"&&(i-=g),this.link(i,o-w,p,a,l),g},n.getTextWidth=function(r){var i=this.internal.getFontSize();return this.getStringUnitWidth(r)*i/this.internal.scaleFactor}})(Bn.API),(function(n){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},r={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},i={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},o=[1570,1571,1573,1575];n.__arabicParser__={};var l=n.__arabicParser__.isInArabicSubstitutionA=function(R){return t[R.charCodeAt(0)]!==void 0},a=n.__arabicParser__.isArabicLetter=function(R){return typeof R=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(R)},p=n.__arabicParser__.isArabicEndLetter=function(R){return a(R)&&l(R)&&t[R.charCodeAt(0)].length<=2},g=n.__arabicParser__.isArabicAlfLetter=function(R){return a(R)&&o.indexOf(R.charCodeAt(0))>=0};n.__arabicParser__.arabicLetterHasIsolatedForm=function(R){return a(R)&&l(R)&&t[R.charCodeAt(0)].length>=1};var w=n.__arabicParser__.arabicLetterHasFinalForm=function(R){return a(R)&&l(R)&&t[R.charCodeAt(0)].length>=2};n.__arabicParser__.arabicLetterHasInitialForm=function(R){return a(R)&&l(R)&&t[R.charCodeAt(0)].length>=3};var j=n.__arabicParser__.arabicLetterHasMedialForm=function(R){return a(R)&&l(R)&&t[R.charCodeAt(0)].length==4},S=n.__arabicParser__.resolveLigatures=function(R){var F=0,B=r,G="",z=0;for(F=0;F<R.length;F+=1)B[R.charCodeAt(F)]!==void 0?(z++,typeof(B=B[R.charCodeAt(F)])=="number"&&(G+=String.fromCharCode(B),B=r,z=0),F===R.length-1&&(B=r,G+=R.charAt(F-(z-1)),F-=z-1,z=0)):(B=r,G+=R.charAt(F-z),F-=z,z=0);return G};n.__arabicParser__.isArabicDiacritic=function(R){return R!==void 0&&i[R.charCodeAt(0)]!==void 0};var T=n.__arabicParser__.getCorrectForm=function(R,F,B){return a(R)?l(R)===!1?-1:!w(R)||!a(F)&&!a(B)||!a(B)&&p(F)||p(R)&&!a(F)||p(R)&&g(F)||p(R)&&p(F)?0:j(R)&&a(F)&&!p(F)&&a(B)&&w(B)?3:p(R)||!a(B)?1:2:-1},E=function(R){var F=0,B=0,G=0,z="",ee="",ie="",ge=(R=R||"").split("\\s+"),K=[];for(F=0;F<ge.length;F+=1){for(K.push(""),B=0;B<ge[F].length;B+=1)z=ge[F][B],ee=ge[F][B-1],ie=ge[F][B+1],a(z)?(G=T(z,ee,ie),K[F]+=G!==-1?String.fromCharCode(t[z.charCodeAt(0)][G]):z):K[F]+=z;K[F]=S(K[F])}return K.join(" ")},O=n.__arabicParser__.processArabic=n.processArabic=function(){var R,F=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,B=[];if(Array.isArray(F)){var G=0;for(B=[],G=0;G<F.length;G+=1)Array.isArray(F[G])?B.push([E(F[G][0]),F[G][1],F[G][2]]):B.push([E(F[G])]);R=B}else R=E(F);return typeof arguments[0]=="string"?R:(arguments[0].text=R,arguments[0])};n.events.push(["preProcessText",O])})(Bn.API),Bn.API.autoPrint=function(n){var t;switch((n=n||{}).variant=n.variant||"non-conform",n.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",(function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){this.internal.out("/OpenAction "+t+" 0 R")}))}return this},(function(n){var t=function(){var r=void 0;Object.defineProperty(this,"pdf",{get:function(){return r},set:function(p){r=p}});var i=150;Object.defineProperty(this,"width",{get:function(){return i},set:function(p){i=isNaN(p)||Number.isInteger(p)===!1||p<0?150:p,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=i+1)}});var o=300;Object.defineProperty(this,"height",{get:function(){return o},set:function(p){o=isNaN(p)||Number.isInteger(p)===!1||p<0?300:p,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=o+1)}});var l=[];Object.defineProperty(this,"childNodes",{get:function(){return l},set:function(p){l=p}});var a={};Object.defineProperty(this,"style",{get:function(){return a},set:function(p){a=p}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(r,i){var o;if((r=r||"2d")!=="2d")return null;for(o in i)this.pdf.context2d.hasOwnProperty(o)&&(this.pdf.context2d[o]=i[o]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},n.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])})(Bn.API),(function(n){var t={left:0,top:0,bottom:0,right:0},r=!1,i=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),o.call(this))},o=function(){this.internal.__cell__.lastCell=new l,this.internal.__cell__.pages=1},l=function(){var g=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return g},set:function(R){g=R}});var w=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return w},set:function(R){w=R}});var j=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return j},set:function(R){j=R}});var S=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return S},set:function(R){S=R}});var T=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return T},set:function(R){T=R}});var E=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return E},set:function(R){E=R}});var O=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return O},set:function(R){O=R}}),this};l.prototype.clone=function(){return new l(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},l.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},n.setHeaderFunction=function(g){return i.call(this),this.internal.__cell__.headerFunction=typeof g=="function"?g:void 0,this},n.getTextDimensions=function(g,w){i.call(this);var j=(w=w||{}).fontSize||this.getFontSize(),S=w.font||this.getFont(),T=w.scaleFactor||this.internal.scaleFactor,E=0,O=0,R=0,F=this;if(!Array.isArray(g)&&typeof g!="string"){if(typeof g!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");g=String(g)}var B=w.maxWidth;B>0?typeof g=="string"?g=this.splitTextToSize(g,B):Object.prototype.toString.call(g)==="[object Array]"&&(g=g.reduce((function(z,ee){return z.concat(F.splitTextToSize(ee,B))}),[])):g=Array.isArray(g)?g:[g];for(var G=0;G<g.length;G++)E<(R=this.getStringUnitWidth(g[G],{font:S})*j)&&(E=R);return E!==0&&(O=g.length),{w:E/=T,h:Math.max((O*j*this.getLineHeightFactor()-j*(this.getLineHeightFactor()-1))/T,0)}},n.cellAddPage=function(){i.call(this),this.addPage();var g=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new l(g.left,g.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var a=n.cell=function(){var g;g=arguments[0]instanceof l?arguments[0]:new l(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),i.call(this);var w=this.internal.__cell__.lastCell,j=this.internal.__cell__.padding,S=this.internal.__cell__.margins||t,T=this.internal.__cell__.tableHeaderRow,E=this.internal.__cell__.printHeaders;return w.lineNumber!==void 0&&(w.lineNumber===g.lineNumber?(g.x=(w.x||0)+(w.width||0),g.y=w.y||0):w.y+w.height+g.height+S.bottom>this.getPageHeight()?(this.cellAddPage(),g.y=S.top,E&&T&&(this.printHeaderRow(g.lineNumber,!0),g.y+=T[0].height)):g.y=w.y+w.height||g.y),g.text[0]!==void 0&&(this.rect(g.x,g.y,g.width,g.height,r===!0?"FD":void 0),g.align==="right"?this.text(g.text,g.x+g.width-j,g.y+j,{align:"right",baseline:"top"}):g.align==="center"?this.text(g.text,g.x+g.width/2,g.y+j,{align:"center",baseline:"top",maxWidth:g.width-j-j}):this.text(g.text,g.x+j,g.y+j,{align:"left",baseline:"top",maxWidth:g.width-j-j})),this.internal.__cell__.lastCell=g,this};n.table=function(g,w,j,S,T){if(i.call(this),!j)throw new Error("No data for PDF table.");var E,O,R,F,B=[],G=[],z=[],ee={},ie={},ge=[],K=[],J=(T=T||{}).autoSize||!1,Se=T.printHeaders!==!1,_e=T.css&&T.css["font-size"]!==void 0?16*T.css["font-size"]:T.fontSize||12,re=T.margins||Object.assign({width:this.getPageWidth()},t),ce=typeof T.padding=="number"?T.padding:3,fe=T.headerBackgroundColor||"#c8c8c8",ye=T.headerTextColor||"#000";if(o.call(this),this.internal.__cell__.printHeaders=Se,this.internal.__cell__.margins=re,this.internal.__cell__.table_font_size=_e,this.internal.__cell__.padding=ce,this.internal.__cell__.headerBackgroundColor=fe,this.internal.__cell__.headerTextColor=ye,this.setFontSize(_e),S==null)G=B=Object.keys(j[0]),z=B.map((function(){return"left"}));else if(Array.isArray(S)&&Zs(S[0])==="object")for(B=S.map((function(Ke){return Ke.name})),G=S.map((function(Ke){return Ke.prompt||Ke.name||""})),z=S.map((function(Ke){return Ke.align||"left"})),E=0;E<S.length;E+=1)ie[S[E].name]=S[E].width*(19.049976/25.4);else Array.isArray(S)&&typeof S[0]=="string"&&(G=B=S,z=B.map((function(){return"left"})));if(J||Array.isArray(S)&&typeof S[0]=="string")for(E=0;E<B.length;E+=1){for(ee[F=B[E]]=j.map((function(Ke){return Ke[F]})),this.setFont(void 0,"bold"),ge.push(this.getTextDimensions(G[E],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),O=ee[F],this.setFont(void 0,"normal"),R=0;R<O.length;R+=1)ge.push(this.getTextDimensions(O[R],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ie[F]=Math.max.apply(null,ge)+ce+ce,ge=[]}if(Se){var Fe={};for(E=0;E<B.length;E+=1)Fe[B[E]]={},Fe[B[E]].text=G[E],Fe[B[E]].align=z[E];var Q=p.call(this,Fe,ie);K=B.map((function(Ke){return new l(g,w,ie[Ke],Q,Fe[Ke].text,void 0,Fe[Ke].align)})),this.setTableHeaderRow(K),this.printHeaderRow(1,!1)}var pe=S.reduce((function(Ke,Re){return Ke[Re.name]=Re.align,Ke}),{});for(E=0;E<j.length;E+=1){"rowStart"in T&&T.rowStart instanceof Function&&T.rowStart({row:E,data:j[E]},this);var me=p.call(this,j[E],ie);for(R=0;R<B.length;R+=1){var Ue=j[E][B[R]];"cellStart"in T&&T.cellStart instanceof Function&&T.cellStart({row:E,col:R,data:Ue},this),a.call(this,new l(g,w,ie[B[R]],me,Ue,E+2,pe[B[R]]))}}return this.internal.__cell__.table_x=g,this.internal.__cell__.table_y=w,this};var p=function(g,w){var j=this.internal.__cell__.padding,S=this.internal.__cell__.table_font_size,T=this.internal.scaleFactor;return Object.keys(g).map((function(E){var O=g[E];return this.splitTextToSize(O.hasOwnProperty("text")?O.text:O,w[E]-j-j)}),this).map((function(E){return this.getLineHeightFactor()*E.length*S/T+j+j}),this).reduce((function(E,O){return Math.max(E,O)}),0)};n.setTableHeaderRow=function(g){i.call(this),this.internal.__cell__.tableHeaderRow=g},n.printHeaderRow=function(g,w){if(i.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var j;if(r=!0,typeof this.internal.__cell__.headerFunction=="function"){var S=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new l(S[0],S[1],S[2],S[3],void 0,-1)}this.setFont(void 0,"bold");for(var T=[],E=0;E<this.internal.__cell__.tableHeaderRow.length;E+=1){j=this.internal.__cell__.tableHeaderRow[E].clone(),w&&(j.y=this.internal.__cell__.margins.top||0,T.push(j)),j.lineNumber=g;var O=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),a.call(this,j),this.setTextColor(O)}T.length>0&&this.setTableHeaderRow(T),this.setFont(void 0,"normal"),r=!1}})(Bn.API);var r6={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},n6=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],bw=t6(n6),i6=[100,200,300,400,500,600,700,800,900],TH=t6(i6);function _w(n){var t=n.family.replace(/"|'/g,"").toLowerCase(),r=(function(l){return r6[l=l||"normal"]?l:"normal"})(n.style),i=(function(l){if(!l)return 400;if(typeof l=="number")return l>=100&&l<=900&&l%100==0?l:400;if(/^\d00$/.test(l))return parseInt(l);switch(l){case"bold":return 700;case"normal":default:return 400}})(n.weight),o=(function(l){return typeof bw[l=l||"normal"]=="number"?l:"normal"})(n.stretch);return{family:t,style:r,weight:i,stretch:o,src:n.src||[],ref:n.ref||{name:t,style:[o,r,i].join(" ")}}}function FS(n,t,r,i){var o;for(o=r;o>=0&&o<t.length;o+=i)if(n[t[o]])return n[t[o]];for(o=r;o>=0&&o<t.length;o-=i)if(n[t[o]])return n[t[o]]}var PH={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},BS={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function US(n){return[n.stretch,n.style,n.weight,n.family].join(" ")}function RH(n,t,r){for(var i=(r=r||{}).defaultFontFamily||"times",o=Object.assign({},PH,r.genericFontFamilies||{}),l=null,a=null,p=0;p<t.length;++p)if(o[(l=_w(t[p])).family]&&(l.family=o[l.family]),n.hasOwnProperty(l.family)){a=n[l.family];break}if(!(a=a||n[i]))throw new Error("Could not find a font-family for the rule '"+US(l)+"' and default family '"+i+"'.");if(a=(function(g,w){if(w[g])return w[g];var j=bw[g],S=j<=bw.normal?-1:1,T=FS(w,n6,j,S);if(!T)throw new Error("Could not find a matching font-stretch value for "+g);return T})(l.stretch,a),a=(function(g,w){if(w[g])return w[g];for(var j=r6[g],S=0;S<j.length;++S)if(w[j[S]])return w[j[S]];throw new Error("Could not find a matching font-style for "+g)})(l.style,a),!(a=(function(g,w){if(w[g])return w[g];if(g===400&&w[500])return w[500];if(g===500&&w[400])return w[400];var j=TH[g],S=FS(w,i6,j,g<400?-1:1);if(!S)throw new Error("Could not find a matching font-weight for value "+g);return S})(l.weight,a)))throw new Error("Failed to resolve a font for the rule '"+US(l)+"'.");return a}function qS(n){return n.trimLeft()}function IH(n,t){for(var r=0;r<n.length;){if(n.charAt(r)===t)return[n.substring(0,r),n.substring(r+1)];r+=1}return null}function LH(n){var t=n.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],n.substring(t[0].length)]}var D1,VS,$S,j2=["times"];(function(n){var t,r,i,o,l,a,p,g,w,j=function(te){return te=te||{},this.isStrokeTransparent=te.isStrokeTransparent||!1,this.strokeOpacity=te.strokeOpacity||1,this.strokeStyle=te.strokeStyle||"#000000",this.fillStyle=te.fillStyle||"#000000",this.isFillTransparent=te.isFillTransparent||!1,this.fillOpacity=te.fillOpacity||1,this.font=te.font||"10px sans-serif",this.textBaseline=te.textBaseline||"alphabetic",this.textAlign=te.textAlign||"left",this.lineWidth=te.lineWidth||1,this.lineJoin=te.lineJoin||"miter",this.lineCap=te.lineCap||"butt",this.path=te.path||[],this.transform=te.transform!==void 0?te.transform.clone():new g,this.globalCompositeOperation=te.globalCompositeOperation||"normal",this.globalAlpha=te.globalAlpha||1,this.clip_path=te.clip_path||[],this.currentPoint=te.currentPoint||new a,this.miterLimit=te.miterLimit||10,this.lastPoint=te.lastPoint||new a,this.lineDashOffset=te.lineDashOffset||0,this.lineDash=te.lineDash||[],this.margin=te.margin||[0,0,0,0],this.prevPageLastElemOffset=te.prevPageLastElemOffset||0,this.ignoreClearRect=typeof te.ignoreClearRect!="boolean"||te.ignoreClearRect,this};n.events.push(["initialized",function(){this.context2d=new S(this),t=this.internal.f2,r=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,o=this.internal.getHorizontalCoordinate,l=this.internal.getVerticalCoordinate,a=this.internal.Point,p=this.internal.Rectangle,g=this.internal.Matrix,w=new j}]);var S=function(te){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var ue=te;Object.defineProperty(this,"pdf",{get:function(){return ue}});var Ne=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ne},set:function(_t){Ne=!!_t}});var Me=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return Me},set:function(_t){Me=!!_t}});var We=0;Object.defineProperty(this,"posX",{get:function(){return We},set:function(_t){isNaN(_t)||(We=_t)}});var Ve=0;Object.defineProperty(this,"posY",{get:function(){return Ve},set:function(_t){isNaN(_t)||(Ve=_t)}}),Object.defineProperty(this,"margin",{get:function(){return w.margin},set:function(_t){var Ye;typeof _t=="number"?Ye=[_t,_t,_t,_t]:((Ye=new Array(4))[0]=_t[0],Ye[1]=_t.length>=2?_t[1]:Ye[0],Ye[2]=_t.length>=3?_t[2]:Ye[0],Ye[3]=_t.length>=4?_t[3]:Ye[1]),w.margin=Ye}});var tt=!1;Object.defineProperty(this,"autoPaging",{get:function(){return tt},set:function(_t){tt=_t}});var Qe=0;Object.defineProperty(this,"lastBreak",{get:function(){return Qe},set:function(_t){Qe=_t}});var St=[];Object.defineProperty(this,"pageBreaks",{get:function(){return St},set:function(_t){St=_t}}),Object.defineProperty(this,"ctx",{get:function(){return w},set:function(_t){_t instanceof j&&(w=_t)}}),Object.defineProperty(this,"path",{get:function(){return w.path},set:function(_t){w.path=_t}});var Et=[];Object.defineProperty(this,"ctxStack",{get:function(){return Et},set:function(_t){Et=_t}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(_t){var Ye;Ye=T(_t),this.ctx.fillStyle=Ye.style,this.ctx.isFillTransparent=Ye.a===0,this.ctx.fillOpacity=Ye.a,this.pdf.setFillColor(Ye.r,Ye.g,Ye.b,{a:Ye.a}),this.pdf.setTextColor(Ye.r,Ye.g,Ye.b,{a:Ye.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(_t){var Ye=T(_t);this.ctx.strokeStyle=Ye.style,this.ctx.isStrokeTransparent=Ye.a===0,this.ctx.strokeOpacity=Ye.a,Ye.a===0?this.pdf.setDrawColor(255,255,255):(Ye.a,this.pdf.setDrawColor(Ye.r,Ye.g,Ye.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(_t){["butt","round","square"].indexOf(_t)!==-1&&(this.ctx.lineCap=_t,this.pdf.setLineCap(_t))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(_t){isNaN(_t)||(this.ctx.lineWidth=_t,this.pdf.setLineWidth(_t))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(_t){["bevel","round","miter"].indexOf(_t)!==-1&&(this.ctx.lineJoin=_t,this.pdf.setLineJoin(_t))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(_t){isNaN(_t)||(this.ctx.miterLimit=_t,this.pdf.setMiterLimit(_t))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(_t){this.ctx.textBaseline=_t}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(_t){["right","end","center","left","start"].indexOf(_t)!==-1&&(this.ctx.textAlign=_t)}});var zt=null;function Lt(_t,Ye){if(zt===null){var $r=(function(Cr){var Zt=[];return Object.keys(Cr).forEach((function(Be){Cr[Be].forEach((function(it){var at=null;switch(it){case"bold":at={family:Be,weight:"bold"};break;case"italic":at={family:Be,style:"italic"};break;case"bolditalic":at={family:Be,weight:"bold",style:"italic"};break;case"":case"normal":at={family:Be}}at!==null&&(at.ref={name:Be,style:it},Zt.push(at))}))})),Zt})(_t.getFontList());zt=(function(Cr){for(var Zt={},Be=0;Be<Cr.length;++Be){var it=_w(Cr[Be]),at=it.family,Tt=it.stretch,kt=it.style,Ot=it.weight;Zt[at]=Zt[at]||{},Zt[at][Tt]=Zt[at][Tt]||{},Zt[at][Tt][kt]=Zt[at][Tt][kt]||{},Zt[at][Tt][kt][Ot]=it}return Zt})($r.concat(Ye))}return zt}var wr=null;Object.defineProperty(this,"fontFaces",{get:function(){return wr},set:function(_t){zt=null,wr=_t}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(_t){var Ye;if(this.ctx.font=_t,(Ye=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(_t))!==null){var $r=Ye[1],Cr=(Ye[2],Ye[3]),Zt=Ye[4],Be=(Ye[5],Ye[6]),it=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec(Zt)[2];Zt=Math.floor(it==="px"?parseFloat(Zt)*this.pdf.internal.scaleFactor:it==="em"?parseFloat(Zt)*this.pdf.getFontSize():parseFloat(Zt)*this.pdf.internal.scaleFactor),this.pdf.setFontSize(Zt);var at=(function(Ur){var nn,_r,Ri=[],_n=Ur.trim();if(_n==="")return j2;if(_n in BS)return[BS[_n]];for(;_n!=="";){switch(_r=null,nn=(_n=qS(_n)).charAt(0)){case'"':case"'":_r=IH(_n.substring(1),nn);break;default:_r=LH(_n)}if(_r===null||(Ri.push(_r[0]),(_n=qS(_r[1]))!==""&&_n.charAt(0)!==","))return j2;_n=_n.replace(/^,/,"")}return Ri})(Be);if(this.fontFaces){var Tt=RH(Lt(this.pdf,this.fontFaces),at.map((function(Ur){return{family:Ur,stretch:"normal",weight:Cr,style:$r}})));this.pdf.setFont(Tt.ref.name,Tt.ref.style)}else{var kt="";(Cr==="bold"||parseInt(Cr,10)>=700||$r==="bold")&&(kt="bold"),$r==="italic"&&(kt+="italic"),kt.length===0&&(kt="normal");for(var Ot="",Qt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},zr=0;zr<at.length;zr++){if(this.pdf.internal.getFont(at[zr],kt,{noFallback:!0,disableWarning:!0})!==void 0){Ot=at[zr];break}if(kt==="bolditalic"&&this.pdf.internal.getFont(at[zr],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Ot=at[zr],kt="bold";else if(this.pdf.internal.getFont(at[zr],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Ot=at[zr],kt="normal";break}}if(Ot===""){for(var Hr=0;Hr<at.length;Hr++)if(Qt[at[Hr]]){Ot=Qt[at[Hr]];break}}Ot=Ot===""?"Times":Ot,this.pdf.setFont(Ot,kt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(_t){this.ctx.globalCompositeOperation=_t}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(_t){this.ctx.globalAlpha=_t}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(_t){this.ctx.lineDashOffset=_t,Re.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(_t){this.ctx.lineDash=_t,Re.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(_t){this.ctx.ignoreClearRect=!!_t}})};S.prototype.setLineDash=function(te){this.lineDash=te},S.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},S.prototype.fill=function(){ee.call(this,"fill",!1)},S.prototype.stroke=function(){ee.call(this,"stroke",!1)},S.prototype.beginPath=function(){this.path=[{type:"begin"}]},S.prototype.moveTo=function(te,ue){if(isNaN(te)||isNaN(ue))throw ga.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ne=this.ctx.transform.applyToPoint(new a(te,ue));this.path.push({type:"mt",x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new a(te,ue)},S.prototype.closePath=function(){var te=new a(0,0),ue=0;for(ue=this.path.length-1;ue!==-1;ue--)if(this.path[ue].type==="begin"&&Zs(this.path[ue+1])==="object"&&typeof this.path[ue+1].x=="number"){te=new a(this.path[ue+1].x,this.path[ue+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new a(te.x,te.y)},S.prototype.lineTo=function(te,ue){if(isNaN(te)||isNaN(ue))throw ga.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ne=this.ctx.transform.applyToPoint(new a(te,ue));this.path.push({type:"lt",x:Ne.x,y:Ne.y}),this.ctx.lastPoint=new a(Ne.x,Ne.y)},S.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),ee.call(this,null,!0)},S.prototype.quadraticCurveTo=function(te,ue,Ne,Me){if(isNaN(Ne)||isNaN(Me)||isNaN(te)||isNaN(ue))throw ga.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var We=this.ctx.transform.applyToPoint(new a(Ne,Me)),Ve=this.ctx.transform.applyToPoint(new a(te,ue));this.path.push({type:"qct",x1:Ve.x,y1:Ve.y,x:We.x,y:We.y}),this.ctx.lastPoint=new a(We.x,We.y)},S.prototype.bezierCurveTo=function(te,ue,Ne,Me,We,Ve){if(isNaN(We)||isNaN(Ve)||isNaN(te)||isNaN(ue)||isNaN(Ne)||isNaN(Me))throw ga.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var tt=this.ctx.transform.applyToPoint(new a(We,Ve)),Qe=this.ctx.transform.applyToPoint(new a(te,ue)),St=this.ctx.transform.applyToPoint(new a(Ne,Me));this.path.push({type:"bct",x1:Qe.x,y1:Qe.y,x2:St.x,y2:St.y,x:tt.x,y:tt.y}),this.ctx.lastPoint=new a(tt.x,tt.y)},S.prototype.arc=function(te,ue,Ne,Me,We,Ve){if(isNaN(te)||isNaN(ue)||isNaN(Ne)||isNaN(Me)||isNaN(We))throw ga.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Ve=!!Ve,!this.ctx.transform.isIdentity){var tt=this.ctx.transform.applyToPoint(new a(te,ue));te=tt.x,ue=tt.y;var Qe=this.ctx.transform.applyToPoint(new a(0,Ne)),St=this.ctx.transform.applyToPoint(new a(0,0));Ne=Math.sqrt(Math.pow(Qe.x-St.x,2)+Math.pow(Qe.y-St.y,2))}Math.abs(We-Me)>=2*Math.PI&&(Me=0,We=2*Math.PI),this.path.push({type:"arc",x:te,y:ue,radius:Ne,startAngle:Me,endAngle:We,counterclockwise:Ve})},S.prototype.arcTo=function(te,ue,Ne,Me,We){throw new Error("arcTo not implemented.")},S.prototype.rect=function(te,ue,Ne,Me){if(isNaN(te)||isNaN(ue)||isNaN(Ne)||isNaN(Me))throw ga.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(te,ue),this.lineTo(te+Ne,ue),this.lineTo(te+Ne,ue+Me),this.lineTo(te,ue+Me),this.lineTo(te,ue),this.lineTo(te+Ne,ue),this.lineTo(te,ue)},S.prototype.fillRect=function(te,ue,Ne,Me){if(isNaN(te)||isNaN(ue)||isNaN(Ne)||isNaN(Me))throw ga.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!E.call(this)){var We={};this.lineCap!=="butt"&&(We.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(We.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(te,ue,Ne,Me),this.fill(),We.hasOwnProperty("lineCap")&&(this.lineCap=We.lineCap),We.hasOwnProperty("lineJoin")&&(this.lineJoin=We.lineJoin)}},S.prototype.strokeRect=function(te,ue,Ne,Me){if(isNaN(te)||isNaN(ue)||isNaN(Ne)||isNaN(Me))throw ga.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");O.call(this)||(this.beginPath(),this.rect(te,ue,Ne,Me),this.stroke())},S.prototype.clearRect=function(te,ue,Ne,Me){if(isNaN(te)||isNaN(ue)||isNaN(Ne)||isNaN(Me))throw ga.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(te,ue,Ne,Me))},S.prototype.save=function(te){te=typeof te!="boolean"||te;for(var ue=this.pdf.internal.getCurrentPageInfo().pageNumber,Ne=0;Ne<this.pdf.internal.getNumberOfPages();Ne++)this.pdf.setPage(Ne+1),this.pdf.internal.out("q");if(this.pdf.setPage(ue),te){this.ctx.fontSize=this.pdf.internal.getFontSize();var Me=new j(this.ctx);this.ctxStack.push(this.ctx),this.ctx=Me}},S.prototype.restore=function(te){te=typeof te!="boolean"||te;for(var ue=this.pdf.internal.getCurrentPageInfo().pageNumber,Ne=0;Ne<this.pdf.internal.getNumberOfPages();Ne++)this.pdf.setPage(Ne+1),this.pdf.internal.out("Q");this.pdf.setPage(ue),te&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},S.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var T=function(te){var ue,Ne,Me,We;if(te.isCanvasGradient===!0&&(te=te.getColor()),!te)return{r:0,g:0,b:0,a:0,style:te};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(te))ue=0,Ne=0,Me=0,We=0;else{var Ve=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(te);if(Ve!==null)ue=parseInt(Ve[1]),Ne=parseInt(Ve[2]),Me=parseInt(Ve[3]),We=1;else if((Ve=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(te))!==null)ue=parseInt(Ve[1]),Ne=parseInt(Ve[2]),Me=parseInt(Ve[3]),We=parseFloat(Ve[4]);else{if(We=1,typeof te=="string"&&te.charAt(0)!=="#"){var tt=new ZT(te);te=tt.ok?tt.toHex():"#000000"}te.length===4?(ue=te.substring(1,2),ue+=ue,Ne=te.substring(2,3),Ne+=Ne,Me=te.substring(3,4),Me+=Me):(ue=te.substring(1,3),Ne=te.substring(3,5),Me=te.substring(5,7)),ue=parseInt(ue,16),Ne=parseInt(Ne,16),Me=parseInt(Me,16)}}return{r:ue,g:Ne,b:Me,a:We,style:te}},E=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},O=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};S.prototype.fillText=function(te,ue,Ne,Me){if(isNaN(ue)||isNaN(Ne)||typeof te!="string")throw ga.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(Me=isNaN(Me)?void 0:Me,!E.call(this)){var We=me(this.ctx.transform.rotation),Ve=this.ctx.transform.scaleX;ce.call(this,{text:te,x:ue,y:Ne,scale:Ve,angle:We,align:this.textAlign,maxWidth:Me})}},S.prototype.strokeText=function(te,ue,Ne,Me){if(isNaN(ue)||isNaN(Ne)||typeof te!="string")throw ga.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!O.call(this)){Me=isNaN(Me)?void 0:Me;var We=me(this.ctx.transform.rotation),Ve=this.ctx.transform.scaleX;ce.call(this,{text:te,x:ue,y:Ne,scale:Ve,renderingMode:"stroke",angle:We,align:this.textAlign,maxWidth:Me})}},S.prototype.measureText=function(te){if(typeof te!="string")throw ga.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var ue=this.pdf,Ne=this.pdf.internal.scaleFactor,Me=ue.internal.getFontSize(),We=ue.getStringUnitWidth(te)*Me/ue.internal.scaleFactor,Ve=function(tt){var Qe=(tt=tt||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return Qe}}),this};return new Ve({width:We*=Math.round(96*Ne/72*1e4)/1e4})},S.prototype.scale=function(te,ue){if(isNaN(te)||isNaN(ue))throw ga.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ne=new g(te,0,0,ue,0,0);this.ctx.transform=this.ctx.transform.multiply(Ne)},S.prototype.rotate=function(te){if(isNaN(te))throw ga.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var ue=new g(Math.cos(te),Math.sin(te),-Math.sin(te),Math.cos(te),0,0);this.ctx.transform=this.ctx.transform.multiply(ue)},S.prototype.translate=function(te,ue){if(isNaN(te)||isNaN(ue))throw ga.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ne=new g(1,0,0,1,te,ue);this.ctx.transform=this.ctx.transform.multiply(Ne)},S.prototype.transform=function(te,ue,Ne,Me,We,Ve){if(isNaN(te)||isNaN(ue)||isNaN(Ne)||isNaN(Me)||isNaN(We)||isNaN(Ve))throw ga.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var tt=new g(te,ue,Ne,Me,We,Ve);this.ctx.transform=this.ctx.transform.multiply(tt)},S.prototype.setTransform=function(te,ue,Ne,Me,We,Ve){te=isNaN(te)?1:te,ue=isNaN(ue)?0:ue,Ne=isNaN(Ne)?0:Ne,Me=isNaN(Me)?1:Me,We=isNaN(We)?0:We,Ve=isNaN(Ve)?0:Ve,this.ctx.transform=new g(te,ue,Ne,Me,We,Ve)};var R=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};S.prototype.drawImage=function(te,ue,Ne,Me,We,Ve,tt,Qe,St){var Et=this.pdf.getImageProperties(te),zt=1,Lt=1,wr=1,_t=1;Me!==void 0&&Qe!==void 0&&(wr=Qe/Me,_t=St/We,zt=Et.width/Me*Qe/Me,Lt=Et.height/We*St/We),Ve===void 0&&(Ve=ue,tt=Ne,ue=0,Ne=0),Me!==void 0&&Qe===void 0&&(Qe=Me,St=We),Me===void 0&&Qe===void 0&&(Qe=Et.width,St=Et.height);for(var Ye,$r=this.ctx.transform.decompose(),Cr=me($r.rotate.shx),Zt=new g,Be=(Zt=(Zt=(Zt=Zt.multiply($r.translate)).multiply($r.skew)).multiply($r.scale)).applyToRectangle(new p(Ve-ue*wr,tt-Ne*_t,Me*zt,We*Lt)),it=F.call(this,Be),at=[],Tt=0;Tt<it.length;Tt+=1)at.indexOf(it[Tt])===-1&&at.push(it[Tt]);if(z(at),this.autoPaging)for(var kt=at[0],Ot=at[at.length-1],Qt=kt;Qt<Ot+1;Qt++){this.pdf.setPage(Qt);var zr=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Hr=Qt===1?this.posY+this.margin[0]:this.margin[0],Ur=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],nn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],_r=Qt===1?0:Ur+(Qt-2)*nn;if(this.ctx.clip_path.length!==0){var Ri=this.path;Ye=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(Ye,this.posX+this.margin[3],-_r+Hr+this.ctx.prevPageLastElemOffset),ie.call(this,"fill",!0),this.path=Ri}var _n=JSON.parse(JSON.stringify(Be));_n=G([_n],this.posX+this.margin[3],-_r+Hr+this.ctx.prevPageLastElemOffset)[0];var fi=(Qt>kt||Qt<Ot)&&R.call(this);fi&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],zr,nn,null).clip().discardPath()),this.pdf.addImage(te,"JPEG",_n.x,_n.y,_n.w,_n.h,null,null,Cr),fi&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(te,"JPEG",Be.x,Be.y,Be.w,Be.h,null,null,Cr)};var F=function(te,ue,Ne){var Me=[];ue=ue||this.pdf.internal.pageSize.width,Ne=Ne||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var We=this.posY+this.ctx.prevPageLastElemOffset;switch(te.type){default:case"mt":case"lt":Me.push(Math.floor((te.y+We)/Ne)+1);break;case"arc":Me.push(Math.floor((te.y+We-te.radius)/Ne)+1),Me.push(Math.floor((te.y+We+te.radius)/Ne)+1);break;case"qct":var Ve=Ue(this.ctx.lastPoint.x,this.ctx.lastPoint.y,te.x1,te.y1,te.x,te.y);Me.push(Math.floor((Ve.y+We)/Ne)+1),Me.push(Math.floor((Ve.y+Ve.h+We)/Ne)+1);break;case"bct":var tt=Ke(this.ctx.lastPoint.x,this.ctx.lastPoint.y,te.x1,te.y1,te.x2,te.y2,te.x,te.y);Me.push(Math.floor((tt.y+We)/Ne)+1),Me.push(Math.floor((tt.y+tt.h+We)/Ne)+1);break;case"rect":Me.push(Math.floor((te.y+We)/Ne)+1),Me.push(Math.floor((te.y+te.h+We)/Ne)+1)}for(var Qe=0;Qe<Me.length;Qe+=1)for(;this.pdf.internal.getNumberOfPages()<Me[Qe];)B.call(this);return Me},B=function(){var te=this.fillStyle,ue=this.strokeStyle,Ne=this.font,Me=this.lineCap,We=this.lineWidth,Ve=this.lineJoin;this.pdf.addPage(),this.fillStyle=te,this.strokeStyle=ue,this.font=Ne,this.lineCap=Me,this.lineWidth=We,this.lineJoin=Ve},G=function(te,ue,Ne){for(var Me=0;Me<te.length;Me++)switch(te[Me].type){case"bct":te[Me].x2+=ue,te[Me].y2+=Ne;case"qct":te[Me].x1+=ue,te[Me].y1+=Ne;case"mt":case"lt":case"arc":default:te[Me].x+=ue,te[Me].y+=Ne}return te},z=function(te){return te.sort((function(ue,Ne){return ue-Ne}))},ee=function(te,ue){for(var Ne,Me,We=this.fillStyle,Ve=this.strokeStyle,tt=this.lineCap,Qe=this.lineWidth,St=Math.abs(Qe*this.ctx.transform.scaleX),Et=this.lineJoin,zt=JSON.parse(JSON.stringify(this.path)),Lt=JSON.parse(JSON.stringify(this.path)),wr=[],_t=0;_t<Lt.length;_t++)if(Lt[_t].x!==void 0)for(var Ye=F.call(this,Lt[_t]),$r=0;$r<Ye.length;$r+=1)wr.indexOf(Ye[$r])===-1&&wr.push(Ye[$r]);for(var Cr=0;Cr<wr.length;Cr++)for(;this.pdf.internal.getNumberOfPages()<wr[Cr];)B.call(this);if(z(wr),this.autoPaging)for(var Zt=wr[0],Be=wr[wr.length-1],it=Zt;it<Be+1;it++){this.pdf.setPage(it),this.fillStyle=We,this.strokeStyle=Ve,this.lineCap=tt,this.lineWidth=St,this.lineJoin=Et;var at=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],Tt=it===1?this.posY+this.margin[0]:this.margin[0],kt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Ot=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],Qt=it===1?0:kt+(it-2)*Ot;if(this.ctx.clip_path.length!==0){var zr=this.path;Ne=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(Ne,this.posX+this.margin[3],-Qt+Tt+this.ctx.prevPageLastElemOffset),ie.call(this,te,!0),this.path=zr}if(Me=JSON.parse(JSON.stringify(zt)),this.path=G(Me,this.posX+this.margin[3],-Qt+Tt+this.ctx.prevPageLastElemOffset),ue===!1||it===0){var Hr=(it>Zt||it<Be)&&R.call(this);Hr&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],at,Ot,null).clip().discardPath()),ie.call(this,te,ue),Hr&&this.pdf.restoreGraphicsState()}this.lineWidth=Qe}else this.lineWidth=St,ie.call(this,te,ue),this.lineWidth=Qe;this.path=zt},ie=function(te,ue){if((te!=="stroke"||ue||!O.call(this))&&(te==="stroke"||ue||!E.call(this))){for(var Ne,Me,We=[],Ve=this.path,tt=0;tt<Ve.length;tt++){var Qe=Ve[tt];switch(Qe.type){case"begin":We.push({begin:!0});break;case"close":We.push({close:!0});break;case"mt":We.push({start:Qe,deltas:[],abs:[]});break;case"lt":var St=We.length;if(Ve[tt-1]&&!isNaN(Ve[tt-1].x)&&(Ne=[Qe.x-Ve[tt-1].x,Qe.y-Ve[tt-1].y],St>0)){for(;St>=0;St--)if(We[St-1].close!==!0&&We[St-1].begin!==!0){We[St-1].deltas.push(Ne),We[St-1].abs.push(Qe);break}}break;case"bct":Ne=[Qe.x1-Ve[tt-1].x,Qe.y1-Ve[tt-1].y,Qe.x2-Ve[tt-1].x,Qe.y2-Ve[tt-1].y,Qe.x-Ve[tt-1].x,Qe.y-Ve[tt-1].y],We[We.length-1].deltas.push(Ne);break;case"qct":var Et=Ve[tt-1].x+2/3*(Qe.x1-Ve[tt-1].x),zt=Ve[tt-1].y+2/3*(Qe.y1-Ve[tt-1].y),Lt=Qe.x+2/3*(Qe.x1-Qe.x),wr=Qe.y+2/3*(Qe.y1-Qe.y),_t=Qe.x,Ye=Qe.y;Ne=[Et-Ve[tt-1].x,zt-Ve[tt-1].y,Lt-Ve[tt-1].x,wr-Ve[tt-1].y,_t-Ve[tt-1].x,Ye-Ve[tt-1].y],We[We.length-1].deltas.push(Ne);break;case"arc":We.push({deltas:[],abs:[],arc:!0}),Array.isArray(We[We.length-1].abs)&&We[We.length-1].abs.push(Qe)}}Me=ue?null:te==="stroke"?"stroke":"fill";for(var $r=!1,Cr=0;Cr<We.length;Cr++)if(We[Cr].arc)for(var Zt=We[Cr].abs,Be=0;Be<Zt.length;Be++){var it=Zt[Be];it.type==="arc"?J.call(this,it.x,it.y,it.radius,it.startAngle,it.endAngle,it.counterclockwise,void 0,ue,!$r):fe.call(this,it.x,it.y),$r=!0}else if(We[Cr].close===!0)this.pdf.internal.out("h"),$r=!1;else if(We[Cr].begin!==!0){var at=We[Cr].start.x,Tt=We[Cr].start.y;ye.call(this,We[Cr].deltas,at,Tt),$r=!0}Me&&Se.call(this,Me),ue&&_e.call(this)}},ge=function(te){var ue=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ne=ue*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return te-Ne;case"top":return te+ue-Ne;case"hanging":return te+ue-2*Ne;case"middle":return te+ue/2-Ne;case"ideographic":return te;case"alphabetic":default:return te}},K=function(te){return te+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};S.prototype.createLinearGradient=function(){var te=function(){};return te.colorStops=[],te.addColorStop=function(ue,Ne){this.colorStops.push([ue,Ne])},te.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},te.isCanvasGradient=!0,te},S.prototype.createPattern=function(){return this.createLinearGradient()},S.prototype.createRadialGradient=function(){return this.createLinearGradient()};var J=function(te,ue,Ne,Me,We,Ve,tt,Qe,St){for(var Et=Q.call(this,Ne,Me,We,Ve),zt=0;zt<Et.length;zt++){var Lt=Et[zt];zt===0&&(St?re.call(this,Lt.x1+te,Lt.y1+ue):fe.call(this,Lt.x1+te,Lt.y1+ue)),Fe.call(this,te,ue,Lt.x2,Lt.y2,Lt.x3,Lt.y3,Lt.x4,Lt.y4)}Qe?_e.call(this):Se.call(this,tt)},Se=function(te){switch(te){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},_e=function(){this.pdf.clip(),this.pdf.discardPath()},re=function(te,ue){this.pdf.internal.out(r(te)+" "+i(ue)+" m")},ce=function(te){var ue;switch(te.align){case"right":case"end":ue="right";break;case"center":ue="center";break;case"left":case"start":default:ue="left"}var Ne=this.pdf.getTextDimensions(te.text),Me=ge.call(this,te.y),We=K.call(this,Me)-Ne.h,Ve=this.ctx.transform.applyToPoint(new a(te.x,Me)),tt=this.ctx.transform.decompose(),Qe=new g;Qe=(Qe=(Qe=Qe.multiply(tt.translate)).multiply(tt.skew)).multiply(tt.scale);for(var St,Et,zt,Lt=this.ctx.transform.applyToRectangle(new p(te.x,Me,Ne.w,Ne.h)),wr=Qe.applyToRectangle(new p(te.x,We,Ne.w,Ne.h)),_t=F.call(this,wr),Ye=[],$r=0;$r<_t.length;$r+=1)Ye.indexOf(_t[$r])===-1&&Ye.push(_t[$r]);if(z(Ye),this.autoPaging)for(var Cr=Ye[0],Zt=Ye[Ye.length-1],Be=Cr;Be<Zt+1;Be++){this.pdf.setPage(Be);var it=Be===1?this.posY+this.margin[0]:this.margin[0],at=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Tt=this.pdf.internal.pageSize.height-this.margin[2],kt=Tt-this.margin[0],Ot=this.pdf.internal.pageSize.width-this.margin[1],Qt=Ot-this.margin[3],zr=Be===1?0:at+(Be-2)*kt;if(this.ctx.clip_path.length!==0){var Hr=this.path;St=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=G(St,this.posX+this.margin[3],-1*zr+it),ie.call(this,"fill",!0),this.path=Hr}var Ur=G([JSON.parse(JSON.stringify(wr))],this.posX+this.margin[3],-zr+it+this.ctx.prevPageLastElemOffset)[0];te.scale>=.01&&(Et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Et*te.scale),zt=this.lineWidth,this.lineWidth=zt*te.scale);var nn=this.autoPaging!=="text";if(nn||Ur.y+Ur.h<=Tt){if(nn||Ur.y>=it&&Ur.x<=Ot){var _r=nn?te.text:this.pdf.splitTextToSize(te.text,te.maxWidth||Ot-Ur.x)[0],Ri=G([JSON.parse(JSON.stringify(Lt))],this.posX+this.margin[3],-zr+it+this.ctx.prevPageLastElemOffset)[0],_n=nn&&(Be>Cr||Be<Zt)&&R.call(this);_n&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],Qt,kt,null).clip().discardPath()),this.pdf.text(_r,Ri.x,Ri.y,{angle:te.angle,align:ue,renderingMode:te.renderingMode}),_n&&this.pdf.restoreGraphicsState()}}else Ur.y<Tt&&(this.ctx.prevPageLastElemOffset+=Tt-Ur.y);te.scale>=.01&&(this.pdf.setFontSize(Et),this.lineWidth=zt)}else te.scale>=.01&&(Et=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Et*te.scale),zt=this.lineWidth,this.lineWidth=zt*te.scale),this.pdf.text(te.text,Ve.x+this.posX,Ve.y+this.posY,{angle:te.angle,align:ue,renderingMode:te.renderingMode,maxWidth:te.maxWidth}),te.scale>=.01&&(this.pdf.setFontSize(Et),this.lineWidth=zt)},fe=function(te,ue,Ne,Me){Ne=Ne||0,Me=Me||0,this.pdf.internal.out(r(te+Ne)+" "+i(ue+Me)+" l")},ye=function(te,ue,Ne){return this.pdf.lines(te,ue,Ne,null,null)},Fe=function(te,ue,Ne,Me,We,Ve,tt,Qe){this.pdf.internal.out([t(o(Ne+te)),t(l(Me+ue)),t(o(We+te)),t(l(Ve+ue)),t(o(tt+te)),t(l(Qe+ue)),"c"].join(" "))},Q=function(te,ue,Ne,Me){for(var We=2*Math.PI,Ve=Math.PI/2;ue>Ne;)ue-=We;var tt=Math.abs(Ne-ue);tt<We&&Me&&(tt=We-tt);for(var Qe=[],St=Me?-1:1,Et=ue;tt>1e-5;){var zt=Et+St*Math.min(tt,Ve);Qe.push(pe.call(this,te,Et,zt)),tt-=Math.abs(zt-Et),Et=zt}return Qe},pe=function(te,ue,Ne){var Me=(Ne-ue)/2,We=te*Math.cos(Me),Ve=te*Math.sin(Me),tt=We,Qe=-Ve,St=tt*tt+Qe*Qe,Et=St+tt*We+Qe*Ve,zt=4/3*(Math.sqrt(2*St*Et)-Et)/(tt*Ve-Qe*We),Lt=tt-zt*Qe,wr=Qe+zt*tt,_t=Lt,Ye=-wr,$r=Me+ue,Cr=Math.cos($r),Zt=Math.sin($r);return{x1:te*Math.cos(ue),y1:te*Math.sin(ue),x2:Lt*Cr-wr*Zt,y2:Lt*Zt+wr*Cr,x3:_t*Cr-Ye*Zt,y3:_t*Zt+Ye*Cr,x4:te*Math.cos(Ne),y4:te*Math.sin(Ne)}},me=function(te){return 180*te/Math.PI},Ue=function(te,ue,Ne,Me,We,Ve){var tt=te+.5*(Ne-te),Qe=ue+.5*(Me-ue),St=We+.5*(Ne-We),Et=Ve+.5*(Me-Ve),zt=Math.min(te,We,tt,St),Lt=Math.max(te,We,tt,St),wr=Math.min(ue,Ve,Qe,Et),_t=Math.max(ue,Ve,Qe,Et);return new p(zt,wr,Lt-zt,_t-wr)},Ke=function(te,ue,Ne,Me,We,Ve,tt,Qe){var St,Et,zt,Lt,wr,_t,Ye,$r,Cr,Zt,Be,it,at,Tt,kt=Ne-te,Ot=Me-ue,Qt=We-Ne,zr=Ve-Me,Hr=tt-We,Ur=Qe-Ve;for(Et=0;Et<41;Et++)Cr=(Ye=(zt=te+(St=Et/40)*kt)+St*((wr=Ne+St*Qt)-zt))+St*(wr+St*(We+St*Hr-wr)-Ye),Zt=($r=(Lt=ue+St*Ot)+St*((_t=Me+St*zr)-Lt))+St*(_t+St*(Ve+St*Ur-_t)-$r),Et==0?(Be=Cr,it=Zt,at=Cr,Tt=Zt):(Be=Math.min(Be,Cr),it=Math.min(it,Zt),at=Math.max(at,Cr),Tt=Math.max(Tt,Zt));return new p(Math.round(Be),Math.round(it),Math.round(at-Be),Math.round(Tt-it))},Re=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var te,ue,Ne=(te=this.ctx.lineDash,ue=this.ctx.lineDashOffset,JSON.stringify({lineDash:te,lineDashOffset:ue}));this.prevLineDash!==Ne&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ne)}}})(Bn.API),(function(n){var t=function(l){var a,p,g,w,j,S,T,E,O,R;for(p=[],g=0,w=(l+=a="\0\0\0\0".slice(l.length%4||4)).length;w>g;g+=4)(j=(l.charCodeAt(g)<<24)+(l.charCodeAt(g+1)<<16)+(l.charCodeAt(g+2)<<8)+l.charCodeAt(g+3))!==0?(S=(j=((j=((j=((j=(j-(R=j%85))/85)-(O=j%85))/85)-(E=j%85))/85)-(T=j%85))/85)%85,p.push(S+33,T+33,E+33,O+33,R+33)):p.push(122);return(function(F,B){for(var G=B;G>0;G--)F.pop()})(p,a.length),String.fromCharCode.apply(String,p)+"~>"},r=function(l){var a,p,g,w,j,S=String,T="length",E=255,O="charCodeAt",R="slice",F="replace";for(l[R](-2),l=l[R](0,-2)[F](/\s/g,"")[F]("z","!!!!!"),g=[],w=0,j=(l+=a="uuuuu"[R](l[T]%5||5))[T];j>w;w+=5)p=52200625*(l[O](w)-33)+614125*(l[O](w+1)-33)+7225*(l[O](w+2)-33)+85*(l[O](w+3)-33)+(l[O](w+4)-33),g.push(E&p>>24,E&p>>16,E&p>>8,E&p);return(function(B,G){for(var z=G;z>0;z--)B.pop()})(g,a[T]),S.fromCharCode.apply(S,g)},i=function(l){var a=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((l=l.replace(/\s/g,"")).indexOf(">")!==-1&&(l=l.substr(0,l.indexOf(">"))),l.length%2&&(l+="0"),a.test(l)===!1)return"";for(var p="",g=0;g<l.length;g+=2)p+=String.fromCharCode("0x"+(l[g]+l[g+1]));return p},o=function(l){for(var a=new Uint8Array(l.length),p=l.length;p--;)a[p]=l.charCodeAt(p);return l=(a=mw(a)).reduce((function(g,w){return g+String.fromCharCode(w)}),"")};n.processDataByFilters=function(l,a){var p=0,g=l||"",w=[];for(typeof(a=a||[])=="string"&&(a=[a]),p=0;p<a.length;p+=1)switch(a[p]){case"ASCII85Decode":case"/ASCII85Decode":g=r(g),w.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":g=t(g),w.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":g=i(g),w.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":g=g.split("").map((function(j){return("0"+j.charCodeAt().toString(16)).slice(-2)})).join("")+">",w.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":g=o(g),w.push("/FlateDecode");break;default:throw new Error('The filter: "'+a[p]+'" is not implemented')}return{data:g,reverseChain:w.reverse().join(" ")}}})(Bn.API),(function(n){n.loadFile=function(t,r,i){return(function(o,l,a){l=l!==!1,a=typeof a=="function"?a:function(){};var p=void 0;try{p=(function(g,w,j){var S=new XMLHttpRequest,T=0,E=function(O){var R=O.length,F=[],B=String.fromCharCode;for(T=0;T<R;T+=1)F.push(B(255&O.charCodeAt(T)));return F.join("")};if(S.open("GET",g,!w),S.overrideMimeType("text/plain; charset=x-user-defined"),w===!1&&(S.onload=function(){S.status===200?j(E(this.responseText)):j(void 0)}),S.send(null),w&&S.status===200)return E(S.responseText)})(o,l,a)}catch{}return p})(t,r,i)},n.loadImageFile=n.loadFile})(Bn.API),(function(n){function t(){return(qn.html2canvas?Promise.resolve(qn.html2canvas):_b(()=>import("./html2canvas.esm-QH1iLAAe.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load html2canvas: "+a))})).then((function(a){return a.default?a.default:a}))}function r(){return(qn.DOMPurify?Promise.resolve(qn.DOMPurify):_b(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch((function(a){return Promise.reject(new Error("Could not load dompurify: "+a))})).then((function(a){return a.default?a.default:a}))}var i=function(a){var p=Zs(a);return p==="undefined"?"undefined":p==="string"||a instanceof String?"string":p==="number"||a instanceof Number?"number":p==="function"||a instanceof Function?"function":a&&a.constructor===Array?"array":a&&a.nodeType===1?"element":p==="object"?"object":"unknown"},o=function(a,p){var g=document.createElement(a);for(var w in p.className&&(g.className=p.className),p.innerHTML&&p.dompurify&&(g.innerHTML=p.dompurify.sanitize(p.innerHTML)),p.style)g.style[w]=p.style[w];return g},l=function a(p){var g=Object.assign(a.convert(Promise.resolve()),JSON.parse(JSON.stringify(a.template))),w=a.convert(Promise.resolve(),g);return w=(w=w.setProgress(1,a,1,[a])).set(p)};(l.prototype=Object.create(Promise.prototype)).constructor=l,l.convert=function(a,p){return a.__proto__=p||l.prototype,a},l.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},l.prototype.from=function(a,p){return this.then((function(){switch(p=p||(function(g){switch(i(g)){case"string":return"string";case"element":return g.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}})(a)){case"string":return this.then(r).then((function(g){return this.set({src:o("div",{innerHTML:a,dompurify:g})})}));case"element":return this.set({src:a});case"canvas":return this.set({canvas:a});case"img":return this.set({img:a});default:return this.error("Unknown source type.")}}))},l.prototype.to=function(a){switch(a){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},l.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then((function(){var a={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},p=(function g(w,j){for(var S=w.nodeType===3?document.createTextNode(w.nodeValue):w.cloneNode(!1),T=w.firstChild;T;T=T.nextSibling)j!==!0&&T.nodeType===1&&T.nodeName==="SCRIPT"||S.appendChild(g(T,j));return w.nodeType===1&&(w.nodeName==="CANVAS"?(S.width=w.width,S.height=w.height,S.getContext("2d").drawImage(w,0,0)):w.nodeName!=="TEXTAREA"&&w.nodeName!=="SELECT"||(S.value=w.value),S.addEventListener("load",(function(){S.scrollTop=w.scrollTop,S.scrollLeft=w.scrollLeft}),!0)),S})(this.prop.src,this.opt.html2canvas.javascriptEnabled);p.tagName==="BODY"&&(a.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=o("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=o("div",{className:"html2pdf__container",style:a}),this.prop.container.appendChild(p),this.prop.container.firstChild.appendChild(o("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"}))},l.prototype.toCanvas=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then((function(p){var g=Object.assign({},this.opt.html2canvas);return delete g.onrendered,p(this.prop.container,g)})).then((function(p){(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)}))},l.prototype.toContext2d=function(){var a=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(a).then(t).then((function(p){var g=this.opt.jsPDF,w=this.opt.fontFaces,j=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,S=Object.assign({async:!0,allowTaint:!0,scale:j,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete S.onrendered,g.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,g.context2d.posX=this.opt.x,g.context2d.posY=this.opt.y,g.context2d.margin=this.opt.margin,g.context2d.fontFaces=w,w)for(var T=0;T<w.length;++T){var E=w[T],O=E.src.find((function(R){return R.format==="truetype"}));O&&g.addFont(O.url,E.ref.name,E.ref.style)}return S.windowHeight=S.windowHeight||0,S.windowHeight=S.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):S.windowHeight,g.context2d.save(!0),p(this.prop.container,S)})).then((function(p){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(p),this.prop.canvas=p,document.body.removeChild(this.prop.overlay)}))},l.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then((function(){var a=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=a}))},l.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then((function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF}))},l.prototype.output=function(a,p,g){return(g=g||"pdf").toLowerCase()==="img"||g.toLowerCase()==="image"?this.outputImg(a,p):this.outputPdf(a,p)},l.prototype.outputPdf=function(a,p){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){return this.prop.pdf.output(a,p)}))},l.prototype.outputImg=function(a){return this.thenList([function(){return this.prop.img||this.toImg()}]).then((function(){switch(a){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+a+'" is not supported.'}}))},l.prototype.save=function(a){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(a?{filename:a}:null).then((function(){this.prop.pdf.save(this.opt.filename)}))},l.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then((function(){this.prop.callback(this.prop.pdf)}))},l.prototype.set=function(a){if(i(a)!=="object")return this;var p=Object.keys(a||{}).map((function(g){if(g in l.template.prop)return function(){this.prop[g]=a[g]};switch(g){case"margin":return this.setMargin.bind(this,a.margin);case"jsPDF":return function(){return this.opt.jsPDF=a.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,a.pageSize);default:return function(){this.opt[g]=a[g]}}}),this);return this.then((function(){return this.thenList(p)}))},l.prototype.get=function(a,p){return this.then((function(){var g=a in l.template.prop?this.prop[a]:this.opt[a];return p?p(g):g}))},l.prototype.setMargin=function(a){return this.then((function(){switch(i(a)){case"number":a=[a,a,a,a];case"array":if(a.length===2&&(a=[a[0],a[1],a[0],a[1]]),a.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=a})).then(this.setPageSize)},l.prototype.setPageSize=function(a){function p(g,w){return Math.floor(g*w/72*96)}return this.then((function(){(a=a||Bn.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(a.inner={width:a.width-this.opt.margin[1]-this.opt.margin[3],height:a.height-this.opt.margin[0]-this.opt.margin[2]},a.inner.px={width:p(a.inner.width,a.k),height:p(a.inner.height,a.k)},a.inner.ratio=a.inner.height/a.inner.width),this.prop.pageSize=a}))},l.prototype.setProgress=function(a,p,g,w){return a!=null&&(this.progress.val=a),p!=null&&(this.progress.state=p),g!=null&&(this.progress.n=g),w!=null&&(this.progress.stack=w),this.progress.ratio=this.progress.val/this.progress.state,this},l.prototype.updateProgress=function(a,p,g,w){return this.setProgress(a?this.progress.val+a:null,p||null,g?this.progress.n+g:null,w?this.progress.stack.concat(w):null)},l.prototype.then=function(a,p){var g=this;return this.thenCore(a,p,(function(w,j){return g.updateProgress(null,null,1,[w]),Promise.prototype.then.call(this,(function(S){return g.updateProgress(null,w),S})).then(w,j).then((function(S){return g.updateProgress(1),S}))}))},l.prototype.thenCore=function(a,p,g){g=g||Promise.prototype.then,a&&(a=a.bind(this)),p&&(p=p.bind(this));var w=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:l.convert(Object.assign({},this),Promise.prototype),j=g.call(w,a,p);return l.convert(j,this.__proto__)},l.prototype.thenExternal=function(a,p){return Promise.prototype.then.call(this,a,p)},l.prototype.thenList=function(a){var p=this;return a.forEach((function(g){p=p.thenCore(g)})),p},l.prototype.catch=function(a){a&&(a=a.bind(this));var p=Promise.prototype.catch.call(this,a);return l.convert(p,this)},l.prototype.catchExternal=function(a){return Promise.prototype.catch.call(this,a)},l.prototype.error=function(a){return this.then((function(){throw new Error(a)}))},l.prototype.using=l.prototype.set,l.prototype.saveAs=l.prototype.save,l.prototype.export=l.prototype.output,l.prototype.run=l.prototype.then,Bn.getPageSize=function(a,p,g){if(Zs(a)==="object"){var w=a;a=w.orientation,p=w.unit||p,g=w.format||g}p=p||"mm",g=g||"a4",a=(""+(a||"P")).toLowerCase();var j,S=(""+g).toLowerCase(),T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(p){case"pt":j=1;break;case"mm":j=72/25.4;break;case"cm":j=72/2.54;break;case"in":j=72;break;case"px":j=.75;break;case"pc":case"em":j=12;break;case"ex":j=6;break;default:throw"Invalid unit: "+p}var E,O=0,R=0;if(T.hasOwnProperty(S))O=T[S][1]/j,R=T[S][0]/j;else try{O=g[1],R=g[0]}catch{throw new Error("Invalid format: "+g)}if(a==="p"||a==="portrait")a="p",R>O&&(E=R,R=O,O=E);else{if(a!=="l"&&a!=="landscape")throw"Invalid orientation: "+a;a="l",O>R&&(E=R,R=O,O=E)}return{width:R,height:O,unit:p,k:j,orientation:a}},n.html=function(a,p){(p=p||{}).callback=p.callback||function(){},p.html2canvas=p.html2canvas||{},p.html2canvas.canvas=p.html2canvas.canvas||this.canvas,p.jsPDF=p.jsPDF||this,p.fontFaces=p.fontFaces?p.fontFaces.map(_w):null;var g=new l(p);return p.worker?g:g.from(a).doCallback()}})(Bn.API),Bn.API.addJS=function(n){return $S=n,this.internal.events.subscribe("postPutResources",(function(){D1=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(D1+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),VS=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+$S+")"),this.internal.out(">>"),this.internal.out("endobj")})),this.internal.events.subscribe("putCatalog",(function(){D1!==void 0&&VS!==void 0&&this.internal.out("/Names <</JavaScript "+D1+" 0 R>>")})),this},(function(n){var t;n.events.push(["postPutResources",function(){var r=this,i=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var o=r.outline.render().split(/\r\n/),l=0;l<o.length;l++){var a=o[l],p=i.exec(a);if(p!=null){var g=p[1];r.internal.newObjectDeferredBegin(g,!1)}r.internal.write(a)}if(this.outline.createNamedDestinations){var w=this.internal.pages.length,j=[];for(l=0;l<w;l++){var S=r.internal.newObject();j.push(S);var T=r.internal.getPageInfo(l+1);r.internal.write("<< /D["+T.objId+" 0 R /XYZ null null null]>> endobj")}var E=r.internal.newObject();for(r.internal.write("<< /Names [ "),l=0;l<j.length;l++)r.internal.write("(page_"+(l+1)+")"+j[l]+" 0 R");r.internal.write(" ] >>","endobj"),t=r.internal.newObject(),r.internal.write("<< /Dests "+E+" 0 R"),r.internal.write(">>","endobj")}}]),n.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),n.events.push(["initialized",function(){var r=this;r.outline={createNamedDestinations:!1,root:{children:[]}},r.outline.add=function(i,o,l){var a={title:o,options:l,children:[]};return i==null&&(i=this.root),i.children.push(a),a},r.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=r,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},r.outline.genIds_r=function(i){i.id=r.internal.newObjectDeferred();for(var o=0;o<i.children.length;o++)this.genIds_r(i.children[o])},r.outline.renderRoot=function(i){this.objStart(i),this.line("/Type /Outlines"),i.children.length>0&&(this.line("/First "+this.makeRef(i.children[0])),this.line("/Last "+this.makeRef(i.children[i.children.length-1]))),this.line("/Count "+this.count_r({count:0},i)),this.objEnd()},r.outline.renderItems=function(i){for(var o=this.ctx.pdf.internal.getVerticalCoordinateString,l=0;l<i.children.length;l++){var a=i.children[l];this.objStart(a),this.line("/Title "+this.makeString(a.title)),this.line("/Parent "+this.makeRef(i)),l>0&&this.line("/Prev "+this.makeRef(i.children[l-1])),l<i.children.length-1&&this.line("/Next "+this.makeRef(i.children[l+1])),a.children.length>0&&(this.line("/First "+this.makeRef(a.children[0])),this.line("/Last "+this.makeRef(a.children[a.children.length-1])));var p=this.count=this.count_r({count:0},a);if(p>0&&this.line("/Count "+p),a.options&&a.options.pageNumber){var g=r.internal.getPageInfo(a.options.pageNumber);this.line("/Dest ["+g.objId+" 0 R /XYZ 0 "+o(0)+" 0]")}this.objEnd()}for(var w=0;w<i.children.length;w++)this.renderItems(i.children[w])},r.outline.line=function(i){this.ctx.val+=i+`\r
`},r.outline.makeRef=function(i){return i.id+" 0 R"},r.outline.makeString=function(i){return"("+r.internal.pdfEscape(i)+")"},r.outline.objStart=function(i){this.ctx.val+=`\r
`+i.id+` 0 obj\r
<<\r
`},r.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},r.outline.count_r=function(i,o){for(var l=0;l<o.children.length;l++)i.count++,this.count_r(i,o.children[l]);return i.count}}])})(Bn.API),(function(n){var t=[192,193,194,195,196,197,198,199];n.processJPEG=function(r,i,o,l,a,p){var g,w=this.decode.DCT_DECODE,j=null;if(typeof r=="string"||this.__addimage__.isArrayBuffer(r)||this.__addimage__.isArrayBufferView(r)){switch(r=a||r,r=this.__addimage__.isArrayBuffer(r)?new Uint8Array(r):r,(g=(function(S){for(var T,E=256*S.charCodeAt(4)+S.charCodeAt(5),O=S.length,R={width:0,height:0,numcomponents:1},F=4;F<O;F+=2){if(F+=E,t.indexOf(S.charCodeAt(F+1))!==-1){T=256*S.charCodeAt(F+5)+S.charCodeAt(F+6),R={width:256*S.charCodeAt(F+7)+S.charCodeAt(F+8),height:T,numcomponents:S.charCodeAt(F+9)};break}E=256*S.charCodeAt(F+2)+S.charCodeAt(F+3)}return R})(r=this.__addimage__.isArrayBufferView(r)?this.__addimage__.arrayBufferToBinaryString(r):r)).numcomponents){case 1:p=this.color_spaces.DEVICE_GRAY;break;case 4:p=this.color_spaces.DEVICE_CMYK;break;case 3:p=this.color_spaces.DEVICE_RGB}j={data:r,width:g.width,height:g.height,colorSpace:p,bitsPerComponent:8,filter:w,index:i,alias:o}}return j}})(Bn.API);var kv,O1,HS,GS,WS,MH=(function(){var n,t,r;function i(l){var a,p,g,w,j,S,T,E,O,R,F,B,G,z;for(this.data=l,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},S=null;;){switch(a=this.readUInt32(),O=(function(){var ee,ie;for(ie=[],ee=0;ee<4;++ee)ie.push(String.fromCharCode(this.data[this.pos++]));return ie}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(a);break;case"fcTL":S&&this.animation.frames.push(S),this.pos+=4,S={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},j=this.readUInt16(),w=this.readUInt16()||100,S.delay=1e3*j/w,S.disposeOp=this.data[this.pos++],S.blendOp=this.data[this.pos++],S.data=[];break;case"IDAT":case"fdAT":for(O==="fdAT"&&(this.pos+=4,a-=4),l=(S!=null?S.data:void 0)||this.imgData,B=0;0<=a?B<a:B>a;0<=a?++B:--B)l.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(g=this.palette.length/3,this.transparency.indexed=this.read(a),this.transparency.indexed.length>g)throw new Error("More transparent colors than palette size");if((R=g-this.transparency.indexed.length)>0)for(G=0;0<=R?G<R:G>R;0<=R?++G:--G)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(a)[0];break;case 2:this.transparency.rgb=this.read(a)}break;case"tEXt":T=(F=this.read(a)).indexOf(0),E=String.fromCharCode.apply(String,F.slice(0,T)),this.text[E]=String.fromCharCode.apply(String,F.slice(T+1));break;case"IEND":return S&&this.animation.frames.push(S),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(z=this.colorType)===4||z===6,p=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*p,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=a}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}i.prototype.read=function(l){var a,p;for(p=[],a=0;0<=l?a<l:a>l;0<=l?++a:--a)p.push(this.data[this.pos++]);return p},i.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},i.prototype.decodePixels=function(l){var a=this.pixelBitlength/8,p=new Uint8Array(this.width*this.height*a),g=0,w=this;if(l==null&&(l=this.imgData),l.length===0)return new Uint8Array(0);function j(S,T,E,O){var R,F,B,G,z,ee,ie,ge,K,J,Se,_e,re,ce,fe,ye,Fe,Q,pe,me,Ue,Ke=Math.ceil((w.width-S)/E),Re=Math.ceil((w.height-T)/O),te=w.width==Ke&&w.height==Re;for(ce=a*Ke,_e=te?p:new Uint8Array(ce*Re),ee=l.length,re=0,F=0;re<Re&&g<ee;){switch(l[g++]){case 0:for(G=Fe=0;Fe<ce;G=Fe+=1)_e[F++]=l[g++];break;case 1:for(G=Q=0;Q<ce;G=Q+=1)R=l[g++],z=G<a?0:_e[F-a],_e[F++]=(R+z)%256;break;case 2:for(G=pe=0;pe<ce;G=pe+=1)R=l[g++],B=(G-G%a)/a,fe=re&&_e[(re-1)*ce+B*a+G%a],_e[F++]=(fe+R)%256;break;case 3:for(G=me=0;me<ce;G=me+=1)R=l[g++],B=(G-G%a)/a,z=G<a?0:_e[F-a],fe=re&&_e[(re-1)*ce+B*a+G%a],_e[F++]=(R+Math.floor((z+fe)/2))%256;break;case 4:for(G=Ue=0;Ue<ce;G=Ue+=1)R=l[g++],B=(G-G%a)/a,z=G<a?0:_e[F-a],re===0?fe=ye=0:(fe=_e[(re-1)*ce+B*a+G%a],ye=B&&_e[(re-1)*ce+(B-1)*a+G%a]),ie=z+fe-ye,ge=Math.abs(ie-z),J=Math.abs(ie-fe),Se=Math.abs(ie-ye),K=ge<=J&&ge<=Se?z:J<=Se?fe:ye,_e[F++]=(R+K)%256;break;default:throw new Error("Invalid filter algorithm: "+l[g-1])}if(!te){var ue=((T+re*O)*w.width+S)*a,Ne=re*ce;for(G=0;G<Ke;G+=1){for(var Me=0;Me<a;Me+=1)p[ue++]=_e[Ne++];ue+=(E-1)*a}}re++}}return l=fH(l),w.interlaceMethod==1?(j(0,0,8,8),j(4,0,8,8),j(0,4,4,8),j(2,0,4,4),j(0,2,2,4),j(1,0,2,2),j(0,1,1,2)):j(0,0,1,1),p},i.prototype.decodePalette=function(){var l,a,p,g,w,j,S,T,E;for(p=this.palette,j=this.transparency.indexed||[],w=new Uint8Array((j.length||0)+p.length),g=0,l=0,a=S=0,T=p.length;S<T;a=S+=3)w[g++]=p[a],w[g++]=p[a+1],w[g++]=p[a+2],w[g++]=(E=j[l++])!=null?E:255;return w},i.prototype.copyToImageData=function(l,a){var p,g,w,j,S,T,E,O,R,F,B;if(g=this.colors,R=null,p=this.hasAlphaChannel,this.palette.length&&(R=(B=this._decodedPalette)!=null?B:this._decodedPalette=this.decodePalette(),g=4,p=!0),O=(w=l.data||l).length,S=R||a,j=T=0,g===1)for(;j<O;)E=R?4*a[j/4]:T,F=S[E++],w[j++]=F,w[j++]=F,w[j++]=F,w[j++]=p?S[E++]:255,T=E;else for(;j<O;)E=R?4*a[j/4]:T,w[j++]=S[E++],w[j++]=S[E++],w[j++]=S[E++],w[j++]=p?S[E++]:255,T=E},i.prototype.decode=function(){var l;return l=new Uint8Array(this.width*this.height*4),this.copyToImageData(l,this.decodePixels()),l};var o=function(){if(Object.prototype.toString.call(qn)==="[object Window]"){try{t=qn.document.createElement("canvas"),r=t.getContext("2d")}catch{return!1}return!0}return!1};return o(),n=function(l){var a;if(o()===!0)return r.width=l.width,r.height=l.height,r.clearRect(0,0,l.width,l.height),r.putImageData(l,0,0),(a=new Image).src=t.toDataURL(),a;throw new Error("This method requires a Browser with Canvas-capability.")},i.prototype.decodeFrames=function(l){var a,p,g,w,j,S,T,E;if(this.animation){for(E=[],p=j=0,S=(T=this.animation.frames).length;j<S;p=++j)a=T[p],g=l.createImageData(a.width,a.height),w=this.decodePixels(new Uint8Array(a.data)),this.copyToImageData(g,w),a.imageData=g,E.push(a.image=n(g));return E}},i.prototype.renderFrame=function(l,a){var p,g,w;return p=(g=this.animation.frames)[a],w=g[a-1],a===0&&l.clearRect(0,0,this.width,this.height),(w!=null?w.disposeOp:void 0)===1?l.clearRect(w.xOffset,w.yOffset,w.width,w.height):(w!=null?w.disposeOp:void 0)===2&&l.putImageData(w.imageData,w.xOffset,w.yOffset),p.blendOp===0&&l.clearRect(p.xOffset,p.yOffset,p.width,p.height),l.drawImage(p.image,p.xOffset,p.yOffset)},i.prototype.animate=function(l){var a,p,g,w,j,S,T=this;return p=0,S=this.animation,w=S.numFrames,g=S.frames,j=S.numPlays,(a=function(){var E,O;if(E=p++%w,O=g[E],T.renderFrame(l,E),w>1&&p/w<j)return T.animation._timeout=setTimeout(a,O.delay)})()},i.prototype.stopAnimation=function(){var l;return clearTimeout((l=this.animation)!=null?l._timeout:void 0)},i.prototype.render=function(l){var a,p;return l._png&&l._png.stopAnimation(),l._png=this,l.width=this.width,l.height=this.height,a=l.getContext("2d"),this.animation?(this.decodeFrames(a),this.animate(a)):(p=a.createImageData(this.width,this.height),this.copyToImageData(p,this.decodePixels()),a.putImageData(p,0,0))},i})();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function DH(n){var t=0;if(n[t++]!==71||n[t++]!==73||n[t++]!==70||n[t++]!==56||(n[t++]+1&253)!=56||n[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var r=n[t++]|n[t++]<<8,i=n[t++]|n[t++]<<8,o=n[t++],l=o>>7,a=1<<(7&o)+1;n[t++],n[t++];var p=null,g=null;l&&(p=t,g=a,t+=3*a);var w=!0,j=[],S=0,T=null,E=0,O=null;for(this.width=r,this.height=i;w&&t<n.length;)switch(n[t++]){case 33:switch(n[t++]){case 255:if(n[t]!==11||n[t+1]==78&&n[t+2]==69&&n[t+3]==84&&n[t+4]==83&&n[t+5]==67&&n[t+6]==65&&n[t+7]==80&&n[t+8]==69&&n[t+9]==50&&n[t+10]==46&&n[t+11]==48&&n[t+12]==3&&n[t+13]==1&&n[t+16]==0)t+=14,O=n[t++]|n[t++]<<8,t++;else for(t+=12;;){if(!((re=n[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;case 249:if(n[t++]!==4||n[t+4]!==0)throw new Error("Invalid graphics extension block.");var R=n[t++];S=n[t++]|n[t++]<<8,T=n[t++],(1&R)==0&&(T=null),E=R>>2&7,t++;break;case 254:for(;;){if(!((re=n[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}break;default:throw new Error("Unknown graphic control label: 0x"+n[t-1].toString(16))}break;case 44:var F=n[t++]|n[t++]<<8,B=n[t++]|n[t++]<<8,G=n[t++]|n[t++]<<8,z=n[t++]|n[t++]<<8,ee=n[t++],ie=ee>>6&1,ge=1<<(7&ee)+1,K=p,J=g,Se=!1;ee>>7&&(Se=!0,K=t,J=ge,t+=3*ge);var _e=t;for(t++;;){var re;if(!((re=n[t++])>=0))throw Error("Invalid block size");if(re===0)break;t+=re}j.push({x:F,y:B,width:G,height:z,has_local_palette:Se,palette_offset:K,palette_size:J,data_offset:_e,data_length:t-_e,transparent_index:T,interlaced:!!ie,delay:S,disposal:E});break;case 59:w=!1;break;default:throw new Error("Unknown gif block: 0x"+n[t-1].toString(16))}this.numFrames=function(){return j.length},this.loopCount=function(){return O},this.frameInfo=function(ce){if(ce<0||ce>=j.length)throw new Error("Frame index out of range.");return j[ce]},this.decodeAndBlitFrameBGRA=function(ce,fe){var ye=this.frameInfo(ce),Fe=ye.width*ye.height,Q=new Uint8Array(Fe);YS(n,ye.data_offset,Q,Fe);var pe=ye.palette_offset,me=ye.transparent_index;me===null&&(me=256);var Ue=ye.width,Ke=r-Ue,Re=Ue,te=4*(ye.y*r+ye.x),ue=4*((ye.y+ye.height)*r+ye.x),Ne=te,Me=4*Ke;ye.interlaced===!0&&(Me+=4*r*7);for(var We=8,Ve=0,tt=Q.length;Ve<tt;++Ve){var Qe=Q[Ve];if(Re===0&&(Re=Ue,(Ne+=Me)>=ue&&(Me=4*Ke+4*r*(We-1),Ne=te+(Ue+Ke)*(We<<1),We>>=1)),Qe===me)Ne+=4;else{var St=n[pe+3*Qe],Et=n[pe+3*Qe+1],zt=n[pe+3*Qe+2];fe[Ne++]=zt,fe[Ne++]=Et,fe[Ne++]=St,fe[Ne++]=255}--Re}},this.decodeAndBlitFrameRGBA=function(ce,fe){var ye=this.frameInfo(ce),Fe=ye.width*ye.height,Q=new Uint8Array(Fe);YS(n,ye.data_offset,Q,Fe);var pe=ye.palette_offset,me=ye.transparent_index;me===null&&(me=256);var Ue=ye.width,Ke=r-Ue,Re=Ue,te=4*(ye.y*r+ye.x),ue=4*((ye.y+ye.height)*r+ye.x),Ne=te,Me=4*Ke;ye.interlaced===!0&&(Me+=4*r*7);for(var We=8,Ve=0,tt=Q.length;Ve<tt;++Ve){var Qe=Q[Ve];if(Re===0&&(Re=Ue,(Ne+=Me)>=ue&&(Me=4*Ke+4*r*(We-1),Ne=te+(Ue+Ke)*(We<<1),We>>=1)),Qe===me)Ne+=4;else{var St=n[pe+3*Qe],Et=n[pe+3*Qe+1],zt=n[pe+3*Qe+2];fe[Ne++]=St,fe[Ne++]=Et,fe[Ne++]=zt,fe[Ne++]=255}--Re}}}function YS(n,t,r,i){for(var o=n[t++],l=1<<o,a=l+1,p=a+1,g=o+1,w=(1<<g)-1,j=0,S=0,T=0,E=n[t++],O=new Int32Array(4096),R=null;;){for(;j<16&&E!==0;)S|=n[t++]<<j,j+=8,E===1?E=n[t++]:--E;if(j<g)break;var F=S&w;if(S>>=g,j-=g,F!==l){if(F===a)break;for(var B=F<p?F:R,G=0,z=B;z>l;)z=O[z]>>8,++G;var ee=z;if(T+G+(B!==F?1:0)>i)return void ga.log("Warning, gif stream longer than expected.");r[T++]=ee;var ie=T+=G;for(B!==F&&(r[T++]=ee),z=B;G--;)z=O[z],r[--ie]=255&z,z>>=8;R!==null&&p<4096&&(O[p++]=R<<8|ee,p>=w+1&&g<12&&(++g,w=w<<1|1)),R=F}else p=a+1,w=(1<<(g=o+1))-1,R=null}return T!==i&&ga.log("Warning, gif stream shorter than expected."),r}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function N2(n){var t,r,i,o,l,a=Math.floor,p=new Array(64),g=new Array(64),w=new Array(64),j=new Array(64),S=new Array(65535),T=new Array(65535),E=new Array(64),O=new Array(64),R=[],F=0,B=7,G=new Array(64),z=new Array(64),ee=new Array(64),ie=new Array(256),ge=new Array(2048),K=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],J=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],Se=[0,1,2,3,4,5,6,7,8,9,10,11],_e=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],re=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],ce=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],fe=[0,1,2,3,4,5,6,7,8,9,10,11],ye=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Fe=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Q(te,ue){for(var Ne=0,Me=0,We=new Array,Ve=1;Ve<=16;Ve++){for(var tt=1;tt<=te[Ve];tt++)We[ue[Me]]=[],We[ue[Me]][0]=Ne,We[ue[Me]][1]=Ve,Me++,Ne++;Ne*=2}return We}function pe(te){for(var ue=te[0],Ne=te[1]-1;Ne>=0;)ue&1<<Ne&&(F|=1<<B),Ne--,--B<0&&(F==255?(me(255),me(0)):me(F),B=7,F=0)}function me(te){R.push(te)}function Ue(te){me(te>>8&255),me(255&te)}function Ke(te,ue,Ne,Me,We){for(var Ve,tt=We[0],Qe=We[240],St=(function(Zt,Be){var it,at,Tt,kt,Ot,Qt,zr,Hr,Ur,nn,_r=0;for(Ur=0;Ur<8;++Ur){it=Zt[_r],at=Zt[_r+1],Tt=Zt[_r+2],kt=Zt[_r+3],Ot=Zt[_r+4],Qt=Zt[_r+5],zr=Zt[_r+6];var Ri=it+(Hr=Zt[_r+7]),_n=it-Hr,fi=at+zr,kn=at-zr,yn=Tt+Qt,va=Tt-Qt,zn=kt+Ot,Sa=kt-Ot,wi=Ri+zn,Cs=Ri-zn,zs=fi+yn,pi=fi-yn;Zt[_r]=wi+zs,Zt[_r+4]=wi-zs;var xr=.707106781*(pi+Cs);Zt[_r+2]=Cs+xr,Zt[_r+6]=Cs-xr;var Lr=.382683433*((wi=Sa+va)-(pi=kn+_n)),oe=.5411961*wi+Lr,xe=1.306562965*pi+Lr,Ce=.707106781*(zs=va+kn),Te=_n+Ce,De=_n-Ce;Zt[_r+5]=De+oe,Zt[_r+3]=De-oe,Zt[_r+1]=Te+xe,Zt[_r+7]=Te-xe,_r+=8}for(_r=0,Ur=0;Ur<8;++Ur){it=Zt[_r],at=Zt[_r+8],Tt=Zt[_r+16],kt=Zt[_r+24],Ot=Zt[_r+32],Qt=Zt[_r+40],zr=Zt[_r+48];var et=it+(Hr=Zt[_r+56]),nt=it-Hr,ke=at+zr,qe=at-zr,ht=Tt+Qt,qt=Tt-Qt,Xt=kt+Ot,bt=kt-Ot,Mt=et+Xt,dr=et-Xt,mr=ke+ht,jt=ke-ht;Zt[_r]=Mt+mr,Zt[_r+32]=Mt-mr;var gr=.707106781*(jt+dr);Zt[_r+16]=dr+gr,Zt[_r+48]=dr-gr;var or=.382683433*((Mt=bt+qt)-(jt=qe+nt)),fr=.5411961*Mt+or,an=1.306562965*jt+or,yr=.707106781*(mr=qt+qe),xn=nt+yr,$n=nt-yr;Zt[_r+40]=$n+fr,Zt[_r+24]=$n-fr,Zt[_r+8]=xn+an,Zt[_r+56]=xn-an,_r++}for(Ur=0;Ur<64;++Ur)nn=Zt[Ur]*Be[Ur],E[Ur]=nn>0?nn+.5|0:nn-.5|0;return E})(te,ue),Et=0;Et<64;++Et)O[K[Et]]=St[Et];var zt=O[0]-Ne;Ne=O[0],zt==0?pe(Me[0]):(pe(Me[T[Ve=32767+zt]]),pe(S[Ve]));for(var Lt=63;Lt>0&&O[Lt]==0;)Lt--;if(Lt==0)return pe(tt),Ne;for(var wr,_t=1;_t<=Lt;){for(var Ye=_t;O[_t]==0&&_t<=Lt;)++_t;var $r=_t-Ye;if($r>=16){wr=$r>>4;for(var Cr=1;Cr<=wr;++Cr)pe(Qe);$r&=15}Ve=32767+O[_t],pe(We[($r<<4)+T[Ve]]),pe(S[Ve]),_t++}return Lt!=63&&pe(tt),Ne}function Re(te){te=Math.min(Math.max(te,1),100),l!=te&&((function(ue){for(var Ne=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],Me=0;Me<64;Me++){var We=a((Ne[Me]*ue+50)/100);We=Math.min(Math.max(We,1),255),p[K[Me]]=We}for(var Ve=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],tt=0;tt<64;tt++){var Qe=a((Ve[tt]*ue+50)/100);Qe=Math.min(Math.max(Qe,1),255),g[K[tt]]=Qe}for(var St=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Et=0,zt=0;zt<8;zt++)for(var Lt=0;Lt<8;Lt++)w[Et]=1/(p[K[Et]]*St[zt]*St[Lt]*8),j[Et]=1/(g[K[Et]]*St[zt]*St[Lt]*8),Et++})(te<50?Math.floor(5e3/te):Math.floor(200-2*te)),l=te)}this.encode=function(te,ue){ue&&Re(ue),R=new Array,F=0,B=7,Ue(65496),Ue(65504),Ue(16),me(74),me(70),me(73),me(70),me(0),me(1),me(1),me(0),Ue(1),Ue(1),me(0),me(0),(function(){Ue(65499),Ue(132),me(0);for(var at=0;at<64;at++)me(p[at]);me(1);for(var Tt=0;Tt<64;Tt++)me(g[Tt])})(),(function(at,Tt){Ue(65472),Ue(17),me(8),Ue(Tt),Ue(at),me(3),me(1),me(17),me(0),me(2),me(17),me(1),me(3),me(17),me(1)})(te.width,te.height),(function(){Ue(65476),Ue(418),me(0);for(var at=0;at<16;at++)me(J[at+1]);for(var Tt=0;Tt<=11;Tt++)me(Se[Tt]);me(16);for(var kt=0;kt<16;kt++)me(_e[kt+1]);for(var Ot=0;Ot<=161;Ot++)me(re[Ot]);me(1);for(var Qt=0;Qt<16;Qt++)me(ce[Qt+1]);for(var zr=0;zr<=11;zr++)me(fe[zr]);me(17);for(var Hr=0;Hr<16;Hr++)me(ye[Hr+1]);for(var Ur=0;Ur<=161;Ur++)me(Fe[Ur])})(),Ue(65498),Ue(12),me(3),me(1),me(0),me(2),me(17),me(3),me(17),me(0),me(63),me(0);var Ne=0,Me=0,We=0;F=0,B=7,this.encode.displayName="_encode_";for(var Ve,tt,Qe,St,Et,zt,Lt,wr,_t,Ye=te.data,$r=te.width,Cr=te.height,Zt=4*$r,Be=0;Be<Cr;){for(Ve=0;Ve<Zt;){for(Et=Zt*Be+Ve,Lt=-1,wr=0,_t=0;_t<64;_t++)zt=Et+(wr=_t>>3)*Zt+(Lt=4*(7&_t)),Be+wr>=Cr&&(zt-=Zt*(Be+1+wr-Cr)),Ve+Lt>=Zt&&(zt-=Ve+Lt-Zt+4),tt=Ye[zt++],Qe=Ye[zt++],St=Ye[zt++],G[_t]=(ge[tt]+ge[Qe+256>>0]+ge[St+512>>0]>>16)-128,z[_t]=(ge[tt+768>>0]+ge[Qe+1024>>0]+ge[St+1280>>0]>>16)-128,ee[_t]=(ge[tt+1280>>0]+ge[Qe+1536>>0]+ge[St+1792>>0]>>16)-128;Ne=Ke(G,w,Ne,t,i),Me=Ke(z,j,Me,r,o),We=Ke(ee,j,We,r,o),Ve+=32}Be+=8}if(B>=0){var it=[];it[1]=B+1,it[0]=(1<<B+1)-1,pe(it)}return Ue(65497),new Uint8Array(R)},n=n||50,(function(){for(var te=String.fromCharCode,ue=0;ue<256;ue++)ie[ue]=te(ue)})(),t=Q(J,Se),r=Q(ce,fe),i=Q(_e,re),o=Q(ye,Fe),(function(){for(var te=1,ue=2,Ne=1;Ne<=15;Ne++){for(var Me=te;Me<ue;Me++)T[32767+Me]=Ne,S[32767+Me]=[],S[32767+Me][1]=Ne,S[32767+Me][0]=Me;for(var We=-(ue-1);We<=-te;We++)T[32767+We]=Ne,S[32767+We]=[],S[32767+We][1]=Ne,S[32767+We][0]=ue-1+We;te<<=1,ue<<=1}})(),(function(){for(var te=0;te<256;te++)ge[te]=19595*te,ge[te+256>>0]=38470*te,ge[te+512>>0]=7471*te+32768,ge[te+768>>0]=-11059*te,ge[te+1024>>0]=-21709*te,ge[te+1280>>0]=32768*te+8421375,ge[te+1536>>0]=-27439*te,ge[te+1792>>0]=-5329*te})(),Re(n)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function Nh(n,t){if(this.pos=0,this.buffer=n,this.datav=new DataView(n.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function ZS(n){function t(J){if(!J)throw Error("assert :P")}function r(J,Se,_e){for(var re=0;4>re;re++)if(J[Se+re]!=_e.charCodeAt(re))return!0;return!1}function i(J,Se,_e,re,ce){for(var fe=0;fe<ce;fe++)J[Se+fe]=_e[re+fe]}function o(J,Se,_e,re){for(var ce=0;ce<re;ce++)J[Se+ce]=_e}function l(J){return new Int32Array(J)}function a(J,Se){for(var _e=[],re=0;re<J;re++)_e.push(new Se);return _e}function p(J,Se){var _e=[];return(function re(ce,fe,ye){for(var Fe=ye[fe],Q=0;Q<Fe&&(ce.push(ye.length>fe+1?[]:new Se),!(ye.length<fe+1));Q++)re(ce[Q],fe+1,ye)})(_e,0,J),_e}var g=function(){var J=this;function Se(d,y){for(var N=1<<y-1>>>0;d&N;)N>>>=1;return N?(d&N-1)+N:d}function _e(d,y,N,k,I){t(!(k%N));do d[y+(k-=N)]=I;while(0<k)}function re(d,y,N,k,I){if(t(2328>=I),512>=I)var U=l(512);else if((U=l(I))==null)return 0;return(function($,W,Y,X,le,ve){var je,de,Pe=W,Ie=1<<Y,Ae=l(16),Le=l(16);for(t(le!=0),t(X!=null),t($!=null),t(0<Y),de=0;de<le;++de){if(15<X[de])return 0;++Ae[X[de]]}if(Ae[0]==le)return 0;for(Le[1]=0,je=1;15>je;++je){if(Ae[je]>1<<je)return 0;Le[je+1]=Le[je]+Ae[je]}for(de=0;de<le;++de)je=X[de],0<X[de]&&(ve[Le[je]++]=de);if(Le[15]==1)return(X=new ce).g=0,X.value=ve[0],_e($,Pe,1,Ie,X),Ie;var Ge,Xe=-1,rt=Ie-1,yt=0,mt=1,Dt=1,Rt=1<<Y;for(de=0,je=1,le=2;je<=Y;++je,le<<=1){if(mt+=Dt<<=1,0>(Dt-=Ae[je]))return 0;for(;0<Ae[je];--Ae[je])(X=new ce).g=je,X.value=ve[de++],_e($,Pe+yt,le,Rt,X),yt=Se(yt,je)}for(je=Y+1,le=2;15>=je;++je,le<<=1){if(mt+=Dt<<=1,0>(Dt-=Ae[je]))return 0;for(;0<Ae[je];--Ae[je]){if(X=new ce,(yt&rt)!=Xe){for(Pe+=Rt,Ge=1<<(Xe=je)-Y;15>Xe&&!(0>=(Ge-=Ae[Xe]));)++Xe,Ge<<=1;Ie+=Rt=1<<(Ge=Xe-Y),$[W+(Xe=yt&rt)].g=Ge+Y,$[W+Xe].value=Pe-W-Xe}X.g=je-Y,X.value=ve[de++],_e($,Pe+(yt>>Y),le,Rt,X),yt=Se(yt,je)}}return mt!=2*Le[15]-1?0:Ie})(d,y,N,k,I,U)}function ce(){this.value=this.g=0}function fe(){this.value=this.g=0}function ye(){this.G=a(5,ce),this.H=l(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=a(Ta,fe)}function Fe(d,y,N,k){t(d!=null),t(y!=null),t(2147483648>k),d.Ca=254,d.I=0,d.b=-8,d.Ka=0,d.oa=y,d.pa=N,d.Jd=y,d.Yc=N+k,d.Zc=4<=k?N+k-4+1:N,Ve(d)}function Q(d,y){for(var N=0;0<y--;)N|=Qe(d,128)<<y;return N}function pe(d,y){var N=Q(d,y);return tt(d)?-N:N}function me(d,y,N,k){var I,U=0;for(t(d!=null),t(y!=null),t(4294967288>k),d.Sb=k,d.Ra=0,d.u=0,d.h=0,4<k&&(k=4),I=0;I<k;++I)U+=y[N+I]<<8*I;d.Ra=U,d.bb=k,d.oa=y,d.pa=N}function Ue(d){for(;8<=d.u&&d.bb<d.Sb;)d.Ra>>>=8,d.Ra+=d.oa[d.pa+d.bb]<<su-8>>>0,++d.bb,d.u-=8;Ne(d)&&(d.h=1,d.u=0)}function Ke(d,y){if(t(0<=y),!d.h&&y<=Ga){var N=ue(d)&$l[y];return d.u+=y,Ue(d),N}return d.h=1,d.u=0}function Re(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function te(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function ue(d){return d.Ra>>>(d.u&su-1)>>>0}function Ne(d){return t(d.bb<=d.Sb),d.h||d.bb==d.Sb&&d.u>su}function Me(d,y){d.u=y,d.h=Ne(d)}function We(d){d.u>=qu&&(t(d.u>=qu),Ue(d))}function Ve(d){t(d!=null&&d.oa!=null),d.pa<d.Zc?(d.I=(d.oa[d.pa++]|d.I<<8)>>>0,d.b+=8):(t(d!=null&&d.oa!=null),d.pa<d.Yc?(d.b+=8,d.I=d.oa[d.pa++]|d.I<<8):d.Ka?d.b=0:(d.I<<=8,d.b+=8,d.Ka=1))}function tt(d){return Q(d,1)}function Qe(d,y){var N=d.Ca;0>d.b&&Ve(d);var k=d.b,I=N*y>>>8,U=(d.I>>>k>I)+0;for(U?(N-=I,d.I-=I+1<<k>>>0):N=I+1,k=N,I=0;256<=k;)I+=8,k>>=8;return k=7^I+yo[k],d.b-=k,d.Ca=(N<<k)-1,U}function St(d,y,N){d[y+0]=N>>24&255,d[y+1]=N>>16&255,d[y+2]=N>>8&255,d[y+3]=N>>0&255}function Et(d,y){return d[y+0]<<0|d[y+1]<<8}function zt(d,y){return Et(d,y)|d[y+2]<<16}function Lt(d,y){return Et(d,y)|Et(d,y+2)<<16}function wr(d,y){var N=1<<y;return t(d!=null),t(0<y),d.X=l(N),d.X==null?0:(d.Mb=32-y,d.Xa=y,1)}function _t(d,y){t(d!=null),t(y!=null),t(d.Xa==y.Xa),i(y.X,0,d.X,0,1<<y.Xa)}function Ye(){this.X=[],this.Xa=this.Mb=0}function $r(d,y,N,k){t(N!=null),t(k!=null);var I=N[0],U=k[0];return I==0&&(I=(d*U+y/2)/y),U==0&&(U=(y*I+d/2)/d),0>=I||0>=U?0:(N[0]=I,k[0]=U,1)}function Cr(d,y){return d+(1<<y)-1>>>y}function Zt(d,y){return((4278255360&d)+(4278255360&y)>>>0&4278255360)+((16711935&d)+(16711935&y)>>>0&16711935)>>>0}function Be(d,y){J[y]=function(N,k,I,U,$,W,Y){var X;for(X=0;X<$;++X){var le=J[d](W[Y+X-1],I,U+X);W[Y+X]=Zt(N[k+X],le)}}}function it(){this.ud=this.hd=this.jd=0}function at(d,y){return((4278124286&(d^y))>>>1)+(d&y)>>>0}function Tt(d){return 0<=d&&256>d?d:0>d?0:255<d?255:void 0}function kt(d,y){return Tt(d+(d-y+.5>>1))}function Ot(d,y,N){return Math.abs(y-N)-Math.abs(d-N)}function Qt(d,y,N,k,I,U,$){for(k=U[$-1],N=0;N<I;++N)U[$+N]=k=Zt(d[y+N],k)}function zr(d,y,N,k,I){var U;for(U=0;U<N;++U){var $=d[y+U],W=$>>8&255,Y=16711935&(Y=(Y=16711935&$)+((W<<16)+W));k[I+U]=(4278255360&$)+Y>>>0}}function Hr(d,y){y.jd=d>>0&255,y.hd=d>>8&255,y.ud=d>>16&255}function Ur(d,y,N,k,I,U){var $;for($=0;$<k;++$){var W=y[N+$],Y=W>>>8,X=W,le=255&(le=(le=W>>>16)+((d.jd<<24>>24)*(Y<<24>>24)>>>5));X=255&(X=(X=X+((d.hd<<24>>24)*(Y<<24>>24)>>>5))+((d.ud<<24>>24)*(le<<24>>24)>>>5)),I[U+$]=(4278255360&W)+(le<<16)+X}}function nn(d,y,N,k,I){J[y]=function(U,$,W,Y,X,le,ve,je,de){for(Y=ve;Y<je;++Y)for(ve=0;ve<de;++ve)X[le++]=I(W[k(U[$++])])},J[d]=function(U,$,W,Y,X,le,ve){var je=8>>U.b,de=U.Ea,Pe=U.K[0],Ie=U.w;if(8>je)for(U=(1<<U.b)-1,Ie=(1<<je)-1;$<W;++$){var Ae,Le=0;for(Ae=0;Ae<de;++Ae)Ae&U||(Le=k(Y[X++])),le[ve++]=I(Pe[Le&Ie]),Le>>=je}else J["VP8LMapColor"+N](Y,X,Pe,Ie,le,ve,$,W,de)}}function _r(d,y,N,k,I){for(N=y+N;y<N;){var U=d[y++];k[I++]=U>>16&255,k[I++]=U>>8&255,k[I++]=U>>0&255}}function Ri(d,y,N,k,I){for(N=y+N;y<N;){var U=d[y++];k[I++]=U>>16&255,k[I++]=U>>8&255,k[I++]=U>>0&255,k[I++]=U>>24&255}}function _n(d,y,N,k,I){for(N=y+N;y<N;){var U=($=d[y++])>>16&240|$>>12&15,$=$>>0&240|$>>28&15;k[I++]=U,k[I++]=$}}function fi(d,y,N,k,I){for(N=y+N;y<N;){var U=($=d[y++])>>16&248|$>>13&7,$=$>>5&224|$>>3&31;k[I++]=U,k[I++]=$}}function kn(d,y,N,k,I){for(N=y+N;y<N;){var U=d[y++];k[I++]=U>>0&255,k[I++]=U>>8&255,k[I++]=U>>16&255}}function yn(d,y,N,k,I,U){if(U==0)for(N=y+N;y<N;)St(k,((U=d[y++])[0]>>24|U[1]>>8&65280|U[2]<<8&16711680|U[3]<<24)>>>0),I+=32;else i(k,I,d,y,N)}function va(d,y){J[y][0]=J[d+"0"],J[y][1]=J[d+"1"],J[y][2]=J[d+"2"],J[y][3]=J[d+"3"],J[y][4]=J[d+"4"],J[y][5]=J[d+"5"],J[y][6]=J[d+"6"],J[y][7]=J[d+"7"],J[y][8]=J[d+"8"],J[y][9]=J[d+"9"],J[y][10]=J[d+"10"],J[y][11]=J[d+"11"],J[y][12]=J[d+"12"],J[y][13]=J[d+"13"],J[y][14]=J[d+"0"],J[y][15]=J[d+"0"]}function zn(d){return d==Tl||d==ih||d==Rc||d==Ad}function Sa(){this.eb=[],this.size=this.A=this.fb=0}function wi(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function Cs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Sa,this.f.kb=new wi,this.sd=null}function zs(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function pi(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function xr(d){return alert("todo:WebPSamplerProcessPlane"),d.T}function Lr(d,y){var N=d.T,k=y.ba.f.RGBA,I=k.eb,U=k.fb+d.ka*k.A,$=Bs[y.ba.S],W=d.y,Y=d.O,X=d.f,le=d.N,ve=d.ea,je=d.W,de=y.cc,Pe=y.dc,Ie=y.Mc,Ae=y.Nc,Le=d.ka,Ge=d.ka+d.T,Xe=d.U,rt=Xe+1>>1;for(Le==0?$(W,Y,null,null,X,le,ve,je,X,le,ve,je,I,U,null,null,Xe):($(y.ec,y.fc,W,Y,de,Pe,Ie,Ae,X,le,ve,je,I,U-k.A,I,U,Xe),++N);Le+2<Ge;Le+=2)de=X,Pe=le,Ie=ve,Ae=je,le+=d.Rc,je+=d.Rc,U+=2*k.A,$(W,(Y+=2*d.fa)-d.fa,W,Y,de,Pe,Ie,Ae,X,le,ve,je,I,U-k.A,I,U,Xe);return Y+=d.fa,d.j+Ge<d.o?(i(y.ec,y.fc,W,Y,Xe),i(y.cc,y.dc,X,le,rt),i(y.Mc,y.Nc,ve,je,rt),N--):1&Ge||$(W,Y,null,null,X,le,ve,je,X,le,ve,je,I,U+k.A,null,null,Xe),N}function oe(d,y,N){var k=d.F,I=[d.J];if(k!=null){var U=d.U,$=y.ba.S,W=$==Eu||$==Rc;y=y.ba.f.RGBA;var Y=[0],X=d.ka;Y[0]=d.T,d.Kb&&(X==0?--Y[0]:(--X,I[0]-=d.width),d.j+d.ka+d.T==d.o&&(Y[0]=d.o-d.j-X));var le=y.eb;X=y.fb+X*y.A,d=zi(k,I[0],d.width,U,Y,le,X+(W?0:3),y.A),t(N==Y),d&&zn($)&&_i(le,X,W,U,Y,y.A)}return 0}function xe(d){var y=d.ma,N=y.ba.S,k=11>N,I=N==Ya||N==js||N==Eu||N==cu||N==12||zn(N);if(y.memory=null,y.Ib=null,y.Jb=null,y.Nd=null,!Vl(y.Oa,d,I?11:12))return 0;if(I&&zn(N)&&lr(),d.da)alert("todo:use_scaling");else{if(k){if(y.Ib=xr,d.Kb){if(N=d.U+1>>1,y.memory=l(d.U+2*N),y.memory==null)return 0;y.ec=y.memory,y.fc=0,y.cc=y.ec,y.dc=y.fc+d.U,y.Mc=y.cc,y.Nc=y.dc+N,y.Ib=Lr,lr()}}else alert("todo:EmitYUV");I&&(y.Jb=oe,k&&vt())}if(k&&!Oo){for(d=0;256>d;++d)Ms[d]=89858*(d-128)+Tu>>wo,Kl[d]=-22014*(d-128)+Tu,hu[d]=-45773*(d-128),Wu[d]=113618*(d-128)+Tu>>wo;for(d=Zl;d<ol;++d)y=76283*(d-16)+Tu>>wo,Cf[d-Zl]=Ko(y,255),ah[d-Zl]=Ko(y+8>>4,15);Oo=1}return 1}function Ce(d){var y=d.ma,N=d.U,k=d.T;return t(!(1&d.ka)),0>=N||0>=k?0:(N=y.Ib(d,y),y.Jb!=null&&y.Jb(d,y,N),y.Dc+=N,1)}function Te(d){d.ma.memory=null}function De(d,y,N,k){return Ke(d,8)!=47?0:(y[0]=Ke(d,14)+1,N[0]=Ke(d,14)+1,k[0]=Ke(d,1),Ke(d,3)!=0?0:!d.h)}function et(d,y){if(4>d)return d+1;var N=d-2>>1;return(2+(1&d)<<N)+Ke(y,N)+1}function nt(d,y){return 120<y?y-120:1<=(N=((N=Fs[y-1])>>4)*d+(8-(15&N)))?N:1;var N}function ke(d,y,N){var k=ue(N),I=d[y+=255&k].g-8;return 0<I&&(Me(N,N.u+8),k=ue(N),y+=d[y].value,y+=k&(1<<I)-1),Me(N,N.u+d[y].g),d[y].value}function qe(d,y,N){return N.g+=d.g,N.value+=d.value<<y>>>0,t(8>=N.g),d.g}function ht(d,y,N){var k=d.xc;return t((y=k==0?0:d.vc[d.md*(N>>k)+(y>>k)])<d.Wb),d.Ya[y]}function qt(d,y,N,k){var I=d.ab,U=d.c*y,$=d.C;y=$+y;var W=N,Y=k;for(k=d.Ta,N=d.Ua;0<I--;){var X=d.gc[I],le=$,ve=y,je=W,de=Y,Pe=(Y=k,W=N,X.Ea);switch(t(le<ve),t(ve<=X.nc),X.hc){case 2:Vu(je,de,(ve-le)*Pe,Y,W);break;case 0:var Ie=le,Ae=ve,Le=Y,Ge=W,Xe=(Rt=X).Ea;Ie==0&&(Tc(je,de,null,null,1,Le,Ge),Qt(je,de+1,0,0,Xe-1,Le,Ge+1),de+=Xe,Ge+=Xe,++Ie);for(var rt=1<<Rt.b,yt=rt-1,mt=Cr(Xe,Rt.b),Dt=Rt.K,Rt=Rt.w+(Ie>>Rt.b)*mt;Ie<Ae;){var vr=Dt,hr=Rt,Fr=1;for(au(je,de,Le,Ge-Xe,1,Le,Ge);Fr<Xe;){var Yt=(Fr&~yt)+rt;Yt>Xe&&(Yt=Xe),(0,el[vr[hr++]>>8&15])(je,de+ +Fr,Le,Ge+Fr-Xe,Yt-Fr,Le,Ge+Fr),Fr=Yt}de+=Xe,Ge+=Xe,++Ie&yt||(Rt+=mt)}ve!=X.nc&&i(Y,W-Pe,Y,W+(ve-le-1)*Pe,Pe);break;case 1:for(Pe=je,Ae=de,Xe=(je=X.Ea)-(Ge=je&~(Le=(de=1<<X.b)-1)),Ie=Cr(je,X.b),rt=X.K,X=X.w+(le>>X.b)*Ie;le<ve;){for(yt=rt,mt=X,Dt=new it,Rt=Ae+Ge,vr=Ae+je;Ae<Rt;)Hr(yt[mt++],Dt),lu(Dt,Pe,Ae,de,Y,W),Ae+=de,W+=de;Ae<vr&&(Hr(yt[mt++],Dt),lu(Dt,Pe,Ae,Xe,Y,W),Ae+=Xe,W+=Xe),++le&Le||(X+=Ie)}break;case 3:if(je==Y&&de==W&&0<X.b){for(Ae=Y,je=Pe=W+(ve-le)*Pe-(Ge=(ve-le)*Cr(X.Ea,X.b)),de=Y,Le=W,Ie=[],Ge=(Xe=Ge)-1;0<=Ge;--Ge)Ie[Ge]=de[Le+Ge];for(Ge=Xe-1;0<=Ge;--Ge)Ae[je+Ge]=Ie[Ge];Qo(X,le,ve,Y,Pe,Y,W)}else Qo(X,le,ve,je,de,Y,W)}W=k,Y=N}Y!=N&&i(k,N,W,Y,U)}function Xt(d,y){var N=d.V,k=d.Ba+d.c*d.C,I=y-d.C;if(t(y<=d.l.o),t(16>=I),0<I){var U=d.l,$=d.Ta,W=d.Ua,Y=U.width;if(qt(d,I,N,k),I=W=[W],t((N=d.C)<(k=y)),t(U.v<U.va),k>U.o&&(k=U.o),N<U.j){var X=U.j-N;N=U.j,I[0]+=X*Y}if(N>=k?N=0:(I[0]+=4*U.v,U.ka=N-U.j,U.U=U.va-U.v,U.T=k-N,N=1),N){if(W=W[0],11>(N=d.ca).S){var le=N.f.RGBA,ve=(k=N.S,I=U.U,U=U.T,X=le.eb,le.A),je=U;for(le=le.fb+d.Ma*le.A;0<je--;){var de=$,Pe=W,Ie=I,Ae=X,Le=le;switch(k){case Gu:xo(de,Pe,Ie,Ae,Le);break;case Ya:Ra(de,Pe,Ie,Ae,Le);break;case Tl:Ra(de,Pe,Ie,Ae,Le),_i(Ae,Le,0,Ie,1,0);break;case Do:pc(de,Pe,Ie,Ae,Le);break;case js:yn(de,Pe,Ie,Ae,Le,1);break;case ih:yn(de,Pe,Ie,Ae,Le,1),_i(Ae,Le,0,Ie,1,0);break;case Eu:yn(de,Pe,Ie,Ae,Le,0);break;case Rc:yn(de,Pe,Ie,Ae,Le,0),_i(Ae,Le,1,Ie,1,0);break;case cu:fc(de,Pe,Ie,Ae,Le);break;case Ad:fc(de,Pe,Ie,Ae,Le),Xn(Ae,Le,Ie,1,0);break;case ca:El(de,Pe,Ie,Ae,Le);break;default:t(0)}W+=Y,le+=ve}d.Ma+=U}else alert("todo:EmitRescaledRowsYUVA");t(d.Ma<=N.height)}}d.C=y,t(d.C<=d.i)}function bt(d){var y;if(0<d.ua)return 0;for(y=0;y<d.Wb;++y){var N=d.Ya[y].G,k=d.Ya[y].H;if(0<N[1][k[1]+0].g||0<N[2][k[2]+0].g||0<N[3][k[3]+0].g)return 0}return 1}function Mt(d,y,N,k,I,U){if(d.Z!=0){var $=d.qd,W=d.rd;for(t(Ic[d.Z]!=null);y<N;++y)Ic[d.Z]($,W,k,I,k,I,U),$=k,W=I,I+=U;d.qd=$,d.rd=W}}function dr(d,y){var N=d.l.ma,k=N.Z==0||N.Z==1?d.l.j:d.C;if(k=d.C<k?k:d.C,t(y<=d.l.o),y>k){var I=d.l.width,U=N.ca,$=N.tb+I*k,W=d.V,Y=d.Ba+d.c*k,X=d.gc;t(d.ab==1),t(X[0].hc==3),Gh(X[0],k,y,W,Y,U,$),Mt(N,k,y,U,$,I)}d.C=d.Ma=y}function mr(d,y,N,k,I,U,$){var W=d.$/k,Y=d.$%k,X=d.m,le=d.s,ve=N+d.$,je=ve;I=N+k*I;var de=N+k*U,Pe=280+le.ua,Ie=d.Pb?W:16777216,Ae=0<le.ua?le.Wa:null,Le=le.wc,Ge=ve<de?ht(le,Y,W):null;t(d.C<U),t(de<=I);var Xe=!1;e:for(;;){for(;Xe||ve<de;){var rt=0;if(W>=Ie){var yt=ve-N;t((Ie=d).Pb),Ie.wd=Ie.m,Ie.xd=yt,0<Ie.s.ua&&_t(Ie.s.Wa,Ie.s.vb),Ie=W+sl}if(Y&Le||(Ge=ht(le,Y,W)),t(Ge!=null),Ge.Qb&&(y[ve]=Ge.qb,Xe=!0),!Xe)if(We(X),Ge.jc){rt=X,yt=y;var mt=ve,Dt=Ge.pd[ue(rt)&Ta-1];t(Ge.jc),256>Dt.g?(Me(rt,rt.u+Dt.g),yt[mt]=Dt.value,rt=0):(Me(rt,rt.u+Dt.g-256),t(256<=Dt.value),rt=Dt.value),rt==0&&(Xe=!0)}else rt=ke(Ge.G[0],Ge.H[0],X);if(X.h)break;if(Xe||256>rt){if(!Xe)if(Ge.nd)y[ve]=(Ge.qb|rt<<8)>>>0;else{if(We(X),Xe=ke(Ge.G[1],Ge.H[1],X),We(X),yt=ke(Ge.G[2],Ge.H[2],X),mt=ke(Ge.G[3],Ge.H[3],X),X.h)break;y[ve]=(mt<<24|Xe<<16|rt<<8|yt)>>>0}if(Xe=!1,++ve,++Y>=k&&(Y=0,++W,$!=null&&W<=U&&!(W%16)&&$(d,W),Ae!=null))for(;je<ve;)rt=y[je++],Ae.X[(506832829*rt&4294967295)>>>Ae.Mb]=rt}else if(280>rt){if(rt=et(rt-256,X),yt=ke(Ge.G[4],Ge.H[4],X),We(X),yt=nt(k,yt=et(yt,X)),X.h)break;if(ve-N<yt||I-ve<rt)break e;for(mt=0;mt<rt;++mt)y[ve+mt]=y[ve+mt-yt];for(ve+=rt,Y+=rt;Y>=k;)Y-=k,++W,$!=null&&W<=U&&!(W%16)&&$(d,W);if(t(ve<=I),Y&Le&&(Ge=ht(le,Y,W)),Ae!=null)for(;je<ve;)rt=y[je++],Ae.X[(506832829*rt&4294967295)>>>Ae.Mb]=rt}else{if(!(rt<Pe))break e;for(Xe=rt-280,t(Ae!=null);je<ve;)rt=y[je++],Ae.X[(506832829*rt&4294967295)>>>Ae.Mb]=rt;rt=ve,t(!(Xe>>>(yt=Ae).Xa)),y[rt]=yt.X[Xe],Xe=!0}Xe||t(X.h==Ne(X))}if(d.Pb&&X.h&&ve<I)t(d.m.h),d.a=5,d.m=d.wd,d.$=d.xd,0<d.s.ua&&_t(d.s.vb,d.s.Wa);else{if(X.h)break e;$!=null&&$(d,W>U?U:W),d.a=0,d.$=ve-N}return 1}return d.a=3,0}function jt(d){t(d!=null),d.vc=null,d.yc=null,d.Ya=null;var y=d.Wa;y!=null&&(y.X=null),d.vb=null,t(d!=null)}function gr(){var d=new Hh;return d==null?null:(d.a=0,d.xb=ua,va("Predictor","VP8LPredictors"),va("Predictor","VP8LPredictors_C"),va("PredictorAdd","VP8LPredictorsAdd"),va("PredictorAdd","VP8LPredictorsAdd_C"),Vu=zr,lu=Ur,xo=_r,Ra=Ri,fc=_n,El=fi,pc=kn,J.VP8LMapColor32b=ou,J.VP8LMapColor8b=Pa,d)}function or(d,y,N,k,I){var U=1,$=[d],W=[y],Y=k.m,X=k.s,le=null,ve=0;e:for(;;){if(N)for(;U&&Ke(Y,1);){var je=$,de=W,Pe=k,Ie=1,Ae=Pe.m,Le=Pe.gc[Pe.ab],Ge=Ke(Ae,2);if(Pe.Oc&1<<Ge)U=0;else{switch(Pe.Oc|=1<<Ge,Le.hc=Ge,Le.Ea=je[0],Le.nc=de[0],Le.K=[null],++Pe.ab,t(4>=Pe.ab),Ge){case 0:case 1:Le.b=Ke(Ae,3)+2,Ie=or(Cr(Le.Ea,Le.b),Cr(Le.nc,Le.b),0,Pe,Le.K),Le.K=Le.K[0];break;case 3:var Xe,rt=Ke(Ae,8)+1,yt=16<rt?0:4<rt?1:2<rt?2:3;if(je[0]=Cr(Le.Ea,yt),Le.b=yt,Xe=Ie=or(rt,1,0,Pe,Le.K)){var mt,Dt=rt,Rt=Le,vr=1<<(8>>Rt.b),hr=l(vr);if(hr==null)Xe=0;else{var Fr=Rt.K[0],Yt=Rt.w;for(hr[0]=Rt.K[0][0],mt=1;mt<1*Dt;++mt)hr[mt]=Zt(Fr[Yt+mt],hr[mt-1]);for(;mt<4*vr;++mt)hr[mt]=0;Rt.K[0]=null,Rt.K[0]=hr,Xe=1}}Ie=Xe;break;case 2:break;default:t(0)}U=Ie}}if($=$[0],W=W[0],U&&Ke(Y,1)&&!(U=1<=(ve=Ke(Y,4))&&11>=ve)){k.a=3;break e}var Sr;if(Sr=U)t:{var Pr,ir,Ar,Gr=k,Tr=$,Rr=W,vn=ve,Jn=N,Fi=Gr.m,ui=Gr.s,In=[null],Qn=1,us=0,rs=qi[vn];r:for(;;){if(Jn&&Ke(Fi,1)){var ns=Ke(Fi,3)+2,vi=Cr(Tr,ns),Yi=Cr(Rr,ns),Ds=vi*Yi;if(!or(vi,Yi,0,Gr,In))break r;for(In=In[0],ui.xc=ns,Pr=0;Pr<Ds;++Pr){var ll=In[Pr]>>8&65535;In[Pr]=ll,ll>=Qn&&(Qn=ll+1)}}if(Fi.h)break r;for(ir=0;5>ir;++ir){var Zi=Ma[ir];!ir&&0<vn&&(Zi+=1<<vn),us<Zi&&(us=Zi)}var io=a(Qn*rs,ce),za=Qn,ds=a(za,ye);if(ds==null)var jo=null;else t(65536>=za),jo=ds;var so=l(us);if(jo==null||so==null||io==null){Gr.a=1;break r}var hn=io;for(Pr=Ar=0;Pr<Qn;++Pr){var sn=jo[Pr],Ni=sn.G,No=sn.H,Il=0,Mn=1,ao=0;for(ir=0;5>ir;++ir){Zi=Ma[ir],Ni[ir]=hn,No[ir]=Ar,!ir&&0<vn&&(Zi+=1<<vn);i:{var Qs,cl=Zi,Wh=Gr,Vi=so,kf=hn,Yu=Ar,oh=0,ul=Wh.m,Yh=Ke(ul,1);if(o(Vi,0,0,cl),Yh){var Ef=Ke(ul,1)+1,Zu=Ke(ul,1),oo=Ke(ul,Zu==0?1:8);Vi[oo]=1,Ef==2&&(Vi[oo=Ke(ul,8)]=1);var So=1}else{var da=l(19),Tf=Ke(ul,4)+4;if(19<Tf){Wh.a=3;var Ed=0;break i}for(Qs=0;Qs<Tf;++Qs)da[il[Qs]]=Ke(ul,3);var Zh=void 0,lh=void 0,Lc=Wh,jp=da,Ku=cl,Pf=Vi,pu=0,vc=Lc.m,Bm=8,Um=a(128,ce);n:for(;re(Um,0,7,jp,19);){if(Ke(vc,1)){var zg=2+2*Ke(vc,3);if((Zh=2+Ke(vc,zg))>Ku)break n}else Zh=Ku;for(lh=0;lh<Ku&&Zh--;){We(vc);var qm=Um[0+(127&ue(vc))];Me(vc,vc.u+qm.g);var Td=qm.value;if(16>Td)Pf[lh++]=Td,Td!=0&&(Bm=Td);else{var Fg=Td==16,Bg=Td-16,Np=_o[Bg],Vm=Ke(vc,nl[Bg])+Np;if(lh+Vm>Ku)break n;for(var ch=Fg?Bm:0;0<Vm--;)Pf[lh++]=ch}}pu=1;break n}pu||(Lc.a=3),So=pu}(So=So&&!ul.h)&&(oh=re(kf,Yu,8,Vi,cl)),So&&oh!=0?Ed=oh:(Wh.a=3,Ed=0)}if(Ed==0)break r;if(Mn&&En[ir]==1&&(Mn=hn[Ar].g==0),Il+=hn[Ar].g,Ar+=Ed,3>=ir){var uh,Os=so[0];for(uh=1;uh<Zi;++uh)so[uh]>Os&&(Os=so[uh]);ao+=Os}}if(sn.nd=Mn,sn.Qb=0,Mn&&(sn.qb=(Ni[3][No[3]+0].value<<24|Ni[1][No[1]+0].value<<16|Ni[2][No[2]+0].value)>>>0,Il==0&&256>Ni[0][No[0]+0].value&&(sn.Qb=1,sn.qb+=Ni[0][No[0]+0].value<<8)),sn.jc=!sn.Qb&&6>ao,sn.jc){var Pd,mu=sn;for(Pd=0;Pd<Ta;++Pd){var Mc=Pd,Dc=mu.pd[Mc],Rd=mu.G[0][mu.H[0]+Mc];256<=Rd.value?(Dc.g=Rd.g+256,Dc.value=Rd.value):(Dc.g=0,Dc.value=0,Mc>>=qe(Rd,8,Dc),Mc>>=qe(mu.G[1][mu.H[1]+Mc],16,Dc),Mc>>=qe(mu.G[2][mu.H[2]+Mc],0,Dc),qe(mu.G[3][mu.H[3]+Mc],24,Dc))}}}ui.vc=In,ui.Wb=Qn,ui.Ya=jo,ui.yc=io,Sr=1;break t}Sr=0}if(!(U=Sr)){k.a=3;break e}if(0<ve){if(X.ua=1<<ve,!wr(X.Wa,ve)){k.a=1,U=0;break e}}else X.ua=0;var Rf=k,Id=$,Kh=W,Ld=Rf.s,Md=Ld.xc;if(Rf.c=Id,Rf.i=Kh,Ld.md=Cr(Id,Md),Ld.wc=Md==0?-1:(1<<Md)-1,N){k.xb=Gn;break e}if((le=l($*W))==null){k.a=1,U=0;break e}U=(U=mr(k,le,0,$,W,W,null))&&!Y.h;break e}return U?(I!=null?I[0]=le:(t(le==null),t(N)),k.$=0,N||jt(X)):jt(X),U}function fr(d,y){var N=d.c*d.i,k=N+y+16*y;return t(d.c<=y),d.V=l(k),d.V==null?(d.Ta=null,d.Ua=0,d.a=1,0):(d.Ta=d.V,d.Ua=d.Ba+N+y,1)}function an(d,y){var N=d.C,k=y-N,I=d.V,U=d.Ba+d.c*N;for(t(y<=d.l.o);0<k;){var $=16<k?16:k,W=d.l.ma,Y=d.l.width,X=Y*$,le=W.ca,ve=W.tb+Y*N,je=d.Ta,de=d.Ua;qt(d,$,I,U),mn(je,de,le,ve,X),Mt(W,N,N+$,le,ve,Y),k-=$,I+=$*d.c,N+=$}t(N==y),d.C=d.Ma=y}function yr(){this.ub=this.yd=this.td=this.Rb=0}function xn(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function $n(){this.Fb=this.Bb=this.Cb=0,this.Zb=l(4),this.Lb=l(4)}function bn(){this.Yb=(function(){var d=[];return(function y(N,k,I){for(var U=I[k],$=0;$<U&&(N.push(I.length>k+1?[]:0),!(I.length<k+1));$++)y(N[$],k+1,I)})(d,0,[3,11]),d})()}function Un(){this.jb=l(3),this.Wc=p([4,8],bn),this.Xc=p([4,17],bn)}function Xr(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new l(4),this.od=new l(4)}function Ks(){this.ld=this.La=this.dd=this.tc=0}function ti(){this.Na=this.la=0}function Ii(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Hn(){this.ad=l(384),this.Za=0,this.Ob=l(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function Fn(){this.uc=this.M=this.Nb=0,this.wa=Array(new Ks),this.Y=0,this.ya=Array(new Hn),this.aa=0,this.l=new Nc}function Yn(){this.y=l(16),this.f=l(8),this.ea=l(8)}function qa(){this.cb=this.a=0,this.sc="",this.m=new Re,this.Od=new yr,this.Kc=new xn,this.ed=new Xr,this.Qa=new $n,this.Ic=this.$c=this.Aa=0,this.D=new Fn,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=a(8,Re),this.ia=0,this.pb=a(4,Ii),this.Pa=new Un,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new Yn),this.Hd=0,this.rb=Array(new ti),this.sb=0,this.wa=Array(new Ks),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Hn),this.L=this.aa=0,this.gd=p([4,2],Ks),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function Nc(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function ks(){var d=new qa;return d!=null&&(d.a=0,d.sc="OK",d.cb=0,d.Xb=0,Wi||(Wi=es)),d}function ri(d,y,N){return d.a==0&&(d.a=y,d.sc=N,d.cb=0),0}function Wo(d,y,N){return 3<=N&&d[y+0]==157&&d[y+1]==1&&d[y+2]==42}function Aa(d,y){if(d==null)return 0;if(d.a=0,d.sc="OK",y==null)return ri(d,2,"null VP8Io passed to VP8GetHeaders()");var N=y.data,k=y.w,I=y.ha;if(4>I)return ri(d,7,"Truncated header.");var U=N[k+0]|N[k+1]<<8|N[k+2]<<16,$=d.Od;if($.Rb=!(1&U),$.td=U>>1&7,$.yd=U>>4&1,$.ub=U>>5,3<$.td)return ri(d,3,"Incorrect keyframe parameters.");if(!$.yd)return ri(d,4,"Frame not displayable.");k+=3,I-=3;var W=d.Kc;if($.Rb){if(7>I)return ri(d,7,"cannot parse picture header");if(!Wo(N,k,I))return ri(d,3,"Bad code word");W.c=16383&(N[k+4]<<8|N[k+3]),W.Td=N[k+4]>>6,W.i=16383&(N[k+6]<<8|N[k+5]),W.Ud=N[k+6]>>6,k+=7,I-=7,d.za=W.c+15>>4,d.Ub=W.i+15>>4,y.width=W.c,y.height=W.i,y.Da=0,y.j=0,y.v=0,y.va=y.width,y.o=y.height,y.da=0,y.ib=y.width,y.hb=y.height,y.U=y.width,y.T=y.height,o((U=d.Pa).jb,0,255,U.jb.length),t((U=d.Qa)!=null),U.Cb=0,U.Bb=0,U.Fb=1,o(U.Zb,0,0,U.Zb.length),o(U.Lb,0,0,U.Lb)}if($.ub>I)return ri(d,7,"bad partition length");Fe(U=d.m,N,k,$.ub),k+=$.ub,I-=$.ub,$.Rb&&(W.Ld=tt(U),W.Kd=tt(U)),W=d.Qa;var Y,X=d.Pa;if(t(U!=null),t(W!=null),W.Cb=tt(U),W.Cb){if(W.Bb=tt(U),tt(U)){for(W.Fb=tt(U),Y=0;4>Y;++Y)W.Zb[Y]=tt(U)?pe(U,7):0;for(Y=0;4>Y;++Y)W.Lb[Y]=tt(U)?pe(U,6):0}if(W.Bb)for(Y=0;3>Y;++Y)X.jb[Y]=tt(U)?Q(U,8):255}else W.Bb=0;if(U.Ka)return ri(d,3,"cannot parse segment header");if((W=d.ed).zd=tt(U),W.Tb=Q(U,6),W.wb=Q(U,3),W.Pc=tt(U),W.Pc&&tt(U)){for(X=0;4>X;++X)tt(U)&&(W.vd[X]=pe(U,6));for(X=0;4>X;++X)tt(U)&&(W.od[X]=pe(U,6))}if(d.L=W.Tb==0?0:W.zd?1:2,U.Ka)return ri(d,3,"cannot parse filter header");var le=I;if(I=Y=k,k=Y+le,W=le,d.Xb=(1<<Q(d.m,2))-1,le<3*(X=d.Xb))N=7;else{for(Y+=3*X,W-=3*X,le=0;le<X;++le){var ve=N[I+0]|N[I+1]<<8|N[I+2]<<16;ve>W&&(ve=W),Fe(d.Jc[+le],N,Y,ve),Y+=ve,W-=ve,I+=3}Fe(d.Jc[+X],N,Y,W),N=Y<k?0:5}if(N!=0)return ri(d,N,"cannot parse partitions");for(N=Q(Y=d.m,7),I=tt(Y)?pe(Y,4):0,k=tt(Y)?pe(Y,4):0,W=tt(Y)?pe(Y,4):0,X=tt(Y)?pe(Y,4):0,Y=tt(Y)?pe(Y,4):0,le=d.Qa,ve=0;4>ve;++ve){if(le.Cb){var je=le.Zb[ve];le.Fb||(je+=N)}else{if(0<ve){d.pb[ve]=d.pb[0];continue}je=N}var de=d.pb[ve];de.Sc[0]=Da[Ko(je+I,127)],de.Sc[1]=Js[Ko(je+0,127)],de.Eb[0]=2*Da[Ko(je+k,127)],de.Eb[1]=101581*Js[Ko(je+W,127)]>>16,8>de.Eb[1]&&(de.Eb[1]=8),de.Qc[0]=Da[Ko(je+X,117)],de.Qc[1]=Js[Ko(je+Y,127)],de.lc=je+Y}if(!$.Rb)return ri(d,4,"Not a key frame.");for(tt(U),$=d.Pa,N=0;4>N;++N){for(I=0;8>I;++I)for(k=0;3>k;++k)for(W=0;11>W;++W)X=Qe(U,gi[N][I][k][W])?Q(U,8):sh[N][I][k][W],$.Wc[N][I].Yb[k][W]=X;for(I=0;17>I;++I)$.Xc[N][I]=$.Wc[N][gn[I]]}return d.kc=tt(U),d.kc&&(d.Bd=Q(U,8)),d.cb=1}function es(d,y,N,k,I,U,$){var W=y[I].Yb[N];for(N=0;16>I;++I){if(!Qe(d,W[N+0]))return I;for(;!Qe(d,W[N+1]);)if(W=y[++I].Yb[0],N=0,I==16)return 16;var Y=y[I+1].Yb;if(Qe(d,W[N+2])){var X=d,le=0;if(Qe(X,(je=W)[(ve=N)+3]))if(Qe(X,je[ve+6])){for(W=0,ve=2*(le=Qe(X,je[ve+8]))+(je=Qe(X,je[ve+9+le])),le=0,je=Cd[ve];je[W];++W)le+=le+Qe(X,je[W]);le+=3+(8<<ve)}else Qe(X,je[ve+7])?(le=7+2*Qe(X,165),le+=Qe(X,145)):le=5+Qe(X,159);else le=Qe(X,je[ve+4])?3+Qe(X,je[ve+5]):2;W=Y[2]}else le=1,W=Y[1];Y=$+qr[I],0>(X=d).b&&Ve(X);var ve,je=X.b,de=(ve=X.Ca>>1)-(X.I>>je)>>31;--X.b,X.Ca+=de,X.Ca|=1,X.I-=(ve+1&de)<<je,U[Y]=((le^de)-de)*k[(0<I)+0]}return 16}function Qc(d){var y=d.rb[d.sb-1];y.la=0,y.Na=0,o(d.zc,0,0,d.zc.length),d.ja=0}function ya(d,y){if(d==null)return 0;if(y==null)return ri(d,2,"NULL VP8Io parameter in VP8Decode().");if(!d.cb&&!Aa(d,y))return 0;if(t(d.cb),y.ac==null||y.ac(y)){y.ob&&(d.L=0);var N=fu[d.L];if(d.L==2?(d.yb=0,d.zb=0):(d.yb=y.v-N>>4,d.zb=y.j-N>>4,0>d.yb&&(d.yb=0),0>d.zb&&(d.zb=0)),d.Va=y.o+15+N>>4,d.Hb=y.va+15+N>>4,d.Hb>d.za&&(d.Hb=d.za),d.Va>d.Ub&&(d.Va=d.Ub),0<d.L){var k=d.ed;for(N=0;4>N;++N){var I;if(d.Qa.Cb){var U=d.Qa.Lb[N];d.Qa.Fb||(U+=k.Tb)}else U=k.Tb;for(I=0;1>=I;++I){var $=d.gd[N][I],W=U;if(k.Pc&&(W+=k.vd[0],I&&(W+=k.od[0])),0<(W=0>W?0:63<W?63:W)){var Y=W;0<k.wb&&(Y=4<k.wb?Y>>2:Y>>1)>9-k.wb&&(Y=9-k.wb),1>Y&&(Y=1),$.dd=Y,$.tc=2*W+Y,$.ld=40<=W?2:15<=W?1:0}else $.tc=0;$.La=I}}}N=0}else ri(d,6,"Frame setup failed"),N=d.a;if(N=N==0){if(N){d.$c=0,0<d.Aa||(d.Ic=x);e:{N=d.Ic,k=4*(Y=d.za);var X=32*Y,le=Y+1,ve=0<d.L?Y*(0<d.Aa?2:1):0,je=(d.Aa==2?2:1)*Y;if(($=k+832+(I=3*(16*N+fu[d.L])/2*X)+(U=d.Fa!=null&&0<d.Fa.length?d.Kc.c*d.Kc.i:0))!=$)N=0;else{if($>d.Vb){if(d.Vb=0,d.Ec=l($),d.Fc=0,d.Ec==null){N=ri(d,1,"no memory during frame initialization.");break e}d.Vb=$}$=d.Ec,W=d.Fc,d.Ac=$,d.Bc=W,W+=k,d.Gd=a(X,Yn),d.Hd=0,d.rb=a(le+1,ti),d.sb=1,d.wa=ve?a(ve,Ks):null,d.Y=0,d.D.Nb=0,d.D.wa=d.wa,d.D.Y=d.Y,0<d.Aa&&(d.D.Y+=Y),t(!0),d.oc=$,d.pc=W,W+=832,d.ya=a(je,Hn),d.aa=0,d.D.ya=d.ya,d.D.aa=d.aa,d.Aa==2&&(d.D.aa+=Y),d.R=16*Y,d.B=8*Y,Y=(X=fu[d.L])*d.R,X=X/2*d.B,d.sa=$,d.ta=W+Y,d.qa=d.sa,d.ra=d.ta+16*N*d.R+X,d.Ha=d.qa,d.Ia=d.ra+8*N*d.B+X,d.$c=0,W+=I,d.mb=U?$:null,d.nb=U?W:null,t(W+U<=d.Fc+d.Vb),Qc(d),o(d.Ac,d.Bc,0,k),N=1}}if(N){if(y.ka=0,y.y=d.sa,y.O=d.ta,y.f=d.qa,y.N=d.ra,y.ea=d.Ha,y.Vd=d.Ia,y.fa=d.R,y.Rc=d.B,y.F=null,y.J=0,!bo){for(N=-255;255>=N;++N)sr[255+N]=0>N?-N:N;for(N=-1020;1020>=N;++N)Rs[1020+N]=-128>N?-128:127<N?127:N;for(N=-112;112>=N;++N)mc[112+N]=-16>N?-16:15<N?15:N;for(N=-255;510>=N;++N)rl[255+N]=0>N?0:255<N?255:N;bo=1}Mo=ia,Hl=th,ji=to,Ia=wu,Ps=wl,Li=Va,Wa=Nd,Rn=Ts,bi=kc,ws=lc,Gl=Fu,tl=Cl,Wl=cc,Sd=uc,$u=Cu,Yl=Sl,Pc=Zo,la=jd,Ls[0]=jl,Ls[1]=$a,Ls[2]=Ac,Ls[3]=Su,Ls[4]=Au,Ls[5]=sa,Ls[6]=ka,Ls[7]=Yo,Ls[8]=ro,Ls[9]=Nl,Is[0]=Nu,Is[1]=$h,Is[2]=sc,Is[3]=ju,Is[4]=Es,Is[5]=_d,Is[6]=zu,al[0]=Ai,al[1]=Sc,al[2]=Bl,al[3]=ac,al[4]=eu,al[5]=oc,al[6]=Ha,N=1}else N=0}N&&(N=(function(de,Pe){for(de.M=0;de.M<de.Va;++de.M){var Ie,Ae=de.Jc[de.M&de.Xb],Le=de.m,Ge=de;for(Ie=0;Ie<Ge.za;++Ie){var Xe=Le,rt=Ge,yt=rt.Ac,mt=rt.Bc+4*Ie,Dt=rt.zc,Rt=rt.ya[rt.aa+Ie];if(rt.Qa.Bb?Rt.$b=Qe(Xe,rt.Pa.jb[0])?2+Qe(Xe,rt.Pa.jb[2]):Qe(Xe,rt.Pa.jb[1]):Rt.$b=0,rt.kc&&(Rt.Ad=Qe(Xe,rt.Bd)),Rt.Za=!Qe(Xe,145)+0,Rt.Za){var vr=Rt.Ob,hr=0;for(rt=0;4>rt;++rt){var Fr,Yt=Dt[0+rt];for(Fr=0;4>Fr;++Fr){Yt=Ci[yt[mt+Fr]][Yt];for(var Sr=Er[Qe(Xe,Yt[0])];0<Sr;)Sr=Er[2*Sr+Qe(Xe,Yt[Sr])];Yt=-Sr,yt[mt+Fr]=Yt}i(vr,hr,yt,mt,4),hr+=4,Dt[0+rt]=Yt}}else Yt=Qe(Xe,156)?Qe(Xe,128)?1:3:Qe(Xe,163)?2:0,Rt.Ob[0]=Yt,o(yt,mt,Yt,4),o(Dt,0,Yt,4);Rt.Dd=Qe(Xe,142)?Qe(Xe,114)?Qe(Xe,183)?1:3:2:0}if(Ge.m.Ka)return ri(de,7,"Premature end-of-partition0 encountered.");for(;de.ja<de.za;++de.ja){if(Ge=Ae,Xe=(Le=de).rb[Le.sb-1],yt=Le.rb[Le.sb+Le.ja],Ie=Le.ya[Le.aa+Le.ja],mt=Le.kc?Ie.Ad:0)Xe.la=yt.la=0,Ie.Za||(Xe.Na=yt.Na=0),Ie.Hc=0,Ie.Gc=0,Ie.ia=0;else{var Pr,ir;if(Xe=yt,yt=Ge,mt=Le.Pa.Xc,Dt=Le.ya[Le.aa+Le.ja],Rt=Le.pb[Dt.$b],rt=Dt.ad,vr=0,hr=Le.rb[Le.sb-1],Yt=Fr=0,o(rt,vr,0,384),Dt.Za)var Ar=0,Gr=mt[3];else{Sr=l(16);var Tr=Xe.Na+hr.Na;if(Tr=Wi(yt,mt[1],Tr,Rt.Eb,0,Sr,0),Xe.Na=hr.Na=(0<Tr)+0,1<Tr)Mo(Sr,0,rt,vr);else{var Rr=Sr[0]+3>>3;for(Sr=0;256>Sr;Sr+=16)rt[vr+Sr]=Rr}Ar=1,Gr=mt[0]}var vn=15&Xe.la,Jn=15&hr.la;for(Sr=0;4>Sr;++Sr){var Fi=1&Jn;for(Rr=ir=0;4>Rr;++Rr)vn=vn>>1|(Fi=(Tr=Wi(yt,Gr,Tr=Fi+(1&vn),Rt.Sc,Ar,rt,vr))>Ar)<<7,ir=ir<<2|(3<Tr?3:1<Tr?2:rt[vr+0]!=0),vr+=16;vn>>=4,Jn=Jn>>1|Fi<<7,Fr=(Fr<<8|ir)>>>0}for(Gr=vn,Ar=Jn>>4,Pr=0;4>Pr;Pr+=2){for(ir=0,vn=Xe.la>>4+Pr,Jn=hr.la>>4+Pr,Sr=0;2>Sr;++Sr){for(Fi=1&Jn,Rr=0;2>Rr;++Rr)Tr=Fi+(1&vn),vn=vn>>1|(Fi=0<(Tr=Wi(yt,mt[2],Tr,Rt.Qc,0,rt,vr)))<<3,ir=ir<<2|(3<Tr?3:1<Tr?2:rt[vr+0]!=0),vr+=16;vn>>=2,Jn=Jn>>1|Fi<<5}Yt|=ir<<4*Pr,Gr|=vn<<4<<Pr,Ar|=(240&Jn)<<Pr}Xe.la=Gr,hr.la=Ar,Dt.Hc=Fr,Dt.Gc=Yt,Dt.ia=43690&Yt?0:Rt.ia,mt=!(Fr|Yt)}if(0<Le.L&&(Le.wa[Le.Y+Le.ja]=Le.gd[Ie.$b][Ie.Za],Le.wa[Le.Y+Le.ja].La|=!mt),Ge.Ka)return ri(de,7,"Premature end-of-file encountered.")}if(Qc(de),Le=Pe,Ge=1,Ie=(Ae=de).D,Xe=0<Ae.L&&Ae.M>=Ae.zb&&Ae.M<=Ae.Va,Ae.Aa==0)e:{if(Ie.M=Ae.M,Ie.uc=Xe,hc(Ae,Ie),Ge=1,Ie=(ir=Ae.D).Nb,Xe=(Yt=fu[Ae.L])*Ae.R,yt=Yt/2*Ae.B,Sr=16*Ie*Ae.R,Rr=8*Ie*Ae.B,mt=Ae.sa,Dt=Ae.ta-Xe+Sr,Rt=Ae.qa,rt=Ae.ra-yt+Rr,vr=Ae.Ha,hr=Ae.Ia-yt+Rr,Jn=(vn=ir.M)==0,Fr=vn>=Ae.Va-1,Ae.Aa==2&&hc(Ae,ir),ir.uc)for(Fi=(Tr=Ae).D.M,t(Tr.D.uc),ir=Tr.yb;ir<Tr.Hb;++ir){Ar=ir,Gr=Fi;var ui=(In=(Zi=Tr).D).Nb;Pr=Zi.R;var In=In.wa[In.Y+Ar],Qn=Zi.sa,us=Zi.ta+16*ui*Pr+16*Ar,rs=In.dd,ns=In.tc;if(ns!=0)if(t(3<=ns),Zi.L==1)0<Ar&&Yl(Qn,us,Pr,ns+4),In.La&&la(Qn,us,Pr,ns),0<Gr&&$u(Qn,us,Pr,ns+4),In.La&&Pc(Qn,us,Pr,ns);else{var vi=Zi.B,Yi=Zi.qa,Ds=Zi.ra+8*ui*vi+8*Ar,ll=Zi.Ha,Zi=Zi.Ia+8*ui*vi+8*Ar;ui=In.ld,0<Ar&&(Rn(Qn,us,Pr,ns+4,rs,ui),ws(Yi,Ds,ll,Zi,vi,ns+4,rs,ui)),In.La&&(tl(Qn,us,Pr,ns,rs,ui),Sd(Yi,Ds,ll,Zi,vi,ns,rs,ui)),0<Gr&&(Wa(Qn,us,Pr,ns+4,rs,ui),bi(Yi,Ds,ll,Zi,vi,ns+4,rs,ui)),In.La&&(Gl(Qn,us,Pr,ns,rs,ui),Wl(Yi,Ds,ll,Zi,vi,ns,rs,ui))}}if(Ae.ia&&alert("todo:DitherRow"),Le.put!=null){if(ir=16*vn,vn=16*(vn+1),Jn?(Le.y=Ae.sa,Le.O=Ae.ta+Sr,Le.f=Ae.qa,Le.N=Ae.ra+Rr,Le.ea=Ae.Ha,Le.W=Ae.Ia+Rr):(ir-=Yt,Le.y=mt,Le.O=Dt,Le.f=Rt,Le.N=rt,Le.ea=vr,Le.W=hr),Fr||(vn-=Yt),vn>Le.o&&(vn=Le.o),Le.F=null,Le.J=null,Ae.Fa!=null&&0<Ae.Fa.length&&ir<vn&&(Le.J=Uu(Ae,Le,ir,vn-ir),Le.F=Ae.mb,Le.F==null&&Le.F.length==0)){Ge=ri(Ae,3,"Could not decode alpha data.");break e}ir<Le.j&&(Yt=Le.j-ir,ir=Le.j,t(!(1&Yt)),Le.O+=Ae.R*Yt,Le.N+=Ae.B*(Yt>>1),Le.W+=Ae.B*(Yt>>1),Le.F!=null&&(Le.J+=Le.width*Yt)),ir<vn&&(Le.O+=Le.v,Le.N+=Le.v>>1,Le.W+=Le.v>>1,Le.F!=null&&(Le.J+=Le.v),Le.ka=ir-Le.j,Le.U=Le.va-Le.v,Le.T=vn-ir,Ge=Le.put(Le))}Ie+1!=Ae.Ic||Fr||(i(Ae.sa,Ae.ta-Xe,mt,Dt+16*Ae.R,Xe),i(Ae.qa,Ae.ra-yt,Rt,rt+8*Ae.B,yt),i(Ae.Ha,Ae.Ia-yt,vr,hr+8*Ae.B,yt))}if(!Ge)return ri(de,6,"Output aborted.")}return 1})(d,y)),y.bc!=null&&y.bc(y),N&=1}return N?(d.cb=0,N):0}function Oi(d,y,N,k,I){I=d[y+N+32*k]+(I>>3),d[y+N+32*k]=-256&I?0>I?0:255:I}function xa(d,y,N,k,I,U){Oi(d,y,0,N,k+I),Oi(d,y,1,N,k+U),Oi(d,y,2,N,k-U),Oi(d,y,3,N,k-I)}function Zn(d){return(20091*d>>16)+d}function cs(d,y,N,k){var I,U=0,$=l(16);for(I=0;4>I;++I){var W=d[y+0]+d[y+8],Y=d[y+0]-d[y+8],X=(35468*d[y+4]>>16)-Zn(d[y+12]),le=Zn(d[y+4])+(35468*d[y+12]>>16);$[U+0]=W+le,$[U+1]=Y+X,$[U+2]=Y-X,$[U+3]=W-le,U+=4,y++}for(I=U=0;4>I;++I)W=(d=$[U+0]+4)+$[U+8],Y=d-$[U+8],X=(35468*$[U+4]>>16)-Zn($[U+12]),Oi(N,k,0,0,W+(le=Zn($[U+4])+(35468*$[U+12]>>16))),Oi(N,k,1,0,Y+X),Oi(N,k,2,0,Y-X),Oi(N,k,3,0,W-le),U++,k+=32}function Va(d,y,N,k){var I=d[y+0]+4,U=35468*d[y+4]>>16,$=Zn(d[y+4]),W=35468*d[y+1]>>16;xa(N,k,0,I+$,d=Zn(d[y+1]),W),xa(N,k,1,I+U,d,W),xa(N,k,2,I-U,d,W),xa(N,k,3,I-$,d,W)}function th(d,y,N,k,I){cs(d,y,N,k),I&&cs(d,y+16,N,k+4)}function to(d,y,N,k){Hl(d,y+0,N,k,1),Hl(d,y+32,N,k+128,1)}function wu(d,y,N,k){var I;for(d=d[y+0]+4,I=0;4>I;++I)for(y=0;4>y;++y)Oi(N,k,y,I,d)}function wl(d,y,N,k){d[y+0]&&Ia(d,y+0,N,k),d[y+16]&&Ia(d,y+16,N,k+4),d[y+32]&&Ia(d,y+32,N,k+128),d[y+48]&&Ia(d,y+48,N,k+128+4)}function ia(d,y,N,k){var I,U=l(16);for(I=0;4>I;++I){var $=d[y+0+I]+d[y+12+I],W=d[y+4+I]+d[y+8+I],Y=d[y+4+I]-d[y+8+I],X=d[y+0+I]-d[y+12+I];U[0+I]=$+W,U[8+I]=$-W,U[4+I]=X+Y,U[12+I]=X-Y}for(I=0;4>I;++I)$=(d=U[0+4*I]+3)+U[3+4*I],W=U[1+4*I]+U[2+4*I],Y=U[1+4*I]-U[2+4*I],X=d-U[3+4*I],N[k+0]=$+W>>3,N[k+16]=X+Y>>3,N[k+32]=$-W>>3,N[k+48]=X-Y>>3,k+=64}function Ca(d,y,N){var k,I=y-32,U=tr,$=255-d[I-1];for(k=0;k<N;++k){var W,Y=U,X=$+d[y-1];for(W=0;W<N;++W)d[y+W]=Y[X+d[I+W]];y+=32}}function $a(d,y){Ca(d,y,4)}function Sc(d,y){Ca(d,y,8)}function $h(d,y){Ca(d,y,16)}function sc(d,y){var N;for(N=0;16>N;++N)i(d,y+32*N,d,y-32,16)}function ju(d,y){var N;for(N=16;0<N;--N)o(d,y,d[y-1],16),y+=32}function bd(d,y,N){var k;for(k=0;16>k;++k)o(y,N+32*k,d,16)}function Nu(d,y){var N,k=16;for(N=0;16>N;++N)k+=d[y-1+32*N]+d[y+N-32];bd(k>>5,d,y)}function Es(d,y){var N,k=8;for(N=0;16>N;++N)k+=d[y-1+32*N];bd(k>>4,d,y)}function _d(d,y){var N,k=8;for(N=0;16>N;++N)k+=d[y+N-32];bd(k>>4,d,y)}function zu(d,y){bd(128,d,y)}function cn(d,y,N){return d+2*y+N+2>>2}function Ac(d,y){var N,k=y-32;for(k=new Uint8Array([cn(d[k-1],d[k+0],d[k+1]),cn(d[k+0],d[k+1],d[k+2]),cn(d[k+1],d[k+2],d[k+3]),cn(d[k+2],d[k+3],d[k+4])]),N=0;4>N;++N)i(d,y+32*N,k,0,k.length)}function Su(d,y){var N=d[y-1],k=d[y-1+32],I=d[y-1+64],U=d[y-1+96];St(d,y+0,16843009*cn(d[y-1-32],N,k)),St(d,y+32,16843009*cn(N,k,I)),St(d,y+64,16843009*cn(k,I,U)),St(d,y+96,16843009*cn(I,U,U))}function jl(d,y){var N,k=4;for(N=0;4>N;++N)k+=d[y+N-32]+d[y-1+32*N];for(k>>=3,N=0;4>N;++N)o(d,y+32*N,k,4)}function Au(d,y){var N=d[y-1+0],k=d[y-1+32],I=d[y-1+64],U=d[y-1-32],$=d[y+0-32],W=d[y+1-32],Y=d[y+2-32],X=d[y+3-32];d[y+0+96]=cn(k,I,d[y-1+96]),d[y+1+96]=d[y+0+64]=cn(N,k,I),d[y+2+96]=d[y+1+64]=d[y+0+32]=cn(U,N,k),d[y+3+96]=d[y+2+64]=d[y+1+32]=d[y+0+0]=cn($,U,N),d[y+3+64]=d[y+2+32]=d[y+1+0]=cn(W,$,U),d[y+3+32]=d[y+2+0]=cn(Y,W,$),d[y+3+0]=cn(X,Y,W)}function ka(d,y){var N=d[y+1-32],k=d[y+2-32],I=d[y+3-32],U=d[y+4-32],$=d[y+5-32],W=d[y+6-32],Y=d[y+7-32];d[y+0+0]=cn(d[y+0-32],N,k),d[y+1+0]=d[y+0+32]=cn(N,k,I),d[y+2+0]=d[y+1+32]=d[y+0+64]=cn(k,I,U),d[y+3+0]=d[y+2+32]=d[y+1+64]=d[y+0+96]=cn(I,U,$),d[y+3+32]=d[y+2+64]=d[y+1+96]=cn(U,$,W),d[y+3+64]=d[y+2+96]=cn($,W,Y),d[y+3+96]=cn(W,Y,Y)}function sa(d,y){var N=d[y-1+0],k=d[y-1+32],I=d[y-1+64],U=d[y-1-32],$=d[y+0-32],W=d[y+1-32],Y=d[y+2-32],X=d[y+3-32];d[y+0+0]=d[y+1+64]=U+$+1>>1,d[y+1+0]=d[y+2+64]=$+W+1>>1,d[y+2+0]=d[y+3+64]=W+Y+1>>1,d[y+3+0]=Y+X+1>>1,d[y+0+96]=cn(I,k,N),d[y+0+64]=cn(k,N,U),d[y+0+32]=d[y+1+96]=cn(N,U,$),d[y+1+32]=d[y+2+96]=cn(U,$,W),d[y+2+32]=d[y+3+96]=cn($,W,Y),d[y+3+32]=cn(W,Y,X)}function Yo(d,y){var N=d[y+0-32],k=d[y+1-32],I=d[y+2-32],U=d[y+3-32],$=d[y+4-32],W=d[y+5-32],Y=d[y+6-32],X=d[y+7-32];d[y+0+0]=N+k+1>>1,d[y+1+0]=d[y+0+64]=k+I+1>>1,d[y+2+0]=d[y+1+64]=I+U+1>>1,d[y+3+0]=d[y+2+64]=U+$+1>>1,d[y+0+32]=cn(N,k,I),d[y+1+32]=d[y+0+96]=cn(k,I,U),d[y+2+32]=d[y+1+96]=cn(I,U,$),d[y+3+32]=d[y+2+96]=cn(U,$,W),d[y+3+64]=cn($,W,Y),d[y+3+96]=cn(W,Y,X)}function Nl(d,y){var N=d[y-1+0],k=d[y-1+32],I=d[y-1+64],U=d[y-1+96];d[y+0+0]=N+k+1>>1,d[y+2+0]=d[y+0+32]=k+I+1>>1,d[y+2+32]=d[y+0+64]=I+U+1>>1,d[y+1+0]=cn(N,k,I),d[y+3+0]=d[y+1+32]=cn(k,I,U),d[y+3+32]=d[y+1+64]=cn(I,U,U),d[y+3+64]=d[y+2+64]=d[y+0+96]=d[y+1+96]=d[y+2+96]=d[y+3+96]=U}function ro(d,y){var N=d[y-1+0],k=d[y-1+32],I=d[y-1+64],U=d[y-1+96],$=d[y-1-32],W=d[y+0-32],Y=d[y+1-32],X=d[y+2-32];d[y+0+0]=d[y+2+32]=N+$+1>>1,d[y+0+32]=d[y+2+64]=k+N+1>>1,d[y+0+64]=d[y+2+96]=I+k+1>>1,d[y+0+96]=U+I+1>>1,d[y+3+0]=cn(W,Y,X),d[y+2+0]=cn($,W,Y),d[y+1+0]=d[y+3+32]=cn(N,$,W),d[y+1+32]=d[y+3+64]=cn(k,N,$),d[y+1+64]=d[y+3+96]=cn(I,k,N),d[y+1+96]=cn(U,I,k)}function Bl(d,y){var N;for(N=0;8>N;++N)i(d,y+32*N,d,y-32,8)}function ac(d,y){var N;for(N=0;8>N;++N)o(d,y,d[y-1],8),y+=32}function aa(d,y,N){var k;for(k=0;8>k;++k)o(y,N+32*k,d,8)}function Ai(d,y){var N,k=8;for(N=0;8>N;++N)k+=d[y+N-32]+d[y-1+32*N];aa(k>>4,d,y)}function oc(d,y){var N,k=4;for(N=0;8>N;++N)k+=d[y+N-32];aa(k>>3,d,y)}function eu(d,y){var N,k=4;for(N=0;8>N;++N)k+=d[y-1+32*N];aa(k>>3,d,y)}function Ha(d,y){aa(128,d,y)}function Ul(d,y,N){var k=d[y-N],I=d[y+0],U=3*(I-k)+Xs[1020+d[y-2*N]-d[y+N]],$=Hu[112+(U+4>>3)];d[y-N]=tr[255+k+Hu[112+(U+3>>3)]],d[y+0]=tr[255+I-$]}function tu(d,y,N,k){var I=d[y+0],U=d[y+N];return La[255+d[y-2*N]-d[y-N]]>k||La[255+U-I]>k}function Cc(d,y,N,k){return 4*La[255+d[y-N]-d[y+0]]+La[255+d[y-2*N]-d[y+N]]<=k}function wd(d,y,N,k,I){var U=d[y-3*N],$=d[y-2*N],W=d[y-N],Y=d[y+0],X=d[y+N],le=d[y+2*N],ve=d[y+3*N];return 4*La[255+W-Y]+La[255+$-X]>k?0:La[255+d[y-4*N]-U]<=I&&La[255+U-$]<=I&&La[255+$-W]<=I&&La[255+ve-le]<=I&&La[255+le-X]<=I&&La[255+X-Y]<=I}function Cu(d,y,N,k){var I=2*k+1;for(k=0;16>k;++k)Cc(d,y+k,N,I)&&Ul(d,y+k,N)}function Sl(d,y,N,k){var I=2*k+1;for(k=0;16>k;++k)Cc(d,y+k*N,1,I)&&Ul(d,y+k*N,1)}function Zo(d,y,N,k){var I;for(I=3;0<I;--I)Cu(d,y+=4*N,N,k)}function jd(d,y,N,k){var I;for(I=3;0<I;--I)Sl(d,y+=4,N,k)}function Al(d,y,N,k,I,U,$,W){for(U=2*U+1;0<I--;){if(wd(d,y,N,U,$))if(tu(d,y,N,W))Ul(d,y,N);else{var Y=d,X=y,le=N,ve=Y[X-2*le],je=Y[X-le],de=Y[X+0],Pe=Y[X+le],Ie=Y[X+2*le],Ae=27*(Ge=Xs[1020+3*(de-je)+Xs[1020+ve-Pe]])+63>>7,Le=18*Ge+63>>7,Ge=9*Ge+63>>7;Y[X-3*le]=tr[255+Y[X-3*le]+Ge],Y[X-2*le]=tr[255+ve+Le],Y[X-le]=tr[255+je+Ae],Y[X+0]=tr[255+de-Ae],Y[X+le]=tr[255+Pe-Le],Y[X+2*le]=tr[255+Ie-Ge]}y+=k}}function Lo(d,y,N,k,I,U,$,W){for(U=2*U+1;0<I--;){if(wd(d,y,N,U,$))if(tu(d,y,N,W))Ul(d,y,N);else{var Y=d,X=y,le=N,ve=Y[X-le],je=Y[X+0],de=Y[X+le],Pe=Hu[112+((Ie=3*(je-ve))+4>>3)],Ie=Hu[112+(Ie+3>>3)],Ae=Pe+1>>1;Y[X-2*le]=tr[255+Y[X-2*le]+Ae],Y[X-le]=tr[255+ve+Ie],Y[X+0]=tr[255+je-Pe],Y[X+le]=tr[255+de-Ae]}y+=k}}function Nd(d,y,N,k,I,U){Al(d,y,N,1,16,k,I,U)}function Ts(d,y,N,k,I,U){Al(d,y,1,N,16,k,I,U)}function Fu(d,y,N,k,I,U){var $;for($=3;0<$;--$)Lo(d,y+=4*N,N,1,16,k,I,U)}function Cl(d,y,N,k,I,U){var $;for($=3;0<$;--$)Lo(d,y+=4,1,N,16,k,I,U)}function kc(d,y,N,k,I,U,$,W){Al(d,y,I,1,8,U,$,W),Al(N,k,I,1,8,U,$,W)}function lc(d,y,N,k,I,U,$,W){Al(d,y,1,I,8,U,$,W),Al(N,k,1,I,8,U,$,W)}function cc(d,y,N,k,I,U,$,W){Lo(d,y+4*I,I,1,8,U,$,W),Lo(N,k+4*I,I,1,8,U,$,W)}function uc(d,y,N,k,I,U,$,W){Lo(d,y+4,1,I,8,U,$,W),Lo(N,k+4,1,I,8,U,$,W)}function kl(){this.ba=new Cs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new pi,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function dc(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function ql(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function rh(){this.ua=0,this.Wa=new Ye,this.vb=new Ye,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new ye,this.yc=new ce}function Hh(){this.xb=this.a=0,this.l=new Nc,this.ca=new Cs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new te,this.Pb=0,this.wd=new te,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new rh,this.ab=0,this.gc=a(4,ql),this.Oc=0}function ni(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new Nc,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Bu(d,y,N,k,I,U,$){for(d=d==null?0:d[y+0],y=0;y<$;++y)I[U+y]=d+N[k+y]&255,d=I[U+y]}function ku(d,y,N,k,I,U,$){var W;if(d==null)Bu(null,null,N,k,I,U,$);else for(W=0;W<$;++W)I[U+W]=d[y+W]+N[k+W]&255}function ru(d,y,N,k,I,U,$){if(d==null)Bu(null,null,N,k,I,U,$);else{var W,Y=d[y+0],X=Y,le=Y;for(W=0;W<$;++W)X=le+(Y=d[y+W])-X,le=N[k+W]+(-256&X?0>X?0:255:X)&255,X=Y,I[U+W]=le}}function Uu(d,y,N,k){var I=y.width,U=y.o;if(t(d!=null&&y!=null),0>N||0>=k||N+k>U)return null;if(!d.Cc){if(d.ga==null){var $;if(d.ga=new ni,($=d.ga==null)||($=y.width*y.o,t(d.Gb.length==0),d.Gb=l($),d.Uc=0,d.Gb==null?$=0:(d.mb=d.Gb,d.nb=d.Uc,d.rc=null,$=1),$=!$),!$){$=d.ga;var W=d.Fa,Y=d.P,X=d.qc,le=d.mb,ve=d.nb,je=Y+1,de=X-1,Pe=$.l;if(t(W!=null&&le!=null&&y!=null),Ic[0]=null,Ic[1]=Bu,Ic[2]=ku,Ic[3]=ru,$.ca=le,$.tb=ve,$.c=y.width,$.i=y.height,t(0<$.c&&0<$.i),1>=X)y=0;else if($.$a=W[Y+0]>>0&3,$.Z=W[Y+0]>>2&3,$.Lc=W[Y+0]>>4&3,Y=W[Y+0]>>6&3,0>$.$a||1<$.$a||4<=$.Z||1<$.Lc||Y)y=0;else if(Pe.put=Ce,Pe.ac=xe,Pe.bc=Te,Pe.ma=$,Pe.width=y.width,Pe.height=y.height,Pe.Da=y.Da,Pe.v=y.v,Pe.va=y.va,Pe.j=y.j,Pe.o=y.o,$.$a)e:{t($.$a==1),y=gr();t:for(;;){if(y==null){y=0;break e}if(t($!=null),$.mc=y,y.c=$.c,y.i=$.i,y.l=$.l,y.l.ma=$,y.l.width=$.c,y.l.height=$.i,y.a=0,me(y.m,W,je,de),!or($.c,$.i,1,y,null)||(y.ab==1&&y.gc[0].hc==3&&bt(y.s)?($.ic=1,W=y.c*y.i,y.Ta=null,y.Ua=0,y.V=l(W),y.Ba=0,y.V==null?(y.a=1,y=0):y=1):($.ic=0,y=fr(y,$.c)),!y))break t;y=1;break e}$.mc=null,y=0}else y=de>=$.c*$.i;$=!y}if($)return null;d.ga.Lc!=1?d.Ga=0:k=U-N}t(d.ga!=null),t(N+k<=U);e:{if(y=(W=d.ga).c,U=W.l.o,W.$a==0){if(je=d.rc,de=d.Vc,Pe=d.Fa,Y=d.P+1+N*y,X=d.mb,le=d.nb+N*y,t(Y<=d.P+d.qc),W.Z!=0)for(t(Ic[W.Z]!=null),$=0;$<k;++$)Ic[W.Z](je,de,Pe,Y,X,le,y),je=X,de=le,le+=y,Y+=y;else for($=0;$<k;++$)i(X,le,Pe,Y,y),je=X,de=le,le+=y,Y+=y;d.rc=je,d.Vc=de}else{if(t(W.mc!=null),y=N+k,t(($=W.mc)!=null),t(y<=$.i),$.C>=y)y=1;else if(W.ic||vt(),W.ic){W=$.V,je=$.Ba,de=$.c;var Ie=$.i,Ae=(Pe=1,Y=$.$/de,X=$.$%de,le=$.m,ve=$.s,$.$),Le=de*Ie,Ge=de*y,Xe=ve.wc,rt=Ae<Ge?ht(ve,X,Y):null;t(Ae<=Le),t(y<=Ie),t(bt(ve));t:for(;;){for(;!le.h&&Ae<Ge;){if(X&Xe||(rt=ht(ve,X,Y)),t(rt!=null),We(le),256>(Ie=ke(rt.G[0],rt.H[0],le)))W[je+Ae]=Ie,++Ae,++X>=de&&(X=0,++Y<=y&&!(Y%16)&&dr($,Y));else{if(!(280>Ie)){Pe=0;break t}Ie=et(Ie-256,le);var yt,mt=ke(rt.G[4],rt.H[4],le);if(We(le),!(Ae>=(mt=nt(de,mt=et(mt,le)))&&Le-Ae>=Ie)){Pe=0;break t}for(yt=0;yt<Ie;++yt)W[je+Ae+yt]=W[je+Ae+yt-mt];for(Ae+=Ie,X+=Ie;X>=de;)X-=de,++Y<=y&&!(Y%16)&&dr($,Y);Ae<Ge&&X&Xe&&(rt=ht(ve,X,Y))}t(le.h==Ne(le))}dr($,Y>y?y:Y);break t}!Pe||le.h&&Ae<Le?(Pe=0,$.a=le.h?5:3):$.$=Ae,y=Pe}else y=mr($,$.V,$.Ba,$.c,$.i,y,an);if(!y){k=0;break e}}N+k>=U&&(d.Cc=1),k=1}if(!k)return null;if(d.Cc&&((k=d.ga)!=null&&(k.mc=null),d.ga=null,0<d.Ga))return alert("todo:WebPDequantizeLevels"),null}return d.nb+N*I}function H(d,y,N,k,I,U){for(;0<I--;){var $,W=d,Y=y+(N?1:0),X=d,le=y+(N?0:3);for($=0;$<k;++$){var ve=X[le+4*$];ve!=255&&(ve*=32897,W[Y+4*$+0]=W[Y+4*$+0]*ve>>23,W[Y+4*$+1]=W[Y+4*$+1]*ve>>23,W[Y+4*$+2]=W[Y+4*$+2]*ve>>23)}y+=U}}function be(d,y,N,k,I){for(;0<k--;){var U;for(U=0;U<N;++U){var $=d[y+2*U+0],W=15&(X=d[y+2*U+1]),Y=4369*W,X=(240&X|X>>4)*Y>>16;d[y+2*U+0]=(240&$|$>>4)*Y>>16&240|(15&$|$<<4)*Y>>16>>4&15,d[y+2*U+1]=240&X|W}y+=I}}function Ze(d,y,N,k,I,U,$,W){var Y,X,le=255;for(X=0;X<I;++X){for(Y=0;Y<k;++Y){var ve=d[y+Y];U[$+4*Y]=ve,le&=ve}y+=N,$+=W}return le!=255}function dt(d,y,N,k,I){var U;for(U=0;U<I;++U)N[k+U]=d[y+U]>>8}function vt(){_i=H,Xn=be,zi=Ze,mn=dt}function $t(d,y,N){J[d]=function(k,I,U,$,W,Y,X,le,ve,je,de,Pe,Ie,Ae,Le,Ge,Xe){var rt,yt=Xe-1>>1,mt=W[Y+0]|X[le+0]<<16,Dt=ve[je+0]|de[Pe+0]<<16;t(k!=null);var Rt=3*mt+Dt+131074>>2;for(y(k[I+0],255&Rt,Rt>>16,Ie,Ae),U!=null&&(Rt=3*Dt+mt+131074>>2,y(U[$+0],255&Rt,Rt>>16,Le,Ge)),rt=1;rt<=yt;++rt){var vr=W[Y+rt]|X[le+rt]<<16,hr=ve[je+rt]|de[Pe+rt]<<16,Fr=mt+vr+Dt+hr+524296,Yt=Fr+2*(vr+Dt)>>3;Rt=Yt+mt>>1,mt=(Fr=Fr+2*(mt+hr)>>3)+vr>>1,y(k[I+2*rt-1],255&Rt,Rt>>16,Ie,Ae+(2*rt-1)*N),y(k[I+2*rt-0],255&mt,mt>>16,Ie,Ae+(2*rt-0)*N),U!=null&&(Rt=Fr+Dt>>1,mt=Yt+hr>>1,y(U[$+2*rt-1],255&Rt,Rt>>16,Le,Ge+(2*rt-1)*N),y(U[$+2*rt+0],255&mt,mt>>16,Le,Ge+(2*rt+0)*N)),mt=vr,Dt=hr}1&Xe||(Rt=3*mt+Dt+131074>>2,y(k[I+Xe-1],255&Rt,Rt>>16,Ie,Ae+(Xe-1)*N),U!=null&&(Rt=3*Dt+mt+131074>>2,y(U[$+Xe-1],255&Rt,Rt>>16,Le,Ge+(Xe-1)*N)))}}function lr(){Bs[Gu]=uu,Bs[Ya]=Oa,Bs[Do]=gc,Bs[js]=du,Bs[Eu]=no,Bs[cu]=Pl,Bs[ca]=Rl,Bs[Tl]=Oa,Bs[ih]=du,Bs[Rc]=no,Bs[Ad]=Pl}function Or(d){return d&-16384?0>d?0:255:d>>kd}function Zr(d,y){return Or((19077*d>>8)+(26149*y>>8)-14234)}function Pn(d,y,N){return Or((19077*d>>8)-(6419*y>>8)-(13320*N>>8)+8708)}function dn(d,y){return Or((19077*d>>8)+(33050*y>>8)-17685)}function Kn(d,y,N,k,I){k[I+0]=Zr(d,N),k[I+1]=Pn(d,y,N),k[I+2]=dn(d,y)}function _s(d,y,N,k,I){k[I+0]=dn(d,y),k[I+1]=Pn(d,y,N),k[I+2]=Zr(d,N)}function ts(d,y,N,k,I){var U=Pn(d,y,N);y=U<<3&224|dn(d,y)>>3,k[I+0]=248&Zr(d,N)|U>>5,k[I+1]=y}function Sn(d,y,N,k,I){var U=240&dn(d,y)|15;k[I+0]=240&Zr(d,N)|Pn(d,y,N)>>4,k[I+1]=U}function ba(d,y,N,k,I){k[I+0]=255,Kn(d,y,N,k,I+1)}function Ea(d,y,N,k,I){_s(d,y,N,k,I),k[I+3]=255}function oa(d,y,N,k,I){Kn(d,y,N,k,I),k[I+3]=255}function Ko(d,y){return 0>d?0:d>y?y:d}function Ec(d,y,N){J[d]=function(k,I,U,$,W,Y,X,le,ve){for(var je=le+(-2&ve)*N;le!=je;)y(k[I+0],U[$+0],W[Y+0],X,le),y(k[I+1],U[$+0],W[Y+0],X,le+N),I+=2,++$,++Y,le+=2*N;1&ve&&y(k[I+0],U[$+0],W[Y+0],X,le)}}function nh(d,y,N){return N==0?d==0?y==0?6:5:y==0?4:0:N}function nu(d,y,N,k,I){switch(d>>>30){case 3:Hl(y,N,k,I,0);break;case 2:Li(y,N,k,I);break;case 1:Ia(y,N,k,I)}}function hc(d,y){var N,k,I=y.M,U=y.Nb,$=d.oc,W=d.pc+40,Y=d.oc,X=d.pc+584,le=d.oc,ve=d.pc+600;for(N=0;16>N;++N)$[W+32*N-1]=129;for(N=0;8>N;++N)Y[X+32*N-1]=129,le[ve+32*N-1]=129;for(0<I?$[W-1-32]=Y[X-1-32]=le[ve-1-32]=129:(o($,W-32-1,127,21),o(Y,X-32-1,127,9),o(le,ve-32-1,127,9)),k=0;k<d.za;++k){var je=y.ya[y.aa+k];if(0<k){for(N=-1;16>N;++N)i($,W+32*N-4,$,W+32*N+12,4);for(N=-1;8>N;++N)i(Y,X+32*N-4,Y,X+32*N+4,4),i(le,ve+32*N-4,le,ve+32*N+4,4)}var de=d.Gd,Pe=d.Hd+k,Ie=je.ad,Ae=je.Hc;if(0<I&&(i($,W-32,de[Pe].y,0,16),i(Y,X-32,de[Pe].f,0,8),i(le,ve-32,de[Pe].ea,0,8)),je.Za){var Le=$,Ge=W-32+16;for(0<I&&(k>=d.za-1?o(Le,Ge,de[Pe].y[15],4):i(Le,Ge,de[Pe+1].y,0,4)),N=0;4>N;N++)Le[Ge+128+N]=Le[Ge+256+N]=Le[Ge+384+N]=Le[Ge+0+N];for(N=0;16>N;++N,Ae<<=2)Le=$,Ge=W+Us[N],Ls[je.Ob[N]](Le,Ge),nu(Ae,Ie,16*+N,Le,Ge)}else if(Le=nh(k,I,je.Ob[0]),Is[Le]($,W),Ae!=0)for(N=0;16>N;++N,Ae<<=2)nu(Ae,Ie,16*+N,$,W+Us[N]);for(N=je.Gc,Le=nh(k,I,je.Dd),al[Le](Y,X),al[Le](le,ve),Ae=Ie,Le=Y,Ge=X,255&(je=N>>0)&&(170&je?ji(Ae,256,Le,Ge):Ps(Ae,256,Le,Ge)),je=le,Ae=ve,255&(N>>=8)&&(170&N?ji(Ie,320,je,Ae):Ps(Ie,320,je,Ae)),I<d.Ub-1&&(i(de[Pe].y,0,$,W+480,16),i(de[Pe].f,0,Y,X+224,8),i(de[Pe].ea,0,le,ve+224,8)),N=8*U*d.B,de=d.sa,Pe=d.ta+16*k+16*U*d.R,Ie=d.qa,je=d.ra+8*k+N,Ae=d.Ha,Le=d.Ia+8*k+N,N=0;16>N;++N)i(de,Pe+N*d.R,$,W+32*N,16);for(N=0;8>N;++N)i(Ie,je+N*d.B,Y,X+32*N,8),i(Ae,Le+N*d.B,le,ve+32*N,8)}}function Xo(d,y,N,k,I,U,$,W,Y){var X=[0],le=[0],ve=0,je=Y!=null?Y.kd:0,de=Y??new dc;if(d==null||12>N)return 7;de.data=d,de.w=y,de.ha=N,y=[y],N=[N],de.gb=[de.gb];e:{var Pe=y,Ie=N,Ae=de.gb;if(t(d!=null),t(Ie!=null),t(Ae!=null),Ae[0]=0,12<=Ie[0]&&!r(d,Pe[0],"RIFF")){if(r(d,Pe[0]+8,"WEBP")){Ae=3;break e}var Le=Lt(d,Pe[0]+4);if(12>Le||4294967286<Le){Ae=3;break e}if(je&&Le>Ie[0]-8){Ae=7;break e}Ae[0]=Le,Pe[0]+=12,Ie[0]-=12}Ae=0}if(Ae!=0)return Ae;for(Le=0<de.gb[0],N=N[0];;){e:{var Ge=d;Ie=y,Ae=N;var Xe=X,rt=le,yt=Pe=[0];if((Rt=ve=[ve])[0]=0,8>Ae[0])Ae=7;else{if(!r(Ge,Ie[0],"VP8X")){if(Lt(Ge,Ie[0]+4)!=10){Ae=3;break e}if(18>Ae[0]){Ae=7;break e}var mt=Lt(Ge,Ie[0]+8),Dt=1+zt(Ge,Ie[0]+12);if(2147483648<=Dt*(Ge=1+zt(Ge,Ie[0]+15))){Ae=3;break e}yt!=null&&(yt[0]=mt),Xe!=null&&(Xe[0]=Dt),rt!=null&&(rt[0]=Ge),Ie[0]+=18,Ae[0]-=18,Rt[0]=1}Ae=0}}if(ve=ve[0],Pe=Pe[0],Ae!=0)return Ae;if(Ie=!!(2&Pe),!Le&&ve)return 3;if(U!=null&&(U[0]=!!(16&Pe)),$!=null&&($[0]=Ie),W!=null&&(W[0]=0),$=X[0],Pe=le[0],ve&&Ie&&Y==null){Ae=0;break}if(4>N){Ae=7;break}if(Le&&ve||!Le&&!ve&&!r(d,y[0],"ALPH")){N=[N],de.na=[de.na],de.P=[de.P],de.Sa=[de.Sa];e:{mt=d,Ae=y,Le=N;var Rt=de.gb;Xe=de.na,rt=de.P,yt=de.Sa,Dt=22,t(mt!=null),t(Le!=null),Ge=Ae[0];var vr=Le[0];for(t(Xe!=null),t(yt!=null),Xe[0]=null,rt[0]=null,yt[0]=0;;){if(Ae[0]=Ge,Le[0]=vr,8>vr){Ae=7;break e}var hr=Lt(mt,Ge+4);if(4294967286<hr){Ae=3;break e}var Fr=8+hr+1&-2;if(Dt+=Fr,0<Rt&&Dt>Rt){Ae=3;break e}if(!r(mt,Ge,"VP8 ")||!r(mt,Ge,"VP8L")){Ae=0;break e}if(vr[0]<Fr){Ae=7;break e}r(mt,Ge,"ALPH")||(Xe[0]=mt,rt[0]=Ge+8,yt[0]=hr),Ge+=Fr,vr-=Fr}}if(N=N[0],de.na=de.na[0],de.P=de.P[0],de.Sa=de.Sa[0],Ae!=0)break}N=[N],de.Ja=[de.Ja],de.xa=[de.xa];e:if(Rt=d,Ae=y,Le=N,Xe=de.gb[0],rt=de.Ja,yt=de.xa,mt=Ae[0],Ge=!r(Rt,mt,"VP8 "),Dt=!r(Rt,mt,"VP8L"),t(Rt!=null),t(Le!=null),t(rt!=null),t(yt!=null),8>Le[0])Ae=7;else{if(Ge||Dt){if(Rt=Lt(Rt,mt+4),12<=Xe&&Rt>Xe-12){Ae=3;break e}if(je&&Rt>Le[0]-8){Ae=7;break e}rt[0]=Rt,Ae[0]+=8,Le[0]-=8,yt[0]=Dt}else yt[0]=5<=Le[0]&&Rt[mt+0]==47&&!(Rt[mt+4]>>5),rt[0]=Le[0];Ae=0}if(N=N[0],de.Ja=de.Ja[0],de.xa=de.xa[0],y=y[0],Ae!=0)break;if(4294967286<de.Ja)return 3;if(W==null||Ie||(W[0]=de.xa?2:1),$=[$],Pe=[Pe],de.xa){if(5>N){Ae=7;break}W=$,je=Pe,Ie=U,d==null||5>N?d=0:5<=N&&d[y+0]==47&&!(d[y+4]>>5)?(Le=[0],Rt=[0],Xe=[0],me(rt=new te,d,y,N),De(rt,Le,Rt,Xe)?(W!=null&&(W[0]=Le[0]),je!=null&&(je[0]=Rt[0]),Ie!=null&&(Ie[0]=Xe[0]),d=1):d=0):d=0}else{if(10>N){Ae=7;break}W=Pe,d==null||10>N||!Wo(d,y+3,N-3)?d=0:(je=d[y+0]|d[y+1]<<8|d[y+2]<<16,Ie=16383&(d[y+7]<<8|d[y+6]),d=16383&(d[y+9]<<8|d[y+8]),1&je||3<(je>>1&7)||!(je>>4&1)||je>>5>=de.Ja||!Ie||!d?d=0:($&&($[0]=Ie),W&&(W[0]=d),d=1))}if(!d||($=$[0],Pe=Pe[0],ve&&(X[0]!=$||le[0]!=Pe)))return 3;Y!=null&&(Y[0]=de,Y.offset=y-Y.w,t(4294967286>y-Y.w),t(Y.offset==Y.ha-N));break}return Ae==0||Ae==7&&ve&&Y==null?(U!=null&&(U[0]|=de.na!=null&&0<de.na.length),k!=null&&(k[0]=$),I!=null&&(I[0]=Pe),0):Ae}function Vl(d,y,N){var k=y.width,I=y.height,U=0,$=0,W=k,Y=I;if(y.Da=d!=null&&0<d.Da,y.Da&&(W=d.cd,Y=d.bd,U=d.v,$=d.j,11>N||(U&=-2,$&=-2),0>U||0>$||0>=W||0>=Y||U+W>k||$+Y>I))return 0;if(y.v=U,y.j=$,y.va=U+W,y.o=$+Y,y.U=W,y.T=Y,y.da=d!=null&&0<d.da,y.da){if(!$r(W,Y,N=[d.ib],U=[d.hb]))return 0;y.ib=N[0],y.hb=U[0]}return y.ob=d!=null&&d.ob,y.Kb=d==null||!d.Sd,y.da&&(y.ob=y.ib<3*k/4&&y.hb<3*I/4,y.Kb=0),1}function iu(d){if(d==null)return 2;if(11>d.S){var y=d.f.RGBA;y.fb+=(d.height-1)*y.A,y.A=-y.A}else y=d.f.kb,d=d.height,y.O+=(d-1)*y.fa,y.fa=-y.fa,y.N+=(d-1>>1)*y.Ab,y.Ab=-y.Ab,y.W+=(d-1>>1)*y.Db,y.Db=-y.Db,y.F!=null&&(y.J+=(d-1)*y.lb,y.lb=-y.lb);return 0}function Jo(d,y,N,k){if(k==null||0>=d||0>=y)return 2;if(N!=null){if(N.Da){var I=N.cd,U=N.bd,$=-2&N.v,W=-2&N.j;if(0>$||0>W||0>=I||0>=U||$+I>d||W+U>y)return 2;d=I,y=U}if(N.da){if(!$r(d,y,I=[N.ib],U=[N.hb]))return 2;d=I[0],y=U[0]}}k.width=d,k.height=y;e:{var Y=k.width,X=k.height;if(d=k.S,0>=Y||0>=X||!(d>=Gu&&13>d))d=2;else{if(0>=k.Rd&&k.sd==null){$=U=I=y=0;var le=(W=Y*v[d])*X;if(11>d||(U=(X+1)/2*(y=(Y+1)/2),d==12&&($=(I=Y)*X)),(X=l(le+2*U+$))==null){d=1;break e}k.sd=X,11>d?((Y=k.f.RGBA).eb=X,Y.fb=0,Y.A=W,Y.size=le):((Y=k.f.kb).y=X,Y.O=0,Y.fa=W,Y.Fd=le,Y.f=X,Y.N=0+le,Y.Ab=y,Y.Cd=U,Y.ea=X,Y.W=0+le+U,Y.Db=y,Y.Ed=U,d==12&&(Y.F=X,Y.J=0+le+2*U),Y.Tc=$,Y.lb=I)}if(y=1,I=k.S,U=k.width,$=k.height,I>=Gu&&13>I)if(11>I)d=k.f.RGBA,y&=(W=Math.abs(d.A))*($-1)+U<=d.size,y&=W>=U*v[I],y&=d.eb!=null;else{d=k.f.kb,W=(U+1)/2,le=($+1)/2,Y=Math.abs(d.fa),X=Math.abs(d.Ab);var ve=Math.abs(d.Db),je=Math.abs(d.lb),de=je*($-1)+U;y&=Y*($-1)+U<=d.Fd,y&=X*(le-1)+W<=d.Cd,y=(y&=ve*(le-1)+W<=d.Ed)&Y>=U&X>=W&ve>=W,y&=d.y!=null,y&=d.f!=null,y&=d.ea!=null,I==12&&(y&=je>=U,y&=de<=d.Tc,y&=d.F!=null)}else y=0;d=y?0:2}}return d!=0||N!=null&&N.fd&&(d=iu(k)),d}var Ta=64,$l=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Ga=24,su=32,qu=8,yo=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];Be("Predictor0","PredictorAdd0"),J.Predictor0=function(){return 4278190080},J.Predictor1=function(d){return d},J.Predictor2=function(d,y,N){return y[N+0]},J.Predictor3=function(d,y,N){return y[N+1]},J.Predictor4=function(d,y,N){return y[N-1]},J.Predictor5=function(d,y,N){return at(at(d,y[N+1]),y[N+0])},J.Predictor6=function(d,y,N){return at(d,y[N-1])},J.Predictor7=function(d,y,N){return at(d,y[N+0])},J.Predictor8=function(d,y,N){return at(y[N-1],y[N+0])},J.Predictor9=function(d,y,N){return at(y[N+0],y[N+1])},J.Predictor10=function(d,y,N){return at(at(d,y[N-1]),at(y[N+0],y[N+1]))},J.Predictor11=function(d,y,N){var k=y[N+0];return 0>=Ot(k>>24&255,d>>24&255,(y=y[N-1])>>24&255)+Ot(k>>16&255,d>>16&255,y>>16&255)+Ot(k>>8&255,d>>8&255,y>>8&255)+Ot(255&k,255&d,255&y)?k:d},J.Predictor12=function(d,y,N){var k=y[N+0];return(Tt((d>>24&255)+(k>>24&255)-((y=y[N-1])>>24&255))<<24|Tt((d>>16&255)+(k>>16&255)-(y>>16&255))<<16|Tt((d>>8&255)+(k>>8&255)-(y>>8&255))<<8|Tt((255&d)+(255&k)-(255&y)))>>>0},J.Predictor13=function(d,y,N){var k=y[N-1];return(kt((d=at(d,y[N+0]))>>24&255,k>>24&255)<<24|kt(d>>16&255,k>>16&255)<<16|kt(d>>8&255,k>>8&255)<<8|kt(d>>0&255,k>>0&255))>>>0};var Tc=J.PredictorAdd0;J.PredictorAdd1=Qt,Be("Predictor2","PredictorAdd2"),Be("Predictor3","PredictorAdd3"),Be("Predictor4","PredictorAdd4"),Be("Predictor5","PredictorAdd5"),Be("Predictor6","PredictorAdd6"),Be("Predictor7","PredictorAdd7"),Be("Predictor8","PredictorAdd8"),Be("Predictor9","PredictorAdd9"),Be("Predictor10","PredictorAdd10"),Be("Predictor11","PredictorAdd11"),Be("Predictor12","PredictorAdd12"),Be("Predictor13","PredictorAdd13");var au=J.PredictorAdd2;nn("ColorIndexInverseTransform","MapARGB","32b",(function(d){return d>>8&255}),(function(d){return d})),nn("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",(function(d){return d}),(function(d){return d>>8&255}));var Vu,Qo=J.ColorIndexInverseTransform,ou=J.MapARGB,Gh=J.VP8LColorIndexInverseTransformAlpha,Pa=J.MapAlpha,el=J.VP8LPredictorsAdd=[];el.length=16,(J.VP8LPredictors=[]).length=16,(J.VP8LPredictorsAdd_C=[]).length=16,(J.VP8LPredictors_C=[]).length=16;var lu,xo,Ra,fc,El,pc,Mo,Hl,Li,ji,Ia,Ps,Wa,Rn,bi,ws,Gl,tl,Wl,Sd,$u,Yl,Pc,la,_i,Xn,zi,mn,sr=l(511),Rs=l(2041),mc=l(225),rl=l(767),bo=0,Xs=Rs,Hu=mc,tr=rl,La=sr,Gu=0,Ya=1,Do=2,js=3,Eu=4,cu=5,ca=6,Tl=7,ih=8,Rc=9,Ad=10,nl=[2,3,7],_o=[3,3,11],Ma=[280,256,256,256,40],En=[0,1,1,1,0],il=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],Fs=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],qi=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],sl=8,Da=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],Js=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Wi=null,Cd=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],qr=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],Er=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],sh=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],Ci=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],gi=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],gn=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Is=[],Ls=[],al=[],Gn=1,ua=2,Ic=[],Bs=[];$t("UpsampleRgbLinePair",Kn,3),$t("UpsampleBgrLinePair",_s,3),$t("UpsampleRgbaLinePair",oa,4),$t("UpsampleBgraLinePair",Ea,4),$t("UpsampleArgbLinePair",ba,4),$t("UpsampleRgba4444LinePair",Sn,2),$t("UpsampleRgb565LinePair",ts,2);var uu=J.UpsampleRgbLinePair,gc=J.UpsampleBgrLinePair,Oa=J.UpsampleRgbaLinePair,du=J.UpsampleBgraLinePair,no=J.UpsampleArgbLinePair,Pl=J.UpsampleRgba4444LinePair,Rl=J.UpsampleRgb565LinePair,wo=16,Tu=1<<wo-1,Zl=-227,ol=482,kd=6,Oo=0,Ms=l(256),Wu=l(256),hu=l(256),Kl=l(256),Cf=l(ol-Zl),ah=l(ol-Zl);Ec("YuvToRgbRow",Kn,3),Ec("YuvToBgrRow",_s,3),Ec("YuvToRgbaRow",oa,4),Ec("YuvToBgraRow",Ea,4),Ec("YuvToArgbRow",ba,4),Ec("YuvToRgba4444Row",Sn,2),Ec("YuvToRgb565Row",ts,2);var Us=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],fu=[0,2,8],m=[8,7,6,4,4,2,2,2,1,1,1,1],x=1;this.WebPDecodeRGBA=function(d,y,N,k,I){var U=Ya,$=new kl,W=new Cs;$.ba=W,W.S=U,W.width=[W.width],W.height=[W.height];var Y=W.width,X=W.height,le=new zs;if(le==null||d==null)var ve=2;else t(le!=null),ve=Xo(d,y,N,le.width,le.height,le.Pd,le.Qd,le.format,null);if(ve!=0?Y=0:(Y!=null&&(Y[0]=le.width[0]),X!=null&&(X[0]=le.height[0]),Y=1),Y){W.width=W.width[0],W.height=W.height[0],k!=null&&(k[0]=W.width),I!=null&&(I[0]=W.height);e:{if(k=new Nc,(I=new dc).data=d,I.w=y,I.ha=N,I.kd=1,y=[0],t(I!=null),((d=Xo(I.data,I.w,I.ha,null,null,null,y,null,I))==0||d==7)&&y[0]&&(d=4),(y=d)==0){if(t($!=null),k.data=I.data,k.w=I.w+I.offset,k.ha=I.ha-I.offset,k.put=Ce,k.ac=xe,k.bc=Te,k.ma=$,I.xa){if((d=gr())==null){$=1;break e}if((function(je,de){var Pe=[0],Ie=[0],Ae=[0];t:for(;;){if(je==null)return 0;if(de==null)return je.a=2,0;if(je.l=de,je.a=0,me(je.m,de.data,de.w,de.ha),!De(je.m,Pe,Ie,Ae)){je.a=3;break t}if(je.xb=ua,de.width=Pe[0],de.height=Ie[0],!or(Pe[0],Ie[0],1,je,null))break t;return 1}return t(je.a!=0),0})(d,k)){if(k=(y=Jo(k.width,k.height,$.Oa,$.ba))==0){t:{k=d;r:for(;;){if(k==null){k=0;break t}if(t(k.s.yc!=null),t(k.s.Ya!=null),t(0<k.s.Wb),t((N=k.l)!=null),t((I=N.ma)!=null),k.xb!=0){if(k.ca=I.ba,k.tb=I.tb,t(k.ca!=null),!Vl(I.Oa,N,js)){k.a=2;break r}if(!fr(k,N.width)||N.da)break r;if((N.da||zn(k.ca.S))&&vt(),11>k.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),k.ca.f.kb.F!=null&&vt()),k.Pb&&0<k.s.ua&&k.s.vb.X==null&&!wr(k.s.vb,k.s.Wa.Xa)){k.a=1;break r}k.xb=0}if(!mr(k,k.V,k.Ba,k.c,k.i,N.o,Xt))break r;I.Dc=k.Ma,k=1;break t}t(k.a!=0),k=0}k=!k}k&&(y=d.a)}else y=d.a}else{if((d=new ks)==null){$=1;break e}if(d.Fa=I.na,d.P=I.P,d.qc=I.Sa,Aa(d,k)){if((y=Jo(k.width,k.height,$.Oa,$.ba))==0){if(d.Aa=0,N=$.Oa,t((I=d)!=null),N!=null){if(0<(Y=0>(Y=N.Md)?0:100<Y?255:255*Y/100)){for(X=le=0;4>X;++X)12>(ve=I.pb[X]).lc&&(ve.ia=Y*m[0>ve.lc?0:ve.lc]>>3),le|=ve.ia;le&&(alert("todo:VP8InitRandom"),I.ia=1)}I.Ga=N.Id,100<I.Ga?I.Ga=100:0>I.Ga&&(I.Ga=0)}ya(d,k)||(y=d.a)}}else y=d.a}y==0&&$.Oa!=null&&$.Oa.fd&&(y=iu($.ba))}$=y}U=$!=0?null:11>U?W.f.RGBA.eb:W.f.kb.y}else U=null;return U};var v=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function w(J,Se){for(var _e="",re=0;re<4;re++)_e+=String.fromCharCode(J[Se++]);return _e}function j(J,Se){return(J[Se+0]<<0|J[Se+1]<<8|J[Se+2]<<16)>>>0}function S(J,Se){return(J[Se+0]<<0|J[Se+1]<<8|J[Se+2]<<16|J[Se+3]<<24)>>>0}new g;var T=[0],E=[0],O=[],R=new g,F=n,B=(function(J,Se){var _e={},re=0,ce=!1,fe=0,ye=0;if(_e.frames=[],!(function(ue,Ne,Me,We){for(var Ve=0;Ve<We;Ve++)if(ue[Ne+Ve]!=Me.charCodeAt(Ve))return!0;return!1})(J,Se,"RIFF",4)){var Fe,Q;for(S(J,Se+=4),Se+=8;Se<J.length;){var pe=w(J,Se),me=S(J,Se+=4);Se+=4;var Ue=me+(1&me);switch(pe){case"VP8 ":case"VP8L":_e.frames[re]===void 0&&(_e.frames[re]={}),(te=_e.frames[re]).src_off=ce?ye:Se-8,te.src_size=fe+me+8,re++,ce&&(ce=!1,fe=0,ye=0);break;case"VP8X":(te=_e.header={}).feature_flags=J[Se];var Ke=Se+4;te.canvas_width=1+j(J,Ke),Ke+=3,te.canvas_height=1+j(J,Ke),Ke+=3;break;case"ALPH":ce=!0,fe=Ue+8,ye=Se-8;break;case"ANIM":(te=_e.header).bgcolor=S(J,Se),Ke=Se+4,te.loop_count=(Fe=J)[(Q=Ke)+0]<<0|Fe[Q+1]<<8,Ke+=2;break;case"ANMF":var Re,te;(te=_e.frames[re]={}).offset_x=2*j(J,Se),Se+=3,te.offset_y=2*j(J,Se),Se+=3,te.width=1+j(J,Se),Se+=3,te.height=1+j(J,Se),Se+=3,te.duration=j(J,Se),Se+=3,Re=J[Se++],te.dispose=1&Re,te.blend=Re>>1&1}pe!="ANMF"&&(Se+=Ue)}return _e}})(F,0);B.response=F,B.rgbaoutput=!0,B.dataurl=!1;var G=B.header?B.header:null,z=B.frames?B.frames:null;if(G){G.loop_counter=G.loop_count,T=[G.canvas_height],E=[G.canvas_width];for(var ee=0;ee<z.length&&z[ee].blend!=0;ee++);}var ie=z[0],ge=R.WebPDecodeRGBA(F,ie.src_off,ie.src_size,E,T);ie.rgba=ge,ie.imgwidth=E[0],ie.imgheight=T[0];for(var K=0;K<E[0]*T[0]*4;K++)O[K]=ge[K];return this.width=E,this.height=T,this.data=O,this}(function(n){var t=function(){return typeof mw=="function"},r=function(T,E,O,R){var F=4,B=a;switch(R){case n.image_compression.FAST:F=1,B=l;break;case n.image_compression.MEDIUM:F=6,B=p;break;case n.image_compression.SLOW:F=9,B=g}T=i(T,E,O,B);var G=mw(T,{level:F});return n.__addimage__.arrayBufferToBinaryString(G)},i=function(T,E,O,R){for(var F,B,G,z=T.length/E,ee=new Uint8Array(T.length+z),ie=j(),ge=0;ge<z;ge+=1){if(G=ge*E,F=T.subarray(G,G+E),R)ee.set(R(F,O,B),G+ge);else{for(var K,J=ie.length,Se=[];K<J;K+=1)Se[K]=ie[K](F,O,B);var _e=S(Se.concat());ee.set(Se[_e],G+ge)}B=F}return ee},o=function(T){var E=Array.apply([],T);return E.unshift(0),E},l=function(T,E){var O,R=[],F=T.length;R[0]=1;for(var B=0;B<F;B+=1)O=T[B-E]||0,R[B+1]=T[B]-O+256&255;return R},a=function(T,E,O){var R,F=[],B=T.length;F[0]=2;for(var G=0;G<B;G+=1)R=O&&O[G]||0,F[G+1]=T[G]-R+256&255;return F},p=function(T,E,O){var R,F,B=[],G=T.length;B[0]=3;for(var z=0;z<G;z+=1)R=T[z-E]||0,F=O&&O[z]||0,B[z+1]=T[z]+256-(R+F>>>1)&255;return B},g=function(T,E,O){var R,F,B,G,z=[],ee=T.length;z[0]=4;for(var ie=0;ie<ee;ie+=1)R=T[ie-E]||0,F=O&&O[ie]||0,B=O&&O[ie-E]||0,G=w(R,F,B),z[ie+1]=T[ie]-G+256&255;return z},w=function(T,E,O){if(T===E&&E===O)return T;var R=Math.abs(E-O),F=Math.abs(T-O),B=Math.abs(T+E-O-O);return R<=F&&R<=B?T:F<=B?E:O},j=function(){return[o,l,a,p,g]},S=function(T){var E=T.map((function(O){return O.reduce((function(R,F){return R+Math.abs(F)}),0)}));return E.indexOf(Math.min.apply(null,E))};n.processPNG=function(T,E,O,R){var F,B,G,z,ee,ie,ge,K,J,Se,_e,re,ce,fe,ye,Fe=this.decode.FLATE_DECODE,Q="";if(this.__addimage__.isArrayBuffer(T)&&(T=new Uint8Array(T)),this.__addimage__.isArrayBufferView(T)){if(T=(G=new MH(T)).imgData,B=G.bits,F=G.colorSpace,ee=G.colors,[4,6].indexOf(G.colorType)!==-1){if(G.bits===8){J=(K=G.pixelBitlength==32?new Uint32Array(G.decodePixels().buffer):G.pixelBitlength==16?new Uint16Array(G.decodePixels().buffer):new Uint8Array(G.decodePixels().buffer)).length,_e=new Uint8Array(J*G.colors),Se=new Uint8Array(J);var pe,me=G.pixelBitlength-G.bits;for(fe=0,ye=0;fe<J;fe++){for(ce=K[fe],pe=0;pe<me;)_e[ye++]=ce>>>pe&255,pe+=G.bits;Se[fe]=ce>>>pe&255}}if(G.bits===16){J=(K=new Uint32Array(G.decodePixels().buffer)).length,_e=new Uint8Array(J*(32/G.pixelBitlength)*G.colors),Se=new Uint8Array(J*(32/G.pixelBitlength)),re=G.colors>1,fe=0,ye=0;for(var Ue=0;fe<J;)ce=K[fe++],_e[ye++]=ce>>>0&255,re&&(_e[ye++]=ce>>>16&255,ce=K[fe++],_e[ye++]=ce>>>0&255),Se[Ue++]=ce>>>16&255;B=8}R!==n.image_compression.NONE&&t()?(T=r(_e,G.width*G.colors,G.colors,R),ge=r(Se,G.width,1,R)):(T=_e,ge=Se,Fe=void 0)}if(G.colorType===3&&(F=this.color_spaces.INDEXED,ie=G.palette,G.transparency.indexed)){var Ke=G.transparency.indexed,Re=0;for(fe=0,J=Ke.length;fe<J;++fe)Re+=Ke[fe];if((Re/=255)===J-1&&Ke.indexOf(0)!==-1)z=[Ke.indexOf(0)];else if(Re!==J){for(K=G.decodePixels(),Se=new Uint8Array(K.length),fe=0,J=K.length;fe<J;fe++)Se[fe]=Ke[K[fe]];ge=r(Se,G.width,1)}}var te=(function(ue){var Ne;switch(ue){case n.image_compression.FAST:Ne=11;break;case n.image_compression.MEDIUM:Ne=13;break;case n.image_compression.SLOW:Ne=14;break;default:Ne=12}return Ne})(R);return Fe===this.decode.FLATE_DECODE&&(Q="/Predictor "+te+" "),Q+="/Colors "+ee+" /BitsPerComponent "+B+" /Columns "+G.width,(this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),(ge&&this.__addimage__.isArrayBuffer(ge)||this.__addimage__.isArrayBufferView(ge))&&(ge=this.__addimage__.arrayBufferToBinaryString(ge)),{alias:O,data:T,index:E,filter:Fe,decodeParameters:Q,transparency:z,palette:ie,sMask:ge,predictor:te,width:G.width,height:G.height,bitsPerComponent:B,colorSpace:F}}}})(Bn.API),(function(n){n.processGIF89A=function(t,r,i,o){var l=new DH(t),a=l.width,p=l.height,g=[];l.decodeAndBlitFrameRGBA(0,g);var w={data:g,width:a,height:p},j=new N2(100).encode(w,100);return n.processJPEG.call(this,j,r,i,o)},n.processGIF87A=n.processGIF89A})(Bn.API),Nh.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var n=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(n);for(var t=0;t<n;t++){var r=this.datav.getUint8(this.pos++,!0),i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:o,green:i,blue:r,quad:l}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},Nh.prototype.parseBGR=function(){this.pos=this.offset;try{var n="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[n]()}catch(r){ga.log("bit decode error:"+r)}},Nh.prototype.bit1=function(){var n,t=Math.ceil(this.width/8),r=t%4;for(n=this.height-1;n>=0;n--){for(var i=this.bottom_up?n:this.height-1-n,o=0;o<t;o++)for(var l=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+8*o*4,p=0;p<8&&8*o+p<this.width;p++){var g=this.palette[l>>7-p&1];this.data[a+4*p]=g.blue,this.data[a+4*p+1]=g.green,this.data[a+4*p+2]=g.red,this.data[a+4*p+3]=255}r!==0&&(this.pos+=4-r)}},Nh.prototype.bit4=function(){for(var n=Math.ceil(this.width/2),t=n%4,r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<n;o++){var l=this.datav.getUint8(this.pos++,!0),a=i*this.width*4+2*o*4,p=l>>4,g=15&l,w=this.palette[p];if(this.data[a]=w.blue,this.data[a+1]=w.green,this.data[a+2]=w.red,this.data[a+3]=255,2*o+1>=this.width)break;w=this.palette[g],this.data[a+4]=w.blue,this.data[a+4+1]=w.green,this.data[a+4+2]=w.red,this.data[a+4+3]=255}t!==0&&(this.pos+=4-t)}},Nh.prototype.bit8=function(){for(var n=this.width%4,t=this.height-1;t>=0;t--){for(var r=this.bottom_up?t:this.height-1-t,i=0;i<this.width;i++){var o=this.datav.getUint8(this.pos++,!0),l=r*this.width*4+4*i;if(o<this.palette.length){var a=this.palette[o];this.data[l]=a.red,this.data[l+1]=a.green,this.data[l+2]=a.blue,this.data[l+3]=255}else this.data[l]=255,this.data[l+1]=255,this.data[l+2]=255,this.data[l+3]=255}n!==0&&(this.pos+=4-n)}},Nh.prototype.bit15=function(){for(var n=this.width%3,t=parseInt("11111",2),r=this.height-1;r>=0;r--){for(var i=this.bottom_up?r:this.height-1-r,o=0;o<this.width;o++){var l=this.datav.getUint16(this.pos,!0);this.pos+=2;var a=(l&t)/t*255|0,p=(l>>5&t)/t*255|0,g=(l>>10&t)/t*255|0,w=l>>15?255:0,j=i*this.width*4+4*o;this.data[j]=g,this.data[j+1]=p,this.data[j+2]=a,this.data[j+3]=w}this.pos+=n}},Nh.prototype.bit16=function(){for(var n=this.width%3,t=parseInt("11111",2),r=parseInt("111111",2),i=this.height-1;i>=0;i--){for(var o=this.bottom_up?i:this.height-1-i,l=0;l<this.width;l++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var p=(a&t)/t*255|0,g=(a>>5&r)/r*255|0,w=(a>>11)/t*255|0,j=o*this.width*4+4*l;this.data[j]=w,this.data[j+1]=g,this.data[j+2]=p,this.data[j+3]=255}this.pos+=n}},Nh.prototype.bit24=function(){for(var n=this.height-1;n>=0;n--){for(var t=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),a=t*this.width*4+4*r;this.data[a]=l,this.data[a+1]=o,this.data[a+2]=i,this.data[a+3]=255}this.pos+=this.width%4}},Nh.prototype.bit32=function(){for(var n=this.height-1;n>=0;n--)for(var t=this.bottom_up?n:this.height-1-n,r=0;r<this.width;r++){var i=this.datav.getUint8(this.pos++,!0),o=this.datav.getUint8(this.pos++,!0),l=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),p=t*this.width*4+4*r;this.data[p]=l,this.data[p+1]=o,this.data[p+2]=i,this.data[p+3]=a}},Nh.prototype.getData=function(){return this.data},(function(n){n.processBMP=function(t,r,i,o){var l=new Nh(t,!1),a=l.width,p=l.height,g={data:l.getData(),width:a,height:p},w=new N2(100).encode(g,100);return n.processJPEG.call(this,w,r,i,o)}})(Bn.API),ZS.prototype.getData=function(){return this.data},(function(n){n.processWEBP=function(t,r,i,o){var l=new ZS(t),a=l.width,p=l.height,g={data:l.getData(),width:a,height:p},w=new N2(100).encode(g,100);return n.processJPEG.call(this,w,r,i,o)}})(Bn.API),Bn.API.processRGBA=function(n,t,r){for(var i=n.data,o=i.length,l=new Uint8Array(o/4*3),a=new Uint8Array(o/4),p=0,g=0,w=0;w<o;w+=4){var j=i[w],S=i[w+1],T=i[w+2],E=i[w+3];l[p++]=j,l[p++]=S,l[p++]=T,a[g++]=E}var O=this.__addimage__.arrayBufferToBinaryString(l);return{alpha:this.__addimage__.arrayBufferToBinaryString(a),data:O,index:t,alias:r,colorSpace:"DeviceRGB",bitsPerComponent:8,width:n.width,height:n.height}},Bn.API.setLanguage=function(n){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[n]!==void 0&&(this.internal.languageSettings.languageCode=n,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")})),this.internal.languageSettings.isSubscribed=!0)),this},kv=Bn.API,O1=kv.getCharWidthsArray=function(n,t){var r,i,o=(t=t||{}).font||this.internal.getFont(),l=t.fontSize||this.internal.getFontSize(),a=t.charSpace||this.internal.getCharSpace(),p=t.widths?t.widths:o.metadata.Unicode.widths,g=p.fof?p.fof:1,w=t.kerning?t.kerning:o.metadata.Unicode.kerning,j=w.fof?w.fof:1,S=t.doKerning!==!1,T=0,E=n.length,O=0,R=p[0]||g,F=[];for(r=0;r<E;r++)i=n.charCodeAt(r),typeof o.metadata.widthOfString=="function"?F.push((o.metadata.widthOfGlyph(o.metadata.characterToGlyph(i))+a*(1e3/l)||0)/1e3):(T=S&&Zs(w[i])==="object"&&!isNaN(parseInt(w[i][O],10))?w[i][O]/j:0,F.push((p[i]||R)/g+T)),O=i;return F},HS=kv.getStringUnitWidth=function(n,t){var r=(t=t||{}).fontSize||this.internal.getFontSize(),i=t.font||this.internal.getFont(),o=t.charSpace||this.internal.getCharSpace();return kv.processArabic&&(n=kv.processArabic(n)),typeof i.metadata.widthOfString=="function"?i.metadata.widthOfString(n,r,o)/r:O1.apply(this,arguments).reduce((function(l,a){return l+a}),0)},GS=function(n,t,r,i){for(var o=[],l=0,a=n.length,p=0;l!==a&&p+t[l]<r;)p+=t[l],l++;o.push(n.slice(0,l));var g=l;for(p=0;l!==a;)p+t[l]>i&&(o.push(n.slice(g,l)),p=0,g=l),p+=t[l],l++;return g!==l&&o.push(n.slice(g,l)),o},WS=function(n,t,r){r||(r={});var i,o,l,a,p,g,w,j=[],S=[j],T=r.textIndent||0,E=0,O=0,R=n.split(" "),F=O1.apply(this,[" ",r])[0];if(g=r.lineIndent===-1?R[0].length+2:r.lineIndent||0){var B=Array(g).join(" "),G=[];R.map((function(ee){(ee=ee.split(/\s*\n/)).length>1?G=G.concat(ee.map((function(ie,ge){return(ge&&ie.length?`
`:"")+ie}))):G.push(ee[0])})),R=G,g=HS.apply(this,[B,r])}for(l=0,a=R.length;l<a;l++){var z=0;if(i=R[l],g&&i[0]==`
`&&(i=i.substr(1),z=1),T+E+(O=(o=O1.apply(this,[i,r])).reduce((function(ee,ie){return ee+ie}),0))>t||z){if(O>t){for(p=GS.apply(this,[i,o,t-(T+E),t]),j.push(p.shift()),j=[p.pop()];p.length;)S.push([p.shift()]);O=o.slice(i.length-(j[0]?j[0].length:0)).reduce((function(ee,ie){return ee+ie}),0)}else j=[i];S.push(j),T=O+g,E=F}else j.push(i),T+=E+O,E=F}return w=g?function(ee,ie){return(ie?B:"")+ee.join(" ")}:function(ee){return ee.join(" ")},S.map(w)},kv.splitTextToSize=function(n,t,r){var i,o=(r=r||{}).fontSize||this.internal.getFontSize(),l=(function(j){if(j.widths&&j.kerning)return{widths:j.widths,kerning:j.kerning};var S=this.internal.getFont(j.fontName,j.fontStyle);return S.metadata.Unicode?{widths:S.metadata.Unicode.widths||{0:1},kerning:S.metadata.Unicode.kerning||{}}:{font:S.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,r);i=Array.isArray(n)?n:String(n).split(/\r?\n/);var a=1*this.internal.scaleFactor*t/o;l.textIndent=r.textIndent?1*r.textIndent*this.internal.scaleFactor/o:0,l.lineIndent=r.lineIndent;var p,g,w=[];for(p=0,g=i.length;p<g;p++)w=w.concat(WS.apply(this,[i[p],a,l]));return w},(function(n){n.__fontmetrics__=n.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",r={},i={},o=0;o<t.length;o++)r[t[o]]="0123456789abcdef"[o],i["0123456789abcdef"[o]]=t[o];var l=function(S){return"0x"+parseInt(S,10).toString(16)},a=n.__fontmetrics__.compress=function(S){var T,E,O,R,F=["{"];for(var B in S){if(T=S[B],isNaN(parseInt(B,10))?E="'"+B+"'":(B=parseInt(B,10),E=(E=l(B).slice(2)).slice(0,-1)+i[E.slice(-1)]),typeof T=="number")T<0?(O=l(T).slice(3),R="-"):(O=l(T).slice(2),R=""),O=R+O.slice(0,-1)+i[O.slice(-1)];else{if(Zs(T)!=="object")throw new Error("Don't know what to do with value type "+Zs(T)+".");O=a(T)}F.push(E+O)}return F.push("}"),F.join("")},p=n.__fontmetrics__.uncompress=function(S){if(typeof S!="string")throw new Error("Invalid argument passed to uncompress.");for(var T,E,O,R,F={},B=1,G=F,z=[],ee="",ie="",ge=S.length-1,K=1;K<ge;K+=1)(R=S[K])=="'"?T?(O=T.join(""),T=void 0):T=[]:T?T.push(R):R=="{"?(z.push([G,O]),G={},O=void 0):R=="}"?((E=z.pop())[0][E[1]]=G,O=void 0,G=E[0]):R=="-"?B=-1:O===void 0?r.hasOwnProperty(R)?(ee+=r[R],O=parseInt(ee,16)*B,B=1,ee=""):ee+=R:r.hasOwnProperty(R)?(ie+=r[R],G[O]=parseInt(ie,16)*B,B=1,O=void 0,ie=""):ie+=R;return F},g={codePages:["WinAnsiEncoding"],WinAnsiEncoding:p("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},w={Unicode:{Courier:g,"Courier-Bold":g,"Courier-BoldOblique":g,"Courier-Oblique":g,Helvetica:g,"Helvetica-Bold":g,"Helvetica-BoldOblique":g,"Helvetica-Oblique":g,"Times-Roman":g,"Times-Bold":g,"Times-BoldItalic":g,"Times-Italic":g}},j={Unicode:{"Courier-Oblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":p("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":p("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:p("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":p("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:p("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":p("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":p("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":p("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":p("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};n.events.push(["addFont",function(S){var T=S.font,E=j.Unicode[T.postScriptName];E&&(T.metadata.Unicode={},T.metadata.Unicode.widths=E.widths,T.metadata.Unicode.kerning=E.kerning);var O=w.Unicode[T.postScriptName];O&&(T.metadata.Unicode.encoding=O,T.encoding=O.codePages[0])}])})(Bn.API),(function(n){var t=function(r){for(var i=r.length,o=new Uint8Array(i),l=0;l<i;l++)o[l]=r.charCodeAt(l);return o};n.API.events.push(["addFont",function(r){var i=void 0,o=r.font,l=r.instance;if(!o.isStandardFont){if(l===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");if(typeof(i=l.existsFileInVFS(o.postScriptName)===!1?l.loadFile(o.postScriptName):l.getFileFromVFS(o.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+o.postScriptName+"').");(function(a,p){p=/^\x00\x01\x00\x00/.test(p)?t(p):t(Tx(p)),a.metadata=n.API.TTFFont.open(p),a.metadata.Unicode=a.metadata.Unicode||{encoding:{},kerning:{},widths:[]},a.metadata.glyIdsUsed=[0]})(o,i)}}])})(Bn),(function(n){function t(){return(qn.canvg?Promise.resolve(qn.canvg):_b(()=>import("./index.es-oUuc4B4i.js"),[])).catch((function(r){return Promise.reject(new Error("Could not load canvg: "+r))})).then((function(r){return r.default?r.default:r}))}Bn.API.addSvgAsImage=function(r,i,o,l,a,p,g,w){if(isNaN(i)||isNaN(o))throw ga.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(l)||isNaN(a))throw ga.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var j=document.createElement("canvas");j.width=l,j.height=a;var S=j.getContext("2d");S.fillStyle="#fff",S.fillRect(0,0,j.width,j.height);var T={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},E=this;return t().then((function(O){return O.fromString(S,r,T)}),(function(){return Promise.reject(new Error("Could not load canvg."))})).then((function(O){return O.render(T)})).then((function(){E.addImage(j.toDataURL("image/jpeg",1),i,o,l,a,g,w)}))}})(),Bn.API.putTotalPages=function(n){var t,r=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(n,"g"),r=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(n,this.internal.getFont()),"g"),r=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var i=1;i<=this.internal.getNumberOfPages();i++)for(var o=0;o<this.internal.pages[i].length;o++)this.internal.pages[i][o]=this.internal.pages[i][o].replace(t,r);return this},Bn.API.viewerPreferences=function(n,t){var r;n=n||{},t=t||!1;var i,o,l,a={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},p=Object.keys(a),g=[],w=0,j=0,S=0;function T(O,R){var F,B=!1;for(F=0;F<O.length;F+=1)O[F]===R&&(B=!0);return B}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(a)),this.internal.viewerpreferences.isSubscribed=!1),r=this.internal.viewerpreferences.configuration,n==="reset"||t===!0){var E=p.length;for(S=0;S<E;S+=1)r[p[S]].value=r[p[S]].defaultValue,r[p[S]].explicitSet=!1}if(Zs(n)==="object"){for(o in n)if(l=n[o],T(p,o)&&l!==void 0){if(r[o].type==="boolean"&&typeof l=="boolean")r[o].value=l;else if(r[o].type==="name"&&T(r[o].valueSet,l))r[o].value=l;else if(r[o].type==="integer"&&Number.isInteger(l))r[o].value=l;else if(r[o].type==="array"){for(w=0;w<l.length;w+=1)if(i=!0,l[w].length===1&&typeof l[w][0]=="number")g.push(String(l[w]-1));else if(l[w].length>1){for(j=0;j<l[w].length;j+=1)typeof l[w][j]!="number"&&(i=!1);i===!0&&g.push([l[w][0]-1,l[w][1]-1].join(" "))}r[o].value="["+g.join(" ")+"]"}else r[o].value=r[o].defaultValue;r[o].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",(function(){var O,R=[];for(O in r)r[O].explicitSet===!0&&(r[O].type==="name"?R.push("/"+O+" /"+r[O].value):R.push("/"+O+" "+r[O].value));R.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+R.join(`
`)+`
>>`)})),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=r,this},(function(n){var t=function(){var i='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',o=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),l=unescape(encodeURIComponent(i)),a=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),p=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),g=unescape(encodeURIComponent("</x:xmpmeta>")),w=l.length+a.length+p.length+o.length+g.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+w+" >>"),this.internal.write("stream"),this.internal.write(o+l+a+p+g),this.internal.write("endstream"),this.internal.write("endobj")},r=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};n.addMetadata=function(i,o){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:i,namespaceuri:o||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",r),this.internal.events.subscribe("postPutResources",t)),this}})(Bn.API),(function(n){var t=n.API,r=t.pdfEscape16=function(l,a){for(var p,g=a.metadata.Unicode.widths,w=["","0","00","000","0000"],j=[""],S=0,T=l.length;S<T;++S){if(p=a.metadata.characterToGlyph(l.charCodeAt(S)),a.metadata.glyIdsUsed.push(p),a.metadata.toUnicode[p]=l.charCodeAt(S),g.indexOf(p)==-1&&(g.push(p),g.push([parseInt(a.metadata.widthOfGlyph(p),10)])),p=="0")return j.join("");p=p.toString(16),j.push(w[4-p.length],p)}return j.join("")},i=function(l){var a,p,g,w,j,S,T;for(j=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,g=[],S=0,T=(p=Object.keys(l).sort((function(E,O){return E-O}))).length;S<T;S++)a=p[S],g.length>=100&&(j+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar`,g=[]),l[a]!==void 0&&l[a]!==null&&typeof l[a].toString=="function"&&(w=("0000"+l[a].toString(16)).slice(-4),a=("0000"+(+a).toString(16)).slice(-4),g.push("<"+a+"><"+w+">"));return g.length&&(j+=`
`+g.length+` beginbfchar
`+g.join(`
`)+`
endbfchar
`),j+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(l){(function(a){var p=a.font,g=a.out,w=a.newObject,j=a.putStream;if(p.metadata instanceof n.API.TTFFont&&p.encoding==="Identity-H"){for(var S=p.metadata.Unicode.widths,T=p.metadata.subset.encode(p.metadata.glyIdsUsed,1),E="",O=0;O<T.length;O++)E+=String.fromCharCode(T[O]);var R=w();j({data:E,addLength1:!0,objectId:R}),g("endobj");var F=w();j({data:i(p.metadata.toUnicode),addLength1:!0,objectId:F}),g("endobj");var B=w();g("<<"),g("/Type /FontDescriptor"),g("/FontName /"+Mv(p.fontName)),g("/FontFile2 "+R+" 0 R"),g("/FontBBox "+n.API.PDFObject.convert(p.metadata.bbox)),g("/Flags "+p.metadata.flags),g("/StemV "+p.metadata.stemV),g("/ItalicAngle "+p.metadata.italicAngle),g("/Ascent "+p.metadata.ascender),g("/Descent "+p.metadata.decender),g("/CapHeight "+p.metadata.capHeight),g(">>"),g("endobj");var G=w();g("<<"),g("/Type /Font"),g("/BaseFont /"+Mv(p.fontName)),g("/FontDescriptor "+B+" 0 R"),g("/W "+n.API.PDFObject.convert(S)),g("/CIDToGIDMap /Identity"),g("/DW 1000"),g("/Subtype /CIDFontType2"),g("/CIDSystemInfo"),g("<<"),g("/Supplement 0"),g("/Registry (Adobe)"),g("/Ordering ("+p.encoding+")"),g(">>"),g(">>"),g("endobj"),p.objectNumber=w(),g("<<"),g("/Type /Font"),g("/Subtype /Type0"),g("/ToUnicode "+F+" 0 R"),g("/BaseFont /"+Mv(p.fontName)),g("/Encoding /"+p.encoding),g("/DescendantFonts ["+G+" 0 R]"),g(">>"),g("endobj"),p.isAlreadyPutted=!0}})(l)}]),t.events.push(["putFont",function(l){(function(a){var p=a.font,g=a.out,w=a.newObject,j=a.putStream;if(p.metadata instanceof n.API.TTFFont&&p.encoding==="WinAnsiEncoding"){for(var S=p.metadata.rawData,T="",E=0;E<S.length;E++)T+=String.fromCharCode(S[E]);var O=w();j({data:T,addLength1:!0,objectId:O}),g("endobj");var R=w();j({data:i(p.metadata.toUnicode),addLength1:!0,objectId:R}),g("endobj");var F=w();g("<<"),g("/Descent "+p.metadata.decender),g("/CapHeight "+p.metadata.capHeight),g("/StemV "+p.metadata.stemV),g("/Type /FontDescriptor"),g("/FontFile2 "+O+" 0 R"),g("/Flags 96"),g("/FontBBox "+n.API.PDFObject.convert(p.metadata.bbox)),g("/FontName /"+Mv(p.fontName)),g("/ItalicAngle "+p.metadata.italicAngle),g("/Ascent "+p.metadata.ascender),g(">>"),g("endobj"),p.objectNumber=w();for(var B=0;B<p.metadata.hmtx.widths.length;B++)p.metadata.hmtx.widths[B]=parseInt(p.metadata.hmtx.widths[B]*(1e3/p.metadata.head.unitsPerEm));g("<</Subtype/TrueType/Type/Font/ToUnicode "+R+" 0 R/BaseFont/"+Mv(p.fontName)+"/FontDescriptor "+F+" 0 R/Encoding/"+p.encoding+" /FirstChar 29 /LastChar 255 /Widths "+n.API.PDFObject.convert(p.metadata.hmtx.widths)+">>"),g("endobj"),p.isAlreadyPutted=!0}})(l)}]);var o=function(l){var a,p=l.text||"",g=l.x,w=l.y,j=l.options||{},S=l.mutex||{},T=S.pdfEscape,E=S.activeFontKey,O=S.fonts,R=E,F="",B=0,G="",z=O[R].encoding;if(O[R].encoding!=="Identity-H")return{text:p,x:g,y:w,options:j,mutex:S};for(G=p,R=E,Array.isArray(p)&&(G=p[0]),B=0;B<G.length;B+=1)O[R].metadata.hasOwnProperty("cmap")&&(a=O[R].metadata.cmap.unicode.codeMap[G[B].charCodeAt(0)]),a||G[B].charCodeAt(0)<256&&O[R].metadata.hasOwnProperty("Unicode")?F+=G[B]:F+="";var ee="";return parseInt(R.slice(1))<14||z==="WinAnsiEncoding"?ee=T(F,R).split("").map((function(ie){return ie.charCodeAt(0).toString(16)})).join(""):z==="Identity-H"&&(ee=r(F,O[R])),S.isHex=!0,{text:ee,x:g,y:w,options:j,mutex:S}};t.events.push(["postProcessText",function(l){var a=l.text||"",p=[],g={text:a,x:l.x,y:l.y,options:l.options,mutex:l.mutex};if(Array.isArray(a)){var w=0;for(w=0;w<a.length;w+=1)Array.isArray(a[w])&&a[w].length===3?p.push([o(Object.assign({},g,{text:a[w][0]})).text,a[w][1],a[w][2]]):p.push(o(Object.assign({},g,{text:a[w]})).text);l.text=p}else l.text=o(Object.assign({},g,{text:a})).text}])})(Bn),(function(n){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};n.existsFileInVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0},n.addFileToVFS=function(r,i){return t.call(this),this.internal.vFS[r]=i,this},n.getFileFromVFS=function(r){return t.call(this),this.internal.vFS[r]!==void 0?this.internal.vFS[r]:null}})(Bn.API),(function(n){n.__bidiEngine__=n.prototype.__bidiEngine__=function(i){var o,l,a,p,g,w,j,S=t,T=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],E=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],O={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},R={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},F=["(",")","(","<",">","<","[","]","[","{","}","{","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","","",""],B=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),G=!1,z=0;this.__bidiEngine__={};var ee=function(re){var ce=re.charCodeAt(),fe=ce>>8,ye=R[fe];return ye!==void 0?S[256*ye+(255&ce)]:fe===252||fe===253?"AL":B.test(fe)?"L":fe===8?"R":"N"},ie=function(re){for(var ce,fe=0;fe<re.length;fe++){if((ce=ee(re.charAt(fe)))==="L")return!1;if(ce==="R")return!0}return!1},ge=function(re,ce,fe,ye){var Fe,Q,pe,me,Ue=ce[ye];switch(Ue){case"L":case"R":G=!1;break;case"N":case"AN":break;case"EN":G&&(Ue="AN");break;case"AL":G=!0,Ue="R";break;case"WS":Ue="N";break;case"CS":ye<1||ye+1>=ce.length||(Fe=fe[ye-1])!=="EN"&&Fe!=="AN"||(Q=ce[ye+1])!=="EN"&&Q!=="AN"?Ue="N":G&&(Q="AN"),Ue=Q===Fe?Q:"N";break;case"ES":Ue=(Fe=ye>0?fe[ye-1]:"B")==="EN"&&ye+1<ce.length&&ce[ye+1]==="EN"?"EN":"N";break;case"ET":if(ye>0&&fe[ye-1]==="EN"){Ue="EN";break}if(G){Ue="N";break}for(pe=ye+1,me=ce.length;pe<me&&ce[pe]==="ET";)pe++;Ue=pe<me&&ce[pe]==="EN"?"EN":"N";break;case"NSM":if(a&&!p){for(me=ce.length,pe=ye+1;pe<me&&ce[pe]==="NSM";)pe++;if(pe<me){var Ke=re[ye],Re=Ke>=1425&&Ke<=2303||Ke===64286;if(Fe=ce[pe],Re&&(Fe==="R"||Fe==="AL")){Ue="R";break}}}Ue=ye<1||(Fe=ce[ye-1])==="B"?"N":fe[ye-1];break;case"B":G=!1,o=!0,Ue=z;break;case"S":l=!0,Ue="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":G=!1;break;case"BN":Ue="N"}return Ue},K=function(re,ce,fe){var ye=re.split("");return fe&&J(ye,fe,{hiLevel:z}),ye.reverse(),ce&&ce.reverse(),ye.join("")},J=function(re,ce,fe){var ye,Fe,Q,pe,me,Ue=-1,Ke=re.length,Re=0,te=[],ue=z?E:T,Ne=[];for(G=!1,o=!1,l=!1,Fe=0;Fe<Ke;Fe++)Ne[Fe]=ee(re[Fe]);for(Q=0;Q<Ke;Q++){if(me=Re,te[Q]=ge(re,Ne,te,Q),ye=240&(Re=ue[me][O[te[Q]]]),Re&=15,ce[Q]=pe=ue[Re][5],ye>0)if(ye===16){for(Fe=Ue;Fe<Q;Fe++)ce[Fe]=1;Ue=-1}else Ue=-1;if(ue[Re][6])Ue===-1&&(Ue=Q);else if(Ue>-1){for(Fe=Ue;Fe<Q;Fe++)ce[Fe]=pe;Ue=-1}Ne[Q]==="B"&&(ce[Q]=0),fe.hiLevel|=pe}l&&(function(Me,We,Ve){for(var tt=0;tt<Ve;tt++)if(Me[tt]==="S"){We[tt]=z;for(var Qe=tt-1;Qe>=0&&Me[Qe]==="WS";Qe--)We[Qe]=z}})(Ne,ce,Ke)},Se=function(re,ce,fe,ye,Fe){if(!(Fe.hiLevel<re)){if(re===1&&z===1&&!o)return ce.reverse(),void(fe&&fe.reverse());for(var Q,pe,me,Ue,Ke=ce.length,Re=0;Re<Ke;){if(ye[Re]>=re){for(me=Re+1;me<Ke&&ye[me]>=re;)me++;for(Ue=Re,pe=me-1;Ue<pe;Ue++,pe--)Q=ce[Ue],ce[Ue]=ce[pe],ce[pe]=Q,fe&&(Q=fe[Ue],fe[Ue]=fe[pe],fe[pe]=Q);Re=me}Re++}}},_e=function(re,ce,fe){var ye=re.split(""),Fe={hiLevel:z};return fe||(fe=[]),J(ye,fe,Fe),(function(Q,pe,me){if(me.hiLevel!==0&&j)for(var Ue,Ke=0;Ke<Q.length;Ke++)pe[Ke]===1&&(Ue=F.indexOf(Q[Ke]))>=0&&(Q[Ke]=F[Ue+1])})(ye,fe,Fe),Se(2,ye,ce,fe,Fe),Se(1,ye,ce,fe,Fe),ye.join("")};return this.__bidiEngine__.doBidiReorder=function(re,ce,fe){if((function(Fe,Q){if(Q)for(var pe=0;pe<Fe.length;pe++)Q[pe]=pe;p===void 0&&(p=ie(Fe)),w===void 0&&(w=ie(Fe))})(re,ce),a||!g||w)if(a&&g&&p^w)z=p?1:0,re=K(re,ce,fe);else if(!a&&g&&w)z=p?1:0,re=_e(re,ce,fe),re=K(re,ce);else if(!a||p||g||w){if(a&&!g&&p^w)re=K(re,ce),p?(z=0,re=_e(re,ce,fe)):(z=1,re=_e(re,ce,fe),re=K(re,ce));else if(a&&p&&!g&&w)z=1,re=_e(re,ce,fe),re=K(re,ce);else if(!a&&!g&&p^w){var ye=j;p?(z=1,re=_e(re,ce,fe),z=0,j=!1,re=_e(re,ce,fe),j=ye):(z=0,re=_e(re,ce,fe),re=K(re,ce),z=1,j=!1,re=_e(re,ce,fe),j=ye,re=K(re,ce))}}else z=0,re=_e(re,ce,fe);else z=p?1:0,re=_e(re,ce,fe);return re},this.__bidiEngine__.setOptions=function(re){re&&(a=re.isInputVisual,g=re.isOutputVisual,p=re.isInputRtl,w=re.isOutputRtl,j=re.isSymmetricSwapping)},this.__bidiEngine__.setOptions(i),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],r=new n.__bidiEngine__({isInputVisual:!0});n.API.events.push(["postProcessText",function(i){var o=i.text,l=(i.x,i.y,i.options||{}),a=(i.mutex,l.lang,[]);if(l.isInputVisual=typeof l.isInputVisual!="boolean"||l.isInputVisual,r.setOptions(l),Object.prototype.toString.call(o)==="[object Array]"){var p=0;for(a=[],p=0;p<o.length;p+=1)Object.prototype.toString.call(o[p])==="[object Array]"?a.push([r.doBidiReorder(o[p][0]),o[p][1],o[p][2]]):a.push([r.doBidiReorder(o[p])]);i.text=a}else i.text=r.doBidiReorder(o);r.setOptions({isInputVisual:!0})}])})(Bn),Bn.API.TTFFont=(function(){function n(t){var r;if(this.rawData=t,r=this.contents=new Cm(t),this.contents.pos=4,r.readString(4)==="ttcf")throw new Error("TTCF not supported.");r.pos=0,this.parse(),this.subset=new XH(this),this.registerTTF()}return n.open=function(t){return new n(t)},n.prototype.parse=function(){return this.directory=new OH(this.contents),this.head=new FH(this),this.name=new $H(this),this.cmap=new s6(this),this.toUnicode={},this.hhea=new BH(this),this.maxp=new HH(this),this.hmtx=new GH(this),this.post=new qH(this),this.os2=new UH(this),this.loca=new KH(this),this.glyf=new WH(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},n.prototype.registerTTF=function(){var t,r,i,o,l;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var a,p,g,w;for(w=[],a=0,p=(g=this.bbox).length;a<p;a++)t=g[a],w.push(Math.round(t*this.scaleFactor));return w}).call(this),this.stemV=0,this.post.exists?(i=255&(o=this.post.italic_angle),(32768&(r=o>>16))!=0&&(r=-(1+(65535^r))),this.italicAngle=+(r+"."+i)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(l=this.familyClass)===1||l===2||l===3||l===4||l===5||l===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},n.prototype.characterToGlyph=function(t){var r;return((r=this.cmap.unicode)!=null?r.codeMap[t]:void 0)||0},n.prototype.widthOfGlyph=function(t){var r;return r=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*r},n.prototype.widthOfString=function(t,r,i){var o,l,a,p;for(a=0,l=0,p=(t=""+t).length;0<=p?l<p:l>p;l=0<=p?++l:--l)o=t.charCodeAt(l),a+=this.widthOfGlyph(this.characterToGlyph(o))+i*(1e3/r)||0;return a*(r/1e3)},n.prototype.lineHeight=function(t,r){var i;return r==null&&(r=!1),i=r?this.lineGap:0,(this.ascender+i-this.decender)/1e3*t},n})();var Vh,Cm=(function(){function n(t){this.data=t??[],this.pos=0,this.length=this.data.length}return n.prototype.readByte=function(){return this.data[this.pos++]},n.prototype.writeByte=function(t){return this.data[this.pos++]=t},n.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},n.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},n.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},n.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},n.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},n.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},n.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},n.prototype.readString=function(t){var r,i;for(i=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)i[r]=String.fromCharCode(this.readByte());return i.join("")},n.prototype.writeString=function(t){var r,i,o;for(o=[],r=0,i=t.length;0<=i?r<i:r>i;r=0<=i?++r:--r)o.push(this.writeByte(t.charCodeAt(r)));return o},n.prototype.readShort=function(){return this.readInt16()},n.prototype.writeShort=function(t){return this.writeInt16(t)},n.prototype.readLongLong=function(){var t,r,i,o,l,a,p,g;return t=this.readByte(),r=this.readByte(),i=this.readByte(),o=this.readByte(),l=this.readByte(),a=this.readByte(),p=this.readByte(),g=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^r)+1099511627776*(255^i)+4294967296*(255^o)+16777216*(255^l)+65536*(255^a)+256*(255^p)+(255^g)+1):72057594037927940*t+281474976710656*r+1099511627776*i+4294967296*o+16777216*l+65536*a+256*p+g},n.prototype.writeLongLong=function(t){var r,i;return r=Math.floor(t/4294967296),i=4294967295&t,this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r),this.writeByte(i>>24&255),this.writeByte(i>>16&255),this.writeByte(i>>8&255),this.writeByte(255&i)},n.prototype.readInt=function(){return this.readInt32()},n.prototype.writeInt=function(t){return this.writeInt32(t)},n.prototype.read=function(t){var r,i;for(r=[],i=0;0<=t?i<t:i>t;i=0<=t?++i:--i)r.push(this.readByte());return r},n.prototype.write=function(t){var r,i,o,l;for(l=[],i=0,o=t.length;i<o;i++)r=t[i],l.push(this.writeByte(r));return l},n})(),OH=(function(){var n;function t(r){var i,o,l;for(this.scalarType=r.readInt(),this.tableCount=r.readShort(),this.searchRange=r.readShort(),this.entrySelector=r.readShort(),this.rangeShift=r.readShort(),this.tables={},o=0,l=this.tableCount;0<=l?o<l:o>l;o=0<=l?++o:--o)i={tag:r.readString(4),checksum:r.readInt(),offset:r.readInt(),length:r.readInt()},this.tables[i.tag]=i}return t.prototype.encode=function(r){var i,o,l,a,p,g,w,j,S,T,E,O,R;for(R in E=Object.keys(r).length,g=Math.log(2),S=16*Math.floor(Math.log(E)/g),a=Math.floor(S/g),j=16*E-S,(o=new Cm).writeInt(this.scalarType),o.writeShort(E),o.writeShort(S),o.writeShort(a),o.writeShort(j),l=16*E,w=o.pos+l,p=null,O=[],r)for(T=r[R],o.writeString(R),o.writeInt(n(T)),o.writeInt(w),o.writeInt(T.length),O=O.concat(T),R==="head"&&(p=w),w+=T.length;w%4;)O.push(0),w++;return o.write(O),i=2981146554-n(o.data),o.pos=p+8,o.writeUInt32(i),o.data},n=function(r){var i,o,l,a;for(r=a6.call(r);r.length%4;)r.push(0);for(l=new Cm(r),o=0,i=0,a=r.length;i<a;i=i+=4)o+=l.readUInt32();return 4294967295&o},t})(),zH={}.hasOwnProperty,Af=function(n,t){for(var r in t)zH.call(t,r)&&(n[r]=t[r]);function i(){this.constructor=n}return i.prototype=t.prototype,n.prototype=new i,n.__super__=t.prototype,n};Vh=(function(){function n(t){var r;this.file=t,r=this.file.directory.tables[this.tag],this.exists=!!r,r&&(this.offset=r.offset,this.length=r.length,this.parse(this.file.contents))}return n.prototype.parse=function(){},n.prototype.encode=function(){},n.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},n})();var FH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="head",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.revision=r.readInt(),this.checkSumAdjustment=r.readInt(),this.magicNumber=r.readInt(),this.flags=r.readShort(),this.unitsPerEm=r.readShort(),this.created=r.readLongLong(),this.modified=r.readLongLong(),this.xMin=r.readShort(),this.yMin=r.readShort(),this.xMax=r.readShort(),this.yMax=r.readShort(),this.macStyle=r.readShort(),this.lowestRecPPEM=r.readShort(),this.fontDirectionHint=r.readShort(),this.indexToLocFormat=r.readShort(),this.glyphDataFormat=r.readShort()},t.prototype.encode=function(r){var i;return(i=new Cm).writeInt(this.version),i.writeInt(this.revision),i.writeInt(this.checkSumAdjustment),i.writeInt(this.magicNumber),i.writeShort(this.flags),i.writeShort(this.unitsPerEm),i.writeLongLong(this.created),i.writeLongLong(this.modified),i.writeShort(this.xMin),i.writeShort(this.yMin),i.writeShort(this.xMax),i.writeShort(this.yMax),i.writeShort(this.macStyle),i.writeShort(this.lowestRecPPEM),i.writeShort(this.fontDirectionHint),i.writeShort(r),i.writeShort(this.glyphDataFormat),i.data},t})(),KS=(function(){function n(t,r){var i,o,l,a,p,g,w,j,S,T,E,O,R,F,B,G,z;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=r+t.readInt(),S=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(g=0;g<256;++g)this.codeMap[g]=t.readByte();break;case 4:for(E=t.readUInt16(),T=E/2,t.pos+=6,l=(function(){var ee,ie;for(ie=[],g=ee=0;0<=T?ee<T:ee>T;g=0<=T?++ee:--ee)ie.push(t.readUInt16());return ie})(),t.pos+=2,R=(function(){var ee,ie;for(ie=[],g=ee=0;0<=T?ee<T:ee>T;g=0<=T?++ee:--ee)ie.push(t.readUInt16());return ie})(),w=(function(){var ee,ie;for(ie=[],g=ee=0;0<=T?ee<T:ee>T;g=0<=T?++ee:--ee)ie.push(t.readUInt16());return ie})(),j=(function(){var ee,ie;for(ie=[],g=ee=0;0<=T?ee<T:ee>T;g=0<=T?++ee:--ee)ie.push(t.readUInt16());return ie})(),o=(this.length-t.pos+this.offset)/2,p=(function(){var ee,ie;for(ie=[],g=ee=0;0<=o?ee<o:ee>o;g=0<=o?++ee:--ee)ie.push(t.readUInt16());return ie})(),g=B=0,z=l.length;B<z;g=++B)for(F=l[g],i=G=O=R[g];O<=F?G<=F:G>=F;i=O<=F?++G:--G)j[g]===0?a=i+w[g]:(a=p[j[g]/2+(i-O)-(T-g)]||0)!==0&&(a+=w[g]),this.codeMap[i]=65535&a}t.pos=S}return n.encode=function(t,r){var i,o,l,a,p,g,w,j,S,T,E,O,R,F,B,G,z,ee,ie,ge,K,J,Se,_e,re,ce,fe,ye,Fe,Q,pe,me,Ue,Ke,Re,te,ue,Ne,Me,We,Ve,tt,Qe,St,Et,zt;switch(ye=new Cm,a=Object.keys(t).sort((function(Lt,wr){return Lt-wr})),r){case"macroman":for(R=0,F=(function(){var Lt=[];for(O=0;O<256;++O)Lt.push(0);return Lt})(),G={0:0},l={},Fe=0,Ue=a.length;Fe<Ue;Fe++)G[Qe=t[o=a[Fe]]]==null&&(G[Qe]=++R),l[o]={old:t[o],new:G[t[o]]},F[o]=G[t[o]];return ye.writeUInt16(1),ye.writeUInt16(0),ye.writeUInt32(12),ye.writeUInt16(0),ye.writeUInt16(262),ye.writeUInt16(0),ye.write(F),{charMap:l,subtable:ye.data,maxGlyphID:R+1};case"unicode":for(ce=[],S=[],z=0,G={},i={},B=w=null,Q=0,Ke=a.length;Q<Ke;Q++)G[ie=t[o=a[Q]]]==null&&(G[ie]=++z),i[o]={old:ie,new:G[ie]},p=G[ie]-o,B!=null&&p===w||(B&&S.push(B),ce.push(o),w=p),B=o;for(B&&S.push(B),S.push(65535),ce.push(65535),_e=2*(Se=ce.length),J=2*Math.pow(Math.log(Se)/Math.LN2,2),T=Math.log(J/2)/Math.LN2,K=2*Se-J,g=[],ge=[],E=[],O=pe=0,Re=ce.length;pe<Re;O=++pe){if(re=ce[O],j=S[O],re===65535){g.push(0),ge.push(0);break}if(re-(fe=i[re].new)>=32768)for(g.push(0),ge.push(2*(E.length+Se-O)),o=me=re;re<=j?me<=j:me>=j;o=re<=j?++me:--me)E.push(i[o].new);else g.push(fe-re),ge.push(0)}for(ye.writeUInt16(3),ye.writeUInt16(1),ye.writeUInt32(12),ye.writeUInt16(4),ye.writeUInt16(16+8*Se+2*E.length),ye.writeUInt16(0),ye.writeUInt16(_e),ye.writeUInt16(J),ye.writeUInt16(T),ye.writeUInt16(K),Ve=0,te=S.length;Ve<te;Ve++)o=S[Ve],ye.writeUInt16(o);for(ye.writeUInt16(0),tt=0,ue=ce.length;tt<ue;tt++)o=ce[tt],ye.writeUInt16(o);for(St=0,Ne=g.length;St<Ne;St++)p=g[St],ye.writeUInt16(p);for(Et=0,Me=ge.length;Et<Me;Et++)ee=ge[Et],ye.writeUInt16(ee);for(zt=0,We=E.length;zt<We;zt++)R=E[zt],ye.writeUInt16(R);return{charMap:i,subtable:ye.data,maxGlyphID:z+1}}},n})(),s6=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="cmap",t.prototype.parse=function(r){var i,o,l;for(r.pos=this.offset,this.version=r.readUInt16(),l=r.readUInt16(),this.tables=[],this.unicode=null,o=0;0<=l?o<l:o>l;o=0<=l?++o:--o)i=new KS(r,this.offset),this.tables.push(i),i.isUnicode&&this.unicode==null&&(this.unicode=i);return!0},t.encode=function(r,i){var o,l;return i==null&&(i="macroman"),o=KS.encode(r,i),(l=new Cm).writeUInt16(0),l.writeUInt16(1),o.table=l.data.concat(o.subtable),o},t})(),BH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="hhea",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.ascender=r.readShort(),this.decender=r.readShort(),this.lineGap=r.readShort(),this.advanceWidthMax=r.readShort(),this.minLeftSideBearing=r.readShort(),this.minRightSideBearing=r.readShort(),this.xMaxExtent=r.readShort(),this.caretSlopeRise=r.readShort(),this.caretSlopeRun=r.readShort(),this.caretOffset=r.readShort(),r.pos+=8,this.metricDataFormat=r.readShort(),this.numberOfMetrics=r.readUInt16()},t})(),UH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="OS/2",t.prototype.parse=function(r){if(r.pos=this.offset,this.version=r.readUInt16(),this.averageCharWidth=r.readShort(),this.weightClass=r.readUInt16(),this.widthClass=r.readUInt16(),this.type=r.readShort(),this.ySubscriptXSize=r.readShort(),this.ySubscriptYSize=r.readShort(),this.ySubscriptXOffset=r.readShort(),this.ySubscriptYOffset=r.readShort(),this.ySuperscriptXSize=r.readShort(),this.ySuperscriptYSize=r.readShort(),this.ySuperscriptXOffset=r.readShort(),this.ySuperscriptYOffset=r.readShort(),this.yStrikeoutSize=r.readShort(),this.yStrikeoutPosition=r.readShort(),this.familyClass=r.readShort(),this.panose=(function(){var i,o;for(o=[],i=0;i<10;++i)o.push(r.readByte());return o})(),this.charRange=(function(){var i,o;for(o=[],i=0;i<4;++i)o.push(r.readInt());return o})(),this.vendorID=r.readString(4),this.selection=r.readShort(),this.firstCharIndex=r.readShort(),this.lastCharIndex=r.readShort(),this.version>0&&(this.ascent=r.readShort(),this.descent=r.readShort(),this.lineGap=r.readShort(),this.winAscent=r.readShort(),this.winDescent=r.readShort(),this.codePageRange=(function(){var i,o;for(o=[],i=0;i<2;i=++i)o.push(r.readInt());return o})(),this.version>1))return this.xHeight=r.readShort(),this.capHeight=r.readShort(),this.defaultChar=r.readShort(),this.breakChar=r.readShort(),this.maxContext=r.readShort()},t})(),qH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="post",t.prototype.parse=function(r){var i,o,l;switch(r.pos=this.offset,this.format=r.readInt(),this.italicAngle=r.readInt(),this.underlinePosition=r.readShort(),this.underlineThickness=r.readShort(),this.isFixedPitch=r.readInt(),this.minMemType42=r.readInt(),this.maxMemType42=r.readInt(),this.minMemType1=r.readInt(),this.maxMemType1=r.readInt(),this.format){case 65536:break;case 131072:var a;for(o=r.readUInt16(),this.glyphNameIndex=[],a=0;0<=o?a<o:a>o;a=0<=o?++a:--a)this.glyphNameIndex.push(r.readUInt16());for(this.names=[],l=[];r.pos<this.offset+this.length;)i=r.readByte(),l.push(this.names.push(r.readString(i)));return l;case 151552:return o=r.readUInt16(),this.offsets=r.read(o);case 196608:break;case 262144:return this.map=(function(){var p,g,w;for(w=[],a=p=0,g=this.file.maxp.numGlyphs;0<=g?p<g:p>g;a=0<=g?++p:--p)w.push(r.readUInt32());return w}).call(this)}},t})(),VH=function(n,t){this.raw=n,this.length=n.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},$H=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="name",t.prototype.parse=function(r){var i,o,l,a,p,g,w,j,S,T,E;for(r.pos=this.offset,r.readShort(),i=r.readShort(),g=r.readShort(),o=[],a=0;0<=i?a<i:a>i;a=0<=i?++a:--a)o.push({platformID:r.readShort(),encodingID:r.readShort(),languageID:r.readShort(),nameID:r.readShort(),length:r.readShort(),offset:this.offset+g+r.readShort()});for(w={},a=S=0,T=o.length;S<T;a=++S)l=o[a],r.pos=l.offset,j=r.readString(l.length),p=new VH(j,l),w[E=l.nameID]==null&&(w[E]=[]),w[l.nameID].push(p);this.strings=w,this.copyright=w[0],this.fontFamily=w[1],this.fontSubfamily=w[2],this.uniqueSubfamily=w[3],this.fontName=w[4],this.version=w[5];try{this.postscriptName=w[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=w[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=w[7],this.manufacturer=w[8],this.designer=w[9],this.description=w[10],this.vendorUrl=w[11],this.designerUrl=w[12],this.license=w[13],this.licenseUrl=w[14],this.preferredFamily=w[15],this.preferredSubfamily=w[17],this.compatibleFull=w[18],this.sampleText=w[19]},t})(),HH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="maxp",t.prototype.parse=function(r){return r.pos=this.offset,this.version=r.readInt(),this.numGlyphs=r.readUInt16(),this.maxPoints=r.readUInt16(),this.maxContours=r.readUInt16(),this.maxCompositePoints=r.readUInt16(),this.maxComponentContours=r.readUInt16(),this.maxZones=r.readUInt16(),this.maxTwilightPoints=r.readUInt16(),this.maxStorage=r.readUInt16(),this.maxFunctionDefs=r.readUInt16(),this.maxInstructionDefs=r.readUInt16(),this.maxStackElements=r.readUInt16(),this.maxSizeOfInstructions=r.readUInt16(),this.maxComponentElements=r.readUInt16(),this.maxComponentDepth=r.readUInt16()},t})(),GH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="hmtx",t.prototype.parse=function(r){var i,o,l,a,p,g,w;for(r.pos=this.offset,this.metrics=[],i=0,g=this.file.hhea.numberOfMetrics;0<=g?i<g:i>g;i=0<=g?++i:--i)this.metrics.push({advance:r.readUInt16(),lsb:r.readInt16()});for(l=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=(function(){var j,S;for(S=[],i=j=0;0<=l?j<l:j>l;i=0<=l?++j:--j)S.push(r.readInt16());return S})(),this.widths=(function(){var j,S,T,E;for(E=[],j=0,S=(T=this.metrics).length;j<S;j++)a=T[j],E.push(a.advance);return E}).call(this),o=this.widths[this.widths.length-1],w=[],i=p=0;0<=l?p<l:p>l;i=0<=l?++p:--p)w.push(this.widths.push(o));return w},t.prototype.forGlyph=function(r){return r in this.metrics?this.metrics[r]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[r-this.metrics.length]}},t})(),a6=[].slice,WH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(r){var i,o,l,a,p,g,w,j,S,T;return r in this.cache?this.cache[r]:(a=this.file.loca,i=this.file.contents,o=a.indexOf(r),(l=a.lengthOf(r))===0?this.cache[r]=null:(i.pos=this.offset+o,p=(g=new Cm(i.read(l))).readShort(),j=g.readShort(),T=g.readShort(),w=g.readShort(),S=g.readShort(),this.cache[r]=p===-1?new ZH(g,j,T,w,S):new YH(g,p,j,T,w,S),this.cache[r]))},t.prototype.encode=function(r,i,o){var l,a,p,g,w;for(p=[],a=[],g=0,w=i.length;g<w;g++)l=r[i[g]],a.push(p.length),l&&(p=p.concat(l.encode(o)));return a.push(p.length),{table:p,offsets:a}},t})(),YH=(function(){function n(t,r,i,o,l,a){this.raw=t,this.numberOfContours=r,this.xMin=i,this.yMin=o,this.xMax=l,this.yMax=a,this.compound=!1}return n.prototype.encode=function(){return this.raw.data},n})(),ZH=(function(){function n(t,r,i,o,l){var a,p;for(this.raw=t,this.xMin=r,this.yMin=i,this.xMax=o,this.yMax=l,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],a=this.raw;p=a.readShort(),this.glyphOffsets.push(a.pos),this.glyphIDs.push(a.readUInt16()),32&p;)a.pos+=1&p?4:2,128&p?a.pos+=8:64&p?a.pos+=4:8&p&&(a.pos+=2)}return n.prototype.encode=function(){var t,r,i;for(r=new Cm(a6.call(this.raw.data)),t=0,i=this.glyphIDs.length;t<i;++t)r.pos=this.glyphOffsets[t];return r.data},n})(),KH=(function(n){function t(){return t.__super__.constructor.apply(this,arguments)}return Af(t,Vh),t.prototype.tag="loca",t.prototype.parse=function(r){var i,o;return r.pos=this.offset,i=this.file.head.indexToLocFormat,this.offsets=i===0?(function(){var l,a;for(a=[],o=0,l=this.length;o<l;o+=2)a.push(2*r.readUInt16());return a}).call(this):(function(){var l,a;for(a=[],o=0,l=this.length;o<l;o+=4)a.push(r.readUInt32());return a}).call(this)},t.prototype.indexOf=function(r){return this.offsets[r]},t.prototype.lengthOf=function(r){return this.offsets[r+1]-this.offsets[r]},t.prototype.encode=function(r,i){for(var o=new Uint32Array(this.offsets.length),l=0,a=0,p=0;p<o.length;++p)if(o[p]=l,a<i.length&&i[a]==p){++a,o[p]=l;var g=this.offsets[p],w=this.offsets[p+1]-g;w>0&&(l+=w)}for(var j=new Array(4*o.length),S=0;S<o.length;++S)j[4*S+3]=255&o[S],j[4*S+2]=(65280&o[S])>>8,j[4*S+1]=(16711680&o[S])>>16,j[4*S]=(4278190080&o[S])>>24;return j},t})(),XH=(function(){function n(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return n.prototype.generateCmap=function(){var t,r,i,o,l;for(r in o=this.font.cmap.tables[0].codeMap,t={},l=this.subset)i=l[r],t[r]=o[i];return t},n.prototype.glyphsFor=function(t){var r,i,o,l,a,p,g;for(o={},a=0,p=t.length;a<p;a++)o[l=t[a]]=this.font.glyf.glyphFor(l);for(l in r=[],o)(i=o[l])!=null&&i.compound&&r.push.apply(r,i.glyphIDs);if(r.length>0)for(l in g=this.glyphsFor(r))i=g[l],o[l]=i;return o},n.prototype.encode=function(t,r){var i,o,l,a,p,g,w,j,S,T,E,O,R,F,B;for(o in i=s6.encode(this.generateCmap(),"unicode"),a=this.glyphsFor(t),E={0:0},B=i.charMap)E[(g=B[o]).old]=g.new;for(O in T=i.maxGlyphID,a)O in E||(E[O]=T++);return j=(function(G){var z,ee;for(z in ee={},G)ee[G[z]]=z;return ee})(E),S=Object.keys(j).sort((function(G,z){return G-z})),R=(function(){var G,z,ee;for(ee=[],G=0,z=S.length;G<z;G++)p=S[G],ee.push(j[p]);return ee})(),l=this.font.glyf.encode(a,R,E),w=this.font.loca.encode(l.offsets,R),F={cmap:this.font.cmap.raw(),glyf:l.table,loca:w,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(r)},this.font.os2.exists&&(F["OS/2"]=this.font.os2.raw()),this.font.directory.encode(F)},n})();Bn.API.PDFObject=(function(){var n;function t(){}return n=function(r,i){return(Array(i+1).join("0")+r).slice(-i)},t.convert=function(r){var i,o,l,a;if(Array.isArray(r))return"["+(function(){var p,g,w;for(w=[],p=0,g=r.length;p<g;p++)i=r[p],w.push(t.convert(i));return w})().join(" ")+"]";if(typeof r=="string")return"/"+r;if(r!=null&&r.isString)return"("+r+")";if(r instanceof Date)return"(D:"+n(r.getUTCFullYear(),4)+n(r.getUTCMonth(),2)+n(r.getUTCDate(),2)+n(r.getUTCHours(),2)+n(r.getUTCMinutes(),2)+n(r.getUTCSeconds(),2)+"Z)";if({}.toString.call(r)==="[object Object]"){for(o in l=["<<"],r)a=r[o],l.push("/"+o+" "+t.convert(a));return l.push(">>"),l.join(`
`)}return""+r},t})();function o6({type:n,businessId:t,businessName:r,price:i,revenue:o,industry:l,location:a,className:p,onOpenAIChat:g}){const[w,j]=M.useState(null),[S,T]=M.useState(!0),[E,O]=M.useState(!1),[R,F]=M.useState(null);M.useEffect(()=>{B()},[t,i,o,l,a]);const B=async()=>{T(!0),F(null);try{const K=`Analyze this ${n==="business"?"business":"franchise"} opportunity and provide detailed investment insights:

Business Name: ${r}
Type: ${n==="business"?"Business Acquisition":"Franchise Opportunity"}
Asking Price: ${i.toLocaleString()}
Annual Revenue: ${o?`${o.toLocaleString()}`:"Not disclosed"}
Industry: ${l}
Location: ${a}

Provide a comprehensive analysis in the following JSON format:
{
  "overallScore": <number 0-100>,
  "recommendation": "<High Potential|Good Opportunity|Proceed with Caution|High Risk>",
  "keyInsights": [
    {
      "type": "<positive|warning|neutral>",
      "title": "<insight title>",
      "description": "<detailed description>"
    }
  ],
  "riskFactors": ["<risk 1>", "<risk 2>", "<risk 3>"],
  "opportunities": ["<opportunity 1>", "<opportunity 2>", "<opportunity 3>"]
}

Provide at least 3 key insights, 3-5 risk factors, and 3-5 opportunities. Focus on valuation, market potential, location advantages, and financial metrics.`,J=await jg.sendMessage(K,"ajay",{businessData:{name:r,price:i,revenue:o,industry:l,location:a}},[]);let Se;try{const _e=J.match(/\{[\s\S]*\}/);if(_e)Se=JSON.parse(_e[0]),Se.detailedAnalysis=J;else throw new Error("No JSON found in response")}catch{Se=G(),Se.detailedAnalysis=J}j(Se)}catch(K){console.error("AI Analysis Error:",K),F(K.message||"Failed to generate AI insights"),j(G())}finally{T(!1)}},G=()=>{const K=o?i/o:0,J=K<3&&o&&o>5e6,Se=K>5;return{overallScore:J?85:Se?45:70,recommendation:J?"High Potential":Se?"Proceed with Caution":"Good Opportunity",keyInsights:[{type:J?"positive":Se?"warning":"neutral",title:"Valuation Analysis",description:J?"Excellent price-to-revenue ratio indicates strong value proposition":Se?"Price appears high relative to current revenue streams":"Fair valuation based on current market conditions"},{type:l==="Technology"?"positive":"neutral",title:"Market Opportunity",description:l==="Technology"?"Tech sector showing strong growth potential in current market":`${l} sector maintains stable demand in ${a} market`},{type:a.includes("Mumbai")||a.includes("Bangalore")?"positive":"neutral",title:"Location Advantage",description:a.includes("Mumbai")||a.includes("Bangalore")?"Prime location with excellent business ecosystem and talent pool":"Strategic location with good market access and infrastructure"}],riskFactors:["Market competition analysis needed","Due diligence on financial statements required","Regulatory compliance verification pending"],opportunities:["Digital transformation potential","Market expansion possibilities","Operational efficiency improvements"]}},z=async()=>{if(w){O(!0);try{const K=new Bn,J=K.internal.pageSize.getWidth(),Se=20;let _e=20;K.setFontSize(20),K.setFont("helvetica","bold"),K.text("AI Investment Analysis Report",J/2,_e,{align:"center"}),_e+=15,K.setFontSize(12),K.setFont("helvetica","normal"),K.text(`Business: ${r}`,Se,_e),_e+=7,K.text(`Type: ${n==="business"?"Business Acquisition":"Franchise Opportunity"}`,Se,_e),_e+=7,K.text(`Industry: ${l}`,Se,_e),_e+=7,K.text(`Location: ${a}`,Se,_e),_e+=7,K.text(`Price: ${i.toLocaleString()}`,Se,_e),_e+=7,o&&(K.text(`Revenue: ${o.toLocaleString()}`,Se,_e),_e+=7),K.text(`Report Date: ${new Date().toLocaleDateString()}`,Se,_e),_e+=15,K.setFontSize(14),K.setFont("helvetica","bold"),K.text(`AI Opportunity Score: ${w.overallScore}/100`,Se,_e),_e+=7,K.setFontSize(12),K.setFont("helvetica","normal"),K.text(`Recommendation: ${w.recommendation}`,Se,_e),_e+=15,K.setFont("helvetica","bold"),K.text("Key Insights:",Se,_e),_e+=7,K.setFont("helvetica","normal"),w.keyInsights.forEach((fe,ye)=>{const Fe=K.splitTextToSize(`${ye+1}. ${fe.title}: ${fe.description}`,J-2*Se);K.text(Fe,Se,_e),_e+=Fe.length*5+3,_e>270&&(K.addPage(),_e=20)}),_e+=10,_e>240&&(K.addPage(),_e=20),K.setFont("helvetica","bold"),K.text("Risk Factors:",Se,_e),_e+=7,K.setFont("helvetica","normal"),w.riskFactors.forEach((fe,ye)=>{const Fe=K.splitTextToSize(`${ye+1}. ${fe}`,J-2*Se);K.text(Fe,Se,_e),_e+=Fe.length*5+3}),_e+=10,_e>240&&(K.addPage(),_e=20),K.setFont("helvetica","bold"),K.text("Growth Opportunities:",Se,_e),_e+=7,K.setFont("helvetica","normal"),w.opportunities.forEach((fe,ye)=>{const Fe=K.splitTextToSize(`${ye+1}. ${fe}`,J-2*Se);K.text(Fe,Se,_e),_e+=Fe.length*5+3}),_e+=15,w.detailedAnalysis&&(_e>240&&(K.addPage(),_e=20),K.setFont("helvetica","bold"),K.text("Detailed AI Analysis:",Se,_e),_e+=7,K.setFont("helvetica","normal"),K.setFontSize(10),K.splitTextToSize(w.detailedAnalysis,J-2*Se).forEach(ye=>{_e>280&&(K.addPage(),_e=20),K.text(ye,Se,_e),_e+=5})),K.setFontSize(8),K.setFont("helvetica","italic");const ce=K.splitTextToSize("Disclaimer: This AI-generated analysis is for informational purposes only. Please conduct thorough due diligence and consult with financial advisors before making investment decisions.",J-2*Se);K.text(ce,Se,K.internal.pageSize.getHeight()-20),K.save(`AI-Analysis-${r.replace(/\s+/g,"-")}-${Date.now()}.pdf`)}catch(K){console.error("PDF Generation Error:",K),alert("Failed to generate PDF report. Please try again.")}finally{O(!1)}}},ee=()=>{const K={businessName:r,type:n,initialMessage:`I'm interested in this ${n} opportunity: ${r}. Based on your AI analysis showing a score of ${w==null?void 0:w.overallScore}/100, can you provide more insights and help me evaluate this opportunity?`};if(g)g(K);else{const J=document.querySelector("[data-ai-chat]");J?J.click():alert("AI Chat feature is available. Please use the AI chat button in the navigation.")}},ie=K=>K>=80?"text-green-600 bg-green-50":K>=60?"text-yellow-600 bg-yellow-50":"text-red-600 bg-red-50",ge=K=>K==="High Potential"?"bg-green-500":K==="Proceed with Caution"?"bg-red-500":"bg-blue-500";return S?e.jsxs(ot,{className:`${p}`,children:[e.jsx(Vt,{className:"pb-4",children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(N1,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Analysis"}),e.jsx(Gt,{variant:"secondary",className:"ml-auto",children:"Powered by AI"})]})}),e.jsx(ut,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(eo,{className:"h-12 w-12 text-purple-600 animate-spin mb-4"}),e.jsxs("p",{className:"text-muted-foreground text-center",children:["Generating AI insights...",e.jsx("br",{}),e.jsx("span",{className:"text-xs",children:"This may take a few moments"})]})]})})]}):R&&!w?e.jsxs(ot,{className:`${p}`,children:[e.jsx(Vt,{className:"pb-4",children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(N1,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Analysis"})]})}),e.jsx(ut,{className:"space-y-6",children:e.jsxs("div",{className:"flex flex-col items-center justify-center py-12",children:[e.jsx(Xc,{className:"h-12 w-12 text-yellow-600 mb-4"}),e.jsxs("p",{className:"text-muted-foreground text-center mb-4",children:["Unable to generate AI insights",e.jsx("br",{}),e.jsx("span",{className:"text-xs text-red-600",children:R})]}),e.jsxs(ze,{onClick:B,variant:"outline",size:"sm",children:[e.jsx(N1,{className:"h-4 w-4 mr-2"}),"Try Again"]})]})})]}):w?e.jsxs(ot,{className:`${p}`,children:[e.jsx(Vt,{className:"pb-4",children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(N1,{className:"h-5 w-5 text-purple-600"}),e.jsx("span",{className:"bg-gradient-to-r from-purple-600 to-blue-600 bg-clip-text text-transparent",children:"AI Analysis"}),e.jsx(Gt,{variant:"secondary",className:"ml-auto",children:"Powered by AI"})]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 rounded-lg border bg-muted/30",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-sm text-muted-foreground",children:"AI Opportunity Score"}),e.jsxs("div",{className:`text-2xl font-bold ${ie(w.overallScore).split(" ")[0]}`,children:[w.overallScore,"/100"]})]}),e.jsx(Gt,{className:ge(w.recommendation),children:w.recommendation})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(ry,{className:"h-4 w-4"}),"Key Insights"]}),w.keyInsights.map((K,J)=>e.jsxs("div",{className:"flex gap-3 p-3 rounded-lg bg-muted/30",children:[K.type==="positive"?e.jsx(Nn,{className:"h-5 w-5 text-green-600 flex-shrink-0 mt-0.5"}):K.type==="warning"?e.jsx(Xc,{className:"h-5 w-5 text-yellow-600 flex-shrink-0 mt-0.5"}):e.jsx(na,{className:"h-5 w-5 text-blue-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:K.title}),e.jsx("div",{className:"text-sm text-muted-foreground",children:K.description})]})]},J))]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(Xc,{className:"h-4 w-4 text-yellow-600"}),"Risk Factors to Consider"]}),e.jsx("div",{className:"space-y-2",children:w.riskFactors.map((K,J)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-yellow-500 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:K})]},J))})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(na,{className:"h-4 w-4 text-green-600"}),"Growth Opportunities"]}),e.jsx("div",{className:"space-y-2",children:w.opportunities.map((K,J)=>e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx("div",{className:"w-1.5 h-1.5 bg-green-500 rounded-full flex-shrink-0"}),e.jsx("span",{className:"text-muted-foreground",children:K})]},J))})]}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-3 pt-4 border-t",children:[e.jsxs(ze,{variant:"outline",size:"sm",className:"flex-1",onClick:z,disabled:E,children:[E?e.jsx(eo,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(wc,{className:"h-4 w-4 mr-2"}),E?"Generating...":"Download AI Report"]}),e.jsxs(ze,{size:"sm",className:"flex-1 bg-gradient-to-r from-purple-600 to-blue-600 hover:from-purple-700 hover:to-blue-700",onClick:ee,children:[e.jsx(e0,{className:"h-4 w-4 mr-2"}),"Ask AI Advisor"]})]}),e.jsxs("div",{className:"text-xs text-muted-foreground bg-muted/30 p-3 rounded-lg",children:[e.jsx("strong",{children:"Disclaimer:"})," AI analysis is based on available data and market trends. Please conduct thorough due diligence and consult with financial advisors before making investment decisions."]})]})]}):null}function JH({className:n}){const{id:t}=my(),[r,i]=M.useState(null),[o,l]=M.useState(!0),[a,p]=M.useState(!1),[g,w]=M.useState(!1),[j,S]=M.useState(0);if(M.useEffect(()=>{(async()=>{if(!t)return;l(!0);const ie=await f_.getBusinessById(t);ie&&!Array.isArray(ie)&&i(ie),l(!1)})()},[t]),o)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading business details..."})]})});if(!r)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Business Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The business you're looking for doesn't exist."})]})});const T=ee=>ee>=1e7?`${(ee/1e7).toFixed(1)} Cr`:ee>=1e5?`${(ee/1e5).toFixed(1)} L`:`${ee.toLocaleString()}`,E=r.financials||[{year:2023,revenue:r.revenue??0,profit:(r.revenue??0)*.15,expenses:(r.revenue??0)*.85},{year:2022,revenue:(r.revenue??0)*.9,profit:(r.revenue??0)*.9*.12,expenses:(r.revenue??0)*.9*.88},{year:2021,revenue:(r.revenue??0)*.8,profit:(r.revenue??0)*.8*.1,expenses:(r.revenue??0)*.8*.9}],O=[{type:"Equipment & Machinery",value:r.price*.4,description:"Manufacturing equipment, computers, furniture"},{type:"Inventory",value:r.price*.2,description:"Raw materials, finished goods, supplies"},{type:"Real Estate",value:r.price*.3,description:"Office space, warehouse, retail locations"},{type:"Intangible Assets",value:r.price*.1,description:"Brand value, patents, customer database"}],R=[{name:"Financial Statements (3 years)",type:"PDF",protected:!1},{name:"Tax Returns",type:"PDF",protected:!0},{name:"Asset Inventory",type:"Excel",protected:!1},{name:"Customer Contracts",type:"PDF",protected:!0},{name:"Employee Records",type:"PDF",protected:!0},{name:"Legal Documents",type:"PDF",protected:!0}],F=r.images&&r.images.length>0?r.images:[r.logo||"https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1497366216548-37526070297c?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1497366811353-6870744d04b2?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1556761175-b413da4baf72?w=800&h=600&fit=crop"],B=()=>{p(!a)},G=()=>{navigator.share?navigator.share({title:r.name,text:r.description,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},z=()=>{w(!0)};return e.jsxs("div",{className:er("min-h-screen bg-background",n),children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>console.warn("Prevented function call: `window.history.back()`"),children:[e.jsx(pd,{className:"h-4 w-4 mr-2"}),"Back to Listings"]}),e.jsx(Ho,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:r.name}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[r.industry,"  ",r.location]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{variant:"outline",size:"sm",onClick:B,children:[e.jsx(Rg,{className:er("h-4 w-4 mr-2",a&&"fill-current text-red-500")}),a?"Saved":"Save"]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:G,children:[e.jsx(QA,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(ze,{onClick:z,children:[e.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Contact Seller"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(ot,{children:e.jsxs(ut,{className:"p-0",children:[e.jsxs("div",{className:"aspect-video relative overflow-hidden rounded-t-lg",children:[e.jsx("img",{src:F[j],alt:r.name,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs(Gt,{className:"bg-black/70 text-white",children:[j+1," / ",F.length]})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:F.map((ee,ie)=>e.jsx("button",{onClick:()=>S(ie),className:er("flex-shrink-0 w-20 h-16 rounded-md overflow-hidden border-2",j===ie?"border-primary":"border-muted"),children:e.jsx("img",{src:ee,alt:"",className:"w-full h-full object-cover"})},ie))})})]})}),e.jsxs(_p,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Sf,{className:"grid w-full grid-cols-5",children:[e.jsx(Di,{value:"overview",children:"Overview"}),e.jsx(Di,{value:"financials",children:"Financials"}),e.jsx(Di,{value:"assets",children:"Assets"}),e.jsx(Di,{value:"operations",children:"Operations"}),e.jsx(Di,{value:"documents",children:"Documents"})]}),e.jsxs(Qi,{value:"overview",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Business Description"})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:r.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(gp,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Established"}),e.jsx("div",{className:"text-lg font-bold",children:r.establishedYear})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(Go,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Employees"}),e.jsx("div",{className:"text-lg font-bold",children:r.employees})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(na,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Annual Revenue"}),e.jsx("div",{className:"text-lg font-bold",children:r.revenue?T(r.revenue):"N/A"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ij,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Asking Price"}),e.jsx("div",{className:"text-lg font-bold",children:T(r.price)})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Key Highlights"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Strengths"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsx("li",{children:" Established customer base"}),e.jsx("li",{children:" Strong market position"}),e.jsx("li",{children:" Experienced team"}),e.jsx("li",{children:" Growth potential"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-2",children:"Opportunities"}),e.jsxs("ul",{className:"space-y-1 text-sm",children:[e.jsx("li",{children:" Digital transformation"}),e.jsx("li",{children:" Market expansion"}),e.jsx("li",{children:" Product diversification"}),e.jsx("li",{children:" Operational efficiency"})]})]})]})})]}),e.jsx(o6,{type:"business",businessId:r.id,businessName:r.name,price:r.price,revenue:r.revenue,industry:r.industry,location:r.location})]}),e.jsxs(Qi,{value:"financials",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Financial Performance (Last 3 Years)"})}),e.jsx(ut,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Year"}),e.jsx("th",{className:"text-right py-2",children:"Revenue"}),e.jsx("th",{className:"text-right py-2",children:"Profit"}),e.jsx("th",{className:"text-right py-2",children:"Expenses"}),e.jsx("th",{className:"text-right py-2",children:"Margin"})]})}),e.jsx("tbody",{children:E.map(ee=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 font-medium",children:ee.year}),e.jsx("td",{className:"text-right py-2",children:ee.revenue?T(ee.revenue):"N/A"}),e.jsx("td",{className:"text-right py-2 text-green-600",children:ee.profit?T(ee.profit):"N/A"}),e.jsx("td",{className:"text-right py-2",children:ee.expenses?T(ee.expenses):"N/A"}),e.jsxs("td",{className:"text-right py-2",children:[ee.revenue?(ee.profit/ee.revenue*100).toFixed(1):"0.0","%"]})]},ee.year))})]})})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Financial Ratios"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"15%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Profit Margin"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"2.5x"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Revenue Multiple"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"18%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"ROI"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-orange-600",children:"6.7x"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"EBITDA Multiple"})]})]})})]})]}),e.jsx(Qi,{value:"assets",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Asset Breakdown"})}),e.jsx(ut,{children:e.jsx("div",{className:"space-y-4",children:O.map((ee,ie)=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold",children:ee.type}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ee.description})]}),e.jsxs("div",{className:"text-right",children:[e.jsx("div",{className:"font-bold",children:T(ee.value)}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[(ee.value/r.price*100).toFixed(1),"%"]})]})]},ie))})})]})}),e.jsx(Qi,{value:"operations",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Operational Details"})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Business Hours"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Monday - Friday"}),e.jsx("span",{children:"9:00 AM - 6:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Saturday"}),e.jsx("span",{children:"9:00 AM - 2:00 PM"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Sunday"}),e.jsx("span",{children:"Closed"})]})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Key Customers"}),e.jsxs("div",{className:"space-y-2 text-sm",children:[e.jsx("div",{children:" Enterprise clients (60%)"}),e.jsx("div",{children:" SME businesses (30%)"}),e.jsx("div",{children:" Individual customers (10%)"})]})]})]}),e.jsx(Ho,{}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Reason for Sale"}),e.jsx("p",{className:"text-muted-foreground",children:"Owner retiring after 15 successful years. Looking for the right buyer to continue the legacy and grow the business further."})]})]})]})}),e.jsx(Qi,{value:"documents",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"h-5 w-5"}),"Available Documents"]})}),e.jsxs(ut,{children:[e.jsx("div",{className:"space-y-3",children:R.map((ee,ie)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ys,{className:"h-5 w-5 text-muted-foreground"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ee.name}),e.jsx("div",{className:"text-sm text-muted-foreground",children:ee.type})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[ee.protected&&e.jsxs(Gt,{variant:"outline",className:"text-xs",children:[e.jsx(jm,{className:"h-3 w-3 mr-1"}),"NDA Required"]}),e.jsxs(ze,{size:"sm",variant:"outline",children:[e.jsx(wc,{className:"h-4 w-4 mr-1"}),ee.protected?"Request":"Download"]})]})]},ie))}),e.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx(Xc,{className:"h-5 w-5 text-amber-500 mt-0.5"}),e.jsxs("div",{className:"text-sm",children:[e.jsx("div",{className:"font-medium",children:"Document Access"}),e.jsx("div",{className:"text-muted-foreground",children:"Some documents require signing an NDA. Contact the seller to request access to protected documents."})]})]})})]})]})})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Investment Details"})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:T(r.price)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Asking Price"})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Annual Revenue"}),e.jsx("span",{className:"text-sm font-medium",children:r.revenue?T(r.revenue):"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Revenue Multiple"}),e.jsx("span",{className:"text-sm font-medium",children:"2.5x"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Expected ROI"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"18%"})]})]}),e.jsxs(ze,{className:"w-full",onClick:z,children:[e.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Contact Seller"]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Verification Status"})}),e.jsx(ut,{children:e.jsx("div",{className:"space-y-2",children:r.badges&&r.badges.map((ee,ie)=>e.jsxs(Gt,{variant:"secondary",className:"w-full justify-start",children:[e.jsx(jm,{className:"h-3 w-3 mr-2"}),ee]},ie))})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5"}),"Location"]})}),e.jsx(ut,{children:e.jsxs("div",{className:"space-y-3",children:[e.jsx("div",{className:"text-sm font-medium",children:r.location}),e.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Ja,{className:"h-8 w-8 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Interactive Map"})]})})]})})]})]})]})}),e.jsx(Mg,{open:g,onOpenChange:w,children:e.jsxs(Om,{className:"sm:max-w-md",children:[e.jsx(zm,{children:e.jsx(Fm,{children:"Contact Seller"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"firstName",children:"First Name"}),e.jsx(Wt,{id:"firstName",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"lastName",children:"Last Name"}),e.jsx(Wt,{id:"lastName",placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"email",children:"Email"}),e.jsx(Wt,{id:"email",type:"email",placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"phone",children:"Phone"}),e.jsx(Wt,{id:"phone",placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"message",children:"Message"}),e.jsx(Fl,{id:"message",placeholder:"I'm interested in learning more about this business..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{className:"flex-1",children:"Send Message"}),e.jsx(ze,{variant:"outline",onClick:()=>w(!1),children:"Cancel"})]})]})]})})]})}function QH({className:n}){var J,Se;const{id:t}=my(),r=Na(),[i,o]=M.useState(null),[l,a]=M.useState(!0),[p,g]=M.useState(!1),[w,j]=M.useState(!1),[S,T]=M.useState(0),E=_e=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(_e);if(M.useEffect(()=>{(async()=>{if(t){a(!0);try{let re;E(t)?re=await Gx.getFranchiseById(t):re=await Gx.getFranchiseBySlug(t),re&&!Array.isArray(re)&&o(re)}catch(re){console.error("Error fetching franchise:",re)}a(!1)}})()},[t]),l)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"flex flex-col items-center gap-4",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading franchise details..."})]})});if(!i)return e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Franchise Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The franchise you're looking for doesn't exist."})]})});const O=_e=>_e>=1e7?`${(_e/1e7).toFixed(1)} Cr`:_e>=1e5?`${(_e/1e5).toFixed(1)} L`:`${_e.toLocaleString()}`,R=i.investmentMax||i.investmentMin||2e6,F=[{item:"Franchise Fee",amount:i.franchiseFee,percentage:25},{item:"Equipment & Setup",amount:R*.4,percentage:40},{item:"Interior & Branding",amount:R*.2,percentage:20},{item:"Working Capital",amount:R*.15,percentage:15}],B=i.roiProjections||[{year:"Year 1",revenue:R*.8,profit:R*.1,roi:"10%"},{year:"Year 2",revenue:R*1.2,profit:R*.18,roi:"18%"},{year:"Year 3",revenue:R*1.5,profit:R*.25,roi:"25%"},{year:"Year 4",revenue:R*1.8,profit:R*.32,roi:"32%"},{year:"Year 5",revenue:R*2.1,profit:R*.38,roi:"38%"}],G=[{service:"Initial Training",duration:"4-6 weeks",included:!0},{service:"Site Selection",duration:"2-3 weeks",included:!0},{service:"Store Setup",duration:"3-4 weeks",included:!0},{service:"Marketing Launch",duration:"2 weeks",included:!0},{service:"Ongoing Support",duration:"Continuous",included:!0},{service:"Staff Training",duration:"1-2 weeks",included:!0}],z=[{city:"Mumbai",status:"Available",population:"12.4M",competition:"Medium"},{city:"Delhi",status:"Limited",population:"11.0M",competition:"High"},{city:"Bangalore",status:"Available",population:"8.4M",competition:"Low"},{city:"Chennai",status:"Available",population:"7.0M",competition:"Medium"},{city:"Kolkata",status:"Taken",population:"4.5M",competition:"Low"}],ee=[i.logo,"https://images.unsplash.com/photo-1554118811-1e0d58224f24?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1517248135467-4c7edcad34c4?w=800&h=600&fit=crop","https://images.unsplash.com/photo-1559329007-40df8a9345d8?w=800&h=600&fit=crop"],ie=()=>{g(!p)},ge=()=>{navigator.share?navigator.share({title:i.brandName,text:i.description,url:window.location.href}):navigator.clipboard.writeText(window.location.href)},K=()=>{j(!0)};return e.jsxs("div",{className:er("min-h-screen bg-background",n),children:[e.jsx("div",{className:"bg-white border-b sticky top-0 z-10",children:e.jsx("div",{className:"container mx-auto px-4 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>console.warn("Prevented function call: `window.history.back()`"),children:[e.jsx(pd,{className:"h-4 w-4 mr-2"}),"Back to Franchises"]}),e.jsx(Ho,{orientation:"vertical",className:"h-6"}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:i.logo,alt:i.brandName,className:"w-10 h-10 rounded-lg object-cover"}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-xl font-bold",children:i.brandName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[i.industry,"  Est. 2015"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>r(`/franchise/${i.slug||t}/locations`),children:[e.jsx(Ja,{className:"h-4 w-4 mr-2"}),"View Locations"]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:ie,children:[e.jsx(Rg,{className:er("h-4 w-4 mr-2",p&&"fill-current text-red-500")}),p?"Saved":"Save"]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:ge,children:[e.jsx(QA,{className:"h-4 w-4 mr-2"}),"Share"]}),e.jsxs(ze,{onClick:K,children:[e.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Request Info"]})]})]})})}),e.jsx("div",{className:"container mx-auto px-4 py-6",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsx(ot,{children:e.jsxs(ut,{className:"p-0",children:[e.jsxs("div",{className:"aspect-video relative overflow-hidden rounded-t-lg",children:[e.jsx("img",{src:ee[S],alt:i.brandName,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute top-4 left-4",children:e.jsxs(Gt,{className:"bg-black/70 text-white",children:[S+1," / ",ee.length]})}),e.jsx("div",{className:"absolute top-4 right-4",children:e.jsxs(ze,{size:"sm",variant:"secondary",className:"gap-2",children:[e.jsx(YA,{className:"h-4 w-4"}),"Watch Video"]})})]}),e.jsx("div",{className:"p-4",children:e.jsx("div",{className:"flex gap-2 overflow-x-auto",children:ee.map((_e,re)=>e.jsx("button",{onClick:()=>T(re),className:er("flex-shrink-0 w-20 h-16 rounded-md overflow-hidden border-2",S===re?"border-primary":"border-muted"),children:e.jsx("img",{src:_e,alt:"",className:"w-full h-full object-cover"})},re))})})]})}),e.jsxs(_p,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Sf,{className:"grid w-full grid-cols-5",children:[e.jsx(Di,{value:"overview",children:"Overview"}),e.jsx(Di,{value:"investment",children:"Investment"}),e.jsx(Di,{value:"support",children:"Support"}),e.jsx(Di,{value:"territory",children:"Territory"}),e.jsx(Di,{value:"projections",children:"ROI"})]}),e.jsxs(Qi,{value:"overview",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Brand Story"})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx("p",{className:"text-muted-foreground leading-relaxed",children:i.description}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 pt-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(gp,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Established"}),e.jsx("div",{className:"text-lg font-bold",children:"2015"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(mp,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Outlets"}),e.jsx("div",{className:"text-lg font-bold",children:i.outlets})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(na,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Expected ROI"}),e.jsx("div",{className:"text-lg font-bold text-green-600",children:"25-35%"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx(ij,{className:"h-6 w-6 mx-auto mb-2 text-muted-foreground"}),e.jsx("div",{className:"text-sm font-medium",children:"Royalty"}),e.jsxs("div",{className:"text-lg font-bold",children:[i.royaltyPercentage,"%"]})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Competitive Advantages"})}),e.jsx(ut,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:(i.competitiveEdge||[]).map((_e,re)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nn,{className:"h-5 w-5 text-green-500 mt-0.5 flex-shrink-0"}),e.jsx("span",{className:"text-sm",children:_e})]},re))})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Franchise Model"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(mp,{className:"h-8 w-8 text-blue-600"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"Business Format"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Complete business system with proven operations"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(Go,{className:"h-8 w-8 text-green-600"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"Training & Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Comprehensive training and ongoing support"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mx-auto mb-3",children:e.jsx(na,{className:"h-8 w-8 text-purple-600"})}),e.jsx("h4",{className:"font-semibold mb-2",children:"Growth Potential"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Scalable business with expansion opportunities"})]})]})})]}),e.jsx(o6,{type:"franchise",businessId:i.id,businessName:i.brandName||"Franchise Opportunity",price:i.investmentMin||0,revenue:(J=B[0])==null?void 0:J.revenue,industry:i.industry,location:((Se=i.territories)==null?void 0:Se[0])||"India"})]}),e.jsxs(Qi,{value:"investment",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Investment Breakdown"})}),e.jsx(ut,{children:e.jsxs("div",{className:"space-y-4",children:[F.map((_e,re)=>e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"font-medium",children:_e.item}),e.jsx("span",{className:"font-bold",children:_e.amount?O(_e.amount):"N/A"})]}),e.jsx(vo,{value:_e.percentage,className:"h-2"}),e.jsxs("div",{className:"text-right text-sm text-muted-foreground",children:[_e.percentage,"% of total investment"]})]},re)),e.jsx(Ho,{}),e.jsxs("div",{className:"flex justify-between items-center text-lg font-bold",children:[e.jsx("span",{children:"Total Investment"}),e.jsx("span",{className:"text-primary",children:O(R)})]})]})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Ongoing Fees"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:i.royaltyPercentage}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Royalty Fee"}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"Monthly on gross revenue"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"2%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Marketing Fee"}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"National advertising fund"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"1%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Technology Fee"}),e.jsx("div",{className:"text-xs text-muted-foreground mt-1",children:"POS & software systems"})]})]})})]})]}),e.jsxs(Qi,{value:"support",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Training & Support Services"})}),e.jsx(ut,{children:e.jsx("div",{className:"space-y-4",children:G.map((_e,re)=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nn,{className:"h-5 w-5 text-green-500"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:_e.service}),e.jsx("div",{className:"text-sm text-muted-foreground",children:_e.duration})]})]}),e.jsx(Gt,{variant:"secondary",children:"Included"})]},re))})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Ongoing Support"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Operational Support"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" Regular business reviews"}),e.jsx("li",{children:" Performance monitoring"}),e.jsx("li",{children:" Operational guidance"}),e.jsx("li",{children:" Quality assurance"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Marketing Support"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" National advertising campaigns"}),e.jsx("li",{children:" Local marketing materials"}),e.jsx("li",{children:" Digital marketing support"}),e.jsx("li",{children:" Brand guidelines"})]})]})]})})]})]}),e.jsxs(Qi,{value:"territory",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Territory Availability"})}),e.jsx(ut,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"City"}),e.jsx("th",{className:"text-center py-2",children:"Status"}),e.jsx("th",{className:"text-right py-2",children:"Population"}),e.jsx("th",{className:"text-right py-2",children:"Competition"})]})}),e.jsx("tbody",{children:z.map((_e,re)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 font-medium",children:_e.city}),e.jsx("td",{className:"text-center py-2",children:e.jsx(Gt,{variant:_e.status==="Available"?"default":_e.status==="Limited"?"secondary":"outline",children:_e.status})}),e.jsx("td",{className:"text-right py-2",children:_e.population}),e.jsx("td",{className:"text-right py-2",children:e.jsx(Gt,{variant:"outline",className:_e.competition==="Low"?"text-green-600":_e.competition==="Medium"?"text-yellow-600":"text-red-600",children:_e.competition})})]},re))})]})})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Territory Rights"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Exclusive Rights"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" Protected territory radius"}),e.jsx("li",{children:" Population-based exclusivity"}),e.jsx("li",{children:" Non-compete protection"}),e.jsx("li",{children:" Expansion opportunities"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-semibold mb-3",children:"Multi-Unit Development"}),e.jsxs("ul",{className:"space-y-2 text-sm",children:[e.jsx("li",{children:" Area development agreements"}),e.jsx("li",{children:" Reduced franchise fees"}),e.jsx("li",{children:" Accelerated growth plans"}),e.jsx("li",{children:" Regional master franchise"})]})]})]})})]})]}),e.jsxs(Qi,{value:"projections",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"5-Year ROI Projections"})}),e.jsx(ut,{children:e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left py-2",children:"Year"}),e.jsx("th",{className:"text-right py-2",children:"Revenue"}),e.jsx("th",{className:"text-right py-2",children:"Profit"}),e.jsx("th",{className:"text-right py-2",children:"ROI"})]})}),e.jsx("tbody",{children:B.map((_e,re)=>e.jsxs("tr",{className:"border-b",children:[e.jsx("td",{className:"py-2 font-medium",children:typeof _e.year=="string"?_e.year:`Year ${_e.year}`}),e.jsx("td",{className:"text-right py-2",children:O((typeof _e.revenue=="number",_e.revenue))}),e.jsx("td",{className:"text-right py-2 text-green-600",children:O((typeof _e.profit=="number",_e.profit))}),e.jsx("td",{className:"text-right py-2 font-bold",children:typeof _e.roi=="string"?_e.roi:`${_e.roi}%`})]},re))})]})})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Break-Even Analysis"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-blue-600",children:"18"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Months to Break-Even"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-green-600",children:"25%"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Average Profit Margin"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-purple-600",children:"3.2x"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Investment Multiple"})]})]})})]})]})]})]}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Investment Summary"})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-3xl font-bold text-primary",children:O(R)}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Investment"})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Franchise Fee"}),e.jsx("span",{className:"text-sm font-medium",children:i.franchiseFee?O(i.franchiseFee):"N/A"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Royalty"}),e.jsxs("span",{className:"text-sm font-medium",children:[i.royaltyPercentage,"%"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Expected ROI"}),e.jsx("span",{className:"text-sm font-medium text-green-600",children:"25-35%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Payback Period"}),e.jsx("span",{className:"text-sm font-medium",children:"18 months"})]})]}),e.jsxs(ze,{className:"w-full",onClick:K,children:[e.jsx(Kc,{className:"h-4 w-4 mr-2"}),"Request Information"]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Verification & Awards"})}),e.jsx(ut,{children:e.jsx("div",{className:"space-y-2",children:i.badges&&i.badges.map((_e,re)=>e.jsxs(Gt,{variant:"secondary",className:"w-full justify-start",children:[e.jsx(jm,{className:"h-3 w-3 mr-2"}),_e]},re))})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Quick Stats"})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Total Outlets"}),e.jsx("span",{className:"font-medium",children:i.outlets})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Countries"}),e.jsx("span",{className:"font-medium",children:"5"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Success Rate"}),e.jsx("span",{className:"font-medium text-green-600",children:"92%"})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{className:"text-sm",children:"Avg. Rating"}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(pf,{className:"h-4 w-4 fill-current text-yellow-500"}),e.jsx("span",{className:"font-medium",children:"4.7"})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Franchise Development"})}),e.jsxs(ut,{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Kc,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"+91 98765 43210"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm",children:"Mumbai, Maharashtra"})]}),e.jsxs(ze,{variant:"outline",className:"w-full",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Download Brochure"]})]})]})]})]})}),e.jsx(Mg,{open:w,onOpenChange:j,children:e.jsxs(Om,{className:"sm:max-w-md",children:[e.jsx(zm,{children:e.jsx(Fm,{children:"Request Franchise Information"})}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"firstName",children:"First Name"}),e.jsx(Wt,{id:"firstName",placeholder:"John"})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"lastName",children:"Last Name"}),e.jsx(Wt,{id:"lastName",placeholder:"Doe"})]})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"email",children:"Email"}),e.jsx(Wt,{id:"email",type:"email",placeholder:"john@example.com"})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"phone",children:"Phone"}),e.jsx(Wt,{id:"phone",placeholder:"+91 98765 43210"})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"investment",children:"Available Investment"}),e.jsx(Wt,{id:"investment",placeholder:"25,00,000"})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"location",children:"Preferred Location"}),e.jsx(Wt,{id:"location",placeholder:"Mumbai, Delhi, Bangalore..."})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"message",children:"Message"}),e.jsx(Fl,{id:"message",placeholder:"I'm interested in learning more about this franchise opportunity..."})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{className:"flex-1",children:"Send Request"}),e.jsx(ze,{variant:"outline",onClick:()=>j(!1),children:"Cancel"})]})]})]})})]})}var Z1={exports:{}},eG=Z1.exports,XS;function tG(){return XS||(XS=1,(function(n,t){(function(r,i){n.exports=i()})(eG,(function(){var r,i,o;function l(a,p){if(!r)r=p;else if(!i)i=p;else{var g="var sharedChunk = {}; ("+r+")(sharedChunk); ("+i+")(sharedChunk);",w={};r(w),o=p(w),typeof window<"u"&&(o.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}return l(["exports"],(function(a){function p(s,u){return s(u={exports:{}},u.exports),u.exports}var g=w;function w(s,u,f,_){this.cx=3*s,this.bx=3*(f-s)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(_-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=s,this.p1y=_,this.p2x=f,this.p2y=_}w.prototype.sampleCurveX=function(s){return((this.ax*s+this.bx)*s+this.cx)*s},w.prototype.sampleCurveY=function(s){return((this.ay*s+this.by)*s+this.cy)*s},w.prototype.sampleCurveDerivativeX=function(s){return(3*this.ax*s+2*this.bx)*s+this.cx},w.prototype.solveCurveX=function(s,u){var f,_,C,P,L;for(u===void 0&&(u=1e-6),C=s,L=0;L<8;L++){if(P=this.sampleCurveX(C)-s,Math.abs(P)<u)return C;var q=this.sampleCurveDerivativeX(C);if(Math.abs(q)<1e-6)break;C-=P/q}if((C=s)<(f=0))return f;if(C>(_=1))return _;for(;f<_;){if(P=this.sampleCurveX(C),Math.abs(P-s)<u)return C;s>P?f=C:_=C,C=.5*(_-f)+f}return C},w.prototype.solve=function(s,u){return this.sampleCurveY(this.solveCurveX(s,u))};var j=S;function S(s,u){this.x=s,this.y=u}S.prototype={clone:function(){return new S(this.x,this.y)},add:function(s){return this.clone()._add(s)},sub:function(s){return this.clone()._sub(s)},multByPoint:function(s){return this.clone()._multByPoint(s)},divByPoint:function(s){return this.clone()._divByPoint(s)},mult:function(s){return this.clone()._mult(s)},div:function(s){return this.clone()._div(s)},rotate:function(s){return this.clone()._rotate(s)},rotateAround:function(s,u){return this.clone()._rotateAround(s,u)},matMult:function(s){return this.clone()._matMult(s)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(s){return this.x===s.x&&this.y===s.y},dist:function(s){return Math.sqrt(this.distSqr(s))},distSqr:function(s){var u=s.x-this.x,f=s.y-this.y;return u*u+f*f},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(s){return Math.atan2(this.y-s.y,this.x-s.x)},angleWith:function(s){return this.angleWithSep(s.x,s.y)},angleWithSep:function(s,u){return Math.atan2(this.x*u-this.y*s,this.x*s+this.y*u)},_matMult:function(s){var u=s[2]*this.x+s[3]*this.y;return this.x=s[0]*this.x+s[1]*this.y,this.y=u,this},_add:function(s){return this.x+=s.x,this.y+=s.y,this},_sub:function(s){return this.x-=s.x,this.y-=s.y,this},_mult:function(s){return this.x*=s,this.y*=s,this},_div:function(s){return this.x/=s,this.y/=s,this},_multByPoint:function(s){return this.x*=s.x,this.y*=s.y,this},_divByPoint:function(s){return this.x/=s.x,this.y/=s.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var s=this.y;return this.y=this.x,this.x=-s,this},_rotate:function(s){var u=Math.cos(s),f=Math.sin(s),_=f*this.x+u*this.y;return this.x=u*this.x-f*this.y,this.y=_,this},_rotateAround:function(s,u){var f=Math.cos(s),_=Math.sin(s),C=u.y+_*(this.x-u.x)+f*(this.y-u.y);return this.x=u.x+f*(this.x-u.x)-_*(this.y-u.y),this.y=C,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},S.convert=function(s){return s instanceof S?s:Array.isArray(s)?new S(s[0],s[1]):s};var T=typeof self<"u"?self:{},E=Math.pow(2,53)-1;function O(s,u,f,_){var C=new g(s,u,f,_);return function(P){return C.solve(P)}}var R=O(.25,.1,.25,1);function F(s,u,f){return Math.min(f,Math.max(u,s))}function B(s,u,f){var _=f-u,C=((s-u)%_+_)%_+u;return C===u?f:C}function G(s){for(var u=[],f=arguments.length-1;f-- >0;)u[f]=arguments[f+1];for(var _=0,C=u;_<C.length;_+=1){var P=C[_];for(var L in P)s[L]=P[L]}return s}var z=1;function ee(){return z++}function ie(){return(function s(u){return u?(u^16*Math.random()>>u/4).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,s)})()}function ge(s){return!!s&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(s)}function K(s,u){s.forEach((function(f){u[f]&&(u[f]=u[f].bind(u))}))}function J(s,u){return s.indexOf(u,s.length-u.length)!==-1}function Se(s,u,f){var _={};for(var C in s)_[C]=u.call(f||this,s[C],C,s);return _}function _e(s,u,f){var _={};for(var C in s)u.call(f||this,s[C],C,s)&&(_[C]=s[C]);return _}function re(s){return Array.isArray(s)?s.map(re):typeof s=="object"&&s?Se(s,re):s}var ce={};function fe(s){ce[s]||(typeof console<"u"&&console.warn(s),ce[s]=!0)}function ye(s,u,f){return(f.y-s.y)*(u.x-s.x)>(u.y-s.y)*(f.x-s.x)}function Fe(s){for(var u=0,f=0,_=s.length,C=_-1,P=void 0,L=void 0;f<_;C=f++)u+=((L=s[C]).x-(P=s[f]).x)*(P.y+L.y);return u}function Q(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function pe(s){var u={};if(s.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(function(_,C,P,L){var q=P||L;return u[C]=!q||q.toLowerCase(),""})),u["max-age"]){var f=parseInt(u["max-age"],10);isNaN(f)?delete u["max-age"]:u["max-age"]=f}return u}var me=null;function Ue(s){if(me==null){var u=s.navigator?s.navigator.userAgent:null;me=!!s.safari||!(!u||!(/\b(iPad|iPhone|iPod)\b/.test(u)||u.match("Safari")&&!u.match("Chrome")))}return me}function Ke(s){try{var u=T[s];return u.setItem("_mapbox_test_",1),u.removeItem("_mapbox_test_"),!0}catch{return!1}}var Re,te,ue,Ne,Me=T.performance&&T.performance.now?T.performance.now.bind(T.performance):Date.now.bind(Date),We=T.requestAnimationFrame||T.mozRequestAnimationFrame||T.webkitRequestAnimationFrame||T.msRequestAnimationFrame,Ve=T.cancelAnimationFrame||T.mozCancelAnimationFrame||T.webkitCancelAnimationFrame||T.msCancelAnimationFrame,tt={now:Me,frame:function(s){var u=We(s);return{cancel:function(){return Ve(u)}}},getImageData:function(s,u){u===void 0&&(u=0);var f=T.document.createElement("canvas"),_=f.getContext("2d");if(!_)throw new Error("failed to create canvas 2d context");return f.width=s.width,f.height=s.height,_.drawImage(s,0,0,s.width,s.height),_.getImageData(-u,-u,s.width+2*u,s.height+2*u)},resolveURL:function(s){return Re||(Re=T.document.createElement("a")),Re.href=s,Re.href},hardwareConcurrency:T.navigator&&T.navigator.hardwareConcurrency||4,get devicePixelRatio(){return T.devicePixelRatio},get prefersReducedMotion(){return!!T.matchMedia&&(te==null&&(te=T.matchMedia("(prefers-reduced-motion: reduce)")),te.matches)}},Qe={API_URL:"https://api.mapbox.com",get EVENTS_URL(){return this.API_URL?this.API_URL.indexOf("https://api.mapbox.cn")===0?"https://events.mapbox.cn/events/v2":this.API_URL.indexOf("https://api.mapbox.com")===0?"https://events.mapbox.com/events/v2":null:null},FEEDBACK_URL:"https://apps.mapbox.com/feedback",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,MAX_PARALLEL_IMAGE_REQUESTS:16},St={supported:!1,testSupport:function(s){!Et&&Ne&&(zt?Lt(s):ue=s)}},Et=!1,zt=!1;function Lt(s){var u=s.createTexture();s.bindTexture(s.TEXTURE_2D,u);try{if(s.texImage2D(s.TEXTURE_2D,0,s.RGBA,s.RGBA,s.UNSIGNED_BYTE,Ne),s.isContextLost())return;St.supported=!0}catch{}s.deleteTexture(u),Et=!0}T.document&&((Ne=T.document.createElement("img")).onload=function(){ue&&Lt(ue),ue=null,zt=!0},Ne.onerror=function(){Et=!0,ue=null},Ne.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");var wr="01",_t=function(s,u){this._transformRequestFn=s,this._customAccessToken=u,this._createSkuToken()};function Ye(s){return s.indexOf("mapbox:")===0}_t.prototype._createSkuToken=function(){var s=(function(){for(var u="",f=0;f<10;f++)u+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",wr,u].join(""),tokenExpiresAt:Date.now()+432e5}})();this._skuToken=s.token,this._skuTokenExpiresAt=s.tokenExpiresAt},_t.prototype._isSkuTokenExpired=function(){return Date.now()>this._skuTokenExpiresAt},_t.prototype.transformRequest=function(s,u){return this._transformRequestFn&&this._transformRequestFn(s,u)||{url:s}},_t.prototype.normalizeStyleURL=function(s,u){if(!Ye(s))return s;var f=Be(s);return f.path="/styles/v1"+f.path,this._makeAPIURL(f,this._customAccessToken||u)},_t.prototype.normalizeGlyphsURL=function(s,u){if(!Ye(s))return s;var f=Be(s);return f.path="/fonts/v1"+f.path,this._makeAPIURL(f,this._customAccessToken||u)},_t.prototype.normalizeSourceURL=function(s,u){if(!Ye(s))return s;var f=Be(s);return f.path="/v4/"+f.authority+".json",f.params.push("secure"),this._makeAPIURL(f,this._customAccessToken||u)},_t.prototype.normalizeSpriteURL=function(s,u,f,_){var C=Be(s);return Ye(s)?(C.path="/styles/v1"+C.path+"/sprite"+u+f,this._makeAPIURL(C,this._customAccessToken||_)):(C.path+=""+u+f,it(C))},_t.prototype.normalizeTileURL=function(s,u){if(this._isSkuTokenExpired()&&this._createSkuToken(),s&&!Ye(s))return s;var f=Be(s);f.path=f.path.replace(/(\.(png|jpg)\d*)(?=$)/,(tt.devicePixelRatio>=2||u===512?"@2x":"")+(St.supported?".webp":"$1")),f.path=f.path.replace(/^.+\/v4\//,"/"),f.path="/v4"+f.path;var _=this._customAccessToken||(function(C){for(var P=0,L=C;P<L.length;P+=1){var q=L[P].match(/^access_token=(.*)$/);if(q)return q[1]}return null})(f.params)||Qe.ACCESS_TOKEN;return Qe.REQUIRE_ACCESS_TOKEN&&_&&this._skuToken&&f.params.push("sku="+this._skuToken),this._makeAPIURL(f,_)},_t.prototype.canonicalizeTileURL=function(s,u){var f=Be(s);if(!f.path.match(/(^\/v4\/)/)||!f.path.match(/\.[\w]+$/))return s;var _="mapbox://tiles/";_+=f.path.replace("/v4/","");var C=f.params;return u&&(C=C.filter((function(P){return!P.match(/^access_token=/)}))),C.length&&(_+="?"+C.join("&")),_},_t.prototype.canonicalizeTileset=function(s,u){for(var f=!!u&&Ye(u),_=[],C=0,P=s.tiles||[];C<P.length;C+=1){var L=P[C];Cr(L)?_.push(this.canonicalizeTileURL(L,f)):_.push(L)}return _},_t.prototype._makeAPIURL=function(s,u){var f="See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes",_=Be(Qe.API_URL);if(s.protocol=_.protocol,s.authority=_.authority,s.protocol==="http"){var C=s.params.indexOf("secure");C>=0&&s.params.splice(C,1)}if(_.path!=="/"&&(s.path=""+_.path+s.path),!Qe.REQUIRE_ACCESS_TOKEN)return it(s);if(!(u=u||Qe.ACCESS_TOKEN))throw new Error("An API access token is required to use Mapbox GL. "+f);if(u[0]==="s")throw new Error("Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). "+f);return s.params=s.params.filter((function(P){return P.indexOf("access_token")===-1})),s.params.push("access_token="+u),it(s)};var $r=/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i;function Cr(s){return $r.test(s)}var Zt=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Be(s){var u=s.match(Zt);if(!u)throw new Error("Unable to parse URL object");return{protocol:u[1],authority:u[2],path:u[3]||"/",params:u[4]?u[4].split("&"):[]}}function it(s){var u=s.params.length?"?"+s.params.join("&"):"";return s.protocol+"://"+s.authority+s.path+u}function at(s){if(!s)return null;var u=s.split(".");if(!u||u.length!==3)return null;try{return JSON.parse(decodeURIComponent(T.atob(u[1]).split("").map((function(f){return"%"+("00"+f.charCodeAt(0).toString(16)).slice(-2)})).join("")))}catch{return null}}var Tt=function(s){this.type=s,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null};Tt.prototype.getStorageKey=function(s){var u,f=at(Qe.ACCESS_TOKEN);return u=f&&f.u?T.btoa(encodeURIComponent(f.u).replace(/%([0-9A-F]{2})/g,(function(_,C){return String.fromCharCode(+("0x"+C))}))):Qe.ACCESS_TOKEN||"",s?"mapbox.eventData."+s+":"+u:"mapbox.eventData:"+u},Tt.prototype.fetchEventData=function(){var s=Ke("localStorage"),u=this.getStorageKey(),f=this.getStorageKey("uuid");if(s)try{var _=T.localStorage.getItem(u);_&&(this.eventData=JSON.parse(_));var C=T.localStorage.getItem(f);C&&(this.anonId=C)}catch{fe("Unable to read from LocalStorage")}},Tt.prototype.saveEventData=function(){var s=Ke("localStorage"),u=this.getStorageKey(),f=this.getStorageKey("uuid");if(s)try{T.localStorage.setItem(f,this.anonId),Object.keys(this.eventData).length>=1&&T.localStorage.setItem(u,JSON.stringify(this.eventData))}catch{fe("Unable to write to LocalStorage")}},Tt.prototype.processRequests=function(s){},Tt.prototype.postEvent=function(s,u,f,_){var C=this;if(Qe.EVENTS_URL){var P=Be(Qe.EVENTS_URL);P.params.push("access_token="+(_||Qe.ACCESS_TOKEN||""));var L={event:this.type,created:new Date(s).toISOString(),sdkIdentifier:"mapbox-gl-js",sdkVersion:"1.13.3",skuId:wr,userId:this.anonId},q=u?G(L,u):L,Z={url:it(P),headers:{"Content-Type":"text/plain"},body:JSON.stringify([q])};this.pendingRequest=Lr(Z,(function(ne){C.pendingRequest=null,f(ne),C.saveEventData(),C.processRequests(_)}))}},Tt.prototype.queueRequest=function(s,u){this.queue.push(s),this.processRequests(u)};var kt,Ot,Qt=(function(s){function u(){s.call(this,"map.load"),this.success={},this.skuToken=""}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.postMapLoadEvent=function(f,_,C,P){this.skuToken=C;var L=!(!P&&!Qe.ACCESS_TOKEN),q=Array.isArray(f)&&f.some((function(Z){return Ye(Z)||Cr(Z)}));Qe.EVENTS_URL&&L&&q&&this.queueRequest({id:_,timestamp:Date.now()},P)},u.prototype.processRequests=function(f){var _=this;if(!this.pendingRequest&&this.queue.length!==0){var C=this.queue.shift(),P=C.id,L=C.timestamp;P&&this.success[P]||(this.anonId||this.fetchEventData(),ge(this.anonId)||(this.anonId=ie()),this.postEvent(L,{skuToken:this.skuToken},(function(q){q||P&&(_.success[P]=!0)}),f))}},u})(Tt),zr=new((function(s){function u(f){s.call(this,"appUserTurnstile"),this._customAccessToken=f}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.postTurnstileEvent=function(f,_){Qe.EVENTS_URL&&Qe.ACCESS_TOKEN&&Array.isArray(f)&&f.some((function(C){return Ye(C)||Cr(C)}))&&this.queueRequest(Date.now(),_)},u.prototype.processRequests=function(f){var _=this;if(!this.pendingRequest&&this.queue.length!==0){this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();var C=at(Qe.ACCESS_TOKEN),P=C?C.u:Qe.ACCESS_TOKEN,L=P!==this.eventData.tokenU;ge(this.anonId)||(this.anonId=ie(),L=!0);var q=this.queue.shift();if(this.eventData.lastSuccess){var Z=new Date(this.eventData.lastSuccess),ne=new Date(q),se=(q-this.eventData.lastSuccess)/864e5;L=L||se>=1||se<-1||Z.getDate()!==ne.getDate()}else L=!0;if(!L)return this.processRequests();this.postEvent(q,{"enabled.telemetry":!1},(function(he){he||(_.eventData.lastSuccess=q,_.eventData.tokenU=P)}),f)}},u})(Tt)),Hr=zr.postTurnstileEvent.bind(zr),Ur=new Qt,nn=Ur.postMapLoadEvent.bind(Ur),_r=500,Ri=50;function _n(){T.caches&&!kt&&(kt=T.caches.open("mapbox-tiles"))}function fi(s){var u=s.indexOf("?");return u<0?s:s.slice(0,u)}var kn,yn=1/0;function va(){return kn==null&&(kn=T.OffscreenCanvas&&new T.OffscreenCanvas(1,1).getContext("2d")&&typeof T.createImageBitmap=="function"),kn}var zn={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Image:"Image"};typeof Object.freeze=="function"&&Object.freeze(zn);var Sa=(function(s){function u(f,_,C){_===401&&Cr(C)&&(f+=": you may have provided an invalid Mapbox access token. See https://www.mapbox.com/api-documentation/#access-tokens-and-token-scopes"),s.call(this,f),this.status=_,this.url=C,this.name=this.constructor.name,this.message=f}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.toString=function(){return this.name+": "+this.message+" ("+this.status+"): "+this.url},u})(Error),wi=Q()?function(){return self.worker&&self.worker.referrer}:function(){return(T.location.protocol==="blob:"?T.parent:T).location.href},Cs,zs,pi=function(s,u){if(!(/^file:/.test(f=s.url)||/^file:/.test(wi())&&!/^\w+:/.test(f))){if(T.fetch&&T.Request&&T.AbortController&&T.Request.prototype.hasOwnProperty("signal"))return(function(_,C){var P,L=new T.AbortController,q=new T.Request(_.url,{method:_.method||"GET",body:_.body,credentials:_.credentials,headers:_.headers,referrer:wi(),signal:L.signal}),Z=!1,ne=!1,se=(P=q.url).indexOf("sku=")>0&&Cr(P);_.type==="json"&&q.headers.set("Accept","application/json");var he=function(Ee,$e,He){if(!ne){if(Ee&&Ee.message!=="SecurityError"&&fe(Ee),$e&&He)return we($e);var st=Date.now();T.fetch(q).then((function(Je){if(Je.ok){var ft=se?Je.clone():null;return we(Je,ft,st)}return C(new Sa(Je.statusText,Je.status,_.url))})).catch((function(Je){Je.code!==20&&C(new Error(Je.message))}))}},we=function(Ee,$e,He){(_.type==="arrayBuffer"?Ee.arrayBuffer():_.type==="json"?Ee.json():Ee.text()).then((function(st){ne||($e&&He&&(function(Je,ft,gt){if(_n(),kt){var wt={status:ft.status,statusText:ft.statusText,headers:new T.Headers};ft.headers.forEach((function(Bt,rr){return wt.headers.set(rr,Bt)}));var Nt=pe(ft.headers.get("Cache-Control")||"");Nt["no-store"]||(Nt["max-age"]&&wt.headers.set("Expires",new Date(gt+1e3*Nt["max-age"]).toUTCString()),new Date(wt.headers.get("Expires")).getTime()-gt<42e4||(function(Bt,rr){if(Ot===void 0)try{new Response(new ReadableStream),Ot=!0}catch{Ot=!1}Ot?rr(Bt.body):Bt.blob().then(rr)})(ft,(function(Bt){var rr=new T.Response(Bt,wt);_n(),kt&&kt.then((function(ur){return ur.put(fi(Je.url),rr)})).catch((function(ur){return fe(ur.message)}))})))}})(q,$e,He),Z=!0,C(null,st,Ee.headers.get("Cache-Control"),Ee.headers.get("Expires")))})).catch((function(st){ne||C(new Error(st.message))}))};return se?(function(Ee,$e){if(_n(),!kt)return $e(null);var He=fi(Ee.url);kt.then((function(st){st.match(He).then((function(Je){var ft=(function(gt){if(!gt)return!1;var wt=new Date(gt.headers.get("Expires")||0),Nt=pe(gt.headers.get("Cache-Control")||"");return wt>Date.now()&&!Nt["no-cache"]})(Je);st.delete(He),ft&&st.put(He,Je.clone()),$e(null,Je,ft)})).catch($e)})).catch($e)})(q,he):he(null,null),{cancel:function(){ne=!0,Z||L.abort()}}})(s,u);if(Q()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",s,u,void 0,!0)}var f;return(function(_,C){var P=new T.XMLHttpRequest;for(var L in P.open(_.method||"GET",_.url,!0),_.type==="arrayBuffer"&&(P.responseType="arraybuffer"),_.headers)P.setRequestHeader(L,_.headers[L]);return _.type==="json"&&(P.responseType="text",P.setRequestHeader("Accept","application/json")),P.withCredentials=_.credentials==="include",P.onerror=function(){C(new Error(P.statusText))},P.onload=function(){if((P.status>=200&&P.status<300||P.status===0)&&P.response!==null){var q=P.response;if(_.type==="json")try{q=JSON.parse(P.response)}catch(Z){return C(Z)}C(null,q,P.getResponseHeader("Cache-Control"),P.getResponseHeader("Expires"))}else C(new Sa(P.statusText,P.status,_.url))},P.send(_.body),{cancel:function(){return P.abort()}}})(s,u)},xr=function(s,u){return pi(G(s,{type:"arrayBuffer"}),u)},Lr=function(s,u){return pi(G(s,{method:"POST"}),u)},oe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";Cs=[],zs=0;var xe=function(s,u){if(St.supported&&(s.headers||(s.headers={}),s.headers.accept="image/webp,*/*"),zs>=Qe.MAX_PARALLEL_IMAGE_REQUESTS){var f={requestParameters:s,callback:u,cancelled:!1,cancel:function(){this.cancelled=!0}};return Cs.push(f),f}zs++;var _=!1,C=function(){if(!_)for(_=!0,zs--;Cs.length&&zs<Qe.MAX_PARALLEL_IMAGE_REQUESTS;){var L=Cs.shift();L.cancelled||(L.cancel=xe(L.requestParameters,L.callback).cancel)}},P=xr(s,(function(L,q,Z,ne){C(),L?u(L):q&&(va()?(function(se,he){var we=new T.Blob([new Uint8Array(se)],{type:"image/png"});T.createImageBitmap(we).then((function(Ee){he(null,Ee)})).catch((function(Ee){he(new Error("Could not load image because of "+Ee.message+". Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))}))})(q,u):(function(se,he,we,Ee){var $e=new T.Image,He=T.URL;$e.onload=function(){he(null,$e),He.revokeObjectURL($e.src),$e.onload=null,T.requestAnimationFrame((function(){$e.src=oe}))},$e.onerror=function(){return he(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."))};var st=new T.Blob([new Uint8Array(se)],{type:"image/png"});$e.cacheControl=we,$e.expires=Ee,$e.src=se.byteLength?He.createObjectURL(st):oe})(q,u,Z,ne))}));return{cancel:function(){P.cancel(),C()}}};function Ce(s,u,f){f[s]&&f[s].indexOf(u)!==-1||(f[s]=f[s]||[],f[s].push(u))}function Te(s,u,f){if(f&&f[s]){var _=f[s].indexOf(u);_!==-1&&f[s].splice(_,1)}}var De=function(s,u){u===void 0&&(u={}),G(this,u),this.type=s},et=(function(s){function u(f,_){_===void 0&&(_={}),s.call(this,"error",G({error:f},_))}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u})(De),nt=function(){};nt.prototype.on=function(s,u){return this._listeners=this._listeners||{},Ce(s,u,this._listeners),this},nt.prototype.off=function(s,u){return Te(s,u,this._listeners),Te(s,u,this._oneTimeListeners),this},nt.prototype.once=function(s,u){return this._oneTimeListeners=this._oneTimeListeners||{},Ce(s,u,this._oneTimeListeners),this},nt.prototype.fire=function(s,u){typeof s=="string"&&(s=new De(s,u||{}));var f=s.type;if(this.listens(f)){s.target=this;for(var _=0,C=this._listeners&&this._listeners[f]?this._listeners[f].slice():[];_<C.length;_+=1)C[_].call(this,s);for(var P=0,L=this._oneTimeListeners&&this._oneTimeListeners[f]?this._oneTimeListeners[f].slice():[];P<L.length;P+=1){var q=L[P];Te(f,q,this._oneTimeListeners),q.call(this,s)}var Z=this._eventedParent;Z&&(G(s,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),Z.fire(s))}else s instanceof et&&console.error(s.error);return this},nt.prototype.listens=function(s){return this._listeners&&this._listeners[s]&&this._listeners[s].length>0||this._oneTimeListeners&&this._oneTimeListeners[s]&&this._oneTimeListeners[s].length>0||this._eventedParent&&this._eventedParent.listens(s)},nt.prototype.setEventedParent=function(s,u){return this._eventedParent=s,this._eventedParentData=u,this};var ke={$version:8,$root:{version:{required:!0,type:"enum",values:[8]},name:{type:"string"},metadata:{type:"*"},center:{type:"array",value:"number"},zoom:{type:"number"},bearing:{type:"number",default:0,period:360,units:"degrees"},pitch:{type:"number",default:0,units:"degrees"},light:{type:"light"},sources:{required:!0,type:"sources"},sprite:{type:"string"},glyphs:{type:"string"},transition:{type:"transition"},layers:{required:!0,type:"array",value:"layer"}},sources:{"*":{type:"source"}},source:["source_vector","source_raster","source_raster_dem","source_geojson","source_video","source_image"],source_vector:{type:{required:!0,type:"enum",values:{vector:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},attribution:{type:"string"},promoteId:{type:"promoteId"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster:{type:{required:!0,type:"enum",values:{raster:{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},scheme:{type:"enum",values:{xyz:{},tms:{}},default:"xyz"},attribution:{type:"string"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_raster_dem:{type:{required:!0,type:"enum",values:{"raster-dem":{}}},url:{type:"string"},tiles:{type:"array",value:"string"},bounds:{type:"array",value:"number",length:4,default:[-180,-85.051129,180,85.051129]},minzoom:{type:"number",default:0},maxzoom:{type:"number",default:22},tileSize:{type:"number",default:512,units:"pixels"},attribution:{type:"string"},encoding:{type:"enum",values:{terrarium:{},mapbox:{}},default:"mapbox"},volatile:{type:"boolean",default:!1},"*":{type:"*"}},source_geojson:{type:{required:!0,type:"enum",values:{geojson:{}}},data:{type:"*"},maxzoom:{type:"number",default:18},attribution:{type:"string"},buffer:{type:"number",default:128,maximum:512,minimum:0},filter:{type:"*"},tolerance:{type:"number",default:.375},cluster:{type:"boolean",default:!1},clusterRadius:{type:"number",default:50,minimum:0},clusterMaxZoom:{type:"number"},clusterMinPoints:{type:"number"},clusterProperties:{type:"*"},lineMetrics:{type:"boolean",default:!1},generateId:{type:"boolean",default:!1},promoteId:{type:"promoteId"}},source_video:{type:{required:!0,type:"enum",values:{video:{}}},urls:{required:!0,type:"array",value:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},source_image:{type:{required:!0,type:"enum",values:{image:{}}},url:{required:!0,type:"string"},coordinates:{required:!0,type:"array",length:4,value:{type:"array",length:2,value:"number"}}},layer:{id:{type:"string",required:!0},type:{type:"enum",values:{fill:{},line:{},symbol:{},circle:{},heatmap:{},"fill-extrusion":{},raster:{},hillshade:{},background:{}},required:!0},metadata:{type:"*"},source:{type:"string"},"source-layer":{type:"string"},minzoom:{type:"number",minimum:0,maximum:24},maxzoom:{type:"number",minimum:0,maximum:24},filter:{type:"filter"},layout:{type:"layout"},paint:{type:"paint"}},layout:["layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_hillshade","layout_background"],layout_background:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_fill:{"fill-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_circle:{"circle-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_heatmap:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},"layout_fill-extrusion":{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_line:{"line-cap":{type:"enum",values:{butt:{},round:{},square:{}},default:"butt",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-join":{type:"enum",values:{bevel:{},round:{},miter:{}},default:"miter",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{type:"number",default:2,requires:[{"line-join":"miter"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-round-limit":{type:"number",default:1.05,requires:[{"line-join":"round"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_symbol:{"symbol-placement":{type:"enum",values:{point:{},line:{},"line-center":{}},default:"point",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-spacing":{type:"number",default:250,minimum:1,units:"pixels",requires:[{"symbol-placement":"line"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{type:"boolean",default:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{type:"number",expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{type:"enum",values:{auto:{},"viewport-y":{},source:{}},default:"auto",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{type:"boolean",default:!1,requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-optional":{type:"boolean",default:!1,requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-size":{type:"number",default:1,minimum:0,units:"factor of the original icon size",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit":{type:"enum",values:{none:{},width:{},height:{},both:{}},default:"none",requires:["icon-image","text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-text-fit-padding":{type:"array",value:"number",length:4,default:[0,0,0,0],units:"pixels",requires:["icon-image","text-field",{"icon-text-fit":["both","width","height"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-image":{type:"resolvedImage",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{type:"boolean",default:!1,requires:["icon-image",{"icon-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"icon-offset":{type:"array",value:"number",length:2,default:[0,0],requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{type:"enum",values:{map:{},viewport:{},auto:{}},default:"auto",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-field":{type:"formatted",default:"",tokens:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-font":{type:"array",value:"string",default:["Open Sans Regular","Arial Unicode MS Regular"],requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-size":{type:"number",default:16,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-width":{type:"number",default:10,minimum:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{type:"number",default:1.2,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-letter-spacing":{type:"number",default:0,units:"ems",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-justify":{type:"enum",values:{auto:{},left:{},center:{},right:{}},default:"center",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{type:"number",units:"ems",default:0,requires:["text-field"],"property-type":"data-driven",expression:{interpolated:!0,parameters:["zoom","feature"]}},"text-variable-anchor":{type:"array",value:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-anchor":{type:"enum",values:{center:{},left:{},right:{},top:{},bottom:{},"top-left":{},"top-right":{},"bottom-left":{},"bottom-right":{}},default:"center",requires:["text-field",{"!":"text-variable-anchor"}],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{type:"number",default:45,units:"degrees",requires:["text-field",{"symbol-placement":["line","line-center"]}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-writing-mode":{type:"array",value:"enum",values:{horizontal:{},vertical:{}},requires:["text-field",{"symbol-placement":["point"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-rotate":{type:"number",default:0,period:360,units:"degrees",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-padding":{type:"number",default:2,minimum:0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-keep-upright":{type:"boolean",default:!0,requires:["text-field",{"text-rotation-alignment":"map"},{"symbol-placement":["line","line-center"]}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-transform":{type:"enum",values:{none:{},uppercase:{},lowercase:{}},default:"none",requires:["text-field"],expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-offset":{type:"array",value:"number",units:"ems",length:2,default:[0,0],requires:["text-field",{"!":"text-radial-offset"}],expression:{interpolated:!0,parameters:["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{type:"boolean",default:!1,requires:["text-field"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-optional":{type:"boolean",default:!1,requires:["text-field","icon-image"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_raster:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},layout_hillshade:{visibility:{type:"enum",values:{visible:{},none:{}},default:"visible","property-type":"constant"}},filter:{type:"array",value:"*"},filter_operator:{type:"enum",values:{"==":{},"!=":{},">":{},">=":{},"<":{},"<=":{},in:{},"!in":{},all:{},any:{},none:{},has:{},"!has":{},within:{}}},geometry_type:{type:"enum",values:{Point:{},LineString:{},Polygon:{}}},function:{expression:{type:"expression"},stops:{type:"array",value:"function_stop"},base:{type:"number",default:1,minimum:0},property:{type:"string",default:"$zoom"},type:{type:"enum",values:{identity:{},exponential:{},interval:{},categorical:{}},default:"exponential"},colorSpace:{type:"enum",values:{rgb:{},lab:{},hcl:{}},default:"rgb"},default:{type:"*",required:!1}},function_stop:{type:"array",minimum:0,maximum:24,value:["number","color"],length:2},expression:{type:"array",value:"*",minimum:1},light:{anchor:{type:"enum",default:"viewport",values:{map:{},viewport:{}},"property-type":"data-constant",transition:!1,expression:{interpolated:!1,parameters:["zoom"]}},position:{type:"array",default:[1.15,210,30],length:3,value:"number","property-type":"data-constant",transition:!0,expression:{interpolated:!0,parameters:["zoom"]}},color:{type:"color","property-type":"data-constant",default:"#ffffff",expression:{interpolated:!0,parameters:["zoom"]},transition:!0},intensity:{type:"number","property-type":"data-constant",default:.5,minimum:0,maximum:1,expression:{interpolated:!0,parameters:["zoom"]},transition:!0}},paint:["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_hillshade","paint_background"],paint_fill:{"fill-antialias":{type:"boolean",default:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-outline-color":{type:"color",transition:!0,requires:[{"!":"fill-pattern"},{"fill-antialias":!0}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"fill-extrusion-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["fill-extrusion-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"fill-extrusion-height":{type:"number",default:0,minimum:0,units:"meters",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{type:"number",default:0,minimum:0,units:"meters",transition:!0,requires:["fill-extrusion-height"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-vertical-gradient":{type:"boolean",default:!0,transition:!1,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_line:{"line-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"line-pattern"}],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["line-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"line-width":{type:"number",default:1,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-gap-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-offset":{type:"number",default:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-dasharray":{type:"array",value:"number",minimum:0,transition:!0,units:"line widths",requires:[{"!":"line-pattern"}],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"line-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom","feature"]},"property-type":"cross-faded-data-driven"},"line-gradient":{type:"color",transition:!1,requires:[{"!":"line-dasharray"},{"!":"line-pattern"},{source:"geojson",has:{lineMetrics:!0}}],expression:{interpolated:!0,parameters:["line-progress"]},"property-type":"color-ramp"}},paint_circle:{"circle-radius":{type:"number",default:5,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-blur":{type:"number",default:0,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["circle-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{type:"enum",values:{map:{},viewport:{}},default:"map",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"circle-stroke-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"}},paint_heatmap:{"heatmap-radius":{type:"number",default:30,minimum:1,transition:!0,units:"pixels",expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-weight":{type:"number",default:1,minimum:0,transition:!1,expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"heatmap-intensity":{type:"number",default:1,minimum:0,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"heatmap-color":{type:"color",default:["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",.1,"royalblue",.3,"cyan",.5,"lime",.7,"yellow",1,"red"],transition:!1,expression:{interpolated:!0,parameters:["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_symbol:{"icon-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-color":{type:"color",default:"#000000",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"icon-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["icon-image"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["icon-image","icon-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"text-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-color":{type:"color",default:"#000000",transition:!0,overridable:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-color":{type:"color",default:"rgba(0, 0, 0, 0)",transition:!0,requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-width":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-halo-blur":{type:"number",default:0,minimum:0,transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom","feature","feature-state"]},"property-type":"data-driven"},"text-translate":{type:"array",value:"number",length:2,default:[0,0],transition:!0,units:"pixels",requires:["text-field"],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{type:"enum",values:{map:{},viewport:{}},default:"map",requires:["text-field","text-translate"],expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"}},paint_raster:{"raster-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-hue-rotate":{type:"number",default:0,period:360,transition:!0,units:"degrees",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{type:"number",default:0,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-saturation":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-contrast":{type:"number",default:0,minimum:-1,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"raster-resampling":{type:"enum",values:{linear:{},nearest:{}},default:"linear",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{type:"number",default:300,minimum:0,transition:!1,units:"milliseconds",expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_hillshade:{"hillshade-illumination-direction":{type:"number",default:335,minimum:0,maximum:359,transition:!1,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{type:"enum",values:{map:{},viewport:{}},default:"viewport",expression:{interpolated:!1,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{type:"number",default:.5,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-highlight-color":{type:"color",default:"#FFFFFF",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"hillshade-accent-color":{type:"color",default:"#000000",transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},paint_background:{"background-color":{type:"color",default:"#000000",transition:!0,requires:[{"!":"background-pattern"}],expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"},"background-pattern":{type:"resolvedImage",transition:!0,expression:{interpolated:!1,parameters:["zoom"]},"property-type":"cross-faded"},"background-opacity":{type:"number",default:1,minimum:0,maximum:1,transition:!0,expression:{interpolated:!0,parameters:["zoom"]},"property-type":"data-constant"}},transition:{duration:{type:"number",default:300,minimum:0,units:"milliseconds"},delay:{type:"number",default:0,minimum:0,units:"milliseconds"}},"property-type":{"data-driven":{type:"property-type"},"cross-faded":{type:"property-type"},"cross-faded-data-driven":{type:"property-type"},"color-ramp":{type:"property-type"},"data-constant":{type:"property-type"},constant:{type:"property-type"}},promoteId:{"*":{type:"string"}}},qe=function(s,u,f,_){this.message=(s?s+": ":"")+f,_&&(this.identifier=_),u!=null&&u.__line__&&(this.line=u.__line__)};function ht(s){var u=s.value;return u?[new qe(s.key,u,"constants have been deprecated as of v8")]:[]}function qt(s){for(var u=[],f=arguments.length-1;f-- >0;)u[f]=arguments[f+1];for(var _=0,C=u;_<C.length;_+=1){var P=C[_];for(var L in P)s[L]=P[L]}return s}function Xt(s){return s instanceof Number||s instanceof String||s instanceof Boolean?s.valueOf():s}function bt(s){if(Array.isArray(s))return s.map(bt);if(s instanceof Object&&!(s instanceof Number||s instanceof String||s instanceof Boolean)){var u={};for(var f in s)u[f]=bt(s[f]);return u}return Xt(s)}var Mt=(function(s){function u(f,_){s.call(this,_),this.message=_,this.key=f}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u})(Error),dr=function(s,u){u===void 0&&(u=[]),this.parent=s,this.bindings={};for(var f=0,_=u;f<_.length;f+=1){var C=_[f];this.bindings[C[0]]=C[1]}};dr.prototype.concat=function(s){return new dr(this,s)},dr.prototype.get=function(s){if(this.bindings[s])return this.bindings[s];if(this.parent)return this.parent.get(s);throw new Error(s+" not found in scope.")},dr.prototype.has=function(s){return!!this.bindings[s]||!!this.parent&&this.parent.has(s)};var mr={kind:"null"},jt={kind:"number"},gr={kind:"string"},or={kind:"boolean"},fr={kind:"color"},an={kind:"object"},yr={kind:"value"},xn={kind:"collator"},$n={kind:"formatted"},bn={kind:"resolvedImage"};function Un(s,u){return{kind:"array",itemType:s,N:u}}function Xr(s){if(s.kind==="array"){var u=Xr(s.itemType);return typeof s.N=="number"?"array<"+u+", "+s.N+">":s.itemType.kind==="value"?"array":"array<"+u+">"}return s.kind}var Ks=[mr,jt,gr,or,fr,$n,an,Un(yr),bn];function ti(s,u){if(u.kind==="error")return null;if(s.kind==="array"){if(u.kind==="array"&&(u.N===0&&u.itemType.kind==="value"||!ti(s.itemType,u.itemType))&&(typeof s.N!="number"||s.N===u.N))return null}else{if(s.kind===u.kind)return null;if(s.kind==="value"){for(var f=0,_=Ks;f<_.length;f+=1)if(!ti(_[f],u))return null}}return"Expected "+Xr(s)+" but found "+Xr(u)+" instead."}function Ii(s,u){return u.some((function(f){return f.kind===s.kind}))}function Hn(s,u){return u.some((function(f){return f==="null"?s===null:f==="array"?Array.isArray(s):f==="object"?s&&!Array.isArray(s)&&typeof s=="object":f===typeof s}))}var Fn=p((function(s,u){var f={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function _(q){return(q=Math.round(q))<0?0:q>255?255:q}function C(q){return _(q[q.length-1]==="%"?parseFloat(q)/100*255:parseInt(q))}function P(q){return(Z=q[q.length-1]==="%"?parseFloat(q)/100:parseFloat(q))<0?0:Z>1?1:Z;var Z}function L(q,Z,ne){return ne<0?ne+=1:ne>1&&(ne-=1),6*ne<1?q+(Z-q)*ne*6:2*ne<1?Z:3*ne<2?q+(Z-q)*(2/3-ne)*6:q}try{u.parseCSSColor=function(q){var Z,ne=q.replace(/ /g,"").toLowerCase();if(ne in f)return f[ne].slice();if(ne[0]==="#")return ne.length===4?(Z=parseInt(ne.substr(1),16))>=0&&Z<=4095?[(3840&Z)>>4|(3840&Z)>>8,240&Z|(240&Z)>>4,15&Z|(15&Z)<<4,1]:null:ne.length===7&&(Z=parseInt(ne.substr(1),16))>=0&&Z<=16777215?[(16711680&Z)>>16,(65280&Z)>>8,255&Z,1]:null;var se=ne.indexOf("("),he=ne.indexOf(")");if(se!==-1&&he+1===ne.length){var we=ne.substr(0,se),Ee=ne.substr(se+1,he-(se+1)).split(","),$e=1;switch(we){case"rgba":if(Ee.length!==4)return null;$e=P(Ee.pop());case"rgb":return Ee.length!==3?null:[C(Ee[0]),C(Ee[1]),C(Ee[2]),$e];case"hsla":if(Ee.length!==4)return null;$e=P(Ee.pop());case"hsl":if(Ee.length!==3)return null;var He=(parseFloat(Ee[0])%360+360)%360/360,st=P(Ee[1]),Je=P(Ee[2]),ft=Je<=.5?Je*(st+1):Je+st-Je*st,gt=2*Je-ft;return[_(255*L(gt,ft,He+1/3)),_(255*L(gt,ft,He)),_(255*L(gt,ft,He-1/3)),$e];default:return null}}return null}}catch{}})).parseCSSColor,Yn=function(s,u,f,_){_===void 0&&(_=1),this.r=s,this.g=u,this.b=f,this.a=_};Yn.parse=function(s){if(s){if(s instanceof Yn)return s;if(typeof s=="string"){var u=Fn(s);if(u)return new Yn(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3])}}},Yn.prototype.toString=function(){var s=this.toArray(),u=s[1],f=s[2],_=s[3];return"rgba("+Math.round(s[0])+","+Math.round(u)+","+Math.round(f)+","+_+")"},Yn.prototype.toArray=function(){var s=this.a;return s===0?[0,0,0,0]:[255*this.r/s,255*this.g/s,255*this.b/s,s]},Yn.black=new Yn(0,0,0,1),Yn.white=new Yn(1,1,1,1),Yn.transparent=new Yn(0,0,0,0),Yn.red=new Yn(1,0,0,1);var qa=function(s,u,f){this.sensitivity=s?u?"variant":"case":u?"accent":"base",this.locale=f,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})};qa.prototype.compare=function(s,u){return this.collator.compare(s,u)},qa.prototype.resolvedLocale=function(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale};var Nc=function(s,u,f,_,C){this.text=s,this.image=u,this.scale=f,this.fontStack=_,this.textColor=C},ks=function(s){this.sections=s};ks.fromString=function(s){return new ks([new Nc(s,null,null,null,null)])},ks.prototype.isEmpty=function(){return this.sections.length===0||!this.sections.some((function(s){return s.text.length!==0||s.image&&s.image.name.length!==0}))},ks.factory=function(s){return s instanceof ks?s:ks.fromString(s)},ks.prototype.toString=function(){return this.sections.length===0?"":this.sections.map((function(s){return s.text})).join("")},ks.prototype.serialize=function(){for(var s=["format"],u=0,f=this.sections;u<f.length;u+=1){var _=f[u];if(_.image)s.push(["image",_.image.name]);else{s.push(_.text);var C={};_.fontStack&&(C["text-font"]=["literal",_.fontStack.split(",")]),_.scale&&(C["font-scale"]=_.scale),_.textColor&&(C["text-color"]=["rgba"].concat(_.textColor.toArray())),s.push(C)}}return s};var ri=function(s){this.name=s.name,this.available=s.available};function Wo(s,u,f,_){return typeof s=="number"&&s>=0&&s<=255&&typeof u=="number"&&u>=0&&u<=255&&typeof f=="number"&&f>=0&&f<=255?_===void 0||typeof _=="number"&&_>=0&&_<=1?null:"Invalid rgba value ["+[s,u,f,_].join(", ")+"]: 'a' must be between 0 and 1.":"Invalid rgba value ["+(typeof _=="number"?[s,u,f,_]:[s,u,f]).join(", ")+"]: 'r', 'g', and 'b' must be between 0 and 255."}function Aa(s){if(s===null||typeof s=="string"||typeof s=="boolean"||typeof s=="number"||s instanceof Yn||s instanceof qa||s instanceof ks||s instanceof ri)return!0;if(Array.isArray(s)){for(var u=0,f=s;u<f.length;u+=1)if(!Aa(f[u]))return!1;return!0}if(typeof s=="object"){for(var _ in s)if(!Aa(s[_]))return!1;return!0}return!1}function es(s){if(s===null)return mr;if(typeof s=="string")return gr;if(typeof s=="boolean")return or;if(typeof s=="number")return jt;if(s instanceof Yn)return fr;if(s instanceof qa)return xn;if(s instanceof ks)return $n;if(s instanceof ri)return bn;if(Array.isArray(s)){for(var u,f=s.length,_=0,C=s;_<C.length;_+=1){var P=es(C[_]);if(u){if(u===P)continue;u=yr;break}u=P}return Un(u||yr,f)}return an}function Qc(s){var u=typeof s;return s===null?"":u==="string"||u==="number"||u==="boolean"?String(s):s instanceof Yn||s instanceof ks||s instanceof ri?s.toString():JSON.stringify(s)}ri.prototype.toString=function(){return this.name},ri.fromString=function(s){return s?new ri({name:s,available:!1}):null},ri.prototype.serialize=function(){return["image",this.name]};var ya=function(s,u){this.type=s,this.value=u};ya.parse=function(s,u){if(s.length!==2)return u.error("'literal' expression requires exactly one argument, but found "+(s.length-1)+" instead.");if(!Aa(s[1]))return u.error("invalid value");var f=s[1],_=es(f),C=u.expectedType;return _.kind!=="array"||_.N!==0||!C||C.kind!=="array"||typeof C.N=="number"&&C.N!==0||(_=C),new ya(_,f)},ya.prototype.evaluate=function(){return this.value},ya.prototype.eachChild=function(){},ya.prototype.outputDefined=function(){return!0},ya.prototype.serialize=function(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof Yn?["rgba"].concat(this.value.toArray()):this.value instanceof ks?this.value.serialize():this.value};var Oi=function(s){this.name="ExpressionEvaluationError",this.message=s};Oi.prototype.toJSON=function(){return this.message};var xa={string:gr,number:jt,boolean:or,object:an},Zn=function(s,u){this.type=s,this.args=u};Zn.parse=function(s,u){if(s.length<2)return u.error("Expected at least one argument.");var f,_=1,C=s[0];if(C==="array"){var P,L;if(s.length>2){var q=s[1];if(typeof q!="string"||!(q in xa)||q==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);P=xa[q],_++}else P=yr;if(s.length>3){if(s[2]!==null&&(typeof s[2]!="number"||s[2]<0||s[2]!==Math.floor(s[2])))return u.error('The length argument to "array" must be a positive integer literal',2);L=s[2],_++}f=Un(P,L)}else f=xa[C];for(var Z=[];_<s.length;_++){var ne=u.parse(s[_],_,yr);if(!ne)return null;Z.push(ne)}return new Zn(f,Z)},Zn.prototype.evaluate=function(s){for(var u=0;u<this.args.length;u++){var f=this.args[u].evaluate(s);if(!ti(this.type,es(f)))return f;if(u===this.args.length-1)throw new Oi("Expected value to be of type "+Xr(this.type)+", but found "+Xr(es(f))+" instead.")}return null},Zn.prototype.eachChild=function(s){this.args.forEach(s)},Zn.prototype.outputDefined=function(){return this.args.every((function(s){return s.outputDefined()}))},Zn.prototype.serialize=function(){var s=this.type,u=[s.kind];if(s.kind==="array"){var f=s.itemType;if(f.kind==="string"||f.kind==="number"||f.kind==="boolean"){u.push(f.kind);var _=s.N;(typeof _=="number"||this.args.length>1)&&u.push(_)}}return u.concat(this.args.map((function(C){return C.serialize()})))};var cs=function(s){this.type=$n,this.sections=s};cs.parse=function(s,u){if(s.length<2)return u.error("Expected at least one argument.");var f=s[1];if(!Array.isArray(f)&&typeof f=="object")return u.error("First argument must be an image or text section.");for(var _=[],C=!1,P=1;P<=s.length-1;++P){var L=s[P];if(C&&typeof L=="object"&&!Array.isArray(L)){C=!1;var q=null;if(L["font-scale"]&&!(q=u.parse(L["font-scale"],1,jt)))return null;var Z=null;if(L["text-font"]&&!(Z=u.parse(L["text-font"],1,Un(gr))))return null;var ne=null;if(L["text-color"]&&!(ne=u.parse(L["text-color"],1,fr)))return null;var se=_[_.length-1];se.scale=q,se.font=Z,se.textColor=ne}else{var he=u.parse(s[P],1,yr);if(!he)return null;var we=he.type.kind;if(we!=="string"&&we!=="value"&&we!=="null"&&we!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");C=!0,_.push({content:he,scale:null,font:null,textColor:null})}}return new cs(_)},cs.prototype.evaluate=function(s){return new ks(this.sections.map((function(u){var f=u.content.evaluate(s);return es(f)===bn?new Nc("",f,null,null,null):new Nc(Qc(f),null,u.scale?u.scale.evaluate(s):null,u.font?u.font.evaluate(s).join(","):null,u.textColor?u.textColor.evaluate(s):null)})))},cs.prototype.eachChild=function(s){for(var u=0,f=this.sections;u<f.length;u+=1){var _=f[u];s(_.content),_.scale&&s(_.scale),_.font&&s(_.font),_.textColor&&s(_.textColor)}},cs.prototype.outputDefined=function(){return!1},cs.prototype.serialize=function(){for(var s=["format"],u=0,f=this.sections;u<f.length;u+=1){var _=f[u];s.push(_.content.serialize());var C={};_.scale&&(C["font-scale"]=_.scale.serialize()),_.font&&(C["text-font"]=_.font.serialize()),_.textColor&&(C["text-color"]=_.textColor.serialize()),s.push(C)}return s};var Va=function(s){this.type=bn,this.input=s};Va.parse=function(s,u){if(s.length!==2)return u.error("Expected two arguments.");var f=u.parse(s[1],1,gr);return f?new Va(f):u.error("No image name provided.")},Va.prototype.evaluate=function(s){var u=this.input.evaluate(s),f=ri.fromString(u);return f&&s.availableImages&&(f.available=s.availableImages.indexOf(u)>-1),f},Va.prototype.eachChild=function(s){s(this.input)},Va.prototype.outputDefined=function(){return!1},Va.prototype.serialize=function(){return["image",this.input.serialize()]};var th={"to-boolean":or,"to-color":fr,"to-number":jt,"to-string":gr},to=function(s,u){this.type=s,this.args=u};to.parse=function(s,u){if(s.length<2)return u.error("Expected at least one argument.");var f=s[0];if((f==="to-boolean"||f==="to-string")&&s.length!==2)return u.error("Expected one argument.");for(var _=th[f],C=[],P=1;P<s.length;P++){var L=u.parse(s[P],P,yr);if(!L)return null;C.push(L)}return new to(_,C)},to.prototype.evaluate=function(s){if(this.type.kind==="boolean")return!!this.args[0].evaluate(s);if(this.type.kind==="color"){for(var u,f,_=0,C=this.args;_<C.length;_+=1){if(f=null,(u=C[_].evaluate(s))instanceof Yn)return u;if(typeof u=="string"){var P=s.parseColor(u);if(P)return P}else if(Array.isArray(u)&&!(f=u.length<3||u.length>4?"Invalid rbga value "+JSON.stringify(u)+": expected an array containing either three or four numeric values.":Wo(u[0],u[1],u[2],u[3])))return new Yn(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new Oi(f||"Could not parse color from value '"+(typeof u=="string"?u:String(JSON.stringify(u)))+"'")}if(this.type.kind==="number"){for(var L=null,q=0,Z=this.args;q<Z.length;q+=1){if((L=Z[q].evaluate(s))===null)return 0;var ne=Number(L);if(!isNaN(ne))return ne}throw new Oi("Could not convert "+JSON.stringify(L)+" to number.")}return this.type.kind==="formatted"?ks.fromString(Qc(this.args[0].evaluate(s))):this.type.kind==="resolvedImage"?ri.fromString(Qc(this.args[0].evaluate(s))):Qc(this.args[0].evaluate(s))},to.prototype.eachChild=function(s){this.args.forEach(s)},to.prototype.outputDefined=function(){return this.args.every((function(s){return s.outputDefined()}))},to.prototype.serialize=function(){if(this.type.kind==="formatted")return new cs([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Va(this.args[0]).serialize();var s=["to-"+this.type.kind];return this.eachChild((function(u){s.push(u.serialize())})),s};var wu=["Unknown","Point","LineString","Polygon"],wl=function(){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null};wl.prototype.id=function(){return this.feature&&"id"in this.feature?this.feature.id:null},wl.prototype.geometryType=function(){return this.feature?typeof this.feature.type=="number"?wu[this.feature.type]:this.feature.type:null},wl.prototype.geometry=function(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null},wl.prototype.canonicalID=function(){return this.canonical},wl.prototype.properties=function(){return this.feature&&this.feature.properties||{}},wl.prototype.parseColor=function(s){var u=this._parseColorCache[s];return u||(u=this._parseColorCache[s]=Yn.parse(s)),u};var ia=function(s,u,f,_){this.name=s,this.type=u,this._evaluate=f,this.args=_};ia.prototype.evaluate=function(s){return this._evaluate(s,this.args)},ia.prototype.eachChild=function(s){this.args.forEach(s)},ia.prototype.outputDefined=function(){return!1},ia.prototype.serialize=function(){return[this.name].concat(this.args.map((function(s){return s.serialize()})))},ia.parse=function(s,u){var f,_=s[0],C=ia.definitions[_];if(!C)return u.error('Unknown expression "'+_+'". If you wanted a literal array, use ["literal", [...]].',0);for(var P=Array.isArray(C)?C[0]:C.type,L=Array.isArray(C)?[[C[1],C[2]]]:C.overloads,q=L.filter((function(Wr){var Nr=Wr[0];return!Array.isArray(Nr)||Nr.length===s.length-1})),Z=null,ne=0,se=q;ne<se.length;ne+=1){var he=se[ne],we=he[0],Ee=he[1];Z=new Bl(u.registry,u.path,null,u.scope);for(var $e=[],He=!1,st=1;st<s.length;st++){var Je=s[st],ft=Array.isArray(we)?we[st-1]:we.type,gt=Z.parse(Je,1+$e.length,ft);if(!gt){He=!0;break}$e.push(gt)}if(!He)if(Array.isArray(we)&&we.length!==$e.length)Z.error("Expected "+we.length+" arguments, but found "+$e.length+" instead.");else{for(var wt=0;wt<$e.length;wt++){var Nt=Array.isArray(we)?we[wt]:we.type,Bt=$e[wt];Z.concat(wt+1).checkSubtype(Nt,Bt.type)}if(Z.errors.length===0)return new ia(_,P,Ee,$e)}}if(q.length===1)(f=u.errors).push.apply(f,Z.errors);else{for(var rr=(q.length?q:L).map((function(Wr){var Nr;return Nr=Wr[0],Array.isArray(Nr)?"("+Nr.map(Xr).join(", ")+")":"("+Xr(Nr.type)+"...)"})).join(" | "),ur=[],Br=1;Br<s.length;Br++){var jr=u.parse(s[Br],1+ur.length);if(!jr)return null;ur.push(Xr(jr.type))}u.error("Expected arguments of type "+rr+", but found ("+ur.join(", ")+") instead.")}return null},ia.register=function(s,u){for(var f in ia.definitions=u,u)s[f]=ia};var Ca=function(s,u,f){this.type=xn,this.locale=f,this.caseSensitive=s,this.diacriticSensitive=u};function $a(s,u){s[0]=Math.min(s[0],u[0]),s[1]=Math.min(s[1],u[1]),s[2]=Math.max(s[2],u[0]),s[3]=Math.max(s[3],u[1])}function Sc(s,u){return!(s[0]<=u[0]||s[2]>=u[2]||s[1]<=u[1]||s[3]>=u[3])}function $h(s,u){var f=(180+s[0])/360,_=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s[1]*Math.PI/360)))/360,C=Math.pow(2,u.z);return[Math.round(f*C*8192),Math.round(_*C*8192)]}function sc(s,u,f){return u[1]>s[1]!=f[1]>s[1]&&s[0]<(f[0]-u[0])*(s[1]-u[1])/(f[1]-u[1])+u[0]}function ju(s,u){for(var f,_,C,P,L,q,Z,ne=!1,se=0,he=u.length;se<he;se++)for(var we=u[se],Ee=0,$e=we.length;Ee<$e-1;Ee++){if((P=(f=s)[0]-(_=we[Ee])[0])*(Z=f[1]-(C=we[Ee+1])[1])-(q=f[0]-C[0])*(L=f[1]-_[1])==0&&P*q<=0&&L*Z<=0)return!1;sc(s,we[Ee],we[Ee+1])&&(ne=!ne)}return ne}function bd(s,u){for(var f=0;f<u.length;f++)if(ju(s,u[f]))return!0;return!1}function Nu(s,u,f,_){var C=_[0]-f[0],P=_[1]-f[1],L=(s[0]-f[0])*P-C*(s[1]-f[1]),q=(u[0]-f[0])*P-C*(u[1]-f[1]);return L>0&&q<0||L<0&&q>0}function Es(s,u,f){for(var _=0,C=f;_<C.length;_+=1)for(var P=C[_],L=0;L<P.length-1;++L)if((he=[(se=P[L+1])[0]-(ne=P[L])[0],se[1]-ne[1]])[0]*(we=[(Z=u)[0]-(q=s)[0],Z[1]-q[1]])[1]-he[1]*we[0]!=0&&Nu(q,Z,ne,se)&&Nu(ne,se,q,Z))return!0;var q,Z,ne,se,he,we;return!1}function _d(s,u){for(var f=0;f<s.length;++f)if(!ju(s[f],u))return!1;for(var _=0;_<s.length-1;++_)if(Es(s[_],s[_+1],u))return!1;return!0}function zu(s,u){for(var f=0;f<u.length;f++)if(_d(s,u[f]))return!0;return!1}function cn(s,u,f){for(var _=[],C=0;C<s.length;C++){for(var P=[],L=0;L<s[C].length;L++){var q=$h(s[C][L],f);$a(u,q),P.push(q)}_.push(P)}return _}function Ac(s,u,f){for(var _=[],C=0;C<s.length;C++){var P=cn(s[C],u,f);_.push(P)}return _}function Su(s,u,f,_){if(s[0]<f[0]||s[0]>f[2]){var C=.5*_,P=s[0]-f[0]>C?-_:f[0]-s[0]>C?_:0;P===0&&(P=s[0]-f[2]>C?-_:f[2]-s[0]>C?_:0),s[0]+=P}$a(u,s)}function jl(s,u,f,_){for(var C=8192*Math.pow(2,_.z),P=[8192*_.x,8192*_.y],L=[],q=0,Z=s;q<Z.length;q+=1)for(var ne=0,se=Z[q];ne<se.length;ne+=1){var he=se[ne],we=[he.x+P[0],he.y+P[1]];Su(we,u,f,C),L.push(we)}return L}function Au(s,u,f,_){for(var C,P=8192*Math.pow(2,_.z),L=[8192*_.x,8192*_.y],q=[],Z=0,ne=s;Z<ne.length;Z+=1){for(var se=[],he=0,we=ne[Z];he<we.length;he+=1){var Ee=we[he],$e=[Ee.x+L[0],Ee.y+L[1]];$a(u,$e),se.push($e)}q.push(se)}if(u[2]-u[0]<=P/2){(C=u)[0]=C[1]=1/0,C[2]=C[3]=-1/0;for(var He=0,st=q;He<st.length;He+=1)for(var Je=0,ft=st[He];Je<ft.length;Je+=1)Su(ft[Je],u,f,P)}return q}Ca.parse=function(s,u){if(s.length!==2)return u.error("Expected one argument.");var f=s[1];if(typeof f!="object"||Array.isArray(f))return u.error("Collator options argument must be an object.");var _=u.parse(f["case-sensitive"]!==void 0&&f["case-sensitive"],1,or);if(!_)return null;var C=u.parse(f["diacritic-sensitive"]!==void 0&&f["diacritic-sensitive"],1,or);if(!C)return null;var P=null;return f.locale&&!(P=u.parse(f.locale,1,gr))?null:new Ca(_,C,P)},Ca.prototype.evaluate=function(s){return new qa(this.caseSensitive.evaluate(s),this.diacriticSensitive.evaluate(s),this.locale?this.locale.evaluate(s):null)},Ca.prototype.eachChild=function(s){s(this.caseSensitive),s(this.diacriticSensitive),this.locale&&s(this.locale)},Ca.prototype.outputDefined=function(){return!1},Ca.prototype.serialize=function(){var s={};return s["case-sensitive"]=this.caseSensitive.serialize(),s["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(s.locale=this.locale.serialize()),["collator",s]};var ka=function(s,u){this.type=or,this.geojson=s,this.geometries=u};function sa(s){if(s instanceof ia&&(s.name==="get"&&s.args.length===1||s.name==="feature-state"||s.name==="has"&&s.args.length===1||s.name==="properties"||s.name==="geometry-type"||s.name==="id"||/^filter-/.test(s.name))||s instanceof ka)return!1;var u=!0;return s.eachChild((function(f){u&&!sa(f)&&(u=!1)})),u}function Yo(s){if(s instanceof ia&&s.name==="feature-state")return!1;var u=!0;return s.eachChild((function(f){u&&!Yo(f)&&(u=!1)})),u}function Nl(s,u){if(s instanceof ia&&u.indexOf(s.name)>=0)return!1;var f=!0;return s.eachChild((function(_){f&&!Nl(_,u)&&(f=!1)})),f}ka.parse=function(s,u){if(s.length!==2)return u.error("'within' expression requires exactly one argument, but found "+(s.length-1)+" instead.");if(Aa(s[1])){var f=s[1];if(f.type==="FeatureCollection")for(var _=0;_<f.features.length;++_){var C=f.features[_].geometry.type;if(C==="Polygon"||C==="MultiPolygon")return new ka(f,f.features[_].geometry)}else if(f.type==="Feature"){var P=f.geometry.type;if(P==="Polygon"||P==="MultiPolygon")return new ka(f,f.geometry)}else if(f.type==="Polygon"||f.type==="MultiPolygon")return new ka(f,f)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")},ka.prototype.evaluate=function(s){if(s.geometry()!=null&&s.canonicalID()!=null){if(s.geometryType()==="Point")return(function(u,f){var _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],P=u.canonicalID();if(f.type==="Polygon"){var L=cn(f.coordinates,C,P),q=jl(u.geometry(),_,C,P);if(!Sc(_,C))return!1;for(var Z=0,ne=q;Z<ne.length;Z+=1)if(!ju(ne[Z],L))return!1}if(f.type==="MultiPolygon"){var se=Ac(f.coordinates,C,P),he=jl(u.geometry(),_,C,P);if(!Sc(_,C))return!1;for(var we=0,Ee=he;we<Ee.length;we+=1)if(!bd(Ee[we],se))return!1}return!0})(s,this.geometries);if(s.geometryType()==="LineString")return(function(u,f){var _=[1/0,1/0,-1/0,-1/0],C=[1/0,1/0,-1/0,-1/0],P=u.canonicalID();if(f.type==="Polygon"){var L=cn(f.coordinates,C,P),q=Au(u.geometry(),_,C,P);if(!Sc(_,C))return!1;for(var Z=0,ne=q;Z<ne.length;Z+=1)if(!_d(ne[Z],L))return!1}if(f.type==="MultiPolygon"){var se=Ac(f.coordinates,C,P),he=Au(u.geometry(),_,C,P);if(!Sc(_,C))return!1;for(var we=0,Ee=he;we<Ee.length;we+=1)if(!zu(Ee[we],se))return!1}return!0})(s,this.geometries)}return!1},ka.prototype.eachChild=function(){},ka.prototype.outputDefined=function(){return!0},ka.prototype.serialize=function(){return["within",this.geojson]};var ro=function(s,u){this.type=u.type,this.name=s,this.boundExpression=u};ro.parse=function(s,u){if(s.length!==2||typeof s[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");var f=s[1];return u.scope.has(f)?new ro(f,u.scope.get(f)):u.error('Unknown variable "'+f+'". Make sure "'+f+'" has been bound in an enclosing "let" expression before using it.',1)},ro.prototype.evaluate=function(s){return this.boundExpression.evaluate(s)},ro.prototype.eachChild=function(){},ro.prototype.outputDefined=function(){return!1},ro.prototype.serialize=function(){return["var",this.name]};var Bl=function(s,u,f,_,C){u===void 0&&(u=[]),_===void 0&&(_=new dr),C===void 0&&(C=[]),this.registry=s,this.path=u,this.key=u.map((function(P){return"["+P+"]"})).join(""),this.scope=_,this.errors=C,this.expectedType=f};function ac(s,u){for(var f,_=s.length-1,C=0,P=_,L=0;C<=P;)if((f=s[L=Math.floor((C+P)/2)])<=u){if(L===_||u<s[L+1])return L;C=L+1}else{if(!(f>u))throw new Oi("Input is not a number.");P=L-1}return 0}Bl.prototype.parse=function(s,u,f,_,C){return C===void 0&&(C={}),u?this.concat(u,f,_)._parse(s,C):this._parse(s,C)},Bl.prototype._parse=function(s,u){function f(ne,se,he){return he==="assert"?new Zn(se,[ne]):he==="coerce"?new to(se,[ne]):ne}if(s!==null&&typeof s!="string"&&typeof s!="boolean"&&typeof s!="number"||(s=["literal",s]),Array.isArray(s)){if(s.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');var _=s[0];if(typeof _!="string")return this.error("Expression name must be a string, but found "+typeof _+' instead. If you wanted a literal array, use ["literal", [...]].',0),null;var C=this.registry[_];if(C){var P=C.parse(s,this);if(!P)return null;if(this.expectedType){var L=this.expectedType,q=P.type;if(L.kind!=="string"&&L.kind!=="number"&&L.kind!=="boolean"&&L.kind!=="object"&&L.kind!=="array"||q.kind!=="value")if(L.kind!=="color"&&L.kind!=="formatted"&&L.kind!=="resolvedImage"||q.kind!=="value"&&q.kind!=="string"){if(this.checkSubtype(L,q))return null}else P=f(P,L,u.typeAnnotation||"coerce");else P=f(P,L,u.typeAnnotation||"assert")}if(!(P instanceof ya)&&P.type.kind!=="resolvedImage"&&(function ne(se){if(se instanceof ro)return ne(se.boundExpression);if(se instanceof ia&&se.name==="error"||se instanceof Ca||se instanceof ka)return!1;var he=se instanceof to||se instanceof Zn,we=!0;return se.eachChild((function(Ee){we=he?we&&ne(Ee):we&&Ee instanceof ya})),!!we&&sa(se)&&Nl(se,["zoom","heatmap-density","line-progress","accumulated","is-supported-script"])})(P)){var Z=new wl;try{P=new ya(P.type,P.evaluate(Z))}catch(ne){return this.error(ne.message),null}}return P}return this.error('Unknown expression "'+_+'". If you wanted a literal array, use ["literal", [...]].',0)}return this.error(s===void 0?"'undefined' value invalid. Use null instead.":typeof s=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':"Expected an array, but found "+typeof s+" instead.")},Bl.prototype.concat=function(s,u,f){var _=typeof s=="number"?this.path.concat(s):this.path,C=f?this.scope.concat(f):this.scope;return new Bl(this.registry,_,u||null,C,this.errors)},Bl.prototype.error=function(s){for(var u=[],f=arguments.length-1;f-- >0;)u[f]=arguments[f+1];var _=""+this.key+u.map((function(C){return"["+C+"]"})).join("");this.errors.push(new Mt(_,s))},Bl.prototype.checkSubtype=function(s,u){var f=ti(s,u);return f&&this.error(f),f};var aa=function(s,u,f){this.type=s,this.input=u,this.labels=[],this.outputs=[];for(var _=0,C=f;_<C.length;_+=1){var P=C[_],L=P[1];this.labels.push(P[0]),this.outputs.push(L)}};function Ai(s,u,f){return s*(1-f)+u*f}aa.parse=function(s,u){if(s.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");var f=u.parse(s[1],1,jt);if(!f)return null;var _=[],C=null;u.expectedType&&u.expectedType.kind!=="value"&&(C=u.expectedType);for(var P=1;P<s.length;P+=2){var L=P===1?-1/0:s[P],q=s[P+1],Z=P,ne=P+1;if(typeof L!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Z);if(_.length&&_[_.length-1][0]>=L)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',Z);var se=u.parse(q,ne,C);if(!se)return null;C=C||se.type,_.push([L,se])}return new aa(C,f,_)},aa.prototype.evaluate=function(s){var u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);var _=this.input.evaluate(s);if(_<=u[0])return f[0].evaluate(s);var C=u.length;return _>=u[C-1]?f[C-1].evaluate(s):f[ac(u,_)].evaluate(s)},aa.prototype.eachChild=function(s){s(this.input);for(var u=0,f=this.outputs;u<f.length;u+=1)s(f[u])},aa.prototype.outputDefined=function(){return this.outputs.every((function(s){return s.outputDefined()}))},aa.prototype.serialize=function(){for(var s=["step",this.input.serialize()],u=0;u<this.labels.length;u++)u>0&&s.push(this.labels[u]),s.push(this.outputs[u].serialize());return s};var oc=Object.freeze({__proto__:null,number:Ai,color:function(s,u,f){return new Yn(Ai(s.r,u.r,f),Ai(s.g,u.g,f),Ai(s.b,u.b,f),Ai(s.a,u.a,f))},array:function(s,u,f){return s.map((function(_,C){return Ai(_,u[C],f)}))}}),eu=6/29*3*(6/29),Ha=Math.PI/180,Ul=180/Math.PI;function tu(s){return s>.008856451679035631?Math.pow(s,1/3):s/eu+4/29}function Cc(s){return s>6/29?s*s*s:eu*(s-4/29)}function wd(s){return 255*(s<=.0031308?12.92*s:1.055*Math.pow(s,1/2.4)-.055)}function Cu(s){return(s/=255)<=.04045?s/12.92:Math.pow((s+.055)/1.055,2.4)}function Sl(s){var u=Cu(s.r),f=Cu(s.g),_=Cu(s.b),C=tu((.4124564*u+.3575761*f+.1804375*_)/.95047),P=tu((.2126729*u+.7151522*f+.072175*_)/1);return{l:116*P-16,a:500*(C-P),b:200*(P-tu((.0193339*u+.119192*f+.9503041*_)/1.08883)),alpha:s.a}}function Zo(s){var u=(s.l+16)/116,f=isNaN(s.a)?u:u+s.a/500,_=isNaN(s.b)?u:u-s.b/200;return u=1*Cc(u),f=.95047*Cc(f),_=1.08883*Cc(_),new Yn(wd(3.2404542*f-1.5371385*u-.4985314*_),wd(-.969266*f+1.8760108*u+.041556*_),wd(.0556434*f-.2040259*u+1.0572252*_),s.alpha)}function jd(s,u,f){var _=u-s;return s+f*(_>180||_<-180?_-360*Math.round(_/360):_)}var Al={forward:Sl,reverse:Zo,interpolate:function(s,u,f){return{l:Ai(s.l,u.l,f),a:Ai(s.a,u.a,f),b:Ai(s.b,u.b,f),alpha:Ai(s.alpha,u.alpha,f)}}},Lo={forward:function(s){var u=Sl(s),f=u.l,_=u.a,C=u.b,P=Math.atan2(C,_)*Ul;return{h:P<0?P+360:P,c:Math.sqrt(_*_+C*C),l:f,alpha:s.a}},reverse:function(s){var u=s.h*Ha,f=s.c;return Zo({l:s.l,a:Math.cos(u)*f,b:Math.sin(u)*f,alpha:s.alpha})},interpolate:function(s,u,f){return{h:jd(s.h,u.h,f),c:Ai(s.c,u.c,f),l:Ai(s.l,u.l,f),alpha:Ai(s.alpha,u.alpha,f)}}},Nd=Object.freeze({__proto__:null,lab:Al,hcl:Lo}),Ts=function(s,u,f,_,C){this.type=s,this.operator=u,this.interpolation=f,this.input=_,this.labels=[],this.outputs=[];for(var P=0,L=C;P<L.length;P+=1){var q=L[P],Z=q[1];this.labels.push(q[0]),this.outputs.push(Z)}};function Fu(s,u,f,_){var C=_-f,P=s-f;return C===0?0:u===1?P/C:(Math.pow(u,P)-1)/(Math.pow(u,C)-1)}Ts.interpolationFactor=function(s,u,f,_){var C=0;if(s.name==="exponential")C=Fu(u,s.base,f,_);else if(s.name==="linear")C=Fu(u,1,f,_);else if(s.name==="cubic-bezier"){var P=s.controlPoints;C=new g(P[0],P[1],P[2],P[3]).solve(Fu(u,1,f,_))}return C},Ts.parse=function(s,u){var f=s[0],_=s[1],C=s[2],P=s.slice(3);if(!Array.isArray(_)||_.length===0)return u.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){var L=_[1];if(typeof L!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:L}}else{if(_[0]!=="cubic-bezier")return u.error("Unknown interpolation type "+String(_[0]),1,0);var q=_.slice(1);if(q.length!==4||q.some((function(st){return typeof st!="number"||st<0||st>1})))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:q}}if(s.length-1<4)return u.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if((s.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(!(C=u.parse(C,2,jt)))return null;var Z=[],ne=null;f==="interpolate-hcl"||f==="interpolate-lab"?ne=fr:u.expectedType&&u.expectedType.kind!=="value"&&(ne=u.expectedType);for(var se=0;se<P.length;se+=2){var he=P[se],we=P[se+1],Ee=se+3,$e=se+4;if(typeof he!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',Ee);if(Z.length&&Z[Z.length-1][0]>=he)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',Ee);var He=u.parse(we,$e,ne);if(!He)return null;ne=ne||He.type,Z.push([he,He])}return ne.kind==="number"||ne.kind==="color"||ne.kind==="array"&&ne.itemType.kind==="number"&&typeof ne.N=="number"?new Ts(ne,f,_,C,Z):u.error("Type "+Xr(ne)+" is not interpolatable.")},Ts.prototype.evaluate=function(s){var u=this.labels,f=this.outputs;if(u.length===1)return f[0].evaluate(s);var _=this.input.evaluate(s);if(_<=u[0])return f[0].evaluate(s);var C=u.length;if(_>=u[C-1])return f[C-1].evaluate(s);var P=ac(u,_),L=Ts.interpolationFactor(this.interpolation,_,u[P],u[P+1]),q=f[P].evaluate(s),Z=f[P+1].evaluate(s);return this.operator==="interpolate"?oc[this.type.kind.toLowerCase()](q,Z,L):this.operator==="interpolate-hcl"?Lo.reverse(Lo.interpolate(Lo.forward(q),Lo.forward(Z),L)):Al.reverse(Al.interpolate(Al.forward(q),Al.forward(Z),L))},Ts.prototype.eachChild=function(s){s(this.input);for(var u=0,f=this.outputs;u<f.length;u+=1)s(f[u])},Ts.prototype.outputDefined=function(){return this.outputs.every((function(s){return s.outputDefined()}))},Ts.prototype.serialize=function(){var s;s=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);for(var u=[this.operator,s,this.input.serialize()],f=0;f<this.labels.length;f++)u.push(this.labels[f],this.outputs[f].serialize());return u};var Cl=function(s,u){this.type=s,this.args=u};Cl.parse=function(s,u){if(s.length<2)return u.error("Expectected at least one argument.");var f=null,_=u.expectedType;_&&_.kind!=="value"&&(f=_);for(var C=[],P=0,L=s.slice(1);P<L.length;P+=1){var q=u.parse(L[P],1+C.length,f,void 0,{typeAnnotation:"omit"});if(!q)return null;f=f||q.type,C.push(q)}var Z=_&&C.some((function(ne){return ti(_,ne.type)}));return new Cl(Z?yr:f,C)},Cl.prototype.evaluate=function(s){for(var u,f=null,_=0,C=0,P=this.args;C<P.length&&(_++,(f=P[C].evaluate(s))&&f instanceof ri&&!f.available&&(u||(u=f.name),f=null,_===this.args.length&&(f=u)),f===null);C+=1);return f},Cl.prototype.eachChild=function(s){this.args.forEach(s)},Cl.prototype.outputDefined=function(){return this.args.every((function(s){return s.outputDefined()}))},Cl.prototype.serialize=function(){var s=["coalesce"];return this.eachChild((function(u){s.push(u.serialize())})),s};var kc=function(s,u){this.type=u.type,this.bindings=[].concat(s),this.result=u};kc.prototype.evaluate=function(s){return this.result.evaluate(s)},kc.prototype.eachChild=function(s){for(var u=0,f=this.bindings;u<f.length;u+=1)s(f[u][1]);s(this.result)},kc.parse=function(s,u){if(s.length<4)return u.error("Expected at least 3 arguments, but found "+(s.length-1)+" instead.");for(var f=[],_=1;_<s.length-1;_+=2){var C=s[_];if(typeof C!="string")return u.error("Expected string, but found "+typeof C+" instead.",_);if(/[^a-zA-Z0-9_]/.test(C))return u.error("Variable names must contain only alphanumeric characters or '_'.",_);var P=u.parse(s[_+1],_+1);if(!P)return null;f.push([C,P])}var L=u.parse(s[s.length-1],s.length-1,u.expectedType,f);return L?new kc(f,L):null},kc.prototype.outputDefined=function(){return this.result.outputDefined()},kc.prototype.serialize=function(){for(var s=["let"],u=0,f=this.bindings;u<f.length;u+=1){var _=f[u];s.push(_[0],_[1].serialize())}return s.push(this.result.serialize()),s};var lc=function(s,u,f){this.type=s,this.index=u,this.input=f};lc.parse=function(s,u){if(s.length!==3)return u.error("Expected 2 arguments, but found "+(s.length-1)+" instead.");var f=u.parse(s[1],1,jt),_=u.parse(s[2],2,Un(u.expectedType||yr));return f&&_?new lc(_.type.itemType,f,_):null},lc.prototype.evaluate=function(s){var u=this.index.evaluate(s),f=this.input.evaluate(s);if(u<0)throw new Oi("Array index out of bounds: "+u+" < 0.");if(u>=f.length)throw new Oi("Array index out of bounds: "+u+" > "+(f.length-1)+".");if(u!==Math.floor(u))throw new Oi("Array index must be an integer, but found "+u+" instead.");return f[u]},lc.prototype.eachChild=function(s){s(this.index),s(this.input)},lc.prototype.outputDefined=function(){return!1},lc.prototype.serialize=function(){return["at",this.index.serialize(),this.input.serialize()]};var cc=function(s,u){this.type=or,this.needle=s,this.haystack=u};cc.parse=function(s,u){if(s.length!==3)return u.error("Expected 2 arguments, but found "+(s.length-1)+" instead.");var f=u.parse(s[1],1,yr),_=u.parse(s[2],2,yr);return f&&_?Ii(f.type,[or,gr,jt,mr,yr])?new cc(f,_):u.error("Expected first argument to be of type boolean, string, number or null, but found "+Xr(f.type)+" instead"):null},cc.prototype.evaluate=function(s){var u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!f)return!1;if(!Hn(u,["boolean","string","number","null"]))throw new Oi("Expected first argument to be of type boolean, string, number or null, but found "+Xr(es(u))+" instead.");if(!Hn(f,["string","array"]))throw new Oi("Expected second argument to be of type array or string, but found "+Xr(es(f))+" instead.");return f.indexOf(u)>=0},cc.prototype.eachChild=function(s){s(this.needle),s(this.haystack)},cc.prototype.outputDefined=function(){return!0},cc.prototype.serialize=function(){return["in",this.needle.serialize(),this.haystack.serialize()]};var uc=function(s,u,f){this.type=jt,this.needle=s,this.haystack=u,this.fromIndex=f};uc.parse=function(s,u){if(s.length<=2||s.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(s.length-1)+" instead.");var f=u.parse(s[1],1,yr),_=u.parse(s[2],2,yr);if(!f||!_)return null;if(!Ii(f.type,[or,gr,jt,mr,yr]))return u.error("Expected first argument to be of type boolean, string, number or null, but found "+Xr(f.type)+" instead");if(s.length===4){var C=u.parse(s[3],3,jt);return C?new uc(f,_,C):null}return new uc(f,_)},uc.prototype.evaluate=function(s){var u=this.needle.evaluate(s),f=this.haystack.evaluate(s);if(!Hn(u,["boolean","string","number","null"]))throw new Oi("Expected first argument to be of type boolean, string, number or null, but found "+Xr(es(u))+" instead.");if(!Hn(f,["string","array"]))throw new Oi("Expected second argument to be of type array or string, but found "+Xr(es(f))+" instead.");if(this.fromIndex){var _=this.fromIndex.evaluate(s);return f.indexOf(u,_)}return f.indexOf(u)},uc.prototype.eachChild=function(s){s(this.needle),s(this.haystack),this.fromIndex&&s(this.fromIndex)},uc.prototype.outputDefined=function(){return!1},uc.prototype.serialize=function(){if(this.fromIndex!=null&&this.fromIndex!==void 0){var s=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),s]}return["index-of",this.needle.serialize(),this.haystack.serialize()]};var kl=function(s,u,f,_,C,P){this.inputType=s,this.type=u,this.input=f,this.cases=_,this.outputs=C,this.otherwise=P};kl.parse=function(s,u){if(s.length<5)return u.error("Expected at least 4 arguments, but found only "+(s.length-1)+".");if(s.length%2!=1)return u.error("Expected an even number of arguments.");var f,_;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);for(var C={},P=[],L=2;L<s.length-1;L+=2){var q=s[L],Z=s[L+1];Array.isArray(q)||(q=[q]);var ne=u.concat(L);if(q.length===0)return ne.error("Expected at least one branch label.");for(var se=0,he=q;se<he.length;se+=1){var we=he[se];if(typeof we!="number"&&typeof we!="string")return ne.error("Branch labels must be numbers or strings.");if(typeof we=="number"&&Math.abs(we)>Number.MAX_SAFE_INTEGER)return ne.error("Branch labels must be integers no larger than "+Number.MAX_SAFE_INTEGER+".");if(typeof we=="number"&&Math.floor(we)!==we)return ne.error("Numeric branch labels must be integer values.");if(f){if(ne.checkSubtype(f,es(we)))return null}else f=es(we);if(C[String(we)]!==void 0)return ne.error("Branch labels must be unique.");C[String(we)]=P.length}var Ee=u.parse(Z,L,_);if(!Ee)return null;_=_||Ee.type,P.push(Ee)}var $e=u.parse(s[1],1,yr);if(!$e)return null;var He=u.parse(s[s.length-1],s.length-1,_);return He?$e.type.kind!=="value"&&u.concat(1).checkSubtype(f,$e.type)?null:new kl(f,_,$e,C,P,He):null},kl.prototype.evaluate=function(s){var u=this.input.evaluate(s);return(es(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(s)},kl.prototype.eachChild=function(s){s(this.input),this.outputs.forEach(s),s(this.otherwise)},kl.prototype.outputDefined=function(){return this.outputs.every((function(s){return s.outputDefined()}))&&this.otherwise.outputDefined()},kl.prototype.serialize=function(){for(var s=this,u=["match",this.input.serialize()],f=[],_={},C=0,P=Object.keys(this.cases).sort();C<P.length;C+=1){var L=P[C];(he=_[this.cases[L]])===void 0?(_[this.cases[L]]=f.length,f.push([this.cases[L],[L]])):f[he][1].push(L)}for(var q=function(Ee){return s.inputType.kind==="number"?Number(Ee):Ee},Z=0,ne=f;Z<ne.length;Z+=1){var se=ne[Z],he=se[0],we=se[1];u.push(we.length===1?q(we[0]):we.map(q)),u.push(this.outputs[outputIndex$1].serialize())}return u.push(this.otherwise.serialize()),u};var dc=function(s,u,f){this.type=s,this.branches=u,this.otherwise=f};dc.parse=function(s,u){if(s.length<4)return u.error("Expected at least 3 arguments, but found only "+(s.length-1)+".");if(s.length%2!=0)return u.error("Expected an odd number of arguments.");var f;u.expectedType&&u.expectedType.kind!=="value"&&(f=u.expectedType);for(var _=[],C=1;C<s.length-1;C+=2){var P=u.parse(s[C],C,or);if(!P)return null;var L=u.parse(s[C+1],C+1,f);if(!L)return null;_.push([P,L]),f=f||L.type}var q=u.parse(s[s.length-1],s.length-1,f);return q?new dc(f,_,q):null},dc.prototype.evaluate=function(s){for(var u=0,f=this.branches;u<f.length;u+=1){var _=f[u],C=_[1];if(_[0].evaluate(s))return C.evaluate(s)}return this.otherwise.evaluate(s)},dc.prototype.eachChild=function(s){for(var u=0,f=this.branches;u<f.length;u+=1){var _=f[u],C=_[1];s(_[0]),s(C)}s(this.otherwise)},dc.prototype.outputDefined=function(){return this.branches.every((function(s){return s[1].outputDefined()}))&&this.otherwise.outputDefined()},dc.prototype.serialize=function(){var s=["case"];return this.eachChild((function(u){s.push(u.serialize())})),s};var ql=function(s,u,f,_){this.type=s,this.input=u,this.beginIndex=f,this.endIndex=_};function rh(s,u){return s==="=="||s==="!="?u.kind==="boolean"||u.kind==="string"||u.kind==="number"||u.kind==="null"||u.kind==="value":u.kind==="string"||u.kind==="number"||u.kind==="value"}function Hh(s,u,f,_){return _.compare(u,f)===0}function ni(s,u,f){var _=s!=="=="&&s!=="!=";return(function(){function C(P,L,q){this.type=or,this.lhs=P,this.rhs=L,this.collator=q,this.hasUntypedArgument=P.type.kind==="value"||L.type.kind==="value"}return C.parse=function(P,L){if(P.length!==3&&P.length!==4)return L.error("Expected two or three arguments.");var q=P[0],Z=L.parse(P[1],1,yr);if(!Z)return null;if(!rh(q,Z.type))return L.concat(1).error('"'+q+`" comparisons are not supported for type '`+Xr(Z.type)+"'.");var ne=L.parse(P[2],2,yr);if(!ne)return null;if(!rh(q,ne.type))return L.concat(2).error('"'+q+`" comparisons are not supported for type '`+Xr(ne.type)+"'.");if(Z.type.kind!==ne.type.kind&&Z.type.kind!=="value"&&ne.type.kind!=="value")return L.error("Cannot compare types '"+Xr(Z.type)+"' and '"+Xr(ne.type)+"'.");_&&(Z.type.kind==="value"&&ne.type.kind!=="value"?Z=new Zn(ne.type,[Z]):Z.type.kind!=="value"&&ne.type.kind==="value"&&(ne=new Zn(Z.type,[ne])));var se=null;if(P.length===4){if(Z.type.kind!=="string"&&ne.type.kind!=="string"&&Z.type.kind!=="value"&&ne.type.kind!=="value")return L.error("Cannot use collator to compare non-string types.");if(!(se=L.parse(P[3],3,xn)))return null}return new C(Z,ne,se)},C.prototype.evaluate=function(P){var L=this.lhs.evaluate(P),q=this.rhs.evaluate(P);if(_&&this.hasUntypedArgument){var Z=es(L),ne=es(q);if(Z.kind!==ne.kind||Z.kind!=="string"&&Z.kind!=="number")throw new Oi('Expected arguments for "'+s+'" to be (string, string) or (number, number), but found ('+Z.kind+", "+ne.kind+") instead.")}if(this.collator&&!_&&this.hasUntypedArgument){var se=es(L),he=es(q);if(se.kind!=="string"||he.kind!=="string")return u(P,L,q)}return this.collator?f(P,L,q,this.collator.evaluate(P)):u(P,L,q)},C.prototype.eachChild=function(P){P(this.lhs),P(this.rhs),this.collator&&P(this.collator)},C.prototype.outputDefined=function(){return!0},C.prototype.serialize=function(){var P=[s];return this.eachChild((function(L){P.push(L.serialize())})),P},C})()}ql.parse=function(s,u){if(s.length<=2||s.length>=5)return u.error("Expected 3 or 4 arguments, but found "+(s.length-1)+" instead.");var f=u.parse(s[1],1,yr),_=u.parse(s[2],2,jt);if(!f||!_)return null;if(!Ii(f.type,[Un(yr),gr,yr]))return u.error("Expected first argument to be of type array or string, but found "+Xr(f.type)+" instead");if(s.length===4){var C=u.parse(s[3],3,jt);return C?new ql(f.type,f,_,C):null}return new ql(f.type,f,_)},ql.prototype.evaluate=function(s){var u=this.input.evaluate(s),f=this.beginIndex.evaluate(s);if(!Hn(u,["string","array"]))throw new Oi("Expected first argument to be of type array or string, but found "+Xr(es(u))+" instead.");if(this.endIndex){var _=this.endIndex.evaluate(s);return u.slice(f,_)}return u.slice(f)},ql.prototype.eachChild=function(s){s(this.input),s(this.beginIndex),this.endIndex&&s(this.endIndex)},ql.prototype.outputDefined=function(){return!1},ql.prototype.serialize=function(){if(this.endIndex!=null&&this.endIndex!==void 0){var s=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),s]}return["slice",this.input.serialize(),this.beginIndex.serialize()]};var Bu=ni("==",(function(s,u,f){return u===f}),Hh),ku=ni("!=",(function(s,u,f){return u!==f}),(function(s,u,f,_){return!Hh(0,u,f,_)})),ru=ni("<",(function(s,u,f){return u<f}),(function(s,u,f,_){return _.compare(u,f)<0})),Uu=ni(">",(function(s,u,f){return u>f}),(function(s,u,f,_){return _.compare(u,f)>0})),H=ni("<=",(function(s,u,f){return u<=f}),(function(s,u,f,_){return _.compare(u,f)<=0})),be=ni(">=",(function(s,u,f){return u>=f}),(function(s,u,f,_){return _.compare(u,f)>=0})),Ze=function(s,u,f,_,C){this.type=gr,this.number=s,this.locale=u,this.currency=f,this.minFractionDigits=_,this.maxFractionDigits=C};Ze.parse=function(s,u){if(s.length!==3)return u.error("Expected two arguments.");var f=u.parse(s[1],1,jt);if(!f)return null;var _=s[2];if(typeof _!="object"||Array.isArray(_))return u.error("NumberFormat options argument must be an object.");var C=null;if(_.locale&&!(C=u.parse(_.locale,1,gr)))return null;var P=null;if(_.currency&&!(P=u.parse(_.currency,1,gr)))return null;var L=null;if(_["min-fraction-digits"]&&!(L=u.parse(_["min-fraction-digits"],1,jt)))return null;var q=null;return _["max-fraction-digits"]&&!(q=u.parse(_["max-fraction-digits"],1,jt))?null:new Ze(f,C,P,L,q)},Ze.prototype.evaluate=function(s){return new Intl.NumberFormat(this.locale?this.locale.evaluate(s):[],{style:this.currency?"currency":"decimal",currency:this.currency?this.currency.evaluate(s):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(s):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(s):void 0}).format(this.number.evaluate(s))},Ze.prototype.eachChild=function(s){s(this.number),this.locale&&s(this.locale),this.currency&&s(this.currency),this.minFractionDigits&&s(this.minFractionDigits),this.maxFractionDigits&&s(this.maxFractionDigits)},Ze.prototype.outputDefined=function(){return!1},Ze.prototype.serialize=function(){var s={};return this.locale&&(s.locale=this.locale.serialize()),this.currency&&(s.currency=this.currency.serialize()),this.minFractionDigits&&(s["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(s["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),s]};var dt=function(s){this.type=jt,this.input=s};dt.parse=function(s,u){if(s.length!==2)return u.error("Expected 1 argument, but found "+(s.length-1)+" instead.");var f=u.parse(s[1],1);return f?f.type.kind!=="array"&&f.type.kind!=="string"&&f.type.kind!=="value"?u.error("Expected argument of type string or array, but found "+Xr(f.type)+" instead."):new dt(f):null},dt.prototype.evaluate=function(s){var u=this.input.evaluate(s);if(typeof u=="string"||Array.isArray(u))return u.length;throw new Oi("Expected value to be of type string or array, but found "+Xr(es(u))+" instead.")},dt.prototype.eachChild=function(s){s(this.input)},dt.prototype.outputDefined=function(){return!1},dt.prototype.serialize=function(){var s=["length"];return this.eachChild((function(u){s.push(u.serialize())})),s};var vt={"==":Bu,"!=":ku,">":Uu,"<":ru,">=":be,"<=":H,array:Zn,at:lc,boolean:Zn,case:dc,coalesce:Cl,collator:Ca,format:cs,image:Va,in:cc,"index-of":uc,interpolate:Ts,"interpolate-hcl":Ts,"interpolate-lab":Ts,length:dt,let:kc,literal:ya,match:kl,number:Zn,"number-format":Ze,object:Zn,slice:ql,step:aa,string:Zn,"to-boolean":to,"to-color":to,"to-number":to,"to-string":to,var:ro,within:ka};function $t(s,u){var f=u[0],_=u[1],C=u[2],P=u[3];f=f.evaluate(s),_=_.evaluate(s),C=C.evaluate(s);var L=P?P.evaluate(s):1,q=Wo(f,_,C,L);if(q)throw new Oi(q);return new Yn(f/255*L,_/255*L,C/255*L,L)}function lr(s,u){return s in u}function Or(s,u){var f=u[s];return f===void 0?null:f}function Zr(s){return{type:s}}function Pn(s){return{result:"success",value:s}}function dn(s){return{result:"error",value:s}}function Kn(s){return s["property-type"]==="data-driven"||s["property-type"]==="cross-faded-data-driven"}function _s(s){return!!s.expression&&s.expression.parameters.indexOf("zoom")>-1}function ts(s){return!!s.expression&&s.expression.interpolated}function Sn(s){return s instanceof Number?"number":s instanceof String?"string":s instanceof Boolean?"boolean":Array.isArray(s)?"array":s===null?"null":typeof s}function ba(s){return typeof s=="object"&&s!==null&&!Array.isArray(s)}function Ea(s){return s}function oa(s,u,f){return s!==void 0?s:u!==void 0?u:f!==void 0?f:void 0}function Ko(s,u,f,_,C){return oa(typeof f===C?_[f]:void 0,s.default,u.default)}function Ec(s,u,f){if(Sn(f)!=="number")return oa(s.default,u.default);var _=s.stops.length;if(_===1||f<=s.stops[0][0])return s.stops[0][1];if(f>=s.stops[_-1][0])return s.stops[_-1][1];var C=ac(s.stops.map((function(P){return P[0]})),f);return s.stops[C][1]}function nh(s,u,f){var _=s.base!==void 0?s.base:1;if(Sn(f)!=="number")return oa(s.default,u.default);var C=s.stops.length;if(C===1||f<=s.stops[0][0])return s.stops[0][1];if(f>=s.stops[C-1][0])return s.stops[C-1][1];var P=ac(s.stops.map((function(he){return he[0]})),f),L=(function(he,we,Ee,$e){var He=$e-Ee,st=he-Ee;return He===0?0:we===1?st/He:(Math.pow(we,st)-1)/(Math.pow(we,He)-1)})(f,_,s.stops[P][0],s.stops[P+1][0]),q=s.stops[P][1],Z=s.stops[P+1][1],ne=oc[u.type]||Ea;if(s.colorSpace&&s.colorSpace!=="rgb"){var se=Nd[s.colorSpace];ne=function(he,we){return se.reverse(se.interpolate(se.forward(he),se.forward(we),L))}}return typeof q.evaluate=="function"?{evaluate:function(){for(var he=[],we=arguments.length;we--;)he[we]=arguments[we];var Ee=q.evaluate.apply(void 0,he),$e=Z.evaluate.apply(void 0,he);if(Ee!==void 0&&$e!==void 0)return ne(Ee,$e,L)}}:ne(q,Z,L)}function nu(s,u,f){return u.type==="color"?f=Yn.parse(f):u.type==="formatted"?f=ks.fromString(f.toString()):u.type==="resolvedImage"?f=ri.fromString(f.toString()):Sn(f)===u.type||u.type==="enum"&&u.values[f]||(f=void 0),oa(f,s.default,u.default)}ia.register(vt,{error:[{kind:"error"},[gr],function(s,u){throw new Oi(u[0].evaluate(s))}],typeof:[gr,[yr],function(s,u){return Xr(es(u[0].evaluate(s)))}],"to-rgba":[Un(jt,4),[fr],function(s,u){return u[0].evaluate(s).toArray()}],rgb:[fr,[jt,jt,jt],$t],rgba:[fr,[jt,jt,jt,jt],$t],has:{type:or,overloads:[[[gr],function(s,u){return lr(u[0].evaluate(s),s.properties())}],[[gr,an],function(s,u){var f=u[1];return lr(u[0].evaluate(s),f.evaluate(s))}]]},get:{type:yr,overloads:[[[gr],function(s,u){return Or(u[0].evaluate(s),s.properties())}],[[gr,an],function(s,u){var f=u[1];return Or(u[0].evaluate(s),f.evaluate(s))}]]},"feature-state":[yr,[gr],function(s,u){return Or(u[0].evaluate(s),s.featureState||{})}],properties:[an,[],function(s){return s.properties()}],"geometry-type":[gr,[],function(s){return s.geometryType()}],id:[yr,[],function(s){return s.id()}],zoom:[jt,[],function(s){return s.globals.zoom}],"heatmap-density":[jt,[],function(s){return s.globals.heatmapDensity||0}],"line-progress":[jt,[],function(s){return s.globals.lineProgress||0}],accumulated:[yr,[],function(s){return s.globals.accumulated===void 0?null:s.globals.accumulated}],"+":[jt,Zr(jt),function(s,u){for(var f=0,_=0,C=u;_<C.length;_+=1)f+=C[_].evaluate(s);return f}],"*":[jt,Zr(jt),function(s,u){for(var f=1,_=0,C=u;_<C.length;_+=1)f*=C[_].evaluate(s);return f}],"-":{type:jt,overloads:[[[jt,jt],function(s,u){var f=u[1];return u[0].evaluate(s)-f.evaluate(s)}],[[jt],function(s,u){return-u[0].evaluate(s)}]]},"/":[jt,[jt,jt],function(s,u){var f=u[1];return u[0].evaluate(s)/f.evaluate(s)}],"%":[jt,[jt,jt],function(s,u){var f=u[1];return u[0].evaluate(s)%f.evaluate(s)}],ln2:[jt,[],function(){return Math.LN2}],pi:[jt,[],function(){return Math.PI}],e:[jt,[],function(){return Math.E}],"^":[jt,[jt,jt],function(s,u){var f=u[1];return Math.pow(u[0].evaluate(s),f.evaluate(s))}],sqrt:[jt,[jt],function(s,u){return Math.sqrt(u[0].evaluate(s))}],log10:[jt,[jt],function(s,u){return Math.log(u[0].evaluate(s))/Math.LN10}],ln:[jt,[jt],function(s,u){return Math.log(u[0].evaluate(s))}],log2:[jt,[jt],function(s,u){return Math.log(u[0].evaluate(s))/Math.LN2}],sin:[jt,[jt],function(s,u){return Math.sin(u[0].evaluate(s))}],cos:[jt,[jt],function(s,u){return Math.cos(u[0].evaluate(s))}],tan:[jt,[jt],function(s,u){return Math.tan(u[0].evaluate(s))}],asin:[jt,[jt],function(s,u){return Math.asin(u[0].evaluate(s))}],acos:[jt,[jt],function(s,u){return Math.acos(u[0].evaluate(s))}],atan:[jt,[jt],function(s,u){return Math.atan(u[0].evaluate(s))}],min:[jt,Zr(jt),function(s,u){return Math.min.apply(Math,u.map((function(f){return f.evaluate(s)})))}],max:[jt,Zr(jt),function(s,u){return Math.max.apply(Math,u.map((function(f){return f.evaluate(s)})))}],abs:[jt,[jt],function(s,u){return Math.abs(u[0].evaluate(s))}],round:[jt,[jt],function(s,u){var f=u[0].evaluate(s);return f<0?-Math.round(-f):Math.round(f)}],floor:[jt,[jt],function(s,u){return Math.floor(u[0].evaluate(s))}],ceil:[jt,[jt],function(s,u){return Math.ceil(u[0].evaluate(s))}],"filter-==":[or,[gr,yr],function(s,u){var f=u[0],_=u[1];return s.properties()[f.value]===_.value}],"filter-id-==":[or,[yr],function(s,u){var f=u[0];return s.id()===f.value}],"filter-type-==":[or,[gr],function(s,u){var f=u[0];return s.geometryType()===f.value}],"filter-<":[or,[gr,yr],function(s,u){var f=u[0],_=u[1],C=s.properties()[f.value],P=_.value;return typeof C==typeof P&&C<P}],"filter-id-<":[or,[yr],function(s,u){var f=u[0],_=s.id(),C=f.value;return typeof _==typeof C&&_<C}],"filter->":[or,[gr,yr],function(s,u){var f=u[0],_=u[1],C=s.properties()[f.value],P=_.value;return typeof C==typeof P&&C>P}],"filter-id->":[or,[yr],function(s,u){var f=u[0],_=s.id(),C=f.value;return typeof _==typeof C&&_>C}],"filter-<=":[or,[gr,yr],function(s,u){var f=u[0],_=u[1],C=s.properties()[f.value],P=_.value;return typeof C==typeof P&&C<=P}],"filter-id-<=":[or,[yr],function(s,u){var f=u[0],_=s.id(),C=f.value;return typeof _==typeof C&&_<=C}],"filter->=":[or,[gr,yr],function(s,u){var f=u[0],_=u[1],C=s.properties()[f.value],P=_.value;return typeof C==typeof P&&C>=P}],"filter-id->=":[or,[yr],function(s,u){var f=u[0],_=s.id(),C=f.value;return typeof _==typeof C&&_>=C}],"filter-has":[or,[yr],function(s,u){return u[0].value in s.properties()}],"filter-has-id":[or,[],function(s){return s.id()!==null&&s.id()!==void 0}],"filter-type-in":[or,[Un(gr)],function(s,u){return u[0].value.indexOf(s.geometryType())>=0}],"filter-id-in":[or,[Un(yr)],function(s,u){return u[0].value.indexOf(s.id())>=0}],"filter-in-small":[or,[gr,Un(yr)],function(s,u){var f=u[0];return u[1].value.indexOf(s.properties()[f.value])>=0}],"filter-in-large":[or,[gr,Un(yr)],function(s,u){var f=u[0],_=u[1];return(function(C,P,L,q){for(;L<=q;){var Z=L+q>>1;if(P[Z]===C)return!0;P[Z]>C?q=Z-1:L=Z+1}return!1})(s.properties()[f.value],_.value,0,_.value.length-1)}],all:{type:or,overloads:[[[or,or],function(s,u){var f=u[1];return u[0].evaluate(s)&&f.evaluate(s)}],[Zr(or),function(s,u){for(var f=0,_=u;f<_.length;f+=1)if(!_[f].evaluate(s))return!1;return!0}]]},any:{type:or,overloads:[[[or,or],function(s,u){var f=u[1];return u[0].evaluate(s)||f.evaluate(s)}],[Zr(or),function(s,u){for(var f=0,_=u;f<_.length;f+=1)if(_[f].evaluate(s))return!0;return!1}]]},"!":[or,[or],function(s,u){return!u[0].evaluate(s)}],"is-supported-script":[or,[gr],function(s,u){var f=s.globals&&s.globals.isSupportedScript;return!f||f(u[0].evaluate(s))}],upcase:[gr,[gr],function(s,u){return u[0].evaluate(s).toUpperCase()}],downcase:[gr,[gr],function(s,u){return u[0].evaluate(s).toLowerCase()}],concat:[gr,Zr(yr),function(s,u){return u.map((function(f){return Qc(f.evaluate(s))})).join("")}],"resolved-locale":[gr,[xn],function(s,u){return u[0].evaluate(s).resolvedLocale()}]});var hc=function(s,u){this.expression=s,this._warningHistory={},this._evaluator=new wl,this._defaultValue=u?(function(f){return f.type==="color"&&ba(f.default)?new Yn(0,0,0,0):f.type==="color"?Yn.parse(f.default)||null:f.default===void 0?null:f.default})(u):null,this._enumValues=u&&u.type==="enum"?u.values:null};function Xo(s){return Array.isArray(s)&&s.length>0&&typeof s[0]=="string"&&s[0]in vt}function Vl(s,u){var f=new Bl(vt,[],u?(function(C){var P={color:fr,string:gr,number:jt,enum:gr,boolean:or,formatted:$n,resolvedImage:bn};return C.type==="array"?Un(P[C.value]||yr,C.length):P[C.type]})(u):void 0),_=f.parse(s,void 0,void 0,void 0,u&&u.type==="string"?{typeAnnotation:"coerce"}:void 0);return _?Pn(new hc(_,u)):dn(f.errors)}hc.prototype.evaluateWithoutErrorHandling=function(s,u,f,_,C,P){return this._evaluator.globals=s,this._evaluator.feature=u,this._evaluator.featureState=f,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=P,this.expression.evaluate(this._evaluator)},hc.prototype.evaluate=function(s,u,f,_,C,P){this._evaluator.globals=s,this._evaluator.feature=u||null,this._evaluator.featureState=f||null,this._evaluator.canonical=_,this._evaluator.availableImages=C||null,this._evaluator.formattedSection=P||null;try{var L=this.expression.evaluate(this._evaluator);if(L==null||typeof L=="number"&&L!=L)return this._defaultValue;if(this._enumValues&&!(L in this._enumValues))throw new Oi("Expected value to be one of "+Object.keys(this._enumValues).map((function(q){return JSON.stringify(q)})).join(", ")+", but found "+JSON.stringify(L)+" instead.");return L}catch(q){return this._warningHistory[q.message]||(this._warningHistory[q.message]=!0,typeof console<"u"&&console.warn(q.message)),this._defaultValue}};var iu=function(s,u){this.kind=s,this._styleExpression=u,this.isStateDependent=s!=="constant"&&!Yo(u.expression)};iu.prototype.evaluateWithoutErrorHandling=function(s,u,f,_,C,P){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,_,C,P)},iu.prototype.evaluate=function(s,u,f,_,C,P){return this._styleExpression.evaluate(s,u,f,_,C,P)};var Jo=function(s,u,f,_){this.kind=s,this.zoomStops=f,this._styleExpression=u,this.isStateDependent=s!=="camera"&&!Yo(u.expression),this.interpolationType=_};function Ta(s,u){if((s=Vl(s,u)).result==="error")return s;var f=s.value.expression,_=sa(f);if(!_&&!Kn(u))return dn([new Mt("","data expressions not supported")]);var C=Nl(f,["zoom"]);if(!C&&!_s(u))return dn([new Mt("","zoom expressions not supported")]);var P=(function L(q){var Z=null;if(q instanceof kc)Z=L(q.result);else if(q instanceof Cl)for(var ne=0,se=q.args;ne<se.length&&!(Z=L(se[ne]));ne+=1);else(q instanceof aa||q instanceof Ts)&&q.input instanceof ia&&q.input.name==="zoom"&&(Z=q);return Z instanceof Mt||q.eachChild((function(he){var we=L(he);we instanceof Mt?Z=we:!Z&&we?Z=new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.'):Z&&we&&Z!==we&&(Z=new Mt("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))})),Z})(f);return P||C?P instanceof Mt?dn([P]):P instanceof Ts&&!ts(u)?dn([new Mt("",'"interpolate" expressions cannot be used with this property')]):Pn(P?new Jo(_?"camera":"composite",s.value,P.labels,P instanceof Ts?P.interpolation:void 0):new iu(_?"constant":"source",s.value)):dn([new Mt("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression.')])}Jo.prototype.evaluateWithoutErrorHandling=function(s,u,f,_,C,P){return this._styleExpression.evaluateWithoutErrorHandling(s,u,f,_,C,P)},Jo.prototype.evaluate=function(s,u,f,_,C,P){return this._styleExpression.evaluate(s,u,f,_,C,P)},Jo.prototype.interpolationFactor=function(s,u,f){return this.interpolationType?Ts.interpolationFactor(this.interpolationType,s,u,f):0};var $l=function(s,u){this._parameters=s,this._specification=u,qt(this,(function f(_,C){var P,L,q,Z=C.type==="color",ne=_.stops&&typeof _.stops[0][0]=="object",se=ne||!(ne||_.property!==void 0),he=_.type||(ts(C)?"exponential":"interval");if(Z&&((_=qt({},_)).stops&&(_.stops=_.stops.map((function(jr){return[jr[0],Yn.parse(jr[1])]}))),_.default=Yn.parse(_.default?_.default:C.default)),_.colorSpace&&_.colorSpace!=="rgb"&&!Nd[_.colorSpace])throw new Error("Unknown color space: "+_.colorSpace);if(he==="exponential")P=nh;else if(he==="interval")P=Ec;else if(he==="categorical"){P=Ko,L=Object.create(null);for(var we=0,Ee=_.stops;we<Ee.length;we+=1){var $e=Ee[we];L[$e[0]]=$e[1]}q=typeof _.stops[0][0]}else{if(he!=="identity")throw new Error('Unknown function type "'+he+'"');P=nu}if(ne){for(var He={},st=[],Je=0;Je<_.stops.length;Je++){var ft=_.stops[Je],gt=ft[0].zoom;He[gt]===void 0&&(He[gt]={zoom:gt,type:_.type,property:_.property,default:_.default,stops:[]},st.push(gt)),He[gt].stops.push([ft[0].value,ft[1]])}for(var wt=[],Nt=0,Bt=st;Nt<Bt.length;Nt+=1){var rr=Bt[Nt];wt.push([He[rr].zoom,f(He[rr],C)])}var ur={name:"linear"};return{kind:"composite",interpolationType:ur,interpolationFactor:Ts.interpolationFactor.bind(void 0,ur),zoomStops:wt.map((function(jr){return jr[0]})),evaluate:function(jr,Wr){var Nr=jr.zoom;return nh({stops:wt,base:_.base},C,Nr).evaluate(Nr,Wr)}}}if(se){var Br=he==="exponential"?{name:"exponential",base:_.base!==void 0?_.base:1}:null;return{kind:"camera",interpolationType:Br,interpolationFactor:Ts.interpolationFactor.bind(void 0,Br),zoomStops:_.stops.map((function(jr){return jr[0]})),evaluate:function(jr){return P(_,C,jr.zoom,L,q)}}}return{kind:"source",evaluate:function(jr,Wr){var Nr=Wr&&Wr.properties?Wr.properties[_.property]:void 0;return Nr===void 0?oa(_.default,C.default):P(_,C,Nr,L,q)}}})(this._parameters,this._specification))};function Ga(s){var u=s.key,f=s.value,_=s.valueSpec||{},C=s.objectElementValidators||{},P=s.style,L=s.styleSpec,q=[],Z=Sn(f);if(Z!=="object")return[new qe(u,f,"object expected, "+Z+" found")];for(var ne in f){var se=ne.split(".")[0],he=_[se]||_["*"],we=void 0;if(C[se])we=C[se];else if(_[se])we=Rn;else if(C["*"])we=C["*"];else{if(!_["*"]){q.push(new qe(u,f[ne],'unknown property "'+ne+'"'));continue}we=Rn}q=q.concat(we({key:(u&&u+".")+ne,value:f[ne],valueSpec:he,style:P,styleSpec:L,object:f,objectKey:ne},f))}for(var Ee in _)C[Ee]||_[Ee].required&&_[Ee].default===void 0&&f[Ee]===void 0&&q.push(new qe(u,f,'missing required property "'+Ee+'"'));return q}function su(s){var u=s.value,f=s.valueSpec,_=s.style,C=s.styleSpec,P=s.key,L=s.arrayElementValidator||Rn;if(Sn(u)!=="array")return[new qe(P,u,"array expected, "+Sn(u)+" found")];if(f.length&&u.length!==f.length)return[new qe(P,u,"array length "+f.length+" expected, length "+u.length+" found")];if(f["min-length"]&&u.length<f["min-length"])return[new qe(P,u,"array length at least "+f["min-length"]+" expected, length "+u.length+" found")];var q={type:f.value,values:f.values};C.$version<7&&(q.function=f.function),Sn(f.value)==="object"&&(q=f.value);for(var Z=[],ne=0;ne<u.length;ne++)Z=Z.concat(L({array:u,arrayIndex:ne,value:u[ne],valueSpec:q,style:_,styleSpec:C,key:P+"["+ne+"]"}));return Z}function qu(s){var u=s.key,f=s.value,_=s.valueSpec,C=Sn(f);return C==="number"&&f!=f&&(C="NaN"),C!=="number"?[new qe(u,f,"number expected, "+C+" found")]:"minimum"in _&&f<_.minimum?[new qe(u,f,f+" is less than the minimum value "+_.minimum)]:"maximum"in _&&f>_.maximum?[new qe(u,f,f+" is greater than the maximum value "+_.maximum)]:[]}function yo(s){var u,f,_,C=s.valueSpec,P=Xt(s.value.type),L={},q=P!=="categorical"&&s.value.property===void 0,Z=!q,ne=Sn(s.value.stops)==="array"&&Sn(s.value.stops[0])==="array"&&Sn(s.value.stops[0][0])==="object",se=Ga({key:s.key,value:s.value,valueSpec:s.styleSpec.function,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{stops:function(Ee){if(P==="identity")return[new qe(Ee.key,Ee.value,'identity function may not have a "stops" property')];var $e=[],He=Ee.value;return $e=$e.concat(su({key:Ee.key,value:He,valueSpec:Ee.valueSpec,style:Ee.style,styleSpec:Ee.styleSpec,arrayElementValidator:he})),Sn(He)==="array"&&He.length===0&&$e.push(new qe(Ee.key,He,"array must have at least one stop")),$e},default:function(Ee){return Rn({key:Ee.key,value:Ee.value,valueSpec:C,style:Ee.style,styleSpec:Ee.styleSpec})}}});return P==="identity"&&q&&se.push(new qe(s.key,s.value,'missing required property "property"')),P==="identity"||s.value.stops||se.push(new qe(s.key,s.value,'missing required property "stops"')),P==="exponential"&&s.valueSpec.expression&&!ts(s.valueSpec)&&se.push(new qe(s.key,s.value,"exponential functions not supported")),s.styleSpec.$version>=8&&(Z&&!Kn(s.valueSpec)?se.push(new qe(s.key,s.value,"property functions not supported")):q&&!_s(s.valueSpec)&&se.push(new qe(s.key,s.value,"zoom functions not supported"))),P!=="categorical"&&!ne||s.value.property!==void 0||se.push(new qe(s.key,s.value,'"property" property is required')),se;function he(Ee){var $e=[],He=Ee.value,st=Ee.key;if(Sn(He)!=="array")return[new qe(st,He,"array expected, "+Sn(He)+" found")];if(He.length!==2)return[new qe(st,He,"array length 2 expected, length "+He.length+" found")];if(ne){if(Sn(He[0])!=="object")return[new qe(st,He,"object expected, "+Sn(He[0])+" found")];if(He[0].zoom===void 0)return[new qe(st,He,"object stop key must have zoom")];if(He[0].value===void 0)return[new qe(st,He,"object stop key must have value")];if(_&&_>Xt(He[0].zoom))return[new qe(st,He[0].zoom,"stop zoom values must appear in ascending order")];Xt(He[0].zoom)!==_&&(_=Xt(He[0].zoom),f=void 0,L={}),$e=$e.concat(Ga({key:st+"[0]",value:He[0],valueSpec:{zoom:{}},style:Ee.style,styleSpec:Ee.styleSpec,objectElementValidators:{zoom:qu,value:we}}))}else $e=$e.concat(we({key:st+"[0]",value:He[0],style:Ee.style,styleSpec:Ee.styleSpec},He));return Xo(bt(He[1]))?$e.concat([new qe(st+"[1]",He[1],"expressions are not allowed in function stops.")]):$e.concat(Rn({key:st+"[1]",value:He[1],valueSpec:C,style:Ee.style,styleSpec:Ee.styleSpec}))}function we(Ee,$e){var He=Sn(Ee.value),st=Xt(Ee.value),Je=Ee.value!==null?Ee.value:$e;if(u){if(He!==u)return[new qe(Ee.key,Je,He+" stop domain type must match previous stop domain type "+u)]}else u=He;if(He!=="number"&&He!=="string"&&He!=="boolean")return[new qe(Ee.key,Je,"stop domain value must be a number, string, or boolean")];if(He!=="number"&&P!=="categorical"){var ft="number expected, "+He+" found";return Kn(C)&&P===void 0&&(ft+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new qe(Ee.key,Je,ft)]}return P!=="categorical"||He!=="number"||isFinite(st)&&Math.floor(st)===st?P!=="categorical"&&He==="number"&&f!==void 0&&st<f?[new qe(Ee.key,Je,"stop domain values must appear in ascending order")]:(f=st,P==="categorical"&&st in L?[new qe(Ee.key,Je,"stop domain values must be unique")]:(L[st]=!0,[])):[new qe(Ee.key,Je,"integer expected, found "+st)]}}function Tc(s){var u=(s.expressionContext==="property"?Ta:Vl)(bt(s.value),s.valueSpec);if(u.result==="error")return u.value.map((function(_){return new qe(""+s.key+_.key,s.value,_.message)}));var f=u.value.expression||u.value._styleExpression.expression;if(s.expressionContext==="property"&&s.propertyKey==="text-font"&&!f.outputDefined())return[new qe(s.key,s.value,'Invalid data expression for "'+s.propertyKey+'". Output values must be contained as literals within the expression.')];if(s.expressionContext==="property"&&s.propertyType==="layout"&&!Yo(f))return[new qe(s.key,s.value,'"feature-state" data expressions are not supported with layout properties.')];if(s.expressionContext==="filter"&&!Yo(f))return[new qe(s.key,s.value,'"feature-state" data expressions are not supported with filters.')];if(s.expressionContext&&s.expressionContext.indexOf("cluster")===0){if(!Nl(f,["zoom","feature-state"]))return[new qe(s.key,s.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(s.expressionContext==="cluster-initial"&&!sa(f))return[new qe(s.key,s.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function au(s){var u=s.key,f=s.value,_=s.valueSpec,C=[];return Array.isArray(_.values)?_.values.indexOf(Xt(f))===-1&&C.push(new qe(u,f,"expected one of ["+_.values.join(", ")+"], "+JSON.stringify(f)+" found")):Object.keys(_.values).indexOf(Xt(f))===-1&&C.push(new qe(u,f,"expected one of ["+Object.keys(_.values).join(", ")+"], "+JSON.stringify(f)+" found")),C}function Vu(s){if(s===!0||s===!1)return!0;if(!Array.isArray(s)||s.length===0)return!1;switch(s[0]){case"has":return s.length>=2&&s[1]!=="$id"&&s[1]!=="$type";case"in":return s.length>=3&&(typeof s[1]!="string"||Array.isArray(s[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return s.length!==3||Array.isArray(s[1])||Array.isArray(s[2]);case"any":case"all":for(var u=0,f=s.slice(1);u<f.length;u+=1){var _=f[u];if(!Vu(_)&&typeof _!="boolean")return!1}return!0;default:return!0}}$l.deserialize=function(s){return new $l(s._parameters,s._specification)},$l.serialize=function(s){return{_parameters:s._parameters,_specification:s._specification}};var Qo={type:"boolean",default:!1};function ou(s){if(s==null)return{filter:function(){return!0},needGeometry:!1};Vu(s)||(s=Pa(s));var u=Vl(s,Qo);if(u.result==="error")throw new Error(u.value.map((function(f){return f.key+": "+f.message})).join(", "));return{filter:function(f,_,C){return u.value.evaluate(f,_,{},C)},needGeometry:(function f(_){if(!Array.isArray(_))return!1;if(_[0]==="within")return!0;for(var C=1;C<_.length;C++)if(f(_[C]))return!0;return!1})(s)}}function Gh(s,u){return s<u?-1:s>u?1:0}function Pa(s){if(!s)return!0;var u,f=s[0];return s.length<=1?f!=="any":f==="=="?el(s[1],s[2],"=="):f==="!="?Ra(el(s[1],s[2],"==")):f==="<"||f===">"||f==="<="||f===">="?el(s[1],s[2],f):f==="any"?(u=s.slice(1),["any"].concat(u.map(Pa))):f==="all"?["all"].concat(s.slice(1).map(Pa)):f==="none"?["all"].concat(s.slice(1).map(Pa).map(Ra)):f==="in"?lu(s[1],s.slice(2)):f==="!in"?Ra(lu(s[1],s.slice(2))):f==="has"?xo(s[1]):f==="!has"?Ra(xo(s[1])):f!=="within"||s}function el(s,u,f){switch(s){case"$type":return["filter-type-"+f,u];case"$id":return["filter-id-"+f,u];default:return["filter-"+f,s,u]}}function lu(s,u){if(u.length===0)return!1;switch(s){case"$type":return["filter-type-in",["literal",u]];case"$id":return["filter-id-in",["literal",u]];default:return u.length>200&&!u.some((function(f){return typeof f!=typeof u[0]}))?["filter-in-large",s,["literal",u.sort(Gh)]]:["filter-in-small",s,["literal",u]]}}function xo(s){switch(s){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",s]}}function Ra(s){return["!",s]}function fc(s){return Vu(bt(s.value))?Tc(qt({},s,{expressionContext:"filter",valueSpec:{value:"boolean"}})):(function u(f){var _=f.value,C=f.key;if(Sn(_)!=="array")return[new qe(C,_,"array expected, "+Sn(_)+" found")];var P,L=f.styleSpec,q=[];if(_.length<1)return[new qe(C,_,"filter array must have at least 1 element")];switch(q=q.concat(au({key:C+"[0]",value:_[0],valueSpec:L.filter_operator,style:f.style,styleSpec:f.styleSpec})),Xt(_[0])){case"<":case"<=":case">":case">=":_.length>=2&&Xt(_[1])==="$type"&&q.push(new qe(C,_,'"$type" cannot be use with operator "'+_[0]+'"'));case"==":case"!=":_.length!==3&&q.push(new qe(C,_,'filter array for operator "'+_[0]+'" must have 3 elements'));case"in":case"!in":_.length>=2&&(P=Sn(_[1]))!=="string"&&q.push(new qe(C+"[1]",_[1],"string expected, "+P+" found"));for(var Z=2;Z<_.length;Z++)P=Sn(_[Z]),Xt(_[1])==="$type"?q=q.concat(au({key:C+"["+Z+"]",value:_[Z],valueSpec:L.geometry_type,style:f.style,styleSpec:f.styleSpec})):P!=="string"&&P!=="number"&&P!=="boolean"&&q.push(new qe(C+"["+Z+"]",_[Z],"string, number, or boolean expected, "+P+" found"));break;case"any":case"all":case"none":for(var ne=1;ne<_.length;ne++)q=q.concat(u({key:C+"["+ne+"]",value:_[ne],style:f.style,styleSpec:f.styleSpec}));break;case"has":case"!has":P=Sn(_[1]),_.length!==2?q.push(new qe(C,_,'filter array for "'+_[0]+'" operator must have 2 elements')):P!=="string"&&q.push(new qe(C+"[1]",_[1],"string expected, "+P+" found"));break;case"within":P=Sn(_[1]),_.length!==2?q.push(new qe(C,_,'filter array for "'+_[0]+'" operator must have 2 elements')):P!=="object"&&q.push(new qe(C+"[1]",_[1],"object expected, "+P+" found"))}return q})(s)}function El(s,u){var f=s.key,_=s.style,C=s.styleSpec,P=s.value,L=s.objectKey,q=C[u+"_"+s.layerType];if(!q)return[];var Z=L.match(/^(.*)-transition$/);if(u==="paint"&&Z&&q[Z[1]]&&q[Z[1]].transition)return Rn({key:f,value:P,valueSpec:C.transition,style:_,styleSpec:C});var ne,se=s.valueSpec||q[L];if(!se)return[new qe(f,P,'unknown property "'+L+'"')];if(Sn(P)==="string"&&Kn(se)&&!se.tokens&&(ne=/^{([^}]+)}$/.exec(P)))return[new qe(f,P,'"'+L+'" does not support interpolation syntax\nUse an identity property function instead: `{ "type": "identity", "property": '+JSON.stringify(ne[1])+" }`.")];var he=[];return s.layerType==="symbol"&&(L==="text-field"&&_&&!_.glyphs&&he.push(new qe(f,P,'use of "text-field" requires a style "glyphs" property')),L==="text-font"&&ba(bt(P))&&Xt(P.type)==="identity"&&he.push(new qe(f,P,'"text-font" does not support identity functions'))),he.concat(Rn({key:s.key,value:P,valueSpec:se,style:_,styleSpec:C,expressionContext:"property",propertyType:u,propertyKey:L}))}function pc(s){return El(s,"paint")}function Mo(s){return El(s,"layout")}function Hl(s){var u=[],f=s.value,_=s.key,C=s.style,P=s.styleSpec;f.type||f.ref||u.push(new qe(_,f,'either "type" or "ref" is required'));var L,q=Xt(f.type),Z=Xt(f.ref);if(f.id)for(var ne=Xt(f.id),se=0;se<s.arrayIndex;se++){var he=C.layers[se];Xt(he.id)===ne&&u.push(new qe(_,f.id,'duplicate layer id "'+f.id+'", previously used at line '+he.id.__line__))}if("ref"in f)["type","source","source-layer","filter","layout"].forEach((function($e){$e in f&&u.push(new qe(_,f[$e],'"'+$e+'" is prohibited for ref layers'))})),C.layers.forEach((function($e){Xt($e.id)===Z&&(L=$e)})),L?L.ref?u.push(new qe(_,f.ref,"ref cannot reference another ref layer")):q=Xt(L.type):u.push(new qe(_,f.ref,'ref layer "'+Z+'" not found'));else if(q!=="background")if(f.source){var we=C.sources&&C.sources[f.source],Ee=we&&Xt(we.type);we?Ee==="vector"&&q==="raster"?u.push(new qe(_,f.source,'layer "'+f.id+'" requires a raster source')):Ee==="raster"&&q!=="raster"?u.push(new qe(_,f.source,'layer "'+f.id+'" requires a vector source')):Ee!=="vector"||f["source-layer"]?Ee==="raster-dem"&&q!=="hillshade"?u.push(new qe(_,f.source,"raster-dem source can only be used with layer type 'hillshade'.")):q!=="line"||!f.paint||!f.paint["line-gradient"]||Ee==="geojson"&&we.lineMetrics||u.push(new qe(_,f,'layer "'+f.id+'" specifies a line-gradient, which requires a GeoJSON source with `lineMetrics` enabled.')):u.push(new qe(_,f,'layer "'+f.id+'" must specify a "source-layer"')):u.push(new qe(_,f.source,'source "'+f.source+'" not found'))}else u.push(new qe(_,f,'missing required property "source"'));return u=u.concat(Ga({key:_,value:f,valueSpec:P.layer,style:s.style,styleSpec:s.styleSpec,objectElementValidators:{"*":function(){return[]},type:function(){return Rn({key:_+".type",value:f.type,valueSpec:P.layer.type,style:s.style,styleSpec:s.styleSpec,object:f,objectKey:"type"})},filter:fc,layout:function($e){return Ga({layer:f,key:$e.key,value:$e.value,style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":function(He){return Mo(qt({layerType:q},He))}}})},paint:function($e){return Ga({layer:f,key:$e.key,value:$e.value,style:$e.style,styleSpec:$e.styleSpec,objectElementValidators:{"*":function(He){return pc(qt({layerType:q},He))}}})}}}))}function Li(s){var u=s.value,f=s.key,_=Sn(u);return _!=="string"?[new qe(f,u,"string expected, "+_+" found")]:[]}var ji={promoteId:function(s){var u=s.key,f=s.value;if(Sn(f)==="string")return Li({key:u,value:f});var _=[];for(var C in f)_.push.apply(_,Li({key:u+"."+C,value:f[C]}));return _}};function Ia(s){var u=s.value,f=s.key,_=s.styleSpec,C=s.style;if(!u.type)return[new qe(f,u,'"type" is required')];var P,L=Xt(u.type);switch(L){case"vector":case"raster":case"raster-dem":return Ga({key:f,value:u,valueSpec:_["source_"+L.replace("-","_")],style:s.style,styleSpec:_,objectElementValidators:ji});case"geojson":if(P=Ga({key:f,value:u,valueSpec:_.source_geojson,style:C,styleSpec:_,objectElementValidators:ji}),u.cluster)for(var q in u.clusterProperties){var Z=u.clusterProperties[q],ne=Z[0],se=typeof ne=="string"?[ne,["accumulated"],["get",q]]:ne;P.push.apply(P,Tc({key:f+"."+q+".map",value:Z[1],expressionContext:"cluster-map"})),P.push.apply(P,Tc({key:f+"."+q+".reduce",value:se,expressionContext:"cluster-reduce"}))}return P;case"video":return Ga({key:f,value:u,valueSpec:_.source_video,style:C,styleSpec:_});case"image":return Ga({key:f,value:u,valueSpec:_.source_image,style:C,styleSpec:_});case"canvas":return[new qe(f,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return au({key:f+".type",value:u.type,valueSpec:{values:["vector","raster","raster-dem","geojson","video","image"]}})}}function Ps(s){var u=s.value,f=s.styleSpec,_=f.light,C=s.style,P=[],L=Sn(u);if(u===void 0)return P;if(L!=="object")return P.concat([new qe("light",u,"object expected, "+L+" found")]);for(var q in u){var Z=q.match(/^(.*)-transition$/);P=P.concat(Z&&_[Z[1]]&&_[Z[1]].transition?Rn({key:q,value:u[q],valueSpec:f.transition,style:C,styleSpec:f}):_[q]?Rn({key:q,value:u[q],valueSpec:_[q],style:C,styleSpec:f}):[new qe(q,u[q],'unknown property "'+q+'"')])}return P}var Wa={"*":function(){return[]},array:su,boolean:function(s){var u=s.value,f=s.key,_=Sn(u);return _!=="boolean"?[new qe(f,u,"boolean expected, "+_+" found")]:[]},number:qu,color:function(s){var u=s.key,f=s.value,_=Sn(f);return _!=="string"?[new qe(u,f,"color expected, "+_+" found")]:Fn(f)===null?[new qe(u,f,'color expected, "'+f+'" found')]:[]},constants:ht,enum:au,filter:fc,function:yo,layer:Hl,object:Ga,source:Ia,light:Ps,string:Li,formatted:function(s){return Li(s).length===0?[]:Tc(s)},resolvedImage:function(s){return Li(s).length===0?[]:Tc(s)}};function Rn(s){var u=s.value,f=s.valueSpec,_=s.styleSpec;return f.expression&&ba(Xt(u))?yo(s):f.expression&&Xo(bt(u))?Tc(s):f.type&&Wa[f.type]?Wa[f.type](s):Ga(qt({},s,{valueSpec:f.type?_[f.type]:f}))}function bi(s){var u=s.value,f=s.key,_=Li(s);return _.length||(u.indexOf("{fontstack}")===-1&&_.push(new qe(f,u,'"glyphs" url must include a "{fontstack}" token')),u.indexOf("{range}")===-1&&_.push(new qe(f,u,'"glyphs" url must include a "{range}" token'))),_}function ws(s,u){u===void 0&&(u=ke);var f=[];return f=f.concat(Rn({key:"",value:s,valueSpec:u.$root,styleSpec:u,style:s,objectElementValidators:{glyphs:bi,"*":function(){return[]}}})),s.constants&&(f=f.concat(ht({key:"constants",value:s.constants}))),Gl(f)}function Gl(s){return[].concat(s).sort((function(u,f){return u.line-f.line}))}function tl(s){return function(){for(var u=[],f=arguments.length;f--;)u[f]=arguments[f];return Gl(s.apply(this,u))}}ws.source=tl(Ia),ws.light=tl(Ps),ws.layer=tl(Hl),ws.filter=tl(fc),ws.paintProperty=tl(pc),ws.layoutProperty=tl(Mo);var Wl=ws,Sd=Wl.light,$u=Wl.paintProperty,Yl=Wl.layoutProperty;function Pc(s,u){var f=!1;if(u&&u.length)for(var _=0,C=u;_<C.length;_+=1)s.fire(new et(new Error(C[_].message))),f=!0;return f}var la=_i;function _i(s,u,f){var _=this.cells=[];if(s instanceof ArrayBuffer){this.arrayBuffer=s;var C=new Int32Array(this.arrayBuffer);s=C[0],this.d=(u=C[1])+2*(f=C[2]);for(var P=0;P<this.d*this.d;P++){var L=C[3+P],q=C[3+P+1];_.push(L===q?null:C.subarray(L,q))}var Z=C[3+_.length+1];this.keys=C.subarray(C[3+_.length],Z),this.bboxes=C.subarray(Z),this.insert=this._insertReadonly}else{this.d=u+2*f;for(var ne=0;ne<this.d*this.d;ne++)_.push([]);this.keys=[],this.bboxes=[]}this.n=u,this.extent=s,this.padding=f,this.scale=u/s,this.uid=0;var se=f/u*s;this.min=-se,this.max=s+se}_i.prototype.insert=function(s,u,f,_,C){this._forEachCell(u,f,_,C,this._insertCell,this.uid++),this.keys.push(s),this.bboxes.push(u),this.bboxes.push(f),this.bboxes.push(_),this.bboxes.push(C)},_i.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},_i.prototype._insertCell=function(s,u,f,_,C,P){this.cells[C].push(P)},_i.prototype.query=function(s,u,f,_,C){var P=this.min,L=this.max;if(s<=P&&u<=P&&L<=f&&L<=_&&!C)return Array.prototype.slice.call(this.keys);var q=[];return this._forEachCell(s,u,f,_,this._queryCell,q,{},C),q},_i.prototype._queryCell=function(s,u,f,_,C,P,L,q){var Z=this.cells[C];if(Z!==null)for(var ne=this.keys,se=this.bboxes,he=0;he<Z.length;he++){var we=Z[he];if(L[we]===void 0){var Ee=4*we;(q?q(se[Ee+0],se[Ee+1],se[Ee+2],se[Ee+3]):s<=se[Ee+2]&&u<=se[Ee+3]&&f>=se[Ee+0]&&_>=se[Ee+1])?(L[we]=!0,P.push(ne[we])):L[we]=!1}}},_i.prototype._forEachCell=function(s,u,f,_,C,P,L,q){for(var Z=this._convertToCellCoord(s),ne=this._convertToCellCoord(u),se=this._convertToCellCoord(f),he=this._convertToCellCoord(_),we=Z;we<=se;we++)for(var Ee=ne;Ee<=he;Ee++){var $e=this.d*Ee+we;if((!q||q(this._convertFromCellCoord(we),this._convertFromCellCoord(Ee),this._convertFromCellCoord(we+1),this._convertFromCellCoord(Ee+1)))&&C.call(this,s,u,f,_,$e,P,L,q))return}},_i.prototype._convertFromCellCoord=function(s){return(s-this.padding)/this.scale},_i.prototype._convertToCellCoord=function(s){return Math.max(0,Math.min(this.d-1,Math.floor(s*this.scale)+this.padding))},_i.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var s=this.cells,u=3+this.cells.length+1+1,f=0,_=0;_<this.cells.length;_++)f+=this.cells[_].length;var C=new Int32Array(u+f+this.keys.length+this.bboxes.length);C[0]=this.extent,C[1]=this.n,C[2]=this.padding;for(var P=u,L=0;L<s.length;L++){var q=s[L];C[3+L]=P,C.set(q,P),P+=q.length}return C[3+s.length]=P,C.set(this.keys,P),C[3+s.length+1]=P+=this.keys.length,C.set(this.bboxes,P),P+=this.bboxes.length,C.buffer};var Xn=T.ImageData,zi=T.ImageBitmap,mn={};function sr(s,u,f){f===void 0&&(f={}),Object.defineProperty(u,"_classRegistryKey",{value:s,writeable:!1}),mn[s]={klass:u,omit:f.omit||[],shallow:f.shallow||[]}}for(var Rs in sr("Object",Object),la.serialize=function(s,u){var f=s.toArrayBuffer();return u&&u.push(f),{buffer:f}},la.deserialize=function(s){return new la(s.buffer)},sr("Grid",la),sr("Color",Yn),sr("Error",Error),sr("ResolvedImage",ri),sr("StylePropertyFunction",$l),sr("StyleExpression",hc,{omit:["_evaluator"]}),sr("ZoomDependentExpression",Jo),sr("ZoomConstantExpression",iu),sr("CompoundExpression",ia,{omit:["_evaluate"]}),vt)vt[Rs]._classRegistryKey||sr("Expression_"+Rs,vt[Rs]);function mc(s){return s&&typeof ArrayBuffer<"u"&&(s instanceof ArrayBuffer||s.constructor&&s.constructor.name==="ArrayBuffer")}function rl(s){return zi&&s instanceof zi}function bo(s,u){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp)return s;if(mc(s)||rl(s))return u&&u.push(s),s;if(ArrayBuffer.isView(s)){var f=s;return u&&u.push(f.buffer),f}if(s instanceof Xn)return u&&u.push(s.data.buffer),s;if(Array.isArray(s)){for(var _=[],C=0,P=s;C<P.length;C+=1)_.push(bo(P[C],u));return _}if(typeof s=="object"){var L=s.constructor,q=L._classRegistryKey;if(!q)throw new Error("can't serialize object of unregistered class");var Z=L.serialize?L.serialize(s,u):{};if(!L.serialize){for(var ne in s)if(s.hasOwnProperty(ne)&&!(mn[q].omit.indexOf(ne)>=0)){var se=s[ne];Z[ne]=mn[q].shallow.indexOf(ne)>=0?se:bo(se,u)}s instanceof Error&&(Z.message=s.message)}if(Z.$name)throw new Error("$name property is reserved for worker serialization logic.");return q!=="Object"&&(Z.$name=q),Z}throw new Error("can't serialize object of type "+typeof s)}function Xs(s){if(s==null||typeof s=="boolean"||typeof s=="number"||typeof s=="string"||s instanceof Boolean||s instanceof Number||s instanceof String||s instanceof Date||s instanceof RegExp||mc(s)||rl(s)||ArrayBuffer.isView(s)||s instanceof Xn)return s;if(Array.isArray(s))return s.map(Xs);if(typeof s=="object"){var u=s.$name||"Object",f=mn[u].klass;if(!f)throw new Error("can't deserialize unregistered class "+u);if(f.deserialize)return f.deserialize(s);for(var _=Object.create(f.prototype),C=0,P=Object.keys(s);C<P.length;C+=1){var L=P[C];if(L!=="$name"){var q=s[L];_[L]=mn[u].shallow.indexOf(L)>=0?q:Xs(q)}}return _}throw new Error("can't deserialize object of type "+typeof s)}var Hu=function(){this.first=!0};Hu.prototype.update=function(s,u){var f=Math.floor(s);return this.first?(this.first=!1,this.lastIntegerZoom=f,this.lastIntegerZoomTime=0,this.lastZoom=s,this.lastFloorZoom=f,!0):(this.lastFloorZoom>f?(this.lastIntegerZoom=f+1,this.lastIntegerZoomTime=u):this.lastFloorZoom<f&&(this.lastIntegerZoom=f,this.lastIntegerZoomTime=u),s!==this.lastZoom&&(this.lastZoom=s,this.lastFloorZoom=f,!0))};var tr={"Latin-1 Supplement":function(s){return s>=128&&s<=255},Arabic:function(s){return s>=1536&&s<=1791},"Arabic Supplement":function(s){return s>=1872&&s<=1919},"Arabic Extended-A":function(s){return s>=2208&&s<=2303},"Hangul Jamo":function(s){return s>=4352&&s<=4607},"Unified Canadian Aboriginal Syllabics":function(s){return s>=5120&&s<=5759},Khmer:function(s){return s>=6016&&s<=6143},"Unified Canadian Aboriginal Syllabics Extended":function(s){return s>=6320&&s<=6399},"General Punctuation":function(s){return s>=8192&&s<=8303},"Letterlike Symbols":function(s){return s>=8448&&s<=8527},"Number Forms":function(s){return s>=8528&&s<=8591},"Miscellaneous Technical":function(s){return s>=8960&&s<=9215},"Control Pictures":function(s){return s>=9216&&s<=9279},"Optical Character Recognition":function(s){return s>=9280&&s<=9311},"Enclosed Alphanumerics":function(s){return s>=9312&&s<=9471},"Geometric Shapes":function(s){return s>=9632&&s<=9727},"Miscellaneous Symbols":function(s){return s>=9728&&s<=9983},"Miscellaneous Symbols and Arrows":function(s){return s>=11008&&s<=11263},"CJK Radicals Supplement":function(s){return s>=11904&&s<=12031},"Kangxi Radicals":function(s){return s>=12032&&s<=12255},"Ideographic Description Characters":function(s){return s>=12272&&s<=12287},"CJK Symbols and Punctuation":function(s){return s>=12288&&s<=12351},Hiragana:function(s){return s>=12352&&s<=12447},Katakana:function(s){return s>=12448&&s<=12543},Bopomofo:function(s){return s>=12544&&s<=12591},"Hangul Compatibility Jamo":function(s){return s>=12592&&s<=12687},Kanbun:function(s){return s>=12688&&s<=12703},"Bopomofo Extended":function(s){return s>=12704&&s<=12735},"CJK Strokes":function(s){return s>=12736&&s<=12783},"Katakana Phonetic Extensions":function(s){return s>=12784&&s<=12799},"Enclosed CJK Letters and Months":function(s){return s>=12800&&s<=13055},"CJK Compatibility":function(s){return s>=13056&&s<=13311},"CJK Unified Ideographs Extension A":function(s){return s>=13312&&s<=19903},"Yijing Hexagram Symbols":function(s){return s>=19904&&s<=19967},"CJK Unified Ideographs":function(s){return s>=19968&&s<=40959},"Yi Syllables":function(s){return s>=40960&&s<=42127},"Yi Radicals":function(s){return s>=42128&&s<=42191},"Hangul Jamo Extended-A":function(s){return s>=43360&&s<=43391},"Hangul Syllables":function(s){return s>=44032&&s<=55215},"Hangul Jamo Extended-B":function(s){return s>=55216&&s<=55295},"Private Use Area":function(s){return s>=57344&&s<=63743},"CJK Compatibility Ideographs":function(s){return s>=63744&&s<=64255},"Arabic Presentation Forms-A":function(s){return s>=64336&&s<=65023},"Vertical Forms":function(s){return s>=65040&&s<=65055},"CJK Compatibility Forms":function(s){return s>=65072&&s<=65103},"Small Form Variants":function(s){return s>=65104&&s<=65135},"Arabic Presentation Forms-B":function(s){return s>=65136&&s<=65279},"Halfwidth and Fullwidth Forms":function(s){return s>=65280&&s<=65519}};function La(s){for(var u=0,f=s;u<f.length;u+=1)if(Gu(f[u].charCodeAt(0)))return!0;return!1}function Gu(s){return!(s!==746&&s!==747&&(s<4352||!(tr["Bopomofo Extended"](s)||tr.Bopomofo(s)||tr["CJK Compatibility Forms"](s)&&!(s>=65097&&s<=65103)||tr["CJK Compatibility Ideographs"](s)||tr["CJK Compatibility"](s)||tr["CJK Radicals Supplement"](s)||tr["CJK Strokes"](s)||!(!tr["CJK Symbols and Punctuation"](s)||s>=12296&&s<=12305||s>=12308&&s<=12319||s===12336)||tr["CJK Unified Ideographs Extension A"](s)||tr["CJK Unified Ideographs"](s)||tr["Enclosed CJK Letters and Months"](s)||tr["Hangul Compatibility Jamo"](s)||tr["Hangul Jamo Extended-A"](s)||tr["Hangul Jamo Extended-B"](s)||tr["Hangul Jamo"](s)||tr["Hangul Syllables"](s)||tr.Hiragana(s)||tr["Ideographic Description Characters"](s)||tr.Kanbun(s)||tr["Kangxi Radicals"](s)||tr["Katakana Phonetic Extensions"](s)||tr.Katakana(s)&&s!==12540||!(!tr["Halfwidth and Fullwidth Forms"](s)||s===65288||s===65289||s===65293||s>=65306&&s<=65310||s===65339||s===65341||s===65343||s>=65371&&s<=65503||s===65507||s>=65512&&s<=65519)||!(!tr["Small Form Variants"](s)||s>=65112&&s<=65118||s>=65123&&s<=65126)||tr["Unified Canadian Aboriginal Syllabics"](s)||tr["Unified Canadian Aboriginal Syllabics Extended"](s)||tr["Vertical Forms"](s)||tr["Yijing Hexagram Symbols"](s)||tr["Yi Syllables"](s)||tr["Yi Radicals"](s))))}function Ya(s){return!(Gu(s)||(function(u){return!!(tr["Latin-1 Supplement"](u)&&(u===167||u===169||u===174||u===177||u===188||u===189||u===190||u===215||u===247)||tr["General Punctuation"](u)&&(u===8214||u===8224||u===8225||u===8240||u===8241||u===8251||u===8252||u===8258||u===8263||u===8264||u===8265||u===8273)||tr["Letterlike Symbols"](u)||tr["Number Forms"](u)||tr["Miscellaneous Technical"](u)&&(u>=8960&&u<=8967||u>=8972&&u<=8991||u>=8996&&u<=9e3||u===9003||u>=9085&&u<=9114||u>=9150&&u<=9165||u===9167||u>=9169&&u<=9179||u>=9186&&u<=9215)||tr["Control Pictures"](u)&&u!==9251||tr["Optical Character Recognition"](u)||tr["Enclosed Alphanumerics"](u)||tr["Geometric Shapes"](u)||tr["Miscellaneous Symbols"](u)&&!(u>=9754&&u<=9759)||tr["Miscellaneous Symbols and Arrows"](u)&&(u>=11026&&u<=11055||u>=11088&&u<=11097||u>=11192&&u<=11243)||tr["CJK Symbols and Punctuation"](u)||tr.Katakana(u)||tr["Private Use Area"](u)||tr["CJK Compatibility Forms"](u)||tr["Small Form Variants"](u)||tr["Halfwidth and Fullwidth Forms"](u)||u===8734||u===8756||u===8757||u>=9984&&u<=10087||u>=10102&&u<=10131||u===65532||u===65533)})(s))}function Do(s){return s>=1424&&s<=2303||tr["Arabic Presentation Forms-A"](s)||tr["Arabic Presentation Forms-B"](s)}function js(s,u){return!(!u&&Do(s)||s>=2304&&s<=3583||s>=3840&&s<=4255||tr.Khmer(s))}function Eu(s){for(var u=0,f=s;u<f.length;u+=1)if(Do(f[u].charCodeAt(0)))return!0;return!1}var cu=null,ca="unavailable",Tl=null,ih=function(s){s&&typeof s=="string"&&s.indexOf("NetworkError")>-1&&(ca="error"),cu&&cu(s)};function Rc(){Ad.fire(new De("pluginStateChange",{pluginStatus:ca,pluginURL:Tl}))}var Ad=new nt,nl=function(){return ca},_o=function(){if(ca!=="deferred"||!Tl)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");ca="loading",Rc(),Tl&&xr({url:Tl},(function(s){s?ih(s):(ca="loaded",Rc())}))},Ma={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:function(){return ca==="loaded"||Ma.applyArabicShaping!=null},isLoading:function(){return ca==="loading"},setState:function(s){ca=s.pluginStatus,Tl=s.pluginURL},isParsed:function(){return Ma.applyArabicShaping!=null&&Ma.processBidirectionalText!=null&&Ma.processStyledBidirectionalText!=null},getPluginURL:function(){return Tl}},En=function(s,u){this.zoom=s,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.zoomHistory=u.zoomHistory,this.transition=u.transition):(this.now=0,this.fadeDuration=0,this.zoomHistory=new Hu,this.transition={})};En.prototype.isSupportedScript=function(s){return(function(u,f){for(var _=0,C=u;_<C.length;_+=1)if(!js(C[_].charCodeAt(0),f))return!1;return!0})(s,Ma.isLoaded())},En.prototype.crossFadingFactor=function(){return this.fadeDuration===0?1:Math.min((this.now-this.zoomHistory.lastIntegerZoomTime)/this.fadeDuration,1)},En.prototype.getCrossfadeParameters=function(){var s=this.zoom,u=s-Math.floor(s),f=this.crossFadingFactor();return s>this.zoomHistory.lastIntegerZoom?{fromScale:2,toScale:1,t:u+(1-u)*f}:{fromScale:.5,toScale:1,t:1-(1-f)*u}};var il=function(s,u){this.property=s,this.value=u,this.expression=(function(f,_){if(ba(f))return new $l(f,_);if(Xo(f)){var C=Ta(f,_);if(C.result==="error")throw new Error(C.value.map((function(L){return L.key+": "+L.message})).join(", "));return C.value}var P=f;return typeof f=="string"&&_.type==="color"&&(P=Yn.parse(f)),{kind:"constant",evaluate:function(){return P}}})(u===void 0?s.specification.default:u,s.specification)};il.prototype.isDataDriven=function(){return this.expression.kind==="source"||this.expression.kind==="composite"},il.prototype.possiblyEvaluate=function(s,u,f){return this.property.possiblyEvaluate(this,s,u,f)};var Fs=function(s){this.property=s,this.value=new il(s,void 0)};Fs.prototype.transitioned=function(s,u){return new sl(this.property,this.value,u,G({},s.transition,this.transition),s.now)},Fs.prototype.untransitioned=function(){return new sl(this.property,this.value,null,{},0)};var qi=function(s){this._properties=s,this._values=Object.create(s.defaultTransitionablePropertyValues)};qi.prototype.getValue=function(s){return re(this._values[s].value.value)},qi.prototype.setValue=function(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Fs(this._values[s].property)),this._values[s].value=new il(this._values[s].property,u===null?void 0:re(u))},qi.prototype.getTransition=function(s){return re(this._values[s].transition)},qi.prototype.setTransition=function(s,u){this._values.hasOwnProperty(s)||(this._values[s]=new Fs(this._values[s].property)),this._values[s].transition=re(u)||void 0},qi.prototype.serialize=function(){for(var s={},u=0,f=Object.keys(this._values);u<f.length;u+=1){var _=f[u],C=this.getValue(_);C!==void 0&&(s[_]=C);var P=this.getTransition(_);P!==void 0&&(s[_+"-transition"]=P)}return s},qi.prototype.transitioned=function(s,u){for(var f=new Da(this._properties),_=0,C=Object.keys(this._values);_<C.length;_+=1){var P=C[_];f._values[P]=this._values[P].transitioned(s,u._values[P])}return f},qi.prototype.untransitioned=function(){for(var s=new Da(this._properties),u=0,f=Object.keys(this._values);u<f.length;u+=1){var _=f[u];s._values[_]=this._values[_].untransitioned()}return s};var sl=function(s,u,f,_,C){this.property=s,this.value=u,this.begin=C+_.delay||0,this.end=this.begin+_.duration||0,s.specification.transition&&(_.delay||_.duration)&&(this.prior=f)};sl.prototype.possiblyEvaluate=function(s,u,f){var _=s.now||0,C=this.value.possiblyEvaluate(s,u,f),P=this.prior;if(P){if(_>this.end)return this.prior=null,C;if(this.value.isDataDriven())return this.prior=null,C;if(_<this.begin)return P.possiblyEvaluate(s,u,f);var L=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(P.possiblyEvaluate(s,u,f),C,(function(q){if(q<=0)return 0;if(q>=1)return 1;var Z=q*q,ne=Z*q;return 4*(q<.5?ne:3*(q-Z)+ne-.75)})(L))}return C};var Da=function(s){this._properties=s,this._values=Object.create(s.defaultTransitioningPropertyValues)};Da.prototype.possiblyEvaluate=function(s,u,f){for(var _=new Cd(this._properties),C=0,P=Object.keys(this._values);C<P.length;C+=1){var L=P[C];_._values[L]=this._values[L].possiblyEvaluate(s,u,f)}return _},Da.prototype.hasTransition=function(){for(var s=0,u=Object.keys(this._values);s<u.length;s+=1)if(this._values[u[s]].prior)return!0;return!1};var Js=function(s){this._properties=s,this._values=Object.create(s.defaultPropertyValues)};Js.prototype.getValue=function(s){return re(this._values[s].value)},Js.prototype.setValue=function(s,u){this._values[s]=new il(this._values[s].property,u===null?void 0:re(u))},Js.prototype.serialize=function(){for(var s={},u=0,f=Object.keys(this._values);u<f.length;u+=1){var _=f[u],C=this.getValue(_);C!==void 0&&(s[_]=C)}return s},Js.prototype.possiblyEvaluate=function(s,u,f){for(var _=new Cd(this._properties),C=0,P=Object.keys(this._values);C<P.length;C+=1){var L=P[C];_._values[L]=this._values[L].possiblyEvaluate(s,u,f)}return _};var Wi=function(s,u,f){this.property=s,this.value=u,this.parameters=f};Wi.prototype.isConstant=function(){return this.value.kind==="constant"},Wi.prototype.constantOr=function(s){return this.value.kind==="constant"?this.value.value:s},Wi.prototype.evaluate=function(s,u,f,_){return this.property.evaluate(this.value,this.parameters,s,u,f,_)};var Cd=function(s){this._properties=s,this._values=Object.create(s.defaultPossiblyEvaluatedValues)};Cd.prototype.get=function(s){return this._values[s]};var qr=function(s){this.specification=s};qr.prototype.possiblyEvaluate=function(s,u){return s.expression.evaluate(u)},qr.prototype.interpolate=function(s,u,f){var _=oc[this.specification.type];return _?_(s,u,f):s};var Er=function(s,u){this.specification=s,this.overrides=u};Er.prototype.possiblyEvaluate=function(s,u,f,_){return new Wi(this,s.expression.kind==="constant"||s.expression.kind==="camera"?{kind:"constant",value:s.expression.evaluate(u,null,{},f,_)}:s.expression,u)},Er.prototype.interpolate=function(s,u,f){if(s.value.kind!=="constant"||u.value.kind!=="constant")return s;if(s.value.value===void 0||u.value.value===void 0)return new Wi(this,{kind:"constant",value:void 0},s.parameters);var _=oc[this.specification.type];return _?new Wi(this,{kind:"constant",value:_(s.value.value,u.value.value,f)},s.parameters):s},Er.prototype.evaluate=function(s,u,f,_,C,P){return s.kind==="constant"?s.value:s.evaluate(u,f,_,C,P)};var sh=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.possiblyEvaluate=function(f,_,C,P){if(f.value===void 0)return new Wi(this,{kind:"constant",value:void 0},_);if(f.expression.kind==="constant"){var L=f.expression.evaluate(_,null,{},C,P),q=f.property.specification.type==="resolvedImage"&&typeof L!="string"?L.name:L,Z=this._calculate(q,q,q,_);return new Wi(this,{kind:"constant",value:Z},_)}if(f.expression.kind==="camera"){var ne=this._calculate(f.expression.evaluate({zoom:_.zoom-1}),f.expression.evaluate({zoom:_.zoom}),f.expression.evaluate({zoom:_.zoom+1}),_);return new Wi(this,{kind:"constant",value:ne},_)}return new Wi(this,f.expression,_)},u.prototype.evaluate=function(f,_,C,P,L,q){if(f.kind==="source"){var Z=f.evaluate(_,C,P,L,q);return this._calculate(Z,Z,Z,_)}return f.kind==="composite"?this._calculate(f.evaluate({zoom:Math.floor(_.zoom)-1},C,P),f.evaluate({zoom:Math.floor(_.zoom)},C,P),f.evaluate({zoom:Math.floor(_.zoom)+1},C,P),_):f.value},u.prototype._calculate=function(f,_,C,P){return P.zoom>P.zoomHistory.lastIntegerZoom?{from:f,to:_}:{from:C,to:_}},u.prototype.interpolate=function(f){return f},u})(Er),Ci=function(s){this.specification=s};Ci.prototype.possiblyEvaluate=function(s,u,f,_){if(s.value!==void 0){if(s.expression.kind==="constant"){var C=s.expression.evaluate(u,null,{},f,_);return this._calculate(C,C,C,u)}return this._calculate(s.expression.evaluate(new En(Math.floor(u.zoom-1),u)),s.expression.evaluate(new En(Math.floor(u.zoom),u)),s.expression.evaluate(new En(Math.floor(u.zoom+1),u)),u)}},Ci.prototype._calculate=function(s,u,f,_){return _.zoom>_.zoomHistory.lastIntegerZoom?{from:s,to:u}:{from:f,to:u}},Ci.prototype.interpolate=function(s){return s};var gi=function(s){this.specification=s};gi.prototype.possiblyEvaluate=function(s,u,f,_){return!!s.expression.evaluate(u,null,{},f,_)},gi.prototype.interpolate=function(){return!1};var gn=function(s){for(var u in this.properties=s,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[],s){var f=s[u];f.specification.overridable&&this.overridableProperties.push(u);var _=this.defaultPropertyValues[u]=new il(f,void 0),C=this.defaultTransitionablePropertyValues[u]=new Fs(f);this.defaultTransitioningPropertyValues[u]=C.untransitioned(),this.defaultPossiblyEvaluatedValues[u]=_.possiblyEvaluate({})}};sr("DataDrivenProperty",Er),sr("DataConstantProperty",qr),sr("CrossFadedDataDrivenProperty",sh),sr("CrossFadedProperty",Ci),sr("ColorRampProperty",gi);var Is=(function(s){function u(f,_){if(s.call(this),this.id=f.id,this.type=f.type,this._featureFilter={filter:function(){return!0},needGeometry:!1},f.type!=="custom"&&(this.metadata=(f=f).metadata,this.minzoom=f.minzoom,this.maxzoom=f.maxzoom,f.type!=="background"&&(this.source=f.source,this.sourceLayer=f["source-layer"],this.filter=f.filter),_.layout&&(this._unevaluatedLayout=new Js(_.layout)),_.paint)){for(var C in this._transitionablePaint=new qi(_.paint),f.paint)this.setPaintProperty(C,f.paint[C],{validate:!1});for(var P in f.layout)this.setLayoutProperty(P,f.layout[P],{validate:!1});this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new Cd(_.paint)}}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.getCrossfadeParameters=function(){return this._crossfadeParameters},u.prototype.getLayoutProperty=function(f){return f==="visibility"?this.visibility:this._unevaluatedLayout.getValue(f)},u.prototype.setLayoutProperty=function(f,_,C){C===void 0&&(C={}),_!=null&&this._validate(Yl,"layers."+this.id+".layout."+f,f,_,C)||(f!=="visibility"?this._unevaluatedLayout.setValue(f,_):this.visibility=_)},u.prototype.getPaintProperty=function(f){return J(f,"-transition")?this._transitionablePaint.getTransition(f.slice(0,-11)):this._transitionablePaint.getValue(f)},u.prototype.setPaintProperty=function(f,_,C){if(C===void 0&&(C={}),_!=null&&this._validate($u,"layers."+this.id+".paint."+f,f,_,C))return!1;if(J(f,"-transition"))return this._transitionablePaint.setTransition(f.slice(0,-11),_||void 0),!1;var P=this._transitionablePaint._values[f],L=P.property.specification["property-type"]==="cross-faded-data-driven",q=P.value.isDataDriven(),Z=P.value;this._transitionablePaint.setValue(f,_),this._handleSpecialPaintPropertyUpdate(f);var ne=this._transitionablePaint._values[f].value;return ne.isDataDriven()||q||L||this._handleOverridablePaintPropertyUpdate(f,Z,ne)},u.prototype._handleSpecialPaintPropertyUpdate=function(f){},u.prototype._handleOverridablePaintPropertyUpdate=function(f,_,C){return!1},u.prototype.isHidden=function(f){return!!(this.minzoom&&f<this.minzoom)||!!(this.maxzoom&&f>=this.maxzoom)||this.visibility==="none"},u.prototype.updateTransitions=function(f){this._transitioningPaint=this._transitionablePaint.transitioned(f,this._transitioningPaint)},u.prototype.hasTransition=function(){return this._transitioningPaint.hasTransition()},u.prototype.recalculate=function(f,_){f.getCrossfadeParameters&&(this._crossfadeParameters=f.getCrossfadeParameters()),this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(f,void 0,_)),this.paint=this._transitioningPaint.possiblyEvaluate(f,void 0,_)},u.prototype.serialize=function(){var f={id:this.id,type:this.type,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()};return this.visibility&&(f.layout=f.layout||{},f.layout.visibility=this.visibility),_e(f,(function(_,C){return!(_===void 0||C==="layout"&&!Object.keys(_).length||C==="paint"&&!Object.keys(_).length)}))},u.prototype._validate=function(f,_,C,P,L){return L===void 0&&(L={}),(!L||L.validate!==!1)&&Pc(this,f.call(Wl,{key:_,layerType:this.type,objectKey:C,value:P,styleSpec:ke,style:{glyphs:!0,sprite:!0}}))},u.prototype.is3D=function(){return!1},u.prototype.isTileClipped=function(){return!1},u.prototype.hasOffscreenPass=function(){return!1},u.prototype.resize=function(){},u.prototype.isStateDependent=function(){for(var f in this.paint._values){var _=this.paint.get(f);if(_ instanceof Wi&&Kn(_.property.specification)&&(_.value.kind==="source"||_.value.kind==="composite")&&_.value.isStateDependent)return!0}return!1},u})(nt),Ls={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array},al=function(s,u){this._structArray=s,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8},Gn=function(){this.isTransferred=!1,this.capacity=-1,this.resize(0)};function ua(s,u){u===void 0&&(u=1);var f=0,_=0;return{members:s.map((function(C){var P=Ls[C.type].BYTES_PER_ELEMENT,L=f=Ic(f,Math.max(u,P)),q=C.components||1;return _=Math.max(_,P),f+=P*q,{name:C.name,type:C.type,components:q,offset:L}})),size:Ic(f,Math.max(_,u)),alignment:u}}function Ic(s,u){return Math.ceil(s/u)*u}Gn.serialize=function(s,u){return s._trim(),u&&(s.isTransferred=!0,u.push(s.arrayBuffer)),{length:s.length,arrayBuffer:s.arrayBuffer}},Gn.deserialize=function(s){var u=Object.create(this.prototype);return u.arrayBuffer=s.arrayBuffer,u.length=s.length,u.capacity=s.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u},Gn.prototype._trim=function(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())},Gn.prototype.clear=function(){this.length=0},Gn.prototype.resize=function(s){this.reserve(s),this.length=s},Gn.prototype.reserve=function(s){if(s>this.capacity){this.capacity=Math.max(s,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);var u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}},Gn.prototype._refreshViews=function(){throw new Error("_refreshViews() must be implemented by each concrete StructArray layout")};var Bs=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_){var C=this.length;return this.resize(C+1),this.emplace(C,f,_)},u.prototype.emplace=function(f,_,C){var P=2*f;return this.int16[P+0]=_,this.int16[P+1]=C,f},u})(Gn);Bs.prototype.bytesPerElement=4,sr("StructArrayLayout2i4",Bs);var uu=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P){var L=this.length;return this.resize(L+1),this.emplace(L,f,_,C,P)},u.prototype.emplace=function(f,_,C,P,L){var q=4*f;return this.int16[q+0]=_,this.int16[q+1]=C,this.int16[q+2]=P,this.int16[q+3]=L,f},u})(Gn);uu.prototype.bytesPerElement=8,sr("StructArrayLayout4i8",uu);var gc=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q){var Z=this.length;return this.resize(Z+1),this.emplace(Z,f,_,C,P,L,q)},u.prototype.emplace=function(f,_,C,P,L,q,Z){var ne=6*f;return this.int16[ne+0]=_,this.int16[ne+1]=C,this.int16[ne+2]=P,this.int16[ne+3]=L,this.int16[ne+4]=q,this.int16[ne+5]=Z,f},u})(Gn);gc.prototype.bytesPerElement=12,sr("StructArrayLayout2i4i12",gc);var Oa=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q){var Z=this.length;return this.resize(Z+1),this.emplace(Z,f,_,C,P,L,q)},u.prototype.emplace=function(f,_,C,P,L,q,Z){var ne=4*f,se=8*f;return this.int16[ne+0]=_,this.int16[ne+1]=C,this.uint8[se+4]=P,this.uint8[se+5]=L,this.uint8[se+6]=q,this.uint8[se+7]=Z,f},u})(Gn);Oa.prototype.bytesPerElement=8,sr("StructArrayLayout2i4ub8",Oa);var du=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_){var C=this.length;return this.resize(C+1),this.emplace(C,f,_)},u.prototype.emplace=function(f,_,C){var P=2*f;return this.float32[P+0]=_,this.float32[P+1]=C,f},u})(Gn);du.prototype.bytesPerElement=8,sr("StructArrayLayout2f8",du);var no=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q,Z,ne,se,he){var we=this.length;return this.resize(we+1),this.emplace(we,f,_,C,P,L,q,Z,ne,se,he)},u.prototype.emplace=function(f,_,C,P,L,q,Z,ne,se,he,we){var Ee=10*f;return this.uint16[Ee+0]=_,this.uint16[Ee+1]=C,this.uint16[Ee+2]=P,this.uint16[Ee+3]=L,this.uint16[Ee+4]=q,this.uint16[Ee+5]=Z,this.uint16[Ee+6]=ne,this.uint16[Ee+7]=se,this.uint16[Ee+8]=he,this.uint16[Ee+9]=we,f},u})(Gn);no.prototype.bytesPerElement=20,sr("StructArrayLayout10ui20",no);var Pl=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q,Z,ne,se,he,we,Ee){var $e=this.length;return this.resize($e+1),this.emplace($e,f,_,C,P,L,q,Z,ne,se,he,we,Ee)},u.prototype.emplace=function(f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e){var He=12*f;return this.int16[He+0]=_,this.int16[He+1]=C,this.int16[He+2]=P,this.int16[He+3]=L,this.uint16[He+4]=q,this.uint16[He+5]=Z,this.uint16[He+6]=ne,this.uint16[He+7]=se,this.int16[He+8]=he,this.int16[He+9]=we,this.int16[He+10]=Ee,this.int16[He+11]=$e,f},u})(Gn);Pl.prototype.bytesPerElement=24,sr("StructArrayLayout4i4ui4i24",Pl);var Rl=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C){var P=this.length;return this.resize(P+1),this.emplace(P,f,_,C)},u.prototype.emplace=function(f,_,C,P){var L=3*f;return this.float32[L+0]=_,this.float32[L+1]=C,this.float32[L+2]=P,f},u})(Gn);Rl.prototype.bytesPerElement=12,sr("StructArrayLayout3f12",Rl);var wo=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f){var _=this.length;return this.resize(_+1),this.emplace(_,f)},u.prototype.emplace=function(f,_){return this.uint32[1*f+0]=_,f},u})(Gn);wo.prototype.bytesPerElement=4,sr("StructArrayLayout1ul4",wo);var Tu=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q,Z,ne,se){var he=this.length;return this.resize(he+1),this.emplace(he,f,_,C,P,L,q,Z,ne,se)},u.prototype.emplace=function(f,_,C,P,L,q,Z,ne,se,he){var we=10*f,Ee=5*f;return this.int16[we+0]=_,this.int16[we+1]=C,this.int16[we+2]=P,this.int16[we+3]=L,this.int16[we+4]=q,this.int16[we+5]=Z,this.uint32[Ee+3]=ne,this.uint16[we+8]=se,this.uint16[we+9]=he,f},u})(Gn);Tu.prototype.bytesPerElement=20,sr("StructArrayLayout6i1ul2ui20",Tu);var Zl=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q){var Z=this.length;return this.resize(Z+1),this.emplace(Z,f,_,C,P,L,q)},u.prototype.emplace=function(f,_,C,P,L,q,Z){var ne=6*f;return this.int16[ne+0]=_,this.int16[ne+1]=C,this.int16[ne+2]=P,this.int16[ne+3]=L,this.int16[ne+4]=q,this.int16[ne+5]=Z,f},u})(Gn);Zl.prototype.bytesPerElement=12,sr("StructArrayLayout2i2i2i12",Zl);var ol=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L){var q=this.length;return this.resize(q+1),this.emplace(q,f,_,C,P,L)},u.prototype.emplace=function(f,_,C,P,L,q){var Z=4*f,ne=8*f;return this.float32[Z+0]=_,this.float32[Z+1]=C,this.float32[Z+2]=P,this.int16[ne+6]=L,this.int16[ne+7]=q,f},u})(Gn);ol.prototype.bytesPerElement=16,sr("StructArrayLayout2f1f2i16",ol);var kd=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P){var L=this.length;return this.resize(L+1),this.emplace(L,f,_,C,P)},u.prototype.emplace=function(f,_,C,P,L){var q=12*f,Z=3*f;return this.uint8[q+0]=_,this.uint8[q+1]=C,this.float32[Z+1]=P,this.float32[Z+2]=L,f},u})(Gn);kd.prototype.bytesPerElement=12,sr("StructArrayLayout2ub2f12",kd);var Oo=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C){var P=this.length;return this.resize(P+1),this.emplace(P,f,_,C)},u.prototype.emplace=function(f,_,C,P){var L=3*f;return this.uint16[L+0]=_,this.uint16[L+1]=C,this.uint16[L+2]=P,f},u})(Gn);Oo.prototype.bytesPerElement=6,sr("StructArrayLayout3ui6",Oo);var Ms=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e,He,st,Je,ft){var gt=this.length;return this.resize(gt+1),this.emplace(gt,f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e,He,st,Je,ft)},u.prototype.emplace=function(f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e,He,st,Je,ft,gt){var wt=24*f,Nt=12*f,Bt=48*f;return this.int16[wt+0]=_,this.int16[wt+1]=C,this.uint16[wt+2]=P,this.uint16[wt+3]=L,this.uint32[Nt+2]=q,this.uint32[Nt+3]=Z,this.uint32[Nt+4]=ne,this.uint16[wt+10]=se,this.uint16[wt+11]=he,this.uint16[wt+12]=we,this.float32[Nt+7]=Ee,this.float32[Nt+8]=$e,this.uint8[Bt+36]=He,this.uint8[Bt+37]=st,this.uint8[Bt+38]=Je,this.uint32[Nt+10]=ft,this.int16[wt+22]=gt,f},u})(Gn);Ms.prototype.bytesPerElement=48,sr("StructArrayLayout2i2ui3ul3ui2f3ub1ul1i48",Ms);var Wu=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e,He,st,Je,ft,gt,wt,Nt,Bt,rr,ur,Br,jr,Wr,Nr,Tn){var Jr=this.length;return this.resize(Jr+1),this.emplace(Jr,f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e,He,st,Je,ft,gt,wt,Nt,Bt,rr,ur,Br,jr,Wr,Nr,Tn)},u.prototype.emplace=function(f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e,He,st,Je,ft,gt,wt,Nt,Bt,rr,ur,Br,jr,Wr,Nr,Tn,Jr){var Ir=34*f,Ln=17*f;return this.int16[Ir+0]=_,this.int16[Ir+1]=C,this.int16[Ir+2]=P,this.int16[Ir+3]=L,this.int16[Ir+4]=q,this.int16[Ir+5]=Z,this.int16[Ir+6]=ne,this.int16[Ir+7]=se,this.uint16[Ir+8]=he,this.uint16[Ir+9]=we,this.uint16[Ir+10]=Ee,this.uint16[Ir+11]=$e,this.uint16[Ir+12]=He,this.uint16[Ir+13]=st,this.uint16[Ir+14]=Je,this.uint16[Ir+15]=ft,this.uint16[Ir+16]=gt,this.uint16[Ir+17]=wt,this.uint16[Ir+18]=Nt,this.uint16[Ir+19]=Bt,this.uint16[Ir+20]=rr,this.uint16[Ir+21]=ur,this.uint16[Ir+22]=Br,this.uint32[Ln+12]=jr,this.float32[Ln+13]=Wr,this.float32[Ln+14]=Nr,this.float32[Ln+15]=Tn,this.float32[Ln+16]=Jr,f},u})(Gn);Wu.prototype.bytesPerElement=68,sr("StructArrayLayout8i15ui1ul4f68",Wu);var hu=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f){var _=this.length;return this.resize(_+1),this.emplace(_,f)},u.prototype.emplace=function(f,_){return this.float32[1*f+0]=_,f},u})(Gn);hu.prototype.bytesPerElement=4,sr("StructArrayLayout1f4",hu);var Kl=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C){var P=this.length;return this.resize(P+1),this.emplace(P,f,_,C)},u.prototype.emplace=function(f,_,C,P){var L=3*f;return this.int16[L+0]=_,this.int16[L+1]=C,this.int16[L+2]=P,f},u})(Gn);Kl.prototype.bytesPerElement=6,sr("StructArrayLayout3i6",Kl);var Cf=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C){var P=this.length;return this.resize(P+1),this.emplace(P,f,_,C)},u.prototype.emplace=function(f,_,C,P){var L=4*f;return this.uint32[2*f+0]=_,this.uint16[L+2]=C,this.uint16[L+3]=P,f},u})(Gn);Cf.prototype.bytesPerElement=8,sr("StructArrayLayout1ul2ui8",Cf);var ah=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_){var C=this.length;return this.resize(C+1),this.emplace(C,f,_)},u.prototype.emplace=function(f,_,C){var P=2*f;return this.uint16[P+0]=_,this.uint16[P+1]=C,f},u})(Gn);ah.prototype.bytesPerElement=4,sr("StructArrayLayout2ui4",ah);var Us=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f){var _=this.length;return this.resize(_+1),this.emplace(_,f)},u.prototype.emplace=function(f,_){return this.uint16[1*f+0]=_,f},u})(Gn);Us.prototype.bytesPerElement=2,sr("StructArrayLayout1ui2",Us);var fu=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._refreshViews=function(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)},u.prototype.emplaceBack=function(f,_,C,P){var L=this.length;return this.resize(L+1),this.emplace(L,f,_,C,P)},u.prototype.emplace=function(f,_,C,P,L){var q=4*f;return this.float32[q+0]=_,this.float32[q+1]=C,this.float32[q+2]=P,this.float32[q+3]=L,f},u})(Gn);fu.prototype.bytesPerElement=16,sr("StructArrayLayout4f16",fu);var m=(function(s){function u(){s.apply(this,arguments)}s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u;var f={anchorPointX:{configurable:!0},anchorPointY:{configurable:!0},x1:{configurable:!0},y1:{configurable:!0},x2:{configurable:!0},y2:{configurable:!0},featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0},anchorPoint:{configurable:!0}};return f.anchorPointX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorPointY.get=function(){return this._structArray.int16[this._pos2+1]},f.x1.get=function(){return this._structArray.int16[this._pos2+2]},f.y1.get=function(){return this._structArray.int16[this._pos2+3]},f.x2.get=function(){return this._structArray.int16[this._pos2+4]},f.y2.get=function(){return this._structArray.int16[this._pos2+5]},f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+8]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.anchorPoint.get=function(){return new j(this.anchorPointX,this.anchorPointY)},Object.defineProperties(u.prototype,f),u})(al);m.prototype.size=20;var x=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.get=function(f){return new m(this,f)},u})(Tu);sr("CollisionBoxArray",x);var v=(function(s){function u(){s.apply(this,arguments)}s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},glyphStartIndex:{configurable:!0},numGlyphs:{configurable:!0},vertexStartIndex:{configurable:!0},lineStartIndex:{configurable:!0},lineLength:{configurable:!0},segment:{configurable:!0},lowerSize:{configurable:!0},upperSize:{configurable:!0},lineOffsetX:{configurable:!0},lineOffsetY:{configurable:!0},writingMode:{configurable:!0},placedOrientation:{configurable:!0},hidden:{configurable:!0},crossTileID:{configurable:!0},associatedIconIndex:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.glyphStartIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.numGlyphs.get=function(){return this._structArray.uint16[this._pos2+3]},f.vertexStartIndex.get=function(){return this._structArray.uint32[this._pos4+2]},f.lineStartIndex.get=function(){return this._structArray.uint32[this._pos4+3]},f.lineLength.get=function(){return this._structArray.uint32[this._pos4+4]},f.segment.get=function(){return this._structArray.uint16[this._pos2+10]},f.lowerSize.get=function(){return this._structArray.uint16[this._pos2+11]},f.upperSize.get=function(){return this._structArray.uint16[this._pos2+12]},f.lineOffsetX.get=function(){return this._structArray.float32[this._pos4+7]},f.lineOffsetY.get=function(){return this._structArray.float32[this._pos4+8]},f.writingMode.get=function(){return this._structArray.uint8[this._pos1+36]},f.placedOrientation.get=function(){return this._structArray.uint8[this._pos1+37]},f.placedOrientation.set=function(_){this._structArray.uint8[this._pos1+37]=_},f.hidden.get=function(){return this._structArray.uint8[this._pos1+38]},f.hidden.set=function(_){this._structArray.uint8[this._pos1+38]=_},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+10]},f.crossTileID.set=function(_){this._structArray.uint32[this._pos4+10]=_},f.associatedIconIndex.get=function(){return this._structArray.int16[this._pos2+22]},Object.defineProperties(u.prototype,f),u})(al);v.prototype.size=48;var d=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.get=function(f){return new v(this,f)},u})(Ms);sr("PlacedSymbolArray",d);var y=(function(s){function u(){s.apply(this,arguments)}s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u;var f={anchorX:{configurable:!0},anchorY:{configurable:!0},rightJustifiedTextSymbolIndex:{configurable:!0},centerJustifiedTextSymbolIndex:{configurable:!0},leftJustifiedTextSymbolIndex:{configurable:!0},verticalPlacedTextSymbolIndex:{configurable:!0},placedIconSymbolIndex:{configurable:!0},verticalPlacedIconSymbolIndex:{configurable:!0},key:{configurable:!0},textBoxStartIndex:{configurable:!0},textBoxEndIndex:{configurable:!0},verticalTextBoxStartIndex:{configurable:!0},verticalTextBoxEndIndex:{configurable:!0},iconBoxStartIndex:{configurable:!0},iconBoxEndIndex:{configurable:!0},verticalIconBoxStartIndex:{configurable:!0},verticalIconBoxEndIndex:{configurable:!0},featureIndex:{configurable:!0},numHorizontalGlyphVertices:{configurable:!0},numVerticalGlyphVertices:{configurable:!0},numIconVertices:{configurable:!0},numVerticalIconVertices:{configurable:!0},useRuntimeCollisionCircles:{configurable:!0},crossTileID:{configurable:!0},textBoxScale:{configurable:!0},textOffset0:{configurable:!0},textOffset1:{configurable:!0},collisionCircleDiameter:{configurable:!0}};return f.anchorX.get=function(){return this._structArray.int16[this._pos2+0]},f.anchorY.get=function(){return this._structArray.int16[this._pos2+1]},f.rightJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+2]},f.centerJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+3]},f.leftJustifiedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+4]},f.verticalPlacedTextSymbolIndex.get=function(){return this._structArray.int16[this._pos2+5]},f.placedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+6]},f.verticalPlacedIconSymbolIndex.get=function(){return this._structArray.int16[this._pos2+7]},f.key.get=function(){return this._structArray.uint16[this._pos2+8]},f.textBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+9]},f.textBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+10]},f.verticalTextBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+11]},f.verticalTextBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+12]},f.iconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+13]},f.iconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+14]},f.verticalIconBoxStartIndex.get=function(){return this._structArray.uint16[this._pos2+15]},f.verticalIconBoxEndIndex.get=function(){return this._structArray.uint16[this._pos2+16]},f.featureIndex.get=function(){return this._structArray.uint16[this._pos2+17]},f.numHorizontalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+18]},f.numVerticalGlyphVertices.get=function(){return this._structArray.uint16[this._pos2+19]},f.numIconVertices.get=function(){return this._structArray.uint16[this._pos2+20]},f.numVerticalIconVertices.get=function(){return this._structArray.uint16[this._pos2+21]},f.useRuntimeCollisionCircles.get=function(){return this._structArray.uint16[this._pos2+22]},f.crossTileID.get=function(){return this._structArray.uint32[this._pos4+12]},f.crossTileID.set=function(_){this._structArray.uint32[this._pos4+12]=_},f.textBoxScale.get=function(){return this._structArray.float32[this._pos4+13]},f.textOffset0.get=function(){return this._structArray.float32[this._pos4+14]},f.textOffset1.get=function(){return this._structArray.float32[this._pos4+15]},f.collisionCircleDiameter.get=function(){return this._structArray.float32[this._pos4+16]},Object.defineProperties(u.prototype,f),u})(al);y.prototype.size=68;var N=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.get=function(f){return new y(this,f)},u})(Wu);sr("SymbolInstanceArray",N);var k=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.getoffsetX=function(f){return this.float32[1*f+0]},u})(hu);sr("GlyphOffsetArray",k);var I=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.getx=function(f){return this.int16[3*f+0]},u.prototype.gety=function(f){return this.int16[3*f+1]},u.prototype.gettileUnitDistanceFromAnchor=function(f){return this.int16[3*f+2]},u})(Kl);sr("SymbolLineVertexArray",I);var U=(function(s){function u(){s.apply(this,arguments)}s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u;var f={featureIndex:{configurable:!0},sourceLayerIndex:{configurable:!0},bucketIndex:{configurable:!0}};return f.featureIndex.get=function(){return this._structArray.uint32[this._pos4+0]},f.sourceLayerIndex.get=function(){return this._structArray.uint16[this._pos2+2]},f.bucketIndex.get=function(){return this._structArray.uint16[this._pos2+3]},Object.defineProperties(u.prototype,f),u})(al);U.prototype.size=8;var $=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.get=function(f){return new U(this,f)},u})(Cf);sr("FeatureIndexArray",$);var W=ua([{name:"a_pos",components:2,type:"Int16"}],4).members,Y=function(s){s===void 0&&(s=[]),this.segments=s};function X(s,u){return 256*(s=F(Math.floor(s),0,255))+F(Math.floor(u),0,255)}Y.prototype.prepareSegment=function(s,u,f,_){var C=this.segments[this.segments.length-1];return s>Y.MAX_VERTEX_ARRAY_LENGTH&&fe("Max vertices per segment is "+Y.MAX_VERTEX_ARRAY_LENGTH+": bucket requested "+s),(!C||C.vertexLength+s>Y.MAX_VERTEX_ARRAY_LENGTH||C.sortKey!==_)&&(C={vertexOffset:u.length,primitiveOffset:f.length,vertexLength:0,primitiveLength:0},_!==void 0&&(C.sortKey=_),this.segments.push(C)),C},Y.prototype.get=function(){return this.segments},Y.prototype.destroy=function(){for(var s=0,u=this.segments;s<u.length;s+=1){var f=u[s];for(var _ in f.vaos)f.vaos[_].destroy()}},Y.simpleSegment=function(s,u,f,_){return new Y([{vertexOffset:s,primitiveOffset:u,vertexLength:f,primitiveLength:_,vaos:{},sortKey:0}])},Y.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,sr("SegmentVector",Y);var le=ua([{name:"a_pattern_from",components:4,type:"Uint16"},{name:"a_pattern_to",components:4,type:"Uint16"},{name:"a_pixel_ratio_from",components:1,type:"Uint16"},{name:"a_pixel_ratio_to",components:1,type:"Uint16"}]),ve=p((function(s){s.exports=function(u,f){var _,C,P,L,q,Z,ne,se;for(C=u.length-(_=3&u.length),P=f,q=3432918353,Z=461845907,se=0;se<C;)ne=255&u.charCodeAt(se)|(255&u.charCodeAt(++se))<<8|(255&u.charCodeAt(++se))<<16|(255&u.charCodeAt(++se))<<24,++se,P=27492+(65535&(L=5*(65535&(P=(P^=ne=(65535&(ne=(ne=(65535&ne)*q+(((ne>>>16)*q&65535)<<16)&4294967295)<<15|ne>>>17))*Z+(((ne>>>16)*Z&65535)<<16)&4294967295)<<13|P>>>19))+((5*(P>>>16)&65535)<<16)&4294967295))+((58964+(L>>>16)&65535)<<16);switch(ne=0,_){case 3:ne^=(255&u.charCodeAt(se+2))<<16;case 2:ne^=(255&u.charCodeAt(se+1))<<8;case 1:P^=ne=(65535&(ne=(ne=(65535&(ne^=255&u.charCodeAt(se)))*q+(((ne>>>16)*q&65535)<<16)&4294967295)<<15|ne>>>17))*Z+(((ne>>>16)*Z&65535)<<16)&4294967295}return P^=u.length,P=2246822507*(65535&(P^=P>>>16))+((2246822507*(P>>>16)&65535)<<16)&4294967295,P=3266489909*(65535&(P^=P>>>13))+((3266489909*(P>>>16)&65535)<<16)&4294967295,(P^=P>>>16)>>>0}})),je=p((function(s){s.exports=function(u,f){for(var _,C=u.length,P=f^C,L=0;C>=4;)_=1540483477*(65535&(_=255&u.charCodeAt(L)|(255&u.charCodeAt(++L))<<8|(255&u.charCodeAt(++L))<<16|(255&u.charCodeAt(++L))<<24))+((1540483477*(_>>>16)&65535)<<16),P=1540483477*(65535&P)+((1540483477*(P>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),C-=4,++L;switch(C){case 3:P^=(255&u.charCodeAt(L+2))<<16;case 2:P^=(255&u.charCodeAt(L+1))<<8;case 1:P=1540483477*(65535&(P^=255&u.charCodeAt(L)))+((1540483477*(P>>>16)&65535)<<16)}return P=1540483477*(65535&(P^=P>>>13))+((1540483477*(P>>>16)&65535)<<16),(P^=P>>>15)>>>0}})),de=ve,Pe=je;de.murmur3=ve,de.murmur2=Pe;var Ie=function(){this.ids=[],this.positions=[],this.indexed=!1};Ie.prototype.add=function(s,u,f,_){this.ids.push(Le(s)),this.positions.push(u,f,_)},Ie.prototype.getPositions=function(s){for(var u=Le(s),f=0,_=this.ids.length-1;f<_;){var C=f+_>>1;this.ids[C]>=u?_=C:f=C+1}for(var P=[];this.ids[f]===u;)P.push({index:this.positions[3*f],start:this.positions[3*f+1],end:this.positions[3*f+2]}),f++;return P},Ie.serialize=function(s,u){var f=new Float64Array(s.ids),_=new Uint32Array(s.positions);return(function C(P,L,q,Z){for(;q<Z;){for(var ne=P[q+Z>>1],se=q-1,he=Z+1;;){do se++;while(P[se]<ne);do he--;while(P[he]>ne);if(se>=he)break;Ge(P,se,he),Ge(L,3*se,3*he),Ge(L,3*se+1,3*he+1),Ge(L,3*se+2,3*he+2)}he-q<Z-he?(C(P,L,q,he),q=he+1):(C(P,L,he+1,Z),Z=he)}})(f,_,0,f.length-1),u&&u.push(f.buffer,_.buffer),{ids:f,positions:_}},Ie.deserialize=function(s){var u=new Ie;return u.ids=s.ids,u.positions=s.positions,u.indexed=!0,u};var Ae=Math.pow(2,53)-1;function Le(s){var u=+s;return!isNaN(u)&&u<=Ae?u:de(String(s))}function Ge(s,u,f){var _=s[u];s[u]=s[f],s[f]=_}sr("FeaturePositionMap",Ie);var Xe=function(s,u){this.gl=s.gl,this.location=u},rt=(function(s){function u(f,_){s.call(this,f,_),this.current=0}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.set=function(f){this.current!==f&&(this.current=f,this.gl.uniform1i(this.location,f))},u})(Xe),yt=(function(s){function u(f,_){s.call(this,f,_),this.current=0}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.set=function(f){this.current!==f&&(this.current=f,this.gl.uniform1f(this.location,f))},u})(Xe),mt=(function(s){function u(f,_){s.call(this,f,_),this.current=[0,0]}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]||(this.current=f,this.gl.uniform2f(this.location,f[0],f[1]))},u})(Xe),Dt=(function(s){function u(f,_){s.call(this,f,_),this.current=[0,0,0]}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]||(this.current=f,this.gl.uniform3f(this.location,f[0],f[1],f[2]))},u})(Xe),Rt=(function(s){function u(f,_){s.call(this,f,_),this.current=[0,0,0,0]}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.set=function(f){f[0]===this.current[0]&&f[1]===this.current[1]&&f[2]===this.current[2]&&f[3]===this.current[3]||(this.current=f,this.gl.uniform4f(this.location,f[0],f[1],f[2],f[3]))},u})(Xe),vr=(function(s){function u(f,_){s.call(this,f,_),this.current=Yn.transparent}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.set=function(f){f.r===this.current.r&&f.g===this.current.g&&f.b===this.current.b&&f.a===this.current.a||(this.current=f,this.gl.uniform4f(this.location,f.r,f.g,f.b,f.a))},u})(Xe),hr=new Float32Array(16),Fr=(function(s){function u(f,_){s.call(this,f,_),this.current=hr}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.set=function(f){if(f[12]!==this.current[12]||f[0]!==this.current[0])return this.current=f,void this.gl.uniformMatrix4fv(this.location,!1,f);for(var _=1;_<16;_++)if(f[_]!==this.current[_]){this.current=f,this.gl.uniformMatrix4fv(this.location,!1,f);break}},u})(Xe);function Yt(s){return[X(255*s.r,255*s.g),X(255*s.b,255*s.a)]}var Sr=function(s,u,f){this.value=s,this.uniformNames=u.map((function(_){return"u_"+_})),this.type=f};Sr.prototype.setUniform=function(s,u,f){s.set(f.constantOr(this.value))},Sr.prototype.getBinding=function(s,u,f){return this.type==="color"?new vr(s,u):new yt(s,u)};var Pr=function(s,u){this.uniformNames=u.map((function(f){return"u_"+f})),this.patternFrom=null,this.patternTo=null,this.pixelRatioFrom=1,this.pixelRatioTo=1};Pr.prototype.setConstantPatternPositions=function(s,u){this.pixelRatioFrom=u.pixelRatio,this.pixelRatioTo=s.pixelRatio,this.patternFrom=u.tlbr,this.patternTo=s.tlbr},Pr.prototype.setUniform=function(s,u,f,_){var C=_==="u_pattern_to"?this.patternTo:_==="u_pattern_from"?this.patternFrom:_==="u_pixel_ratio_to"?this.pixelRatioTo:_==="u_pixel_ratio_from"?this.pixelRatioFrom:null;C&&s.set(C)},Pr.prototype.getBinding=function(s,u,f){return f.substr(0,9)==="u_pattern"?new Rt(s,u):new yt(s,u)};var ir=function(s,u,f,_){this.expression=s,this.type=f,this.maxValue=0,this.paintVertexAttributes=u.map((function(C){return{name:"a_"+C,type:"Float32",components:f==="color"?2:1,offset:0}})),this.paintVertexArray=new _};ir.prototype.populatePaintArray=function(s,u,f,_,C){var P=this.paintVertexArray.length,L=this.expression.evaluate(new En(0),u,{},_,[],C);this.paintVertexArray.resize(s),this._setPaintValue(P,s,L)},ir.prototype.updatePaintArray=function(s,u,f,_){var C=this.expression.evaluate({zoom:0},f,_);this._setPaintValue(s,u,C)},ir.prototype._setPaintValue=function(s,u,f){if(this.type==="color")for(var _=Yt(f),C=s;C<u;C++)this.paintVertexArray.emplace(C,_[0],_[1]);else{for(var P=s;P<u;P++)this.paintVertexArray.emplace(P,f);this.maxValue=Math.max(this.maxValue,Math.abs(f))}},ir.prototype.upload=function(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},ir.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()};var Ar=function(s,u,f,_,C,P){this.expression=s,this.uniformNames=u.map((function(L){return"u_"+L+"_t"})),this.type=f,this.useIntegerZoom=_,this.zoom=C,this.maxValue=0,this.paintVertexAttributes=u.map((function(L){return{name:"a_"+L,type:"Float32",components:f==="color"?4:2,offset:0}})),this.paintVertexArray=new P};Ar.prototype.populatePaintArray=function(s,u,f,_,C){var P=this.expression.evaluate(new En(this.zoom),u,{},_,[],C),L=this.expression.evaluate(new En(this.zoom+1),u,{},_,[],C),q=this.paintVertexArray.length;this.paintVertexArray.resize(s),this._setPaintValue(q,s,P,L)},Ar.prototype.updatePaintArray=function(s,u,f,_){var C=this.expression.evaluate({zoom:this.zoom},f,_),P=this.expression.evaluate({zoom:this.zoom+1},f,_);this._setPaintValue(s,u,C,P)},Ar.prototype._setPaintValue=function(s,u,f,_){if(this.type==="color")for(var C=Yt(f),P=Yt(_),L=s;L<u;L++)this.paintVertexArray.emplace(L,C[0],C[1],P[0],P[1]);else{for(var q=s;q<u;q++)this.paintVertexArray.emplace(q,f,_);this.maxValue=Math.max(this.maxValue,Math.abs(f),Math.abs(_))}},Ar.prototype.upload=function(s){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=s.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent))},Ar.prototype.destroy=function(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()},Ar.prototype.setUniform=function(s,u){var f=this.useIntegerZoom?Math.floor(u.zoom):u.zoom,_=F(this.expression.interpolationFactor(f,this.zoom,this.zoom+1),0,1);s.set(_)},Ar.prototype.getBinding=function(s,u,f){return new yt(s,u)};var Gr=function(s,u,f,_,C,P){this.expression=s,this.type=u,this.useIntegerZoom=f,this.zoom=_,this.layerId=P,this.zoomInPaintVertexArray=new C,this.zoomOutPaintVertexArray=new C};Gr.prototype.populatePaintArray=function(s,u,f){var _=this.zoomInPaintVertexArray.length;this.zoomInPaintVertexArray.resize(s),this.zoomOutPaintVertexArray.resize(s),this._setPaintValues(_,s,u.patterns&&u.patterns[this.layerId],f)},Gr.prototype.updatePaintArray=function(s,u,f,_,C){this._setPaintValues(s,u,f.patterns&&f.patterns[this.layerId],C)},Gr.prototype._setPaintValues=function(s,u,f,_){if(_&&f){var C=_[f.min],P=_[f.mid],L=_[f.max];if(C&&P&&L)for(var q=s;q<u;q++)this.zoomInPaintVertexArray.emplace(q,P.tl[0],P.tl[1],P.br[0],P.br[1],C.tl[0],C.tl[1],C.br[0],C.br[1],P.pixelRatio,C.pixelRatio),this.zoomOutPaintVertexArray.emplace(q,P.tl[0],P.tl[1],P.br[0],P.br[1],L.tl[0],L.tl[1],L.br[0],L.br[1],P.pixelRatio,L.pixelRatio)}},Gr.prototype.upload=function(s){this.zoomInPaintVertexArray&&this.zoomInPaintVertexArray.arrayBuffer&&this.zoomOutPaintVertexArray&&this.zoomOutPaintVertexArray.arrayBuffer&&(this.zoomInPaintVertexBuffer=s.createVertexBuffer(this.zoomInPaintVertexArray,le.members,this.expression.isStateDependent),this.zoomOutPaintVertexBuffer=s.createVertexBuffer(this.zoomOutPaintVertexArray,le.members,this.expression.isStateDependent))},Gr.prototype.destroy=function(){this.zoomOutPaintVertexBuffer&&this.zoomOutPaintVertexBuffer.destroy(),this.zoomInPaintVertexBuffer&&this.zoomInPaintVertexBuffer.destroy()};var Tr=function(s,u,f){this.binders={},this._buffers=[];var _=[];for(var C in s.paint._values)if(f(C)){var P=s.paint.get(C);if(P instanceof Wi&&Kn(P.property.specification)){var L=vn(C,s.type),q=P.value,Z=P.property.specification.type,ne=P.property.useIntegerZoom,se=P.property.specification["property-type"],he=se==="cross-faded"||se==="cross-faded-data-driven";if(q.kind==="constant")this.binders[C]=he?new Pr(q.value,L):new Sr(q.value,L,Z),_.push("/u_"+C);else if(q.kind==="source"||he){var we=Jn(C,Z,"source");this.binders[C]=he?new Gr(q,Z,ne,u,we,s.id):new ir(q,L,Z,we),_.push("/a_"+C)}else{var Ee=Jn(C,Z,"composite");this.binders[C]=new Ar(q,L,Z,ne,u,Ee),_.push("/z_"+C)}}}this.cacheKey=_.sort().join("")};Tr.prototype.getMaxValue=function(s){var u=this.binders[s];return u instanceof ir||u instanceof Ar?u.maxValue:0},Tr.prototype.populatePaintArrays=function(s,u,f,_,C){for(var P in this.binders){var L=this.binders[P];(L instanceof ir||L instanceof Ar||L instanceof Gr)&&L.populatePaintArray(s,u,f,_,C)}},Tr.prototype.setConstantPatternPositions=function(s,u){for(var f in this.binders){var _=this.binders[f];_ instanceof Pr&&_.setConstantPatternPositions(s,u)}},Tr.prototype.updatePaintArrays=function(s,u,f,_,C){var P=!1;for(var L in s)for(var q=0,Z=u.getPositions(L);q<Z.length;q+=1){var ne=Z[q],se=f.feature(ne.index);for(var he in this.binders){var we=this.binders[he];if((we instanceof ir||we instanceof Ar||we instanceof Gr)&&we.expression.isStateDependent===!0){var Ee=_.paint.get(he);we.expression=Ee.value,we.updatePaintArray(ne.start,ne.end,se,s[L],C),P=!0}}}return P},Tr.prototype.defines=function(){var s=[];for(var u in this.binders){var f=this.binders[u];(f instanceof Sr||f instanceof Pr)&&s.push.apply(s,f.uniformNames.map((function(_){return"#define HAS_UNIFORM_"+_})))}return s},Tr.prototype.getBinderAttributes=function(){var s=[];for(var u in this.binders){var f=this.binders[u];if(f instanceof ir||f instanceof Ar)for(var _=0;_<f.paintVertexAttributes.length;_++)s.push(f.paintVertexAttributes[_].name);else if(f instanceof Gr)for(var C=0;C<le.members.length;C++)s.push(le.members[C].name)}return s},Tr.prototype.getBinderUniforms=function(){var s=[];for(var u in this.binders){var f=this.binders[u];if(f instanceof Sr||f instanceof Pr||f instanceof Ar)for(var _=0,C=f.uniformNames;_<C.length;_+=1)s.push(C[_])}return s},Tr.prototype.getPaintVertexBuffers=function(){return this._buffers},Tr.prototype.getUniforms=function(s,u){var f=[];for(var _ in this.binders){var C=this.binders[_];if(C instanceof Sr||C instanceof Pr||C instanceof Ar)for(var P=0,L=C.uniformNames;P<L.length;P+=1){var q=L[P];if(u[q]){var Z=C.getBinding(s,u[q],q);f.push({name:q,property:_,binding:Z})}}}return f},Tr.prototype.setUniforms=function(s,u,f,_){for(var C=0,P=u;C<P.length;C+=1){var L=P[C],q=L.name,Z=L.property;this.binders[Z].setUniform(L.binding,_,f.get(Z),q)}},Tr.prototype.updatePaintBuffers=function(s){for(var u in this._buffers=[],this.binders){var f=this.binders[u];if(s&&f instanceof Gr){var _=s.fromScale===2?f.zoomInPaintVertexBuffer:f.zoomOutPaintVertexBuffer;_&&this._buffers.push(_)}else(f instanceof ir||f instanceof Ar)&&f.paintVertexBuffer&&this._buffers.push(f.paintVertexBuffer)}},Tr.prototype.upload=function(s){for(var u in this.binders){var f=this.binders[u];(f instanceof ir||f instanceof Ar||f instanceof Gr)&&f.upload(s)}this.updatePaintBuffers()},Tr.prototype.destroy=function(){for(var s in this.binders){var u=this.binders[s];(u instanceof ir||u instanceof Ar||u instanceof Gr)&&u.destroy()}};var Rr=function(s,u,f){f===void 0&&(f=function(){return!0}),this.programConfigurations={};for(var _=0,C=s;_<C.length;_+=1){var P=C[_];this.programConfigurations[P.id]=new Tr(P,u,f)}this.needsUpload=!1,this._featureMap=new Ie,this._bufferOffset=0};function vn(s,u){return{"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"line-gap-width":["gapwidth"],"line-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"],"fill-extrusion-pattern":["pattern_to","pattern_from","pixel_ratio_to","pixel_ratio_from"]}[s]||[s.replace(u+"-","").replace(/-/g,"_")]}function Jn(s,u,f){var _={color:{source:du,composite:fu},number:{source:hu,composite:du}},C=(function(P){return{"line-pattern":{source:no,composite:no},"fill-pattern":{source:no,composite:no},"fill-extrusion-pattern":{source:no,composite:no}}[P]})(s);return C&&C[f]||_[u][f]}Rr.prototype.populatePaintArrays=function(s,u,f,_,C,P){for(var L in this.programConfigurations)this.programConfigurations[L].populatePaintArrays(s,u,_,C,P);u.id!==void 0&&this._featureMap.add(u.id,f,this._bufferOffset,s),this._bufferOffset=s,this.needsUpload=!0},Rr.prototype.updatePaintArrays=function(s,u,f,_){for(var C=0,P=f;C<P.length;C+=1){var L=P[C];this.needsUpload=this.programConfigurations[L.id].updatePaintArrays(s,this._featureMap,u,L,_)||this.needsUpload}},Rr.prototype.get=function(s){return this.programConfigurations[s]},Rr.prototype.upload=function(s){if(this.needsUpload){for(var u in this.programConfigurations)this.programConfigurations[u].upload(s);this.needsUpload=!1}},Rr.prototype.destroy=function(){for(var s in this.programConfigurations)this.programConfigurations[s].destroy()},sr("ConstantBinder",Sr),sr("CrossFadedConstantBinder",Pr),sr("SourceExpressionBinder",ir),sr("CrossFadedCompositeBinder",Gr),sr("CompositeExpressionBinder",Ar),sr("ProgramConfiguration",Tr,{omit:["_buffers"]}),sr("ProgramConfigurationSet",Rr);var Fi=Math.pow(2,14)-1,ui=-Fi-1;function In(s){for(var u=8192/s.extent,f=s.loadGeometry(),_=0;_<f.length;_++)for(var C=f[_],P=0;P<C.length;P++){var L=C[P],q=Math.round(L.x*u),Z=Math.round(L.y*u);L.x=F(q,ui,Fi),L.y=F(Z,ui,Fi),(q<L.x||q>L.x+1||Z<L.y||Z>L.y+1)&&fe("Geometry exceeds allowed extent, reduce your vector tile buffer size")}return f}function Qn(s,u){return{type:s.type,id:s.id,properties:s.properties,geometry:u?In(s):[]}}function us(s,u,f,_,C){s.emplaceBack(2*u+(_+1)/2,2*f+(C+1)/2)}var rs=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((function(u){return u.id})),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new Bs,this.indexArray=new Oo,this.segments=new Y,this.programConfigurations=new Rr(s.layers,s.zoom),this.stateDependentLayerIds=this.layers.filter((function(u){return u.isStateDependent()})).map((function(u){return u.id}))};function ns(s,u){for(var f=0;f<s.length;f++)if(jo(u,s[f]))return!0;for(var _=0;_<u.length;_++)if(jo(s,u[_]))return!0;return!!ll(s,u)}function vi(s,u,f){return!!jo(s,u)||!!io(u,s,f)}function Yi(s,u){if(s.length===1)return ds(u,s[0]);for(var f=0;f<u.length;f++)for(var _=u[f],C=0;C<_.length;C++)if(jo(s,_[C]))return!0;for(var P=0;P<s.length;P++)if(ds(u,s[P]))return!0;for(var L=0;L<u.length;L++)if(ll(s,u[L]))return!0;return!1}function Ds(s,u,f){if(s.length>1){if(ll(s,u))return!0;for(var _=0;_<u.length;_++)if(io(u[_],s,f))return!0}for(var C=0;C<s.length;C++)if(io(s[C],u,f))return!0;return!1}function ll(s,u){if(s.length===0||u.length===0)return!1;for(var f=0;f<s.length-1;f++)for(var _=s[f],C=s[f+1],P=0;P<u.length-1;P++)if(Zi(_,C,u[P],u[P+1]))return!0;return!1}function Zi(s,u,f,_){return ye(s,f,_)!==ye(u,f,_)&&ye(s,u,f)!==ye(s,u,_)}function io(s,u,f){var _=f*f;if(u.length===1)return s.distSqr(u[0])<_;for(var C=1;C<u.length;C++)if(za(s,u[C-1],u[C])<_)return!0;return!1}function za(s,u,f){var _=u.distSqr(f);if(_===0)return s.distSqr(u);var C=((s.x-u.x)*(f.x-u.x)+(s.y-u.y)*(f.y-u.y))/_;return s.distSqr(C<0?u:C>1?f:f.sub(u)._mult(C)._add(u))}function ds(s,u){for(var f,_,C,P=!1,L=0;L<s.length;L++)for(var q=0,Z=(f=s[L]).length-1;q<f.length;Z=q++)(_=f[q]).y>u.y!=(C=f[Z]).y>u.y&&u.x<(C.x-_.x)*(u.y-_.y)/(C.y-_.y)+_.x&&(P=!P);return P}function jo(s,u){for(var f=!1,_=0,C=s.length-1;_<s.length;C=_++){var P=s[_],L=s[C];P.y>u.y!=L.y>u.y&&u.x<(L.x-P.x)*(u.y-P.y)/(L.y-P.y)+P.x&&(f=!f)}return f}function so(s,u,f){var _=f[0],C=f[2];if(s.x<_.x&&u.x<_.x||s.x>C.x&&u.x>C.x||s.y<_.y&&u.y<_.y||s.y>C.y&&u.y>C.y)return!1;var P=ye(s,u,f[0]);return P!==ye(s,u,f[1])||P!==ye(s,u,f[2])||P!==ye(s,u,f[3])}function hn(s,u,f){var _=u.paint.get(s).value;return _.kind==="constant"?_.value:f.programConfigurations.get(u.id).getMaxValue(s)}function sn(s){return Math.sqrt(s[0]*s[0]+s[1]*s[1])}function Ni(s,u,f,_,C){if(!u[0]&&!u[1])return s;var P=j.convert(u)._mult(C);f==="viewport"&&P._rotate(-_);for(var L=[],q=0;q<s.length;q++)L.push(s[q].sub(P));return L}rs.prototype.populate=function(s,u,f){var _=this.layers[0],C=[],P=null;_.type==="circle"&&(P=_.layout.get("circle-sort-key"));for(var L=0,q=s;L<q.length;L+=1){var Z=q[L],ne=Z.feature,se=Z.id,he=Z.index,we=Z.sourceLayerIndex,Ee=this.layers[0]._featureFilter.needGeometry,$e=Qn(ne,Ee);if(this.layers[0]._featureFilter.filter(new En(this.zoom),$e,f)){var He=P?P.evaluate($e,{},f):void 0,st={id:se,properties:ne.properties,type:ne.type,sourceLayerIndex:we,index:he,geometry:Ee?$e.geometry:In(ne),patterns:{},sortKey:He};C.push(st)}}P&&C.sort((function(ur,Br){return ur.sortKey-Br.sortKey}));for(var Je=0,ft=C;Je<ft.length;Je+=1){var gt=ft[Je],wt=gt.geometry,Nt=gt.index,Bt=gt.sourceLayerIndex,rr=s[Nt].feature;this.addFeature(gt,wt,Nt,f),u.featureIndex.insert(rr,wt,Nt,Bt,this.index)}},rs.prototype.update=function(s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,f)},rs.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},rs.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},rs.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,W),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},rs.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},rs.prototype.addFeature=function(s,u,f,_){for(var C=0,P=u;C<P.length;C+=1)for(var L=0,q=P[C];L<q.length;L+=1){var Z=q[L],ne=Z.x,se=Z.y;if(!(ne<0||ne>=8192||se<0||se>=8192)){var he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,s.sortKey),we=he.vertexLength;us(this.layoutVertexArray,ne,se,-1,-1),us(this.layoutVertexArray,ne,se,1,-1),us(this.layoutVertexArray,ne,se,1,1),us(this.layoutVertexArray,ne,se,-1,1),this.indexArray.emplaceBack(we,we+1,we+2),this.indexArray.emplaceBack(we,we+3,we+2),he.vertexLength+=4,he.primitiveLength+=2}}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,{},_)},sr("CircleBucket",rs,{omit:["layers"]});var No=new gn({"circle-sort-key":new Er(ke.layout_circle["circle-sort-key"])}),Il={paint:new gn({"circle-radius":new Er(ke.paint_circle["circle-radius"]),"circle-color":new Er(ke.paint_circle["circle-color"]),"circle-blur":new Er(ke.paint_circle["circle-blur"]),"circle-opacity":new Er(ke.paint_circle["circle-opacity"]),"circle-translate":new qr(ke.paint_circle["circle-translate"]),"circle-translate-anchor":new qr(ke.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new qr(ke.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new qr(ke.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Er(ke.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Er(ke.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Er(ke.paint_circle["circle-stroke-opacity"])}),layout:No},Mn=typeof Float32Array<"u"?Float32Array:Array;function ao(s){return s[0]=1,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=1,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=1,s[11]=0,s[12]=0,s[13]=0,s[14]=0,s[15]=1,s}function Qs(s,u,f){var _=u[0],C=u[1],P=u[2],L=u[3],q=u[4],Z=u[5],ne=u[6],se=u[7],he=u[8],we=u[9],Ee=u[10],$e=u[11],He=u[12],st=u[13],Je=u[14],ft=u[15],gt=f[0],wt=f[1],Nt=f[2],Bt=f[3];return s[0]=gt*_+wt*q+Nt*he+Bt*He,s[1]=gt*C+wt*Z+Nt*we+Bt*st,s[2]=gt*P+wt*ne+Nt*Ee+Bt*Je,s[3]=gt*L+wt*se+Nt*$e+Bt*ft,s[4]=(gt=f[4])*_+(wt=f[5])*q+(Nt=f[6])*he+(Bt=f[7])*He,s[5]=gt*C+wt*Z+Nt*we+Bt*st,s[6]=gt*P+wt*ne+Nt*Ee+Bt*Je,s[7]=gt*L+wt*se+Nt*$e+Bt*ft,s[8]=(gt=f[8])*_+(wt=f[9])*q+(Nt=f[10])*he+(Bt=f[11])*He,s[9]=gt*C+wt*Z+Nt*we+Bt*st,s[10]=gt*P+wt*ne+Nt*Ee+Bt*Je,s[11]=gt*L+wt*se+Nt*$e+Bt*ft,s[12]=(gt=f[12])*_+(wt=f[13])*q+(Nt=f[14])*he+(Bt=f[15])*He,s[13]=gt*C+wt*Z+Nt*we+Bt*st,s[14]=gt*P+wt*ne+Nt*Ee+Bt*Je,s[15]=gt*L+wt*se+Nt*$e+Bt*ft,s}Math.hypot||(Math.hypot=function(){for(var s=arguments,u=0,f=arguments.length;f--;)u+=s[f]*s[f];return Math.sqrt(u)});var cl,Wh=Qs;function Vi(s,u,f){var _=u[0],C=u[1],P=u[2],L=u[3];return s[0]=f[0]*_+f[4]*C+f[8]*P+f[12]*L,s[1]=f[1]*_+f[5]*C+f[9]*P+f[13]*L,s[2]=f[2]*_+f[6]*C+f[10]*P+f[14]*L,s[3]=f[3]*_+f[7]*C+f[11]*P+f[15]*L,s}cl=new Mn(3),Mn!=Float32Array&&(cl[0]=0,cl[1]=0,cl[2]=0),(function(){var s=new Mn(4);Mn!=Float32Array&&(s[0]=0,s[1]=0,s[2]=0,s[3]=0)})();var kf=((function(){var s=new Mn(2);Mn!=Float32Array&&(s[0]=0,s[1]=0)})(),(function(s){function u(f){s.call(this,f,Il)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.createBucket=function(f){return new rs(f)},u.prototype.queryRadius=function(f){var _=f;return hn("circle-radius",this,_)+hn("circle-stroke-width",this,_)+sn(this.paint.get("circle-translate"))},u.prototype.queryIntersectsFeature=function(f,_,C,P,L,q,Z,ne){for(var se=Ni(f,this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),q.angle,Z),he=this.paint.get("circle-radius").evaluate(_,C)+this.paint.get("circle-stroke-width").evaluate(_,C),we=this.paint.get("circle-pitch-alignment")==="map",Ee=we?se:(function(rr,ur){return rr.map((function(Br){return Yu(Br,ur)}))})(se,ne),$e=we?he*Z:he,He=0,st=P;He<st.length;He+=1)for(var Je=0,ft=st[He];Je<ft.length;Je+=1){var gt=ft[Je],wt=we?gt:Yu(gt,ne),Nt=$e,Bt=Vi([],[gt.x,gt.y,0,1],ne);if(this.paint.get("circle-pitch-scale")==="viewport"&&this.paint.get("circle-pitch-alignment")==="map"?Nt*=Bt[3]/q.cameraToCenterDistance:this.paint.get("circle-pitch-scale")==="map"&&this.paint.get("circle-pitch-alignment")==="viewport"&&(Nt*=q.cameraToCenterDistance/Bt[3]),vi(Ee,wt,Nt))return!0}return!1},u})(Is));function Yu(s,u){var f=Vi([],[s.x,s.y,0,1],u);return new j(f[0]/f[3],f[1]/f[3])}var oh=(function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u})(rs);function ul(s,u,f,_){var C=u.width,P=u.height;if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==C*P*f)throw new RangeError("mismatched image size")}else _=new Uint8Array(C*P*f);return s.width=C,s.height=P,s.data=_,s}function Yh(s,u,f){var _=u.width,C=u.height;if(_!==s.width||C!==s.height){var P=ul({},{width:_,height:C},f);Ef(s,P,{x:0,y:0},{x:0,y:0},{width:Math.min(s.width,_),height:Math.min(s.height,C)},f),s.width=_,s.height=C,s.data=P.data}}function Ef(s,u,f,_,C,P){if(C.width===0||C.height===0)return u;if(C.width>s.width||C.height>s.height||f.x>s.width-C.width||f.y>s.height-C.height)throw new RangeError("out of range source coordinates for image copy");if(C.width>u.width||C.height>u.height||_.x>u.width-C.width||_.y>u.height-C.height)throw new RangeError("out of range destination coordinates for image copy");for(var L=s.data,q=u.data,Z=0;Z<C.height;Z++)for(var ne=((f.y+Z)*s.width+f.x)*P,se=((_.y+Z)*u.width+_.x)*P,he=0;he<C.width*P;he++)q[se+he]=L[ne+he];return u}sr("HeatmapBucket",oh,{omit:["layers"]});var Zu=function(s,u){ul(this,s,1,u)};Zu.prototype.resize=function(s){Yh(this,s,1)},Zu.prototype.clone=function(){return new Zu({width:this.width,height:this.height},new Uint8Array(this.data))},Zu.copy=function(s,u,f,_,C){Ef(s,u,f,_,C,1)};var oo=function(s,u){ul(this,s,4,u)};oo.prototype.resize=function(s){Yh(this,s,4)},oo.prototype.replace=function(s,u){u?this.data.set(s):this.data=s instanceof Uint8ClampedArray?new Uint8Array(s.buffer):s},oo.prototype.clone=function(){return new oo({width:this.width,height:this.height},new Uint8Array(this.data))},oo.copy=function(s,u,f,_,C){Ef(s,u,f,_,C,4)},sr("AlphaImage",Zu),sr("RGBAImage",oo);var So={paint:new gn({"heatmap-radius":new Er(ke.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Er(ke.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new qr(ke.paint_heatmap["heatmap-intensity"]),"heatmap-color":new gi(ke.paint_heatmap["heatmap-color"]),"heatmap-opacity":new qr(ke.paint_heatmap["heatmap-opacity"])})};function da(s){var u={},f=s.resolution||256,_=s.clips?s.clips.length:1,C=s.image||new oo({width:f,height:_}),P=function($e,He,st){u[s.evaluationKey]=st;var Je=s.expression.evaluate(u);C.data[$e+He+0]=Math.floor(255*Je.r/Je.a),C.data[$e+He+1]=Math.floor(255*Je.g/Je.a),C.data[$e+He+2]=Math.floor(255*Je.b/Je.a),C.data[$e+He+3]=Math.floor(255*Je.a)};if(s.clips)for(var L=0,q=0;L<_;++L,q+=4*f)for(var Z=0,ne=0;Z<f;Z++,ne+=4){var se=Z/(f-1),he=s.clips[L];P(q,ne,he.start*(1-se)+he.end*se)}else for(var we=0,Ee=0;we<f;we++,Ee+=4)P(0,Ee,we/(f-1));return C}var Tf=(function(s){function u(f){s.call(this,f,So),this._updateColorRamp()}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.createBucket=function(f){return new oh(f)},u.prototype._handleSpecialPaintPropertyUpdate=function(f){f==="heatmap-color"&&this._updateColorRamp()},u.prototype._updateColorRamp=function(){this.colorRamp=da({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null},u.prototype.resize=function(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)},u.prototype.queryRadius=function(){return 0},u.prototype.queryIntersectsFeature=function(){return!1},u.prototype.hasOffscreenPass=function(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"},u})(Is),Ed={paint:new gn({"hillshade-illumination-direction":new qr(ke.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new qr(ke.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new qr(ke.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new qr(ke.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new qr(ke.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new qr(ke.paint_hillshade["hillshade-accent-color"])})},Zh=(function(s){function u(f){s.call(this,f,Ed)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.hasOffscreenPass=function(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"},u})(Is),lh=ua([{name:"a_pos",components:2,type:"Int16"}],4).members,Lc=Ku,jp=Ku;function Ku(s,u,f){f=f||2;var _,C,P,L,q,Z,ne,se=u&&u.length,he=se?u[0]*f:s.length,we=Pf(s,0,he,f,!0),Ee=[];if(!we||we.next===we.prev)return Ee;if(se&&(we=(function(He,st,Je,ft){var gt,wt,Nt,Bt=[];for(gt=0,wt=st.length;gt<wt;gt++)(Nt=Pf(He,st[gt]*ft,gt<wt-1?st[gt+1]*ft:He.length,ft,!1))===Nt.next&&(Nt.steiner=!0),Bt.push(Vm(Nt));for(Bt.sort(Td),gt=0;gt<Bt.length;gt++)Fg(Bt[gt],Je),Je=pu(Je,Je.next);return Je})(s,u,we,f)),s.length>80*f){_=P=s[0],C=L=s[1];for(var $e=f;$e<he;$e+=f)(q=s[$e])<_&&(_=q),(Z=s[$e+1])<C&&(C=Z),q>P&&(P=q),Z>L&&(L=Z);ne=(ne=Math.max(P-_,L-C))!==0?1/ne:0}return vc(we,Ee,f,_,C,ne),Ee}function Pf(s,u,f,_,C){var P,L;if(C===Md(s,u,f,_)>0)for(P=u;P<f;P+=_)L=Id(P,s[P],s[P+1],L);else for(P=f-_;P>=u;P-=_)L=Id(P,s[P],s[P+1],L);return L&&Pd(L,L.next)&&(Kh(L),L=L.next),L}function pu(s,u){if(!s)return s;u||(u=s);var f,_=s;do if(f=!1,_.steiner||!Pd(_,_.next)&&Os(_.prev,_,_.next)!==0)_=_.next;else{if(Kh(_),(_=u=_.prev)===_.next)break;f=!0}while(f||_!==u);return u}function vc(s,u,f,_,C,P,L){if(s){!L&&P&&(function(se,he,we,Ee){var $e=se;do $e.z===null&&($e.z=Np($e.x,$e.y,he,we,Ee)),$e.prevZ=$e.prev,$e.nextZ=$e.next,$e=$e.next;while($e!==se);$e.prevZ.nextZ=null,$e.prevZ=null,(function(He){var st,Je,ft,gt,wt,Nt,Bt,rr,ur=1;do{for(Je=He,He=null,wt=null,Nt=0;Je;){for(Nt++,ft=Je,Bt=0,st=0;st<ur&&(Bt++,ft=ft.nextZ);st++);for(rr=ur;Bt>0||rr>0&&ft;)Bt!==0&&(rr===0||!ft||Je.z<=ft.z)?(gt=Je,Je=Je.nextZ,Bt--):(gt=ft,ft=ft.nextZ,rr--),wt?wt.nextZ=gt:He=gt,gt.prevZ=wt,wt=gt;Je=ft}wt.nextZ=null,ur*=2}while(Nt>1)})($e)})(s,_,C,P);for(var q,Z,ne=s;s.prev!==s.next;)if(q=s.prev,Z=s.next,P?Um(s,_,C,P):Bm(s))u.push(q.i/f),u.push(s.i/f),u.push(Z.i/f),Kh(s),s=Z.next,ne=Z.next;else if((s=Z)===ne){L?L===1?vc(s=zg(pu(s),u,f),u,f,_,C,P,2):L===2&&qm(s,u,f,_,C,P):vc(pu(s),u,f,_,C,P,1);break}}}function Bm(s){var u=s.prev,f=s,_=s.next;if(Os(u,f,_)>=0)return!1;for(var C=s.next.next;C!==s.prev;){if(ch(u.x,u.y,f.x,f.y,_.x,_.y,C.x,C.y)&&Os(C.prev,C,C.next)>=0)return!1;C=C.next}return!0}function Um(s,u,f,_){var C=s.prev,P=s,L=s.next;if(Os(C,P,L)>=0)return!1;for(var q=C.x>P.x?C.x>L.x?C.x:L.x:P.x>L.x?P.x:L.x,Z=C.y>P.y?C.y>L.y?C.y:L.y:P.y>L.y?P.y:L.y,ne=Np(C.x<P.x?C.x<L.x?C.x:L.x:P.x<L.x?P.x:L.x,C.y<P.y?C.y<L.y?C.y:L.y:P.y<L.y?P.y:L.y,u,f,_),se=Np(q,Z,u,f,_),he=s.prevZ,we=s.nextZ;he&&he.z>=ne&&we&&we.z<=se;){if(he!==s.prev&&he!==s.next&&ch(C.x,C.y,P.x,P.y,L.x,L.y,he.x,he.y)&&Os(he.prev,he,he.next)>=0||(he=he.prevZ,we!==s.prev&&we!==s.next&&ch(C.x,C.y,P.x,P.y,L.x,L.y,we.x,we.y)&&Os(we.prev,we,we.next)>=0))return!1;we=we.nextZ}for(;he&&he.z>=ne;){if(he!==s.prev&&he!==s.next&&ch(C.x,C.y,P.x,P.y,L.x,L.y,he.x,he.y)&&Os(he.prev,he,he.next)>=0)return!1;he=he.prevZ}for(;we&&we.z<=se;){if(we!==s.prev&&we!==s.next&&ch(C.x,C.y,P.x,P.y,L.x,L.y,we.x,we.y)&&Os(we.prev,we,we.next)>=0)return!1;we=we.nextZ}return!0}function zg(s,u,f){var _=s;do{var C=_.prev,P=_.next.next;!Pd(C,P)&&mu(C,_,_.next,P)&&Rd(C,P)&&Rd(P,C)&&(u.push(C.i/f),u.push(_.i/f),u.push(P.i/f),Kh(_),Kh(_.next),_=s=P),_=_.next}while(_!==s);return pu(_)}function qm(s,u,f,_,C,P){var L=s;do{for(var q=L.next.next;q!==L.prev;){if(L.i!==q.i&&uh(L,q)){var Z=Rf(L,q);return L=pu(L,L.next),Z=pu(Z,Z.next),vc(L,u,f,_,C,P),void vc(Z,u,f,_,C,P)}q=q.next}L=L.next}while(L!==s)}function Td(s,u){return s.x-u.x}function Fg(s,u){if(u=(function(_,C){var P,L=C,q=_.x,Z=_.y,ne=-1/0;do{if(Z<=L.y&&Z>=L.next.y&&L.next.y!==L.y){var se=L.x+(Z-L.y)*(L.next.x-L.x)/(L.next.y-L.y);if(se<=q&&se>ne){if(ne=se,se===q){if(Z===L.y)return L;if(Z===L.next.y)return L.next}P=L.x<L.next.x?L:L.next}}L=L.next}while(L!==C);if(!P)return null;if(q===ne)return P;var he,we=P,Ee=P.x,$e=P.y,He=1/0;L=P;do q>=L.x&&L.x>=Ee&&q!==L.x&&ch(Z<$e?q:ne,Z,Ee,$e,Z<$e?ne:q,Z,L.x,L.y)&&(he=Math.abs(Z-L.y)/(q-L.x),Rd(L,_)&&(he<He||he===He&&(L.x>P.x||L.x===P.x&&Bg(P,L)))&&(P=L,He=he)),L=L.next;while(L!==we);return P})(s,u)){var f=Rf(u,s);pu(u,u.next),pu(f,f.next)}}function Bg(s,u){return Os(s.prev,s,u.prev)<0&&Os(u.next,s,s.next)<0}function Np(s,u,f,_,C){return(s=1431655765&((s=858993459&((s=252645135&((s=16711935&((s=32767*(s-f)*C)|s<<8))|s<<4))|s<<2))|s<<1))|(u=1431655765&((u=858993459&((u=252645135&((u=16711935&((u=32767*(u-_)*C)|u<<8))|u<<4))|u<<2))|u<<1))<<1}function Vm(s){var u=s,f=s;do(u.x<f.x||u.x===f.x&&u.y<f.y)&&(f=u),u=u.next;while(u!==s);return f}function ch(s,u,f,_,C,P,L,q){return(C-L)*(u-q)-(s-L)*(P-q)>=0&&(s-L)*(_-q)-(f-L)*(u-q)>=0&&(f-L)*(P-q)-(C-L)*(_-q)>=0}function uh(s,u){return s.next.i!==u.i&&s.prev.i!==u.i&&!(function(f,_){var C=f;do{if(C.i!==f.i&&C.next.i!==f.i&&C.i!==_.i&&C.next.i!==_.i&&mu(C,C.next,f,_))return!0;C=C.next}while(C!==f);return!1})(s,u)&&(Rd(s,u)&&Rd(u,s)&&(function(f,_){var C=f,P=!1,L=(f.x+_.x)/2,q=(f.y+_.y)/2;do C.y>q!=C.next.y>q&&C.next.y!==C.y&&L<(C.next.x-C.x)*(q-C.y)/(C.next.y-C.y)+C.x&&(P=!P),C=C.next;while(C!==f);return P})(s,u)&&(Os(s.prev,s,u.prev)||Os(s,u.prev,u))||Pd(s,u)&&Os(s.prev,s,s.next)>0&&Os(u.prev,u,u.next)>0)}function Os(s,u,f){return(u.y-s.y)*(f.x-u.x)-(u.x-s.x)*(f.y-u.y)}function Pd(s,u){return s.x===u.x&&s.y===u.y}function mu(s,u,f,_){var C=Dc(Os(s,u,f)),P=Dc(Os(s,u,_)),L=Dc(Os(f,_,s)),q=Dc(Os(f,_,u));return C!==P&&L!==q||!(C!==0||!Mc(s,f,u))||!(P!==0||!Mc(s,_,u))||!(L!==0||!Mc(f,s,_))||!(q!==0||!Mc(f,u,_))}function Mc(s,u,f){return u.x<=Math.max(s.x,f.x)&&u.x>=Math.min(s.x,f.x)&&u.y<=Math.max(s.y,f.y)&&u.y>=Math.min(s.y,f.y)}function Dc(s){return s>0?1:s<0?-1:0}function Rd(s,u){return Os(s.prev,s,s.next)<0?Os(s,u,s.next)>=0&&Os(s,s.prev,u)>=0:Os(s,u,s.prev)<0||Os(s,s.next,u)<0}function Rf(s,u){var f=new Ld(s.i,s.x,s.y),_=new Ld(u.i,u.x,u.y),C=s.next,P=u.prev;return s.next=u,u.prev=s,f.next=C,C.prev=f,_.next=f,f.prev=_,P.next=_,_.prev=P,_}function Id(s,u,f,_){var C=new Ld(s,u,f);return _?(C.next=_.next,C.prev=_,_.next.prev=C,_.next=C):(C.prev=C,C.next=C),C}function Kh(s){s.next.prev=s.prev,s.prev.next=s.next,s.prevZ&&(s.prevZ.nextZ=s.nextZ),s.nextZ&&(s.nextZ.prevZ=s.prevZ)}function Ld(s,u,f){this.i=s,this.x=u,this.y=f,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function Md(s,u,f,_){for(var C=0,P=u,L=f-_;P<f;P+=_)C+=(s[L]-s[P])*(s[P+1]+s[L+1]),L=P;return C}function b0(s,u,f,_,C){(function P(L,q,Z,ne,se){for(;ne>Z;){if(ne-Z>600){var he=ne-Z+1,we=q-Z+1,Ee=Math.log(he),$e=.5*Math.exp(2*Ee/3),He=.5*Math.sqrt(Ee*$e*(he-$e)/he)*(we-he/2<0?-1:1);P(L,q,Math.max(Z,Math.floor(q-we*$e/he+He)),Math.min(ne,Math.floor(q+(he-we)*$e/he+He)),se)}var st=L[q],Je=Z,ft=ne;for(If(L,Z,q),se(L[ne],st)>0&&If(L,Z,ne);Je<ft;){for(If(L,Je,ft),Je++,ft--;se(L[Je],st)<0;)Je++;for(;se(L[ft],st)>0;)ft--}se(L[Z],st)===0?If(L,Z,ft):If(L,++ft,ne),ft<=q&&(Z=ft+1),q<=ft&&(ne=ft-1)}})(s,u,f,_||s.length-1,C||N_)}function If(s,u,f){var _=s[u];s[u]=s[f],s[f]=_}function N_(s,u){return s<u?-1:s>u?1:0}function Ug(s,u){var f=s.length;if(f<=1)return[s];for(var _,C,P=[],L=0;L<f;L++){var q=Fe(s[L]);q!==0&&(s[L].area=Math.abs(q),C===void 0&&(C=q<0),C===q<0?(_&&P.push(_),_=[s[L]]):_.push(s[L]))}if(_&&P.push(_),u>1)for(var Z=0;Z<P.length;Z++)P[Z].length<=u||(b0(P[Z],u,1,P[Z].length-1,_0),P[Z]=P[Z].slice(0,u));return P}function _0(s,u){return u.area-s.area}function qg(s,u,f){for(var _=f.patternDependencies,C=!1,P=0,L=u;P<L.length;P+=1){var q=L[P].paint.get(s+"-pattern");q.isConstant()||(C=!0);var Z=q.constantOr(null);Z&&(C=!0,_[Z.to]=!0,_[Z.from]=!0)}return C}function Vg(s,u,f,_,C){for(var P=C.patternDependencies,L=0,q=u;L<q.length;L+=1){var Z=q[L],ne=Z.paint.get(s+"-pattern").value;if(ne.kind!=="constant"){var se=ne.evaluate({zoom:_-1},f,{},C.availableImages),he=ne.evaluate({zoom:_},f,{},C.availableImages),we=ne.evaluate({zoom:_+1},f,{},C.availableImages);he=he&&he.name?he.name:he,we=we&&we.name?we.name:we,P[se=se&&se.name?se.name:se]=!0,P[he]=!0,P[we]=!0,f.patterns[Z.id]={min:se,mid:he,max:we}}}return f}Ku.deviation=function(s,u,f,_){var C=u&&u.length,P=Math.abs(Md(s,0,C?u[0]*f:s.length,f));if(C)for(var L=0,q=u.length;L<q;L++)P-=Math.abs(Md(s,u[L]*f,L<q-1?u[L+1]*f:s.length,f));var Z=0;for(L=0;L<_.length;L+=3){var ne=_[L]*f,se=_[L+1]*f,he=_[L+2]*f;Z+=Math.abs((s[ne]-s[he])*(s[se+1]-s[ne+1])-(s[ne]-s[se])*(s[he+1]-s[ne+1]))}return P===0&&Z===0?0:Math.abs((Z-P)/P)},Ku.flatten=function(s){for(var u=s[0][0].length,f={vertices:[],holes:[],dimensions:u},_=0,C=0;C<s.length;C++){for(var P=0;P<s[C].length;P++)for(var L=0;L<u;L++)f.vertices.push(s[C][P][L]);C>0&&f.holes.push(_+=s[C-1].length)}return f},Lc.default=jp;var Pu=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((function(u){return u.id})),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Bs,this.indexArray=new Oo,this.indexArray2=new ah,this.programConfigurations=new Rr(s.layers,s.zoom),this.segments=new Y,this.segments2=new Y,this.stateDependentLayerIds=this.layers.filter((function(u){return u.isStateDependent()})).map((function(u){return u.id}))};Pu.prototype.populate=function(s,u,f){this.hasPattern=qg("fill",this.layers,u);for(var _=this.layers[0].layout.get("fill-sort-key"),C=[],P=0,L=s;P<L.length;P+=1){var q=L[P],Z=q.feature,ne=q.id,se=q.index,he=q.sourceLayerIndex,we=this.layers[0]._featureFilter.needGeometry,Ee=Qn(Z,we);if(this.layers[0]._featureFilter.filter(new En(this.zoom),Ee,f)){var $e=_?_.evaluate(Ee,{},f,u.availableImages):void 0,He={id:ne,properties:Z.properties,type:Z.type,sourceLayerIndex:he,index:se,geometry:we?Ee.geometry:In(Z),patterns:{},sortKey:$e};C.push(He)}}_&&C.sort((function(rr,ur){return rr.sortKey-ur.sortKey}));for(var st=0,Je=C;st<Je.length;st+=1){var ft=Je[st],gt=ft.geometry,wt=ft.index,Nt=ft.sourceLayerIndex;if(this.hasPattern){var Bt=Vg("fill",this.layers,ft,this.zoom,u);this.patternFeatures.push(Bt)}else this.addFeature(ft,gt,wt,f,{});u.featureIndex.insert(s[wt].feature,gt,wt,Nt,this.index)}},Pu.prototype.update=function(s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,f)},Pu.prototype.addFeatures=function(s,u,f){for(var _=0,C=this.patternFeatures;_<C.length;_+=1){var P=C[_];this.addFeature(P,P.geometry,P.index,u,f)}},Pu.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},Pu.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},Pu.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,lh),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.indexBuffer2=s.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(s),this.uploaded=!0},Pu.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())},Pu.prototype.addFeature=function(s,u,f,_,C){for(var P=0,L=Ug(u,500);P<L.length;P+=1){for(var q=L[P],Z=0,ne=0,se=q;ne<se.length;ne+=1)Z+=se[ne].length;for(var he=this.segments.prepareSegment(Z,this.layoutVertexArray,this.indexArray),we=he.vertexLength,Ee=[],$e=[],He=0,st=q;He<st.length;He+=1){var Je=st[He];if(Je.length!==0){Je!==q[0]&&$e.push(Ee.length/2);var ft=this.segments2.prepareSegment(Je.length,this.layoutVertexArray,this.indexArray2),gt=ft.vertexLength;this.layoutVertexArray.emplaceBack(Je[0].x,Je[0].y),this.indexArray2.emplaceBack(gt+Je.length-1,gt),Ee.push(Je[0].x),Ee.push(Je[0].y);for(var wt=1;wt<Je.length;wt++)this.layoutVertexArray.emplaceBack(Je[wt].x,Je[wt].y),this.indexArray2.emplaceBack(gt+wt-1,gt+wt),Ee.push(Je[wt].x),Ee.push(Je[wt].y);ft.vertexLength+=Je.length,ft.primitiveLength+=Je.length}}for(var Nt=Lc(Ee,$e),Bt=0;Bt<Nt.length;Bt+=3)this.indexArray.emplaceBack(we+Nt[Bt],we+Nt[Bt+1],we+Nt[Bt+2]);he.vertexLength+=Z,he.primitiveLength+=Nt.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,C,_)},sr("FillBucket",Pu,{omit:["layers","patternFeatures"]});var ky=new gn({"fill-sort-key":new Er(ke.layout_fill["fill-sort-key"])}),w0={paint:new gn({"fill-antialias":new qr(ke.paint_fill["fill-antialias"]),"fill-opacity":new Er(ke.paint_fill["fill-opacity"]),"fill-color":new Er(ke.paint_fill["fill-color"]),"fill-outline-color":new Er(ke.paint_fill["fill-outline-color"]),"fill-translate":new qr(ke.paint_fill["fill-translate"]),"fill-translate-anchor":new qr(ke.paint_fill["fill-translate-anchor"]),"fill-pattern":new sh(ke.paint_fill["fill-pattern"])}),layout:ky},j0=(function(s){function u(f){s.call(this,f,w0)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.recalculate=function(f,_){s.prototype.recalculate.call(this,f,_);var C=this.paint._values["fill-outline-color"];C.value.kind==="constant"&&C.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])},u.prototype.createBucket=function(f){return new Pu(f)},u.prototype.queryRadius=function(){return sn(this.paint.get("fill-translate"))},u.prototype.queryIntersectsFeature=function(f,_,C,P,L,q,Z){return Yi(Ni(f,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),q.angle,Z),P)},u.prototype.isTileClipped=function(){return!0},u})(Is),Ey=ua([{name:"a_pos",components:2,type:"Int16"},{name:"a_normal_ed",components:4,type:"Int16"}],4).members,Ty=Lf;function Lf(s,u,f,_,C){this.properties={},this.extent=f,this.type=0,this._pbf=s,this._geometry=-1,this._keys=_,this._values=C,s.readFields(S_,this,u)}function S_(s,u,f){s==1?u.id=f.readVarint():s==2?(function(_,C){for(var P=_.readVarint()+_.pos;_.pos<P;){var L=C._keys[_.readVarint()],q=C._values[_.readVarint()];C.properties[L]=q}})(f,u):s==3?u.type=f.readVarint():s==4&&(u._geometry=f.pos)}function Py(s){for(var u,f,_=0,C=0,P=s.length,L=P-1;C<P;L=C++)_+=((f=s[L]).x-(u=s[C]).x)*(u.y+f.y);return _}Lf.types=["Unknown","Point","LineString","Polygon"],Lf.prototype.loadGeometry=function(){var s=this._pbf;s.pos=this._geometry;for(var u,f=s.readVarint()+s.pos,_=1,C=0,P=0,L=0,q=[];s.pos<f;){if(C<=0){var Z=s.readVarint();_=7&Z,C=Z>>3}if(C--,_===1||_===2)P+=s.readSVarint(),L+=s.readSVarint(),_===1&&(u&&q.push(u),u=[]),u.push(new j(P,L));else{if(_!==7)throw new Error("unknown command "+_);u&&u.push(u[0].clone())}}return u&&q.push(u),q},Lf.prototype.bbox=function(){var s=this._pbf;s.pos=this._geometry;for(var u=s.readVarint()+s.pos,f=1,_=0,C=0,P=0,L=1/0,q=-1/0,Z=1/0,ne=-1/0;s.pos<u;){if(_<=0){var se=s.readVarint();f=7&se,_=se>>3}if(_--,f===1||f===2)(C+=s.readSVarint())<L&&(L=C),C>q&&(q=C),(P+=s.readSVarint())<Z&&(Z=P),P>ne&&(ne=P);else if(f!==7)throw new Error("unknown command "+f)}return[L,Z,q,ne]},Lf.prototype.toGeoJSON=function(s,u,f){var _,C,P=this.extent*Math.pow(2,f),L=this.extent*s,q=this.extent*u,Z=this.loadGeometry(),ne=Lf.types[this.type];function se(Ee){for(var $e=0;$e<Ee.length;$e++){var He=Ee[$e];Ee[$e]=[360*(He.x+L)/P-180,360/Math.PI*Math.atan(Math.exp((180-360*(He.y+q)/P)*Math.PI/180))-90]}}switch(this.type){case 1:var he=[];for(_=0;_<Z.length;_++)he[_]=Z[_][0];se(Z=he);break;case 2:for(_=0;_<Z.length;_++)se(Z[_]);break;case 3:for(Z=(function(Ee){var $e=Ee.length;if($e<=1)return[Ee];for(var He,st,Je=[],ft=0;ft<$e;ft++){var gt=Py(Ee[ft]);gt!==0&&(st===void 0&&(st=gt<0),st===gt<0?(He&&Je.push(He),He=[Ee[ft]]):He.push(Ee[ft]))}return He&&Je.push(He),Je})(Z),_=0;_<Z.length;_++)for(C=0;C<Z[_].length;C++)se(Z[_][C])}Z.length===1?Z=Z[0]:ne="Multi"+ne;var we={type:"Feature",geometry:{type:ne,coordinates:Z},properties:this.properties};return"id"in this&&(we.id=this.id),we};var Ry=Iy;function Iy(s,u){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=s,this._keys=[],this._values=[],this._features=[],s.readFields(Ly,this,u),this.length=this._features.length}function Ly(s,u,f){s===15?u.version=f.readVarint():s===1?u.name=f.readString():s===5?u.extent=f.readVarint():s===2?u._features.push(f.pos):s===3?u._keys.push(f.readString()):s===4&&u._values.push((function(_){for(var C=null,P=_.readVarint()+_.pos;_.pos<P;){var L=_.readVarint()>>3;C=L===1?_.readString():L===2?_.readFloat():L===3?_.readDouble():L===4?_.readVarint64():L===5?_.readVarint():L===6?_.readSVarint():L===7?_.readBoolean():null}return C})(f))}function N0(s,u,f){if(s===3){var _=new Ry(f,f.readVarint()+f.pos);_.length&&(u[_.name]=_)}}Iy.prototype.feature=function(s){if(s<0||s>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[s];var u=this._pbf.readVarint()+this._pbf.pos;return new Ty(this._pbf,u,this.extent,this._keys,this._values)};var Mf={VectorTile:function(s,u){this.layers=s.readFields(N0,{},u)},VectorTileFeature:Ty,VectorTileLayer:Ry},A_=Mf.VectorTileFeature.types,My=Math.pow(2,13);function Sp(s,u,f,_,C,P,L,q){s.emplaceBack(u,f,2*Math.floor(_*My)+L,C*My*2,P*My*2,Math.round(q))}var yc=function(s){this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((function(u){return u.id})),this.index=s.index,this.hasPattern=!1,this.layoutVertexArray=new gc,this.indexArray=new Oo,this.programConfigurations=new Rr(s.layers,s.zoom),this.segments=new Y,this.stateDependentLayerIds=this.layers.filter((function(u){return u.isStateDependent()})).map((function(u){return u.id}))};function Dy(s,u){return s.x===u.x&&(s.x<0||s.x>8192)||s.y===u.y&&(s.y<0||s.y>8192)}yc.prototype.populate=function(s,u,f){this.features=[],this.hasPattern=qg("fill-extrusion",this.layers,u);for(var _=0,C=s;_<C.length;_+=1){var P=C[_],L=P.feature,q=P.id,Z=P.index,ne=P.sourceLayerIndex,se=this.layers[0]._featureFilter.needGeometry,he=Qn(L,se);if(this.layers[0]._featureFilter.filter(new En(this.zoom),he,f)){var we={id:q,sourceLayerIndex:ne,index:Z,geometry:se?he.geometry:In(L),properties:L.properties,type:L.type,patterns:{}};this.hasPattern?this.features.push(Vg("fill-extrusion",this.layers,we,this.zoom,u)):this.addFeature(we,we.geometry,Z,f,{}),u.featureIndex.insert(L,we.geometry,Z,ne,this.index,!0)}}},yc.prototype.addFeatures=function(s,u,f){for(var _=0,C=this.features;_<C.length;_+=1){var P=C[_];this.addFeature(P,P.geometry,P.index,u,f)}},yc.prototype.update=function(s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,f)},yc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},yc.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},yc.prototype.upload=function(s){this.uploaded||(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Ey),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},yc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},yc.prototype.addFeature=function(s,u,f,_,C){for(var P=0,L=Ug(u,500);P<L.length;P+=1){for(var q=L[P],Z=0,ne=0,se=q;ne<se.length;ne+=1)Z+=se[ne].length;for(var he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray),we=0,Ee=q;we<Ee.length;we+=1){var $e=Ee[we];if($e.length!==0&&!((Ln=$e).every((function(wn){return wn.x<0}))||Ln.every((function(wn){return wn.x>8192}))||Ln.every((function(wn){return wn.y<0}))||Ln.every((function(wn){return wn.y>8192}))))for(var He=0,st=0;st<$e.length;st++){var Je=$e[st];if(st>=1){var ft=$e[st-1];if(!Dy(Je,ft)){he.vertexLength+4>Y.MAX_VERTEX_ARRAY_LENGTH&&(he=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray));var gt=Je.sub(ft)._perp()._unit(),wt=ft.dist(Je);He+wt>32768&&(He=0),Sp(this.layoutVertexArray,Je.x,Je.y,gt.x,gt.y,0,0,He),Sp(this.layoutVertexArray,Je.x,Je.y,gt.x,gt.y,0,1,He),Sp(this.layoutVertexArray,ft.x,ft.y,gt.x,gt.y,0,0,He+=wt),Sp(this.layoutVertexArray,ft.x,ft.y,gt.x,gt.y,0,1,He);var Nt=he.vertexLength;this.indexArray.emplaceBack(Nt,Nt+2,Nt+1),this.indexArray.emplaceBack(Nt+1,Nt+2,Nt+3),he.vertexLength+=4,he.primitiveLength+=2}}}}if(he.vertexLength+Z>Y.MAX_VERTEX_ARRAY_LENGTH&&(he=this.segments.prepareSegment(Z,this.layoutVertexArray,this.indexArray)),A_[s.type]==="Polygon"){for(var Bt=[],rr=[],ur=he.vertexLength,Br=0,jr=q;Br<jr.length;Br+=1){var Wr=jr[Br];if(Wr.length!==0){Wr!==q[0]&&rr.push(Bt.length/2);for(var Nr=0;Nr<Wr.length;Nr++){var Tn=Wr[Nr];Sp(this.layoutVertexArray,Tn.x,Tn.y,0,0,1,1,0),Bt.push(Tn.x),Bt.push(Tn.y)}}}for(var Jr=Lc(Bt,rr),Ir=0;Ir<Jr.length;Ir+=3)this.indexArray.emplaceBack(ur+Jr[Ir],ur+Jr[Ir+2],ur+Jr[Ir+1]);he.primitiveLength+=Jr.length/3,he.vertexLength+=Z}}var Ln;this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,C,_)},sr("FillExtrusionBucket",yc,{omit:["layers","features"]});var $g={paint:new gn({"fill-extrusion-opacity":new qr(ke["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Er(ke["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new qr(ke["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new qr(ke["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new sh(ke["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Er(ke["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Er(ke["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-vertical-gradient":new qr(ke["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"])})},S0=(function(s){function u(f){s.call(this,f,$g)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.createBucket=function(f){return new yc(f)},u.prototype.queryRadius=function(){return sn(this.paint.get("fill-extrusion-translate"))},u.prototype.is3D=function(){return!0},u.prototype.queryIntersectsFeature=function(f,_,C,P,L,q,Z,ne){var se=Ni(f,this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),q.angle,Z),he=this.paint.get("fill-extrusion-height").evaluate(_,C),we=this.paint.get("fill-extrusion-base").evaluate(_,C),Ee=(function(He,st,Je,ft){for(var gt=[],wt=0,Nt=He;wt<Nt.length;wt+=1){var Bt=Nt[wt],rr=[Bt.x,Bt.y,0,1];Vi(rr,rr,st),gt.push(new j(rr[0]/rr[3],rr[1]/rr[3]))}return gt})(se,ne),$e=(function(He,st,Je,ft){for(var gt=[],wt=[],Nt=ft[8]*st,Bt=ft[9]*st,rr=ft[10]*st,ur=ft[11]*st,Br=ft[8]*Je,jr=ft[9]*Je,Wr=ft[10]*Je,Nr=ft[11]*Je,Tn=0,Jr=He;Tn<Jr.length;Tn+=1){for(var Ir=[],Ln=[],wn=0,ei=Jr[Tn];wn<ei.length;wn+=1){var br=ei[wn],hi=br.x,Ss=br.y,Vs=ft[0]*hi+ft[4]*Ss+ft[12],$s=ft[1]*hi+ft[5]*Ss+ft[13],As=ft[2]*hi+ft[6]*Ss+ft[14],ea=ft[3]*hi+ft[7]*Ss+ft[15],fa=As+rr,Hs=ea+ur,Co=Vs+Br,wa=$s+jr,ko=As+Wr,Xi=ea+Nr,fs=new j((Vs+Nt)/Hs,($s+Bt)/Hs);fs.z=fa/Hs,Ir.push(fs);var Dn=new j(Co/Xi,wa/Xi);Dn.z=ko/Xi,Ln.push(Dn)}gt.push(Ir),wt.push(Ln)}return[gt,wt]})(P,we,he,ne);return(function(He,st,Je){var ft=1/0;Yi(Je,st)&&(ft=Cp(Je,st[0]));for(var gt=0;gt<st.length;gt++)for(var wt=st[gt],Nt=He[gt],Bt=0;Bt<wt.length-1;Bt++){var rr=wt[Bt],ur=[rr,wt[Bt+1],Nt[Bt+1],Nt[Bt],rr];ns(Je,ur)&&(ft=Math.min(ft,Cp(Je,ur)))}return ft!==1/0&&ft})($e[0],$e[1],Ee)},u})(Is);function Ap(s,u){return s.x*u.x+s.y*u.y}function Cp(s,u){if(s.length===1){for(var f,_=0,C=u[_++];!f||C.equals(f);)if(!(f=u[_++]))return 1/0;for(;_<u.length;_++){var P=u[_],L=s[0],q=f.sub(C),Z=P.sub(C),ne=L.sub(C),se=Ap(q,q),he=Ap(q,Z),we=Ap(Z,Z),Ee=Ap(ne,q),$e=Ap(ne,Z),He=se*we-he*he,st=(we*Ee-he*$e)/He,Je=(se*$e-he*Ee)/He,ft=C.z*(1-st-Je)+f.z*st+P.z*Je;if(isFinite(ft))return ft}return 1/0}for(var gt=1/0,wt=0,Nt=u;wt<Nt.length;wt+=1)gt=Math.min(gt,Nt[wt].z);return gt}var A0=ua([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"}],4).members,Oy=ua([{name:"a_uv_x",components:1,type:"Float32"},{name:"a_split_index",components:1,type:"Float32"}]).members,C0=Mf.VectorTileFeature.types,zy=Math.cos(Math.PI/180*37.5),Hg=Math.pow(2,14)/.5,dl=function(s){var u=this;this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((function(f){return f.id})),this.index=s.index,this.hasPattern=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach((function(f){u.gradients[f.id]={}})),this.layoutVertexArray=new Oa,this.layoutVertexArray2=new du,this.indexArray=new Oo,this.programConfigurations=new Rr(s.layers,s.zoom),this.segments=new Y,this.maxLineLength=0,this.stateDependentLayerIds=this.layers.filter((function(f){return f.isStateDependent()})).map((function(f){return f.id}))};dl.prototype.populate=function(s,u,f){this.hasPattern=qg("line",this.layers,u);for(var _=this.layers[0].layout.get("line-sort-key"),C=[],P=0,L=s;P<L.length;P+=1){var q=L[P],Z=q.feature,ne=q.id,se=q.index,he=q.sourceLayerIndex,we=this.layers[0]._featureFilter.needGeometry,Ee=Qn(Z,we);if(this.layers[0]._featureFilter.filter(new En(this.zoom),Ee,f)){var $e=_?_.evaluate(Ee,{},f):void 0,He={id:ne,properties:Z.properties,type:Z.type,sourceLayerIndex:he,index:se,geometry:we?Ee.geometry:In(Z),patterns:{},sortKey:$e};C.push(He)}}_&&C.sort((function(rr,ur){return rr.sortKey-ur.sortKey}));for(var st=0,Je=C;st<Je.length;st+=1){var ft=Je[st],gt=ft.geometry,wt=ft.index,Nt=ft.sourceLayerIndex;if(this.hasPattern){var Bt=Vg("line",this.layers,ft,this.zoom,u);this.patternFeatures.push(Bt)}else this.addFeature(ft,gt,wt,f,{});u.featureIndex.insert(s[wt].feature,gt,wt,Nt,this.index)}},dl.prototype.update=function(s,u,f){this.stateDependentLayers.length&&this.programConfigurations.updatePaintArrays(s,u,this.stateDependentLayers,f)},dl.prototype.addFeatures=function(s,u,f){for(var _=0,C=this.patternFeatures;_<C.length;_+=1){var P=C[_];this.addFeature(P,P.geometry,P.index,u,f)}},dl.prototype.isEmpty=function(){return this.layoutVertexArray.length===0},dl.prototype.uploadPending=function(){return!this.uploaded||this.programConfigurations.needsUpload},dl.prototype.upload=function(s){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=s.createVertexBuffer(this.layoutVertexArray2,Oy)),this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,A0),this.indexBuffer=s.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(s),this.uploaded=!0},dl.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())},dl.prototype.lineFeatureClips=function(s){if(s.properties&&s.properties.hasOwnProperty("mapbox_clip_start")&&s.properties.hasOwnProperty("mapbox_clip_end"))return{start:+s.properties.mapbox_clip_start,end:+s.properties.mapbox_clip_end}},dl.prototype.addFeature=function(s,u,f,_,C){var P=this.layers[0].layout,L=P.get("line-join").evaluate(s,{}),q=P.get("line-cap"),Z=P.get("line-miter-limit"),ne=P.get("line-round-limit");this.lineClips=this.lineFeatureClips(s);for(var se=0,he=u;se<he.length;se+=1)this.addLine(he[se],s,L,q,Z,ne);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,s,f,C,_)},dl.prototype.addLine=function(s,u,f,_,C,P){if(this.distance=0,this.scaledDistance=0,this.totalDistance=0,this.lineClips){this.lineClipsArray.push(this.lineClips);for(var L=0;L<s.length-1;L++)this.totalDistance+=s[L].dist(s[L+1]);this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}for(var q=C0[u.type]==="Polygon",Z=s.length;Z>=2&&s[Z-1].equals(s[Z-2]);)Z--;for(var ne=0;ne<Z-1&&s[ne].equals(s[ne+1]);)ne++;if(!(Z<(q?3:2))){f==="bevel"&&(C=1.05);var se,he=this.overscaling<=16?122880/(512*this.overscaling):0,we=this.segments.prepareSegment(10*Z,this.layoutVertexArray,this.indexArray),Ee=void 0,$e=void 0,He=void 0,st=void 0;this.e1=this.e2=-1,q&&(st=s[ne].sub(se=s[Z-2])._unit()._perp());for(var Je=ne;Je<Z;Je++)if(!($e=Je===Z-1?q?s[ne+1]:void 0:s[Je+1])||!s[Je].equals($e)){st&&(He=st),se&&(Ee=se),se=s[Je],st=$e?$e.sub(se)._unit()._perp():He;var ft=(He=He||st).add(st);ft.x===0&&ft.y===0||ft._unit();var gt=He.x*st.x+He.y*st.y,wt=ft.x*st.x+ft.y*st.y,Nt=wt!==0?1/wt:1/0,Bt=2*Math.sqrt(2-2*wt),rr=wt<zy&&Ee&&$e,ur=He.x*st.y-He.y*st.x>0;if(rr&&Je>ne){var Br=se.dist(Ee);if(Br>2*he){var jr=se.sub(se.sub(Ee)._mult(he/Br)._round());this.updateDistance(Ee,jr),this.addCurrentVertex(jr,He,0,0,we),Ee=jr}}var Wr=Ee&&$e,Nr=Wr?f:q?"butt":_;if(Wr&&Nr==="round"&&(Nt<P?Nr="miter":Nt<=2&&(Nr="fakeround")),Nr==="miter"&&Nt>C&&(Nr="bevel"),Nr==="bevel"&&(Nt>2&&(Nr="flipbevel"),Nt<C&&(Nr="miter")),Ee&&this.updateDistance(Ee,se),Nr==="miter")ft._mult(Nt),this.addCurrentVertex(se,ft,0,0,we);else if(Nr==="flipbevel"){if(Nt>100)ft=st.mult(-1);else{var Tn=Nt*He.add(st).mag()/He.sub(st).mag();ft._perp()._mult(Tn*(ur?-1:1))}this.addCurrentVertex(se,ft,0,0,we),this.addCurrentVertex(se,ft.mult(-1),0,0,we)}else if(Nr==="bevel"||Nr==="fakeround"){var Jr=-Math.sqrt(Nt*Nt-1),Ir=ur?Jr:0,Ln=ur?0:Jr;if(Ee&&this.addCurrentVertex(se,He,Ir,Ln,we),Nr==="fakeround")for(var wn=Math.round(180*Bt/Math.PI/20),ei=1;ei<wn;ei++){var br=ei/wn;if(br!==.5){var hi=br-.5;br+=br*hi*(br-1)*((1.0904+gt*(gt*(3.55645-1.43519*gt)-3.2452))*hi*hi+(.848013+gt*(.215638*gt-1.06021)))}var Ss=st.sub(He)._mult(br)._add(He)._unit()._mult(ur?-1:1);this.addHalfVertex(se,Ss.x,Ss.y,!1,ur,0,we)}$e&&this.addCurrentVertex(se,st,-Ir,-Ln,we)}else if(Nr==="butt")this.addCurrentVertex(se,ft,0,0,we);else if(Nr==="square"){var Vs=Ee?1:-1;this.addCurrentVertex(se,ft,Vs,Vs,we)}else Nr==="round"&&(Ee&&(this.addCurrentVertex(se,He,0,0,we),this.addCurrentVertex(se,He,1,1,we,!0)),$e&&(this.addCurrentVertex(se,st,-1,-1,we,!0),this.addCurrentVertex(se,st,0,0,we)));if(rr&&Je<Z-1){var $s=se.dist($e);if($s>2*he){var As=se.add($e.sub(se)._mult(he/$s)._round());this.updateDistance(se,As),this.addCurrentVertex(As,st,0,0,we),se=As}}}}},dl.prototype.addCurrentVertex=function(s,u,f,_,C,P){P===void 0&&(P=!1);var L=u.y*_-u.x,q=-u.y-u.x*_;this.addHalfVertex(s,u.x+u.y*f,u.y-u.x*f,P,!1,f,C),this.addHalfVertex(s,L,q,P,!0,-_,C),this.distance>Hg/2&&this.totalDistance===0&&(this.distance=0,this.addCurrentVertex(s,u,f,_,C,P))},dl.prototype.addHalfVertex=function(s,u,f,_,C,P,L){var q=.5*(this.lineClips?this.scaledDistance*(Hg-1):this.scaledDistance);this.layoutVertexArray.emplaceBack((s.x<<1)+(_?1:0),(s.y<<1)+(C?1:0),Math.round(63*u)+128,Math.round(63*f)+128,1+(P===0?0:P<0?-1:1)|(63&q)<<2,q>>6),this.lineClips&&this.layoutVertexArray2.emplaceBack((this.scaledDistance-this.lineClips.start)/(this.lineClips.end-this.lineClips.start),this.lineClipsArray.length);var Z=L.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,Z),L.primitiveLength++),C?this.e2=Z:this.e1=Z},dl.prototype.updateScaledDistance=function(){this.scaledDistance=this.lineClips?this.lineClips.start+(this.lineClips.end-this.lineClips.start)*this.distance/this.totalDistance:this.distance},dl.prototype.updateDistance=function(s,u){this.distance+=s.dist(u),this.updateScaledDistance()},sr("LineBucket",dl,{omit:["layers","patternFeatures"]});var k0=new gn({"line-cap":new qr(ke.layout_line["line-cap"]),"line-join":new Er(ke.layout_line["line-join"]),"line-miter-limit":new qr(ke.layout_line["line-miter-limit"]),"line-round-limit":new qr(ke.layout_line["line-round-limit"]),"line-sort-key":new Er(ke.layout_line["line-sort-key"])}),Xh={paint:new gn({"line-opacity":new Er(ke.paint_line["line-opacity"]),"line-color":new Er(ke.paint_line["line-color"]),"line-translate":new qr(ke.paint_line["line-translate"]),"line-translate-anchor":new qr(ke.paint_line["line-translate-anchor"]),"line-width":new Er(ke.paint_line["line-width"]),"line-gap-width":new Er(ke.paint_line["line-gap-width"]),"line-offset":new Er(ke.paint_line["line-offset"]),"line-blur":new Er(ke.paint_line["line-blur"]),"line-dasharray":new Ci(ke.paint_line["line-dasharray"]),"line-pattern":new sh(ke.paint_line["line-pattern"]),"line-gradient":new gi(ke.paint_line["line-gradient"])}),layout:k0},Fy=new((function(s){function u(){s.apply(this,arguments)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.possiblyEvaluate=function(f,_){return _=new En(Math.floor(_.zoom),{now:_.now,fadeDuration:_.fadeDuration,zoomHistory:_.zoomHistory,transition:_.transition}),s.prototype.possiblyEvaluate.call(this,f,_)},u.prototype.evaluate=function(f,_,C,P){return _=G({},_,{zoom:Math.floor(_.zoom)}),s.prototype.evaluate.call(this,f,_,C,P)},u})(Er))(Xh.paint.properties["line-width"].specification);Fy.useIntegerZoom=!0;var E0=(function(s){function u(f){s.call(this,f,Xh),this.gradientVersion=0}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype._handleSpecialPaintPropertyUpdate=function(f){f==="line-gradient"&&(this.stepInterpolant=this._transitionablePaint._values["line-gradient"].value.expression._styleExpression.expression instanceof aa,this.gradientVersion=(this.gradientVersion+1)%E)},u.prototype.gradientExpression=function(){return this._transitionablePaint._values["line-gradient"].value.expression},u.prototype.recalculate=function(f,_){s.prototype.recalculate.call(this,f,_),this.paint._values["line-floorwidth"]=Fy.possiblyEvaluate(this._transitioningPaint._values["line-width"].value,f)},u.prototype.createBucket=function(f){return new dl(f)},u.prototype.queryRadius=function(f){var _=f,C=By(hn("line-width",this,_),hn("line-gap-width",this,_)),P=hn("line-offset",this,_);return C/2+Math.abs(P)+sn(this.paint.get("line-translate"))},u.prototype.queryIntersectsFeature=function(f,_,C,P,L,q,Z){var ne=Ni(f,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),q.angle,Z),se=Z/2*By(this.paint.get("line-width").evaluate(_,C),this.paint.get("line-gap-width").evaluate(_,C)),he=this.paint.get("line-offset").evaluate(_,C);return he&&(P=(function(we,Ee){for(var $e=[],He=new j(0,0),st=0;st<we.length;st++){for(var Je=we[st],ft=[],gt=0;gt<Je.length;gt++){var wt=Je[gt],Nt=Je[gt+1],Bt=gt===0?He:wt.sub(Je[gt-1])._unit()._perp(),rr=gt===Je.length-1?He:Nt.sub(wt)._unit()._perp(),ur=Bt._add(rr)._unit();ur._mult(1/(ur.x*rr.x+ur.y*rr.y)),ft.push(ur._mult(Ee)._add(wt))}$e.push(ft)}return $e})(P,he*Z)),(function(we,Ee,$e){for(var He=0;He<Ee.length;He++){var st=Ee[He];if(we.length>=3){for(var Je=0;Je<st.length;Je++)if(jo(we,st[Je]))return!0}if(Ds(we,st,$e))return!0}return!1})(ne,P,se)},u.prototype.isTileClipped=function(){return!0},u})(Is);function By(s,u){return u>0?u+2*s:s}var Gg=ua([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_data",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),T0=ua([{name:"a_projected_pos",components:3,type:"Float32"}],4),Uy=(ua([{name:"a_fade_opacity",components:1,type:"Uint32"}],4),ua([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"}])),qy=(ua([{type:"Int16",name:"anchorPointX"},{type:"Int16",name:"anchorPointY"},{type:"Int16",name:"x1"},{type:"Int16",name:"y1"},{type:"Int16",name:"x2"},{type:"Int16",name:"y2"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]),ua([{name:"a_pos",components:2,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4)),P0=ua([{name:"a_pos",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);function C_(s,u,f){return s.sections.forEach((function(_){_.text=(function(C,P,L){var q=P.layout.get("text-transform").evaluate(L,{});return q==="uppercase"?C=C.toLocaleUpperCase():q==="lowercase"&&(C=C.toLocaleLowerCase()),Ma.applyArabicShaping&&(C=Ma.applyArabicShaping(C)),C})(_.text,u,f)})),s}ua([{name:"triangle",components:3,type:"Uint16"}]),ua([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"}]),ua([{type:"Int16",name:"anchorX"},{type:"Int16",name:"anchorY"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",name:"textBoxScale"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"}]),ua([{type:"Float32",name:"offsetX"}]),ua([{type:"Int16",name:"x"},{type:"Int16",name:"y"},{type:"Int16",name:"tileUnitDistanceFromAnchor"}]);var Df={"!":"","#":"",$:"","%":"","&":"","(":"",")":"","*":"","+":"",",":"","-":"",".":"","/":"",":":"",";":"","<":"","=":"",">":"","?":"","@":"","[":"","\\":"","]":"","^":"",_:"","`":"","{":"","|":"","}":"","~":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":"","":""},lo=function(s,u,f,_,C){var P,L,q=8*C-_-1,Z=(1<<q)-1,ne=Z>>1,se=-7,he=C-1,we=-1,Ee=s[u+he];for(he+=we,P=Ee&(1<<-se)-1,Ee>>=-se,se+=q;se>0;P=256*P+s[u+he],he+=we,se-=8);for(L=P&(1<<-se)-1,P>>=-se,se+=_;se>0;L=256*L+s[u+he],he+=we,se-=8);if(P===0)P=1-ne;else{if(P===Z)return L?NaN:1/0*(Ee?-1:1);L+=Math.pow(2,_),P-=ne}return(Ee?-1:1)*L*Math.pow(2,P-_)},hl=function(s,u,f,_,C,P){var L,q,Z,ne=8*P-C-1,se=(1<<ne)-1,he=se>>1,we=C===23?Math.pow(2,-24)-Math.pow(2,-77):0,Ee=0,$e=1,He=u<0||u===0&&1/u<0?1:0;for(u=Math.abs(u),isNaN(u)||u===1/0?(q=isNaN(u)?1:0,L=se):(L=Math.floor(Math.log(u)/Math.LN2),u*(Z=Math.pow(2,-L))<1&&(L--,Z*=2),(u+=L+he>=1?we/Z:we*Math.pow(2,1-he))*Z>=2&&(L++,Z/=2),L+he>=se?(q=0,L=se):L+he>=1?(q=(u*Z-1)*Math.pow(2,C),L+=he):(q=u*Math.pow(2,he-1)*Math.pow(2,C),L=0));C>=8;s[f+Ee]=255&q,Ee+=$e,q/=256,C-=8);for(L=L<<C|q,ne+=C;ne>0;s[f+Ee]=255&L,Ee+=$e,L/=256,ne-=8);s[f+Ee-$e]|=128*He},$m=Ki;function Ki(s){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(s)?s:new Uint8Array(s||0),this.pos=0,this.type=0,this.length=this.buf.length}Ki.Varint=0,Ki.Fixed64=1,Ki.Bytes=2,Ki.Fixed32=5;var Vy=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function Dd(s){return s.type===Ki.Bytes?s.readVarint()+s.pos:s.pos+1}function Od(s,u,f){return f?4294967296*u+(s>>>0):4294967296*(u>>>0)+(s>>>0)}function $y(s,u,f){var _=u<=16383?1:u<=2097151?2:u<=268435455?3:Math.floor(Math.log(u)/(7*Math.LN2));f.realloc(_);for(var C=f.pos-1;C>=s;C--)f.buf[C+_]=f.buf[C]}function Wg(s,u){for(var f=0;f<s.length;f++)u.writeVarint(s[f])}function R0(s,u){for(var f=0;f<s.length;f++)u.writeSVarint(s[f])}function k_(s,u){for(var f=0;f<s.length;f++)u.writeFloat(s[f])}function Yg(s,u){for(var f=0;f<s.length;f++)u.writeDouble(s[f])}function Hy(s,u){for(var f=0;f<s.length;f++)u.writeBoolean(s[f])}function I0(s,u){for(var f=0;f<s.length;f++)u.writeFixed32(s[f])}function L0(s,u){for(var f=0;f<s.length;f++)u.writeSFixed32(s[f])}function M0(s,u){for(var f=0;f<s.length;f++)u.writeFixed64(s[f])}function Gy(s,u){for(var f=0;f<s.length;f++)u.writeSFixed64(s[f])}function kp(s,u){return(s[u]|s[u+1]<<8|s[u+2]<<16)+16777216*s[u+3]}function Jh(s,u,f){s[f]=u,s[f+1]=u>>>8,s[f+2]=u>>>16,s[f+3]=u>>>24}function Wy(s,u){return(s[u]|s[u+1]<<8|s[u+2]<<16)+(s[u+3]<<24)}function Yy(s,u,f){s===1&&f.readMessage(Zg,u)}function Zg(s,u,f){if(s===3){var _=f.readMessage(Zy,{}),C=_.width,P=_.height,L=_.left,q=_.top,Z=_.advance;u.push({id:_.id,bitmap:new Zu({width:C+6,height:P+6},_.bitmap),metrics:{width:C,height:P,left:L,top:q,advance:Z}})}}function Zy(s,u,f){s===1?u.id=f.readVarint():s===2?u.bitmap=f.readBytes():s===3?u.width=f.readVarint():s===4?u.height=f.readVarint():s===5?u.left=f.readSVarint():s===6?u.top=f.readSVarint():s===7&&(u.advance=f.readVarint())}function Ky(s){for(var u=0,f=0,_=0,C=s;_<C.length;_+=1){var P=C[_];u+=P.w*P.h,f=Math.max(f,P.w)}s.sort((function(He,st){return st.h-He.h}));for(var L=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(u/.95)),f),h:1/0}],q=0,Z=0,ne=0,se=s;ne<se.length;ne+=1)for(var he=se[ne],we=L.length-1;we>=0;we--){var Ee=L[we];if(!(he.w>Ee.w||he.h>Ee.h)){if(he.x=Ee.x,he.y=Ee.y,Z=Math.max(Z,he.y+he.h),q=Math.max(q,he.x+he.w),he.w===Ee.w&&he.h===Ee.h){var $e=L.pop();we<L.length&&(L[we]=$e)}else he.h===Ee.h?(Ee.x+=he.w,Ee.w-=he.w):he.w===Ee.w?(Ee.y+=he.h,Ee.h-=he.h):(L.push({x:Ee.x+he.w,y:Ee.y,w:Ee.w-he.w,h:he.h}),Ee.y+=he.h,Ee.h-=he.h);break}}return{w:q,h:Z,fill:u/(q*Z)||0}}Ki.prototype={destroy:function(){this.buf=null},readFields:function(s,u,f){for(f=f||this.length;this.pos<f;){var _=this.readVarint(),C=_>>3,P=this.pos;this.type=7&_,s(C,u,this),this.pos===P&&this.skip(_)}return u},readMessage:function(s,u){return this.readFields(s,u,this.readVarint()+this.pos)},readFixed32:function(){var s=kp(this.buf,this.pos);return this.pos+=4,s},readSFixed32:function(){var s=Wy(this.buf,this.pos);return this.pos+=4,s},readFixed64:function(){var s=kp(this.buf,this.pos)+4294967296*kp(this.buf,this.pos+4);return this.pos+=8,s},readSFixed64:function(){var s=kp(this.buf,this.pos)+4294967296*Wy(this.buf,this.pos+4);return this.pos+=8,s},readFloat:function(){var s=lo(this.buf,this.pos,!0,23,4);return this.pos+=4,s},readDouble:function(){var s=lo(this.buf,this.pos,!0,52,8);return this.pos+=8,s},readVarint:function(s){var u,f,_=this.buf;return u=127&(f=_[this.pos++]),f<128?u:(u|=(127&(f=_[this.pos++]))<<7,f<128?u:(u|=(127&(f=_[this.pos++]))<<14,f<128?u:(u|=(127&(f=_[this.pos++]))<<21,f<128?u:(function(C,P,L){var q,Z,ne=L.buf;if(q=(112&(Z=ne[L.pos++]))>>4,Z<128||(q|=(127&(Z=ne[L.pos++]))<<3,Z<128)||(q|=(127&(Z=ne[L.pos++]))<<10,Z<128)||(q|=(127&(Z=ne[L.pos++]))<<17,Z<128)||(q|=(127&(Z=ne[L.pos++]))<<24,Z<128)||(q|=(1&(Z=ne[L.pos++]))<<31,Z<128))return Od(C,q,P);throw new Error("Expected varint not more than 10 bytes")})(u|=(15&(f=_[this.pos]))<<28,s,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var s=this.readVarint();return s%2==1?(s+1)/-2:s/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var s=this.readVarint()+this.pos,u=this.pos;return this.pos=s,s-u>=12&&Vy?(function(f,_,C){return Vy.decode(f.subarray(_,C))})(this.buf,u,s):(function(f,_,C){for(var P="",L=_;L<C;){var q,Z,ne,se=f[L],he=null,we=se>239?4:se>223?3:se>191?2:1;if(L+we>C)break;we===1?se<128&&(he=se):we===2?(192&(q=f[L+1]))==128&&(he=(31&se)<<6|63&q)<=127&&(he=null):we===3?(Z=f[L+2],(192&(q=f[L+1]))==128&&(192&Z)==128&&((he=(15&se)<<12|(63&q)<<6|63&Z)<=2047||he>=55296&&he<=57343)&&(he=null)):we===4&&(Z=f[L+2],ne=f[L+3],(192&(q=f[L+1]))==128&&(192&Z)==128&&(192&ne)==128&&((he=(15&se)<<18|(63&q)<<12|(63&Z)<<6|63&ne)<=65535||he>=1114112)&&(he=null)),he===null?(he=65533,we=1):he>65535&&(he-=65536,P+=String.fromCharCode(he>>>10&1023|55296),he=56320|1023&he),P+=String.fromCharCode(he),L+=we}return P})(this.buf,u,s)},readBytes:function(){var s=this.readVarint()+this.pos,u=this.buf.subarray(this.pos,s);return this.pos=s,u},readPackedVarint:function(s,u){if(this.type!==Ki.Bytes)return s.push(this.readVarint(u));var f=Dd(this);for(s=s||[];this.pos<f;)s.push(this.readVarint(u));return s},readPackedSVarint:function(s){if(this.type!==Ki.Bytes)return s.push(this.readSVarint());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readSVarint());return s},readPackedBoolean:function(s){if(this.type!==Ki.Bytes)return s.push(this.readBoolean());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readBoolean());return s},readPackedFloat:function(s){if(this.type!==Ki.Bytes)return s.push(this.readFloat());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readFloat());return s},readPackedDouble:function(s){if(this.type!==Ki.Bytes)return s.push(this.readDouble());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readDouble());return s},readPackedFixed32:function(s){if(this.type!==Ki.Bytes)return s.push(this.readFixed32());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readFixed32());return s},readPackedSFixed32:function(s){if(this.type!==Ki.Bytes)return s.push(this.readSFixed32());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readSFixed32());return s},readPackedFixed64:function(s){if(this.type!==Ki.Bytes)return s.push(this.readFixed64());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readFixed64());return s},readPackedSFixed64:function(s){if(this.type!==Ki.Bytes)return s.push(this.readSFixed64());var u=Dd(this);for(s=s||[];this.pos<u;)s.push(this.readSFixed64());return s},skip:function(s){var u=7&s;if(u===Ki.Varint)for(;this.buf[this.pos++]>127;);else if(u===Ki.Bytes)this.pos=this.readVarint()+this.pos;else if(u===Ki.Fixed32)this.pos+=4;else{if(u!==Ki.Fixed64)throw new Error("Unimplemented type: "+u);this.pos+=8}},writeTag:function(s,u){this.writeVarint(s<<3|u)},realloc:function(s){for(var u=this.length||16;u<this.pos+s;)u*=2;if(u!==this.length){var f=new Uint8Array(u);f.set(this.buf),this.buf=f,this.length=u}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(s){this.realloc(4),Jh(this.buf,s,this.pos),this.pos+=4},writeSFixed32:function(s){this.realloc(4),Jh(this.buf,s,this.pos),this.pos+=4},writeFixed64:function(s){this.realloc(8),Jh(this.buf,-1&s,this.pos),Jh(this.buf,Math.floor(s*(1/4294967296)),this.pos+4),this.pos+=8},writeSFixed64:function(s){this.realloc(8),Jh(this.buf,-1&s,this.pos),Jh(this.buf,Math.floor(s*(1/4294967296)),this.pos+4),this.pos+=8},writeVarint:function(s){(s=+s||0)>268435455||s<0?(function(u,f){var _,C;if(u>=0?(_=u%4294967296|0,C=u/4294967296|0):(C=~(-u/4294967296),4294967295^(_=~(-u%4294967296))?_=_+1|0:(_=0,C=C+1|0)),u>=18446744073709552e3||u<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");f.realloc(10),(function(P,L,q){q.buf[q.pos++]=127&P|128,P>>>=7,q.buf[q.pos++]=127&P|128,P>>>=7,q.buf[q.pos++]=127&P|128,P>>>=7,q.buf[q.pos++]=127&P|128,q.buf[q.pos]=127&(P>>>=7)})(_,0,f),(function(P,L){var q=(7&P)<<4;L.buf[L.pos++]|=q|((P>>>=3)?128:0),P&&(L.buf[L.pos++]=127&P|((P>>>=7)?128:0),P&&(L.buf[L.pos++]=127&P|((P>>>=7)?128:0),P&&(L.buf[L.pos++]=127&P|((P>>>=7)?128:0),P&&(L.buf[L.pos++]=127&P|((P>>>=7)?128:0),P&&(L.buf[L.pos++]=127&P)))))})(C,f)})(s,this):(this.realloc(4),this.buf[this.pos++]=127&s|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=127&(s>>>=7)|(s>127?128:0),s<=127||(this.buf[this.pos++]=s>>>7&127))))},writeSVarint:function(s){this.writeVarint(s<0?2*-s-1:2*s)},writeBoolean:function(s){this.writeVarint(!!s)},writeString:function(s){s=String(s),this.realloc(4*s.length),this.pos++;var u=this.pos;this.pos=(function(_,C,P){for(var L,q,Z=0;Z<C.length;Z++){if((L=C.charCodeAt(Z))>55295&&L<57344){if(!q){L>56319||Z+1===C.length?(_[P++]=239,_[P++]=191,_[P++]=189):q=L;continue}if(L<56320){_[P++]=239,_[P++]=191,_[P++]=189,q=L;continue}L=q-55296<<10|L-56320|65536,q=null}else q&&(_[P++]=239,_[P++]=191,_[P++]=189,q=null);L<128?_[P++]=L:(L<2048?_[P++]=L>>6|192:(L<65536?_[P++]=L>>12|224:(_[P++]=L>>18|240,_[P++]=L>>12&63|128),_[P++]=L>>6&63|128),_[P++]=63&L|128)}return P})(this.buf,s,this.pos);var f=this.pos-u;f>=128&&$y(u,f,this),this.pos=u-1,this.writeVarint(f),this.pos+=f},writeFloat:function(s){this.realloc(4),hl(this.buf,s,this.pos,!0,23,4),this.pos+=4},writeDouble:function(s){this.realloc(8),hl(this.buf,s,this.pos,!0,52,8),this.pos+=8},writeBytes:function(s){var u=s.length;this.writeVarint(u),this.realloc(u);for(var f=0;f<u;f++)this.buf[this.pos++]=s[f]},writeRawMessage:function(s,u){this.pos++;var f=this.pos;s(u,this);var _=this.pos-f;_>=128&&$y(f,_,this),this.pos=f-1,this.writeVarint(_),this.pos+=_},writeMessage:function(s,u,f){this.writeTag(s,Ki.Bytes),this.writeRawMessage(u,f)},writePackedVarint:function(s,u){u.length&&this.writeMessage(s,Wg,u)},writePackedSVarint:function(s,u){u.length&&this.writeMessage(s,R0,u)},writePackedBoolean:function(s,u){u.length&&this.writeMessage(s,Hy,u)},writePackedFloat:function(s,u){u.length&&this.writeMessage(s,k_,u)},writePackedDouble:function(s,u){u.length&&this.writeMessage(s,Yg,u)},writePackedFixed32:function(s,u){u.length&&this.writeMessage(s,I0,u)},writePackedSFixed32:function(s,u){u.length&&this.writeMessage(s,L0,u)},writePackedFixed64:function(s,u){u.length&&this.writeMessage(s,M0,u)},writePackedSFixed64:function(s,u){u.length&&this.writeMessage(s,Gy,u)},writeBytesField:function(s,u){this.writeTag(s,Ki.Bytes),this.writeBytes(u)},writeFixed32Field:function(s,u){this.writeTag(s,Ki.Fixed32),this.writeFixed32(u)},writeSFixed32Field:function(s,u){this.writeTag(s,Ki.Fixed32),this.writeSFixed32(u)},writeFixed64Field:function(s,u){this.writeTag(s,Ki.Fixed64),this.writeFixed64(u)},writeSFixed64Field:function(s,u){this.writeTag(s,Ki.Fixed64),this.writeSFixed64(u)},writeVarintField:function(s,u){this.writeTag(s,Ki.Varint),this.writeVarint(u)},writeSVarintField:function(s,u){this.writeTag(s,Ki.Varint),this.writeSVarint(u)},writeStringField:function(s,u){this.writeTag(s,Ki.Bytes),this.writeString(u)},writeFloatField:function(s,u){this.writeTag(s,Ki.Fixed32),this.writeFloat(u)},writeDoubleField:function(s,u){this.writeTag(s,Ki.Fixed64),this.writeDouble(u)},writeBooleanField:function(s,u){this.writeVarintField(s,!!u)}};var Ep=function(s,u){var f=u.pixelRatio,_=u.version,C=u.stretchX,P=u.stretchY,L=u.content;this.paddedRect=s,this.pixelRatio=f,this.stretchX=C,this.stretchY=P,this.content=L,this.version=_},Tp={tl:{configurable:!0},br:{configurable:!0},tlbr:{configurable:!0},displaySize:{configurable:!0}};Tp.tl.get=function(){return[this.paddedRect.x+1,this.paddedRect.y+1]},Tp.br.get=function(){return[this.paddedRect.x+this.paddedRect.w-1,this.paddedRect.y+this.paddedRect.h-1]},Tp.tlbr.get=function(){return this.tl.concat(this.br)},Tp.displaySize.get=function(){return[(this.paddedRect.w-2)/this.pixelRatio,(this.paddedRect.h-2)/this.pixelRatio]},Object.defineProperties(Ep.prototype,Tp);var gu=function(s,u){var f={},_={};this.haveRenderCallbacks=[];var C=[];this.addImages(s,f,C),this.addImages(u,_,C);var P=Ky(C),L=new oo({width:P.w||1,height:P.h||1});for(var q in s){var Z=s[q],ne=f[q].paddedRect;oo.copy(Z.data,L,{x:0,y:0},{x:ne.x+1,y:ne.y+1},Z.data)}for(var se in u){var he=u[se],we=_[se].paddedRect,Ee=we.x+1,$e=we.y+1,He=he.data.width,st=he.data.height;oo.copy(he.data,L,{x:0,y:0},{x:Ee,y:$e},he.data),oo.copy(he.data,L,{x:0,y:st-1},{x:Ee,y:$e-1},{width:He,height:1}),oo.copy(he.data,L,{x:0,y:0},{x:Ee,y:$e+st},{width:He,height:1}),oo.copy(he.data,L,{x:He-1,y:0},{x:Ee-1,y:$e},{width:1,height:st}),oo.copy(he.data,L,{x:0,y:0},{x:Ee+He,y:$e},{width:1,height:st})}this.image=L,this.iconPositions=f,this.patternPositions=_};gu.prototype.addImages=function(s,u,f){for(var _ in s){var C=s[_],P={x:0,y:0,w:C.data.width+2,h:C.data.height+2};f.push(P),u[_]=new Ep(P,C),C.hasRenderCallback&&this.haveRenderCallbacks.push(_)}},gu.prototype.patchUpdatedImages=function(s,u){for(var f in s.dispatchRenderCallbacks(this.haveRenderCallbacks),s.updatedImages)this.patchUpdatedImage(this.iconPositions[f],s.getImage(f),u),this.patchUpdatedImage(this.patternPositions[f],s.getImage(f),u)},gu.prototype.patchUpdatedImage=function(s,u,f){if(s&&u&&s.version!==u.version){s.version=u.version;var _=s.tl;f.update(u.data,void 0,{x:_[0],y:_[1]})}},sr("ImagePosition",Ep),sr("ImageAtlas",gu);var Xl={horizontal:1,vertical:2,horizontalOnly:3},Pp=function(){this.scale=1,this.fontStack="",this.imageName=null};Pp.forText=function(s,u){var f=new Pp;return f.scale=s||1,f.fontStack=u,f},Pp.forImage=function(s){var u=new Pp;return u.imageName=s,u};var zo=function(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null};function Ru(s,u,f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e,He){var st,Je=zo.fromFeature(s,C);he===Xl.vertical&&Je.verticalizePunctuation();var ft=Ma.processBidirectionalText,gt=Ma.processStyledBidirectionalText;if(ft&&Je.sections.length===1){st=[];for(var wt=0,Nt=ft(Je.toString(),Xy(Je,ne,P,u,_,Ee,$e));wt<Nt.length;wt+=1){var Bt=Nt[wt],rr=new zo;rr.text=Bt,rr.sections=Je.sections;for(var ur=0;ur<Bt.length;ur++)rr.sectionIndex.push(0);st.push(rr)}}else if(gt){st=[];for(var Br=0,jr=gt(Je.text,Je.sectionIndex,Xy(Je,ne,P,u,_,Ee,$e));Br<jr.length;Br+=1){var Wr=jr[Br],Nr=new zo;Nr.text=Wr[0],Nr.sectionIndex=Wr[1],Nr.sections=Je.sections,st.push(Nr)}}else st=(function(Ir,Ln){for(var wn=[],ei=Ir.text,br=0,hi=0,Ss=Ln;hi<Ss.length;hi+=1){var Vs=Ss[hi];wn.push(Ir.substring(br,Vs)),br=Vs}return br<ei.length&&wn.push(Ir.substring(br,ei.length)),wn})(Je,Xy(Je,ne,P,u,_,Ee,$e));var Tn=[],Jr={positionedLines:Tn,text:Je.toString(),top:se[1],bottom:se[1],left:se[0],right:se[0],writingMode:he,iconsInText:!1,verticalizable:!1};return(function(Ir,Ln,wn,ei,br,hi,Ss,Vs,$s,As,ea,fa){for(var Hs=0,Co=-17,wa=0,ko=0,Xi=Vs==="right"?1:Vs==="left"?0:.5,fs=0,Dn=0,Hi=br;Dn<Hi.length;Dn+=1){var Ti=Hi[Dn];Ti.trim();var ii=Ti.getMaxScale(),pl=24*(ii-1),Eo={positionedGlyphs:[],lineOffset:0};Ir.positionedLines[fs]=Eo;var ps=Eo.positionedGlyphs,ta=0;if(Ti.length()){for(var To=0;To<Ti.length();To++){var mi=Ti.getSection(To),Ud=Ti.getSectionIndex(To),ec=Ti.getCharCode(To),Iu=0,pa=null,qd=null,tc=null,Fp=24,Qh=!($s===Xl.horizontal||!ea&&!Gu(ec)||ea&&(Rp[ec]||(xh=ec,tr.Arabic(xh)||tr["Arabic Supplement"](xh)||tr["Arabic Extended-A"](xh)||tr["Arabic Presentation Forms-A"](xh)||tr["Arabic Presentation Forms-B"](xh))));if(mi.imageName){var si=ei[mi.imageName];if(!si)continue;tc=mi.imageName,Ir.iconsInText=Ir.iconsInText||!0,qd=si.paddedRect;var nd=si.displaySize;mi.scale=24*mi.scale/fa,Iu=pl+(24-nd[1]*mi.scale),Fp=(pa={width:nd[0],height:nd[1],left:1,top:-3,advance:Qh?nd[1]:nd[0]}).advance;var yh=Qh?nd[0]*mi.scale-24*ii:nd[1]*mi.scale-24*ii;yh>0&&yh>ta&&(ta=yh)}else{var Bp=wn[mi.fontStack],Hf=Bp&&Bp[ec];if(Hf&&Hf.rect)qd=Hf.rect,pa=Hf.metrics;else{var Gf=Ln[mi.fontStack],ef=Gf&&Gf[ec];if(!ef)continue;pa=ef.metrics}Iu=24*(ii-mi.scale)}Qh?(Ir.verticalizable=!0,ps.push({glyph:ec,imageName:tc,x:Hs,y:Co+Iu,vertical:Qh,scale:mi.scale,fontStack:mi.fontStack,sectionIndex:Ud,metrics:pa,rect:qd}),Hs+=Fp*mi.scale+As):(ps.push({glyph:ec,imageName:tc,x:Hs,y:Co+Iu,vertical:Qh,scale:mi.scale,fontStack:mi.fontStack,sectionIndex:Ud,metrics:pa,rect:qd}),Hs+=pa.advance*mi.scale+As)}ps.length!==0&&(wa=Math.max(Hs-As,wa),Gm(ps,0,ps.length-1,Xi,ta)),Hs=0;var Wf=hi*ii+ta;Eo.lineOffset=Math.max(ta,pl),Co+=Wf,ko=Math.max(Wf,ko),++fs}else Co+=hi,++fs}var xh,Up=Co- -17,qp=Kg(Ss),tf=qp.horizontalAlign,Yf=qp.verticalAlign;(function(tg,is,Zf,ho,ov,Vp,rg,Kf,$p){var bh,ng=(is-Zf)*ov;bh=Vp!==rg?-Kf*ho- -17:(-ho*$p+.5)*rg;for(var Xf=0,Jf=tg;Xf<Jf.length;Xf+=1)for(var _h=0,ig=Jf[Xf].positionedGlyphs;_h<ig.length;_h+=1){var Qf=ig[_h];Qf.x+=ng,Qf.y+=bh}})(Ir.positionedLines,Xi,tf,Yf,wa,ko,hi,Up,br.length),Ir.top+=-Yf*Up,Ir.bottom=Ir.top+Up,Ir.left+=-tf*wa,Ir.right=Ir.left+wa})(Jr,u,f,_,st,L,q,Z,he,ne,we,He),!(function(Ir){for(var Ln=0,wn=Ir;Ln<wn.length;Ln+=1)if(wn[Ln].positionedGlyphs.length!==0)return!1;return!0})(Tn)&&Jr}zo.fromFeature=function(s,u){for(var f=new zo,_=0;_<s.sections.length;_++){var C=s.sections[_];C.image?f.addImageSection(C):f.addTextSection(C,u)}return f},zo.prototype.length=function(){return this.text.length},zo.prototype.getSection=function(s){return this.sections[this.sectionIndex[s]]},zo.prototype.getSectionIndex=function(s){return this.sectionIndex[s]},zo.prototype.getCharCode=function(s){return this.text.charCodeAt(s)},zo.prototype.verticalizePunctuation=function(){this.text=(function(s){for(var u="",f=0;f<s.length;f++){var _=s.charCodeAt(f+1)||null,C=s.charCodeAt(f-1)||null;u+=_&&Ya(_)&&!Df[s[f+1]]||C&&Ya(C)&&!Df[s[f-1]]||!Df[s[f]]?s[f]:Df[s[f]]}return u})(this.text)},zo.prototype.trim=function(){for(var s=0,u=0;u<this.text.length&&Rp[this.text.charCodeAt(u)];u++)s++;for(var f=this.text.length,_=this.text.length-1;_>=0&&_>=s&&Rp[this.text.charCodeAt(_)];_--)f--;this.text=this.text.substring(s,f),this.sectionIndex=this.sectionIndex.slice(s,f)},zo.prototype.substring=function(s,u){var f=new zo;return f.text=this.text.substring(s,u),f.sectionIndex=this.sectionIndex.slice(s,u),f.sections=this.sections,f},zo.prototype.toString=function(){return this.text},zo.prototype.getMaxScale=function(){var s=this;return this.sectionIndex.reduce((function(u,f){return Math.max(u,s.sections[f].scale)}),0)},zo.prototype.addTextSection=function(s,u){this.text+=s.text,this.sections.push(Pp.forText(s.scale,s.fontStack||u));for(var f=this.sections.length-1,_=0;_<s.text.length;++_)this.sectionIndex.push(f)},zo.prototype.addImageSection=function(s){var u=s.image?s.image.name:"";if(u.length!==0){var f=this.getNextImageSectionCharCode();f?(this.text+=String.fromCharCode(f),this.sections.push(Pp.forImage(u)),this.sectionIndex.push(this.sections.length-1)):fe("Reached maximum number of images 6401")}else fe("Can't add FormattedSection with an empty image.")},zo.prototype.getNextImageSectionCharCode=function(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)};var Rp={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},Jl={};function Hm(s,u,f,_,C,P){if(u.imageName){var L=_[u.imageName];return L?L.displaySize[0]*u.scale*24/P+C:0}var q=f[u.fontStack],Z=q&&q[s];return Z?Z.metrics.advance*u.scale+C:0}function Ip(s,u,f,_){var C=Math.pow(s-u,2);return _?s<u?C/2:2*C:C+Math.abs(f)*f}function ha(s,u,f){var _=0;return s===10&&(_-=1e4),f&&(_+=150),s!==40&&s!==65288||(_+=50),u!==41&&u!==65289||(_+=50),_}function D0(s,u,f,_,C,P){for(var L=null,q=Ip(u,f,C,P),Z=0,ne=_;Z<ne.length;Z+=1){var se=ne[Z],he=Ip(u-se.x,f,C,P)+se.badness;he<=q&&(L=se,q=he)}return{index:s,x:u,priorBreak:L,badness:q}}function Xy(s,u,f,_,C,P,L){if(P!=="point")return[];if(!s)return[];for(var q,Z=[],ne=(function(st,Je,ft,gt,wt,Nt){for(var Bt=0,rr=0;rr<st.length();rr++){var ur=st.getSection(rr);Bt+=Hm(st.getCharCode(rr),ur,gt,wt,Je,Nt)}return Bt/Math.max(1,Math.ceil(Bt/ft))})(s,u,f,_,C,L),se=s.text.indexOf("")>=0,he=0,we=0;we<s.length();we++){var Ee=s.getSection(we),$e=s.getCharCode(we);if(Rp[$e]||(he+=Hm($e,Ee,_,C,u,L)),we<s.length()-1){var He=!((q=$e)<11904||!(tr["Bopomofo Extended"](q)||tr.Bopomofo(q)||tr["CJK Compatibility Forms"](q)||tr["CJK Compatibility Ideographs"](q)||tr["CJK Compatibility"](q)||tr["CJK Radicals Supplement"](q)||tr["CJK Strokes"](q)||tr["CJK Symbols and Punctuation"](q)||tr["CJK Unified Ideographs Extension A"](q)||tr["CJK Unified Ideographs"](q)||tr["Enclosed CJK Letters and Months"](q)||tr["Halfwidth and Fullwidth Forms"](q)||tr.Hiragana(q)||tr["Ideographic Description Characters"](q)||tr["Kangxi Radicals"](q)||tr["Katakana Phonetic Extensions"](q)||tr.Katakana(q)||tr["Vertical Forms"](q)||tr["Yi Radicals"](q)||tr["Yi Syllables"](q)));(Jl[$e]||He||Ee.imageName)&&Z.push(D0(we+1,he,ne,Z,ha($e,s.getCharCode(we+1),He&&se),!1))}}return(function st(Je){return Je?st(Je.priorBreak).concat(Je.index):[]})(D0(s.length(),he,ne,Z,0,!0))}function Kg(s){var u=.5,f=.5;switch(s){case"right":case"top-right":case"bottom-right":u=1;break;case"left":case"top-left":case"bottom-left":u=0}switch(s){case"bottom":case"bottom-right":case"bottom-left":f=1;break;case"top":case"top-right":case"top-left":f=0}return{horizontalAlign:u,verticalAlign:f}}function Gm(s,u,f,_,C){if(_||C)for(var P=s[f],L=(s[f].x+P.metrics.advance*P.scale)*_,q=u;q<=f;q++)s[q].x-=L,s[q].y+=C}function dh(s,u,f,_,C,P){var L,q=s.image;if(q.content){var Z=q.content,ne=q.pixelRatio||1;L=[Z[0]/ne,Z[1]/ne,q.displaySize[0]-Z[2]/ne,q.displaySize[1]-Z[3]/ne]}var se,he,we,Ee,$e=u.left*P,He=u.right*P;f==="width"||f==="both"?(Ee=C[0]+$e-_[3],he=C[0]+He+_[1]):he=(Ee=C[0]+($e+He-q.displaySize[0])/2)+q.displaySize[0];var st=u.top*P,Je=u.bottom*P;return f==="height"||f==="both"?(se=C[1]+st-_[0],we=C[1]+Je+_[2]):we=(se=C[1]+(st+Je-q.displaySize[1])/2)+q.displaySize[1],{image:q,top:se,right:he,bottom:we,left:Ee,collisionPadding:L}}Jl[10]=!0,Jl[32]=!0,Jl[38]=!0,Jl[40]=!0,Jl[41]=!0,Jl[43]=!0,Jl[45]=!0,Jl[47]=!0,Jl[173]=!0,Jl[183]=!0,Jl[8203]=!0,Jl[8208]=!0,Jl[8211]=!0,Jl[8231]=!0;var Of=(function(s){function u(f,_,C,P){s.call(this,f,_),this.angle=C,P!==void 0&&(this.segment=P)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.clone=function(){return new u(this.x,this.y,this.angle,this.segment)},u})(j);function Xg(s,u){var f=u.expression;if(f.kind==="constant")return{kind:"constant",layoutSize:f.evaluate(new En(s+1))};if(f.kind==="source")return{kind:"source"};for(var _=f.zoomStops,C=f.interpolationType,P=0;P<_.length&&_[P]<=s;)P++;for(var L=P=Math.max(0,P-1);L<_.length&&_[L]<s+1;)L++;L=Math.min(_.length-1,L);var q=_[P],Z=_[L];return f.kind==="composite"?{kind:"composite",minZoom:q,maxZoom:Z,interpolationType:C}:{kind:"camera",minZoom:q,maxZoom:Z,minSize:f.evaluate(new En(q)),maxSize:f.evaluate(new En(Z)),interpolationType:C}}function Lp(s,u,f){var _=u.uSize,C=f.lowerSize;return s.kind==="source"?C/128:s.kind==="composite"?Ai(C/128,f.upperSize/128,u.uSizeT):_}function Xu(s,u){var f=0,_=0;if(s.kind==="constant")_=s.layoutSize;else if(s.kind!=="source"){var C=s.interpolationType,P=C?F(Ts.interpolationFactor(C,u,s.minZoom,s.maxZoom),0,1):0;s.kind==="camera"?_=Ai(s.minSize,s.maxSize,P):f=P}return{uSizeT:f,uSize:_}}sr("Anchor",Of);var O0=Object.freeze({__proto__:null,getSizeData:Xg,evaluateSizeForFeature:Lp,evaluateSizeForZoom:Xu,SIZE_PACK_FACTOR:128});function Jg(s,u,f,_,C){if(u.segment===void 0)return!0;for(var P=u,L=u.segment+1,q=0;q>-f/2;){if(--L<0)return!1;q-=s[L].dist(P),P=s[L]}q+=s[L].dist(s[L+1]),L++;for(var Z=[],ne=0;q<f/2;){var se=s[L],he=s[L+1];if(!he)return!1;var we=s[L-1].angleTo(se)-se.angleTo(he);for(we=Math.abs((we+3*Math.PI)%(2*Math.PI)-Math.PI),Z.push({distance:q,angleDelta:we}),ne+=we;q-Z[0].distance>_;)ne-=Z.shift().angleDelta;if(ne>C)return!1;L++,q+=se.dist(he)}return!0}function Jy(s){for(var u=0,f=0;f<s.length-1;f++)u+=s[f].dist(s[f+1]);return u}function Qg(s,u,f){return s?.6*u*f:0}function ev(s,u){return Math.max(s?s.right-s.left:0,u?u.right-u.left:0)}function tv(s,u,f,_,C,P){for(var L=Qg(f,C,P),q=ev(f,_)*P,Z=0,ne=Jy(s)/2,se=0;se<s.length-1;se++){var he=s[se],we=s[se+1],Ee=he.dist(we);if(Z+Ee>ne){var $e=(ne-Z)/Ee,He=Ai(he.x,we.x,$e),st=Ai(he.y,we.y,$e),Je=new Of(He,st,we.angleTo(he),se);return Je._round(),!L||Jg(s,Je,q,L,u)?Je:void 0}Z+=Ee}}function z0(s,u,f,_,C,P,L,q,Z){var ne=Qg(_,P,L),se=ev(_,C),he=se*L,we=s[0].x===0||s[0].x===Z||s[0].y===0||s[0].y===Z;return u-he<u/4&&(u=he+u/4),(function Ee($e,He,st,Je,ft,gt,wt,Nt,Bt){for(var rr=gt/2,ur=Jy($e),Br=0,jr=He-st,Wr=[],Nr=0;Nr<$e.length-1;Nr++){for(var Tn=$e[Nr],Jr=$e[Nr+1],Ir=Tn.dist(Jr),Ln=Jr.angleTo(Tn);jr+st<Br+Ir;){var wn=((jr+=st)-Br)/Ir,ei=Ai(Tn.x,Jr.x,wn),br=Ai(Tn.y,Jr.y,wn);if(ei>=0&&ei<Bt&&br>=0&&br<Bt&&jr-rr>=0&&jr+rr<=ur){var hi=new Of(ei,br,Ln,Nr);hi._round(),Je&&!Jg($e,hi,gt,Je,ft)||Wr.push(hi)}}Br+=Ir}return Nt||Wr.length||wt||(Wr=Ee($e,Br/2,st,Je,ft,gt,wt,!0,Bt)),Wr})(s,we?u/2*q%u:(se/2+2*P)*L*q%u,u,ne,f,he,we,!1,Z)}function zd(s,u,f,_,C){for(var P=[],L=0;L<s.length;L++)for(var q=s[L],Z=void 0,ne=0;ne<q.length-1;ne++){var se=q[ne],he=q[ne+1];se.x<u&&he.x<u||(se.x<u?se=new j(u,se.y+(u-se.x)/(he.x-se.x)*(he.y-se.y))._round():he.x<u&&(he=new j(u,se.y+(u-se.x)/(he.x-se.x)*(he.y-se.y))._round()),se.y<f&&he.y<f||(se.y<f?se=new j(se.x+(f-se.y)/(he.y-se.y)*(he.x-se.x),f)._round():he.y<f&&(he=new j(se.x+(f-se.y)/(he.y-se.y)*(he.x-se.x),f)._round()),se.x>=_&&he.x>=_||(se.x>=_?se=new j(_,se.y+(_-se.x)/(he.x-se.x)*(he.y-se.y))._round():he.x>=_&&(he=new j(_,se.y+(_-se.x)/(he.x-se.x)*(he.y-se.y))._round()),se.y>=C&&he.y>=C||(se.y>=C?se=new j(se.x+(C-se.y)/(he.y-se.y)*(he.x-se.x),C)._round():he.y>=C&&(he=new j(se.x+(C-se.y)/(he.y-se.y)*(he.x-se.x),C)._round()),Z&&se.equals(Z[Z.length-1])||P.push(Z=[se]),Z.push(he)))))}return P}function co(s,u,f,_){var C=[],P=s.image,L=P.pixelRatio,q=P.paddedRect.w-2,Z=P.paddedRect.h-2,ne=s.right-s.left,se=s.bottom-s.top,he=P.stretchX||[[0,q]],we=P.stretchY||[[0,Z]],Ee=function(ei,br){return ei+br[1]-br[0]},$e=he.reduce(Ee,0),He=we.reduce(Ee,0),st=q-$e,Je=Z-He,ft=0,gt=$e,wt=0,Nt=He,Bt=0,rr=st,ur=0,Br=Je;if(P.content&&_){var jr=P.content;ft=Mp(he,0,jr[0]),wt=Mp(we,0,jr[1]),gt=Mp(he,jr[0],jr[2]),Nt=Mp(we,jr[1],jr[3]),Bt=jr[0]-ft,ur=jr[1]-wt,rr=jr[2]-jr[0]-gt,Br=jr[3]-jr[1]-Nt}var Wr=function(ei,br,hi,Ss){var Vs=uo(ei.stretch-ft,gt,ne,s.left),$s=rv(ei.fixed-Bt,rr,ei.stretch,$e),As=uo(br.stretch-wt,Nt,se,s.top),ea=rv(br.fixed-ur,Br,br.stretch,He),fa=uo(hi.stretch-ft,gt,ne,s.left),Hs=rv(hi.fixed-Bt,rr,hi.stretch,$e),Co=uo(Ss.stretch-wt,Nt,se,s.top),wa=rv(Ss.fixed-ur,Br,Ss.stretch,He),ko=new j(Vs,As),Xi=new j(fa,As),fs=new j(fa,Co),Dn=new j(Vs,Co),Hi=new j($s/L,ea/L),Ti=new j(Hs/L,wa/L),ii=u*Math.PI/180;if(ii){var pl=Math.sin(ii),Eo=Math.cos(ii),ps=[Eo,-pl,pl,Eo];ko._matMult(ps),Xi._matMult(ps),Dn._matMult(ps),fs._matMult(ps)}var ta=ei.stretch+ei.fixed,To=br.stretch+br.fixed;return{tl:ko,tr:Xi,bl:Dn,br:fs,tex:{x:P.paddedRect.x+1+ta,y:P.paddedRect.y+1+To,w:hi.stretch+hi.fixed-ta,h:Ss.stretch+Ss.fixed-To},writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Hi,pixelOffsetBR:Ti,minFontScaleX:rr/L/ne,minFontScaleY:Br/L/se,isSDF:f}};if(_&&(P.stretchX||P.stretchY))for(var Nr=Qy(he,st,$e),Tn=Qy(we,Je,He),Jr=0;Jr<Nr.length-1;Jr++)for(var Ir=Nr[Jr],Ln=Nr[Jr+1],wn=0;wn<Tn.length-1;wn++)C.push(Wr(Ir,Tn[wn],Ln,Tn[wn+1]));else C.push(Wr({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:q+1},{fixed:0,stretch:Z+1}));return C}function Mp(s,u,f){for(var _=0,C=0,P=s;C<P.length;C+=1){var L=P[C];_+=Math.max(u,Math.min(f,L[1]))-Math.max(u,Math.min(f,L[0]))}return _}function Qy(s,u,f){for(var _=[{fixed:-1,stretch:0}],C=0,P=s;C<P.length;C+=1){var L=P[C],q=L[0],Z=L[1],ne=_[_.length-1];_.push({fixed:q-ne.stretch,stretch:ne.stretch}),_.push({fixed:q-ne.stretch,stretch:ne.stretch+(Z-q)})}return _.push({fixed:u+1,stretch:f}),_}function uo(s,u,f,_){return s/u*f+_}function rv(s,u,f,_){return s-u*f/_}var Wm=function(s,u,f,_,C,P,L,q,Z,ne){if(this.boxStartIndex=s.length,Z){var se=P.top,he=P.bottom,we=P.collisionPadding;we&&(se-=we[1],he+=we[3]);var Ee=he-se;Ee>0&&(Ee=Math.max(10,Ee),this.circleDiameter=Ee)}else{var $e=P.top*L-q,He=P.bottom*L+q,st=P.left*L-q,Je=P.right*L+q,ft=P.collisionPadding;if(ft&&(st-=ft[0]*L,$e-=ft[1]*L,Je+=ft[2]*L,He+=ft[3]*L),ne){var gt=new j(st,$e),wt=new j(Je,$e),Nt=new j(st,He),Bt=new j(Je,He),rr=ne*Math.PI/180;gt._rotate(rr),wt._rotate(rr),Nt._rotate(rr),Bt._rotate(rr),st=Math.min(gt.x,wt.x,Nt.x,Bt.x),Je=Math.max(gt.x,wt.x,Nt.x,Bt.x),$e=Math.min(gt.y,wt.y,Nt.y,Bt.y),He=Math.max(gt.y,wt.y,Nt.y,Bt.y)}s.emplaceBack(u.x,u.y,st,$e,Je,He,f,_,C)}this.boxEndIndex=s.length},zf=function(s,u){if(s===void 0&&(s=[]),u===void 0&&(u=_a),this.data=s,this.length=this.data.length,this.compare=u,this.length>0)for(var f=(this.length>>1)-1;f>=0;f--)this._down(f)};function _a(s,u){return s<u?-1:s>u?1:0}function Oc(s,u,f){f===void 0&&(f=!1);for(var _=1/0,C=1/0,P=-1/0,L=-1/0,q=s[0],Z=0;Z<q.length;Z++){var ne=q[Z];(!Z||ne.x<_)&&(_=ne.x),(!Z||ne.y<C)&&(C=ne.y),(!Z||ne.x>P)&&(P=ne.x),(!Z||ne.y>L)&&(L=ne.y)}var se=Math.min(P-_,L-C),he=se/2,we=new zf([],hh);if(se===0)return new j(_,C);for(var Ee=_;Ee<P;Ee+=se)for(var $e=C;$e<L;$e+=se)we.push(new Ff(Ee+he,$e+he,he,s));for(var He=(function(ft){for(var gt=0,wt=0,Nt=0,Bt=ft[0],rr=0,ur=Bt.length,Br=ur-1;rr<ur;Br=rr++){var jr=Bt[rr],Wr=Bt[Br],Nr=jr.x*Wr.y-Wr.x*jr.y;wt+=(jr.x+Wr.x)*Nr,Nt+=(jr.y+Wr.y)*Nr,gt+=3*Nr}return new Ff(wt/gt,Nt/gt,0,ft)})(s),st=we.length;we.length;){var Je=we.pop();(Je.d>He.d||!He.d)&&(He=Je,f&&console.log("found best %d after %d probes",Math.round(1e4*Je.d)/1e4,st)),Je.max-He.d<=u||(we.push(new Ff(Je.p.x-(he=Je.h/2),Je.p.y-he,he,s)),we.push(new Ff(Je.p.x+he,Je.p.y-he,he,s)),we.push(new Ff(Je.p.x-he,Je.p.y+he,he,s)),we.push(new Ff(Je.p.x+he,Je.p.y+he,he,s)),st+=4)}return f&&(console.log("num probes: "+st),console.log("best distance: "+He.d)),He.p}function hh(s,u){return u.max-s.max}function Ff(s,u,f,_){this.p=new j(s,u),this.h=f,this.d=(function(C,P){for(var L=!1,q=1/0,Z=0;Z<P.length;Z++)for(var ne=P[Z],se=0,he=ne.length,we=he-1;se<he;we=se++){var Ee=ne[se],$e=ne[we];Ee.y>C.y!=$e.y>C.y&&C.x<($e.x-Ee.x)*(C.y-Ee.y)/($e.y-Ee.y)+Ee.x&&(L=!L),q=Math.min(q,za(C,Ee,$e))}return(L?1:-1)*Math.sqrt(q)})(this.p,_),this.max=this.d+this.h*Math.SQRT2}zf.prototype.push=function(s){this.data.push(s),this.length++,this._up(this.length-1)},zf.prototype.pop=function(){if(this.length!==0){var s=this.data[0],u=this.data.pop();return this.length--,this.length>0&&(this.data[0]=u,this._down(0)),s}},zf.prototype.peek=function(){return this.data[0]},zf.prototype._up=function(s){for(var u=this.data,f=this.compare,_=u[s];s>0;){var C=s-1>>1,P=u[C];if(f(_,P)>=0)break;u[s]=P,s=C}u[s]=_},zf.prototype._down=function(s){for(var u=this.data,f=this.compare,_=this.length>>1,C=u[s];s<_;){var P=1+(s<<1),L=u[P],q=P+1;if(q<this.length&&f(u[q],L)<0&&(P=q,L=u[q]),f(L,C)>=0)break;u[s]=L,s=P}u[s]=C};var nv=Number.POSITIVE_INFINITY;function ex(s,u){return u[1]!==nv?(function(f,_,C){var P=0,L=0;switch(_=Math.abs(_),C=Math.abs(C),f){case"top-right":case"top-left":case"top":L=C-7;break;case"bottom-right":case"bottom-left":case"bottom":L=7-C}switch(f){case"top-right":case"bottom-right":case"right":P=-_;break;case"top-left":case"bottom-left":case"left":P=_}return[P,L]})(s,u[0],u[1]):(function(f,_){var C=0,P=0;_<0&&(_=0);var L=_/Math.sqrt(2);switch(f){case"top-right":case"top-left":P=L-7;break;case"bottom-right":case"bottom-left":P=7-L;break;case"bottom":P=7-_;break;case"top":P=_-7}switch(f){case"top-right":case"bottom-right":C=-L;break;case"top-left":case"bottom-left":C=L;break;case"left":C=_;break;case"right":C=-_}return[C,P]})(s,u[0])}function tx(s){switch(s){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function Ym(s,u,f,_,C,P,L,q,Z,ne,se,he,we,Ee,$e){var He=(function(wt,Nt,Bt,rr,ur,Br,jr,Wr){for(var Nr=rr.layout.get("text-rotate").evaluate(Br,{})*Math.PI/180,Tn=[],Jr=0,Ir=Nt.positionedLines;Jr<Ir.length;Jr+=1)for(var Ln=Ir[Jr],wn=0,ei=Ln.positionedGlyphs;wn<ei.length;wn+=1){var br=ei[wn];if(br.rect){var hi=br.rect||{},Ss=4,Vs=!0,$s=1,As=0,ea=(ur||Wr)&&br.vertical,fa=br.metrics.advance*br.scale/2;if(Wr&&Nt.verticalizable&&(As=Ln.lineOffset/2-(br.imageName?-(24-br.metrics.width*br.scale)/2:24*(br.scale-1))),br.imageName){var Hs=jr[br.imageName];Vs=Hs.sdf,Ss=1/($s=Hs.pixelRatio)}var Co=ur?[br.x+fa,br.y]:[0,0],wa=ur?[0,0]:[br.x+fa+Bt[0],br.y+Bt[1]-As],ko=[0,0];ea&&(ko=wa,wa=[0,0]);var Xi=(br.metrics.left-Ss)*br.scale-fa+wa[0],fs=(-br.metrics.top-Ss)*br.scale+wa[1],Dn=Xi+hi.w*br.scale/$s,Hi=fs+hi.h*br.scale/$s,Ti=new j(Xi,fs),ii=new j(Dn,fs),pl=new j(Xi,Hi),Eo=new j(Dn,Hi);if(ea){var ps=new j(-fa,fa- -17),ta=-Math.PI/2,To=12-fa,mi=new j(22-To,-(br.imageName?To:0)),Ud=new(Function.prototype.bind.apply(j,[null].concat(ko)));Ti._rotateAround(ta,ps)._add(mi)._add(Ud),ii._rotateAround(ta,ps)._add(mi)._add(Ud),pl._rotateAround(ta,ps)._add(mi)._add(Ud),Eo._rotateAround(ta,ps)._add(mi)._add(Ud)}if(Nr){var ec=Math.sin(Nr),Iu=Math.cos(Nr),pa=[Iu,-ec,ec,Iu];Ti._matMult(pa),ii._matMult(pa),pl._matMult(pa),Eo._matMult(pa)}var qd=new j(0,0),tc=new j(0,0);Tn.push({tl:Ti,tr:ii,bl:pl,br:Eo,tex:hi,writingMode:Nt.writingMode,glyphOffset:Co,sectionIndex:br.sectionIndex,isSDF:Vs,pixelOffsetTL:qd,pixelOffsetBR:tc,minFontScaleX:0,minFontScaleY:0})}}return Tn})(0,f,q,C,P,L,_,s.allowVerticalPlacement),st=s.textSizeData,Je=null;st.kind==="source"?(Je=[128*C.layout.get("text-size").evaluate(L,{})])[0]>32640&&fe(s.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'):st.kind==="composite"&&((Je=[128*Ee.compositeTextSizes[0].evaluate(L,{},$e),128*Ee.compositeTextSizes[1].evaluate(L,{},$e)])[0]>32640||Je[1]>32640)&&fe(s.layerIds[0]+': Value for "text-size" is >= 255. Reduce your "text-size".'),s.addSymbols(s.text,He,Je,q,P,L,ne,u,Z.lineStartIndex,Z.lineLength,we,$e);for(var ft=0,gt=se;ft<gt.length;ft+=1)he[gt[ft]]=s.text.placedSymbolArray.length-1;return 4*He.length}function xc(s){for(var u in s)return s[u];return null}function Ju(s,u,f,_){var C=s.compareText;if(u in C){for(var P=C[u],L=P.length-1;L>=0;L--)if(_.dist(P[L])<f)return!0}else C[u]=[];return C[u].push(_),!1}var F0=Mf.VectorTileFeature.types,zc=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Zm(s,u,f,_,C,P,L,q,Z,ne,se,he,we){var Ee=q?Math.min(32640,Math.round(q[0])):0,$e=q?Math.min(32640,Math.round(q[1])):0;s.emplaceBack(u,f,Math.round(32*_),Math.round(32*C),P,L,(Ee<<1)+(Z?1:0),$e,16*ne,16*se,256*he,256*we)}function Qu(s,u,f){s.emplaceBack(u.x,u.y,f),s.emplaceBack(u.x,u.y,f),s.emplaceBack(u.x,u.y,f),s.emplaceBack(u.x,u.y,f)}function Bf(s){for(var u=0,f=s.sections;u<f.length;u+=1)if(Eu(f[u].text))return!0;return!1}var Fc=function(s){this.layoutVertexArray=new Pl,this.indexArray=new Oo,this.programConfigurations=s,this.segments=new Y,this.dynamicLayoutVertexArray=new Rl,this.opacityVertexArray=new wo,this.placedSymbolArray=new d};Fc.prototype.isEmpty=function(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0},Fc.prototype.upload=function(s,u,f,_){this.isEmpty()||(f&&(this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,Gg.members),this.indexBuffer=s.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=s.createVertexBuffer(this.dynamicLayoutVertexArray,T0.members,!0),this.opacityVertexBuffer=s.createVertexBuffer(this.opacityVertexArray,zc,!0),this.opacityVertexBuffer.itemSize=1),(f||_)&&this.programConfigurations.upload(s))},Fc.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy())},sr("SymbolBuffers",Fc);var Uf=function(s,u,f){this.layoutVertexArray=new s,this.layoutAttributes=u,this.indexArray=new f,this.segments=new Y,this.collisionVertexArray=new kd};Uf.prototype.upload=function(s){this.layoutVertexBuffer=s.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=s.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=s.createVertexBuffer(this.collisionVertexArray,Uy.members,!0)},Uf.prototype.destroy=function(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy())},sr("CollisionBuffers",Uf);var ki=function(s){this.collisionBoxArray=s.collisionBoxArray,this.zoom=s.zoom,this.overscaling=s.overscaling,this.layers=s.layers,this.layerIds=this.layers.map((function(P){return P.id})),this.index=s.index,this.pixelRatio=s.pixelRatio,this.sourceLayerIndex=s.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=ao([]),this.placementViewportMatrix=ao([]);var u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Xg(this.zoom,u["text-size"]),this.iconSizeData=Xg(this.zoom,u["icon-size"]);var f=this.layers[0].layout,_=f.get("symbol-sort-key"),C=f.get("symbol-z-order");this.canOverlap=f.get("text-allow-overlap")||f.get("icon-allow-overlap")||f.get("text-ignore-placement")||f.get("icon-ignore-placement"),this.sortFeaturesByKey=C!=="viewport-y"&&_.constantOr(1)!==void 0,this.sortFeaturesByY=(C==="viewport-y"||C==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,f.get("symbol-placement")==="point"&&(this.writingModes=f.get("text-writing-mode").map((function(P){return Xl[P]}))),this.stateDependentLayerIds=this.layers.filter((function(P){return P.isStateDependent()})).map((function(P){return P.id})),this.sourceID=s.sourceID};ki.prototype.createArrays=function(){this.text=new Fc(new Rr(this.layers,this.zoom,(function(s){return/^text/.test(s)}))),this.icon=new Fc(new Rr(this.layers,this.zoom,(function(s){return/^icon/.test(s)}))),this.glyphOffsetArray=new k,this.lineVertexArray=new I,this.symbolInstances=new N},ki.prototype.calculateGlyphDependencies=function(s,u,f,_,C){for(var P=0;P<s.length;P++)if(u[s.charCodeAt(P)]=!0,(f||_)&&C){var L=Df[s.charAt(P)];L&&(u[L.charCodeAt(0)]=!0)}},ki.prototype.populate=function(s,u,f){var _=this.layers[0],C=_.layout,P=C.get("text-font"),L=C.get("text-field"),q=C.get("icon-image"),Z=(L.value.kind!=="constant"||L.value.value instanceof ks&&!L.value.value.isEmpty()||L.value.value.toString().length>0)&&(P.value.kind!=="constant"||P.value.value.length>0),ne=q.value.kind!=="constant"||!!q.value.value||Object.keys(q.parameters).length>0,se=C.get("symbol-sort-key");if(this.features=[],Z||ne){for(var he=u.iconDependencies,we=u.glyphDependencies,Ee=u.availableImages,$e=new En(this.zoom),He=0,st=s;He<st.length;He+=1){var Je=st[He],ft=Je.feature,gt=Je.id,wt=Je.index,Nt=Je.sourceLayerIndex,Bt=_._featureFilter.needGeometry,rr=Qn(ft,Bt);if(_._featureFilter.filter($e,rr,f)){Bt||(rr.geometry=In(ft));var ur=void 0;if(Z){var Br=_.getValueAndResolveTokens("text-field",rr,f,Ee),jr=ks.factory(Br);Bf(jr)&&(this.hasRTLText=!0),(!this.hasRTLText||nl()==="unavailable"||this.hasRTLText&&Ma.isParsed())&&(ur=C_(jr,_,rr))}var Wr=void 0;if(ne){var Nr=_.getValueAndResolveTokens("icon-image",rr,f,Ee);Wr=Nr instanceof ri?Nr:ri.fromString(Nr)}if(ur||Wr){var Tn=this.sortFeaturesByKey?se.evaluate(rr,{},f):void 0;if(this.features.push({id:gt,text:ur,icon:Wr,index:wt,sourceLayerIndex:Nt,geometry:rr.geometry,properties:ft.properties,type:F0[ft.type],sortKey:Tn}),Wr&&(he[Wr.name]=!0),ur){var Jr=P.evaluate(rr,{},f).join(","),Ir=C.get("text-rotation-alignment")==="map"&&C.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(Xl.vertical)>=0;for(var Ln=0,wn=ur.sections;Ln<wn.length;Ln+=1){var ei=wn[Ln];if(ei.image)he[ei.image.name]=!0;else{var br=La(ur.toString()),hi=ei.fontStack||Jr,Ss=we[hi]=we[hi]||{};this.calculateGlyphDependencies(ei.text,Ss,Ir,this.allowVerticalPlacement,br)}}}}}}C.get("symbol-placement")==="line"&&(this.features=(function(Vs){var $s={},As={},ea=[],fa=0;function Hs(ps){ea.push(Vs[ps]),fa++}function Co(ps,ta,To){var mi=As[ps];return delete As[ps],As[ta]=mi,ea[mi].geometry[0].pop(),ea[mi].geometry[0]=ea[mi].geometry[0].concat(To[0]),mi}function wa(ps,ta,To){var mi=$s[ta];return delete $s[ta],$s[ps]=mi,ea[mi].geometry[0].shift(),ea[mi].geometry[0]=To[0].concat(ea[mi].geometry[0]),mi}function ko(ps,ta,To){var mi=To?ta[0][ta[0].length-1]:ta[0][0];return ps+":"+mi.x+":"+mi.y}for(var Xi=0;Xi<Vs.length;Xi++){var fs=Vs[Xi],Dn=fs.geometry,Hi=fs.text?fs.text.toString():null;if(Hi){var Ti=ko(Hi,Dn),ii=ko(Hi,Dn,!0);if(Ti in As&&ii in $s&&As[Ti]!==$s[ii]){var pl=wa(Ti,ii,Dn),Eo=Co(Ti,ii,ea[pl].geometry);delete $s[Ti],delete As[ii],As[ko(Hi,ea[Eo].geometry,!0)]=Eo,ea[pl].geometry=null}else Ti in As?Co(Ti,ii,Dn):ii in $s?wa(Ti,ii,Dn):(Hs(Xi),$s[Ti]=fa-1,As[ii]=fa-1)}else Hs(Xi)}return ea.filter((function(ps){return ps.geometry}))})(this.features)),this.sortFeaturesByKey&&this.features.sort((function(Vs,$s){return Vs.sortKey-$s.sortKey}))}},ki.prototype.update=function(s,u,f){this.stateDependentLayers.length&&(this.text.programConfigurations.updatePaintArrays(s,u,this.layers,f),this.icon.programConfigurations.updatePaintArrays(s,u,this.layers,f))},ki.prototype.isEmpty=function(){return this.symbolInstances.length===0&&!this.hasRTLText},ki.prototype.uploadPending=function(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload},ki.prototype.upload=function(s){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(s),this.iconCollisionBox.upload(s)),this.text.upload(s,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload),this.icon.upload(s,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload),this.uploaded=!0},ki.prototype.destroyDebugData=function(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()},ki.prototype.destroy=function(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()},ki.prototype.addToLineVertexArray=function(s,u){var f=this.lineVertexArray.length;if(s.segment!==void 0){for(var _=s.dist(u[s.segment+1]),C=s.dist(u[s.segment]),P={},L=s.segment+1;L<u.length;L++)P[L]={x:u[L].x,y:u[L].y,tileUnitDistanceFromAnchor:_},L<u.length-1&&(_+=u[L+1].dist(u[L]));for(var q=s.segment||0;q>=0;q--)P[q]={x:u[q].x,y:u[q].y,tileUnitDistanceFromAnchor:C},q>0&&(C+=u[q-1].dist(u[q]));for(var Z=0;Z<u.length;Z++){var ne=P[Z];this.lineVertexArray.emplaceBack(ne.x,ne.y,ne.tileUnitDistanceFromAnchor)}}return{lineStartIndex:f,lineLength:this.lineVertexArray.length-f}},ki.prototype.addSymbols=function(s,u,f,_,C,P,L,q,Z,ne,se,he){for(var we=s.indexArray,Ee=s.layoutVertexArray,$e=s.segments.prepareSegment(4*u.length,Ee,we,this.canOverlap?P.sortKey:void 0),He=this.glyphOffsetArray.length,st=$e.vertexLength,Je=this.allowVerticalPlacement&&L===Xl.vertical?Math.PI/2:0,ft=P.text&&P.text.sections,gt=0;gt<u.length;gt++){var wt=u[gt],Nt=wt.tl,Bt=wt.tr,rr=wt.bl,ur=wt.br,Br=wt.tex,jr=wt.pixelOffsetTL,Wr=wt.pixelOffsetBR,Nr=wt.minFontScaleX,Tn=wt.minFontScaleY,Jr=wt.glyphOffset,Ir=wt.isSDF,Ln=wt.sectionIndex,wn=$e.vertexLength,ei=Jr[1];Zm(Ee,q.x,q.y,Nt.x,ei+Nt.y,Br.x,Br.y,f,Ir,jr.x,jr.y,Nr,Tn),Zm(Ee,q.x,q.y,Bt.x,ei+Bt.y,Br.x+Br.w,Br.y,f,Ir,Wr.x,jr.y,Nr,Tn),Zm(Ee,q.x,q.y,rr.x,ei+rr.y,Br.x,Br.y+Br.h,f,Ir,jr.x,Wr.y,Nr,Tn),Zm(Ee,q.x,q.y,ur.x,ei+ur.y,Br.x+Br.w,Br.y+Br.h,f,Ir,Wr.x,Wr.y,Nr,Tn),Qu(s.dynamicLayoutVertexArray,q,Je),we.emplaceBack(wn,wn+1,wn+2),we.emplaceBack(wn+1,wn+2,wn+3),$e.vertexLength+=4,$e.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Jr[0]),gt!==u.length-1&&Ln===u[gt+1].sectionIndex||s.programConfigurations.populatePaintArrays(Ee.length,P,P.index,{},he,ft&&ft[Ln])}s.placedSymbolArray.emplaceBack(q.x,q.y,He,this.glyphOffsetArray.length-He,st,Z,ne,q.segment,f?f[0]:0,f?f[1]:0,_[0],_[1],L,0,!1,0,se)},ki.prototype._addCollisionDebugVertex=function(s,u,f,_,C,P){return u.emplaceBack(0,0),s.emplaceBack(f.x,f.y,_,C,Math.round(P.x),Math.round(P.y))},ki.prototype.addCollisionDebugVertices=function(s,u,f,_,C,P,L){var q=C.segments.prepareSegment(4,C.layoutVertexArray,C.indexArray),Z=q.vertexLength,ne=C.layoutVertexArray,se=C.collisionVertexArray,he=L.anchorX,we=L.anchorY;this._addCollisionDebugVertex(ne,se,P,he,we,new j(s,u)),this._addCollisionDebugVertex(ne,se,P,he,we,new j(f,u)),this._addCollisionDebugVertex(ne,se,P,he,we,new j(f,_)),this._addCollisionDebugVertex(ne,se,P,he,we,new j(s,_)),q.vertexLength+=4;var Ee=C.indexArray;Ee.emplaceBack(Z,Z+1),Ee.emplaceBack(Z+1,Z+2),Ee.emplaceBack(Z+2,Z+3),Ee.emplaceBack(Z+3,Z),q.primitiveLength+=4},ki.prototype.addDebugCollisionBoxes=function(s,u,f,_){for(var C=s;C<u;C++){var P=this.collisionBoxArray.get(C);this.addCollisionDebugVertices(P.x1,P.y1,P.x2,P.y2,_?this.textCollisionBox:this.iconCollisionBox,P.anchorPoint,f)}},ki.prototype.generateCollisionDebugBuffers=function(){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new Uf(Zl,qy.members,ah),this.iconCollisionBox=new Uf(Zl,qy.members,ah);for(var s=0;s<this.symbolInstances.length;s++){var u=this.symbolInstances.get(s);this.addDebugCollisionBoxes(u.textBoxStartIndex,u.textBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.verticalTextBoxStartIndex,u.verticalTextBoxEndIndex,u,!0),this.addDebugCollisionBoxes(u.iconBoxStartIndex,u.iconBoxEndIndex,u,!1),this.addDebugCollisionBoxes(u.verticalIconBoxStartIndex,u.verticalIconBoxEndIndex,u,!1)}},ki.prototype._deserializeCollisionBoxesForSymbol=function(s,u,f,_,C,P,L,q,Z){for(var ne={},se=u;se<f;se++){var he=s.get(se);ne.textBox={x1:he.x1,y1:he.y1,x2:he.x2,y2:he.y2,anchorPointX:he.anchorPointX,anchorPointY:he.anchorPointY},ne.textFeatureIndex=he.featureIndex;break}for(var we=_;we<C;we++){var Ee=s.get(we);ne.verticalTextBox={x1:Ee.x1,y1:Ee.y1,x2:Ee.x2,y2:Ee.y2,anchorPointX:Ee.anchorPointX,anchorPointY:Ee.anchorPointY},ne.verticalTextFeatureIndex=Ee.featureIndex;break}for(var $e=P;$e<L;$e++){var He=s.get($e);ne.iconBox={x1:He.x1,y1:He.y1,x2:He.x2,y2:He.y2,anchorPointX:He.anchorPointX,anchorPointY:He.anchorPointY},ne.iconFeatureIndex=He.featureIndex;break}for(var st=q;st<Z;st++){var Je=s.get(st);ne.verticalIconBox={x1:Je.x1,y1:Je.y1,x2:Je.x2,y2:Je.y2,anchorPointX:Je.anchorPointX,anchorPointY:Je.anchorPointY},ne.verticalIconFeatureIndex=Je.featureIndex;break}return ne},ki.prototype.deserializeCollisionBoxes=function(s){this.collisionArrays=[];for(var u=0;u<this.symbolInstances.length;u++){var f=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(s,f.textBoxStartIndex,f.textBoxEndIndex,f.verticalTextBoxStartIndex,f.verticalTextBoxEndIndex,f.iconBoxStartIndex,f.iconBoxEndIndex,f.verticalIconBoxStartIndex,f.verticalIconBoxEndIndex))}},ki.prototype.hasTextData=function(){return this.text.segments.get().length>0},ki.prototype.hasIconData=function(){return this.icon.segments.get().length>0},ki.prototype.hasDebugData=function(){return this.textCollisionBox&&this.iconCollisionBox},ki.prototype.hasTextCollisionBoxData=function(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0},ki.prototype.hasIconCollisionBoxData=function(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0},ki.prototype.addIndicesForPlacedSymbol=function(s,u){for(var f=s.placedSymbolArray.get(u),_=f.vertexStartIndex+4*f.numGlyphs,C=f.vertexStartIndex;C<_;C+=4)s.indexArray.emplaceBack(C,C+1,C+2),s.indexArray.emplaceBack(C+1,C+2,C+3)},ki.prototype.getSortedSymbolIndexes=function(s){if(this.sortedAngle===s&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;for(var u=Math.sin(s),f=Math.cos(s),_=[],C=[],P=[],L=0;L<this.symbolInstances.length;++L){P.push(L);var q=this.symbolInstances.get(L);_.push(0|Math.round(u*q.anchorX+f*q.anchorY)),C.push(q.featureIndex)}return P.sort((function(Z,ne){return _[Z]-_[ne]||C[ne]-C[Z]})),P},ki.prototype.addToSortKeyRanges=function(s,u){var f=this.sortKeyRanges[this.sortKeyRanges.length-1];f&&f.sortKey===u?f.symbolInstanceEnd=s+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:s,symbolInstanceEnd:s+1})},ki.prototype.sortFeatures=function(s){var u=this;if(this.sortFeaturesByY&&this.sortedAngle!==s&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(s),this.sortedAngle=s,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(var f=0,_=this.symbolInstanceIndexes;f<_.length;f+=1){var C=this.symbolInstances.get(_[f]);this.featureSortOrder.push(C.featureIndex),[C.rightJustifiedTextSymbolIndex,C.centerJustifiedTextSymbolIndex,C.leftJustifiedTextSymbolIndex].forEach((function(P,L,q){P>=0&&q.indexOf(P)===L&&u.addIndicesForPlacedSymbol(u.text,P)})),C.verticalPlacedTextSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.text,C.verticalPlacedTextSymbolIndex),C.placedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,C.placedIconSymbolIndex),C.verticalPlacedIconSymbolIndex>=0&&this.addIndicesForPlacedSymbol(this.icon,C.verticalPlacedIconSymbolIndex)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}},sr("SymbolBucket",ki,{omit:["layers","collisionBoxArray","features","compareText"]}),ki.MAX_GLYPHS=65535,ki.addDynamicAttributes=Qu;var ed=new gn({"symbol-placement":new qr(ke.layout_symbol["symbol-placement"]),"symbol-spacing":new qr(ke.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new qr(ke.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Er(ke.layout_symbol["symbol-sort-key"]),"symbol-z-order":new qr(ke.layout_symbol["symbol-z-order"]),"icon-allow-overlap":new qr(ke.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new qr(ke.layout_symbol["icon-ignore-placement"]),"icon-optional":new qr(ke.layout_symbol["icon-optional"]),"icon-rotation-alignment":new qr(ke.layout_symbol["icon-rotation-alignment"]),"icon-size":new Er(ke.layout_symbol["icon-size"]),"icon-text-fit":new qr(ke.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new qr(ke.layout_symbol["icon-text-fit-padding"]),"icon-image":new Er(ke.layout_symbol["icon-image"]),"icon-rotate":new Er(ke.layout_symbol["icon-rotate"]),"icon-padding":new qr(ke.layout_symbol["icon-padding"]),"icon-keep-upright":new qr(ke.layout_symbol["icon-keep-upright"]),"icon-offset":new Er(ke.layout_symbol["icon-offset"]),"icon-anchor":new Er(ke.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new qr(ke.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new qr(ke.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new qr(ke.layout_symbol["text-rotation-alignment"]),"text-field":new Er(ke.layout_symbol["text-field"]),"text-font":new Er(ke.layout_symbol["text-font"]),"text-size":new Er(ke.layout_symbol["text-size"]),"text-max-width":new Er(ke.layout_symbol["text-max-width"]),"text-line-height":new qr(ke.layout_symbol["text-line-height"]),"text-letter-spacing":new Er(ke.layout_symbol["text-letter-spacing"]),"text-justify":new Er(ke.layout_symbol["text-justify"]),"text-radial-offset":new Er(ke.layout_symbol["text-radial-offset"]),"text-variable-anchor":new qr(ke.layout_symbol["text-variable-anchor"]),"text-anchor":new Er(ke.layout_symbol["text-anchor"]),"text-max-angle":new qr(ke.layout_symbol["text-max-angle"]),"text-writing-mode":new qr(ke.layout_symbol["text-writing-mode"]),"text-rotate":new Er(ke.layout_symbol["text-rotate"]),"text-padding":new qr(ke.layout_symbol["text-padding"]),"text-keep-upright":new qr(ke.layout_symbol["text-keep-upright"]),"text-transform":new Er(ke.layout_symbol["text-transform"]),"text-offset":new Er(ke.layout_symbol["text-offset"]),"text-allow-overlap":new qr(ke.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new qr(ke.layout_symbol["text-ignore-placement"]),"text-optional":new qr(ke.layout_symbol["text-optional"])}),iv={paint:new gn({"icon-opacity":new Er(ke.paint_symbol["icon-opacity"]),"icon-color":new Er(ke.paint_symbol["icon-color"]),"icon-halo-color":new Er(ke.paint_symbol["icon-halo-color"]),"icon-halo-width":new Er(ke.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Er(ke.paint_symbol["icon-halo-blur"]),"icon-translate":new qr(ke.paint_symbol["icon-translate"]),"icon-translate-anchor":new qr(ke.paint_symbol["icon-translate-anchor"]),"text-opacity":new Er(ke.paint_symbol["text-opacity"]),"text-color":new Er(ke.paint_symbol["text-color"],{runtimeType:fr,getOverride:function(s){return s.textColor},hasOverride:function(s){return!!s.textColor}}),"text-halo-color":new Er(ke.paint_symbol["text-halo-color"]),"text-halo-width":new Er(ke.paint_symbol["text-halo-width"]),"text-halo-blur":new Er(ke.paint_symbol["text-halo-blur"]),"text-translate":new qr(ke.paint_symbol["text-translate"]),"text-translate-anchor":new qr(ke.paint_symbol["text-translate-anchor"])}),layout:ed},td=function(s){this.type=s.property.overrides?s.property.overrides.runtimeType:mr,this.defaultValue=s};td.prototype.evaluate=function(s){if(s.formattedSection){var u=this.defaultValue.property.overrides;if(u&&u.hasOverride(s.formattedSection))return u.getOverride(s.formattedSection)}return s.feature&&s.featureState?this.defaultValue.evaluate(s.feature,s.featureState):this.defaultValue.property.specification.default},td.prototype.eachChild=function(s){this.defaultValue.isConstant()||s(this.defaultValue.value._styleExpression.expression)},td.prototype.outputDefined=function(){return!1},td.prototype.serialize=function(){return null},sr("FormatSectionOverride",td,{omit:["defaultValue"]});var Km=(function(s){function u(f){s.call(this,f,iv)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.recalculate=function(f,_){if(s.prototype.recalculate.call(this,f,_),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment")),this.layout.get("symbol-placement")==="point"){var C=this.layout.get("text-writing-mode");if(C){for(var P=[],L=0,q=C;L<q.length;L+=1){var Z=q[L];P.indexOf(Z)<0&&P.push(Z)}this.layout._values["text-writing-mode"]=P}else this.layout._values["text-writing-mode"]=["horizontal"]}this._setPaintOverrides()},u.prototype.getValueAndResolveTokens=function(f,_,C,P){var L=this.layout.get(f).evaluate(_,{},C,P),q=this._unevaluatedLayout._values[f];return q.isDataDriven()||Xo(q.value)||!L?L:(function(Z,ne){return ne.replace(/{([^{}]+)}/g,(function(se,he){return he in Z?String(Z[he]):""}))})(_.properties,L)},u.prototype.createBucket=function(f){return new ki(f)},u.prototype.queryRadius=function(){return 0},u.prototype.queryIntersectsFeature=function(){return!1},u.prototype._setPaintOverrides=function(){for(var f=0,_=iv.paint.overridableProperties;f<_.length;f+=1){var C=_[f];if(u.hasPaintOverride(this.layout,C)){var P,L=this.paint.get(C),q=new td(L),Z=new hc(q,L.property.specification);P=L.value.kind==="constant"||L.value.kind==="source"?new iu("source",Z):new Jo("composite",Z,L.value.zoomStops,L.value._interpolationType),this.paint._values[C]=new Wi(L.property,P,L.parameters)}}},u.prototype._handleOverridablePaintPropertyUpdate=function(f,_,C){return!(!this.layout||_.isDataDriven()||C.isDataDriven())&&u.hasPaintOverride(this.layout,f)},u.hasPaintOverride=function(f,_){var C=f.get("text-field"),P=iv.paint.properties[_],L=!1,q=function(se){for(var he=0,we=se;he<we.length;he+=1)if(P.overrides&&P.overrides.hasOverride(we[he]))return void(L=!0)};if(C.value.kind==="constant"&&C.value.value instanceof ks)q(C.value.value.sections);else if(C.value.kind==="source"){var Z=function(se){L||(se instanceof ya&&es(se.value)===$n?q(se.value.sections):se instanceof cs?q(se.sections):se.eachChild(Z))},ne=C.value;ne._styleExpression&&Z(ne._styleExpression.expression)}return L},u})(Is),Xm={paint:new gn({"background-color":new qr(ke.paint_background["background-color"]),"background-pattern":new Ci(ke.paint_background["background-pattern"]),"background-opacity":new qr(ke.paint_background["background-opacity"])})},Dp=(function(s){function u(f){s.call(this,f,Xm)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u})(Is),B0={paint:new gn({"raster-opacity":new qr(ke.paint_raster["raster-opacity"]),"raster-hue-rotate":new qr(ke.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new qr(ke.paint_raster["raster-brightness-min"]),"raster-brightness-max":new qr(ke.paint_raster["raster-brightness-max"]),"raster-saturation":new qr(ke.paint_raster["raster-saturation"]),"raster-contrast":new qr(ke.paint_raster["raster-contrast"]),"raster-resampling":new qr(ke.paint_raster["raster-resampling"]),"raster-fade-duration":new qr(ke.paint_raster["raster-fade-duration"])})},U0=(function(s){function u(f){s.call(this,f,B0)}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u})(Is),Jm=(function(s){function u(f){s.call(this,f,{}),this.implementation=f}return s&&(u.__proto__=s),(u.prototype=Object.create(s&&s.prototype)).constructor=u,u.prototype.is3D=function(){return this.implementation.renderingMode==="3d"},u.prototype.hasOffscreenPass=function(){return this.implementation.prerender!==void 0},u.prototype.recalculate=function(){},u.prototype.updateTransitions=function(){},u.prototype.hasTransition=function(){},u.prototype.serialize=function(){},u.prototype.onAdd=function(f){this.implementation.onAdd&&this.implementation.onAdd(f,f.painter.context.gl)},u.prototype.onRemove=function(f){this.implementation.onRemove&&this.implementation.onRemove(f,f.painter.context.gl)},u})(Is),q0={circle:kf,heatmap:Tf,hillshade:Zh,fill:j0,"fill-extrusion":S0,line:E0,symbol:Km,background:Dp,raster:U0},Qm=T.HTMLImageElement,rx=T.HTMLCanvasElement,V0=T.HTMLVideoElement,$0=T.ImageData,Bi=T.ImageBitmap,$i=function(s,u,f,_){this.context=s,this.format=f,this.texture=s.gl.createTexture(),this.update(u,_)};$i.prototype.update=function(s,u,f){var _=s.width,C=s.height,P=!(this.size&&this.size[0]===_&&this.size[1]===C||f),L=this.context,q=L.gl;if(this.useMipmap=!!(u&&u.useMipmap),q.bindTexture(q.TEXTURE_2D,this.texture),L.pixelStoreUnpackFlipY.set(!1),L.pixelStoreUnpack.set(1),L.pixelStoreUnpackPremultiplyAlpha.set(this.format===q.RGBA&&(!u||u.premultiply!==!1)),P)this.size=[_,C],s instanceof Qm||s instanceof rx||s instanceof V0||s instanceof $0||Bi&&s instanceof Bi?q.texImage2D(q.TEXTURE_2D,0,this.format,this.format,q.UNSIGNED_BYTE,s):q.texImage2D(q.TEXTURE_2D,0,this.format,_,C,0,this.format,q.UNSIGNED_BYTE,s.data);else{var Z=f||{x:0,y:0},ne=Z.x,se=Z.y;s instanceof Qm||s instanceof rx||s instanceof V0||s instanceof $0||Bi&&s instanceof Bi?q.texSubImage2D(q.TEXTURE_2D,0,ne,se,q.RGBA,q.UNSIGNED_BYTE,s):q.texSubImage2D(q.TEXTURE_2D,0,ne,se,_,C,q.RGBA,q.UNSIGNED_BYTE,s.data)}this.useMipmap&&this.isSizePowerOfTwo()&&q.generateMipmap(q.TEXTURE_2D)},$i.prototype.bind=function(s,u,f){var _=this.context.gl;_.bindTexture(_.TEXTURE_2D,this.texture),f!==_.LINEAR_MIPMAP_NEAREST||this.isSizePowerOfTwo()||(f=_.LINEAR),s!==this.filter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,s),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,f||s),this.filter=s),u!==this.wrap&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrap=u)},$i.prototype.isSizePowerOfTwo=function(){return this.size[0]===this.size[1]&&Math.log(this.size[0])/Math.LN2%1==0},$i.prototype.destroy=function(){this.context.gl.deleteTexture(this.texture),this.texture=null};var yi=function(s){var u=this;this._callback=s,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=function(){u._triggered=!1,u._callback()})};yi.prototype.trigger=function(){var s=this;this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout((function(){s._triggered=!1,s._callback()}),0))},yi.prototype.remove=function(){delete this._channel,this._callback=function(){}};var di=function(s,u,f){this.target=s,this.parent=u,this.mapId=f,this.callbacks={},this.tasks={},this.taskQueue=[],this.cancelCallbacks={},K(["receive","process"],this),this.invoker=new yi(this.process),this.target.addEventListener("message",this.receive,!1),this.globalScope=Q()?s:T};function hs(s,u,f){var _=2*Math.PI*6378137/256/Math.pow(2,f);return[s*_-2*Math.PI*6378137/2,u*_-2*Math.PI*6378137/2]}di.prototype.send=function(s,u,f,_,C){var P=this;C===void 0&&(C=!1);var L=Math.round(1e18*Math.random()).toString(36).substring(0,10);f&&(this.callbacks[L]=f);var q=Ue(this.globalScope)?void 0:[];return this.target.postMessage({id:L,type:s,hasCallback:!!f,targetMapId:_,mustQueue:C,sourceMapId:this.mapId,data:bo(u,q)},q),{cancel:function(){f&&delete P.callbacks[L],P.target.postMessage({id:L,type:"<cancel>",targetMapId:_,sourceMapId:P.mapId})}}},di.prototype.receive=function(s){var u=s.data,f=u.id;if(f&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){delete this.tasks[f];var _=this.cancelCallbacks[f];delete this.cancelCallbacks[f],_&&_()}else Q()||u.mustQueue?(this.tasks[f]=u,this.taskQueue.push(f),this.invoker.trigger()):this.processTask(f,u)},di.prototype.process=function(){if(this.taskQueue.length){var s=this.taskQueue.shift(),u=this.tasks[s];delete this.tasks[s],this.taskQueue.length&&this.invoker.trigger(),u&&this.processTask(s,u)}},di.prototype.processTask=function(s,u){var f=this;if(u.type==="<response>"){var _=this.callbacks[s];delete this.callbacks[s],_&&(u.error?_(Xs(u.error)):_(null,Xs(u.data)))}else{var C=!1,P=Ue(this.globalScope)?void 0:[],L=u.hasCallback?function(se,he){C=!0,delete f.cancelCallbacks[s],f.target.postMessage({id:s,type:"<response>",sourceMapId:f.mapId,error:se?bo(se):null,data:bo(he,P)},P)}:function(se){C=!0},q=null,Z=Xs(u.data);if(this.parent[u.type])q=this.parent[u.type](u.sourceMapId,Z,L);else if(this.parent.getWorkerSource){var ne=u.type.split(".");q=this.parent.getWorkerSource(u.sourceMapId,ne[0],Z.source)[ne[1]](Z,L)}else L(new Error("Could not find function "+u.type));!C&&q&&q.cancel&&(this.cancelCallbacks[s]=q.cancel)}},di.prototype.remove=function(){this.invoker.remove(),this.target.removeEventListener("message",this.receive,!1)};var Mi=function(s,u){s&&(u?this.setSouthWest(s).setNorthEast(u):s.length===4?this.setSouthWest([s[0],s[1]]).setNorthEast([s[2],s[3]]):this.setSouthWest(s[0]).setNorthEast(s[1]))};Mi.prototype.setNorthEast=function(s){return this._ne=s instanceof Ei?new Ei(s.lng,s.lat):Ei.convert(s),this},Mi.prototype.setSouthWest=function(s){return this._sw=s instanceof Ei?new Ei(s.lng,s.lat):Ei.convert(s),this},Mi.prototype.extend=function(s){var u,f,_=this._sw,C=this._ne;if(s instanceof Ei)u=s,f=s;else{if(!(s instanceof Mi))return Array.isArray(s)?s.length===4||s.every(Array.isArray)?this.extend(Mi.convert(s)):this.extend(Ei.convert(s)):this;if(f=s._ne,!(u=s._sw)||!f)return this}return _||C?(_.lng=Math.min(u.lng,_.lng),_.lat=Math.min(u.lat,_.lat),C.lng=Math.max(f.lng,C.lng),C.lat=Math.max(f.lat,C.lat)):(this._sw=new Ei(u.lng,u.lat),this._ne=new Ei(f.lng,f.lat)),this},Mi.prototype.getCenter=function(){return new Ei((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)},Mi.prototype.getSouthWest=function(){return this._sw},Mi.prototype.getNorthEast=function(){return this._ne},Mi.prototype.getNorthWest=function(){return new Ei(this.getWest(),this.getNorth())},Mi.prototype.getSouthEast=function(){return new Ei(this.getEast(),this.getSouth())},Mi.prototype.getWest=function(){return this._sw.lng},Mi.prototype.getSouth=function(){return this._sw.lat},Mi.prototype.getEast=function(){return this._ne.lng},Mi.prototype.getNorth=function(){return this._ne.lat},Mi.prototype.toArray=function(){return[this._sw.toArray(),this._ne.toArray()]},Mi.prototype.toString=function(){return"LngLatBounds("+this._sw.toString()+", "+this._ne.toString()+")"},Mi.prototype.isEmpty=function(){return!(this._sw&&this._ne)},Mi.prototype.contains=function(s){var u=Ei.convert(s),f=u.lng,_=u.lat,C=this._sw.lng<=f&&f<=this._ne.lng;return this._sw.lng>this._ne.lng&&(C=this._sw.lng>=f&&f>=this._ne.lng),this._sw.lat<=_&&_<=this._ne.lat&&C},Mi.convert=function(s){return!s||s instanceof Mi?s:new Mi(s)};var Ei=function(s,u){if(isNaN(s)||isNaN(u))throw new Error("Invalid LngLat object: ("+s+", "+u+")");if(this.lng=+s,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")};Ei.prototype.wrap=function(){return new Ei(B(this.lng,-180,180),this.lat)},Ei.prototype.toArray=function(){return[this.lng,this.lat]},Ei.prototype.toString=function(){return"LngLat("+this.lng+", "+this.lat+")"},Ei.prototype.distanceTo=function(s){var u=Math.PI/180,f=this.lat*u,_=s.lat*u,C=Math.sin(f)*Math.sin(_)+Math.cos(f)*Math.cos(_)*Math.cos((s.lng-this.lng)*u);return 63710088e-1*Math.acos(Math.min(C,1))},Ei.prototype.toBounds=function(s){s===void 0&&(s=0);var u=360*s/40075017,f=u/Math.cos(Math.PI/180*this.lat);return new Mi(new Ei(this.lng-f,this.lat-u),new Ei(this.lng+f,this.lat+u))},Ei.convert=function(s){if(s instanceof Ei)return s;if(Array.isArray(s)&&(s.length===2||s.length===3))return new Ei(Number(s[0]),Number(s[1]));if(!Array.isArray(s)&&typeof s=="object"&&s!==null)return new Ei(Number("lng"in s?s.lng:s.lon),Number(s.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")};var qf=2*Math.PI*63710088e-1;function sv(s){return qf*Math.cos(s*Math.PI/180)}function Fd(s){return(180+s)/360}function Fa(s){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+s*Math.PI/360)))/360}function fh(s,u){return s/sv(u)}function ph(s){return 360/Math.PI*Math.atan(Math.exp((180-360*s)*Math.PI/180))-90}var mh=function(s,u,f){f===void 0&&(f=0),this.x=+s,this.y=+u,this.z=+f};mh.fromLngLat=function(s,u){u===void 0&&(u=0);var f=Ei.convert(s);return new mh(Fd(f.lng),Fa(f.lat),fh(u,f.lat))},mh.prototype.toLngLat=function(){return new Ei(360*this.x-180,ph(this.y))},mh.prototype.toAltitude=function(){return this.z*sv(ph(this.y))},mh.prototype.meterInMercatorCoordinateUnits=function(){return 1/qf*(s=ph(this.y),1/Math.cos(s*Math.PI/180));var s};var Fo=function(s,u,f){this.z=s,this.x=u,this.y=f,this.key=fl(0,s,s,u,f)};Fo.prototype.equals=function(s){return this.z===s.z&&this.x===s.x&&this.y===s.y},Fo.prototype.url=function(s,u){var f,_,C,P,L,q=(_=this.y,C=this.z,P=hs(256*(f=this.x),256*(_=Math.pow(2,C)-_-1),C),L=hs(256*(f+1),256*(_+1),C),P[0]+","+P[1]+","+L[0]+","+L[1]),Z=(function(ne,se,he){for(var we,Ee="",$e=ne;$e>0;$e--)Ee+=(se&(we=1<<$e-1)?1:0)+(he&we?2:0);return Ee})(this.z,this.x,this.y);return s[(this.x+this.y)%s.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace("{z}",String(this.z)).replace("{x}",String(this.x)).replace("{y}",String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",Z).replace("{bbox-epsg-3857}",q)},Fo.prototype.getTilePoint=function(s){var u=Math.pow(2,this.z);return new j(8192*(s.x*u-this.x),8192*(s.y*u-this.y))},Fo.prototype.toString=function(){return this.z+"/"+this.x+"/"+this.y};var Vf=function(s,u){this.wrap=s,this.canonical=u,this.key=fl(s,u.z,u.z,u.x,u.y)},qs=function(s,u,f,_,C){this.overscaledZ=s,this.wrap=u,this.canonical=new Fo(f,+_,+C),this.key=fl(u,s,f,_,C)};function fl(s,u,f,_,C){(s*=2)<0&&(s=-1*s-1);var P=1<<f;return(P*P*s+P*C+_).toString(36)+f.toString(36)+u.toString(36)}qs.prototype.equals=function(s){return this.overscaledZ===s.overscaledZ&&this.wrap===s.wrap&&this.canonical.equals(s.canonical)},qs.prototype.scaledTo=function(s){var u=this.canonical.z-s;return s>this.canonical.z?new qs(s,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new qs(s,this.wrap,s,this.canonical.x>>u,this.canonical.y>>u)},qs.prototype.calculateScaledKey=function(s,u){var f=this.canonical.z-s;return s>this.canonical.z?fl(this.wrap*+u,s,this.canonical.z,this.canonical.x,this.canonical.y):fl(this.wrap*+u,s,s,this.canonical.x>>f,this.canonical.y>>f)},qs.prototype.isChildOf=function(s){if(s.wrap!==this.wrap)return!1;var u=this.canonical.z-s.canonical.z;return s.overscaledZ===0||s.overscaledZ<this.overscaledZ&&s.canonical.x===this.canonical.x>>u&&s.canonical.y===this.canonical.y>>u},qs.prototype.children=function(s){if(this.overscaledZ>=s)return[new qs(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];var u=this.canonical.z+1,f=2*this.canonical.x,_=2*this.canonical.y;return[new qs(u,this.wrap,u,f,_),new qs(u,this.wrap,u,f+1,_),new qs(u,this.wrap,u,f,_+1),new qs(u,this.wrap,u,f+1,_+1)]},qs.prototype.isLessThan=function(s){return this.wrap<s.wrap||!(this.wrap>s.wrap)&&(this.overscaledZ<s.overscaledZ||!(this.overscaledZ>s.overscaledZ)&&(this.canonical.x<s.canonical.x||!(this.canonical.x>s.canonical.x)&&this.canonical.y<s.canonical.y))},qs.prototype.wrapped=function(){return new qs(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)},qs.prototype.unwrapTo=function(s){return new qs(this.overscaledZ,s,this.canonical.z,this.canonical.x,this.canonical.y)},qs.prototype.overscaleFactor=function(){return Math.pow(2,this.overscaledZ-this.canonical.z)},qs.prototype.toUnwrapped=function(){return new Vf(this.wrap,this.canonical)},qs.prototype.toString=function(){return this.overscaledZ+"/"+this.canonical.x+"/"+this.canonical.y},qs.prototype.getTilePoint=function(s){return this.canonical.getTilePoint(new mh(s.x-this.wrap,s.y))},sr("CanonicalTileID",Fo),sr("OverscaledTileID",qs,{omit:["posMatrix"]});var rd=function(s,u,f){if(this.uid=s,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(f&&f!=="mapbox"&&f!=="terrarium")return fe('"'+f+'" is not a valid encoding type. Valid types include "mapbox" and "terrarium".');this.stride=u.height;var _=this.dim=u.height-2;this.data=new Uint32Array(u.data.buffer),this.encoding=f||"mapbox";for(var C=0;C<_;C++)this.data[this._idx(-1,C)]=this.data[this._idx(0,C)],this.data[this._idx(_,C)]=this.data[this._idx(_-1,C)],this.data[this._idx(C,-1)]=this.data[this._idx(C,0)],this.data[this._idx(C,_)]=this.data[this._idx(C,_-1)];this.data[this._idx(-1,-1)]=this.data[this._idx(0,0)],this.data[this._idx(_,-1)]=this.data[this._idx(_-1,0)],this.data[this._idx(-1,_)]=this.data[this._idx(0,_-1)],this.data[this._idx(_,_)]=this.data[this._idx(_-1,_-1)]};rd.prototype.get=function(s,u){var f=new Uint8Array(this.data.buffer),_=4*this._idx(s,u);return(this.encoding==="terrarium"?this._unpackTerrarium:this._unpackMapbox)(f[_],f[_+1],f[_+2])},rd.prototype.getUnpackVector=function(){return this.encoding==="terrarium"?[256,1,1/256,32768]:[6553.6,25.6,.1,1e4]},rd.prototype._idx=function(s,u){if(s<-1||s>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(s+1)},rd.prototype._unpackMapbox=function(s,u,f){return(256*s*256+256*u+f)/10-1e4},rd.prototype._unpackTerrarium=function(s,u,f){return 256*s+u+f/256-32768},rd.prototype.getPixels=function(){return new oo({width:this.stride,height:this.stride},new Uint8Array(this.data.buffer))},rd.prototype.backfillBorder=function(s,u,f){if(this.dim!==s.dim)throw new Error("dem dimension mismatch");var _=u*this.dim,C=u*this.dim+this.dim,P=f*this.dim,L=f*this.dim+this.dim;switch(u){case-1:_=C-1;break;case 1:C=_+1}switch(f){case-1:P=L-1;break;case 1:L=P+1}for(var q=-u*this.dim,Z=-f*this.dim,ne=P;ne<L;ne++)for(var se=_;se<C;se++)this.data[this._idx(se,ne)]=s.data[this._idx(se+q,ne+Z)]},sr("DEMData",rd);var $f=function(s){this._stringToNumber={},this._numberToString=[];for(var u=0;u<s.length;u++){var f=s[u];this._stringToNumber[f]=u,this._numberToString[u]=f}};$f.prototype.encode=function(s){return this._stringToNumber[s]},$f.prototype.decode=function(s){return this._numberToString[s]};var eg=function(s,u,f,_,C){this.type="Feature",this._vectorTileFeature=s,s._z=u,s._x=f,s._y=_,this.properties=s.properties,this.id=C},Op={geometry:{configurable:!0}};Op.geometry.get=function(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._vectorTileFeature._x,this._vectorTileFeature._y,this._vectorTileFeature._z).geometry),this._geometry},Op.geometry.set=function(s){this._geometry=s},eg.prototype.toJSON=function(){var s={geometry:this.geometry};for(var u in this)u!=="_geometry"&&u!=="_vectorTileFeature"&&(s[u]=this[u]);return s},Object.defineProperties(eg.prototype,Op);var gh=function(){this.state={},this.stateChanges={},this.deletedStates={}};gh.prototype.updateState=function(s,u,f){var _=String(u);if(this.stateChanges[s]=this.stateChanges[s]||{},this.stateChanges[s][_]=this.stateChanges[s][_]||{},G(this.stateChanges[s][_],f),this.deletedStates[s]===null)for(var C in this.deletedStates[s]={},this.state[s])C!==_&&(this.deletedStates[s][C]=null);else if(this.deletedStates[s]&&this.deletedStates[s][_]===null)for(var P in this.deletedStates[s][_]={},this.state[s][_])f[P]||(this.deletedStates[s][_][P]=null);else for(var L in f)this.deletedStates[s]&&this.deletedStates[s][_]&&this.deletedStates[s][_][L]===null&&delete this.deletedStates[s][_][L]},gh.prototype.removeFeatureState=function(s,u,f){if(this.deletedStates[s]!==null){var _=String(u);if(this.deletedStates[s]=this.deletedStates[s]||{},f&&u!==void 0)this.deletedStates[s][_]!==null&&(this.deletedStates[s][_]=this.deletedStates[s][_]||{},this.deletedStates[s][_][f]=null);else if(u!==void 0)if(this.stateChanges[s]&&this.stateChanges[s][_])for(f in this.deletedStates[s][_]={},this.stateChanges[s][_])this.deletedStates[s][_][f]=null;else this.deletedStates[s][_]=null;else this.deletedStates[s]=null}},gh.prototype.getState=function(s,u){var f=String(u),_=G({},(this.state[s]||{})[f],(this.stateChanges[s]||{})[f]);if(this.deletedStates[s]===null)return{};if(this.deletedStates[s]){var C=this.deletedStates[s][u];if(C===null)return{};for(var P in C)delete _[P]}return _},gh.prototype.initializeTileState=function(s,u){s.setFeatureState(this.state,u)},gh.prototype.coalesceChanges=function(s,u){var f={};for(var _ in this.stateChanges){this.state[_]=this.state[_]||{};var C={};for(var P in this.stateChanges[_])this.state[_][P]||(this.state[_][P]={}),G(this.state[_][P],this.stateChanges[_][P]),C[P]=this.state[_][P];f[_]=C}for(var L in this.deletedStates){this.state[L]=this.state[L]||{};var q={};if(this.deletedStates[L]===null)for(var Z in this.state[L])q[Z]={},this.state[L][Z]={};else for(var ne in this.deletedStates[L]){if(this.deletedStates[L][ne]===null)this.state[L][ne]={};else for(var se=0,he=Object.keys(this.deletedStates[L][ne]);se<he.length;se+=1)delete this.state[L][ne][he[se]];q[ne]=this.state[L][ne]}f[L]=f[L]||{},G(f[L],q)}if(this.stateChanges={},this.deletedStates={},Object.keys(f).length!==0)for(var we in s)s[we].setFeatureState(f,u)};var Ql=function(s,u){this.tileID=s,this.x=s.canonical.x,this.y=s.canonical.y,this.z=s.canonical.z,this.grid=new la(8192,16,0),this.grid3D=new la(8192,16,0),this.featureIndexArray=new $,this.promoteId=u};function Ao(s,u,f,_,C){return Se(s,(function(P,L){var q=u instanceof Cd?u.get(L):null;return q&&q.evaluate?q.evaluate(f,_,C):q}))}function vh(s){for(var u=1/0,f=1/0,_=-1/0,C=-1/0,P=0,L=s;P<L.length;P+=1){var q=L[P];u=Math.min(u,q.x),f=Math.min(f,q.y),_=Math.max(_,q.x),C=Math.max(C,q.y)}return{minX:u,minY:f,maxX:_,maxY:C}}function zp(s,u){return u-s}Ql.prototype.insert=function(s,u,f,_,C,P){var L=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(f,_,C);for(var q=P?this.grid3D:this.grid,Z=0;Z<u.length;Z++){for(var ne=u[Z],se=[1/0,1/0,-1/0,-1/0],he=0;he<ne.length;he++){var we=ne[he];se[0]=Math.min(se[0],we.x),se[1]=Math.min(se[1],we.y),se[2]=Math.max(se[2],we.x),se[3]=Math.max(se[3],we.y)}se[0]<8192&&se[1]<8192&&se[2]>=0&&se[3]>=0&&q.insert(L,se[0],se[1],se[2],se[3])}},Ql.prototype.loadVTLayers=function(){return this.vtLayers||(this.vtLayers=new Mf.VectorTile(new $m(this.rawTileData)).layers,this.sourceLayerCoder=new $f(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"])),this.vtLayers},Ql.prototype.query=function(s,u,f,_){var C=this;this.loadVTLayers();for(var P=s.params||{},L=8192/s.tileSize/s.scale,q=ou(P.filter),Z=s.queryGeometry,ne=s.queryPadding*L,se=vh(Z),he=this.grid.query(se.minX-ne,se.minY-ne,se.maxX+ne,se.maxY+ne),we=vh(s.cameraQueryGeometry),Ee=this.grid3D.query(we.minX-ne,we.minY-ne,we.maxX+ne,we.maxY+ne,(function(wt,Nt,Bt,rr){return(function(ur,Br,jr,Wr,Nr){for(var Tn=0,Jr=ur;Tn<Jr.length;Tn+=1){var Ir=Jr[Tn];if(Br<=Ir.x&&jr<=Ir.y&&Wr>=Ir.x&&Nr>=Ir.y)return!0}var Ln=[new j(Br,jr),new j(Br,Nr),new j(Wr,Nr),new j(Wr,jr)];if(ur.length>2){for(var wn=0,ei=Ln;wn<ei.length;wn+=1)if(jo(ur,ei[wn]))return!0}for(var br=0;br<ur.length-1;br++)if(so(ur[br],ur[br+1],Ln))return!0;return!1})(s.cameraQueryGeometry,wt-ne,Nt-ne,Bt+ne,rr+ne)})),$e=0,He=Ee;$e<He.length;$e+=1)he.push(He[$e]);he.sort(zp);for(var st,Je={},ft=function(wt){var Nt=he[wt];if(Nt!==st){st=Nt;var Bt=C.featureIndexArray.get(Nt),rr=null;C.loadMatchingFeature(Je,Bt.bucketIndex,Bt.sourceLayerIndex,Bt.featureIndex,q,P.layers,P.availableImages,u,f,_,(function(ur,Br,jr){return rr||(rr=In(ur)),Br.queryIntersectsFeature(Z,ur,jr,rr,C.z,s.transform,L,s.pixelPosMatrix)}))}},gt=0;gt<he.length;gt++)ft(gt);return Je},Ql.prototype.loadMatchingFeature=function(s,u,f,_,C,P,L,q,Z,ne,se){var he=this.bucketLayerIDs[u];if(!P||(function(ur,Br){for(var jr=0;jr<ur.length;jr++)if(Br.indexOf(ur[jr])>=0)return!0;return!1})(P,he)){var we=this.sourceLayerCoder.decode(f),Ee=this.vtLayers[we].feature(_);if(C.needGeometry){var $e=Qn(Ee,!0);if(!C.filter(new En(this.tileID.overscaledZ),$e,this.tileID.canonical))return}else if(!C.filter(new En(this.tileID.overscaledZ),Ee))return;for(var He=this.getId(Ee,we),st=0;st<he.length;st++){var Je=he[st];if(!(P&&P.indexOf(Je)<0)){var ft=q[Je];if(ft){var gt={};He!==void 0&&ne&&(gt=ne.getState(ft.sourceLayer||"_geojsonTileLayer",He));var wt=G({},Z[Je]);wt.paint=Ao(wt.paint,ft.paint,Ee,gt,L),wt.layout=Ao(wt.layout,ft.layout,Ee,gt,L);var Nt=!se||se(Ee,ft,gt);if(Nt){var Bt=new eg(Ee,this.z,this.x,this.y,He);Bt.layer=wt;var rr=s[Je];rr===void 0&&(rr=s[Je]=[]),rr.push({featureIndex:_,feature:Bt,intersectionZ:Nt})}}}}}},Ql.prototype.lookupSymbolFeatures=function(s,u,f,_,C,P,L,q){var Z={};this.loadVTLayers();for(var ne=ou(C),se=0,he=s;se<he.length;se+=1)this.loadMatchingFeature(Z,f,_,he[se],ne,P,L,q,u);return Z},Ql.prototype.hasLayer=function(s){for(var u=0,f=this.bucketLayerIDs;u<f.length;u+=1)for(var _=0,C=f[u];_<C.length;_+=1)if(s===C[_])return!0;return!1},Ql.prototype.getId=function(s,u){var f=s.id;return this.promoteId&&typeof(f=s.properties[typeof this.promoteId=="string"?this.promoteId:this.promoteId[u]])=="boolean"&&(f=Number(f)),f},sr("FeatureIndex",Ql,{omit:["rawTileData","sourceLayerCoder"]});var Ns=function(s,u){this.tileID=s,this.uid=ee(),this.uses=0,this.tileSize=u,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.expiredRequestCount=0,this.state="loading"};Ns.prototype.registerFadeDuration=function(s){var u=s+this.timeAdded;u<tt.now()||this.fadeEndTime&&u<this.fadeEndTime||(this.fadeEndTime=u)},Ns.prototype.wasRequested=function(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"},Ns.prototype.loadVectorData=function(s,u,f){if(this.hasData()&&this.unloadVectorData(),this.state="loaded",s){for(var _ in s.featureIndex&&(this.latestFeatureIndex=s.featureIndex,s.rawTileData?(this.latestRawTileData=s.rawTileData,this.latestFeatureIndex.rawTileData=s.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=s.collisionBoxArray,this.buckets=(function(ne,se){var he={};if(!se)return he;for(var we=function(){var He=$e[Ee],st=He.layerIds.map((function(gt){return se.getLayer(gt)})).filter(Boolean);if(st.length!==0){He.layers=st,He.stateDependentLayerIds&&(He.stateDependentLayers=He.stateDependentLayerIds.map((function(gt){return st.filter((function(wt){return wt.id===gt}))[0]})));for(var Je=0,ft=st;Je<ft.length;Je+=1)he[ft[Je].id]=He}},Ee=0,$e=ne;Ee<$e.length;Ee+=1)we();return he})(s.buckets,u.style),this.hasSymbolBuckets=!1,this.buckets){var C=this.buckets[_];if(C instanceof ki){if(this.hasSymbolBuckets=!0,!f)break;C.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(var P in this.buckets){var L=this.buckets[P];if(L instanceof ki&&L.hasRTLText){this.hasRTLText=!0,Ma.isLoading()||Ma.isLoaded()||nl()!=="deferred"||_o();break}}for(var q in this.queryPadding=0,this.buckets){var Z=this.buckets[q];this.queryPadding=Math.max(this.queryPadding,u.style.getLayer(q).queryRadius(Z))}s.imageAtlas&&(this.imageAtlas=s.imageAtlas),s.glyphAtlasImage&&(this.glyphAtlasImage=s.glyphAtlasImage)}else this.collisionBoxArray=new x},Ns.prototype.unloadVectorData=function(){for(var s in this.buckets)this.buckets[s].destroy();this.buckets={},this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.imageAtlas&&(this.imageAtlas=null),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.latestFeatureIndex=null,this.state="unloaded"},Ns.prototype.getBucket=function(s){return this.buckets[s.id]},Ns.prototype.upload=function(s){for(var u in this.buckets){var f=this.buckets[u];f.uploadPending()&&f.upload(s)}var _=s.gl;this.imageAtlas&&!this.imageAtlas.uploaded&&(this.imageAtlasTexture=new $i(s,this.imageAtlas.image,_.RGBA),this.imageAtlas.uploaded=!0),this.glyphAtlasImage&&(this.glyphAtlasTexture=new $i(s,this.glyphAtlasImage,_.ALPHA),this.glyphAtlasImage=null)},Ns.prototype.prepare=function(s){this.imageAtlas&&this.imageAtlas.patchUpdatedImages(s,this.imageAtlasTexture)},Ns.prototype.queryRenderedFeatures=function(s,u,f,_,C,P,L,q,Z,ne){return this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData?this.latestFeatureIndex.query({queryGeometry:_,cameraQueryGeometry:C,scale:P,tileSize:this.tileSize,pixelPosMatrix:ne,transform:q,params:L,queryPadding:this.queryPadding*Z},s,u,f):{}},Ns.prototype.querySourceFeatures=function(s,u){var f=this.latestFeatureIndex;if(f&&f.rawTileData){var _=f.loadVTLayers(),C=u?u.sourceLayer:"",P=_._geojsonTileLayer||_[C];if(P)for(var L=ou(u&&u.filter),q=this.tileID.canonical,Z=q.z,ne=q.x,se=q.y,he={z:Z,x:ne,y:se},we=0;we<P.length;we++){var Ee=P.feature(we);if(L.needGeometry){var $e=Qn(Ee,!0);if(!L.filter(new En(this.tileID.overscaledZ),$e,this.tileID.canonical))continue}else if(!L.filter(new En(this.tileID.overscaledZ),Ee))continue;var He=f.getId(Ee,C),st=new eg(Ee,Z,ne,se,He);st.tile=he,s.push(st)}}},Ns.prototype.hasData=function(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"},Ns.prototype.patternsLoaded=function(){return this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length},Ns.prototype.setExpiryData=function(s){var u=this.expirationTime;if(s.cacheControl){var f=pe(s.cacheControl);f["max-age"]&&(this.expirationTime=Date.now()+1e3*f["max-age"])}else s.expires&&(this.expirationTime=new Date(s.expires).getTime());if(this.expirationTime){var _=Date.now(),C=!1;if(this.expirationTime>_)C=!1;else if(u)if(this.expirationTime<u)C=!0;else{var P=this.expirationTime-u;P?this.expirationTime=_+Math.max(P,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}},Ns.prototype.getExpiryTimeout=function(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)},Ns.prototype.setFeatureState=function(s,u){if(this.latestFeatureIndex&&this.latestFeatureIndex.rawTileData&&Object.keys(s).length!==0){var f=this.latestFeatureIndex.loadVTLayers();for(var _ in this.buckets)if(u.style.hasLayer(_)){var C=this.buckets[_],P=C.layers[0].sourceLayer||"_geojsonTileLayer",L=f[P],q=s[P];if(L&&q&&Object.keys(q).length!==0){C.update(q,L,this.imageAtlas&&this.imageAtlas.patternPositions||{});var Z=u&&u.style&&u.style.getLayer(_);Z&&(this.queryPadding=Math.max(this.queryPadding,Z.queryRadius(C)))}}}},Ns.prototype.holdingForFade=function(){return this.symbolFadeHoldUntil!==void 0},Ns.prototype.symbolFadeFinished=function(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<tt.now()},Ns.prototype.clearFadeHold=function(){this.symbolFadeHoldUntil=void 0},Ns.prototype.setHoldDuration=function(s){this.symbolFadeHoldUntil=tt.now()+s},Ns.prototype.setDependencies=function(s,u){for(var f={},_=0,C=u;_<C.length;_+=1)f[C[_]]=!0;this.dependencies[s]=f},Ns.prototype.hasDependency=function(s,u){for(var f=0,_=s;f<_.length;f+=1){var C=this.dependencies[_[f]];if(C){for(var P=0,L=u;P<L.length;P+=1)if(C[L[P]])return!0}}return!1};var Bd=T.performance,av=function(s){this._marks={start:[s.url,"start"].join("#"),end:[s.url,"end"].join("#"),measure:s.url.toString()},Bd.mark(this._marks.start)};av.prototype.finish=function(){Bd.mark(this._marks.end);var s=Bd.getEntriesByName(this._marks.measure);return s.length===0&&(Bd.measure(this._marks.measure,this._marks.start,this._marks.end),s=Bd.getEntriesByName(this._marks.measure),Bd.clearMarks(this._marks.start),Bd.clearMarks(this._marks.end),Bd.clearMeasures(this._marks.measure)),s},a.Actor=di,a.AlphaImage=Zu,a.CanonicalTileID=Fo,a.CollisionBoxArray=x,a.Color=Yn,a.DEMData=rd,a.DataConstantProperty=qr,a.DictionaryCoder=$f,a.EXTENT=8192,a.ErrorEvent=et,a.EvaluationParameters=En,a.Event=De,a.Evented=nt,a.FeatureIndex=Ql,a.FillBucket=Pu,a.FillExtrusionBucket=yc,a.ImageAtlas=gu,a.ImagePosition=Ep,a.LineBucket=dl,a.LngLat=Ei,a.LngLatBounds=Mi,a.MercatorCoordinate=mh,a.ONE_EM=24,a.OverscaledTileID=qs,a.Point=j,a.Point$1=j,a.Properties=gn,a.Protobuf=$m,a.RGBAImage=oo,a.RequestManager=_t,a.RequestPerformance=av,a.ResourceType=zn,a.SegmentVector=Y,a.SourceFeatureState=gh,a.StructArrayLayout1ui2=Us,a.StructArrayLayout2f1f2i16=ol,a.StructArrayLayout2i4=Bs,a.StructArrayLayout3ui6=Oo,a.StructArrayLayout4i8=uu,a.SymbolBucket=ki,a.Texture=$i,a.Tile=Ns,a.Transitionable=qi,a.Uniform1f=yt,a.Uniform1i=rt,a.Uniform2f=mt,a.Uniform3f=Dt,a.Uniform4f=Rt,a.UniformColor=vr,a.UniformMatrix4f=Fr,a.UnwrappedTileID=Vf,a.ValidationError=qe,a.WritingMode=Xl,a.ZoomHistory=Hu,a.add=function(s,u,f){return s[0]=u[0]+f[0],s[1]=u[1]+f[1],s[2]=u[2]+f[2],s},a.addDynamicAttributes=Qu,a.asyncAll=function(s,u,f){if(!s.length)return f(null,[]);var _=s.length,C=new Array(s.length),P=null;s.forEach((function(L,q){u(L,(function(Z,ne){Z&&(P=Z),C[q]=ne,--_==0&&f(P,C)}))}))},a.bezier=O,a.bindAll=K,a.browser=tt,a.cacheEntryPossiblyAdded=function(s){++yn>Ri&&(s.getActor().send("enforceCacheSizeLimit",_r),yn=0)},a.clamp=F,a.clearTileCache=function(s){var u=T.caches.delete("mapbox-tiles");s&&u.catch(s).then((function(){return s()}))},a.clipLine=zd,a.clone=function(s){var u=new Mn(16);return u[0]=s[0],u[1]=s[1],u[2]=s[2],u[3]=s[3],u[4]=s[4],u[5]=s[5],u[6]=s[6],u[7]=s[7],u[8]=s[8],u[9]=s[9],u[10]=s[10],u[11]=s[11],u[12]=s[12],u[13]=s[13],u[14]=s[14],u[15]=s[15],u},a.clone$1=re,a.clone$2=function(s){var u=new Mn(3);return u[0]=s[0],u[1]=s[1],u[2]=s[2],u},a.collisionCircleLayout=P0,a.config=Qe,a.create=function(){var s=new Mn(16);return Mn!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=0,s[12]=0,s[13]=0,s[14]=0),s[0]=1,s[5]=1,s[10]=1,s[15]=1,s},a.create$1=function(){var s=new Mn(9);return Mn!=Float32Array&&(s[1]=0,s[2]=0,s[3]=0,s[5]=0,s[6]=0,s[7]=0),s[0]=1,s[4]=1,s[8]=1,s},a.create$2=function(){var s=new Mn(4);return Mn!=Float32Array&&(s[1]=0,s[2]=0),s[0]=1,s[3]=1,s},a.createCommonjsModule=p,a.createExpression=Vl,a.createLayout=ua,a.createStyleLayer=function(s){return s.type==="custom"?new Jm(s):new q0[s.type](s)},a.cross=function(s,u,f){var _=u[0],C=u[1],P=u[2],L=f[0],q=f[1],Z=f[2];return s[0]=C*Z-P*q,s[1]=P*L-_*Z,s[2]=_*q-C*L,s},a.deepEqual=function s(u,f){if(Array.isArray(u)){if(!Array.isArray(f)||u.length!==f.length)return!1;for(var _=0;_<u.length;_++)if(!s(u[_],f[_]))return!1;return!0}if(typeof u=="object"&&u!==null&&f!==null){if(typeof f!="object"||Object.keys(u).length!==Object.keys(f).length)return!1;for(var C in u)if(!s(u[C],f[C]))return!1;return!0}return u===f},a.dot=function(s,u){return s[0]*u[0]+s[1]*u[1]+s[2]*u[2]},a.dot$1=function(s,u){return s[0]*u[0]+s[1]*u[1]+s[2]*u[2]+s[3]*u[3]},a.ease=R,a.emitValidationErrors=Pc,a.endsWith=J,a.enforceCacheSizeLimit=function(s){_n(),kt&&kt.then((function(u){u.keys().then((function(f){for(var _=0;_<f.length-s;_++)u.delete(f[_])}))}))},a.evaluateSizeForFeature=Lp,a.evaluateSizeForZoom=Xu,a.evaluateVariableOffset=ex,a.evented=Ad,a.extend=G,a.featureFilter=ou,a.filterObject=_e,a.fromRotation=function(s,u){var f=Math.sin(u),_=Math.cos(u);return s[0]=_,s[1]=f,s[2]=0,s[3]=-f,s[4]=_,s[5]=0,s[6]=0,s[7]=0,s[8]=1,s},a.getAnchorAlignment=Kg,a.getAnchorJustification=tx,a.getArrayBuffer=xr,a.getImage=xe,a.getJSON=function(s,u){return pi(G(s,{type:"json"}),u)},a.getRTLTextPluginStatus=nl,a.getReferrer=wi,a.getVideo=function(s,u){var f,_,C=T.document.createElement("video");C.muted=!0,C.onloadstart=function(){u(null,C)};for(var P=0;P<s.length;P++){var L=T.document.createElement("source");f=s[P],_=void 0,(_=T.document.createElement("a")).href=f,(_.protocol!==T.document.location.protocol||_.host!==T.document.location.host)&&(C.crossOrigin="Anonymous"),L.src=s[P],C.appendChild(L)}return{cancel:function(){}}},a.identity=ao,a.invert=function(s,u){var f=u[0],_=u[1],C=u[2],P=u[3],L=u[4],q=u[5],Z=u[6],ne=u[7],se=u[8],he=u[9],we=u[10],Ee=u[11],$e=u[12],He=u[13],st=u[14],Je=u[15],ft=f*q-_*L,gt=f*Z-C*L,wt=f*ne-P*L,Nt=_*Z-C*q,Bt=_*ne-P*q,rr=C*ne-P*Z,ur=se*He-he*$e,Br=se*st-we*$e,jr=se*Je-Ee*$e,Wr=he*st-we*He,Nr=he*Je-Ee*He,Tn=we*Je-Ee*st,Jr=ft*Tn-gt*Nr+wt*Wr+Nt*jr-Bt*Br+rr*ur;return Jr?(s[0]=(q*Tn-Z*Nr+ne*Wr)*(Jr=1/Jr),s[1]=(C*Nr-_*Tn-P*Wr)*Jr,s[2]=(He*rr-st*Bt+Je*Nt)*Jr,s[3]=(we*Bt-he*rr-Ee*Nt)*Jr,s[4]=(Z*jr-L*Tn-ne*Br)*Jr,s[5]=(f*Tn-C*jr+P*Br)*Jr,s[6]=(st*wt-$e*rr-Je*gt)*Jr,s[7]=(se*rr-we*wt+Ee*gt)*Jr,s[8]=(L*Nr-q*jr+ne*ur)*Jr,s[9]=(_*jr-f*Nr-P*ur)*Jr,s[10]=($e*Bt-He*wt+Je*ft)*Jr,s[11]=(he*wt-se*Bt-Ee*ft)*Jr,s[12]=(q*Br-L*Wr-Z*ur)*Jr,s[13]=(f*Wr-_*Br+C*ur)*Jr,s[14]=(He*gt-$e*Nt-st*ft)*Jr,s[15]=(se*Nt-he*gt+we*ft)*Jr,s):null},a.isChar=tr,a.isMapboxURL=Ye,a.keysDifference=function(s,u){var f=[];for(var _ in s)_ in u||f.push(_);return f},a.makeRequest=pi,a.mapObject=Se,a.mercatorXfromLng=Fd,a.mercatorYfromLat=Fa,a.mercatorZfromAltitude=fh,a.mul=Wh,a.multiply=Qs,a.mvt=Mf,a.nextPowerOfTwo=function(s){return s<=1?1:Math.pow(2,Math.ceil(Math.log(s)/Math.LN2))},a.normalize=function(s,u){var f=u[0],_=u[1],C=u[2],P=f*f+_*_+C*C;return P>0&&(P=1/Math.sqrt(P)),s[0]=u[0]*P,s[1]=u[1]*P,s[2]=u[2]*P,s},a.number=Ai,a.offscreenCanvasSupported=va,a.ortho=function(s,u,f,_,C,P,L){var q=1/(u-f),Z=1/(_-C),ne=1/(P-L);return s[0]=-2*q,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=-2*Z,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[10]=2*ne,s[11]=0,s[12]=(u+f)*q,s[13]=(C+_)*Z,s[14]=(L+P)*ne,s[15]=1,s},a.parseGlyphPBF=function(s){return new $m(s).readFields(Yy,[])},a.pbf=$m,a.performSymbolLayout=function(s,u,f,_,C,P,L){s.createArrays(),s.tilePixelRatio=8192/(512*s.overscaling),s.compareText={},s.iconsNeedLinear=!1;var q=s.layers[0].layout,Z=s.layers[0]._unevaluatedLayout._values,ne={};if(s.textSizeData.kind==="composite"){var se=s.textSizeData,he=se.maxZoom;ne.compositeTextSizes=[Z["text-size"].possiblyEvaluate(new En(se.minZoom),L),Z["text-size"].possiblyEvaluate(new En(he),L)]}if(s.iconSizeData.kind==="composite"){var we=s.iconSizeData,Ee=we.maxZoom;ne.compositeIconSizes=[Z["icon-size"].possiblyEvaluate(new En(we.minZoom),L),Z["icon-size"].possiblyEvaluate(new En(Ee),L)]}ne.layoutTextSize=Z["text-size"].possiblyEvaluate(new En(s.zoom+1),L),ne.layoutIconSize=Z["icon-size"].possiblyEvaluate(new En(s.zoom+1),L),ne.textMaxSize=Z["text-size"].possiblyEvaluate(new En(18));for(var $e=24*q.get("text-line-height"),He=q.get("text-rotation-alignment")==="map"&&q.get("symbol-placement")!=="point",st=q.get("text-keep-upright"),Je=q.get("text-size"),ft=function(){var Nt=wt[gt],Bt=q.get("text-font").evaluate(Nt,{},L).join(","),rr=Je.evaluate(Nt,{},L),ur=ne.layoutTextSize.evaluate(Nt,{},L),Br=ne.layoutIconSize.evaluate(Nt,{},L),jr={horizontal:{},vertical:void 0},Wr=Nt.text,Nr=[0,0];if(Wr){var Tn=Wr.toString(),Jr=24*q.get("text-letter-spacing").evaluate(Nt,{},L),Ir=(function(Dn){for(var Hi=0,Ti=Dn;Hi<Ti.length;Hi+=1)if(ii=Ti[Hi].charCodeAt(0),tr.Arabic(ii)||tr["Arabic Supplement"](ii)||tr["Arabic Extended-A"](ii)||tr["Arabic Presentation Forms-A"](ii)||tr["Arabic Presentation Forms-B"](ii))return!1;var ii;return!0})(Tn)?Jr:0,Ln=q.get("text-anchor").evaluate(Nt,{},L),wn=q.get("text-variable-anchor");if(!wn){var ei=q.get("text-radial-offset").evaluate(Nt,{},L);Nr=ei?ex(Ln,[24*ei,nv]):q.get("text-offset").evaluate(Nt,{},L).map((function(Dn){return 24*Dn}))}var br=He?"center":q.get("text-justify").evaluate(Nt,{},L),hi=q.get("symbol-placement"),Ss=hi==="point"?24*q.get("text-max-width").evaluate(Nt,{},L):0,Vs=function(){s.allowVerticalPlacement&&La(Tn)&&(jr.vertical=Ru(Wr,u,f,C,Bt,Ss,$e,Ln,"left",Ir,Nr,Xl.vertical,!0,hi,ur,rr))};if(!He&&wn){for(var $s=br==="auto"?wn.map((function(Dn){return tx(Dn)})):[br],As=!1,ea=0;ea<$s.length;ea++){var fa=$s[ea];if(!jr.horizontal[fa])if(As)jr.horizontal[fa]=jr.horizontal[0];else{var Hs=Ru(Wr,u,f,C,Bt,Ss,$e,"center",fa,Ir,Nr,Xl.horizontal,!1,hi,ur,rr);Hs&&(jr.horizontal[fa]=Hs,As=Hs.positionedLines.length===1)}}Vs()}else{br==="auto"&&(br=tx(Ln));var Co=Ru(Wr,u,f,C,Bt,Ss,$e,Ln,br,Ir,Nr,Xl.horizontal,!1,hi,ur,rr);Co&&(jr.horizontal[br]=Co),Vs(),La(Tn)&&He&&st&&(jr.vertical=Ru(Wr,u,f,C,Bt,Ss,$e,Ln,br,Ir,Nr,Xl.vertical,!1,hi,ur,rr))}}var wa=void 0,ko=!1;if(Nt.icon&&Nt.icon.name){var Xi=_[Nt.icon.name];Xi&&(wa=(function(Dn,Hi,Ti){var ii=Kg(Ti),pl=Hi[0]-Dn.displaySize[0]*ii.horizontalAlign,Eo=Hi[1]-Dn.displaySize[1]*ii.verticalAlign;return{image:Dn,top:Eo,bottom:Eo+Dn.displaySize[1],left:pl,right:pl+Dn.displaySize[0]}})(C[Nt.icon.name],q.get("icon-offset").evaluate(Nt,{},L),q.get("icon-anchor").evaluate(Nt,{},L)),ko=Xi.sdf,s.sdfIcons===void 0?s.sdfIcons=Xi.sdf:s.sdfIcons!==Xi.sdf&&fe("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(Xi.pixelRatio!==s.pixelRatio||q.get("icon-rotate").constantOr(1)!==0)&&(s.iconsNeedLinear=!0))}var fs=xc(jr.horizontal)||jr.vertical;s.iconsInText=!!fs&&fs.iconsInText,(fs||wa)&&(function(Dn,Hi,Ti,ii,pl,Eo,ps,ta,To,mi,Ud){var ec=Eo.textMaxSize.evaluate(Hi,{});ec===void 0&&(ec=ps);var Iu,pa=Dn.layers[0].layout,qd=pa.get("icon-offset").evaluate(Hi,{},Ud),tc=xc(Ti.horizontal),Fp=ps/24,Qh=Dn.tilePixelRatio*Fp,si=Dn.tilePixelRatio*ec/24,nd=Dn.tilePixelRatio*ta,yh=Dn.tilePixelRatio*pa.get("symbol-spacing"),Bp=pa.get("text-padding")*Dn.tilePixelRatio,Hf=pa.get("icon-padding")*Dn.tilePixelRatio,Gf=pa.get("text-max-angle")/180*Math.PI,ef=pa.get("text-rotation-alignment")==="map"&&pa.get("symbol-placement")!=="point",Wf=pa.get("icon-rotation-alignment")==="map"&&pa.get("symbol-placement")!=="point",xh=pa.get("symbol-placement"),Up=yh/2,qp=pa.get("icon-text-fit");ii&&qp!=="none"&&(Dn.allowVerticalPlacement&&Ti.vertical&&(Iu=dh(ii,Ti.vertical,qp,pa.get("icon-text-fit-padding"),qd,Fp)),tc&&(ii=dh(ii,tc,qp,pa.get("icon-text-fit-padding"),qd,Fp)));var tf=function(G0,Hp){Hp.x<0||Hp.x>=8192||Hp.y<0||Hp.y>=8192||(function(Gs,id,E_,wh,sg,lv,cv,fo,Gp,Wp,ag,og,ep,vu,Yp,lg,$d,W0,Y0,tp,bc,uv,Z0,Hd,T_){var K0,rp,Zp,np,sd,Gd=Gs.addToLineVertexArray(id,E_),ax=0,X0=0,ip=0,Kp=0,dv=-1,Xp=-1,ad={},hv=de(""),Jp=0,fv=0;if(fo._unevaluatedLayout.getValue("text-radial-offset")===void 0?(Jp=(K0=fo.layout.get("text-offset").evaluate(bc,{},Hd).map((function(ap){return 24*ap})))[0],fv=K0[1]):(Jp=24*fo.layout.get("text-radial-offset").evaluate(bc,{},Hd),fv=nv),Gs.allowVerticalPlacement&&wh.vertical){var ox=fo.layout.get("text-rotate").evaluate(bc,{},Hd)+90;np=new Wm(Gp,id,Wp,ag,og,wh.vertical,ep,vu,Yp,ox),cv&&(sd=new Wm(Gp,id,Wp,ag,og,cv,$d,W0,Yp,ox))}if(sg){var lx=fo.layout.get("icon-rotate").evaluate(bc,{}),cx=fo.layout.get("icon-text-fit")!=="none",J0=co(sg,lx,Z0,cx),cg=cv?co(cv,lx,Z0,cx):void 0;Zp=new Wm(Gp,id,Wp,ag,og,sg,$d,W0,!1,lx),ax=4*J0.length;var Q0=Gs.iconSizeData,rf=null;Q0.kind==="source"?(rf=[128*fo.layout.get("icon-size").evaluate(bc,{})])[0]>32640&&fe(Gs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'):Q0.kind==="composite"&&((rf=[128*uv.compositeIconSizes[0].evaluate(bc,{},Hd),128*uv.compositeIconSizes[1].evaluate(bc,{},Hd)])[0]>32640||rf[1]>32640)&&fe(Gs.layerIds[0]+': Value for "icon-size" is >= 255. Reduce your "icon-size".'),Gs.addSymbols(Gs.icon,J0,rf,tp,Y0,bc,!1,id,Gd.lineStartIndex,Gd.lineLength,-1,Hd),dv=Gs.icon.placedSymbolArray.length-1,cg&&(X0=4*cg.length,Gs.addSymbols(Gs.icon,cg,rf,tp,Y0,bc,Xl.vertical,id,Gd.lineStartIndex,Gd.lineLength,-1,Hd),Xp=Gs.icon.placedSymbolArray.length-1)}for(var ug in wh.horizontal){var sp=wh.horizontal[ug];if(!rp){hv=de(sp.text);var P_=fo.layout.get("text-rotate").evaluate(bc,{},Hd);rp=new Wm(Gp,id,Wp,ag,og,sp,ep,vu,Yp,P_)}var Qp=sp.positionedLines.length===1;if(ip+=Ym(Gs,id,sp,lv,fo,Yp,bc,lg,Gd,wh.vertical?Xl.horizontal:Xl.horizontalOnly,Qp?Object.keys(wh.horizontal):[ug],ad,dv,uv,Hd),Qp)break}wh.vertical&&(Kp+=Ym(Gs,id,wh.vertical,lv,fo,Yp,bc,lg,Gd,Xl.vertical,["vertical"],ad,Xp,uv,Hd));var R_=rp?rp.boxStartIndex:Gs.collisionBoxArray.length,e1=rp?rp.boxEndIndex:Gs.collisionBoxArray.length,t1=np?np.boxStartIndex:Gs.collisionBoxArray.length,r1=np?np.boxEndIndex:Gs.collisionBoxArray.length,n1=Zp?Zp.boxStartIndex:Gs.collisionBoxArray.length,ux=Zp?Zp.boxEndIndex:Gs.collisionBoxArray.length,i1=sd?sd.boxStartIndex:Gs.collisionBoxArray.length,s1=sd?sd.boxEndIndex:Gs.collisionBoxArray.length,yu=-1,pv=function(ap,mv){return ap&&ap.circleDiameter?Math.max(ap.circleDiameter,mv):mv};yu=pv(rp,yu),yu=pv(np,yu),yu=pv(Zp,yu);var a1=(yu=pv(sd,yu))>-1?1:0;a1&&(yu*=T_/24),Gs.glyphOffsetArray.length>=ki.MAX_GLYPHS&&fe("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),bc.sortKey!==void 0&&Gs.addToSortKeyRanges(Gs.symbolInstances.length,bc.sortKey),Gs.symbolInstances.emplaceBack(id.x,id.y,ad.right>=0?ad.right:-1,ad.center>=0?ad.center:-1,ad.left>=0?ad.left:-1,ad.vertical||-1,dv,Xp,hv,R_,e1,t1,r1,n1,ux,i1,s1,Wp,ip,Kp,ax,X0,a1,0,ep,Jp,fv,yu)})(Dn,Hp,G0,Ti,ii,pl,Iu,Dn.layers[0],Dn.collisionBoxArray,Hi.index,Hi.sourceLayerIndex,Dn.index,Qh,Bp,ef,To,nd,Hf,Wf,qd,Hi,Eo,mi,Ud,ps)};if(xh==="line")for(var Yf=0,tg=zd(Hi.geometry,0,0,8192,8192);Yf<tg.length;Yf+=1)for(var is=tg[Yf],Zf=0,ho=z0(is,yh,Gf,Ti.vertical||tc,ii,24,si,Dn.overscaling,8192);Zf<ho.length;Zf+=1){var ov=ho[Zf];tc&&Ju(Dn,tc.text,Up,ov)||tf(is,ov)}else if(xh==="line-center")for(var Vp=0,rg=Hi.geometry;Vp<rg.length;Vp+=1){var Kf=rg[Vp];if(Kf.length>1){var $p=tv(Kf,Gf,Ti.vertical||tc,ii,24,si);$p&&tf(Kf,$p)}}else if(Hi.type==="Polygon")for(var bh=0,ng=Ug(Hi.geometry,0);bh<ng.length;bh+=1){var Xf=ng[bh],Jf=Oc(Xf,16);tf(Xf[0],new Of(Jf.x,Jf.y,0))}else if(Hi.type==="LineString")for(var _h=0,ig=Hi.geometry;_h<ig.length;_h+=1){var Qf=ig[_h];tf(Qf,new Of(Qf[0].x,Qf[0].y,0))}else if(Hi.type==="Point")for(var nx=0,ix=Hi.geometry;nx<ix.length;nx+=1)for(var sx=0,H0=ix[nx];sx<H0.length;sx+=1){var Vd=H0[sx];tf([Vd],new Of(Vd.x,Vd.y,0))}})(s,Nt,jr,wa,_,ne,ur,Br,Nr,ko,L)},gt=0,wt=s.features;gt<wt.length;gt+=1)ft();P&&s.generateCollisionDebugBuffers()},a.perspective=function(s,u,f,_,C){var P,L=1/Math.tan(u/2);return s[0]=L/f,s[1]=0,s[2]=0,s[3]=0,s[4]=0,s[5]=L,s[6]=0,s[7]=0,s[8]=0,s[9]=0,s[11]=-1,s[12]=0,s[13]=0,s[15]=0,C!=null&&C!==1/0?(s[10]=(C+_)*(P=1/(_-C)),s[14]=2*C*_*P):(s[10]=-1,s[14]=-2*_),s},a.pick=function(s,u){for(var f={},_=0;_<u.length;_++){var C=u[_];C in s&&(f[C]=s[C])}return f},a.plugin=Ma,a.polygonIntersectsPolygon=ns,a.postMapLoadEvent=nn,a.postTurnstileEvent=Hr,a.potpack=Ky,a.refProperties=["type","source","source-layer","minzoom","maxzoom","filter","layout"],a.register=sr,a.registerForPluginStateChange=function(s){return s({pluginStatus:ca,pluginURL:Tl}),Ad.on("pluginStateChange",s),s},a.renderColorRamp=da,a.rotate=function(s,u,f){var _=u[0],C=u[1],P=u[2],L=u[3],q=Math.sin(f),Z=Math.cos(f);return s[0]=_*Z+P*q,s[1]=C*Z+L*q,s[2]=_*-q+P*Z,s[3]=C*-q+L*Z,s},a.rotateX=function(s,u,f){var _=Math.sin(f),C=Math.cos(f),P=u[4],L=u[5],q=u[6],Z=u[7],ne=u[8],se=u[9],he=u[10],we=u[11];return u!==s&&(s[0]=u[0],s[1]=u[1],s[2]=u[2],s[3]=u[3],s[12]=u[12],s[13]=u[13],s[14]=u[14],s[15]=u[15]),s[4]=P*C+ne*_,s[5]=L*C+se*_,s[6]=q*C+he*_,s[7]=Z*C+we*_,s[8]=ne*C-P*_,s[9]=se*C-L*_,s[10]=he*C-q*_,s[11]=we*C-Z*_,s},a.rotateZ=function(s,u,f){var _=Math.sin(f),C=Math.cos(f),P=u[0],L=u[1],q=u[2],Z=u[3],ne=u[4],se=u[5],he=u[6],we=u[7];return u!==s&&(s[8]=u[8],s[9]=u[9],s[10]=u[10],s[11]=u[11],s[12]=u[12],s[13]=u[13],s[14]=u[14],s[15]=u[15]),s[0]=P*C+ne*_,s[1]=L*C+se*_,s[2]=q*C+he*_,s[3]=Z*C+we*_,s[4]=ne*C-P*_,s[5]=se*C-L*_,s[6]=he*C-q*_,s[7]=we*C-Z*_,s},a.scale=function(s,u,f){var _=f[0],C=f[1],P=f[2];return s[0]=u[0]*_,s[1]=u[1]*_,s[2]=u[2]*_,s[3]=u[3]*_,s[4]=u[4]*C,s[5]=u[5]*C,s[6]=u[6]*C,s[7]=u[7]*C,s[8]=u[8]*P,s[9]=u[9]*P,s[10]=u[10]*P,s[11]=u[11]*P,s[12]=u[12],s[13]=u[13],s[14]=u[14],s[15]=u[15],s},a.scale$1=function(s,u,f){return s[0]=u[0]*f,s[1]=u[1]*f,s[2]=u[2]*f,s[3]=u[3]*f,s},a.scale$2=function(s,u,f){return s[0]=u[0]*f,s[1]=u[1]*f,s[2]=u[2]*f,s},a.setCacheLimits=function(s,u){_r=s,Ri=u},a.setRTLTextPlugin=function(s,u,f){if(f===void 0&&(f=!1),ca==="deferred"||ca==="loading"||ca==="loaded")throw new Error("setRTLTextPlugin cannot be called multiple times.");Tl=tt.resolveURL(s),ca="deferred",cu=u,Rc(),f||_o()},a.sphericalToCartesian=function(s){var u=s[0],f=s[1],_=s[2];return f+=90,f*=Math.PI/180,_*=Math.PI/180,{x:u*Math.cos(f)*Math.sin(_),y:u*Math.sin(f)*Math.sin(_),z:u*Math.cos(_)}},a.sqrLen=function(s){var u=s[0],f=s[1];return u*u+f*f},a.styleSpec=ke,a.sub=function(s,u,f){return s[0]=u[0]-f[0],s[1]=u[1]-f[1],s[2]=u[2]-f[2],s},a.symbolSize=O0,a.transformMat3=function(s,u,f){var _=u[0],C=u[1],P=u[2];return s[0]=_*f[0]+C*f[3]+P*f[6],s[1]=_*f[1]+C*f[4]+P*f[7],s[2]=_*f[2]+C*f[5]+P*f[8],s},a.transformMat4=Vi,a.translate=function(s,u,f){var _,C,P,L,q,Z,ne,se,he,we,Ee,$e,He=f[0],st=f[1],Je=f[2];return u===s?(s[12]=u[0]*He+u[4]*st+u[8]*Je+u[12],s[13]=u[1]*He+u[5]*st+u[9]*Je+u[13],s[14]=u[2]*He+u[6]*st+u[10]*Je+u[14],s[15]=u[3]*He+u[7]*st+u[11]*Je+u[15]):(C=u[1],P=u[2],L=u[3],q=u[4],Z=u[5],ne=u[6],se=u[7],he=u[8],we=u[9],Ee=u[10],$e=u[11],s[0]=_=u[0],s[1]=C,s[2]=P,s[3]=L,s[4]=q,s[5]=Z,s[6]=ne,s[7]=se,s[8]=he,s[9]=we,s[10]=Ee,s[11]=$e,s[12]=_*He+q*st+he*Je+u[12],s[13]=C*He+Z*st+we*Je+u[13],s[14]=P*He+ne*st+Ee*Je+u[14],s[15]=L*He+se*st+$e*Je+u[15]),s},a.triggerPluginCompletionEvent=ih,a.uniqueId=ee,a.validateCustomStyleLayer=function(s){var u=[],f=s.id;return f===void 0&&u.push({message:"layers."+f+': missing required property "id"'}),s.render===void 0&&u.push({message:"layers."+f+': missing required method "render"'}),s.renderingMode&&s.renderingMode!=="2d"&&s.renderingMode!=="3d"&&u.push({message:"layers."+f+': property "renderingMode" must be either "2d" or "3d"'}),u},a.validateLight=Sd,a.validateStyle=Wl,a.values=function(s){var u=[];for(var f in s)u.push(s[f]);return u},a.vectorTile=Mf,a.version="1.13.3",a.warnOnce=fe,a.webpSupported=St,a.window=T,a.wrap=B})),l(["./shared"],(function(a){function p(oe){var xe=typeof oe;if(xe==="number"||xe==="boolean"||xe==="string"||oe==null)return JSON.stringify(oe);if(Array.isArray(oe)){for(var Ce="[",Te=0,De=oe;Te<De.length;Te+=1)Ce+=p(De[Te])+",";return Ce+"]"}for(var et=Object.keys(oe).sort(),nt="{",ke=0;ke<et.length;ke++)nt+=JSON.stringify(et[ke])+":"+p(oe[et[ke]])+",";return nt+"}"}function g(oe){for(var xe="",Ce=0,Te=a.refProperties;Ce<Te.length;Ce+=1)xe+="/"+p(oe[Te[Ce]]);return xe}var w=function(oe){this.keyCache={},oe&&this.replace(oe)};w.prototype.replace=function(oe){this._layerConfigs={},this._layers={},this.update(oe,[])},w.prototype.update=function(oe,xe){for(var Ce=this,Te=0,De=oe;Te<De.length;Te+=1){var et=De[Te];this._layerConfigs[et.id]=et;var nt=this._layers[et.id]=a.createStyleLayer(et);nt._featureFilter=a.featureFilter(nt.filter),this.keyCache[et.id]&&delete this.keyCache[et.id]}for(var ke=0,qe=xe;ke<qe.length;ke+=1){var ht=qe[ke];delete this.keyCache[ht],delete this._layerConfigs[ht],delete this._layers[ht]}this.familiesBySource={};for(var qt=0,Xt=(function(or,fr){for(var an={},yr=0;yr<or.length;yr++){var xn=fr&&fr[or[yr].id]||g(or[yr]);fr&&(fr[or[yr].id]=xn);var $n=an[xn];$n||($n=an[xn]=[]),$n.push(or[yr])}var bn=[];for(var Un in an)bn.push(an[Un]);return bn})(a.values(this._layerConfigs),this.keyCache);qt<Xt.length;qt+=1){var bt=Xt[qt].map((function(or){return Ce._layers[or.id]})),Mt=bt[0];if(Mt.visibility!=="none"){var dr=Mt.source||"",mr=this.familiesBySource[dr];mr||(mr=this.familiesBySource[dr]={});var jt=Mt.sourceLayer||"_geojsonTileLayer",gr=mr[jt];gr||(gr=mr[jt]=[]),gr.push(bt)}}};var j=function(oe){var xe={},Ce=[];for(var Te in oe){var De=oe[Te],et=xe[Te]={};for(var nt in De){var ke=De[+nt];if(ke&&ke.bitmap.width!==0&&ke.bitmap.height!==0){var qe={x:0,y:0,w:ke.bitmap.width+2,h:ke.bitmap.height+2};Ce.push(qe),et[nt]={rect:qe,metrics:ke.metrics}}}}var ht=a.potpack(Ce),qt=new a.AlphaImage({width:ht.w||1,height:ht.h||1});for(var Xt in oe){var bt=oe[Xt];for(var Mt in bt){var dr=bt[+Mt];if(dr&&dr.bitmap.width!==0&&dr.bitmap.height!==0){var mr=xe[Xt][Mt].rect;a.AlphaImage.copy(dr.bitmap,qt,{x:0,y:0},{x:mr.x+1,y:mr.y+1},dr.bitmap)}}}this.image=qt,this.positions=xe};a.register("GlyphAtlas",j);var S=function(oe){this.tileID=new a.OverscaledTileID(oe.tileID.overscaledZ,oe.tileID.wrap,oe.tileID.canonical.z,oe.tileID.canonical.x,oe.tileID.canonical.y),this.uid=oe.uid,this.zoom=oe.zoom,this.pixelRatio=oe.pixelRatio,this.tileSize=oe.tileSize,this.source=oe.source,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=oe.showCollisionBoxes,this.collectResourceTiming=!!oe.collectResourceTiming,this.returnDependencies=!!oe.returnDependencies,this.promoteId=oe.promoteId};function T(oe,xe,Ce){for(var Te=new a.EvaluationParameters(xe),De=0,et=oe;De<et.length;De+=1)et[De].recalculate(Te,Ce)}function E(oe,xe){var Ce=a.getArrayBuffer(oe.request,(function(Te,De,et,nt){Te?xe(Te):De&&xe(null,{vectorTile:new a.vectorTile.VectorTile(new a.pbf(De)),rawData:De,cacheControl:et,expires:nt})}));return function(){Ce.cancel(),xe()}}S.prototype.parse=function(oe,xe,Ce,Te,De){var et=this;this.status="parsing",this.data=oe,this.collisionBoxArray=new a.CollisionBoxArray;var nt=new a.DictionaryCoder(Object.keys(oe.layers).sort()),ke=new a.FeatureIndex(this.tileID,this.promoteId);ke.bucketLayerIDs=[];var qe,ht,qt,Xt,bt={},Mt={featureIndex:ke,iconDependencies:{},patternDependencies:{},glyphDependencies:{},availableImages:Ce},dr=xe.familiesBySource[this.source];for(var mr in dr){var jt=oe.layers[mr];if(jt){jt.version===1&&a.warnOnce('Vector tile source "'+this.source+'" layer "'+mr+'" does not use vector tile spec v2 and therefore may have some rendering errors.');for(var gr=nt.encode(mr),or=[],fr=0;fr<jt.length;fr++){var an=jt.feature(fr),yr=ke.getId(an,mr);or.push({feature:an,id:yr,index:fr,sourceLayerIndex:gr})}for(var xn=0,$n=dr[mr];xn<$n.length;xn+=1){var bn=$n[xn],Un=bn[0];Un.minzoom&&this.zoom<Math.floor(Un.minzoom)||Un.maxzoom&&this.zoom>=Un.maxzoom||Un.visibility!=="none"&&(T(bn,this.zoom,Ce),(bt[Un.id]=Un.createBucket({index:ke.bucketLayerIDs.length,layers:bn,zoom:this.zoom,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:gr,sourceID:this.source})).populate(or,Mt,this.tileID.canonical),ke.bucketLayerIDs.push(bn.map((function(Hn){return Hn.id}))))}}}var Xr=a.mapObject(Mt.glyphDependencies,(function(Hn){return Object.keys(Hn).map(Number)}));Object.keys(Xr).length?Te.send("getGlyphs",{uid:this.uid,stacks:Xr},(function(Hn,Fn){qe||(qe=Hn,ht=Fn,Ii.call(et))})):ht={};var Ks=Object.keys(Mt.iconDependencies);Ks.length?Te.send("getImages",{icons:Ks,source:this.source,tileID:this.tileID,type:"icons"},(function(Hn,Fn){qe||(qe=Hn,qt=Fn,Ii.call(et))})):qt={};var ti=Object.keys(Mt.patternDependencies);function Ii(){if(qe)return De(qe);if(ht&&qt&&Xt){var Hn=new j(ht),Fn=new a.ImageAtlas(qt,Xt);for(var Yn in bt){var qa=bt[Yn];qa instanceof a.SymbolBucket?(T(qa.layers,this.zoom,Ce),a.performSymbolLayout(qa,ht,Hn.positions,qt,Fn.iconPositions,this.showCollisionBoxes,this.tileID.canonical)):qa.hasPattern&&(qa instanceof a.LineBucket||qa instanceof a.FillBucket||qa instanceof a.FillExtrusionBucket)&&(T(qa.layers,this.zoom,Ce),qa.addFeatures(Mt,this.tileID.canonical,Fn.patternPositions))}this.status="done",De(null,{buckets:a.values(bt).filter((function(Nc){return!Nc.isEmpty()})),featureIndex:ke,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:Hn.image,imageAtlas:Fn,glyphMap:this.returnDependencies?ht:null,iconMap:this.returnDependencies?qt:null,glyphPositions:this.returnDependencies?Hn.positions:null})}}ti.length?Te.send("getImages",{icons:ti,source:this.source,tileID:this.tileID,type:"patterns"},(function(Hn,Fn){qe||(qe=Hn,Xt=Fn,Ii.call(et))})):Xt={},Ii.call(this)};var O=function(oe,xe,Ce,Te){this.actor=oe,this.layerIndex=xe,this.availableImages=Ce,this.loadVectorData=Te||E,this.loading={},this.loaded={}};O.prototype.loadTile=function(oe,xe){var Ce=this,Te=oe.uid;this.loading||(this.loading={});var De=!!(oe&&oe.request&&oe.request.collectResourceTiming)&&new a.RequestPerformance(oe.request),et=this.loading[Te]=new S(oe);et.abort=this.loadVectorData(oe,(function(nt,ke){if(delete Ce.loading[Te],nt||!ke)return et.status="done",Ce.loaded[Te]=et,xe(nt);var qe=ke.rawData,ht={};ke.expires&&(ht.expires=ke.expires),ke.cacheControl&&(ht.cacheControl=ke.cacheControl);var qt={};if(De){var Xt=De.finish();Xt&&(qt.resourceTiming=JSON.parse(JSON.stringify(Xt)))}et.vectorTile=ke.vectorTile,et.parse(ke.vectorTile,Ce.layerIndex,Ce.availableImages,Ce.actor,(function(bt,Mt){if(bt||!Mt)return xe(bt);xe(null,a.extend({rawTileData:qe.slice(0)},Mt,ht,qt))})),Ce.loaded=Ce.loaded||{},Ce.loaded[Te]=et}))},O.prototype.reloadTile=function(oe,xe){var Ce=this,Te=this.loaded,De=oe.uid,et=this;if(Te&&Te[De]){var nt=Te[De];nt.showCollisionBoxes=oe.showCollisionBoxes;var ke=function(qe,ht){var qt=nt.reloadCallback;qt&&(delete nt.reloadCallback,nt.parse(nt.vectorTile,et.layerIndex,Ce.availableImages,et.actor,qt)),xe(qe,ht)};nt.status==="parsing"?nt.reloadCallback=ke:nt.status==="done"&&(nt.vectorTile?nt.parse(nt.vectorTile,this.layerIndex,this.availableImages,this.actor,ke):ke())}},O.prototype.abortTile=function(oe,xe){var Ce=this.loading,Te=oe.uid;Ce&&Ce[Te]&&Ce[Te].abort&&(Ce[Te].abort(),delete Ce[Te]),xe()},O.prototype.removeTile=function(oe,xe){var Ce=this.loaded,Te=oe.uid;Ce&&Ce[Te]&&delete Ce[Te],xe()};var R=a.window.ImageBitmap,F=function(){this.loaded={}};function B(oe,xe){if(oe.length!==0){G(oe[0],xe);for(var Ce=1;Ce<oe.length;Ce++)G(oe[Ce],!xe)}}function G(oe,xe){for(var Ce=0,Te=0,De=0,et=oe.length,nt=et-1;De<et;nt=De++){var ke=(oe[De][0]-oe[nt][0])*(oe[nt][1]+oe[De][1]),qe=Ce+ke;Te+=Math.abs(Ce)>=Math.abs(ke)?Ce-qe+ke:ke-qe+Ce,Ce=qe}Ce+Te>=0!=!!xe&&oe.reverse()}F.prototype.loadTile=function(oe,xe){var Ce=oe.uid,Te=oe.encoding,De=oe.rawImageData,et=R&&De instanceof R?this.getImageData(De):De,nt=new a.DEMData(Ce,et,Te);this.loaded=this.loaded||{},this.loaded[Ce]=nt,xe(null,nt)},F.prototype.getImageData=function(oe){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(oe.width,oe.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d")),this.offscreenCanvas.width=oe.width,this.offscreenCanvas.height=oe.height,this.offscreenCanvasContext.drawImage(oe,0,0,oe.width,oe.height);var xe=this.offscreenCanvasContext.getImageData(-1,-1,oe.width+2,oe.height+2);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),new a.RGBAImage({width:xe.width,height:xe.height},xe.data)},F.prototype.removeTile=function(oe){var xe=this.loaded,Ce=oe.uid;xe&&xe[Ce]&&delete xe[Ce]};var z=a.vectorTile.VectorTileFeature.prototype.toGeoJSON,ee=function(oe){this._feature=oe,this.extent=a.EXTENT,this.type=oe.type,this.properties=oe.tags,"id"in oe&&!isNaN(oe.id)&&(this.id=parseInt(oe.id,10))};ee.prototype.loadGeometry=function(){if(this._feature.type===1){for(var oe=[],xe=0,Ce=this._feature.geometry;xe<Ce.length;xe+=1){var Te=Ce[xe];oe.push([new a.Point$1(Te[0],Te[1])])}return oe}for(var De=[],et=0,nt=this._feature.geometry;et<nt.length;et+=1){for(var ke=[],qe=0,ht=nt[et];qe<ht.length;qe+=1){var qt=ht[qe];ke.push(new a.Point$1(qt[0],qt[1]))}De.push(ke)}return De},ee.prototype.toGeoJSON=function(oe,xe,Ce){return z.call(this,oe,xe,Ce)};var ie=function(oe){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=a.EXTENT,this.length=oe.length,this._features=oe};ie.prototype.feature=function(oe){return new ee(this._features[oe])};var ge=a.vectorTile.VectorTileFeature,K=J;function J(oe,xe){this.options=xe||{},this.features=oe,this.length=oe.length}function Se(oe,xe){this.id=typeof oe.id=="number"?oe.id:void 0,this.type=oe.type,this.rawGeometry=oe.type===1?[oe.geometry]:oe.geometry,this.properties=oe.tags,this.extent=xe||4096}J.prototype.feature=function(oe){return new Se(this.features[oe],this.options.extent)},Se.prototype.loadGeometry=function(){var oe=this.rawGeometry;this.geometry=[];for(var xe=0;xe<oe.length;xe++){for(var Ce=oe[xe],Te=[],De=0;De<Ce.length;De++)Te.push(new a.Point$1(Ce[De][0],Ce[De][1]));this.geometry.push(Te)}return this.geometry},Se.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var oe=this.geometry,xe=1/0,Ce=-1/0,Te=1/0,De=-1/0,et=0;et<oe.length;et++)for(var nt=oe[et],ke=0;ke<nt.length;ke++){var qe=nt[ke];xe=Math.min(xe,qe.x),Ce=Math.max(Ce,qe.x),Te=Math.min(Te,qe.y),De=Math.max(De,qe.y)}return[xe,Te,Ce,De]},Se.prototype.toGeoJSON=ge.prototype.toGeoJSON;var _e=ce,re=K;function ce(oe){var xe=new a.pbf;return(function(Ce,Te){for(var De in Ce.layers)Te.writeMessage(3,fe,Ce.layers[De])})(oe,xe),xe.finish()}function fe(oe,xe){var Ce;xe.writeVarintField(15,oe.version||1),xe.writeStringField(1,oe.name||""),xe.writeVarintField(5,oe.extent||4096);var Te={keys:[],values:[],keycache:{},valuecache:{}};for(Ce=0;Ce<oe.length;Ce++)Te.feature=oe.feature(Ce),xe.writeMessage(2,ye,Te);var De=Te.keys;for(Ce=0;Ce<De.length;Ce++)xe.writeStringField(3,De[Ce]);var et=Te.values;for(Ce=0;Ce<et.length;Ce++)xe.writeMessage(4,Ue,et[Ce])}function ye(oe,xe){var Ce=oe.feature;Ce.id!==void 0&&xe.writeVarintField(1,Ce.id),xe.writeMessage(2,Fe,oe),xe.writeVarintField(3,Ce.type),xe.writeMessage(4,me,Ce)}function Fe(oe,xe){var Ce=oe.feature,Te=oe.keys,De=oe.values,et=oe.keycache,nt=oe.valuecache;for(var ke in Ce.properties){var qe=et[ke];qe===void 0&&(Te.push(ke),et[ke]=qe=Te.length-1),xe.writeVarint(qe);var ht=Ce.properties[ke],qt=typeof ht;qt!=="string"&&qt!=="boolean"&&qt!=="number"&&(ht=JSON.stringify(ht));var Xt=qt+":"+ht,bt=nt[Xt];bt===void 0&&(De.push(ht),nt[Xt]=bt=De.length-1),xe.writeVarint(bt)}}function Q(oe,xe){return(xe<<3)+(7&oe)}function pe(oe){return oe<<1^oe>>31}function me(oe,xe){for(var Ce=oe.loadGeometry(),Te=oe.type,De=0,et=0,nt=Ce.length,ke=0;ke<nt;ke++){var qe=Ce[ke],ht=1;Te===1&&(ht=qe.length),xe.writeVarint(Q(1,ht));for(var qt=Te===3?qe.length-1:qe.length,Xt=0;Xt<qt;Xt++){Xt===1&&Te!==1&&xe.writeVarint(Q(2,qt-1));var bt=qe[Xt].x-De,Mt=qe[Xt].y-et;xe.writeVarint(pe(bt)),xe.writeVarint(pe(Mt)),De+=bt,et+=Mt}Te===3&&xe.writeVarint(Q(7,1))}}function Ue(oe,xe){var Ce=typeof oe;Ce==="string"?xe.writeStringField(1,oe):Ce==="boolean"?xe.writeBooleanField(7,oe):Ce==="number"&&(oe%1!=0?xe.writeDoubleField(3,oe):oe<0?xe.writeSVarintField(6,oe):xe.writeVarintField(5,oe))}function Ke(oe,xe,Ce,Te){Re(oe,Ce,Te),Re(xe,2*Ce,2*Te),Re(xe,2*Ce+1,2*Te+1)}function Re(oe,xe,Ce){var Te=oe[xe];oe[xe]=oe[Ce],oe[Ce]=Te}function te(oe,xe,Ce,Te){var De=oe-Ce,et=xe-Te;return De*De+et*et}_e.fromVectorTileJs=ce,_e.fromGeojsonVt=function(oe,xe){xe=xe||{};var Ce={};for(var Te in oe)Ce[Te]=new K(oe[Te].features,xe),Ce[Te].name=Te,Ce[Te].version=xe.version,Ce[Te].extent=xe.extent;return ce({layers:Ce})},_e.GeoJSONWrapper=re;var ue=function(oe){return oe[0]},Ne=function(oe){return oe[1]},Me=function(oe,xe,Ce,Te,De){xe===void 0&&(xe=ue),Ce===void 0&&(Ce=Ne),Te===void 0&&(Te=64),De===void 0&&(De=Float64Array),this.nodeSize=Te,this.points=oe;for(var et=oe.length<65536?Uint16Array:Uint32Array,nt=this.ids=new et(oe.length),ke=this.coords=new De(2*oe.length),qe=0;qe<oe.length;qe++)nt[qe]=qe,ke[2*qe]=xe(oe[qe]),ke[2*qe+1]=Ce(oe[qe]);(function ht(qt,Xt,bt,Mt,dr,mr){if(!(dr-Mt<=bt)){var jt=Mt+dr>>1;(function gr(or,fr,an,yr,xn,$n){for(;xn>yr;){if(xn-yr>600){var bn=xn-yr+1,Un=an-yr+1,Xr=Math.log(bn),Ks=.5*Math.exp(2*Xr/3),ti=.5*Math.sqrt(Xr*Ks*(bn-Ks)/bn)*(Un-bn/2<0?-1:1);gr(or,fr,an,Math.max(yr,Math.floor(an-Un*Ks/bn+ti)),Math.min(xn,Math.floor(an+(bn-Un)*Ks/bn+ti)),$n)}var Ii=fr[2*an+$n],Hn=yr,Fn=xn;for(Ke(or,fr,yr,an),fr[2*xn+$n]>Ii&&Ke(or,fr,yr,xn);Hn<Fn;){for(Ke(or,fr,Hn,Fn),Hn++,Fn--;fr[2*Hn+$n]<Ii;)Hn++;for(;fr[2*Fn+$n]>Ii;)Fn--}fr[2*yr+$n]===Ii?Ke(or,fr,yr,Fn):Ke(or,fr,++Fn,xn),Fn<=an&&(yr=Fn+1),an<=Fn&&(xn=Fn-1)}})(qt,Xt,jt,Mt,dr,mr%2),ht(qt,Xt,bt,Mt,jt-1,mr+1),ht(qt,Xt,bt,jt+1,dr,mr+1)}})(nt,ke,Te,0,nt.length-1,0)};Me.prototype.range=function(oe,xe,Ce,Te){return(function(De,et,nt,ke,qe,ht,qt){for(var Xt,bt,Mt=[0,De.length-1,0],dr=[];Mt.length;){var mr=Mt.pop(),jt=Mt.pop(),gr=Mt.pop();if(jt-gr<=qt)for(var or=gr;or<=jt;or++)bt=et[2*or+1],(Xt=et[2*or])>=nt&&Xt<=qe&&bt>=ke&&bt<=ht&&dr.push(De[or]);else{var fr=Math.floor((gr+jt)/2);bt=et[2*fr+1],(Xt=et[2*fr])>=nt&&Xt<=qe&&bt>=ke&&bt<=ht&&dr.push(De[fr]);var an=(mr+1)%2;(mr===0?nt<=Xt:ke<=bt)&&(Mt.push(gr),Mt.push(fr-1),Mt.push(an)),(mr===0?qe>=Xt:ht>=bt)&&(Mt.push(fr+1),Mt.push(jt),Mt.push(an))}}return dr})(this.ids,this.coords,oe,xe,Ce,Te,this.nodeSize)},Me.prototype.within=function(oe,xe,Ce){return(function(Te,De,et,nt,ke,qe){for(var ht=[0,Te.length-1,0],qt=[],Xt=ke*ke;ht.length;){var bt=ht.pop(),Mt=ht.pop(),dr=ht.pop();if(Mt-dr<=qe)for(var mr=dr;mr<=Mt;mr++)te(De[2*mr],De[2*mr+1],et,nt)<=Xt&&qt.push(Te[mr]);else{var jt=Math.floor((dr+Mt)/2),gr=De[2*jt],or=De[2*jt+1];te(gr,or,et,nt)<=Xt&&qt.push(Te[jt]);var fr=(bt+1)%2;(bt===0?et-ke<=gr:nt-ke<=or)&&(ht.push(dr),ht.push(jt-1),ht.push(fr)),(bt===0?et+ke>=gr:nt+ke>=or)&&(ht.push(jt+1),ht.push(Mt),ht.push(fr))}}return qt})(this.ids,this.coords,oe,xe,Ce,this.nodeSize)};var We={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:function(oe){return oe}},Ve=function(oe){this.options=wr(Object.create(We),oe),this.trees=new Array(this.options.maxZoom+1)};function tt(oe,xe,Ce,Te,De){return{x:oe,y:xe,zoom:1/0,id:Ce,parentId:-1,numPoints:Te,properties:De}}function Qe(oe,xe){var Ce=oe.geometry.coordinates,Te=Ce[1];return{x:zt(Ce[0]),y:Lt(Te),zoom:1/0,index:xe,parentId:-1}}function St(oe){return{type:"Feature",id:oe.id,properties:Et(oe),geometry:{type:"Point",coordinates:[(Te=oe.x,360*(Te-.5)),(xe=oe.y,Ce=(180-360*xe)*Math.PI/180,360*Math.atan(Math.exp(Ce))/Math.PI-90)]}};var xe,Ce,Te}function Et(oe){var xe=oe.numPoints,Ce=xe>=1e4?Math.round(xe/1e3)+"k":xe>=1e3?Math.round(xe/100)/10+"k":xe;return wr(wr({},oe.properties),{cluster:!0,cluster_id:oe.id,point_count:xe,point_count_abbreviated:Ce})}function zt(oe){return oe/360+.5}function Lt(oe){var xe=Math.sin(oe*Math.PI/180),Ce=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function wr(oe,xe){for(var Ce in xe)oe[Ce]=xe[Ce];return oe}function _t(oe){return oe.x}function Ye(oe){return oe.y}function $r(oe,xe,Ce,Te,De,et){var nt=De-Ce,ke=et-Te;if(nt!==0||ke!==0){var qe=((oe-Ce)*nt+(xe-Te)*ke)/(nt*nt+ke*ke);qe>1?(Ce=De,Te=et):qe>0&&(Ce+=nt*qe,Te+=ke*qe)}return(nt=oe-Ce)*nt+(ke=xe-Te)*ke}function Cr(oe,xe,Ce,Te){var De={id:oe===void 0?null:oe,type:xe,geometry:Ce,tags:Te,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};return(function(et){var nt=et.geometry,ke=et.type;if(ke==="Point"||ke==="MultiPoint"||ke==="LineString")Zt(et,nt);else if(ke==="Polygon"||ke==="MultiLineString")for(var qe=0;qe<nt.length;qe++)Zt(et,nt[qe]);else if(ke==="MultiPolygon")for(qe=0;qe<nt.length;qe++)for(var ht=0;ht<nt[qe].length;ht++)Zt(et,nt[qe][ht])})(De),De}function Zt(oe,xe){for(var Ce=0;Ce<xe.length;Ce+=3)oe.minX=Math.min(oe.minX,xe[Ce]),oe.minY=Math.min(oe.minY,xe[Ce+1]),oe.maxX=Math.max(oe.maxX,xe[Ce]),oe.maxY=Math.max(oe.maxY,xe[Ce+1])}function Be(oe,xe,Ce,Te){if(xe.geometry){var De=xe.geometry.coordinates,et=xe.geometry.type,nt=Math.pow(Ce.tolerance/((1<<Ce.maxZoom)*Ce.extent),2),ke=[],qe=xe.id;if(Ce.promoteId?qe=xe.properties[Ce.promoteId]:Ce.generateId&&(qe=Te||0),et==="Point")it(De,ke);else if(et==="MultiPoint")for(var ht=0;ht<De.length;ht++)it(De[ht],ke);else if(et==="LineString")at(De,ke,nt,!1);else if(et==="MultiLineString"){if(Ce.lineMetrics){for(ht=0;ht<De.length;ht++)at(De[ht],ke=[],nt,!1),oe.push(Cr(qe,"LineString",ke,xe.properties));return}Tt(De,ke,nt,!1)}else if(et==="Polygon")Tt(De,ke,nt,!0);else{if(et!=="MultiPolygon"){if(et==="GeometryCollection"){for(ht=0;ht<xe.geometry.geometries.length;ht++)Be(oe,{id:qe,geometry:xe.geometry.geometries[ht],properties:xe.properties},Ce,Te);return}throw new Error("Input data is not a valid GeoJSON object.")}for(ht=0;ht<De.length;ht++){var qt=[];Tt(De[ht],qt,nt,!0),ke.push(qt)}}oe.push(Cr(qe,et,ke,xe.properties))}}function it(oe,xe){xe.push(kt(oe[0])),xe.push(Ot(oe[1])),xe.push(0)}function at(oe,xe,Ce,Te){for(var De,et,nt=0,ke=0;ke<oe.length;ke++){var qe=kt(oe[ke][0]),ht=Ot(oe[ke][1]);xe.push(qe),xe.push(ht),xe.push(0),ke>0&&(nt+=Te?(De*ht-qe*et)/2:Math.sqrt(Math.pow(qe-De,2)+Math.pow(ht-et,2))),De=qe,et=ht}var qt=xe.length-3;xe[2]=1,(function Xt(bt,Mt,dr,mr){for(var jt,gr=mr,or=dr-Mt>>1,fr=dr-Mt,an=bt[Mt],yr=bt[Mt+1],xn=bt[dr],$n=bt[dr+1],bn=Mt+3;bn<dr;bn+=3){var Un=$r(bt[bn],bt[bn+1],an,yr,xn,$n);if(Un>gr)jt=bn,gr=Un;else if(Un===gr){var Xr=Math.abs(bn-or);Xr<fr&&(jt=bn,fr=Xr)}}gr>mr&&(jt-Mt>3&&Xt(bt,Mt,jt,mr),bt[jt+2]=gr,dr-jt>3&&Xt(bt,jt,dr,mr))})(xe,0,qt,Ce),xe[qt+2]=1,xe.size=Math.abs(nt),xe.start=0,xe.end=xe.size}function Tt(oe,xe,Ce,Te){for(var De=0;De<oe.length;De++){var et=[];at(oe[De],et,Ce,Te),xe.push(et)}}function kt(oe){return oe/360+.5}function Ot(oe){var xe=Math.sin(oe*Math.PI/180),Ce=.5-.25*Math.log((1+xe)/(1-xe))/Math.PI;return Ce<0?0:Ce>1?1:Ce}function Qt(oe,xe,Ce,Te,De,et,nt,ke){if(Te/=xe,et>=(Ce/=xe)&&nt<Te)return oe;if(nt<Ce||et>=Te)return null;for(var qe=[],ht=0;ht<oe.length;ht++){var qt=oe[ht],Xt=qt.geometry,bt=qt.type,Mt=De===0?qt.minX:qt.minY,dr=De===0?qt.maxX:qt.maxY;if(Mt>=Ce&&dr<Te)qe.push(qt);else if(!(dr<Ce||Mt>=Te)){var mr=[];if(bt==="Point"||bt==="MultiPoint")zr(Xt,mr,Ce,Te,De);else if(bt==="LineString")Hr(Xt,mr,Ce,Te,De,!1,ke.lineMetrics);else if(bt==="MultiLineString")nn(Xt,mr,Ce,Te,De,!1);else if(bt==="Polygon")nn(Xt,mr,Ce,Te,De,!0);else if(bt==="MultiPolygon")for(var jt=0;jt<Xt.length;jt++){var gr=[];nn(Xt[jt],gr,Ce,Te,De,!0),gr.length&&mr.push(gr)}if(mr.length){if(ke.lineMetrics&&bt==="LineString"){for(jt=0;jt<mr.length;jt++)qe.push(Cr(qt.id,bt,mr[jt],qt.tags));continue}bt!=="LineString"&&bt!=="MultiLineString"||(mr.length===1?(bt="LineString",mr=mr[0]):bt="MultiLineString"),bt!=="Point"&&bt!=="MultiPoint"||(bt=mr.length===3?"Point":"MultiPoint"),qe.push(Cr(qt.id,bt,mr,qt.tags))}}}return qe.length?qe:null}function zr(oe,xe,Ce,Te,De){for(var et=0;et<oe.length;et+=3){var nt=oe[et+De];nt>=Ce&&nt<=Te&&(xe.push(oe[et]),xe.push(oe[et+1]),xe.push(oe[et+2]))}}function Hr(oe,xe,Ce,Te,De,et,nt){for(var ke,qe,ht=Ur(oe),qt=De===0?Ri:_n,Xt=oe.start,bt=0;bt<oe.length-3;bt+=3){var Mt=oe[bt],dr=oe[bt+1],mr=oe[bt+2],jt=oe[bt+3],gr=oe[bt+4],or=De===0?Mt:dr,fr=De===0?jt:gr,an=!1;nt&&(ke=Math.sqrt(Math.pow(Mt-jt,2)+Math.pow(dr-gr,2))),or<Ce?fr>Ce&&(qe=qt(ht,Mt,dr,jt,gr,Ce),nt&&(ht.start=Xt+ke*qe)):or>Te?fr<Te&&(qe=qt(ht,Mt,dr,jt,gr,Te),nt&&(ht.start=Xt+ke*qe)):_r(ht,Mt,dr,mr),fr<Ce&&or>=Ce&&(qe=qt(ht,Mt,dr,jt,gr,Ce),an=!0),fr>Te&&or<=Te&&(qe=qt(ht,Mt,dr,jt,gr,Te),an=!0),!et&&an&&(nt&&(ht.end=Xt+ke*qe),xe.push(ht),ht=Ur(oe)),nt&&(Xt+=ke)}var yr=oe.length-3;Mt=oe[yr],dr=oe[yr+1],mr=oe[yr+2],(or=De===0?Mt:dr)>=Ce&&or<=Te&&_r(ht,Mt,dr,mr),yr=ht.length-3,et&&yr>=3&&(ht[yr]!==ht[0]||ht[yr+1]!==ht[1])&&_r(ht,ht[0],ht[1],ht[2]),ht.length&&xe.push(ht)}function Ur(oe){var xe=[];return xe.size=oe.size,xe.start=oe.start,xe.end=oe.end,xe}function nn(oe,xe,Ce,Te,De,et){for(var nt=0;nt<oe.length;nt++)Hr(oe[nt],xe,Ce,Te,De,et,!1)}function _r(oe,xe,Ce,Te){oe.push(xe),oe.push(Ce),oe.push(Te)}function Ri(oe,xe,Ce,Te,De,et){var nt=(et-xe)/(Te-xe);return oe.push(et),oe.push(Ce+(De-Ce)*nt),oe.push(1),nt}function _n(oe,xe,Ce,Te,De,et){var nt=(et-Ce)/(De-Ce);return oe.push(xe+(Te-xe)*nt),oe.push(et),oe.push(1),nt}function fi(oe,xe){for(var Ce=[],Te=0;Te<oe.length;Te++){var De,et=oe[Te],nt=et.type;if(nt==="Point"||nt==="MultiPoint"||nt==="LineString")De=kn(et.geometry,xe);else if(nt==="MultiLineString"||nt==="Polygon"){De=[];for(var ke=0;ke<et.geometry.length;ke++)De.push(kn(et.geometry[ke],xe))}else if(nt==="MultiPolygon")for(De=[],ke=0;ke<et.geometry.length;ke++){for(var qe=[],ht=0;ht<et.geometry[ke].length;ht++)qe.push(kn(et.geometry[ke][ht],xe));De.push(qe)}Ce.push(Cr(et.id,nt,De,et.tags))}return Ce}function kn(oe,xe){var Ce=[];Ce.size=oe.size,oe.start!==void 0&&(Ce.start=oe.start,Ce.end=oe.end);for(var Te=0;Te<oe.length;Te+=3)Ce.push(oe[Te]+xe,oe[Te+1],oe[Te+2]);return Ce}function yn(oe,xe){if(oe.transformed)return oe;var Ce,Te,De,et=1<<oe.z,nt=oe.x,ke=oe.y;for(Ce=0;Ce<oe.features.length;Ce++){var qe=oe.features[Ce],ht=qe.geometry,qt=qe.type;if(qe.geometry=[],qt===1)for(Te=0;Te<ht.length;Te+=2)qe.geometry.push(va(ht[Te],ht[Te+1],xe,et,nt,ke));else for(Te=0;Te<ht.length;Te++){var Xt=[];for(De=0;De<ht[Te].length;De+=2)Xt.push(va(ht[Te][De],ht[Te][De+1],xe,et,nt,ke));qe.geometry.push(Xt)}}return oe.transformed=!0,oe}function va(oe,xe,Ce,Te,De,et){return[Math.round(Ce*(oe*Te-De)),Math.round(Ce*(xe*Te-et))]}function zn(oe,xe,Ce,Te,De){for(var et=xe===De.maxZoom?0:De.tolerance/((1<<xe)*De.extent),nt={features:[],numPoints:0,numSimplified:0,numFeatures:0,source:null,x:Ce,y:Te,z:xe,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0},ke=0;ke<oe.length;ke++){nt.numFeatures++,Sa(nt,oe[ke],et,De);var qe=oe[ke].minX,ht=oe[ke].minY,qt=oe[ke].maxX,Xt=oe[ke].maxY;qe<nt.minX&&(nt.minX=qe),ht<nt.minY&&(nt.minY=ht),qt>nt.maxX&&(nt.maxX=qt),Xt>nt.maxY&&(nt.maxY=Xt)}return nt}function Sa(oe,xe,Ce,Te){var De=xe.geometry,et=xe.type,nt=[];if(et==="Point"||et==="MultiPoint")for(var ke=0;ke<De.length;ke+=3)nt.push(De[ke]),nt.push(De[ke+1]),oe.numPoints++,oe.numSimplified++;else if(et==="LineString")wi(nt,De,oe,Ce,!1,!1);else if(et==="MultiLineString"||et==="Polygon")for(ke=0;ke<De.length;ke++)wi(nt,De[ke],oe,Ce,et==="Polygon",ke===0);else if(et==="MultiPolygon")for(var qe=0;qe<De.length;qe++){var ht=De[qe];for(ke=0;ke<ht.length;ke++)wi(nt,ht[ke],oe,Ce,!0,ke===0)}if(nt.length){var qt=xe.tags||null;if(et==="LineString"&&Te.lineMetrics){for(var Xt in qt={},xe.tags)qt[Xt]=xe.tags[Xt];qt.mapbox_clip_start=De.start/De.size,qt.mapbox_clip_end=De.end/De.size}var bt={geometry:nt,type:et==="Polygon"||et==="MultiPolygon"?3:et==="LineString"||et==="MultiLineString"?2:1,tags:qt};xe.id!==null&&(bt.id=xe.id),oe.features.push(bt)}}function wi(oe,xe,Ce,Te,De,et){var nt=Te*Te;if(Te>0&&xe.size<(De?nt:Te))Ce.numPoints+=xe.length/3;else{for(var ke=[],qe=0;qe<xe.length;qe+=3)(Te===0||xe[qe+2]>nt)&&(Ce.numSimplified++,ke.push(xe[qe]),ke.push(xe[qe+1])),Ce.numPoints++;De&&(function(ht,qt){for(var Xt=0,bt=0,Mt=ht.length,dr=Mt-2;bt<Mt;dr=bt,bt+=2)Xt+=(ht[bt]-ht[dr])*(ht[bt+1]+ht[dr+1]);if(Xt>0===qt)for(bt=0,Mt=ht.length;bt<Mt/2;bt+=2){var mr=ht[bt],jt=ht[bt+1];ht[bt]=ht[Mt-2-bt],ht[bt+1]=ht[Mt-1-bt],ht[Mt-2-bt]=mr,ht[Mt-1-bt]=jt}})(ke,et),oe.push(ke)}}function Cs(oe,xe){var Ce=(xe=this.options=(function(De,et){for(var nt in et)De[nt]=et[nt];return De})(Object.create(this.options),xe)).debug;if(Ce&&console.time("preprocess data"),xe.maxZoom<0||xe.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(xe.promoteId&&xe.generateId)throw new Error("promoteId and generateId cannot be used together.");var Te=(function(De,et){var nt=[];if(De.type==="FeatureCollection")for(var ke=0;ke<De.features.length;ke++)Be(nt,De.features[ke],et,ke);else Be(nt,De.type==="Feature"?De:{geometry:De},et);return nt})(oe,xe);this.tiles={},this.tileCoords=[],Ce&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",xe.indexMaxZoom,xe.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),(Te=(function(De,et){var nt=et.buffer/et.extent,ke=De,qe=Qt(De,1,-1-nt,nt,0,-1,2,et),ht=Qt(De,1,1-nt,2+nt,0,-1,2,et);return(qe||ht)&&(ke=Qt(De,1,-nt,1+nt,0,-1,2,et)||[],qe&&(ke=fi(qe,1).concat(ke)),ht&&(ke=ke.concat(fi(ht,-1)))),ke})(Te,xe)).length&&this.splitTile(Te,0,0,0),Ce&&(Te.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}function zs(oe,xe,Ce){return 32*((1<<oe)*Ce+xe)+oe}function pi(oe,xe){var Ce=oe.tileID.canonical;if(!this._geoJSONIndex)return xe(null,null);var Te=this._geoJSONIndex.getTile(Ce.z,Ce.x,Ce.y);if(!Te)return xe(null,null);var De=new ie(Te.features),et=_e(De);et.byteOffset===0&&et.byteLength===et.buffer.byteLength||(et=new Uint8Array(et)),xe(null,{vectorTile:De,rawData:et.buffer})}Ve.prototype.load=function(oe){var xe=this.options,Ce=xe.log,Te=xe.minZoom,De=xe.maxZoom,et=xe.nodeSize;Ce&&console.time("total time");var nt="prepare "+oe.length+" points";Ce&&console.time(nt),this.points=oe;for(var ke=[],qe=0;qe<oe.length;qe++)oe[qe].geometry&&ke.push(Qe(oe[qe],qe));this.trees[De+1]=new Me(ke,_t,Ye,et,Float32Array),Ce&&console.timeEnd(nt);for(var ht=De;ht>=Te;ht--){var qt=+Date.now();ke=this._cluster(ke,ht),this.trees[ht]=new Me(ke,_t,Ye,et,Float32Array),Ce&&console.log("z%d: %d clusters in %dms",ht,ke.length,+Date.now()-qt)}return Ce&&console.timeEnd("total time"),this},Ve.prototype.getClusters=function(oe,xe){var Ce=((oe[0]+180)%360+360)%360-180,Te=Math.max(-90,Math.min(90,oe[1])),De=oe[2]===180?180:((oe[2]+180)%360+360)%360-180,et=Math.max(-90,Math.min(90,oe[3]));if(oe[2]-oe[0]>=360)Ce=-180,De=180;else if(Ce>De){var nt=this.getClusters([Ce,Te,180,et],xe),ke=this.getClusters([-180,Te,De,et],xe);return nt.concat(ke)}for(var qe=this.trees[this._limitZoom(xe)],ht=[],qt=0,Xt=qe.range(zt(Ce),Lt(et),zt(De),Lt(Te));qt<Xt.length;qt+=1){var bt=qe.points[Xt[qt]];ht.push(bt.numPoints?St(bt):this.points[bt.index])}return ht},Ve.prototype.getChildren=function(oe){var xe=this._getOriginId(oe),Ce=this._getOriginZoom(oe),Te="No cluster with the specified id.",De=this.trees[Ce];if(!De)throw new Error(Te);var et=De.points[xe];if(!et)throw new Error(Te);for(var nt=this.options.radius/(this.options.extent*Math.pow(2,Ce-1)),ke=[],qe=0,ht=De.within(et.x,et.y,nt);qe<ht.length;qe+=1){var qt=De.points[ht[qe]];qt.parentId===oe&&ke.push(qt.numPoints?St(qt):this.points[qt.index])}if(ke.length===0)throw new Error(Te);return ke},Ve.prototype.getLeaves=function(oe,xe,Ce){var Te=[];return this._appendLeaves(Te,oe,xe=xe||10,Ce=Ce||0,0),Te},Ve.prototype.getTile=function(oe,xe,Ce){var Te=this.trees[this._limitZoom(oe)],De=Math.pow(2,oe),et=this.options,nt=et.radius/et.extent,ke=(Ce-nt)/De,qe=(Ce+1+nt)/De,ht={features:[]};return this._addTileFeatures(Te.range((xe-nt)/De,ke,(xe+1+nt)/De,qe),Te.points,xe,Ce,De,ht),xe===0&&this._addTileFeatures(Te.range(1-nt/De,ke,1,qe),Te.points,De,Ce,De,ht),xe===De-1&&this._addTileFeatures(Te.range(0,ke,nt/De,qe),Te.points,-1,Ce,De,ht),ht.features.length?ht:null},Ve.prototype.getClusterExpansionZoom=function(oe){for(var xe=this._getOriginZoom(oe)-1;xe<=this.options.maxZoom;){var Ce=this.getChildren(oe);if(xe++,Ce.length!==1)break;oe=Ce[0].properties.cluster_id}return xe},Ve.prototype._appendLeaves=function(oe,xe,Ce,Te,De){for(var et=0,nt=this.getChildren(xe);et<nt.length;et+=1){var ke=nt[et],qe=ke.properties;if(qe&&qe.cluster?De+qe.point_count<=Te?De+=qe.point_count:De=this._appendLeaves(oe,qe.cluster_id,Ce,Te,De):De<Te?De++:oe.push(ke),oe.length===Ce)break}return De},Ve.prototype._addTileFeatures=function(oe,xe,Ce,Te,De,et){for(var nt=0,ke=oe;nt<ke.length;nt+=1){var qe=xe[ke[nt]],ht=qe.numPoints,qt={type:1,geometry:[[Math.round(this.options.extent*(qe.x*De-Ce)),Math.round(this.options.extent*(qe.y*De-Te))]],tags:ht?Et(qe):this.points[qe.index].properties},Xt=void 0;ht?Xt=qe.id:this.options.generateId?Xt=qe.index:this.points[qe.index].id&&(Xt=this.points[qe.index].id),Xt!==void 0&&(qt.id=Xt),et.features.push(qt)}},Ve.prototype._limitZoom=function(oe){return Math.max(this.options.minZoom,Math.min(+oe,this.options.maxZoom+1))},Ve.prototype._cluster=function(oe,xe){for(var Ce=[],Te=this.options,De=Te.reduce,et=Te.minPoints,nt=Te.radius/(Te.extent*Math.pow(2,xe)),ke=0;ke<oe.length;ke++){var qe=oe[ke];if(!(qe.zoom<=xe)){qe.zoom=xe;for(var ht=this.trees[xe+1],qt=ht.within(qe.x,qe.y,nt),Xt=qe.numPoints||1,bt=Xt,Mt=0,dr=qt;Mt<dr.length;Mt+=1){var mr=ht.points[dr[Mt]];mr.zoom>xe&&(bt+=mr.numPoints||1)}if(bt>=et){for(var jt=qe.x*Xt,gr=qe.y*Xt,or=De&&Xt>1?this._map(qe,!0):null,fr=(ke<<5)+(xe+1)+this.points.length,an=0,yr=qt;an<yr.length;an+=1){var xn=ht.points[yr[an]];if(!(xn.zoom<=xe)){xn.zoom=xe;var $n=xn.numPoints||1;jt+=xn.x*$n,gr+=xn.y*$n,xn.parentId=fr,De&&(or||(or=this._map(qe,!0)),De(or,this._map(xn)))}}qe.parentId=fr,Ce.push(tt(jt/bt,gr/bt,fr,bt,or))}else if(Ce.push(qe),bt>1)for(var bn=0,Un=qt;bn<Un.length;bn+=1){var Xr=ht.points[Un[bn]];Xr.zoom<=xe||(Xr.zoom=xe,Ce.push(Xr))}}}return Ce},Ve.prototype._getOriginId=function(oe){return oe-this.points.length>>5},Ve.prototype._getOriginZoom=function(oe){return(oe-this.points.length)%32},Ve.prototype._map=function(oe,xe){if(oe.numPoints)return xe?wr({},oe.properties):oe.properties;var Ce=this.points[oe.index].properties,Te=this.options.map(Ce);return xe&&Te===Ce?wr({},Te):Te},Cs.prototype.options={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0},Cs.prototype.splitTile=function(oe,xe,Ce,Te,De,et,nt){for(var ke=[oe,xe,Ce,Te],qe=this.options,ht=qe.debug;ke.length;){Te=ke.pop(),Ce=ke.pop(),xe=ke.pop(),oe=ke.pop();var qt=1<<xe,Xt=zs(xe,Ce,Te),bt=this.tiles[Xt];if(!bt&&(ht>1&&console.time("creation"),bt=this.tiles[Xt]=zn(oe,xe,Ce,Te,qe),this.tileCoords.push({z:xe,x:Ce,y:Te}),ht)){ht>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",xe,Ce,Te,bt.numFeatures,bt.numPoints,bt.numSimplified),console.timeEnd("creation"));var Mt="z"+xe;this.stats[Mt]=(this.stats[Mt]||0)+1,this.total++}if(bt.source=oe,De){if(xe===qe.maxZoom||xe===De)continue;var dr=1<<De-xe;if(Ce!==Math.floor(et/dr)||Te!==Math.floor(nt/dr))continue}else if(xe===qe.indexMaxZoom||bt.numPoints<=qe.indexMaxPoints)continue;if(bt.source=null,oe.length!==0){ht>1&&console.time("clipping");var mr,jt,gr,or,fr,an,yr=.5*qe.buffer/qe.extent,xn=.5-yr,$n=.5+yr,bn=1+yr;mr=jt=gr=or=null,fr=Qt(oe,qt,Ce-yr,Ce+$n,0,bt.minX,bt.maxX,qe),an=Qt(oe,qt,Ce+xn,Ce+bn,0,bt.minX,bt.maxX,qe),oe=null,fr&&(mr=Qt(fr,qt,Te-yr,Te+$n,1,bt.minY,bt.maxY,qe),jt=Qt(fr,qt,Te+xn,Te+bn,1,bt.minY,bt.maxY,qe),fr=null),an&&(gr=Qt(an,qt,Te-yr,Te+$n,1,bt.minY,bt.maxY,qe),or=Qt(an,qt,Te+xn,Te+bn,1,bt.minY,bt.maxY,qe),an=null),ht>1&&console.timeEnd("clipping"),ke.push(mr||[],xe+1,2*Ce,2*Te),ke.push(jt||[],xe+1,2*Ce,2*Te+1),ke.push(gr||[],xe+1,2*Ce+1,2*Te),ke.push(or||[],xe+1,2*Ce+1,2*Te+1)}}},Cs.prototype.getTile=function(oe,xe,Ce){var Te=this.options,De=Te.extent,et=Te.debug;if(oe<0||oe>24)return null;var nt=1<<oe,ke=zs(oe,xe=(xe%nt+nt)%nt,Ce);if(this.tiles[ke])return yn(this.tiles[ke],De);et>1&&console.log("drilling down to z%d-%d-%d",oe,xe,Ce);for(var qe,ht=oe,qt=xe,Xt=Ce;!qe&&ht>0;)ht--,qt=Math.floor(qt/2),Xt=Math.floor(Xt/2),qe=this.tiles[zs(ht,qt,Xt)];return qe&&qe.source?(et>1&&console.log("found parent tile z%d-%d-%d",ht,qt,Xt),et>1&&console.time("drilling down"),this.splitTile(qe.source,ht,qt,Xt,oe,xe,Ce),et>1&&console.timeEnd("drilling down"),this.tiles[ke]?yn(this.tiles[ke],De):null):null};var xr=(function(oe){function xe(Ce,Te,De,et){oe.call(this,Ce,Te,De,pi),et&&(this.loadGeoJSON=et)}return oe&&(xe.__proto__=oe),(xe.prototype=Object.create(oe&&oe.prototype)).constructor=xe,xe.prototype.loadData=function(Ce,Te){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),this._pendingCallback=Te,this._pendingLoadDataParams=Ce,this._state&&this._state!=="Idle"?this._state="NeedsLoadData":(this._state="Coalescing",this._loadData())},xe.prototype._loadData=function(){var Ce=this;if(this._pendingCallback&&this._pendingLoadDataParams){var Te=this._pendingCallback,De=this._pendingLoadDataParams;delete this._pendingCallback,delete this._pendingLoadDataParams;var et=!!(De&&De.request&&De.request.collectResourceTiming)&&new a.RequestPerformance(De.request);this.loadGeoJSON(De,(function(nt,ke){if(nt||!ke)return Te(nt);if(typeof ke!="object")return Te(new Error("Input data given to '"+De.source+"' is not a valid GeoJSON object."));(function bt(Mt,dr){var mr,jt=Mt&&Mt.type;if(jt==="FeatureCollection")for(mr=0;mr<Mt.features.length;mr++)bt(Mt.features[mr],dr);else if(jt==="GeometryCollection")for(mr=0;mr<Mt.geometries.length;mr++)bt(Mt.geometries[mr],dr);else if(jt==="Feature")bt(Mt.geometry,dr);else if(jt==="Polygon")B(Mt.coordinates,dr);else if(jt==="MultiPolygon")for(mr=0;mr<Mt.coordinates.length;mr++)B(Mt.coordinates[mr],dr);return Mt})(ke,!0);try{if(De.filter){var qe=a.createExpression(De.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(qe.result==="error")throw new Error(qe.value.map((function(bt){return bt.key+": "+bt.message})).join(", "));var ht=ke.features.filter((function(bt){return qe.value.evaluate({zoom:0},bt)}));ke={type:"FeatureCollection",features:ht}}Ce._geoJSONIndex=De.cluster?new Ve((function(bt){var Mt=bt.superclusterOptions,dr=bt.clusterProperties;if(!dr||!Mt)return Mt;for(var mr={},jt={},gr={accumulated:null,zoom:0},or={properties:null},fr=Object.keys(dr),an=0,yr=fr;an<yr.length;an+=1){var xn=yr[an],$n=dr[xn],bn=$n[0],Un=a.createExpression($n[1]),Xr=a.createExpression(typeof bn=="string"?[bn,["accumulated"],["get",xn]]:bn);mr[xn]=Un.value,jt[xn]=Xr.value}return Mt.map=function(Ks){or.properties=Ks;for(var ti={},Ii=0,Hn=fr;Ii<Hn.length;Ii+=1){var Fn=Hn[Ii];ti[Fn]=mr[Fn].evaluate(gr,or)}return ti},Mt.reduce=function(Ks,ti){or.properties=ti;for(var Ii=0,Hn=fr;Ii<Hn.length;Ii+=1){var Fn=Hn[Ii];gr.accumulated=Ks[Fn],Ks[Fn]=jt[Fn].evaluate(gr,or)}},Mt})(De)).load(ke.features):(function(bt,Mt){return new Cs(bt,Mt)})(ke,De.geojsonVtOptions)}catch(bt){return Te(bt)}Ce.loaded={};var qt={};if(et){var Xt=et.finish();Xt&&(qt.resourceTiming={},qt.resourceTiming[De.source]=JSON.parse(JSON.stringify(Xt)))}Te(null,qt)}))}},xe.prototype.coalesce=function(){this._state==="Coalescing"?this._state="Idle":this._state==="NeedsLoadData"&&(this._state="Coalescing",this._loadData())},xe.prototype.reloadTile=function(Ce,Te){var De=this.loaded;return De&&De[Ce.uid]?oe.prototype.reloadTile.call(this,Ce,Te):this.loadTile(Ce,Te)},xe.prototype.loadGeoJSON=function(Ce,Te){if(Ce.request)a.getJSON(Ce.request,Te);else{if(typeof Ce.data!="string")return Te(new Error("Input data given to '"+Ce.source+"' is not a valid GeoJSON object."));try{return Te(null,JSON.parse(Ce.data))}catch{return Te(new Error("Input data given to '"+Ce.source+"' is not a valid GeoJSON object."))}}},xe.prototype.removeSource=function(Ce,Te){this._pendingCallback&&this._pendingCallback(null,{abandoned:!0}),Te()},xe.prototype.getClusterExpansionZoom=function(Ce,Te){try{Te(null,this._geoJSONIndex.getClusterExpansionZoom(Ce.clusterId))}catch(De){Te(De)}},xe.prototype.getClusterChildren=function(Ce,Te){try{Te(null,this._geoJSONIndex.getChildren(Ce.clusterId))}catch(De){Te(De)}},xe.prototype.getClusterLeaves=function(Ce,Te){try{Te(null,this._geoJSONIndex.getLeaves(Ce.clusterId,Ce.limit,Ce.offset))}catch(De){Te(De)}},xe})(O),Lr=function(oe){var xe=this;this.self=oe,this.actor=new a.Actor(oe,this),this.layerIndexes={},this.availableImages={},this.workerSourceTypes={vector:O,geojson:xr},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=function(Ce,Te){if(xe.workerSourceTypes[Ce])throw new Error('Worker source with name "'+Ce+'" already registered.');xe.workerSourceTypes[Ce]=Te},this.self.registerRTLTextPlugin=function(Ce){if(a.plugin.isParsed())throw new Error("RTL text plugin already registered.");a.plugin.applyArabicShaping=Ce.applyArabicShaping,a.plugin.processBidirectionalText=Ce.processBidirectionalText,a.plugin.processStyledBidirectionalText=Ce.processStyledBidirectionalText}};return Lr.prototype.setReferrer=function(oe,xe){this.referrer=xe},Lr.prototype.setImages=function(oe,xe,Ce){for(var Te in this.availableImages[oe]=xe,this.workerSources[oe]){var De=this.workerSources[oe][Te];for(var et in De)De[et].availableImages=xe}Ce()},Lr.prototype.setLayers=function(oe,xe,Ce){this.getLayerIndex(oe).replace(xe),Ce()},Lr.prototype.updateLayers=function(oe,xe,Ce){this.getLayerIndex(oe).update(xe.layers,xe.removedIds),Ce()},Lr.prototype.loadTile=function(oe,xe,Ce){this.getWorkerSource(oe,xe.type,xe.source).loadTile(xe,Ce)},Lr.prototype.loadDEMTile=function(oe,xe,Ce){this.getDEMWorkerSource(oe,xe.source).loadTile(xe,Ce)},Lr.prototype.reloadTile=function(oe,xe,Ce){this.getWorkerSource(oe,xe.type,xe.source).reloadTile(xe,Ce)},Lr.prototype.abortTile=function(oe,xe,Ce){this.getWorkerSource(oe,xe.type,xe.source).abortTile(xe,Ce)},Lr.prototype.removeTile=function(oe,xe,Ce){this.getWorkerSource(oe,xe.type,xe.source).removeTile(xe,Ce)},Lr.prototype.removeDEMTile=function(oe,xe){this.getDEMWorkerSource(oe,xe.source).removeTile(xe)},Lr.prototype.removeSource=function(oe,xe,Ce){if(this.workerSources[oe]&&this.workerSources[oe][xe.type]&&this.workerSources[oe][xe.type][xe.source]){var Te=this.workerSources[oe][xe.type][xe.source];delete this.workerSources[oe][xe.type][xe.source],Te.removeSource!==void 0?Te.removeSource(xe,Ce):Ce()}},Lr.prototype.loadWorkerSource=function(oe,xe,Ce){try{this.self.importScripts(xe.url),Ce()}catch(Te){Ce(Te.toString())}},Lr.prototype.syncRTLPluginState=function(oe,xe,Ce){try{a.plugin.setState(xe);var Te=a.plugin.getPluginURL();if(a.plugin.isLoaded()&&!a.plugin.isParsed()&&Te!=null){this.self.importScripts(Te);var De=a.plugin.isParsed();Ce(De?void 0:new Error("RTL Text Plugin failed to import scripts from "+Te),De)}}catch(et){Ce(et.toString())}},Lr.prototype.getAvailableImages=function(oe){var xe=this.availableImages[oe];return xe||(xe=[]),xe},Lr.prototype.getLayerIndex=function(oe){var xe=this.layerIndexes[oe];return xe||(xe=this.layerIndexes[oe]=new w),xe},Lr.prototype.getWorkerSource=function(oe,xe,Ce){var Te=this;return this.workerSources[oe]||(this.workerSources[oe]={}),this.workerSources[oe][xe]||(this.workerSources[oe][xe]={}),this.workerSources[oe][xe][Ce]||(this.workerSources[oe][xe][Ce]=new this.workerSourceTypes[xe]({send:function(De,et,nt){Te.actor.send(De,et,nt,oe)}},this.getLayerIndex(oe),this.getAvailableImages(oe))),this.workerSources[oe][xe][Ce]},Lr.prototype.getDEMWorkerSource=function(oe,xe){return this.demWorkerSources[oe]||(this.demWorkerSources[oe]={}),this.demWorkerSources[oe][xe]||(this.demWorkerSources[oe][xe]=new F),this.demWorkerSources[oe][xe]},Lr.prototype.enforceCacheSizeLimit=function(oe,xe){a.enforceCacheSizeLimit(xe)},typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Lr(self)),Lr})),l(["./shared"],(function(a){var p=a.createCommonjsModule((function(m){function x(y){return!v(y)}function v(y){return typeof window>"u"||typeof document>"u"?"not a browser":Array.prototype&&Array.prototype.every&&Array.prototype.filter&&Array.prototype.forEach&&Array.prototype.indexOf&&Array.prototype.lastIndexOf&&Array.prototype.map&&Array.prototype.some&&Array.prototype.reduce&&Array.prototype.reduceRight&&Array.isArray?Function.prototype&&Function.prototype.bind?Object.keys&&Object.create&&Object.getPrototypeOf&&Object.getOwnPropertyNames&&Object.isSealed&&Object.isFrozen&&Object.isExtensible&&Object.getOwnPropertyDescriptor&&Object.defineProperty&&Object.defineProperties&&Object.seal&&Object.freeze&&Object.preventExtensions?"JSON"in window&&"parse"in JSON&&"stringify"in JSON?(function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var k,I,U=new Blob([""],{type:"text/javascript"}),$=URL.createObjectURL(U);try{I=new Worker($),k=!0}catch{k=!1}return I&&I.terminate(),URL.revokeObjectURL($),k})()?"Uint8ClampedArray"in window?ArrayBuffer.isView?(function(){var k=document.createElement("canvas");k.width=k.height=1;var I=k.getContext("2d");if(!I)return!1;var U=I.getImageData(0,0,1,1);return U&&U.width===k.width})()?(d[N=y&&y.failIfMajorPerformanceCaveat]===void 0&&(d[N]=(function(k){var I=(function($){var W=document.createElement("canvas"),Y=Object.create(x.webGLContextAttributes);return Y.failIfMajorPerformanceCaveat=$,W.probablySupportsContext?W.probablySupportsContext("webgl",Y)||W.probablySupportsContext("experimental-webgl",Y):W.supportsContext?W.supportsContext("webgl",Y)||W.supportsContext("experimental-webgl",Y):W.getContext("webgl",Y)||W.getContext("experimental-webgl",Y)})(k);if(!I)return!1;var U=I.createShader(I.VERTEX_SHADER);return!(!U||I.isContextLost())&&(I.shaderSource(U,"void main() {}"),I.compileShader(U),I.getShaderParameter(U,I.COMPILE_STATUS)===!0)})(N)),d[N]?void 0:"insufficient WebGL support"):"insufficient Canvas/getImageData support":"insufficient ArrayBuffer support":"insufficient Uint8ClampedArray support":"insufficient worker support":"insufficient JSON support":"insufficient Object support":"insufficient Function support":"insufficent Array support";var N}m.exports?m.exports=x:window&&(window.mapboxgl=window.mapboxgl||{},window.mapboxgl.supported=x,window.mapboxgl.notSupportedReason=v);var d={};x.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0}})),g={create:function(m,x,v){var d=a.window.document.createElement(m);return x!==void 0&&(d.className=x),v&&v.appendChild(d),d},createNS:function(m,x){return a.window.document.createElementNS(m,x)}},w=a.window.document&&a.window.document.documentElement.style;function j(m){if(!w)return m[0];for(var x=0;x<m.length;x++)if(m[x]in w)return m[x];return m[0]}var S,T=j(["userSelect","MozUserSelect","WebkitUserSelect","msUserSelect"]);g.disableDrag=function(){w&&T&&(S=w[T],w[T]="none")},g.enableDrag=function(){w&&T&&(w[T]=S)};var E=j(["transform","WebkitTransform"]);g.setTransform=function(m,x){m.style[E]=x};var O=!1;try{var R=Object.defineProperty({},"passive",{get:function(){O=!0}});a.window.addEventListener("test",R,R),a.window.removeEventListener("test",R,R)}catch{O=!1}g.addEventListener=function(m,x,v,d){d===void 0&&(d={}),m.addEventListener(x,v,"passive"in d&&O?d:d.capture)},g.removeEventListener=function(m,x,v,d){d===void 0&&(d={}),m.removeEventListener(x,v,"passive"in d&&O?d:d.capture)};var F=function(m){m.preventDefault(),m.stopPropagation(),a.window.removeEventListener("click",F,!0)};function B(m){var x=m.userImage;return!!(x&&x.render&&x.render())&&(m.data.replace(new Uint8Array(x.data.buffer)),!0)}g.suppressClick=function(){a.window.addEventListener("click",F,!0),a.window.setTimeout((function(){a.window.removeEventListener("click",F,!0)}),0)},g.mousePos=function(m,x){var v=m.getBoundingClientRect();return new a.Point(x.clientX-v.left-m.clientLeft,x.clientY-v.top-m.clientTop)},g.touchPos=function(m,x){for(var v=m.getBoundingClientRect(),d=[],y=0;y<x.length;y++)d.push(new a.Point(x[y].clientX-v.left-m.clientLeft,x[y].clientY-v.top-m.clientTop));return d},g.mouseButton=function(m){return a.window.InstallTrigger!==void 0&&m.button===2&&m.ctrlKey&&a.window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:m.button},g.remove=function(m){m.parentNode&&m.parentNode.removeChild(m)};var G=(function(m){function x(){m.call(this),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded=!1,this.requestors=[],this.patterns={},this.atlasImage=new a.RGBAImage({width:1,height:1}),this.dirty=!0}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.isLoaded=function(){return this.loaded},x.prototype.setLoaded=function(v){if(this.loaded!==v&&(this.loaded=v,v)){for(var d=0,y=this.requestors;d<y.length;d+=1){var N=y[d];this._notify(N.ids,N.callback)}this.requestors=[]}},x.prototype.getImage=function(v){return this.images[v]},x.prototype.addImage=function(v,d){this._validate(v,d)&&(this.images[v]=d)},x.prototype._validate=function(v,d){var y=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new a.ErrorEvent(new Error('Image "'+v+'" has invalid "stretchX" value'))),y=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new a.ErrorEvent(new Error('Image "'+v+'" has invalid "stretchY" value'))),y=!1),this._validateContent(d.content,d)||(this.fire(new a.ErrorEvent(new Error('Image "'+v+'" has invalid "content" value'))),y=!1),y},x.prototype._validateStretch=function(v,d){if(!v)return!0;for(var y=0,N=0,k=v;N<k.length;N+=1){var I=k[N];if(I[0]<y||I[1]<I[0]||d<I[1])return!1;y=I[1]}return!0},x.prototype._validateContent=function(v,d){return!(v&&(v.length!==4||v[0]<0||d.data.width<v[0]||v[1]<0||d.data.height<v[1]||v[2]<0||d.data.width<v[2]||v[3]<0||d.data.height<v[3]||v[2]<v[0]||v[3]<v[1]))},x.prototype.updateImage=function(v,d){d.version=this.images[v].version+1,this.images[v]=d,this.updatedImages[v]=!0},x.prototype.removeImage=function(v){var d=this.images[v];delete this.images[v],delete this.patterns[v],d.userImage&&d.userImage.onRemove&&d.userImage.onRemove()},x.prototype.listImages=function(){return Object.keys(this.images)},x.prototype.getImages=function(v,d){var y=!0;if(!this.isLoaded())for(var N=0,k=v;N<k.length;N+=1)this.images[k[N]]||(y=!1);this.isLoaded()||y?this._notify(v,d):this.requestors.push({ids:v,callback:d})},x.prototype._notify=function(v,d){for(var y={},N=0,k=v;N<k.length;N+=1){var I=k[N];this.images[I]||this.fire(new a.Event("styleimagemissing",{id:I}));var U=this.images[I];U?y[I]={data:U.data.clone(),pixelRatio:U.pixelRatio,sdf:U.sdf,version:U.version,stretchX:U.stretchX,stretchY:U.stretchY,content:U.content,hasRenderCallback:!!(U.userImage&&U.userImage.render)}:a.warnOnce('Image "'+I+'" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.')}d(null,y)},x.prototype.getPixelSize=function(){var v=this.atlasImage;return{width:v.width,height:v.height}},x.prototype.getPattern=function(v){var d=this.patterns[v],y=this.getImage(v);if(!y)return null;if(d&&d.position.version===y.version)return d.position;if(d)d.position.version=y.version;else{var N={w:y.data.width+2,h:y.data.height+2,x:0,y:0},k=new a.ImagePosition(N,y);this.patterns[v]={bin:N,position:k}}return this._updatePatternAtlas(),this.patterns[v].position},x.prototype.bind=function(v){var d=v.gl;this.atlasTexture?this.dirty&&(this.atlasTexture.update(this.atlasImage),this.dirty=!1):this.atlasTexture=new a.Texture(v,this.atlasImage,d.RGBA),this.atlasTexture.bind(d.LINEAR,d.CLAMP_TO_EDGE)},x.prototype._updatePatternAtlas=function(){var v=[];for(var d in this.patterns)v.push(this.patterns[d].bin);var y=a.potpack(v),N=y.w,k=y.h,I=this.atlasImage;for(var U in I.resize({width:N||1,height:k||1}),this.patterns){var $=this.patterns[U].bin,W=$.x+1,Y=$.y+1,X=this.images[U].data,le=X.width,ve=X.height;a.RGBAImage.copy(X,I,{x:0,y:0},{x:W,y:Y},{width:le,height:ve}),a.RGBAImage.copy(X,I,{x:0,y:ve-1},{x:W,y:Y-1},{width:le,height:1}),a.RGBAImage.copy(X,I,{x:0,y:0},{x:W,y:Y+ve},{width:le,height:1}),a.RGBAImage.copy(X,I,{x:le-1,y:0},{x:W-1,y:Y},{width:1,height:ve}),a.RGBAImage.copy(X,I,{x:0,y:0},{x:W+le,y:Y},{width:1,height:ve})}this.dirty=!0},x.prototype.beginFrame=function(){this.callbackDispatchedThisFrame={}},x.prototype.dispatchRenderCallbacks=function(v){for(var d=0,y=v;d<y.length;d+=1){var N=y[d];if(!this.callbackDispatchedThisFrame[N]){this.callbackDispatchedThisFrame[N]=!0;var k=this.images[N];B(k)&&this.updateImage(N,k)}}},x})(a.Evented),z=ge,ee=ge,ie=1e20;function ge(m,x,v,d,y,N){this.fontSize=m||24,this.buffer=x===void 0?3:x,this.cutoff=d||.25,this.fontFamily=y||"sans-serif",this.fontWeight=N||"normal",this.radius=v||8;var k=this.size=this.fontSize+2*this.buffer;this.canvas=document.createElement("canvas"),this.canvas.width=this.canvas.height=k,this.ctx=this.canvas.getContext("2d"),this.ctx.font=this.fontWeight+" "+this.fontSize+"px "+this.fontFamily,this.ctx.textBaseline="middle",this.ctx.fillStyle="black",this.gridOuter=new Float64Array(k*k),this.gridInner=new Float64Array(k*k),this.f=new Float64Array(k),this.d=new Float64Array(k),this.z=new Float64Array(k+1),this.v=new Int16Array(k),this.middle=Math.round(k/2*(navigator.userAgent.indexOf("Gecko/")>=0?1.2:1))}function K(m,x,v,d,y,N,k){for(var I=0;I<x;I++){for(var U=0;U<v;U++)d[U]=m[U*x+I];for(J(d,y,N,k,v),U=0;U<v;U++)m[U*x+I]=y[U]}for(U=0;U<v;U++){for(I=0;I<x;I++)d[I]=m[U*x+I];for(J(d,y,N,k,x),I=0;I<x;I++)m[U*x+I]=Math.sqrt(y[I])}}function J(m,x,v,d,y){v[0]=0,d[0]=-ie,d[1]=+ie;for(var N=1,k=0;N<y;N++){for(var I=(m[N]+N*N-(m[v[k]]+v[k]*v[k]))/(2*N-2*v[k]);I<=d[k];)k--,I=(m[N]+N*N-(m[v[k]]+v[k]*v[k]))/(2*N-2*v[k]);v[++k]=N,d[k]=I,d[k+1]=+ie}for(N=0,k=0;N<y;N++){for(;d[k+1]<N;)k++;x[N]=(N-v[k])*(N-v[k])+m[v[k]]}}ge.prototype.draw=function(m){this.ctx.clearRect(0,0,this.size,this.size),this.ctx.fillText(m,this.buffer,this.middle);for(var x=this.ctx.getImageData(0,0,this.size,this.size),v=new Uint8ClampedArray(this.size*this.size),d=0;d<this.size*this.size;d++){var y=x.data[4*d+3]/255;this.gridOuter[d]=y===1?0:y===0?ie:Math.pow(Math.max(0,.5-y),2),this.gridInner[d]=y===1?ie:y===0?0:Math.pow(Math.max(0,y-.5),2)}for(K(this.gridOuter,this.size,this.size,this.f,this.d,this.v,this.z),K(this.gridInner,this.size,this.size,this.f,this.d,this.v,this.z),d=0;d<this.size*this.size;d++)v[d]=Math.max(0,Math.min(255,Math.round(255-255*((this.gridOuter[d]-this.gridInner[d])/this.radius+this.cutoff))));return v},z.default=ee;var Se=function(m,x){this.requestManager=m,this.localIdeographFontFamily=x,this.entries={}};Se.prototype.setURL=function(m){this.url=m},Se.prototype.getGlyphs=function(m,x){var v=this,d=[];for(var y in m)for(var N=0,k=m[y];N<k.length;N+=1)d.push({stack:y,id:k[N]});a.asyncAll(d,(function(I,U){var $=I.stack,W=I.id,Y=v.entries[$];Y||(Y=v.entries[$]={glyphs:{},requests:{},ranges:{}});var X=Y.glyphs[W];if(X===void 0){if(X=v._tinySDF(Y,$,W))return Y.glyphs[W]=X,void U(null,{stack:$,id:W,glyph:X});var le=Math.floor(W/256);if(256*le>65535)U(new Error("glyphs > 65535 not supported"));else if(Y.ranges[le])U(null,{stack:$,id:W,glyph:X});else{var ve=Y.requests[le];ve||(ve=Y.requests[le]=[],Se.loadGlyphRange($,le,v.url,v.requestManager,(function(je,de){if(de){for(var Pe in de)v._doesCharSupportLocalGlyph(+Pe)||(Y.glyphs[+Pe]=de[+Pe]);Y.ranges[le]=!0}for(var Ie=0,Ae=ve;Ie<Ae.length;Ie+=1)(0,Ae[Ie])(je,de);delete Y.requests[le]}))),ve.push((function(je,de){je?U(je):de&&U(null,{stack:$,id:W,glyph:de[W]||null})}))}}else U(null,{stack:$,id:W,glyph:X})}),(function(I,U){if(I)x(I);else if(U){for(var $={},W=0,Y=U;W<Y.length;W+=1){var X=Y[W],le=X.stack,ve=X.id,je=X.glyph;($[le]||($[le]={}))[ve]=je&&{id:je.id,bitmap:je.bitmap.clone(),metrics:je.metrics}}x(null,$)}}))},Se.prototype._doesCharSupportLocalGlyph=function(m){return!!this.localIdeographFontFamily&&(a.isChar["CJK Unified Ideographs"](m)||a.isChar["Hangul Syllables"](m)||a.isChar.Hiragana(m)||a.isChar.Katakana(m))},Se.prototype._tinySDF=function(m,x,v){var d=this.localIdeographFontFamily;if(d&&this._doesCharSupportLocalGlyph(v)){var y=m.tinySDF;if(!y){var N="400";/bold/i.test(x)?N="900":/medium/i.test(x)?N="500":/light/i.test(x)&&(N="200"),y=m.tinySDF=new Se.TinySDF(24,3,8,.25,d,N)}return{id:v,bitmap:new a.AlphaImage({width:30,height:30},y.draw(String.fromCharCode(v))),metrics:{width:24,height:24,left:0,top:-8,advance:24}}}},Se.loadGlyphRange=function(m,x,v,d,y){var N=256*x,k=N+255,I=d.transformRequest(d.normalizeGlyphsURL(v).replace("{fontstack}",m).replace("{range}",N+"-"+k),a.ResourceType.Glyphs);a.getArrayBuffer(I,(function(U,$){if(U)y(U);else if($){for(var W={},Y=0,X=a.parseGlyphPBF($);Y<X.length;Y+=1){var le=X[Y];W[le.id]=le}y(null,W)}}))},Se.TinySDF=z;var _e=function(){this.specification=a.styleSpec.light.position};_e.prototype.possiblyEvaluate=function(m,x){return a.sphericalToCartesian(m.expression.evaluate(x))},_e.prototype.interpolate=function(m,x,v){return{x:a.number(m.x,x.x,v),y:a.number(m.y,x.y,v),z:a.number(m.z,x.z,v)}};var re=new a.Properties({anchor:new a.DataConstantProperty(a.styleSpec.light.anchor),position:new _e,color:new a.DataConstantProperty(a.styleSpec.light.color),intensity:new a.DataConstantProperty(a.styleSpec.light.intensity)}),ce=(function(m){function x(v){m.call(this),this._transitionable=new a.Transitionable(re),this.setLight(v),this._transitioning=this._transitionable.untransitioned()}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getLight=function(){return this._transitionable.serialize()},x.prototype.setLight=function(v,d){if(d===void 0&&(d={}),!this._validate(a.validateLight,v,d))for(var y in v){var N=v[y];a.endsWith(y,"-transition")?this._transitionable.setTransition(y.slice(0,-11),N):this._transitionable.setValue(y,N)}},x.prototype.updateTransitions=function(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)},x.prototype.hasTransition=function(){return this._transitioning.hasTransition()},x.prototype.recalculate=function(v){this.properties=this._transitioning.possiblyEvaluate(v)},x.prototype._validate=function(v,d,y){return(!y||y.validate!==!1)&&a.emitValidationErrors(this,v.call(a.validateStyle,a.extend({value:d,style:{glyphs:!0,sprite:!0},styleSpec:a.styleSpec})))},x})(a.Evented),fe=function(m,x){this.width=m,this.height=x,this.nextRow=0,this.data=new Uint8Array(this.width*this.height),this.dashEntry={}};fe.prototype.getDash=function(m,x){var v=m.join(",")+String(x);return this.dashEntry[v]||(this.dashEntry[v]=this.addDash(m,x)),this.dashEntry[v]},fe.prototype.getDashRanges=function(m,x,v){var d=[],y=m.length%2==1?-m[m.length-1]*v:0,N=m[0]*v,k=!0;d.push({left:y,right:N,isDash:k,zeroLength:m[0]===0});for(var I=m[0],U=1;U<m.length;U++){var $=m[U];d.push({left:y=I*v,right:N=(I+=$)*v,isDash:k=!k,zeroLength:$===0})}return d},fe.prototype.addRoundDash=function(m,x,v){for(var d=x/2,y=-v;y<=v;y++)for(var N=this.width*(this.nextRow+v+y),k=0,I=m[k],U=0;U<this.width;U++){U/I.right>1&&(I=m[++k]);var $=Math.abs(U-I.left),W=Math.abs(U-I.right),Y=Math.min($,W),X=void 0,le=y/v*(d+1);if(I.isDash){var ve=d-Math.abs(le);X=Math.sqrt(Y*Y+ve*ve)}else X=d-Math.sqrt(Y*Y+le*le);this.data[N+U]=Math.max(0,Math.min(255,X+128))}},fe.prototype.addRegularDash=function(m){for(var x=m.length-1;x>=0;--x){var v=m[x],d=m[x+1];v.zeroLength?m.splice(x,1):d&&d.isDash===v.isDash&&(d.left=v.left,m.splice(x,1))}var y=m[0],N=m[m.length-1];y.isDash===N.isDash&&(y.left=N.left-this.width,N.right=y.right+this.width);for(var k=this.width*this.nextRow,I=0,U=m[I],$=0;$<this.width;$++){$/U.right>1&&(U=m[++I]);var W=Math.abs($-U.left),Y=Math.abs($-U.right),X=Math.min(W,Y);this.data[k+$]=Math.max(0,Math.min(255,(U.isDash?X:-X)+128))}},fe.prototype.addDash=function(m,x){var v=x?7:0,d=2*v+1;if(this.nextRow+d>this.height)return a.warnOnce("LineAtlas out of space"),null;for(var y=0,N=0;N<m.length;N++)y+=m[N];if(y!==0){var k=this.width/y,I=this.getDashRanges(m,this.width,k);x?this.addRoundDash(I,k,v):this.addRegularDash(I)}var U={y:(this.nextRow+v+.5)/this.height,height:2*v/this.height,width:y};return this.nextRow+=d,this.dirty=!0,U},fe.prototype.bind=function(m){var x=m.gl;this.texture?(x.bindTexture(x.TEXTURE_2D,this.texture),this.dirty&&(this.dirty=!1,x.texSubImage2D(x.TEXTURE_2D,0,0,0,this.width,this.height,x.ALPHA,x.UNSIGNED_BYTE,this.data))):(this.texture=x.createTexture(),x.bindTexture(x.TEXTURE_2D,this.texture),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_S,x.REPEAT),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_WRAP_T,x.REPEAT),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MIN_FILTER,x.LINEAR),x.texParameteri(x.TEXTURE_2D,x.TEXTURE_MAG_FILTER,x.LINEAR),x.texImage2D(x.TEXTURE_2D,0,x.ALPHA,this.width,this.height,0,x.ALPHA,x.UNSIGNED_BYTE,this.data))};var ye=function m(x,v){this.workerPool=x,this.actors=[],this.currentActor=0,this.id=a.uniqueId();for(var d=this.workerPool.acquire(this.id),y=0;y<d.length;y++){var N=new m.Actor(d[y],v,this.id);N.name="Worker "+y,this.actors.push(N)}};function Fe(m,x,v){var d=function(y,N){if(y)return v(y);if(N){var k=a.pick(a.extend(N,m),["tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding"]);N.vector_layers&&(k.vectorLayers=N.vector_layers,k.vectorLayerIds=k.vectorLayers.map((function(I){return I.id}))),k.tiles=x.canonicalizeTileset(k,m.url),v(null,k)}};return m.url?a.getJSON(x.transformRequest(x.normalizeSourceURL(m.url),a.ResourceType.Source),d):a.browser.frame((function(){return d(null,m)}))}ye.prototype.broadcast=function(m,x,v){a.asyncAll(this.actors,(function(d,y){d.send(m,x,y)}),v=v||function(){})},ye.prototype.getActor=function(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]},ye.prototype.remove=function(){this.actors.forEach((function(m){m.remove()})),this.actors=[],this.workerPool.release(this.id)},ye.Actor=a.Actor;var Q=function(m,x,v){this.bounds=a.LngLatBounds.convert(this.validateBounds(m)),this.minzoom=x||0,this.maxzoom=v||24};Q.prototype.validateBounds=function(m){return Array.isArray(m)&&m.length===4?[Math.max(-180,m[0]),Math.max(-90,m[1]),Math.min(180,m[2]),Math.min(90,m[3])]:[-180,-90,180,90]},Q.prototype.contains=function(m){var x=Math.pow(2,m.z),v=Math.floor(a.mercatorXfromLng(this.bounds.getWest())*x),d=Math.floor(a.mercatorYfromLat(this.bounds.getNorth())*x),y=Math.ceil(a.mercatorXfromLng(this.bounds.getEast())*x),N=Math.ceil(a.mercatorYfromLat(this.bounds.getSouth())*x);return m.x>=v&&m.x<y&&m.y>=d&&m.y<N};var pe=(function(m){function x(v,d,y,N){if(m.call(this),this.id=v,this.dispatcher=y,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,a.extend(this,a.pick(d,["url","scheme","tileSize","promoteId"])),this._options=a.extend({type:"vector"},d),this._collectResourceTiming=d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(N)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.load=function(){var v=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Fe(this._options,this.map._requestManager,(function(d,y){v._tileJSONRequest=null,v._loaded=!0,d?v.fire(new a.ErrorEvent(d)):y&&(a.extend(v,y),y.bounds&&(v.tileBounds=new Q(y.bounds,v.minzoom,v.maxzoom)),a.postTurnstileEvent(y.tiles,v.map._requestManager._customAccessToken),a.postMapLoadEvent(y.tiles,v.map._getMapId(),v.map._requestManager._skuToken,v.map._requestManager._customAccessToken),v.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),v.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))}))},x.prototype.loaded=function(){return this._loaded},x.prototype.hasTile=function(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)},x.prototype.onAdd=function(v){this.map=v,this.load()},x.prototype.setSourceProperty=function(v){this._tileJSONRequest&&this._tileJSONRequest.cancel(),v(),this.map.style.sourceCaches[this.id].clearTiles(),this.load()},x.prototype.setTiles=function(v){var d=this;return this.setSourceProperty((function(){d._options.tiles=v})),this},x.prototype.setUrl=function(v){var d=this;return this.setSourceProperty((function(){d.url=v,d._options.url=v})),this},x.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},x.prototype.serialize=function(){return a.extend({},this._options)},x.prototype.loadTile=function(v,d){var y=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme)),N={request:this.map._requestManager.transformRequest(y,a.ResourceType.Tile),uid:v.uid,tileID:v.tileID,zoom:v.tileID.overscaledZ,tileSize:this.tileSize*v.tileID.overscaleFactor(),type:this.type,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId};function k(I,U){return delete v.request,v.aborted?d(null):I&&I.status!==404?d(I):(U&&U.resourceTiming&&(v.resourceTiming=U.resourceTiming),this.map._refreshExpiredTiles&&U&&v.setExpiryData(U),v.loadVectorData(U,this.map.painter),a.cacheEntryPossiblyAdded(this.dispatcher),d(null),void(v.reloadCallback&&(this.loadTile(v,v.reloadCallback),v.reloadCallback=null)))}N.request.collectResourceTiming=this._collectResourceTiming,v.actor&&v.state!=="expired"?v.state==="loading"?v.reloadCallback=d:v.request=v.actor.send("reloadTile",N,k.bind(this)):(v.actor=this.dispatcher.getActor(),v.request=v.actor.send("loadTile",N,k.bind(this)))},x.prototype.abortTile=function(v){v.request&&(v.request.cancel(),delete v.request),v.actor&&v.actor.send("abortTile",{uid:v.uid,type:this.type,source:this.id},void 0)},x.prototype.unloadTile=function(v){v.unloadVectorData(),v.actor&&v.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id},void 0)},x.prototype.hasTransition=function(){return!1},x})(a.Evented),me=(function(m){function x(v,d,y,N){m.call(this),this.id=v,this.dispatcher=y,this.setEventedParent(N),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=a.extend({type:"raster"},d),a.extend(this,a.pick(d,["url","scheme","tileSize"]))}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.load=function(){var v=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this._tileJSONRequest=Fe(this._options,this.map._requestManager,(function(d,y){v._tileJSONRequest=null,v._loaded=!0,d?v.fire(new a.ErrorEvent(d)):y&&(a.extend(v,y),y.bounds&&(v.tileBounds=new Q(y.bounds,v.minzoom,v.maxzoom)),a.postTurnstileEvent(y.tiles),a.postMapLoadEvent(y.tiles,v.map._getMapId(),v.map._requestManager._skuToken),v.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})),v.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})))}))},x.prototype.loaded=function(){return this._loaded},x.prototype.onAdd=function(v){this.map=v,this.load()},x.prototype.onRemove=function(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)},x.prototype.serialize=function(){return a.extend({},this._options)},x.prototype.hasTile=function(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)},x.prototype.loadTile=function(v,d){var y=this,N=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);v.request=a.getImage(this.map._requestManager.transformRequest(N,a.ResourceType.Tile),(function(k,I){if(delete v.request,v.aborted)v.state="unloaded",d(null);else if(k)v.state="errored",d(k);else if(I){y.map._refreshExpiredTiles&&v.setExpiryData(I),delete I.cacheControl,delete I.expires;var U=y.map.painter.context,$=U.gl;v.texture=y.map.painter.getTileTexture(I.width),v.texture?v.texture.update(I,{useMipmap:!0}):(v.texture=new a.Texture(U,I,$.RGBA,{useMipmap:!0}),v.texture.bind($.LINEAR,$.CLAMP_TO_EDGE,$.LINEAR_MIPMAP_NEAREST),U.extTextureFilterAnisotropic&&$.texParameterf($.TEXTURE_2D,U.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,U.extTextureFilterAnisotropicMax)),v.state="loaded",a.cacheEntryPossiblyAdded(y.dispatcher),d(null)}}))},x.prototype.abortTile=function(v,d){v.request&&(v.request.cancel(),delete v.request),d()},x.prototype.unloadTile=function(v,d){v.texture&&this.map.painter.saveTileTexture(v.texture),d()},x.prototype.hasTransition=function(){return!1},x})(a.Evented),Ue=(function(m){function x(v,d,y,N){m.call(this,v,d,y,N),this.type="raster-dem",this.maxzoom=22,this._options=a.extend({type:"raster-dem"},d),this.encoding=d.encoding||"mapbox"}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.serialize=function(){return{type:"raster-dem",url:this.url,tileSize:this.tileSize,tiles:this.tiles,bounds:this.bounds,encoding:this.encoding}},x.prototype.loadTile=function(v,d){var y=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),this.tileSize);function N(k,I){k&&(v.state="errored",d(k)),I&&(v.dem=I,v.needsHillshadePrepare=!0,v.state="loaded",d(null))}v.request=a.getImage(this.map._requestManager.transformRequest(y,a.ResourceType.Tile),(function(k,I){if(delete v.request,v.aborted)v.state="unloaded",d(null);else if(k)v.state="errored",d(k);else if(I){this.map._refreshExpiredTiles&&v.setExpiryData(I),delete I.cacheControl,delete I.expires;var U=a.window.ImageBitmap&&I instanceof a.window.ImageBitmap&&a.offscreenCanvasSupported()?I:a.browser.getImageData(I,1),$={uid:v.uid,coord:v.tileID,source:this.id,rawImageData:U,encoding:this.encoding};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",$,N.bind(this)))}}).bind(this)),v.neighboringTiles=this._getNeighboringTiles(v.tileID)},x.prototype._getNeighboringTiles=function(v){var d=v.canonical,y=Math.pow(2,d.z),N=(d.x-1+y)%y,k=d.x===0?v.wrap-1:v.wrap,I=(d.x+1+y)%y,U=d.x+1===y?v.wrap+1:v.wrap,$={};return $[new a.OverscaledTileID(v.overscaledZ,k,d.z,N,d.y).key]={backfilled:!1},$[new a.OverscaledTileID(v.overscaledZ,U,d.z,I,d.y).key]={backfilled:!1},d.y>0&&($[new a.OverscaledTileID(v.overscaledZ,k,d.z,N,d.y-1).key]={backfilled:!1},$[new a.OverscaledTileID(v.overscaledZ,v.wrap,d.z,d.x,d.y-1).key]={backfilled:!1},$[new a.OverscaledTileID(v.overscaledZ,U,d.z,I,d.y-1).key]={backfilled:!1}),d.y+1<y&&($[new a.OverscaledTileID(v.overscaledZ,k,d.z,N,d.y+1).key]={backfilled:!1},$[new a.OverscaledTileID(v.overscaledZ,v.wrap,d.z,d.x,d.y+1).key]={backfilled:!1},$[new a.OverscaledTileID(v.overscaledZ,U,d.z,I,d.y+1).key]={backfilled:!1}),$},x.prototype.unloadTile=function(v){v.demTexture&&this.map.painter.saveTileTexture(v.demTexture),v.fbo&&(v.fbo.destroy(),delete v.fbo),v.dem&&delete v.dem,delete v.neighboringTiles,v.state="unloaded",v.actor&&v.actor.send("removeDEMTile",{uid:v.uid,source:this.id})},x})(me),Ke=(function(m){function x(v,d,y,N){m.call(this),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._removed=!1,this._loaded=!1,this.actor=y.getActor(),this.setEventedParent(N),this._data=d.data,this._options=a.extend({},d),this._collectResourceTiming=d.collectResourceTiming,this._resourceTiming=[],d.maxzoom!==void 0&&(this.maxzoom=d.maxzoom),d.type&&(this.type=d.type),d.attribution&&(this.attribution=d.attribution),this.promoteId=d.promoteId;var k=a.EXTENT/this.tileSize;this.workerOptions=a.extend({source:this.id,cluster:d.cluster||!1,geojsonVtOptions:{buffer:(d.buffer!==void 0?d.buffer:128)*k,tolerance:(d.tolerance!==void 0?d.tolerance:.375)*k,extent:a.EXTENT,maxZoom:this.maxzoom,lineMetrics:d.lineMetrics||!1,generateId:d.generateId||!1},superclusterOptions:{maxZoom:d.clusterMaxZoom!==void 0?Math.min(d.clusterMaxZoom,this.maxzoom-1):this.maxzoom-1,minPoints:Math.max(2,d.clusterMinPoints||2),extent:a.EXTENT,radius:(d.clusterRadius||50)*k,log:!1,generateId:d.generateId||!1},clusterProperties:d.clusterProperties,filter:d.filter},d.workerOptions)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.load=function(){var v=this;this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(d){if(d)v.fire(new a.ErrorEvent(d));else{var y={dataType:"source",sourceDataType:"metadata"};v._collectResourceTiming&&v._resourceTiming&&v._resourceTiming.length>0&&(y.resourceTiming=v._resourceTiming,v._resourceTiming=[]),v.fire(new a.Event("data",y))}}))},x.prototype.onAdd=function(v){this.map=v,this.load()},x.prototype.setData=function(v){var d=this;return this._data=v,this.fire(new a.Event("dataloading",{dataType:"source"})),this._updateWorkerData((function(y){if(y)d.fire(new a.ErrorEvent(y));else{var N={dataType:"source",sourceDataType:"content"};d._collectResourceTiming&&d._resourceTiming&&d._resourceTiming.length>0&&(N.resourceTiming=d._resourceTiming,d._resourceTiming=[]),d.fire(new a.Event("data",N))}})),this},x.prototype.getClusterExpansionZoom=function(v,d){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id},d),this},x.prototype.getClusterChildren=function(v,d){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id},d),this},x.prototype.getClusterLeaves=function(v,d,y,N){return this.actor.send("geojson.getClusterLeaves",{source:this.id,clusterId:v,limit:d,offset:y},N),this},x.prototype._updateWorkerData=function(v){var d=this;this._loaded=!1;var y=a.extend({},this.workerOptions),N=this._data;typeof N=="string"?(y.request=this.map._requestManager.transformRequest(a.browser.resolveURL(N),a.ResourceType.Source),y.request.collectResourceTiming=this._collectResourceTiming):y.data=JSON.stringify(N),this.actor.send(this.type+".loadData",y,(function(k,I){d._removed||I&&I.abandoned||(d._loaded=!0,I&&I.resourceTiming&&I.resourceTiming[d.id]&&(d._resourceTiming=I.resourceTiming[d.id].slice(0)),d.actor.send(d.type+".coalesce",{source:y.source},null),v(k))}))},x.prototype.loaded=function(){return this._loaded},x.prototype.loadTile=function(v,d){var y=this,N=v.actor?"reloadTile":"loadTile";v.actor=this.actor,v.request=this.actor.send(N,{type:this.type,uid:v.uid,tileID:v.tileID,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,pixelRatio:a.browser.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId},(function(k,I){return delete v.request,v.unloadVectorData(),v.aborted?d(null):k?d(k):(v.loadVectorData(I,y.map.painter,N==="reloadTile"),d(null))}))},x.prototype.abortTile=function(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0},x.prototype.unloadTile=function(v){v.unloadVectorData(),this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id})},x.prototype.onRemove=function(){this._removed=!0,this.actor.send("removeSource",{type:this.type,source:this.id})},x.prototype.serialize=function(){return a.extend({},this._options,{type:this.type,data:this._data})},x.prototype.hasTransition=function(){return!1},x})(a.Evented),Re=a.createLayout([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]),te=(function(m){function x(v,d,y,N){m.call(this),this.id=v,this.dispatcher=y,this.coordinates=d.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.setEventedParent(N),this.options=d}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.load=function(v,d){var y=this;this._loaded=!1,this.fire(new a.Event("dataloading",{dataType:"source"})),this.url=this.options.url,a.getImage(this.map._requestManager.transformRequest(this.url,a.ResourceType.Image),(function(N,k){y._loaded=!0,N?y.fire(new a.ErrorEvent(N)):k&&(y.image=k,v&&(y.coordinates=v),d&&d(),y._finishLoading())}))},x.prototype.loaded=function(){return this._loaded},x.prototype.updateImage=function(v){var d=this;return this.image&&v.url?(this.options.url=v.url,this.load(v.coordinates,(function(){d.texture=null})),this):this},x.prototype._finishLoading=function(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"metadata"})))},x.prototype.onAdd=function(v){this.map=v,this.load()},x.prototype.setCoordinates=function(v){var d=this;this.coordinates=v;var y=v.map(a.MercatorCoordinate.fromLngLat);this.tileID=(function(k){for(var I=1/0,U=1/0,$=-1/0,W=-1/0,Y=0,X=k;Y<X.length;Y+=1){var le=X[Y];I=Math.min(I,le.x),U=Math.min(U,le.y),$=Math.max($,le.x),W=Math.max(W,le.y)}var ve=Math.max($-I,W-U),je=Math.max(0,Math.floor(-Math.log(ve)/Math.LN2)),de=Math.pow(2,je);return new a.CanonicalTileID(je,Math.floor((I+$)/2*de),Math.floor((U+W)/2*de))})(y),this.minzoom=this.maxzoom=this.tileID.z;var N=y.map((function(k){return d.tileID.getTilePoint(k)._round()}));return this._boundsArray=new a.StructArrayLayout4i8,this._boundsArray.emplaceBack(N[0].x,N[0].y,0,0),this._boundsArray.emplaceBack(N[1].x,N[1].y,a.EXTENT,0),this._boundsArray.emplaceBack(N[3].x,N[3].y,0,a.EXTENT),this._boundsArray.emplaceBack(N[2].x,N[2].y,a.EXTENT,a.EXTENT),this.boundsBuffer&&(this.boundsBuffer.destroy(),delete this.boundsBuffer),this.fire(new a.Event("data",{dataType:"source",sourceDataType:"content"})),this},x.prototype.prepare=function(){if(Object.keys(this.tiles).length!==0&&this.image){var v=this.map.painter.context,d=v.gl;for(var y in this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture||(this.texture=new a.Texture(v,this.image,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var N=this.tiles[y];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture)}}},x.prototype.loadTile=function(v,d){this.tileID&&this.tileID.equals(v.tileID.canonical)?(this.tiles[String(v.tileID.wrap)]=v,v.buckets={},d(null)):(v.state="errored",d(null))},x.prototype.serialize=function(){return{type:"image",url:this.options.url,coordinates:this.coordinates}},x.prototype.hasTransition=function(){return!1},x})(a.Evented),ue=(function(m){function x(v,d,y,N){m.call(this,v,d,y,N),this.roundZoom=!0,this.type="video",this.options=d}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.load=function(){var v=this;this._loaded=!1;var d=this.options;this.urls=[];for(var y=0,N=d.urls;y<N.length;y+=1)this.urls.push(this.map._requestManager.transformRequest(N[y],a.ResourceType.Source).url);a.getVideo(this.urls,(function(k,I){v._loaded=!0,k?v.fire(new a.ErrorEvent(k)):I&&(v.video=I,v.video.loop=!0,v.video.setAttribute("playsinline",""),v.video.addEventListener("playing",(function(){v.map.triggerRepaint()})),v.map&&v.video.play(),v._finishLoading())}))},x.prototype.pause=function(){this.video&&this.video.pause()},x.prototype.play=function(){this.video&&this.video.play()},x.prototype.seek=function(v){if(this.video){var d=this.video.seekable;v<d.start(0)||v>d.end(0)?this.fire(new a.ErrorEvent(new a.ValidationError("sources."+this.id,null,"Playback for this video can be set only between the "+d.start(0)+" and "+d.end(0)+"-second mark."))):this.video.currentTime=v}},x.prototype.getVideo=function(){return this.video},x.prototype.onAdd=function(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))},x.prototype.prepare=function(){if(!(Object.keys(this.tiles).length===0||this.video.readyState<2)){var v=this.map.painter.context,d=v.gl;for(var y in this.boundsBuffer||(this.boundsBuffer=v.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?this.video.paused||(this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE),d.texSubImage2D(d.TEXTURE_2D,0,0,0,d.RGBA,d.UNSIGNED_BYTE,this.video)):(this.texture=new a.Texture(v,this.video,d.RGBA),this.texture.bind(d.LINEAR,d.CLAMP_TO_EDGE)),this.tiles){var N=this.tiles[y];N.state!=="loaded"&&(N.state="loaded",N.texture=this.texture)}}},x.prototype.serialize=function(){return{type:"video",urls:this.urls,coordinates:this.coordinates}},x.prototype.hasTransition=function(){return this.video&&!this.video.paused},x})(te),Ne=(function(m){function x(v,d,y,N){m.call(this,v,d,y,N),d.coordinates?Array.isArray(d.coordinates)&&d.coordinates.length===4&&!d.coordinates.some((function(k){return!Array.isArray(k)||k.length!==2||k.some((function(I){return typeof I!="number"}))}))||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+v,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+v,null,'missing required property "coordinates"'))),d.animate&&typeof d.animate!="boolean"&&this.fire(new a.ErrorEvent(new a.ValidationError("sources."+v,null,'optional "animate" property must be a boolean value'))),d.canvas?typeof d.canvas=="string"||d.canvas instanceof a.window.HTMLCanvasElement||this.fire(new a.ErrorEvent(new a.ValidationError("sources."+v,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new a.ErrorEvent(new a.ValidationError("sources."+v,null,'missing required property "canvas"'))),this.options=d,this.animate=d.animate===void 0||d.animate}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.load=function(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof a.window.HTMLCanvasElement?this.options.canvas:a.window.document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new a.ErrorEvent(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())},x.prototype.getCanvas=function(){return this.canvas},x.prototype.onAdd=function(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()},x.prototype.onRemove=function(){this.pause()},x.prototype.prepare=function(){var v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),!this._hasInvalidDimensions()&&Object.keys(this.tiles).length!==0){var d=this.map.painter.context,y=d.gl;for(var N in this.boundsBuffer||(this.boundsBuffer=d.createVertexBuffer(this._boundsArray,Re.members)),this.boundsSegments||(this.boundsSegments=a.SegmentVector.simpleSegment(0,0,4,2)),this.texture?(v||this._playing)&&this.texture.update(this.canvas,{premultiply:!0}):this.texture=new a.Texture(d,this.canvas,y.RGBA,{premultiply:!0}),this.tiles){var k=this.tiles[N];k.state!=="loaded"&&(k.state="loaded",k.texture=this.texture)}}},x.prototype.serialize=function(){return{type:"canvas",coordinates:this.coordinates}},x.prototype.hasTransition=function(){return this._playing},x.prototype._hasInvalidDimensions=function(){for(var v=0,d=[this.canvas.width,this.canvas.height];v<d.length;v+=1){var y=d[v];if(isNaN(y)||y<=0)return!0}return!1},x})(te),Me={vector:pe,raster:me,"raster-dem":Ue,geojson:Ke,video:ue,image:te,canvas:Ne};function We(m,x){var v=a.identity([]);return a.translate(v,v,[1,1,0]),a.scale(v,v,[.5*m.width,.5*m.height,1]),a.multiply(v,v,m.calculatePosMatrix(x.toUnwrapped()))}function Ve(m,x,v,d,y,N){var k=(function(je,de,Pe){if(je)for(var Ie=0,Ae=je;Ie<Ae.length;Ie+=1){var Le=de[Ae[Ie]];if(Le&&Le.source===Pe&&Le.type==="fill-extrusion")return!0}else for(var Ge in de){var Xe=de[Ge];if(Xe.source===Pe&&Xe.type==="fill-extrusion")return!0}return!1})(y&&y.layers,x,m.id),I=N.maxPitchScaleFactor(),U=m.tilesIn(d,I,k);U.sort(tt);for(var $=[],W=0,Y=U;W<Y.length;W+=1){var X=Y[W];$.push({wrappedTileID:X.tileID.wrapped().key,queryResults:X.tile.queryRenderedFeatures(x,v,m._state,X.queryGeometry,X.cameraQueryGeometry,X.scale,y,N,I,We(m.transform,X.tileID))})}var le=(function(je){for(var de={},Pe={},Ie=0,Ae=je;Ie<Ae.length;Ie+=1){var Le=Ae[Ie],Ge=Le.queryResults,Xe=Le.wrappedTileID,rt=Pe[Xe]=Pe[Xe]||{};for(var yt in Ge)for(var mt=Ge[yt],Dt=rt[yt]=rt[yt]||{},Rt=de[yt]=de[yt]||[],vr=0,hr=mt;vr<hr.length;vr+=1){var Fr=hr[vr];Dt[Fr.featureIndex]||(Dt[Fr.featureIndex]=!0,Rt.push(Fr))}}return de})($);for(var ve in le)le[ve].forEach((function(je){var de=je.feature,Pe=m.getFeatureState(de.layer["source-layer"],de.id);de.source=de.layer.source,de.layer["source-layer"]&&(de.sourceLayer=de.layer["source-layer"]),de.state=Pe}));return le}function tt(m,x){var v=m.tileID,d=x.tileID;return v.overscaledZ-d.overscaledZ||v.canonical.y-d.canonical.y||v.wrap-d.wrap||v.canonical.x-d.canonical.x}var Qe=function(m,x){this.max=m,this.onRemove=x,this.reset()};Qe.prototype.reset=function(){for(var m in this.data)for(var x=0,v=this.data[m];x<v.length;x+=1){var d=v[x];d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value)}return this.data={},this.order=[],this},Qe.prototype.add=function(m,x,v){var d=this,y=m.wrapped().key;this.data[y]===void 0&&(this.data[y]=[]);var N={value:x,timeout:void 0};if(v!==void 0&&(N.timeout=setTimeout((function(){d.remove(m,N)}),v)),this.data[y].push(N),this.order.push(y),this.order.length>this.max){var k=this._getAndRemoveByKey(this.order[0]);k&&this.onRemove(k)}return this},Qe.prototype.has=function(m){return m.wrapped().key in this.data},Qe.prototype.getAndRemove=function(m){return this.has(m)?this._getAndRemoveByKey(m.wrapped().key):null},Qe.prototype._getAndRemoveByKey=function(m){var x=this.data[m].shift();return x.timeout&&clearTimeout(x.timeout),this.data[m].length===0&&delete this.data[m],this.order.splice(this.order.indexOf(m),1),x.value},Qe.prototype.getByKey=function(m){var x=this.data[m];return x?x[0].value:null},Qe.prototype.get=function(m){return this.has(m)?this.data[m.wrapped().key][0].value:null},Qe.prototype.remove=function(m,x){if(!this.has(m))return this;var v=m.wrapped().key,d=x===void 0?0:this.data[v].indexOf(x),y=this.data[v][d];return this.data[v].splice(d,1),y.timeout&&clearTimeout(y.timeout),this.data[v].length===0&&delete this.data[v],this.onRemove(y.value),this.order.splice(this.order.indexOf(v),1),this},Qe.prototype.setMaxSize=function(m){for(this.max=m;this.order.length>this.max;){var x=this._getAndRemoveByKey(this.order[0]);x&&this.onRemove(x)}return this},Qe.prototype.filter=function(m){var x=[];for(var v in this.data)for(var d=0,y=this.data[v];d<y.length;d+=1){var N=y[d];m(N.value)||x.push(N)}for(var k=0,I=x;k<I.length;k+=1){var U=I[k];this.remove(U.value.tileID,U)}};var St=function(m,x,v){this.context=m;var d=m.gl;this.buffer=d.createBuffer(),this.dynamicDraw=!!v,this.context.unbindVAO(),m.bindElementBuffer.set(this.buffer),d.bufferData(d.ELEMENT_ARRAY_BUFFER,x.arrayBuffer,this.dynamicDraw?d.DYNAMIC_DRAW:d.STATIC_DRAW),this.dynamicDraw||delete x.arrayBuffer};St.prototype.bind=function(){this.context.bindElementBuffer.set(this.buffer)},St.prototype.updateData=function(m){var x=this.context.gl;this.context.unbindVAO(),this.bind(),x.bufferSubData(x.ELEMENT_ARRAY_BUFFER,0,m.arrayBuffer)},St.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Et={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"},zt=function(m,x,v,d){this.length=x.length,this.attributes=v,this.itemSize=x.bytesPerElement,this.dynamicDraw=d,this.context=m;var y=m.gl;this.buffer=y.createBuffer(),m.bindVertexBuffer.set(this.buffer),y.bufferData(y.ARRAY_BUFFER,x.arrayBuffer,this.dynamicDraw?y.DYNAMIC_DRAW:y.STATIC_DRAW),this.dynamicDraw||delete x.arrayBuffer};zt.prototype.bind=function(){this.context.bindVertexBuffer.set(this.buffer)},zt.prototype.updateData=function(m){var x=this.context.gl;this.bind(),x.bufferSubData(x.ARRAY_BUFFER,0,m.arrayBuffer)},zt.prototype.enableAttributes=function(m,x){for(var v=0;v<this.attributes.length;v++){var d=x.attributes[this.attributes[v].name];d!==void 0&&m.enableVertexAttribArray(d)}},zt.prototype.setVertexAttribPointers=function(m,x,v){for(var d=0;d<this.attributes.length;d++){var y=this.attributes[d],N=x.attributes[y.name];N!==void 0&&m.vertexAttribPointer(N,y.components,m[Et[y.type]],!1,this.itemSize,y.offset+this.itemSize*(v||0))}},zt.prototype.destroy=function(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)};var Lt=function(m){this.gl=m.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1};Lt.prototype.get=function(){return this.current},Lt.prototype.set=function(m){},Lt.prototype.getDefault=function(){return this.default},Lt.prototype.setDefault=function(){this.set(this.default)};var wr=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return a.Color.transparent},x.prototype.set=function(v){var d=this.current;(v.r!==d.r||v.g!==d.g||v.b!==d.b||v.a!==d.a||this.dirty)&&(this.gl.clearColor(v.r,v.g,v.b,v.a),this.current=v,this.dirty=!1)},x})(Lt),_t=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return 1},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.clearDepth(v),this.current=v,this.dirty=!1)},x})(Lt),Ye=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return 0},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.clearStencil(v),this.current=v,this.dirty=!1)},x})(Lt),$r=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return[!0,!0,!0,!0]},x.prototype.set=function(v){var d=this.current;(v[0]!==d[0]||v[1]!==d[1]||v[2]!==d[2]||v[3]!==d[3]||this.dirty)&&(this.gl.colorMask(v[0],v[1],v[2],v[3]),this.current=v,this.dirty=!1)},x})(Lt),Cr=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return!0},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.depthMask(v),this.current=v,this.dirty=!1)},x})(Lt),Zt=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return 255},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.stencilMask(v),this.current=v,this.dirty=!1)},x})(Lt),Be=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return{func:this.gl.ALWAYS,ref:0,mask:255}},x.prototype.set=function(v){var d=this.current;(v.func!==d.func||v.ref!==d.ref||v.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(v.func,v.ref,v.mask),this.current=v,this.dirty=!1)},x})(Lt),it=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){var v=this.gl;return[v.KEEP,v.KEEP,v.KEEP]},x.prototype.set=function(v){var d=this.current;(v[0]!==d[0]||v[1]!==d[1]||v[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(v[0],v[1],v[2]),this.current=v,this.dirty=!1)},x})(Lt),at=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return!1},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;v?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=v,this.dirty=!1}},x})(Lt),Tt=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return[0,1]},x.prototype.set=function(v){var d=this.current;(v[0]!==d[0]||v[1]!==d[1]||this.dirty)&&(this.gl.depthRange(v[0],v[1]),this.current=v,this.dirty=!1)},x})(Lt),kt=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return!1},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;v?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=v,this.dirty=!1}},x})(Lt),Ot=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return this.gl.LESS},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.depthFunc(v),this.current=v,this.dirty=!1)},x})(Lt),Qt=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return!1},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;v?d.enable(d.BLEND):d.disable(d.BLEND),this.current=v,this.dirty=!1}},x})(Lt),zr=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){var v=this.gl;return[v.ONE,v.ZERO]},x.prototype.set=function(v){var d=this.current;(v[0]!==d[0]||v[1]!==d[1]||this.dirty)&&(this.gl.blendFunc(v[0],v[1]),this.current=v,this.dirty=!1)},x})(Lt),Hr=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return a.Color.transparent},x.prototype.set=function(v){var d=this.current;(v.r!==d.r||v.g!==d.g||v.b!==d.b||v.a!==d.a||this.dirty)&&(this.gl.blendColor(v.r,v.g,v.b,v.a),this.current=v,this.dirty=!1)},x})(Lt),Ur=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return this.gl.FUNC_ADD},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.blendEquation(v),this.current=v,this.dirty=!1)},x})(Lt),nn=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return!1},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;v?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=v,this.dirty=!1}},x})(Lt),_r=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return this.gl.BACK},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.cullFace(v),this.current=v,this.dirty=!1)},x})(Lt),Ri=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return this.gl.CCW},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.frontFace(v),this.current=v,this.dirty=!1)},x})(Lt),_n=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)},x})(Lt),fi=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return this.gl.TEXTURE0},x.prototype.set=function(v){(v!==this.current||this.dirty)&&(this.gl.activeTexture(v),this.current=v,this.dirty=!1)},x})(Lt),kn=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){var v=this.gl;return[0,0,v.drawingBufferWidth,v.drawingBufferHeight]},x.prototype.set=function(v){var d=this.current;(v[0]!==d[0]||v[1]!==d[1]||v[2]!==d[2]||v[3]!==d[3]||this.dirty)&&(this.gl.viewport(v[0],v[1],v[2],v[3]),this.current=v,this.dirty=!1)},x})(Lt),yn=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,v),this.current=v,this.dirty=!1}},x})(Lt),va=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,v),this.current=v,this.dirty=!1}},x})(Lt),zn=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;d.bindTexture(d.TEXTURE_2D,v),this.current=v,this.dirty=!1}},x})(Lt),Sa=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,v),this.current=v,this.dirty=!1}},x})(Lt),wi=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x.prototype.set=function(v){var d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,v),this.current=v,this.dirty=!1},x})(Lt),Cs=(function(m){function x(v){m.call(this,v),this.vao=v.extVertexArrayObject}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x.prototype.set=function(v){this.vao&&(v!==this.current||this.dirty)&&(this.vao.bindVertexArrayOES(v),this.current=v,this.dirty=!1)},x})(Lt),zs=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return 4},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,v),this.current=v,this.dirty=!1}},x})(Lt),pi=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return!1},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,v),this.current=v,this.dirty=!1}},x})(Lt),xr=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return!1},x.prototype.set=function(v){if(v!==this.current||this.dirty){var d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,v),this.current=v,this.dirty=!1}},x})(Lt),Lr=(function(m){function x(v,d){m.call(this,v),this.context=v,this.parent=d}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getDefault=function(){return null},x})(Lt),oe=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.setDirty=function(){this.dirty=!0},x.prototype.set=function(v){if(v!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,v,0),this.current=v,this.dirty=!1}},x})(Lr),xe=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.set=function(v){if(v!==this.current||this.dirty){this.context.bindFramebuffer.set(this.parent);var d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,d.DEPTH_ATTACHMENT,d.RENDERBUFFER,v),this.current=v,this.dirty=!1}},x})(Lr),Ce=function(m,x,v,d){this.context=m,this.width=x,this.height=v;var y=this.framebuffer=m.gl.createFramebuffer();this.colorAttachment=new oe(m,y),d&&(this.depthAttachment=new xe(m,y))};Ce.prototype.destroy=function(){var m=this.context.gl,x=this.colorAttachment.get();if(x&&m.deleteTexture(x),this.depthAttachment){var v=this.depthAttachment.get();v&&m.deleteRenderbuffer(v)}m.deleteFramebuffer(this.framebuffer)};var Te=function(m,x,v){this.func=m,this.mask=x,this.range=v};Te.ReadOnly=!1,Te.ReadWrite=!0,Te.disabled=new Te(519,Te.ReadOnly,[0,1]);var De=function(m,x,v,d,y,N){this.test=m,this.ref=x,this.mask=v,this.fail=d,this.depthFail=y,this.pass=N};De.disabled=new De({func:519,mask:0},0,0,7680,7680,7680);var et=function(m,x,v){this.blendFunction=m,this.blendColor=x,this.mask=v};et.disabled=new et(et.Replace=[1,0],a.Color.transparent,[!1,!1,!1,!1]),et.unblended=new et(et.Replace,a.Color.transparent,[!0,!0,!0,!0]),et.alphaBlended=new et([1,771],a.Color.transparent,[!0,!0,!0,!0]);var nt=function(m,x,v){this.enable=m,this.mode=x,this.frontFace=v};nt.disabled=new nt(!1,1029,2305),nt.backCCW=new nt(!0,1029,2305);var ke=function(m){this.gl=m,this.extVertexArrayObject=this.gl.getExtension("OES_vertex_array_object"),this.clearColor=new wr(this),this.clearDepth=new _t(this),this.clearStencil=new Ye(this),this.colorMask=new $r(this),this.depthMask=new Cr(this),this.stencilMask=new Zt(this),this.stencilFunc=new Be(this),this.stencilOp=new it(this),this.stencilTest=new at(this),this.depthRange=new Tt(this),this.depthTest=new kt(this),this.depthFunc=new Ot(this),this.blend=new Qt(this),this.blendFunc=new zr(this),this.blendColor=new Hr(this),this.blendEquation=new Ur(this),this.cullFace=new nn(this),this.cullFaceSide=new _r(this),this.frontFace=new Ri(this),this.program=new _n(this),this.activeTexture=new fi(this),this.viewport=new kn(this),this.bindFramebuffer=new yn(this),this.bindRenderbuffer=new va(this),this.bindTexture=new zn(this),this.bindVertexBuffer=new Sa(this),this.bindElementBuffer=new wi(this),this.bindVertexArrayOES=this.extVertexArrayObject&&new Cs(this),this.pixelStoreUnpack=new zs(this),this.pixelStoreUnpackPremultiplyAlpha=new pi(this),this.pixelStoreUnpackFlipY=new xr(this),this.extTextureFilterAnisotropic=m.getExtension("EXT_texture_filter_anisotropic")||m.getExtension("MOZ_EXT_texture_filter_anisotropic")||m.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=m.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT)),this.extTextureHalfFloat=m.getExtension("OES_texture_half_float"),this.extTextureHalfFloat&&(m.getExtension("OES_texture_half_float_linear"),this.extRenderToTextureHalfFloat=m.getExtension("EXT_color_buffer_half_float")),this.extTimerQuery=m.getExtension("EXT_disjoint_timer_query"),this.maxTextureSize=m.getParameter(m.MAX_TEXTURE_SIZE)};ke.prototype.setDefault=function(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()},ke.prototype.setDirty=function(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.extVertexArrayObject&&(this.bindVertexArrayOES.dirty=!0),this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0},ke.prototype.createIndexBuffer=function(m,x){return new St(this,m,x)},ke.prototype.createVertexBuffer=function(m,x,v){return new zt(this,m,x,v)},ke.prototype.createRenderbuffer=function(m,x,v){var d=this.gl,y=d.createRenderbuffer();return this.bindRenderbuffer.set(y),d.renderbufferStorage(d.RENDERBUFFER,m,x,v),this.bindRenderbuffer.set(null),y},ke.prototype.createFramebuffer=function(m,x,v){return new Ce(this,m,x,v)},ke.prototype.clear=function(m){var x=m.color,v=m.depth,d=this.gl,y=0;x&&(y|=d.COLOR_BUFFER_BIT,this.clearColor.set(x),this.colorMask.set([!0,!0,!0,!0])),v!==void 0&&(y|=d.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(v),this.depthMask.set(!0)),d.clear(y)},ke.prototype.setCullFace=function(m){m.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(m.mode),this.frontFace.set(m.frontFace))},ke.prototype.setDepthMode=function(m){m.func!==this.gl.ALWAYS||m.mask?(this.depthTest.set(!0),this.depthFunc.set(m.func),this.depthMask.set(m.mask),this.depthRange.set(m.range)):this.depthTest.set(!1)},ke.prototype.setStencilMode=function(m){m.test.func!==this.gl.ALWAYS||m.mask?(this.stencilTest.set(!0),this.stencilMask.set(m.mask),this.stencilOp.set([m.fail,m.depthFail,m.pass]),this.stencilFunc.set({func:m.test.func,ref:m.ref,mask:m.test.mask})):this.stencilTest.set(!1)},ke.prototype.setColorMode=function(m){a.deepEqual(m.blendFunction,et.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(m.blendFunction),this.blendColor.set(m.blendColor)),this.colorMask.set(m.mask)},ke.prototype.unbindVAO=function(){this.extVertexArrayObject&&this.bindVertexArrayOES.set(null)};var qe=(function(m){function x(v,d,y){var N=this;m.call(this),this.id=v,this.dispatcher=y,this.on("data",(function(k){k.dataType==="source"&&k.sourceDataType==="metadata"&&(N._sourceLoaded=!0),N._sourceLoaded&&!N._paused&&k.dataType==="source"&&k.sourceDataType==="content"&&(N.reload(),N.transform&&N.update(N.transform))})),this.on("error",(function(){N._sourceErrored=!0})),this._source=(function(k,I,U,$){var W=new Me[I.type](k,I,U,$);if(W.id!==k)throw new Error("Expected Source id to be "+k+" instead of "+W.id);return a.bindAll(["load","abort","unload","serialize","prepare"],W),W})(v,d,y,this),this._tiles={},this._cache=new Qe(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._maxTileCacheSize=null,this._loadedParentTiles={},this._coveredTiles={},this._state=new a.SourceFeatureState}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.onAdd=function(v){this.map=v,this._maxTileCacheSize=v?v._maxTileCacheSize:null,this._source&&this._source.onAdd&&this._source.onAdd(v)},x.prototype.onRemove=function(v){this._source&&this._source.onRemove&&this._source.onRemove(v)},x.prototype.loaded=function(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(var v in this._tiles){var d=this._tiles[v];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0},x.prototype.getSource=function(){return this._source},x.prototype.pause=function(){this._paused=!0},x.prototype.resume=function(){if(this._paused){var v=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,v&&this.reload(),this.transform&&this.update(this.transform)}},x.prototype._loadTile=function(v,d){return this._source.loadTile(v,d)},x.prototype._unloadTile=function(v){if(this._source.unloadTile)return this._source.unloadTile(v,(function(){}))},x.prototype._abortTile=function(v){if(this._source.abortTile)return this._source.abortTile(v,(function(){}))},x.prototype.serialize=function(){return this._source.serialize()},x.prototype.prepare=function(v){for(var d in this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null),this._tiles){var y=this._tiles[d];y.upload(v),y.prepare(this.map.style.imageManager)}},x.prototype.getIds=function(){return a.values(this._tiles).map((function(v){return v.tileID})).sort(ht).map((function(v){return v.key}))},x.prototype.getRenderableIds=function(v){var d=this,y=[];for(var N in this._tiles)this._isIdRenderable(N,v)&&y.push(this._tiles[N]);return v?y.sort((function(k,I){var U=k.tileID,$=I.tileID,W=new a.Point(U.canonical.x,U.canonical.y)._rotate(d.transform.angle),Y=new a.Point($.canonical.x,$.canonical.y)._rotate(d.transform.angle);return U.overscaledZ-$.overscaledZ||Y.y-W.y||Y.x-W.x})).map((function(k){return k.tileID.key})):y.map((function(k){return k.tileID})).sort(ht).map((function(k){return k.key}))},x.prototype.hasRenderableParent=function(v){var d=this.findLoadedParent(v,0);return!!d&&this._isIdRenderable(d.tileID.key)},x.prototype._isIdRenderable=function(v,d){return this._tiles[v]&&this._tiles[v].hasData()&&!this._coveredTiles[v]&&(d||!this._tiles[v].holdingForFade())},x.prototype.reload=function(){if(this._paused)this._shouldReloadOnResume=!0;else for(var v in this._cache.reset(),this._tiles)this._tiles[v].state!=="errored"&&this._reloadTile(v,"reloading")},x.prototype._reloadTile=function(v,d){var y=this._tiles[v];y&&(y.state!=="loading"&&(y.state=d),this._loadTile(y,this._tileLoaded.bind(this,y,v,d)))},x.prototype._tileLoaded=function(v,d,y,N){if(N)return v.state="errored",void(N.status!==404?this._source.fire(new a.ErrorEvent(N,{tile:v})):this.update(this.transform));v.timeAdded=a.browser.now(),y==="expired"&&(v.refreshedUponExpiration=!0),this._setTileReloadTimer(d,v),this.getSource().type==="raster-dem"&&v.dem&&this._backfillDEM(v),this._state.initializeTileState(v,this.map?this.map.painter:null),this._source.fire(new a.Event("data",{dataType:"source",tile:v,coord:v.tileID}))},x.prototype._backfillDEM=function(v){for(var d=this.getRenderableIds(),y=0;y<d.length;y++){var N=d[y];if(v.neighboringTiles&&v.neighboringTiles[N]){var k=this.getTileByID(N);I(v,k),I(k,v)}}function I(U,$){U.needsHillshadePrepare=!0;var W=$.tileID.canonical.x-U.tileID.canonical.x,Y=$.tileID.canonical.y-U.tileID.canonical.y,X=Math.pow(2,U.tileID.canonical.z),le=$.tileID.key;W===0&&Y===0||Math.abs(Y)>1||(Math.abs(W)>1&&(Math.abs(W+X)===1?W+=X:Math.abs(W-X)===1&&(W-=X)),$.dem&&U.dem&&(U.dem.backfillBorder($.dem,W,Y),U.neighboringTiles&&U.neighboringTiles[le]&&(U.neighboringTiles[le].backfilled=!0)))}},x.prototype.getTile=function(v){return this.getTileByID(v.key)},x.prototype.getTileByID=function(v){return this._tiles[v]},x.prototype._retainLoadedChildren=function(v,d,y,N){for(var k in this._tiles){var I=this._tiles[k];if(!(N[k]||!I.hasData()||I.tileID.overscaledZ<=d||I.tileID.overscaledZ>y)){for(var U=I.tileID;I&&I.tileID.overscaledZ>d+1;){var $=I.tileID.scaledTo(I.tileID.overscaledZ-1);(I=this._tiles[$.key])&&I.hasData()&&(U=$)}for(var W=U;W.overscaledZ>d;)if(v[(W=W.scaledTo(W.overscaledZ-1)).key]){N[U.key]=U;break}}}},x.prototype.findLoadedParent=function(v,d){if(v.key in this._loadedParentTiles){var y=this._loadedParentTiles[v.key];return y&&y.tileID.overscaledZ>=d?y:null}for(var N=v.overscaledZ-1;N>=d;N--){var k=v.scaledTo(N),I=this._getLoadedTile(k);if(I)return I}},x.prototype._getLoadedTile=function(v){var d=this._tiles[v.key];return d&&d.hasData()?d:this._cache.getByKey(v.wrapped().key)},x.prototype.updateCacheSize=function(v){var d=Math.ceil(v.width/this._source.tileSize)+1,y=Math.ceil(v.height/this._source.tileSize)+1,N=Math.floor(d*y*5),k=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,N):N;this._cache.setMaxSize(k)},x.prototype.handleWrapJump=function(v){var d=Math.round((v-(this._prevLng===void 0?v:this._prevLng))/360);if(this._prevLng=v,d){var y={};for(var N in this._tiles){var k=this._tiles[N];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+d),y[k.tileID.key]=k}for(var I in this._tiles=y,this._timers)clearTimeout(this._timers[I]),delete this._timers[I];for(var U in this._tiles)this._setTileReloadTimer(U,this._tiles[U])}},x.prototype.update=function(v){var d=this;if(this.transform=v,this._sourceLoaded&&!this._paused){var y;this.updateCacheSize(v),this.handleWrapJump(this.transform.center.lng),this._coveredTiles={},this.used?this._source.tileID?y=v.getVisibleUnwrappedCoordinates(this._source.tileID).map((function(rt){return new a.OverscaledTileID(rt.canonical.z,rt.wrap,rt.canonical.z,rt.canonical.x,rt.canonical.y)})):(y=v.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}),this._source.hasTile&&(y=y.filter((function(rt){return d._source.hasTile(rt)})))):y=[];var N=v.coveringZoomLevel(this._source),k=Math.max(N-x.maxOverzooming,this._source.minzoom),I=Math.max(N+x.maxUnderzooming,this._source.minzoom),U=this._updateRetainedTiles(y,N);if(qt(this._source.type)){for(var $={},W={},Y=0,X=Object.keys(U);Y<X.length;Y+=1){var le=X[Y],ve=U[le],je=this._tiles[le];if(je&&!(je.fadeEndTime&&je.fadeEndTime<=a.browser.now())){var de=this.findLoadedParent(ve,k);de&&(this._addTile(de.tileID),$[de.tileID.key]=de.tileID),W[le]=ve}}for(var Pe in this._retainLoadedChildren(W,N,I,U),$)U[Pe]||(this._coveredTiles[Pe]=!0,U[Pe]=$[Pe])}for(var Ie in U)this._tiles[Ie].clearFadeHold();for(var Ae=0,Le=a.keysDifference(this._tiles,U);Ae<Le.length;Ae+=1){var Ge=Le[Ae],Xe=this._tiles[Ge];Xe.hasSymbolBuckets&&!Xe.holdingForFade()?Xe.setHoldDuration(this.map._fadeDuration):Xe.hasSymbolBuckets&&!Xe.symbolFadeFinished()||this._removeTile(Ge)}this._updateLoadedParentTileCache()}},x.prototype.releaseSymbolFadeTiles=function(){for(var v in this._tiles)this._tiles[v].holdingForFade()&&this._removeTile(v)},x.prototype._updateRetainedTiles=function(v,d){for(var y={},N={},k=Math.max(d-x.maxOverzooming,this._source.minzoom),I=Math.max(d+x.maxUnderzooming,this._source.minzoom),U={},$=0,W=v;$<W.length;$+=1){var Y=W[$],X=this._addTile(Y);y[Y.key]=Y,X.hasData()||d<this._source.maxzoom&&(U[Y.key]=Y)}this._retainLoadedChildren(U,d,I,y);for(var le=0,ve=v;le<ve.length;le+=1){var je=ve[le],de=this._tiles[je.key];if(!de.hasData()){if(d+1>this._source.maxzoom){var Pe=je.children(this._source.maxzoom)[0],Ie=this.getTile(Pe);if(Ie&&Ie.hasData()){y[Pe.key]=Pe;continue}}else{var Ae=je.children(this._source.maxzoom);if(y[Ae[0].key]&&y[Ae[1].key]&&y[Ae[2].key]&&y[Ae[3].key])continue}for(var Le=de.wasRequested(),Ge=je.overscaledZ-1;Ge>=k;--Ge){var Xe=je.scaledTo(Ge);if(N[Xe.key]||(N[Xe.key]=!0,!(de=this.getTile(Xe))&&Le&&(de=this._addTile(Xe)),de&&(y[Xe.key]=Xe,Le=de.wasRequested(),de.hasData())))break}}}return y},x.prototype._updateLoadedParentTileCache=function(){for(var v in this._loadedParentTiles={},this._tiles){for(var d=[],y=void 0,N=this._tiles[v].tileID;N.overscaledZ>0;){if(N.key in this._loadedParentTiles){y=this._loadedParentTiles[N.key];break}d.push(N.key);var k=N.scaledTo(N.overscaledZ-1);if(y=this._getLoadedTile(k))break;N=k}for(var I=0,U=d;I<U.length;I+=1)this._loadedParentTiles[U[I]]=y}},x.prototype._addTile=function(v){var d=this._tiles[v.key];if(d)return d;(d=this._cache.getAndRemove(v))&&(this._setTileReloadTimer(v.key,d),d.tileID=v,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[v.key]&&(clearTimeout(this._cacheTimers[v.key]),delete this._cacheTimers[v.key],this._setTileReloadTimer(v.key,d)));var y=!!d;return y||(d=new a.Tile(v,this._source.tileSize*v.overscaleFactor()),this._loadTile(d,this._tileLoaded.bind(this,d,v.key,d.state))),d?(d.uses++,this._tiles[v.key]=d,y||this._source.fire(new a.Event("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null},x.prototype._setTileReloadTimer=function(v,d){var y=this;v in this._timers&&(clearTimeout(this._timers[v]),delete this._timers[v]);var N=d.getExpiryTimeout();N&&(this._timers[v]=setTimeout((function(){y._reloadTile(v,"expired"),delete y._timers[v]}),N))},x.prototype._removeTile=function(v){var d=this._tiles[v];d&&(d.uses--,delete this._tiles[v],this._timers[v]&&(clearTimeout(this._timers[v]),delete this._timers[v]),d.uses>0||(d.hasData()&&d.state!=="reloading"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))},x.prototype.clearTiles=function(){for(var v in this._shouldReloadOnResume=!1,this._paused=!1,this._tiles)this._removeTile(v);this._cache.reset()},x.prototype.tilesIn=function(v,d,y){var N=this,k=[],I=this.transform;if(!I)return k;for(var U=y?I.getCameraQueryGeometry(v):v,$=v.map((function(Ge){return I.pointCoordinate(Ge)})),W=U.map((function(Ge){return I.pointCoordinate(Ge)})),Y=this.getIds(),X=1/0,le=1/0,ve=-1/0,je=-1/0,de=0,Pe=W;de<Pe.length;de+=1){var Ie=Pe[de];X=Math.min(X,Ie.x),le=Math.min(le,Ie.y),ve=Math.max(ve,Ie.x),je=Math.max(je,Ie.y)}for(var Ae=function(Ge){var Xe=N._tiles[Y[Ge]];if(!Xe.holdingForFade()){var rt=Xe.tileID,yt=Math.pow(2,I.zoom-Xe.tileID.overscaledZ),mt=d*Xe.queryPadding*a.EXTENT/Xe.tileSize/yt,Dt=[rt.getTilePoint(new a.MercatorCoordinate(X,le)),rt.getTilePoint(new a.MercatorCoordinate(ve,je))];if(Dt[0].x-mt<a.EXTENT&&Dt[0].y-mt<a.EXTENT&&Dt[1].x+mt>=0&&Dt[1].y+mt>=0){var Rt=$.map((function(hr){return rt.getTilePoint(hr)})),vr=W.map((function(hr){return rt.getTilePoint(hr)}));k.push({tile:Xe,tileID:rt,queryGeometry:Rt,cameraQueryGeometry:vr,scale:yt})}}},Le=0;Le<Y.length;Le++)Ae(Le);return k},x.prototype.getVisibleCoordinates=function(v){for(var d=this,y=this.getRenderableIds(v).map((function(U){return d._tiles[U].tileID})),N=0,k=y;N<k.length;N+=1){var I=k[N];I.posMatrix=this.transform.calculatePosMatrix(I.toUnwrapped())}return y},x.prototype.hasTransition=function(){if(this._source.hasTransition())return!0;if(qt(this._source.type))for(var v in this._tiles){var d=this._tiles[v];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=a.browser.now())return!0}return!1},x.prototype.setFeatureState=function(v,d,y){this._state.updateState(v=v||"_geojsonTileLayer",d,y)},x.prototype.removeFeatureState=function(v,d,y){this._state.removeFeatureState(v=v||"_geojsonTileLayer",d,y)},x.prototype.getFeatureState=function(v,d){return this._state.getState(v=v||"_geojsonTileLayer",d)},x.prototype.setDependencies=function(v,d,y){var N=this._tiles[v];N&&N.setDependencies(d,y)},x.prototype.reloadTilesForDependencies=function(v,d){for(var y in this._tiles)this._tiles[y].hasDependency(v,d)&&this._reloadTile(y,"reloading");this._cache.filter((function(N){return!N.hasDependency(v,d)}))},x})(a.Evented);function ht(m,x){var v=Math.abs(2*m.wrap)-+(m.wrap<0),d=Math.abs(2*x.wrap)-+(x.wrap<0);return m.overscaledZ-x.overscaledZ||d-v||x.canonical.y-m.canonical.y||x.canonical.x-m.canonical.x}function qt(m){return m==="raster"||m==="image"||m==="video"}function Xt(){return new a.window.Worker(fu.workerUrl)}qe.maxOverzooming=10,qe.maxUnderzooming=3;var bt="mapboxgl_preloaded_worker_pool",Mt=function(){this.active={}};Mt.prototype.acquire=function(m){if(!this.workers)for(this.workers=[];this.workers.length<Mt.workerCount;)this.workers.push(new Xt);return this.active[m]=!0,this.workers.slice()},Mt.prototype.release=function(m){delete this.active[m],this.numActive()===0&&(this.workers.forEach((function(x){x.terminate()})),this.workers=null)},Mt.prototype.isPreloaded=function(){return!!this.active[bt]},Mt.prototype.numActive=function(){return Object.keys(this.active).length};var dr,mr=Math.floor(a.browser.hardwareConcurrency/2);function jt(){return dr||(dr=new Mt),dr}function gr(m,x){var v={};for(var d in m)d!=="ref"&&(v[d]=m[d]);return a.refProperties.forEach((function(y){y in x&&(v[y]=x[y])})),v}function or(m){m=m.slice();for(var x=Object.create(null),v=0;v<m.length;v++)x[m[v].id]=m[v];for(var d=0;d<m.length;d++)"ref"in m[d]&&(m[d]=gr(m[d],x[m[d].ref]));return m}Mt.workerCount=Math.max(Math.min(mr,6),1);var fr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight"};function an(m,x,v){v.push({command:fr.addSource,args:[m,x[m]]})}function yr(m,x,v){x.push({command:fr.removeSource,args:[m]}),v[m]=!0}function xn(m,x,v,d){yr(m,v,d),an(m,x,v)}function $n(m,x,v){var d;for(d in m[v])if(m[v].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(m[v][d],x[v][d]))return!1;for(d in x[v])if(x[v].hasOwnProperty(d)&&d!=="data"&&!a.deepEqual(m[v][d],x[v][d]))return!1;return!0}function bn(m,x,v,d,y,N){var k;for(k in x=x||{},m=m||{})m.hasOwnProperty(k)&&(a.deepEqual(m[k],x[k])||v.push({command:N,args:[d,k,x[k],y]}));for(k in x)x.hasOwnProperty(k)&&!m.hasOwnProperty(k)&&(a.deepEqual(m[k],x[k])||v.push({command:N,args:[d,k,x[k],y]}))}function Un(m){return m.id}function Xr(m,x){return m[x.id]=x,m}var Ks=function(m,x){this.reset(m,x)};Ks.prototype.reset=function(m,x){this.points=m||[],this._distances=[0];for(var v=1;v<this.points.length;v++)this._distances[v]=this._distances[v-1]+this.points[v].dist(this.points[v-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(x||0,.5*this.length),this.paddedLength=this.length-2*this.padding},Ks.prototype.lerp=function(m){if(this.points.length===1)return this.points[0];m=a.clamp(m,0,1);for(var x=1,v=this._distances[x],d=m*this.paddedLength+this.padding;v<d&&x<this._distances.length;)v=this._distances[++x];var y=x-1,N=this._distances[y],k=v-N,I=k>0?(d-N)/k:0;return this.points[y].mult(1-I).add(this.points[x].mult(I))};var ti=function(m,x,v){var d=this.boxCells=[],y=this.circleCells=[];this.xCellCount=Math.ceil(m/v),this.yCellCount=Math.ceil(x/v);for(var N=0;N<this.xCellCount*this.yCellCount;N++)d.push([]),y.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=m,this.height=x,this.xScale=this.xCellCount/m,this.yScale=this.yCellCount/x,this.boxUid=0,this.circleUid=0};function Ii(m,x,v,d,y){var N=a.create();return x?(a.scale(N,N,[1/y,1/y,1]),v||a.rotateZ(N,N,d.angle)):a.multiply(N,d.labelPlaneMatrix,m),N}function Hn(m,x,v,d,y){if(x){var N=a.clone(m);return a.scale(N,N,[y,y,1]),v||a.rotateZ(N,N,-d.angle),N}return d.glCoordMatrix}function Fn(m,x){var v=[m.x,m.y,0,1];Oi(v,v,x);var d=v[3];return{point:new a.Point(v[0]/d,v[1]/d),signedDistanceFromCamera:d}}function Yn(m,x){return .5+m/x*.5}function qa(m,x){var v=m[0]/m[3],d=m[1]/m[3];return v>=-x[0]&&v<=x[0]&&d>=-x[1]&&d<=x[1]}function Nc(m,x,v,d,y,N,k,I){var U=d?m.textSizeData:m.iconSizeData,$=a.evaluateSizeForZoom(U,v.transform.zoom),W=[256/v.width*2+1,256/v.height*2+1],Y=d?m.text.dynamicLayoutVertexArray:m.icon.dynamicLayoutVertexArray;Y.clear();for(var X=m.lineVertexArray,le=d?m.text.placedSymbolArray:m.icon.placedSymbolArray,ve=v.transform.width/v.transform.height,je=!1,de=0;de<le.length;de++){var Pe=le.get(de);if(Pe.hidden||Pe.writingMode===a.WritingMode.vertical&&!je)ya(Pe.numGlyphs,Y);else{je=!1;var Ie=[Pe.anchorX,Pe.anchorY,0,1];if(a.transformMat4(Ie,Ie,x),qa(Ie,W)){var Ae=Yn(v.transform.cameraToCenterDistance,Ie[3]),Le=a.evaluateSizeForFeature(U,$,Pe),Ge=k?Le/Ae:Le*Ae,Xe=new a.Point(Pe.anchorX,Pe.anchorY),rt=Fn(Xe,y).point,yt={},mt=Wo(Pe,Ge,!1,I,x,y,N,m.glyphOffsetArray,X,Y,rt,Xe,yt,ve);je=mt.useVertical,(mt.notEnoughRoom||je||mt.needsFlipping&&Wo(Pe,Ge,!0,I,x,y,N,m.glyphOffsetArray,X,Y,rt,Xe,yt,ve).notEnoughRoom)&&ya(Pe.numGlyphs,Y)}else ya(Pe.numGlyphs,Y)}}d?m.text.dynamicLayoutVertexBuffer.updateData(Y):m.icon.dynamicLayoutVertexBuffer.updateData(Y)}function ks(m,x,v,d,y,N,k,I,U,$,W){var Y=I.glyphStartIndex+I.numGlyphs,X=I.lineStartIndex,le=I.lineStartIndex+I.lineLength,ve=x.getoffsetX(I.glyphStartIndex),je=x.getoffsetX(Y-1),de=es(m*ve,v,d,y,N,k,I.segment,X,le,U,$,W);if(!de)return null;var Pe=es(m*je,v,d,y,N,k,I.segment,X,le,U,$,W);return Pe?{first:de,last:Pe}:null}function ri(m,x,v,d){return m===a.WritingMode.horizontal&&Math.abs(v.y-x.y)>Math.abs(v.x-x.x)*d?{useVertical:!0}:(m===a.WritingMode.vertical?x.y<v.y:x.x>v.x)?{needsFlipping:!0}:null}function Wo(m,x,v,d,y,N,k,I,U,$,W,Y,X,le){var ve,je=x/24,de=m.lineOffsetX*je,Pe=m.lineOffsetY*je;if(m.numGlyphs>1){var Ie=m.glyphStartIndex+m.numGlyphs,Ae=m.lineStartIndex,Le=m.lineStartIndex+m.lineLength,Ge=ks(je,I,de,Pe,v,W,Y,m,U,N,X);if(!Ge)return{notEnoughRoom:!0};var Xe=Fn(Ge.first.point,k).point,rt=Fn(Ge.last.point,k).point;if(d&&!v){var yt=ri(m.writingMode,Xe,rt,le);if(yt)return yt}ve=[Ge.first];for(var mt=m.glyphStartIndex+1;mt<Ie-1;mt++)ve.push(es(je*I.getoffsetX(mt),de,Pe,v,W,Y,m.segment,Ae,Le,U,N,X));ve.push(Ge.last)}else{if(d&&!v){var Dt=Fn(Y,y).point,Rt=m.lineStartIndex+m.segment+1,vr=new a.Point(U.getx(Rt),U.gety(Rt)),hr=Fn(vr,y),Fr=hr.signedDistanceFromCamera>0?hr.point:Aa(Y,vr,Dt,1,y),Yt=ri(m.writingMode,Dt,Fr,le);if(Yt)return Yt}var Sr=es(je*I.getoffsetX(m.glyphStartIndex),de,Pe,v,W,Y,m.segment,m.lineStartIndex,m.lineStartIndex+m.lineLength,U,N,X);if(!Sr)return{notEnoughRoom:!0};ve=[Sr]}for(var Pr=0,ir=ve;Pr<ir.length;Pr+=1){var Ar=ir[Pr];a.addDynamicAttributes($,Ar.point,Ar.angle)}return{}}function Aa(m,x,v,d,y){var N=Fn(m.add(m.sub(x)._unit()),y).point,k=v.sub(N);return v.add(k._mult(d/k.mag()))}function es(m,x,v,d,y,N,k,I,U,$,W,Y){var X=d?m-x:m+x,le=X>0?1:-1,ve=0;d&&(le*=-1,ve=Math.PI),le<0&&(ve+=Math.PI);for(var je=le>0?I+k:I+k+1,de=y,Pe=y,Ie=0,Ae=0,Le=Math.abs(X),Ge=[];Ie+Ae<=Le;){if((je+=le)<I||je>=U)return null;if(Pe=de,Ge.push(de),(de=Y[je])===void 0){var Xe=new a.Point($.getx(je),$.gety(je)),rt=Fn(Xe,W);if(rt.signedDistanceFromCamera>0)de=Y[je]=rt.point;else{var yt=je-le;de=Aa(Ie===0?N:new a.Point($.getx(yt),$.gety(yt)),Xe,Pe,Le-Ie+1,W)}}Ie+=Ae,Ae=Pe.dist(de)}var mt=(Le-Ie)/Ae,Dt=de.sub(Pe),Rt=Dt.mult(mt)._add(Pe);Rt._add(Dt._unit()._perp()._mult(v*le));var vr=ve+Math.atan2(de.y-Pe.y,de.x-Pe.x);return Ge.push(Rt),{point:Rt,angle:vr,path:Ge}}ti.prototype.keysLength=function(){return this.boxKeys.length+this.circleKeys.length},ti.prototype.insert=function(m,x,v,d,y){this._forEachCell(x,v,d,y,this._insertBoxCell,this.boxUid++),this.boxKeys.push(m),this.bboxes.push(x),this.bboxes.push(v),this.bboxes.push(d),this.bboxes.push(y)},ti.prototype.insertCircle=function(m,x,v,d){this._forEachCell(x-d,v-d,x+d,v+d,this._insertCircleCell,this.circleUid++),this.circleKeys.push(m),this.circles.push(x),this.circles.push(v),this.circles.push(d)},ti.prototype._insertBoxCell=function(m,x,v,d,y,N){this.boxCells[y].push(N)},ti.prototype._insertCircleCell=function(m,x,v,d,y,N){this.circleCells[y].push(N)},ti.prototype._query=function(m,x,v,d,y,N){if(v<0||m>this.width||d<0||x>this.height)return!y&&[];var k=[];if(m<=0&&x<=0&&this.width<=v&&this.height<=d){if(y)return!0;for(var I=0;I<this.boxKeys.length;I++)k.push({key:this.boxKeys[I],x1:this.bboxes[4*I],y1:this.bboxes[4*I+1],x2:this.bboxes[4*I+2],y2:this.bboxes[4*I+3]});for(var U=0;U<this.circleKeys.length;U++){var $=this.circles[3*U],W=this.circles[3*U+1],Y=this.circles[3*U+2];k.push({key:this.circleKeys[U],x1:$-Y,y1:W-Y,x2:$+Y,y2:W+Y})}return N?k.filter(N):k}return this._forEachCell(m,x,v,d,this._queryCell,k,{hitTest:y,seenUids:{box:{},circle:{}}},N),y?k.length>0:k},ti.prototype._queryCircle=function(m,x,v,d,y){var N=m-v,k=m+v,I=x-v,U=x+v;if(k<0||N>this.width||U<0||I>this.height)return!d&&[];var $=[];return this._forEachCell(N,I,k,U,this._queryCellCircle,$,{hitTest:d,circle:{x:m,y:x,radius:v},seenUids:{box:{},circle:{}}},y),d?$.length>0:$},ti.prototype.query=function(m,x,v,d,y){return this._query(m,x,v,d,!1,y)},ti.prototype.hitTest=function(m,x,v,d,y){return this._query(m,x,v,d,!0,y)},ti.prototype.hitTestCircle=function(m,x,v,d){return this._queryCircle(m,x,v,!0,d)},ti.prototype._queryCell=function(m,x,v,d,y,N,k,I){var U=k.seenUids,$=this.boxCells[y];if($!==null)for(var W=this.bboxes,Y=0,X=$;Y<X.length;Y+=1){var le=X[Y];if(!U.box[le]){U.box[le]=!0;var ve=4*le;if(m<=W[ve+2]&&x<=W[ve+3]&&v>=W[ve+0]&&d>=W[ve+1]&&(!I||I(this.boxKeys[le]))){if(k.hitTest)return N.push(!0),!0;N.push({key:this.boxKeys[le],x1:W[ve],y1:W[ve+1],x2:W[ve+2],y2:W[ve+3]})}}}var je=this.circleCells[y];if(je!==null)for(var de=this.circles,Pe=0,Ie=je;Pe<Ie.length;Pe+=1){var Ae=Ie[Pe];if(!U.circle[Ae]){U.circle[Ae]=!0;var Le=3*Ae;if(this._circleAndRectCollide(de[Le],de[Le+1],de[Le+2],m,x,v,d)&&(!I||I(this.circleKeys[Ae]))){if(k.hitTest)return N.push(!0),!0;var Ge=de[Le],Xe=de[Le+1],rt=de[Le+2];N.push({key:this.circleKeys[Ae],x1:Ge-rt,y1:Xe-rt,x2:Ge+rt,y2:Xe+rt})}}}},ti.prototype._queryCellCircle=function(m,x,v,d,y,N,k,I){var U=k.circle,$=k.seenUids,W=this.boxCells[y];if(W!==null)for(var Y=this.bboxes,X=0,le=W;X<le.length;X+=1){var ve=le[X];if(!$.box[ve]){$.box[ve]=!0;var je=4*ve;if(this._circleAndRectCollide(U.x,U.y,U.radius,Y[je+0],Y[je+1],Y[je+2],Y[je+3])&&(!I||I(this.boxKeys[ve])))return N.push(!0),!0}}var de=this.circleCells[y];if(de!==null)for(var Pe=this.circles,Ie=0,Ae=de;Ie<Ae.length;Ie+=1){var Le=Ae[Ie];if(!$.circle[Le]){$.circle[Le]=!0;var Ge=3*Le;if(this._circlesCollide(Pe[Ge],Pe[Ge+1],Pe[Ge+2],U.x,U.y,U.radius)&&(!I||I(this.circleKeys[Le])))return N.push(!0),!0}}},ti.prototype._forEachCell=function(m,x,v,d,y,N,k,I){for(var U=this._convertToXCellCoord(m),$=this._convertToYCellCoord(x),W=this._convertToXCellCoord(v),Y=this._convertToYCellCoord(d),X=U;X<=W;X++)for(var le=$;le<=Y;le++)if(y.call(this,m,x,v,d,this.xCellCount*le+X,N,k,I))return},ti.prototype._convertToXCellCoord=function(m){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(m*this.xScale)))},ti.prototype._convertToYCellCoord=function(m){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(m*this.yScale)))},ti.prototype._circlesCollide=function(m,x,v,d,y,N){var k=d-m,I=y-x,U=v+N;return U*U>k*k+I*I},ti.prototype._circleAndRectCollide=function(m,x,v,d,y,N,k){var I=(N-d)/2,U=Math.abs(m-(d+I));if(U>I+v)return!1;var $=(k-y)/2,W=Math.abs(x-(y+$));if(W>$+v)return!1;if(U<=I||W<=$)return!0;var Y=U-I,X=W-$;return Y*Y+X*X<=v*v};var Qc=new Float32Array([-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0,-1/0,-1/0,0]);function ya(m,x){for(var v=0;v<m;v++){var d=x.length;x.resize(d+4),x.float32.set(Qc,3*d)}}function Oi(m,x,v){var d=x[0],y=x[1];return m[0]=v[0]*d+v[4]*y+v[12],m[1]=v[1]*d+v[5]*y+v[13],m[3]=v[3]*d+v[7]*y+v[15],m}var xa=function(m,x,v){x===void 0&&(x=new ti(m.width+200,m.height+200,25)),v===void 0&&(v=new ti(m.width+200,m.height+200,25)),this.transform=m,this.grid=x,this.ignoredGrid=v,this.pitchfactor=Math.cos(m._pitch)*m.cameraToCenterDistance,this.screenRightBoundary=m.width+100,this.screenBottomBoundary=m.height+100,this.gridRightBoundary=m.width+200,this.gridBottomBoundary=m.height+200};function Zn(m,x,v){return x*(a.EXTENT/(m.tileSize*Math.pow(2,v-m.tileID.overscaledZ)))}xa.prototype.placeCollisionBox=function(m,x,v,d,y){var N=this.projectAndGetPerspectiveRatio(d,m.anchorPointX,m.anchorPointY),k=v*N.perspectiveRatio,I=m.x1*k+N.point.x,U=m.y1*k+N.point.y,$=m.x2*k+N.point.x,W=m.y2*k+N.point.y;return!this.isInsideGrid(I,U,$,W)||!x&&this.grid.hitTest(I,U,$,W,y)?{box:[],offscreen:!1}:{box:[I,U,$,W],offscreen:this.isOffscreen(I,U,$,W)}},xa.prototype.placeCollisionCircles=function(m,x,v,d,y,N,k,I,U,$,W,Y,X){var le=[],ve=new a.Point(x.anchorX,x.anchorY),je=Fn(ve,N),de=Yn(this.transform.cameraToCenterDistance,je.signedDistanceFromCamera),Pe=($?y/de:y*de)/a.ONE_EM,Ie=Fn(ve,k).point,Ae=ks(Pe,d,x.lineOffsetX*Pe,x.lineOffsetY*Pe,!1,Ie,ve,x,v,k,{}),Le=!1,Ge=!1,Xe=!0;if(Ae){for(var rt=.5*Y*de+X,yt=new a.Point(-100,-100),mt=new a.Point(this.screenRightBoundary,this.screenBottomBoundary),Dt=new Ks,Rt=Ae.first,vr=Ae.last,hr=[],Fr=Rt.path.length-1;Fr>=1;Fr--)hr.push(Rt.path[Fr]);for(var Yt=1;Yt<vr.path.length;Yt++)hr.push(vr.path[Yt]);var Sr=2.5*rt;if(I){var Pr=hr.map((function(Ds){return Fn(Ds,I)}));hr=Pr.some((function(Ds){return Ds.signedDistanceFromCamera<=0}))?[]:Pr.map((function(Ds){return Ds.point}))}var ir=[];if(hr.length>0){for(var Ar=hr[0].clone(),Gr=hr[0].clone(),Tr=1;Tr<hr.length;Tr++)Ar.x=Math.min(Ar.x,hr[Tr].x),Ar.y=Math.min(Ar.y,hr[Tr].y),Gr.x=Math.max(Gr.x,hr[Tr].x),Gr.y=Math.max(Gr.y,hr[Tr].y);ir=Ar.x>=yt.x&&Gr.x<=mt.x&&Ar.y>=yt.y&&Gr.y<=mt.y?[hr]:Gr.x<yt.x||Ar.x>mt.x||Gr.y<yt.y||Ar.y>mt.y?[]:a.clipLine([hr],yt.x,yt.y,mt.x,mt.y)}for(var Rr=0,vn=ir;Rr<vn.length;Rr+=1){var Jn;Dt.reset(vn[Rr],.25*rt),Jn=Dt.length<=.5*rt?1:Math.ceil(Dt.paddedLength/Sr)+1;for(var Fi=0;Fi<Jn;Fi++){var ui=Fi/Math.max(Jn-1,1),In=Dt.lerp(ui),Qn=In.x+100,us=In.y+100;le.push(Qn,us,rt,0);var rs=Qn-rt,ns=us-rt,vi=Qn+rt,Yi=us+rt;if(Xe=Xe&&this.isOffscreen(rs,ns,vi,Yi),Ge=Ge||this.isInsideGrid(rs,ns,vi,Yi),!m&&this.grid.hitTestCircle(Qn,us,rt,W)&&(Le=!0,!U))return{circles:[],offscreen:!1,collisionDetected:Le}}}}return{circles:!U&&Le||!Ge?[]:le,offscreen:Xe,collisionDetected:Le}},xa.prototype.queryRenderedSymbols=function(m){if(m.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};for(var x=[],v=1/0,d=1/0,y=-1/0,N=-1/0,k=0,I=m;k<I.length;k+=1){var U=I[k],$=new a.Point(U.x+100,U.y+100);v=Math.min(v,$.x),d=Math.min(d,$.y),y=Math.max(y,$.x),N=Math.max(N,$.y),x.push($)}for(var W={},Y={},X=0,le=this.grid.query(v,d,y,N).concat(this.ignoredGrid.query(v,d,y,N));X<le.length;X+=1){var ve=le[X],je=ve.key;if(W[je.bucketInstanceId]===void 0&&(W[je.bucketInstanceId]={}),!W[je.bucketInstanceId][je.featureIndex]){var de=[new a.Point(ve.x1,ve.y1),new a.Point(ve.x2,ve.y1),new a.Point(ve.x2,ve.y2),new a.Point(ve.x1,ve.y2)];a.polygonIntersectsPolygon(x,de)&&(W[je.bucketInstanceId][je.featureIndex]=!0,Y[je.bucketInstanceId]===void 0&&(Y[je.bucketInstanceId]=[]),Y[je.bucketInstanceId].push(je.featureIndex))}}return Y},xa.prototype.insertCollisionBox=function(m,x,v,d,y){(x?this.ignoredGrid:this.grid).insert({bucketInstanceId:v,featureIndex:d,collisionGroupID:y},m[0],m[1],m[2],m[3])},xa.prototype.insertCollisionCircles=function(m,x,v,d,y){for(var N=x?this.ignoredGrid:this.grid,k={bucketInstanceId:v,featureIndex:d,collisionGroupID:y},I=0;I<m.length;I+=4)N.insertCircle(k,m[I],m[I+1],m[I+2])},xa.prototype.projectAndGetPerspectiveRatio=function(m,x,v){var d=[x,v,0,1];return Oi(d,d,m),{point:new a.Point((d[0]/d[3]+1)/2*this.transform.width+100,(-d[1]/d[3]+1)/2*this.transform.height+100),perspectiveRatio:.5+this.transform.cameraToCenterDistance/d[3]*.5}},xa.prototype.isOffscreen=function(m,x,v,d){return v<100||m>=this.screenRightBoundary||d<100||x>this.screenBottomBoundary},xa.prototype.isInsideGrid=function(m,x,v,d){return v>=0&&m<this.gridRightBoundary&&d>=0&&x<this.gridBottomBoundary},xa.prototype.getViewportMatrix=function(){var m=a.identity([]);return a.translate(m,m,[-100,-100,0]),m};var cs=function(m,x,v,d){this.opacity=m?Math.max(0,Math.min(1,m.opacity+(m.placed?x:-x))):d&&v?1:0,this.placed=v};cs.prototype.isHidden=function(){return this.opacity===0&&!this.placed};var Va=function(m,x,v,d,y){this.text=new cs(m?m.text:null,x,v,y),this.icon=new cs(m?m.icon:null,x,d,y)};Va.prototype.isHidden=function(){return this.text.isHidden()&&this.icon.isHidden()};var th=function(m,x,v){this.text=m,this.icon=x,this.skipFade=v},to=function(){this.invProjMatrix=a.create(),this.viewportMatrix=a.create(),this.circles=[]},wu=function(m,x,v,d,y){this.bucketInstanceId=m,this.featureIndex=x,this.sourceLayerIndex=v,this.bucketIndex=d,this.tileID=y},wl=function(m){this.crossSourceCollisions=m,this.maxGroupID=0,this.collisionGroups={}};function ia(m,x,v,d,y){var N=a.getAnchorAlignment(m),k=-(N.horizontalAlign-.5)*x,I=-(N.verticalAlign-.5)*v,U=a.evaluateVariableOffset(m,d);return new a.Point(k+U[0]*y,I+U[1]*y)}function Ca(m,x,v,d,y,N){var k=m.x1,I=m.x2,U=m.y1,$=m.y2,W=m.anchorPointX,Y=m.anchorPointY,X=new a.Point(x,v);return d&&X._rotate(y?N:-N),{x1:k+X.x,y1:U+X.y,x2:I+X.x,y2:$+X.y,anchorPointX:W,anchorPointY:Y}}wl.prototype.get=function(m){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[m]){var x=++this.maxGroupID;this.collisionGroups[m]={ID:x,predicate:function(v){return v.collisionGroupID===x}}}return this.collisionGroups[m]};var $a=function(m,x,v,d){this.transform=m.clone(),this.collisionIndex=new xa(this.transform),this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=x,this.retainedQueryData={},this.collisionGroups=new wl(v),this.collisionCircleArrays={},this.prevPlacement=d,d&&(d.prevPlacement=void 0),this.placedOrientations={}};function Sc(m,x,v,d,y){m.emplaceBack(x?1:0,v?1:0,d||0,y||0),m.emplaceBack(x?1:0,v?1:0,d||0,y||0),m.emplaceBack(x?1:0,v?1:0,d||0,y||0),m.emplaceBack(x?1:0,v?1:0,d||0,y||0)}$a.prototype.getBucketParts=function(m,x,v,d){var y=v.getBucket(x),N=v.latestFeatureIndex;if(y&&N&&x.id===y.layerIds[0]){var k=v.collisionBoxArray,I=y.layers[0].layout,U=Math.pow(2,this.transform.zoom-v.tileID.overscaledZ),$=v.tileSize/a.EXTENT,W=this.transform.calculatePosMatrix(v.tileID.toUnwrapped()),Y=I.get("text-pitch-alignment")==="map",X=I.get("text-rotation-alignment")==="map",le=Zn(v,1,this.transform.zoom),ve=Ii(W,Y,X,this.transform,le),je=null;if(Y){var de=Hn(W,Y,X,this.transform,le);je=a.multiply([],this.transform.labelPlaneMatrix,de)}this.retainedQueryData[y.bucketInstanceId]=new wu(y.bucketInstanceId,N,y.sourceLayerIndex,y.index,v.tileID);var Pe={bucket:y,layout:I,posMatrix:W,textLabelPlaneMatrix:ve,labelToScreenMatrix:je,scale:U,textPixelRatio:$,holdingForFade:v.holdingForFade(),collisionBoxArray:k,partiallyEvaluatedTextSize:a.evaluateSizeForZoom(y.textSizeData,this.transform.zoom),collisionGroup:this.collisionGroups.get(y.sourceID)};if(d)for(var Ie=0,Ae=y.sortKeyRanges;Ie<Ae.length;Ie+=1){var Le=Ae[Ie];m.push({sortKey:Le.sortKey,symbolInstanceStart:Le.symbolInstanceStart,symbolInstanceEnd:Le.symbolInstanceEnd,parameters:Pe})}else m.push({symbolInstanceStart:0,symbolInstanceEnd:y.symbolInstances.length,parameters:Pe})}},$a.prototype.attemptAnchorPlacement=function(m,x,v,d,y,N,k,I,U,$,W,Y,X,le,ve){var je,de=[Y.textOffset0,Y.textOffset1],Pe=ia(m,v,d,de,y),Ie=this.collisionIndex.placeCollisionBox(Ca(x,Pe.x,Pe.y,N,k,this.transform.angle),W,I,U,$.predicate);if(!ve||this.collisionIndex.placeCollisionBox(Ca(ve,Pe.x,Pe.y,N,k,this.transform.angle),W,I,U,$.predicate).box.length!==0)return Ie.box.length>0?(this.prevPlacement&&this.prevPlacement.variableOffsets[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID]&&this.prevPlacement.placements[Y.crossTileID].text&&(je=this.prevPlacement.variableOffsets[Y.crossTileID].anchor),this.variableOffsets[Y.crossTileID]={textOffset:de,width:v,height:d,anchor:m,textBoxScale:y,prevAnchor:je},this.markUsedJustification(X,m,Y,le),X.allowVerticalPlacement&&(this.markUsedOrientation(X,le,Y),this.placedOrientations[Y.crossTileID]=le),{shift:Pe,placedGlyphBoxes:Ie}):void 0},$a.prototype.placeLayerBucketPart=function(m,x,v){var d=this,y=m.parameters,N=y.bucket,k=y.layout,I=y.posMatrix,U=y.textLabelPlaneMatrix,$=y.labelToScreenMatrix,W=y.textPixelRatio,Y=y.holdingForFade,X=y.collisionBoxArray,le=y.partiallyEvaluatedTextSize,ve=y.collisionGroup,je=k.get("text-optional"),de=k.get("icon-optional"),Pe=k.get("text-allow-overlap"),Ie=k.get("icon-allow-overlap"),Ae=k.get("text-rotation-alignment")==="map",Le=k.get("text-pitch-alignment")==="map",Ge=k.get("icon-text-fit")!=="none",Xe=k.get("symbol-z-order")==="viewport-y",rt=Pe&&(Ie||!N.hasIconData()||de),yt=Ie&&(Pe||!N.hasTextData()||je);!N.collisionArrays&&X&&N.deserializeCollisionBoxes(X);var mt=function(Yt,Sr){if(!x[Yt.crossTileID])if(Y)d.placements[Yt.crossTileID]=new th(!1,!1,!1);else{var Pr,ir=!1,Ar=!1,Gr=!0,Tr=null,Rr={box:null,offscreen:null},vn={box:null,offscreen:null},Jn=null,Fi=null,ui=0,In=0,Qn=0;Sr.textFeatureIndex?ui=Sr.textFeatureIndex:Yt.useRuntimeCollisionCircles&&(ui=Yt.featureIndex),Sr.verticalTextFeatureIndex&&(In=Sr.verticalTextFeatureIndex);var us=Sr.textBox;if(us){var rs=function(Mn){var ao=a.WritingMode.horizontal;if(N.allowVerticalPlacement&&!Mn&&d.prevPlacement){var Qs=d.prevPlacement.placedOrientations[Yt.crossTileID];Qs&&(d.placedOrientations[Yt.crossTileID]=Qs,d.markUsedOrientation(N,ao=Qs,Yt))}return ao},ns=function(Mn,ao){if(N.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&Sr.verticalTextBox)for(var Qs=0,cl=N.writingModes;Qs<cl.length&&(cl[Qs]===a.WritingMode.vertical?(Rr=ao(),vn=Rr):Rr=Mn(),!(Rr&&Rr.box&&Rr.box.length));Qs+=1);else Rr=Mn()};if(k.get("text-variable-anchor")){var vi=k.get("text-variable-anchor");if(d.prevPlacement&&d.prevPlacement.variableOffsets[Yt.crossTileID]){var Yi=d.prevPlacement.variableOffsets[Yt.crossTileID];vi.indexOf(Yi.anchor)>0&&(vi=vi.filter((function(Mn){return Mn!==Yi.anchor}))).unshift(Yi.anchor)}var Ds=function(Mn,ao,Qs){for(var cl=Mn.x2-Mn.x1,Wh=Mn.y2-Mn.y1,Vi=Yt.textBoxScale,kf=Ge&&!Ie?ao:null,Yu={box:[],offscreen:!1},oh=Pe?2*vi.length:vi.length,ul=0;ul<oh;++ul){var Yh=d.attemptAnchorPlacement(vi[ul%vi.length],Mn,cl,Wh,Vi,Ae,Le,W,I,ve,ul>=vi.length,Yt,N,Qs,kf);if(Yh&&(Yu=Yh.placedGlyphBoxes)&&Yu.box&&Yu.box.length){ir=!0,Tr=Yh.shift;break}}return Yu};ns((function(){return Ds(us,Sr.iconBox,a.WritingMode.horizontal)}),(function(){var Mn=Sr.verticalTextBox;return N.allowVerticalPlacement&&!(Rr&&Rr.box&&Rr.box.length)&&Yt.numVerticalGlyphVertices>0&&Mn?Ds(Mn,Sr.verticalIconBox,a.WritingMode.vertical):{box:null,offscreen:null}})),Rr&&(ir=Rr.box,Gr=Rr.offscreen);var ll=rs(Rr&&Rr.box);if(!ir&&d.prevPlacement){var Zi=d.prevPlacement.variableOffsets[Yt.crossTileID];Zi&&(d.variableOffsets[Yt.crossTileID]=Zi,d.markUsedJustification(N,Zi.anchor,Yt,ll))}}else{var io=function(Mn,ao){var Qs=d.collisionIndex.placeCollisionBox(Mn,Pe,W,I,ve.predicate);return Qs&&Qs.box&&Qs.box.length&&(d.markUsedOrientation(N,ao,Yt),d.placedOrientations[Yt.crossTileID]=ao),Qs};ns((function(){return io(us,a.WritingMode.horizontal)}),(function(){var Mn=Sr.verticalTextBox;return N.allowVerticalPlacement&&Yt.numVerticalGlyphVertices>0&&Mn?io(Mn,a.WritingMode.vertical):{box:null,offscreen:null}})),rs(Rr&&Rr.box&&Rr.box.length)}}if(ir=(Pr=Rr)&&Pr.box&&Pr.box.length>0,Gr=Pr&&Pr.offscreen,Yt.useRuntimeCollisionCircles){var za=N.text.placedSymbolArray.get(Yt.centerJustifiedTextSymbolIndex),ds=a.evaluateSizeForFeature(N.textSizeData,le,za),jo=k.get("text-padding");Jn=d.collisionIndex.placeCollisionCircles(Pe,za,N.lineVertexArray,N.glyphOffsetArray,ds,I,U,$,v,Le,ve.predicate,Yt.collisionCircleDiameter,jo),ir=Pe||Jn.circles.length>0&&!Jn.collisionDetected,Gr=Gr&&Jn.offscreen}if(Sr.iconFeatureIndex&&(Qn=Sr.iconFeatureIndex),Sr.iconBox){var so=function(Mn){var ao=Ge&&Tr?Ca(Mn,Tr.x,Tr.y,Ae,Le,d.transform.angle):Mn;return d.collisionIndex.placeCollisionBox(ao,Ie,W,I,ve.predicate)};Ar=vn&&vn.box&&vn.box.length&&Sr.verticalIconBox?(Fi=so(Sr.verticalIconBox)).box.length>0:(Fi=so(Sr.iconBox)).box.length>0,Gr=Gr&&Fi.offscreen}var hn=je||Yt.numHorizontalGlyphVertices===0&&Yt.numVerticalGlyphVertices===0,sn=de||Yt.numIconVertices===0;if(hn||sn?sn?hn||(Ar=Ar&&ir):ir=Ar&&ir:Ar=ir=Ar&&ir,ir&&Pr&&Pr.box&&d.collisionIndex.insertCollisionBox(Pr.box,k.get("text-ignore-placement"),N.bucketInstanceId,vn&&vn.box&&In?In:ui,ve.ID),Ar&&Fi&&d.collisionIndex.insertCollisionBox(Fi.box,k.get("icon-ignore-placement"),N.bucketInstanceId,Qn,ve.ID),Jn&&(ir&&d.collisionIndex.insertCollisionCircles(Jn.circles,k.get("text-ignore-placement"),N.bucketInstanceId,ui,ve.ID),v)){var Ni=N.bucketInstanceId,No=d.collisionCircleArrays[Ni];No===void 0&&(No=d.collisionCircleArrays[Ni]=new to);for(var Il=0;Il<Jn.circles.length;Il+=4)No.circles.push(Jn.circles[Il+0]),No.circles.push(Jn.circles[Il+1]),No.circles.push(Jn.circles[Il+2]),No.circles.push(Jn.collisionDetected?1:0)}d.placements[Yt.crossTileID]=new th(ir||rt,Ar||yt,Gr||N.justReloaded),x[Yt.crossTileID]=!0}};if(Xe)for(var Dt=N.getSortedSymbolIndexes(this.transform.angle),Rt=Dt.length-1;Rt>=0;--Rt){var vr=Dt[Rt];mt(N.symbolInstances.get(vr),N.collisionArrays[vr])}else for(var hr=m.symbolInstanceStart;hr<m.symbolInstanceEnd;hr++)mt(N.symbolInstances.get(hr),N.collisionArrays[hr]);if(v&&N.bucketInstanceId in this.collisionCircleArrays){var Fr=this.collisionCircleArrays[N.bucketInstanceId];a.invert(Fr.invProjMatrix,I),Fr.viewportMatrix=this.collisionIndex.getViewportMatrix()}N.justReloaded=!1},$a.prototype.markUsedJustification=function(m,x,v,d){var y;y=d===a.WritingMode.vertical?v.verticalPlacedTextSymbolIndex:{left:v.leftJustifiedTextSymbolIndex,center:v.centerJustifiedTextSymbolIndex,right:v.rightJustifiedTextSymbolIndex}[a.getAnchorJustification(x)];for(var N=0,k=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex,v.verticalPlacedTextSymbolIndex];N<k.length;N+=1){var I=k[N];I>=0&&(m.text.placedSymbolArray.get(I).crossTileID=y>=0&&I!==y?0:v.crossTileID)}},$a.prototype.markUsedOrientation=function(m,x,v){for(var d=x===a.WritingMode.horizontal||x===a.WritingMode.horizontalOnly?x:0,y=x===a.WritingMode.vertical?x:0,N=0,k=[v.leftJustifiedTextSymbolIndex,v.centerJustifiedTextSymbolIndex,v.rightJustifiedTextSymbolIndex];N<k.length;N+=1)m.text.placedSymbolArray.get(k[N]).placedOrientation=d;v.verticalPlacedTextSymbolIndex&&(m.text.placedSymbolArray.get(v.verticalPlacedTextSymbolIndex).placedOrientation=y)},$a.prototype.commit=function(m){this.commitTime=m,this.zoomAtLastRecencyCheck=this.transform.zoom;var x=this.prevPlacement,v=!1;this.prevZoomAdjustment=x?x.zoomAdjustment(this.transform.zoom):0;var d=x?x.symbolFadeChange(m):1,y=x?x.opacities:{},N=x?x.variableOffsets:{},k=x?x.placedOrientations:{};for(var I in this.placements){var U=this.placements[I],$=y[I];$?(this.opacities[I]=new Va($,d,U.text,U.icon),v=v||U.text!==$.text.placed||U.icon!==$.icon.placed):(this.opacities[I]=new Va(null,d,U.text,U.icon,U.skipFade),v=v||U.text||U.icon)}for(var W in y){var Y=y[W];if(!this.opacities[W]){var X=new Va(Y,d,!1,!1);X.isHidden()||(this.opacities[W]=X,v=v||Y.text.placed||Y.icon.placed)}}for(var le in N)this.variableOffsets[le]||!this.opacities[le]||this.opacities[le].isHidden()||(this.variableOffsets[le]=N[le]);for(var ve in k)this.placedOrientations[ve]||!this.opacities[ve]||this.opacities[ve].isHidden()||(this.placedOrientations[ve]=k[ve]);v?this.lastPlacementChangeTime=m:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=x?x.lastPlacementChangeTime:m)},$a.prototype.updateLayerOpacities=function(m,x){for(var v={},d=0,y=x;d<y.length;d+=1){var N=y[d],k=N.getBucket(m);k&&N.latestFeatureIndex&&m.id===k.layerIds[0]&&this.updateBucketOpacities(k,v,N.collisionBoxArray)}},$a.prototype.updateBucketOpacities=function(m,x,v){var d=this;m.hasTextData()&&m.text.opacityVertexArray.clear(),m.hasIconData()&&m.icon.opacityVertexArray.clear(),m.hasIconCollisionBoxData()&&m.iconCollisionBox.collisionVertexArray.clear(),m.hasTextCollisionBoxData()&&m.textCollisionBox.collisionVertexArray.clear();var y=m.layers[0].layout,N=new Va(null,0,!1,!1,!0),k=y.get("text-allow-overlap"),I=y.get("icon-allow-overlap"),U=y.get("text-variable-anchor"),$=y.get("text-rotation-alignment")==="map",W=y.get("text-pitch-alignment")==="map",Y=y.get("icon-text-fit")!=="none",X=new Va(null,0,k&&(I||!m.hasIconData()||y.get("icon-optional")),I&&(k||!m.hasTextData()||y.get("text-optional")),!0);!m.collisionArrays&&v&&(m.hasIconCollisionBoxData()||m.hasTextCollisionBoxData())&&m.deserializeCollisionBoxes(v);for(var le=function(Pe,Ie,Ae){for(var Le=0;Le<Ie/4;Le++)Pe.opacityVertexArray.emplaceBack(Ae)},ve=function(Pe){var Ie=m.symbolInstances.get(Pe),Ae=Ie.numHorizontalGlyphVertices,Le=Ie.numVerticalGlyphVertices,Ge=Ie.crossTileID,Xe=d.opacities[Ge];x[Ge]?Xe=N:Xe||(d.opacities[Ge]=Xe=X),x[Ge]=!0;var rt=Ie.numIconVertices>0,yt=d.placedOrientations[Ie.crossTileID],mt=yt===a.WritingMode.vertical,Dt=yt===a.WritingMode.horizontal||yt===a.WritingMode.horizontalOnly;if(Ae>0||Le>0){var Rt=zu(Xe.text);le(m.text,Ae,mt?cn:Rt),le(m.text,Le,Dt?cn:Rt);var vr=Xe.text.isHidden();[Ie.rightJustifiedTextSymbolIndex,Ie.centerJustifiedTextSymbolIndex,Ie.leftJustifiedTextSymbolIndex].forEach((function(Rr){Rr>=0&&(m.text.placedSymbolArray.get(Rr).hidden=vr||mt?1:0)})),Ie.verticalPlacedTextSymbolIndex>=0&&(m.text.placedSymbolArray.get(Ie.verticalPlacedTextSymbolIndex).hidden=vr||Dt?1:0);var hr=d.variableOffsets[Ie.crossTileID];hr&&d.markUsedJustification(m,hr.anchor,Ie,yt);var Fr=d.placedOrientations[Ie.crossTileID];Fr&&(d.markUsedJustification(m,"left",Ie,Fr),d.markUsedOrientation(m,Fr,Ie))}if(rt){var Yt=zu(Xe.icon),Sr=!(Y&&Ie.verticalPlacedIconSymbolIndex&&mt);Ie.placedIconSymbolIndex>=0&&(le(m.icon,Ie.numIconVertices,Sr?Yt:cn),m.icon.placedSymbolArray.get(Ie.placedIconSymbolIndex).hidden=Xe.icon.isHidden()),Ie.verticalPlacedIconSymbolIndex>=0&&(le(m.icon,Ie.numVerticalIconVertices,Sr?cn:Yt),m.icon.placedSymbolArray.get(Ie.verticalPlacedIconSymbolIndex).hidden=Xe.icon.isHidden())}if(m.hasIconCollisionBoxData()||m.hasTextCollisionBoxData()){var Pr=m.collisionArrays[Pe];if(Pr){var ir=new a.Point(0,0);if(Pr.textBox||Pr.verticalTextBox){var Ar=!0;if(U){var Gr=d.variableOffsets[Ge];Gr?(ir=ia(Gr.anchor,Gr.width,Gr.height,Gr.textOffset,Gr.textBoxScale),$&&ir._rotate(W?d.transform.angle:-d.transform.angle)):Ar=!1}Pr.textBox&&Sc(m.textCollisionBox.collisionVertexArray,Xe.text.placed,!Ar||mt,ir.x,ir.y),Pr.verticalTextBox&&Sc(m.textCollisionBox.collisionVertexArray,Xe.text.placed,!Ar||Dt,ir.x,ir.y)}var Tr=!!(!Dt&&Pr.verticalIconBox);Pr.iconBox&&Sc(m.iconCollisionBox.collisionVertexArray,Xe.icon.placed,Tr,Y?ir.x:0,Y?ir.y:0),Pr.verticalIconBox&&Sc(m.iconCollisionBox.collisionVertexArray,Xe.icon.placed,!Tr,Y?ir.x:0,Y?ir.y:0)}}},je=0;je<m.symbolInstances.length;je++)ve(je);if(m.sortFeatures(this.transform.angle),this.retainedQueryData[m.bucketInstanceId]&&(this.retainedQueryData[m.bucketInstanceId].featureSortOrder=m.featureSortOrder),m.hasTextData()&&m.text.opacityVertexBuffer&&m.text.opacityVertexBuffer.updateData(m.text.opacityVertexArray),m.hasIconData()&&m.icon.opacityVertexBuffer&&m.icon.opacityVertexBuffer.updateData(m.icon.opacityVertexArray),m.hasIconCollisionBoxData()&&m.iconCollisionBox.collisionVertexBuffer&&m.iconCollisionBox.collisionVertexBuffer.updateData(m.iconCollisionBox.collisionVertexArray),m.hasTextCollisionBoxData()&&m.textCollisionBox.collisionVertexBuffer&&m.textCollisionBox.collisionVertexBuffer.updateData(m.textCollisionBox.collisionVertexArray),m.bucketInstanceId in this.collisionCircleArrays){var de=this.collisionCircleArrays[m.bucketInstanceId];m.placementInvProjMatrix=de.invProjMatrix,m.placementViewportMatrix=de.viewportMatrix,m.collisionCircleArray=de.circles,delete this.collisionCircleArrays[m.bucketInstanceId]}},$a.prototype.symbolFadeChange=function(m){return this.fadeDuration===0?1:(m-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment},$a.prototype.zoomAdjustment=function(m){return Math.max(0,(this.transform.zoom-m)/1.5)},$a.prototype.hasTransitions=function(m){return this.stale||m-this.lastPlacementChangeTime<this.fadeDuration},$a.prototype.stillRecent=function(m,x){var v=this.zoomAtLastRecencyCheck===x?1-this.zoomAdjustment(x):1;return this.zoomAtLastRecencyCheck=x,this.commitTime+this.fadeDuration*v>m},$a.prototype.setStale=function(){this.stale=!0};var $h=Math.pow(2,25),sc=Math.pow(2,24),ju=Math.pow(2,17),bd=Math.pow(2,16),Nu=Math.pow(2,9),Es=Math.pow(2,8),_d=Math.pow(2,1);function zu(m){if(m.opacity===0&&!m.placed)return 0;if(m.opacity===1&&m.placed)return 4294967295;var x=m.placed?1:0,v=Math.floor(127*m.opacity);return v*$h+x*sc+v*ju+x*bd+v*Nu+x*Es+v*_d+x}var cn=0,Ac=function(m){this._sortAcrossTiles=m.layout.get("symbol-z-order")!=="viewport-y"&&m.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs={},this._bucketParts=[]};Ac.prototype.continuePlacement=function(m,x,v,d,y){for(var N=this._bucketParts;this._currentTileIndex<m.length;)if(x.getBucketParts(N,d,m[this._currentTileIndex],this._sortAcrossTiles),this._currentTileIndex++,y())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,N.sort((function(k,I){return k.sortKey-I.sortKey})));this._currentPartIndex<N.length;)if(x.placeLayerBucketPart(N[this._currentPartIndex],this._seenCrossTileIDs,v),this._currentPartIndex++,y())return!0;return!1};var Su=function(m,x,v,d,y,N,k){this.placement=new $a(m,y,N,k),this._currentPlacementIndex=x.length-1,this._forceFullPlacement=v,this._showCollisionBoxes=d,this._done=!1};Su.prototype.isDone=function(){return this._done},Su.prototype.continuePlacement=function(m,x,v){for(var d=this,y=a.browser.now(),N=function(){var U=a.browser.now()-y;return!d._forceFullPlacement&&U>2};this._currentPlacementIndex>=0;){var k=x[m[this._currentPlacementIndex]],I=this.placement.collisionIndex.transform.zoom;if(k.type==="symbol"&&(!k.minzoom||k.minzoom<=I)&&(!k.maxzoom||k.maxzoom>I)){if(this._inProgressLayer||(this._inProgressLayer=new Ac(k)),this._inProgressLayer.continuePlacement(v[k.source],this.placement,this._showCollisionBoxes,k,N))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0},Su.prototype.commit=function(m){return this.placement.commit(m),this.placement};var jl=512/a.EXTENT/2,Au=function(m,x,v){this.tileID=m,this.indexedSymbolInstances={},this.bucketInstanceId=v;for(var d=0;d<x.length;d++){var y=x.get(d),N=y.key;this.indexedSymbolInstances[N]||(this.indexedSymbolInstances[N]=[]),this.indexedSymbolInstances[N].push({crossTileID:y.crossTileID,coord:this.getScaledCoordinates(y,m)})}};Au.prototype.getScaledCoordinates=function(m,x){var v=jl/Math.pow(2,x.canonical.z-this.tileID.canonical.z);return{x:Math.floor((x.canonical.x*a.EXTENT+m.anchorX)*v),y:Math.floor((x.canonical.y*a.EXTENT+m.anchorY)*v)}},Au.prototype.findMatches=function(m,x,v){for(var d=this.tileID.canonical.z<x.canonical.z?1:Math.pow(2,this.tileID.canonical.z-x.canonical.z),y=0;y<m.length;y++){var N=m.get(y);if(!N.crossTileID){var k=this.indexedSymbolInstances[N.key];if(k)for(var I=this.getScaledCoordinates(N,x),U=0,$=k;U<$.length;U+=1){var W=$[U];if(Math.abs(W.coord.x-I.x)<=d&&Math.abs(W.coord.y-I.y)<=d&&!v[W.crossTileID]){v[W.crossTileID]=!0,N.crossTileID=W.crossTileID;break}}}}};var ka=function(){this.maxCrossTileID=0};ka.prototype.generate=function(){return++this.maxCrossTileID};var sa=function(){this.indexes={},this.usedCrossTileIDs={},this.lng=0};sa.prototype.handleWrapJump=function(m){var x=Math.round((m-this.lng)/360);if(x!==0)for(var v in this.indexes){var d=this.indexes[v],y={};for(var N in d){var k=d[N];k.tileID=k.tileID.unwrapTo(k.tileID.wrap+x),y[k.tileID.key]=k}this.indexes[v]=y}this.lng=m},sa.prototype.addBucket=function(m,x,v){if(this.indexes[m.overscaledZ]&&this.indexes[m.overscaledZ][m.key]){if(this.indexes[m.overscaledZ][m.key].bucketInstanceId===x.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(m.overscaledZ,this.indexes[m.overscaledZ][m.key])}for(var d=0;d<x.symbolInstances.length;d++)x.symbolInstances.get(d).crossTileID=0;this.usedCrossTileIDs[m.overscaledZ]||(this.usedCrossTileIDs[m.overscaledZ]={});var y=this.usedCrossTileIDs[m.overscaledZ];for(var N in this.indexes){var k=this.indexes[N];if(Number(N)>m.overscaledZ)for(var I in k){var U=k[I];U.tileID.isChildOf(m)&&U.findMatches(x.symbolInstances,m,y)}else{var $=k[m.scaledTo(Number(N)).key];$&&$.findMatches(x.symbolInstances,m,y)}}for(var W=0;W<x.symbolInstances.length;W++){var Y=x.symbolInstances.get(W);Y.crossTileID||(Y.crossTileID=v.generate(),y[Y.crossTileID]=!0)}return this.indexes[m.overscaledZ]===void 0&&(this.indexes[m.overscaledZ]={}),this.indexes[m.overscaledZ][m.key]=new Au(m,x.symbolInstances,x.bucketInstanceId),!0},sa.prototype.removeBucketCrossTileIDs=function(m,x){for(var v in x.indexedSymbolInstances)for(var d=0,y=x.indexedSymbolInstances[v];d<y.length;d+=1)delete this.usedCrossTileIDs[m][y[d].crossTileID]},sa.prototype.removeStaleBuckets=function(m){var x=!1;for(var v in this.indexes){var d=this.indexes[v];for(var y in d)m[d[y].bucketInstanceId]||(this.removeBucketCrossTileIDs(v,d[y]),delete d[y],x=!0)}return x};var Yo=function(){this.layerIndexes={},this.crossTileIDs=new ka,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}};Yo.prototype.addLayer=function(m,x,v){var d=this.layerIndexes[m.id];d===void 0&&(d=this.layerIndexes[m.id]=new sa);var y=!1,N={};d.handleWrapJump(v);for(var k=0,I=x;k<I.length;k+=1){var U=I[k],$=U.getBucket(m);$&&m.id===$.layerIds[0]&&($.bucketInstanceId||($.bucketInstanceId=++this.maxBucketInstanceId),d.addBucket(U.tileID,$,this.crossTileIDs)&&(y=!0),N[$.bucketInstanceId]=!0)}return d.removeStaleBuckets(N)&&(y=!0),y},Yo.prototype.pruneUnusedLayers=function(m){var x={};for(var v in m.forEach((function(d){x[d]=!0})),this.layerIndexes)x[v]||delete this.layerIndexes[v]};var Nl=function(m,x){return a.emitValidationErrors(m,x&&x.filter((function(v){return v.identifier!=="source.canvas"})))},ro=a.pick(fr,["addLayer","removeLayer","setPaintProperty","setLayoutProperty","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData"]),Bl=a.pick(fr,["setCenter","setZoom","setBearing","setPitch"]),ac=(function(){var m={},x=a.styleSpec.$version;for(var v in a.styleSpec.$root){var d,y=a.styleSpec.$root[v];y.required&&(d=v==="version"?x:y.type==="array"?[]:{})!=null&&(m[v]=d)}return m})(),aa=(function(m){function x(v,d){var y=this;d===void 0&&(d={}),m.call(this),this.map=v,this.dispatcher=new ye(jt(),this),this.imageManager=new G,this.imageManager.setEventedParent(this),this.glyphManager=new Se(v._requestManager,d.localIdeographFontFamily),this.lineAtlas=new fe(256,512),this.crossTileSymbolIndex=new Yo,this._layers={},this._serializedLayers={},this._order=[],this.sourceCaches={},this.zoomHistory=new a.ZoomHistory,this._loaded=!1,this._availableImages=[],this._resetUpdates(),this.dispatcher.broadcast("setReferrer",a.getReferrer());var N=this;this._rtlTextPluginCallback=x.registerForPluginStateChange((function(k){N.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:k.pluginStatus,pluginURL:k.pluginURL},(function(I,U){if(a.triggerPluginCompletionEvent(I),U&&U.every((function(W){return W})))for(var $ in N.sourceCaches)N.sourceCaches[$].reload()}))})),this.on("data",(function(k){if(k.dataType==="source"&&k.sourceDataType==="metadata"){var I=y.sourceCaches[k.sourceId];if(I){var U=I.getSource();if(U&&U.vectorLayerIds)for(var $ in y._layers){var W=y._layers[$];W.source===U.id&&y._validateLayer(W)}}}}))}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.loadURL=function(v,d){var y=this;d===void 0&&(d={}),this.fire(new a.Event("dataloading",{dataType:"style"}));var N=typeof d.validate=="boolean"?d.validate:!a.isMapboxURL(v);v=this.map._requestManager.normalizeStyleURL(v,d.accessToken);var k=this.map._requestManager.transformRequest(v,a.ResourceType.Style);this._request=a.getJSON(k,(function(I,U){y._request=null,I?y.fire(new a.ErrorEvent(I)):U&&y._load(U,N)}))},x.prototype.loadJSON=function(v,d){var y=this;d===void 0&&(d={}),this.fire(new a.Event("dataloading",{dataType:"style"})),this._request=a.browser.frame((function(){y._request=null,y._load(v,d.validate!==!1)}))},x.prototype.loadEmpty=function(){this.fire(new a.Event("dataloading",{dataType:"style"})),this._load(ac,!1)},x.prototype._load=function(v,d){if(!d||!Nl(this,a.validateStyle(v))){for(var y in this._loaded=!0,this.stylesheet=v,v.sources)this.addSource(y,v.sources[y],{validate:!1});v.sprite?this._loadSprite(v.sprite):this.imageManager.setLoaded(!0),this.glyphManager.setURL(v.glyphs);var N=or(this.stylesheet.layers);this._order=N.map((function($){return $.id})),this._layers={},this._serializedLayers={};for(var k=0,I=N;k<I.length;k+=1){var U=I[k];(U=a.createStyleLayer(U)).setEventedParent(this,{layer:{id:U.id}}),this._layers[U.id]=U,this._serializedLayers[U.id]=U.serialize()}this.dispatcher.broadcast("setLayers",this._serializeLayers(this._order)),this.light=new ce(this.stylesheet.light),this.fire(new a.Event("data",{dataType:"style"})),this.fire(new a.Event("style.load"))}},x.prototype._loadSprite=function(v){var d=this;this._spriteRequest=(function(y,N,k){var I,U,$,W=a.browser.devicePixelRatio>1?"@2x":"",Y=a.getJSON(N.transformRequest(N.normalizeSpriteURL(y,W,".json"),a.ResourceType.SpriteJSON),(function(ve,je){Y=null,$||($=ve,I=je,le())})),X=a.getImage(N.transformRequest(N.normalizeSpriteURL(y,W,".png"),a.ResourceType.SpriteImage),(function(ve,je){X=null,$||($=ve,U=je,le())}));function le(){if($)k($);else if(I&&U){var ve=a.browser.getImageData(U),je={};for(var de in I){var Pe=I[de],Ie=Pe.width,Ae=Pe.height,Le=Pe.x,Ge=Pe.y,Xe=Pe.sdf,rt=Pe.pixelRatio,yt=Pe.stretchX,mt=Pe.stretchY,Dt=Pe.content,Rt=new a.RGBAImage({width:Ie,height:Ae});a.RGBAImage.copy(ve,Rt,{x:Le,y:Ge},{x:0,y:0},{width:Ie,height:Ae}),je[de]={data:Rt,pixelRatio:rt,sdf:Xe,stretchX:yt,stretchY:mt,content:Dt}}k(null,je)}}return{cancel:function(){Y&&(Y.cancel(),Y=null),X&&(X.cancel(),X=null)}}})(v,this.map._requestManager,(function(y,N){if(d._spriteRequest=null,y)d.fire(new a.ErrorEvent(y));else if(N)for(var k in N)d.imageManager.addImage(k,N[k]);d.imageManager.setLoaded(!0),d._availableImages=d.imageManager.listImages(),d.dispatcher.broadcast("setImages",d._availableImages),d.fire(new a.Event("data",{dataType:"style"}))}))},x.prototype._validateLayer=function(v){var d=this.sourceCaches[v.source];if(d){var y=v.sourceLayer;if(y){var N=d.getSource();(N.type==="geojson"||N.vectorLayerIds&&N.vectorLayerIds.indexOf(y)===-1)&&this.fire(new a.ErrorEvent(new Error('Source layer "'+y+'" does not exist on source "'+N.id+'" as specified by style layer "'+v.id+'"')))}}},x.prototype.loaded=function(){if(!this._loaded||Object.keys(this._updatedSources).length)return!1;for(var v in this.sourceCaches)if(!this.sourceCaches[v].loaded())return!1;return!!this.imageManager.isLoaded()},x.prototype._serializeLayers=function(v){for(var d=[],y=0,N=v;y<N.length;y+=1){var k=this._layers[N[y]];k.type!=="custom"&&d.push(k.serialize())}return d},x.prototype.hasTransitions=function(){if(this.light&&this.light.hasTransition())return!0;for(var v in this.sourceCaches)if(this.sourceCaches[v].hasTransition())return!0;for(var d in this._layers)if(this._layers[d].hasTransition())return!0;return!1},x.prototype._checkLoaded=function(){if(!this._loaded)throw new Error("Style is not done loading")},x.prototype.update=function(v){if(this._loaded){var d=this._changed;if(this._changed){var y=Object.keys(this._updatedLayers),N=Object.keys(this._removedLayers);for(var k in(y.length||N.length)&&this._updateWorkerLayers(y,N),this._updatedSources){var I=this._updatedSources[k];I==="reload"?this._reloadSource(k):I==="clear"&&this._clearSource(k)}for(var U in this._updateTilesForChangedImages(),this._updatedPaintProps)this._layers[U].updateTransitions(v);this.light.updateTransitions(v),this._resetUpdates()}var $={};for(var W in this.sourceCaches){var Y=this.sourceCaches[W];$[W]=Y.used,Y.used=!1}for(var X=0,le=this._order;X<le.length;X+=1){var ve=this._layers[le[X]];ve.recalculate(v,this._availableImages),!ve.isHidden(v.zoom)&&ve.source&&(this.sourceCaches[ve.source].used=!0)}for(var je in $){var de=this.sourceCaches[je];$[je]!==de.used&&de.fire(new a.Event("data",{sourceDataType:"visibility",dataType:"source",sourceId:je}))}this.light.recalculate(v),this.z=v.zoom,d&&this.fire(new a.Event("data",{dataType:"style"}))}},x.prototype._updateTilesForChangedImages=function(){var v=Object.keys(this._changedImages);if(v.length){for(var d in this.sourceCaches)this.sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],v);this._changedImages={}}},x.prototype._updateWorkerLayers=function(v,d){this.dispatcher.broadcast("updateLayers",{layers:this._serializeLayers(v),removedIds:d})},x.prototype._resetUpdates=function(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSources={},this._updatedPaintProps={},this._changedImages={}},x.prototype.setState=function(v){var d=this;if(this._checkLoaded(),Nl(this,a.validateStyle(v)))return!1;(v=a.clone$1(v)).layers=or(v.layers);var y=(function(k,I){if(!k)return[{command:fr.setStyle,args:[I]}];var U=[];try{if(!a.deepEqual(k.version,I.version))return[{command:fr.setStyle,args:[I]}];a.deepEqual(k.center,I.center)||U.push({command:fr.setCenter,args:[I.center]}),a.deepEqual(k.zoom,I.zoom)||U.push({command:fr.setZoom,args:[I.zoom]}),a.deepEqual(k.bearing,I.bearing)||U.push({command:fr.setBearing,args:[I.bearing]}),a.deepEqual(k.pitch,I.pitch)||U.push({command:fr.setPitch,args:[I.pitch]}),a.deepEqual(k.sprite,I.sprite)||U.push({command:fr.setSprite,args:[I.sprite]}),a.deepEqual(k.glyphs,I.glyphs)||U.push({command:fr.setGlyphs,args:[I.glyphs]}),a.deepEqual(k.transition,I.transition)||U.push({command:fr.setTransition,args:[I.transition]}),a.deepEqual(k.light,I.light)||U.push({command:fr.setLight,args:[I.light]});var $={},W=[];(function(X,le,ve,je){var de;for(de in le=le||{},X=X||{})X.hasOwnProperty(de)&&(le.hasOwnProperty(de)||yr(de,ve,je));for(de in le)le.hasOwnProperty(de)&&(X.hasOwnProperty(de)?a.deepEqual(X[de],le[de])||(X[de].type==="geojson"&&le[de].type==="geojson"&&$n(X,le,de)?ve.push({command:fr.setGeoJSONSourceData,args:[de,le[de].data]}):xn(de,le,ve,je)):an(de,le,ve))})(k.sources,I.sources,W,$);var Y=[];k.layers&&k.layers.forEach((function(X){$[X.source]?U.push({command:fr.removeLayer,args:[X.id]}):Y.push(X)})),U=U.concat(W),(function(X,le,ve){le=le||[];var je,de,Pe,Ie,Ae,Le,Ge,Xe=(X=X||[]).map(Un),rt=le.map(Un),yt=X.reduce(Xr,{}),mt=le.reduce(Xr,{}),Dt=Xe.slice(),Rt=Object.create(null);for(je=0,de=0;je<Xe.length;je++)mt.hasOwnProperty(Pe=Xe[je])?de++:(ve.push({command:fr.removeLayer,args:[Pe]}),Dt.splice(Dt.indexOf(Pe,de),1));for(je=0,de=0;je<rt.length;je++)Dt[Dt.length-1-je]!==(Pe=rt[rt.length-1-je])&&(yt.hasOwnProperty(Pe)?(ve.push({command:fr.removeLayer,args:[Pe]}),Dt.splice(Dt.lastIndexOf(Pe,Dt.length-de),1)):de++,ve.push({command:fr.addLayer,args:[mt[Pe],Le=Dt[Dt.length-je]]}),Dt.splice(Dt.length-je,0,Pe),Rt[Pe]=!0);for(je=0;je<rt.length;je++)if(Ie=yt[Pe=rt[je]],Ae=mt[Pe],!Rt[Pe]&&!a.deepEqual(Ie,Ae))if(a.deepEqual(Ie.source,Ae.source)&&a.deepEqual(Ie["source-layer"],Ae["source-layer"])&&a.deepEqual(Ie.type,Ae.type)){for(Ge in bn(Ie.layout,Ae.layout,ve,Pe,null,fr.setLayoutProperty),bn(Ie.paint,Ae.paint,ve,Pe,null,fr.setPaintProperty),a.deepEqual(Ie.filter,Ae.filter)||ve.push({command:fr.setFilter,args:[Pe,Ae.filter]}),a.deepEqual(Ie.minzoom,Ae.minzoom)&&a.deepEqual(Ie.maxzoom,Ae.maxzoom)||ve.push({command:fr.setLayerZoomRange,args:[Pe,Ae.minzoom,Ae.maxzoom]}),Ie)Ie.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?bn(Ie[Ge],Ae[Ge],ve,Pe,Ge.slice(6),fr.setPaintProperty):a.deepEqual(Ie[Ge],Ae[Ge])||ve.push({command:fr.setLayerProperty,args:[Pe,Ge,Ae[Ge]]}));for(Ge in Ae)Ae.hasOwnProperty(Ge)&&!Ie.hasOwnProperty(Ge)&&Ge!=="layout"&&Ge!=="paint"&&Ge!=="filter"&&Ge!=="metadata"&&Ge!=="minzoom"&&Ge!=="maxzoom"&&(Ge.indexOf("paint.")===0?bn(Ie[Ge],Ae[Ge],ve,Pe,Ge.slice(6),fr.setPaintProperty):a.deepEqual(Ie[Ge],Ae[Ge])||ve.push({command:fr.setLayerProperty,args:[Pe,Ge,Ae[Ge]]}))}else ve.push({command:fr.removeLayer,args:[Pe]}),Le=Dt[Dt.lastIndexOf(Pe)+1],ve.push({command:fr.addLayer,args:[Ae,Le]})})(Y,I.layers,U)}catch(X){console.warn("Unable to compute style diff:",X),U=[{command:fr.setStyle,args:[I]}]}return U})(this.serialize(),v).filter((function(k){return!(k.command in Bl)}));if(y.length===0)return!1;var N=y.filter((function(k){return!(k.command in ro)}));if(N.length>0)throw new Error("Unimplemented: "+N.map((function(k){return k.command})).join(", ")+".");return y.forEach((function(k){k.command!=="setTransition"&&d[k.command].apply(d,k.args)})),this.stylesheet=v,!0},x.prototype.addImage=function(v,d){if(this.getImage(v))return this.fire(new a.ErrorEvent(new Error("An image with this name already exists.")));this.imageManager.addImage(v,d),this._afterImageUpdated(v)},x.prototype.updateImage=function(v,d){this.imageManager.updateImage(v,d)},x.prototype.getImage=function(v){return this.imageManager.getImage(v)},x.prototype.removeImage=function(v){if(!this.getImage(v))return this.fire(new a.ErrorEvent(new Error("No image with this name exists.")));this.imageManager.removeImage(v),this._afterImageUpdated(v)},x.prototype._afterImageUpdated=function(v){this._availableImages=this.imageManager.listImages(),this._changedImages[v]=!0,this._changed=!0,this.dispatcher.broadcast("setImages",this._availableImages),this.fire(new a.Event("data",{dataType:"style"}))},x.prototype.listImages=function(){return this._checkLoaded(),this.imageManager.listImages()},x.prototype.addSource=function(v,d,y){var N=this;if(y===void 0&&(y={}),this._checkLoaded(),this.sourceCaches[v]!==void 0)throw new Error("There is already a source with this ID");if(!d.type)throw new Error("The type property must be defined, but only the following properties were given: "+Object.keys(d).join(", ")+".");if(!(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(a.validateStyle.source,"sources."+v,d,null,y))){this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);var k=this.sourceCaches[v]=new qe(v,d,this.dispatcher);k.style=this,k.setEventedParent(this,(function(){return{isSourceLoaded:N.loaded(),source:k.serialize(),sourceId:v}})),k.onAdd(this.map),this._changed=!0}},x.prototype.removeSource=function(v){if(this._checkLoaded(),this.sourceCaches[v]===void 0)throw new Error("There is no source with this ID");for(var d in this._layers)if(this._layers[d].source===v)return this.fire(new a.ErrorEvent(new Error('Source "'+v+'" cannot be removed while layer "'+d+'" is using it.')));var y=this.sourceCaches[v];delete this.sourceCaches[v],delete this._updatedSources[v],y.fire(new a.Event("data",{sourceDataType:"metadata",dataType:"source",sourceId:v})),y.setEventedParent(null),y.clearTiles(),y.onRemove&&y.onRemove(this.map),this._changed=!0},x.prototype.setGeoJSONSourceData=function(v,d){this._checkLoaded(),this.sourceCaches[v].getSource().setData(d),this._changed=!0},x.prototype.getSource=function(v){return this.sourceCaches[v]&&this.sourceCaches[v].getSource()},x.prototype.addLayer=function(v,d,y){y===void 0&&(y={}),this._checkLoaded();var N=v.id;if(this.getLayer(N))this.fire(new a.ErrorEvent(new Error('Layer with id "'+N+'" already exists on this map')));else{var k;if(v.type==="custom"){if(Nl(this,a.validateCustomStyleLayer(v)))return;k=a.createStyleLayer(v)}else{if(typeof v.source=="object"&&(this.addSource(N,v.source),v=a.clone$1(v),v=a.extend(v,{source:N})),this._validate(a.validateStyle.layer,"layers."+N,v,{arrayIndex:-1},y))return;k=a.createStyleLayer(v),this._validateLayer(k),k.setEventedParent(this,{layer:{id:N}}),this._serializedLayers[k.id]=k.serialize()}var I=d?this._order.indexOf(d):this._order.length;if(d&&I===-1)this.fire(new a.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.')));else{if(this._order.splice(I,0,N),this._layerOrderChanged=!0,this._layers[N]=k,this._removedLayers[N]&&k.source&&k.type!=="custom"){var U=this._removedLayers[N];delete this._removedLayers[N],U.type!==k.type?this._updatedSources[k.source]="clear":(this._updatedSources[k.source]="reload",this.sourceCaches[k.source].pause())}this._updateLayer(k),k.onAdd&&k.onAdd(this.map)}}},x.prototype.moveLayer=function(v,d){if(this._checkLoaded(),this._changed=!0,this._layers[v]){if(v!==d){var y=this._order.indexOf(v);this._order.splice(y,1);var N=d?this._order.indexOf(d):this._order.length;d&&N===-1?this.fire(new a.ErrorEvent(new Error('Layer with id "'+d+'" does not exist on this map.'))):(this._order.splice(N,0,v),this._layerOrderChanged=!0)}}else this.fire(new a.ErrorEvent(new Error("The layer '"+v+"' does not exist in the map's style and cannot be moved.")))},x.prototype.removeLayer=function(v){this._checkLoaded();var d=this._layers[v];if(d){d.setEventedParent(null);var y=this._order.indexOf(v);this._order.splice(y,1),this._layerOrderChanged=!0,this._changed=!0,this._removedLayers[v]=d,delete this._layers[v],delete this._serializedLayers[v],delete this._updatedLayers[v],delete this._updatedPaintProps[v],d.onRemove&&d.onRemove(this.map)}else this.fire(new a.ErrorEvent(new Error("The layer '"+v+"' does not exist in the map's style and cannot be removed.")))},x.prototype.getLayer=function(v){return this._layers[v]},x.prototype.hasLayer=function(v){return v in this._layers},x.prototype.setLayerZoomRange=function(v,d,y){this._checkLoaded();var N=this.getLayer(v);N?N.minzoom===d&&N.maxzoom===y||(d!=null&&(N.minzoom=d),y!=null&&(N.maxzoom=y),this._updateLayer(N)):this.fire(new a.ErrorEvent(new Error("The layer '"+v+"' does not exist in the map's style and cannot have zoom extent.")))},x.prototype.setFilter=function(v,d,y){y===void 0&&(y={}),this._checkLoaded();var N=this.getLayer(v);if(N){if(!a.deepEqual(N.filter,d))return d==null?(N.filter=void 0,void this._updateLayer(N)):void(this._validate(a.validateStyle.filter,"layers."+N.id+".filter",d,null,y)||(N.filter=a.clone$1(d),this._updateLayer(N)))}else this.fire(new a.ErrorEvent(new Error("The layer '"+v+"' does not exist in the map's style and cannot be filtered.")))},x.prototype.getFilter=function(v){return a.clone$1(this.getLayer(v).filter)},x.prototype.setLayoutProperty=function(v,d,y,N){N===void 0&&(N={}),this._checkLoaded();var k=this.getLayer(v);k?a.deepEqual(k.getLayoutProperty(d),y)||(k.setLayoutProperty(d,y,N),this._updateLayer(k)):this.fire(new a.ErrorEvent(new Error("The layer '"+v+"' does not exist in the map's style and cannot be styled.")))},x.prototype.getLayoutProperty=function(v,d){var y=this.getLayer(v);if(y)return y.getLayoutProperty(d);this.fire(new a.ErrorEvent(new Error("The layer '"+v+"' does not exist in the map's style.")))},x.prototype.setPaintProperty=function(v,d,y,N){N===void 0&&(N={}),this._checkLoaded();var k=this.getLayer(v);k?a.deepEqual(k.getPaintProperty(d),y)||(k.setPaintProperty(d,y,N)&&this._updateLayer(k),this._changed=!0,this._updatedPaintProps[v]=!0):this.fire(new a.ErrorEvent(new Error("The layer '"+v+"' does not exist in the map's style and cannot be styled.")))},x.prototype.getPaintProperty=function(v,d){return this.getLayer(v).getPaintProperty(d)},x.prototype.setFeatureState=function(v,d){this._checkLoaded();var y=v.source,N=v.sourceLayer,k=this.sourceCaches[y];if(k!==void 0){var I=k.getSource().type;I==="geojson"&&N?this.fire(new a.ErrorEvent(new Error("GeoJSON sources cannot have a sourceLayer parameter."))):I!=="vector"||N?(v.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),k.setFeatureState(N,v.id,d)):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+y+"' does not exist in the map's style.")))},x.prototype.removeFeatureState=function(v,d){this._checkLoaded();var y=v.source,N=this.sourceCaches[y];if(N!==void 0){var k=N.getSource().type,I=k==="vector"?v.sourceLayer:void 0;k!=="vector"||I?d&&typeof v.id!="string"&&typeof v.id!="number"?this.fire(new a.ErrorEvent(new Error("A feature id is required to remove its specific state property."))):N.removeFeatureState(I,v.id,d):this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+y+"' does not exist in the map's style.")))},x.prototype.getFeatureState=function(v){this._checkLoaded();var d=v.source,y=v.sourceLayer,N=this.sourceCaches[d];if(N!==void 0){if(N.getSource().type!=="vector"||y)return v.id===void 0&&this.fire(new a.ErrorEvent(new Error("The feature id parameter must be provided."))),N.getFeatureState(y,v.id);this.fire(new a.ErrorEvent(new Error("The sourceLayer parameter must be provided for vector source types.")))}else this.fire(new a.ErrorEvent(new Error("The source '"+d+"' does not exist in the map's style.")))},x.prototype.getTransition=function(){return a.extend({duration:300,delay:0},this.stylesheet&&this.stylesheet.transition)},x.prototype.serialize=function(){return a.filterObject({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,light:this.stylesheet.light,center:this.stylesheet.center,zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,sources:a.mapObject(this.sourceCaches,(function(v){return v.serialize()})),layers:this._serializeLayers(this._order)},(function(v){return v!==void 0}))},x.prototype._updateLayer=function(v){this._updatedLayers[v.id]=!0,v.source&&!this._updatedSources[v.source]&&this.sourceCaches[v.source].getSource().type!=="raster"&&(this._updatedSources[v.source]="reload",this.sourceCaches[v.source].pause()),this._changed=!0},x.prototype._flattenAndSortRenderedFeatures=function(v){for(var d=this,y=function(yt){return d._layers[yt].type==="fill-extrusion"},N={},k=[],I=this._order.length-1;I>=0;I--){var U=this._order[I];if(y(U)){N[U]=I;for(var $=0,W=v;$<W.length;$+=1){var Y=W[$][U];if(Y)for(var X=0,le=Y;X<le.length;X+=1)k.push(le[X])}}}k.sort((function(yt,mt){return mt.intersectionZ-yt.intersectionZ}));for(var ve=[],je=this._order.length-1;je>=0;je--){var de=this._order[je];if(y(de))for(var Pe=k.length-1;Pe>=0;Pe--){var Ie=k[Pe].feature;if(N[Ie.layer.id]<je)break;ve.push(Ie),k.pop()}else for(var Ae=0,Le=v;Ae<Le.length;Ae+=1){var Ge=Le[Ae][de];if(Ge)for(var Xe=0,rt=Ge;Xe<rt.length;Xe+=1)ve.push(rt[Xe].feature)}}return ve},x.prototype.queryRenderedFeatures=function(v,d,y){d&&d.filter&&this._validate(a.validateStyle.filter,"queryRenderedFeatures.filter",d.filter,null,d);var N={};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new a.ErrorEvent(new Error("parameters.layers must be an Array."))),[];for(var k=0,I=d.layers;k<I.length;k+=1){var U=I[k],$=this._layers[U];if(!$)return this.fire(new a.ErrorEvent(new Error("The layer '"+U+"' does not exist in the map's style and cannot be queried for features."))),[];N[$.source]=!0}}var W=[];for(var Y in d.availableImages=this._availableImages,this.sourceCaches)d.layers&&!N[Y]||W.push(Ve(this.sourceCaches[Y],this._layers,this._serializedLayers,v,d,y));return this.placement&&W.push((function(X,le,ve,je,de,Pe,Ie){for(var Ae={},Le=Pe.queryRenderedSymbols(je),Ge=[],Xe=0,rt=Object.keys(Le).map(Number);Xe<rt.length;Xe+=1)Ge.push(Ie[rt[Xe]]);Ge.sort(tt);for(var yt=function(){var hr=Dt[mt],Fr=hr.featureIndex.lookupSymbolFeatures(Le[hr.bucketInstanceId],le,hr.bucketIndex,hr.sourceLayerIndex,de.filter,de.layers,de.availableImages,X);for(var Yt in Fr){var Sr=Ae[Yt]=Ae[Yt]||[],Pr=Fr[Yt];Pr.sort((function(Gr,Tr){var Rr=hr.featureSortOrder;if(Rr){var vn=Rr.indexOf(Gr.featureIndex);return Rr.indexOf(Tr.featureIndex)-vn}return Tr.featureIndex-Gr.featureIndex}));for(var ir=0,Ar=Pr;ir<Ar.length;ir+=1)Sr.push(Ar[ir])}},mt=0,Dt=Ge;mt<Dt.length;mt+=1)yt();var Rt=function(hr){Ae[hr].forEach((function(Fr){var Yt=Fr.feature,Sr=ve[X[hr].source].getFeatureState(Yt.layer["source-layer"],Yt.id);Yt.source=Yt.layer.source,Yt.layer["source-layer"]&&(Yt.sourceLayer=Yt.layer["source-layer"]),Yt.state=Sr}))};for(var vr in Ae)Rt(vr);return Ae})(this._layers,this._serializedLayers,this.sourceCaches,v,d,this.placement.collisionIndex,this.placement.retainedQueryData)),this._flattenAndSortRenderedFeatures(W)},x.prototype.querySourceFeatures=function(v,d){d&&d.filter&&this._validate(a.validateStyle.filter,"querySourceFeatures.filter",d.filter,null,d);var y=this.sourceCaches[v];return y?(function(N,k){for(var I=N.getRenderableIds().map((function(le){return N.getTileByID(le)})),U=[],$={},W=0;W<I.length;W++){var Y=I[W],X=Y.tileID.canonical.key;$[X]||($[X]=!0,Y.querySourceFeatures(U,k))}return U})(y,d):[]},x.prototype.addSourceType=function(v,d,y){return x.getSourceType(v)?y(new Error('A source type called "'+v+'" already exists.')):(x.setSourceType(v,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:v,url:d.workerSourceURL},y):y(null,null))},x.prototype.getLight=function(){return this.light.getLight()},x.prototype.setLight=function(v,d){d===void 0&&(d={}),this._checkLoaded();var y=this.light.getLight(),N=!1;for(var k in v)if(!a.deepEqual(v[k],y[k])){N=!0;break}if(N){var I={now:a.browser.now(),transition:a.extend({duration:300,delay:0},this.stylesheet.transition)};this.light.setLight(v,d),this.light.updateTransitions(I)}},x.prototype._validate=function(v,d,y,N,k){return k===void 0&&(k={}),(!k||k.validate!==!1)&&Nl(this,v.call(a.validateStyle,a.extend({key:d,style:this.serialize(),value:y,styleSpec:a.styleSpec},N)))},x.prototype._remove=function(){for(var v in this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),a.evented.off("pluginStateChange",this._rtlTextPluginCallback),this._layers)this._layers[v].setEventedParent(null);for(var d in this.sourceCaches)this.sourceCaches[d].clearTiles(),this.sourceCaches[d].setEventedParent(null);this.imageManager.setEventedParent(null),this.setEventedParent(null),this.dispatcher.remove()},x.prototype._clearSource=function(v){this.sourceCaches[v].clearTiles()},x.prototype._reloadSource=function(v){this.sourceCaches[v].resume(),this.sourceCaches[v].reload()},x.prototype._updateSources=function(v){for(var d in this.sourceCaches)this.sourceCaches[d].update(v)},x.prototype._generateCollisionBoxes=function(){for(var v in this.sourceCaches)this._reloadSource(v)},x.prototype._updatePlacement=function(v,d,y,N,k){k===void 0&&(k=!1);for(var I=!1,U=!1,$={},W=0,Y=this._order;W<Y.length;W+=1){var X=this._layers[Y[W]];if(X.type==="symbol"){if(!$[X.source]){var le=this.sourceCaches[X.source];$[X.source]=le.getRenderableIds(!0).map((function(Ie){return le.getTileByID(Ie)})).sort((function(Ie,Ae){return Ae.tileID.overscaledZ-Ie.tileID.overscaledZ||(Ie.tileID.isLessThan(Ae.tileID)?-1:1)}))}var ve=this.crossTileSymbolIndex.addLayer(X,$[X.source],v.center.lng);I=I||ve}}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._order),((k=k||this._layerOrderChanged||y===0)||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(a.browser.now(),v.zoom))&&(this.pauseablePlacement=new Su(v,this._order,k,d,y,N,this.placement),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._order,this._layers,$),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(a.browser.now()),U=!0),I&&this.pauseablePlacement.placement.setStale()),U||I)for(var je=0,de=this._order;je<de.length;je+=1){var Pe=this._layers[de[je]];Pe.type==="symbol"&&this.placement.updateLayerOpacities(Pe,$[Pe.source])}return!this.pauseablePlacement.isDone()||this.placement.hasTransitions(a.browser.now())},x.prototype._releaseSymbolFadeTiles=function(){for(var v in this.sourceCaches)this.sourceCaches[v].releaseSymbolFadeTiles()},x.prototype.getImages=function(v,d,y){this.imageManager.getImages(d.icons,y),this._updateTilesForChangedImages();var N=this.sourceCaches[d.source];N&&N.setDependencies(d.tileID.key,d.type,d.icons)},x.prototype.getGlyphs=function(v,d,y){this.glyphManager.getGlyphs(d.stacks,y)},x.prototype.getResource=function(v,d,y){return a.makeRequest(d,y)},x})(a.Evented);aa.getSourceType=function(m){return Me[m]},aa.setSourceType=function(m,x){Me[m]=x},aa.registerForPluginStateChange=a.registerForPluginStateChange;var Ai=a.createLayout([{name:"a_pos",type:"Int16",components:2}]),oc=ni(`#ifdef GL_ES
precision mediump float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif`,`#ifdef GL_ES
precision highp float;
#else
#if !defined(lowp)
#define lowp
#endif
#if !defined(mediump)
#define mediump
#endif
#if !defined(highp)
#define highp
#endif
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (tile_units_to_pixels*pos+offset)/pattern_size;}`),eu=ni(`uniform vec4 u_color;uniform float u_opacity;void main() {gl_FragColor=u_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Ha=ni(`uniform vec2 u_pattern_tl_a;uniform vec2 u_pattern_br_a;uniform vec2 u_pattern_tl_b;uniform vec2 u_pattern_br_b;uniform vec2 u_texsize;uniform float u_mix;uniform float u_opacity;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(u_pattern_tl_a/u_texsize,u_pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(u_pattern_tl_b/u_texsize,u_pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_mix)*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_pattern_size_a;uniform vec2 u_pattern_size_b;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_scale_a;uniform float u_scale_b;uniform float u_tile_units_to_pixels;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_a*u_pattern_size_a,u_tile_units_to_pixels,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_scale_b*u_pattern_size_b,u_tile_units_to_pixels,a_pos);}"),Ul=ni(`varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float extrude_length=length(extrude);lowp float antialiasblur=v_data.z;float antialiased_blur=-max(blur,antialiasblur);float opacity_t=smoothstep(0.0,antialiased_blur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width));gl_FragColor=opacity_t*mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform bool u_scale_with_map;uniform bool u_pitch_with_map;uniform vec2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;attribute vec2 a_pos;varying vec3 v_data;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);if (u_pitch_with_map) {vec2 corner_position=circle_center;if (u_scale_with_map) {corner_position+=extrude*(radius+stroke_width)*u_extrude_scale;} else {vec4 projected_center=u_matrix*vec4(circle_center,0,1);corner_position+=extrude*(radius+stroke_width)*u_extrude_scale*(projected_center.w/u_camera_to_center_distance);}gl_Position=u_matrix*vec4(corner_position,0,1);} else {gl_Position=u_matrix*vec4(circle_center,0,1);if (u_scale_with_map) {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*u_camera_to_center_distance;} else {gl_Position.xy+=extrude*(radius+stroke_width)*u_extrude_scale*gl_Position.w;}}lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);}`),tu=ni("void main() {gl_FragColor=vec4(1.0);}","attribute vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),Cc=ni(`uniform highp float u_intensity;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);gl_FragColor=vec4(val,1.0,1.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;attribute vec2 a_pos;varying vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec4 pos=vec4(floor(a_pos*0.5)+extrude,0,1);gl_Position=u_matrix*pos;}`),wd=ni(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;varying vec2 v_pos;void main() {float t=texture2D(u_image,v_pos).r;vec4 color=texture2D(u_color_ramp,vec2(t,0.5));gl_FragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(0.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_world;attribute vec2 a_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos*u_world,0,1);v_pos.x=a_pos.x;v_pos.y=1.0-a_pos.y;}"),Cu=ni("varying float v_placed;varying float v_notUsed;void main() {float alpha=0.5;gl_FragColor=vec4(1.0,0.0,0.0,1.0)*alpha;if (v_placed > 0.5) {gl_FragColor=vec4(0.0,0.0,1.0,0.5)*alpha;}if (v_notUsed > 0.5) {gl_FragColor*=.1;}}","attribute vec2 a_pos;attribute vec2 a_anchor_pos;attribute vec2 a_extrude;attribute vec2 a_placed;attribute vec2 a_shift;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;varying float v_placed;varying float v_notUsed;void main() {vec4 projectedPoint=u_matrix*vec4(a_anchor_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);gl_Position=u_matrix*vec4(a_pos,0.0,1.0);gl_Position.xy+=(a_extrude+a_shift)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}"),Sl=ni("varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);gl_FragColor=color*alpha*opacity_t;}","attribute vec2 a_pos;attribute float a_radius;attribute vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;varying float v_radius;varying vec2 v_extrude;varying float v_perspective_ratio;varying float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}"),Zo=ni("uniform highp vec4 u_color;uniform sampler2D u_overlay;varying vec2 v_uv;void main() {vec4 overlay_color=texture2D(u_overlay,v_uv);gl_FragColor=mix(u_color,overlay_color,overlay_color.a);}","attribute vec2 a_pos;varying vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {v_uv=a_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,0,1);}"),jd=ni(`#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_FragColor=color*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);}`),Al=ni(`varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=outline_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`attribute vec2 a_pos;uniform mat4 u_matrix;uniform vec2 u_world;varying vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Lo=ni(`uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_fade;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);gl_FragColor=mix(color1,color2,u_fade)*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;gl_Position=u_matrix*vec4(a_pos,0,1);vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,a_pos);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;}`),Nd=ni(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);gl_FragColor=mix(color1,color2,u_fade)*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec3 u_scale;attribute vec2 a_pos;varying vec2 v_pos_a;varying vec2 v_pos_b;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;gl_Position=u_matrix*vec4(a_pos,0,1);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileZoomRatio,a_pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileZoomRatio,a_pos);}`),Ts=ni(`varying vec4 v_color;void main() {gl_FragColor=v_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec4 v_color;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
vec3 normal=a_normal_ed.xyz;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);gl_Position=u_matrix*vec4(a_pos,t > 0.0 ? height : base,1);float colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;v_color=vec4(0.0,0.0,0.0,1.0);vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;float directional=clamp(dot(normal/16384.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_color.r+=clamp(color.r*directional*u_lightcolor.r,mix(0.0,0.3,1.0-u_lightcolor.r),1.0);v_color.g+=clamp(color.g*directional*u_lightcolor.g,mix(0.0,0.3,1.0-u_lightcolor.g),1.0);v_color.b+=clamp(color.b*directional*u_lightcolor.b,mix(0.0,0.3,1.0-u_lightcolor.b),1.0);v_color*=u_opacity;}`),Fu=ni(`uniform vec2 u_texsize;uniform float u_fade;uniform sampler2D u_image;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;vec2 imagecoord=mod(v_pos_a,1.0);vec2 pos=mix(pattern_tl_a/u_texsize,pattern_br_a/u_texsize,imagecoord);vec4 color1=texture2D(u_image,pos);vec2 imagecoord_b=mod(v_pos_b,1.0);vec2 pos2=mix(pattern_tl_b/u_texsize,pattern_br_b/u_texsize,imagecoord_b);vec4 color2=texture2D(u_image,pos2);vec4 mixedColor=mix(color1,color2,u_fade);gl_FragColor=mixedColor*v_lighting;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform vec3 u_scale;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;attribute vec2 a_pos;attribute vec4 a_normal_ed;varying vec2 v_pos_a;varying vec2 v_pos_b;varying vec4 v_lighting;
#pragma mapbox: define lowp float base
#pragma mapbox: define lowp float height
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float base
#pragma mapbox: initialize lowp float height
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec3 normal=a_normal_ed.xyz;float edgedistance=a_normal_ed.w;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;base=max(0.0,base);height=max(0.0,height);float t=mod(normal.x,2.0);float z=t > 0.0 ? height : base;gl_Position=u_matrix*vec4(a_pos,z,1);vec2 pos=normal.x==1.0 && normal.y==0.0 && normal.z==16384.0
? a_pos
: vec2(edgedistance,z*u_height_factor);v_pos_a=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,fromScale*display_size_a,tileRatio,pos);v_pos_b=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,toScale*display_size_b,tileRatio,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float directional=clamp(dot(normal/16383.0,u_lightpos),0.0,1.0);directional=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),directional);if (normal.y !=0.0) {directional*=((1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),mix(0.7,0.98,1.0-u_lightintensity),1.0)));}v_lighting.rgb+=clamp(directional*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;}`),Cl=ni(`#ifdef GL_ES
precision highp float;
#endif
uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;uniform vec4 u_unpack;float getElevation(vec2 coord,float bias) {vec4 data=texture2D(u_image,coord)*255.0;data.a=-1.0;return dot(data,u_unpack)/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y),0.0);float b=getElevation(v_pos+vec2(0,-epsilon.y),0.0);float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y),0.0);float d=getElevation(v_pos+vec2(-epsilon.x,0),0.0);float e=getElevation(v_pos,0.0);float f=getElevation(v_pos+vec2(epsilon.x,0),0.0);float g=getElevation(v_pos+vec2(-epsilon.x,epsilon.y),0.0);float h=getElevation(v_pos+vec2(0,epsilon.y),0.0);float i=getElevation(v_pos+vec2(epsilon.x,epsilon.y),0.0);float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2((c+f+f+i)-(a+d+d+g),(g+h+h+i)-(a+b+b+c))/pow(2.0,exaggeration+(19.2562-u_zoom));gl_FragColor=clamp(vec4(deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),kc=ni(`uniform sampler2D u_image;varying vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;
#define PI 3.141592653589793
void main() {vec4 pixel=texture2D(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);gl_FragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;}"),lc=ni(`uniform lowp float u_device_pixel_ratio;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp float v_linesofar;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;v_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*2.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),cc=ni(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;varying vec2 v_width2;varying vec2 v_normal;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);vec4 color=texture2D(u_image,v_uv);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
attribute vec2 a_pos_normal;attribute vec4 a_data;attribute float a_uv_x;attribute float a_split_index;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_units_to_pixels;uniform float u_image_height;varying vec2 v_normal;varying vec2 v_width2;varying float v_gamma_scale;varying highp vec2 v_uv;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec2(a_uv_x,a_split_index*texel_height-half_texel_height);vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_width2=vec2(outset,inset);}`),uc=ni(`uniform lowp float u_device_pixel_ratio;uniform vec2 u_texsize;uniform float u_fade;uniform mediump vec3 u_scale;uniform sampler2D u_image;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
vec2 pattern_tl_a=pattern_from.xy;vec2 pattern_br_a=pattern_from.zw;vec2 pattern_tl_b=pattern_to.xy;vec2 pattern_br_b=pattern_to.zw;float tileZoomRatio=u_scale.x;float fromScale=u_scale.y;float toScale=u_scale.z;vec2 display_size_a=(pattern_br_a-pattern_tl_a)/pixel_ratio_from;vec2 display_size_b=(pattern_br_b-pattern_tl_b)/pixel_ratio_to;vec2 pattern_size_a=vec2(display_size_a.x*fromScale/tileZoomRatio,display_size_a.y);vec2 pattern_size_b=vec2(display_size_b.x*toScale/tileZoomRatio,display_size_b.y);float aspect_a=display_size_a.y/v_width;float aspect_b=display_size_b.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float x_a=mod(v_linesofar/pattern_size_a.x*aspect_a,1.0);float x_b=mod(v_linesofar/pattern_size_b.x*aspect_b,1.0);float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;vec2 pos_a=mix(pattern_tl_a*texel_size-texel_size,pattern_br_a*texel_size+texel_size,vec2(x_a,y));vec2 pos_b=mix(pattern_tl_b*texel_size-texel_size,pattern_br_b*texel_size+texel_size,vec2(x_b,y));vec4 color=mix(texture2D(u_image,pos_a),texture2D(u_image,pos_b),u_fade);gl_FragColor=color*alpha*opacity;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform vec2 u_units_to_pixels;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;varying vec2 v_normal;varying vec2 v_width2;varying float v_linesofar;varying float v_gamma_scale;varying float v_width;
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 pattern_from
#pragma mapbox: define lowp vec4 pattern_to
#pragma mapbox: define lowp float pixel_ratio_from
#pragma mapbox: define lowp float pixel_ratio_to
void main() {
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize mediump vec4 pattern_from
#pragma mapbox: initialize mediump vec4 pattern_to
#pragma mapbox: initialize lowp float pixel_ratio_from
#pragma mapbox: initialize lowp float pixel_ratio_to
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=floorwidth;}`),kl=ni(`uniform lowp float u_device_pixel_ratio;uniform sampler2D u_image;uniform float u_sdfgamma;uniform float u_mix;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float dist=length(v_normal)*v_width2.s;float blur2=(blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);float sdfdist_a=texture2D(u_image,v_tex_a).a;float sdfdist_b=texture2D(u_image,v_tex_b).a;float sdfdist=mix(sdfdist_a,sdfdist_b,u_mix);alpha*=smoothstep(0.5-u_sdfgamma/floorwidth,0.5+u_sdfgamma/floorwidth,sdfdist);gl_FragColor=color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`
#define scale 0.015873016
#define LINE_DISTANCE_SCALE 2.0
attribute vec2 a_pos_normal;attribute vec4 a_data;uniform mat4 u_matrix;uniform mediump float u_ratio;uniform lowp float u_device_pixel_ratio;uniform vec2 u_patternscale_a;uniform float u_tex_y_a;uniform vec2 u_patternscale_b;uniform float u_tex_y_b;uniform vec2 u_units_to_pixels;varying vec2 v_normal;varying vec2 v_width2;varying vec2 v_tex_a;varying vec2 v_tex_b;varying float v_gamma_scale;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float floorwidth
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float floorwidth
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;float a_linesofar=(floor(a_data.z/4.0)+a_data.w*64.0)*LINE_DISTANCE_SCALE;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=width/2.0;offset=-1.0*offset;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*scale;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);vec4 projected_extrude=u_matrix*vec4(dist/u_ratio,0.0,0.0);gl_Position=u_matrix*vec4(pos+offset2/u_ratio,0.0,1.0)+projected_extrude;float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude.xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=extrude_length_without_perspective/extrude_length_with_perspective;v_tex_a=vec2(a_linesofar*u_patternscale_a.x/floorwidth,normal.y*u_patternscale_a.y+u_tex_y_a);v_tex_b=vec2(a_linesofar*u_patternscale_b.x/floorwidth,normal.y*u_patternscale_b.y+u_tex_y_b);v_width2=vec2(outset,inset);}`),dc=ni(`uniform float u_fade_t;uniform float u_opacity;uniform sampler2D u_image0;uniform sampler2D u_image1;varying vec2 v_pos0;varying vec2 v_pos1;uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;void main() {vec4 color0=texture2D(u_image0,v_pos0);vec4 color1=texture2D(u_image1,v_pos1);if (color0.a > 0.0) {color0.rgb=color0.rgb/color0.a;}if (color1.a > 0.0) {color1.rgb=color1.rgb/color1.a;}vec4 color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 rgb=color.rgb;rgb=vec3(dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);gl_FragColor=vec4(mix(u_high_vec,u_low_vec,rgb)*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,"uniform mat4 u_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_buffer_scale;attribute vec2 a_pos;attribute vec2 a_texture_pos;varying vec2 v_pos0;varying vec2 v_pos1;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos0=(((a_texture_pos/8192.0)-0.5)/u_buffer_scale )+0.5;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}"),ql=ni(`uniform sampler2D u_texture;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
lowp float alpha=opacity*v_fade_opacity;gl_FragColor=texture2D(u_texture,v_tex)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform highp float u_camera_to_center_distance;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform float u_fade_change;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform vec2 u_texsize;varying vec2 v_tex;varying float v_fade_opacity;
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize lowp float opacity
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_minFontScale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*max(a_minFontScale,fontScale)+a_pxoffset/16.0),0.0,1.0);v_tex=a_tex/u_texsize;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;v_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));}`),rh=ni(`#define SDF_PX 8.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float EDGE_GAMMA=0.105/u_device_pixel_ratio;vec2 tex=v_data0.xy;float gamma_scale=v_data1.x;float size=v_data1.y;float fade_opacity=v_data1[2];float fontScale=u_is_text ? size/24.0 : size;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec4 a_pixeloffset;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;varying vec2 v_data0;varying vec3 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale+a_pxoffset),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0=a_tex/u_texsize;v_data1=vec3(gamma_scale,size,interpolated_fade_opacity);}`),Hh=ni(`#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform bool u_is_halo;uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
float fade_opacity=v_data1[2];if (v_data1.w==ICON) {vec2 tex_icon=v_data0.zw;lowp float alpha=opacity*fade_opacity;gl_FragColor=texture2D(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
return;}vec2 tex=v_data0.xy;float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_data1.x;float size=v_data1.y;float fontScale=size/24.0;lowp vec4 color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;if (u_is_halo) {color=halo_color;gamma=(halo_blur*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width/fontScale)/SDF_PX;}lowp float dist=texture2D(u_texture,tex).a;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);gl_FragColor=color*(alpha*opacity*fade_opacity);
#ifdef OVERDRAW_INSPECTOR
gl_FragColor=vec4(1.0);
#endif
}`,`const float PI=3.141592653589793;attribute vec4 a_pos_offset;attribute vec4 a_data;attribute vec3 a_projected_pos;attribute float a_fade_opacity;uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_pitch_with_map;uniform highp float u_pitch;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec2 u_texsize_icon;varying vec4 v_data0;varying vec4 v_data1;
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_data.xy;vec2 a_size=a_data.zw;float a_size_min=floor(a_size[0]*0.5);float is_sdf=a_size[0]-2.0*a_size_min;highp float segment_angle=-a_projected_pos[2];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec4 projectedPoint=u_matrix*vec4(a_pos,0,1);highp float camera_to_anchor_distance=projectedPoint.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(0.5+0.5*distance_ratio,0.0,4.0);size*=perspective_ratio;float fontScale=size/24.0;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetProjectedPoint=u_matrix*vec4(a_pos+vec2(1,0),0,1);vec2 a=projectedPoint.xy/projectedPoint.w;vec2 b=offsetProjectedPoint.xy/offsetProjectedPoint.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);vec4 projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,0.0,1.0);gl_Position=u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+rotation_matrix*(a_offset/32.0*fontScale),0.0,1.0);float gamma_scale=gl_Position.w;vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(1.0,fade_opacity[0]+fade_change));v_data0.xy=a_tex/u_texsize;v_data0.zw=a_tex/u_texsize_icon;v_data1=vec4(gamma_scale,size,interpolated_fade_opacity,is_sdf);}`);function ni(m,x){var v=/#pragma mapbox: ([\w]+) ([\w]+) ([\w]+) ([\w]+)/g,d=x.match(/attribute ([\w]+) ([\w]+)/g),y=m.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),N=x.match(/uniform ([\w]+) ([\w]+)([\s]*)([\w]*)/g),k=N?N.concat(y):y,I={};return{fragmentSource:m=m.replace(v,(function(U,$,W,Y,X){return I[X]=!0,$==="define"?`
#ifndef HAS_UNIFORM_u_`+X+`
varying `+W+" "+Y+" "+X+`;
#else
uniform `+W+" "+Y+" u_"+X+`;
#endif
`:`
#ifdef HAS_UNIFORM_u_`+X+`
    `+W+" "+Y+" "+X+" = u_"+X+`;
#endif
`})),vertexSource:x=x.replace(v,(function(U,$,W,Y,X){var le=Y==="float"?"vec2":"vec4",ve=X.match(/color/)?"color":le;return I[X]?$==="define"?`
#ifndef HAS_UNIFORM_u_`+X+`
uniform lowp float u_`+X+`_t;
attribute `+W+" "+le+" a_"+X+`;
varying `+W+" "+Y+" "+X+`;
#else
uniform `+W+" "+Y+" u_"+X+`;
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_`+X+`
    `+X+" = a_"+X+`;
#else
    `+W+" "+Y+" "+X+" = u_"+X+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+X+`
    `+X+" = unpack_mix_"+ve+"(a_"+X+", u_"+X+`_t);
#else
    `+W+" "+Y+" "+X+" = u_"+X+`;
#endif
`:$==="define"?`
#ifndef HAS_UNIFORM_u_`+X+`
uniform lowp float u_`+X+`_t;
attribute `+W+" "+le+" a_"+X+`;
#else
uniform `+W+" "+Y+" u_"+X+`;
#endif
`:ve==="vec4"?`
#ifndef HAS_UNIFORM_u_`+X+`
    `+W+" "+Y+" "+X+" = a_"+X+`;
#else
    `+W+" "+Y+" "+X+" = u_"+X+`;
#endif
`:`
#ifndef HAS_UNIFORM_u_`+X+`
    `+W+" "+Y+" "+X+" = unpack_mix_"+ve+"(a_"+X+", u_"+X+`_t);
#else
    `+W+" "+Y+" "+X+" = u_"+X+`;
#endif
`})),staticAttributes:d,staticUniforms:k}}var Bu=Object.freeze({__proto__:null,prelude:oc,background:eu,backgroundPattern:Ha,circle:Ul,clippingMask:tu,heatmap:Cc,heatmapTexture:wd,collisionBox:Cu,collisionCircle:Sl,debug:Zo,fill:jd,fillOutline:Al,fillOutlinePattern:Lo,fillPattern:Nd,fillExtrusion:Ts,fillExtrusionPattern:Fu,hillshadePrepare:Cl,hillshade:kc,line:lc,lineGradient:cc,linePattern:uc,lineSDF:kl,raster:dc,symbolIcon:ql,symbolSDF:rh,symbolTextAndIcon:Hh}),ku=function(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffer=null,this.vao=null};function ru(m){for(var x=[],v=0;v<m.length;v++)if(m[v]!==null){var d=m[v].split(" ");x.push(d.pop())}return x}ku.prototype.bind=function(m,x,v,d,y,N,k,I){this.context=m;for(var U=this.boundPaintVertexBuffers.length!==d.length,$=0;!U&&$<d.length;$++)this.boundPaintVertexBuffers[$]!==d[$]&&(U=!0);m.extVertexArrayObject&&this.vao&&this.boundProgram===x&&this.boundLayoutVertexBuffer===v&&!U&&this.boundIndexBuffer===y&&this.boundVertexOffset===N&&this.boundDynamicVertexBuffer===k&&this.boundDynamicVertexBuffer2===I?(m.bindVertexArrayOES.set(this.vao),k&&k.bind(),y&&y.dynamicDraw&&y.bind(),I&&I.bind()):this.freshBind(x,v,d,y,N,k,I)},ku.prototype.freshBind=function(m,x,v,d,y,N,k){var I,U=m.numAttributes,$=this.context,W=$.gl;if($.extVertexArrayObject)this.vao&&this.destroy(),this.vao=$.extVertexArrayObject.createVertexArrayOES(),$.bindVertexArrayOES.set(this.vao),I=0,this.boundProgram=m,this.boundLayoutVertexBuffer=x,this.boundPaintVertexBuffers=v,this.boundIndexBuffer=d,this.boundVertexOffset=y,this.boundDynamicVertexBuffer=N,this.boundDynamicVertexBuffer2=k;else{I=$.currentNumAttributes||0;for(var Y=U;Y<I;Y++)W.disableVertexAttribArray(Y)}x.enableAttributes(W,m);for(var X=0,le=v;X<le.length;X+=1)le[X].enableAttributes(W,m);N&&N.enableAttributes(W,m),k&&k.enableAttributes(W,m),x.bind(),x.setVertexAttribPointers(W,m,y);for(var ve=0,je=v;ve<je.length;ve+=1){var de=je[ve];de.bind(),de.setVertexAttribPointers(W,m,y)}N&&(N.bind(),N.setVertexAttribPointers(W,m,y)),d&&d.bind(),k&&(k.bind(),k.setVertexAttribPointers(W,m,y)),$.currentNumAttributes=U},ku.prototype.destroy=function(){this.vao&&(this.context.extVertexArrayObject.deleteVertexArrayOES(this.vao),this.vao=null)};var Uu=function(m,x,v,d,y,N){var k=m.gl;this.program=k.createProgram();for(var I=ru(v.staticAttributes),U=d?d.getBinderAttributes():[],$=I.concat(U),W=v.staticUniforms?ru(v.staticUniforms):[],Y=d?d.getBinderUniforms():[],X=[],le=0,ve=W.concat(Y);le<ve.length;le+=1){var je=ve[le];X.indexOf(je)<0&&X.push(je)}var de=d?d.defines():[];N&&de.push("#define OVERDRAW_INSPECTOR;");var Pe=de.concat(oc.fragmentSource,v.fragmentSource).join(`
`),Ie=de.concat(oc.vertexSource,v.vertexSource).join(`
`),Ae=k.createShader(k.FRAGMENT_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Ae,Pe),k.compileShader(Ae),k.attachShader(this.program,Ae);var Le=k.createShader(k.VERTEX_SHADER);if(k.isContextLost())this.failedToCreate=!0;else{k.shaderSource(Le,Ie),k.compileShader(Le),k.attachShader(this.program,Le),this.attributes={};var Ge={};this.numAttributes=$.length;for(var Xe=0;Xe<this.numAttributes;Xe++)$[Xe]&&(k.bindAttribLocation(this.program,Xe,$[Xe]),this.attributes[$[Xe]]=Xe);k.linkProgram(this.program),k.deleteShader(Le),k.deleteShader(Ae);for(var rt=0;rt<X.length;rt++){var yt=X[rt];if(yt&&!Ge[yt]){var mt=k.getUniformLocation(this.program,yt);mt&&(Ge[yt]=mt)}}this.fixedUniforms=y(m,Ge),this.binderUniforms=d?d.getUniforms(m,Ge):[]}}};function H(m,x,v){var d=1/Zn(v,1,x.transform.tileZoom),y=Math.pow(2,v.tileID.overscaledZ),N=v.tileSize*Math.pow(2,x.transform.tileZoom)/y,k=N*(v.tileID.canonical.x+v.tileID.wrap*y),I=N*v.tileID.canonical.y;return{u_image:0,u_texsize:v.imageAtlasTexture.size,u_scale:[d,m.fromScale,m.toScale],u_fade:m.t,u_pixel_coord_upper:[k>>16,I>>16],u_pixel_coord_lower:[65535&k,65535&I]}}Uu.prototype.draw=function(m,x,v,d,y,N,k,I,U,$,W,Y,X,le,ve,je){var de,Pe=m.gl;if(!this.failedToCreate){for(var Ie in m.program.set(this.program),m.setDepthMode(v),m.setStencilMode(d),m.setColorMode(y),m.setCullFace(N),this.fixedUniforms)this.fixedUniforms[Ie].set(k[Ie]);le&&le.setUniforms(m,this.binderUniforms,Y,{zoom:X});for(var Ae=(de={},de[Pe.LINES]=2,de[Pe.TRIANGLES]=3,de[Pe.LINE_STRIP]=1,de)[x],Le=0,Ge=W.get();Le<Ge.length;Le+=1){var Xe=Ge[Le],rt=Xe.vaos||(Xe.vaos={});(rt[I]||(rt[I]=new ku)).bind(m,this,U,le?le.getPaintVertexBuffers():[],$,Xe.vertexOffset,ve,je),Pe.drawElements(x,Xe.primitiveLength*Ae,Pe.UNSIGNED_SHORT,Xe.primitiveOffset*Ae*2)}}};var be=function(m,x,v,d){var y=x.style.light,N=y.properties.get("position"),k=[N.x,N.y,N.z],I=a.create$1();y.properties.get("anchor")==="viewport"&&a.fromRotation(I,-x.transform.angle),a.transformMat3(k,k,I);var U=y.properties.get("color");return{u_matrix:m,u_lightpos:k,u_lightintensity:y.properties.get("intensity"),u_lightcolor:[U.r,U.g,U.b],u_vertical_gradient:+v,u_opacity:d}},Ze=function(m,x,v,d,y,N,k){return a.extend(be(m,x,v,d),H(N,x,k),{u_height_factor:-Math.pow(2,y.overscaledZ)/k.tileSize/8})},dt=function(m){return{u_matrix:m}},vt=function(m,x,v,d){return a.extend(dt(m),H(v,x,d))},$t=function(m,x){return{u_matrix:m,u_world:x}},lr=function(m,x,v,d,y){return a.extend(vt(m,x,v,d),{u_world:y})},Or=function(m,x,v,d){var y,N,k=m.transform;if(d.paint.get("circle-pitch-alignment")==="map"){var I=Zn(v,1,k.zoom);y=!0,N=[I,I]}else y=!1,N=k.pixelsToGLUnits;return{u_camera_to_center_distance:k.cameraToCenterDistance,u_scale_with_map:+(d.paint.get("circle-pitch-scale")==="map"),u_matrix:m.translatePosMatrix(x.posMatrix,v,d.paint.get("circle-translate"),d.paint.get("circle-translate-anchor")),u_pitch_with_map:+y,u_device_pixel_ratio:a.browser.devicePixelRatio,u_extrude_scale:N}},Zr=function(m,x,v){var d=Zn(v,1,x.zoom),y=Math.pow(2,x.zoom-v.tileID.overscaledZ),N=v.tileID.overscaleFactor();return{u_matrix:m,u_camera_to_center_distance:x.cameraToCenterDistance,u_pixels_to_tile_units:d,u_extrude_scale:[x.pixelsToGLUnits[0]/(d*y),x.pixelsToGLUnits[1]/(d*y)],u_overscale_factor:N}},Pn=function(m,x,v){return{u_matrix:m,u_inv_matrix:x,u_camera_to_center_distance:v.cameraToCenterDistance,u_viewport_size:[v.width,v.height]}},dn=function(m,x,v){return v===void 0&&(v=1),{u_matrix:m,u_color:x,u_overlay:0,u_overlay_scale:v}},Kn=function(m){return{u_matrix:m}},_s=function(m,x,v,d){return{u_matrix:m,u_extrude_scale:Zn(x,1,v),u_intensity:d}},ts=function(m,x,v){var d=m.transform;return{u_matrix:Ko(m,x,v),u_ratio:1/Zn(x,1,d.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_units_to_pixels:[1/d.pixelsToGLUnits[0],1/d.pixelsToGLUnits[1]]}},Sn=function(m,x,v,d){return a.extend(ts(m,x,v),{u_image:0,u_image_height:d})},ba=function(m,x,v,d){var y=m.transform,N=oa(x,y);return{u_matrix:Ko(m,x,v),u_texsize:x.imageAtlasTexture.size,u_ratio:1/Zn(x,1,y.zoom),u_device_pixel_ratio:a.browser.devicePixelRatio,u_image:0,u_scale:[N,d.fromScale,d.toScale],u_fade:d.t,u_units_to_pixels:[1/y.pixelsToGLUnits[0],1/y.pixelsToGLUnits[1]]}},Ea=function(m,x,v,d,y){var N=m.lineAtlas,k=oa(x,m.transform),I=v.layout.get("line-cap")==="round",U=N.getDash(d.from,I),$=N.getDash(d.to,I),W=U.width*y.fromScale,Y=$.width*y.toScale;return a.extend(ts(m,x,v),{u_patternscale_a:[k/W,-U.height/2],u_patternscale_b:[k/Y,-$.height/2],u_sdfgamma:N.width/(256*Math.min(W,Y)*a.browser.devicePixelRatio)/2,u_image:0,u_tex_y_a:U.y,u_tex_y_b:$.y,u_mix:y.t})};function oa(m,x){return 1/Zn(m,1,x.tileZoom)}function Ko(m,x,v){return m.translatePosMatrix(x.tileID.posMatrix,x,v.paint.get("line-translate"),v.paint.get("line-translate-anchor"))}var Ec=function(m,x,v,d,y){return{u_matrix:m,u_tl_parent:x,u_scale_parent:v,u_buffer_scale:1,u_fade_t:d.mix,u_opacity:d.opacity*y.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:y.paint.get("raster-brightness-min"),u_brightness_high:y.paint.get("raster-brightness-max"),u_saturation_factor:(k=y.paint.get("raster-saturation"),k>0?1-1/(1.001-k):-k),u_contrast_factor:(N=y.paint.get("raster-contrast"),N>0?1/(1-N):1+N),u_spin_weights:nh(y.paint.get("raster-hue-rotate"))};var N,k};function nh(m){m*=Math.PI/180;var x=Math.sin(m),v=Math.cos(m);return[(2*v+1)/3,(-Math.sqrt(3)*x-v+1)/3,(Math.sqrt(3)*x-v+1)/3]}var nu,hc=function(m,x,v,d,y,N,k,I,U,$){var W=y.transform;return{u_is_size_zoom_constant:+(m==="constant"||m==="source"),u_is_size_feature_constant:+(m==="constant"||m==="camera"),u_size_t:x?x.uSizeT:0,u_size:x?x.uSize:0,u_camera_to_center_distance:W.cameraToCenterDistance,u_pitch:W.pitch/360*2*Math.PI,u_rotate_symbol:+v,u_aspect_ratio:W.width/W.height,u_fade_change:y.options.fadeDuration?y.symbolFadeChange:1,u_matrix:N,u_label_plane_matrix:k,u_coord_matrix:I,u_is_text:+U,u_pitch_with_map:+d,u_texsize:$,u_texture:0}},Xo=function(m,x,v,d,y,N,k,I,U,$,W){var Y=y.transform;return a.extend(hc(m,x,v,d,y,N,k,I,U,$),{u_gamma_scale:d?Math.cos(Y._pitch)*Y.cameraToCenterDistance:1,u_device_pixel_ratio:a.browser.devicePixelRatio,u_is_halo:1})},Vl=function(m,x,v,d,y,N,k,I,U,$){return a.extend(Xo(m,x,v,d,y,N,k,I,!0,U),{u_texsize_icon:$,u_texture_icon:1})},iu=function(m,x,v){return{u_matrix:m,u_opacity:x,u_color:v}},Jo=function(m,x,v,d,y,N){return a.extend((function(k,I,U,$){var W=U.imageManager.getPattern(k.from.toString()),Y=U.imageManager.getPattern(k.to.toString()),X=U.imageManager.getPixelSize(),le=X.width,ve=X.height,je=Math.pow(2,$.tileID.overscaledZ),de=$.tileSize*Math.pow(2,U.transform.tileZoom)/je,Pe=de*($.tileID.canonical.x+$.tileID.wrap*je),Ie=de*$.tileID.canonical.y;return{u_image:0,u_pattern_tl_a:W.tl,u_pattern_br_a:W.br,u_pattern_tl_b:Y.tl,u_pattern_br_b:Y.br,u_texsize:[le,ve],u_mix:I.t,u_pattern_size_a:W.displaySize,u_pattern_size_b:Y.displaySize,u_scale_a:I.fromScale,u_scale_b:I.toScale,u_tile_units_to_pixels:1/Zn($,1,U.transform.tileZoom),u_pixel_coord_upper:[Pe>>16,Ie>>16],u_pixel_coord_lower:[65535&Pe,65535&Ie]}})(d,N,v,y),{u_matrix:m,u_opacity:x})},Ta={fillExtrusion:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_lightpos:new a.Uniform3f(m,x.u_lightpos),u_lightintensity:new a.Uniform1f(m,x.u_lightintensity),u_lightcolor:new a.Uniform3f(m,x.u_lightcolor),u_vertical_gradient:new a.Uniform1f(m,x.u_vertical_gradient),u_opacity:new a.Uniform1f(m,x.u_opacity)}},fillExtrusionPattern:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_lightpos:new a.Uniform3f(m,x.u_lightpos),u_lightintensity:new a.Uniform1f(m,x.u_lightintensity),u_lightcolor:new a.Uniform3f(m,x.u_lightcolor),u_vertical_gradient:new a.Uniform1f(m,x.u_vertical_gradient),u_height_factor:new a.Uniform1f(m,x.u_height_factor),u_image:new a.Uniform1i(m,x.u_image),u_texsize:new a.Uniform2f(m,x.u_texsize),u_pixel_coord_upper:new a.Uniform2f(m,x.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,x.u_pixel_coord_lower),u_scale:new a.Uniform3f(m,x.u_scale),u_fade:new a.Uniform1f(m,x.u_fade),u_opacity:new a.Uniform1f(m,x.u_opacity)}},fill:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix)}},fillPattern:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_image:new a.Uniform1i(m,x.u_image),u_texsize:new a.Uniform2f(m,x.u_texsize),u_pixel_coord_upper:new a.Uniform2f(m,x.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,x.u_pixel_coord_lower),u_scale:new a.Uniform3f(m,x.u_scale),u_fade:new a.Uniform1f(m,x.u_fade)}},fillOutline:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_world:new a.Uniform2f(m,x.u_world)}},fillOutlinePattern:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_world:new a.Uniform2f(m,x.u_world),u_image:new a.Uniform1i(m,x.u_image),u_texsize:new a.Uniform2f(m,x.u_texsize),u_pixel_coord_upper:new a.Uniform2f(m,x.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,x.u_pixel_coord_lower),u_scale:new a.Uniform3f(m,x.u_scale),u_fade:new a.Uniform1f(m,x.u_fade)}},circle:function(m,x){return{u_camera_to_center_distance:new a.Uniform1f(m,x.u_camera_to_center_distance),u_scale_with_map:new a.Uniform1i(m,x.u_scale_with_map),u_pitch_with_map:new a.Uniform1i(m,x.u_pitch_with_map),u_extrude_scale:new a.Uniform2f(m,x.u_extrude_scale),u_device_pixel_ratio:new a.Uniform1f(m,x.u_device_pixel_ratio),u_matrix:new a.UniformMatrix4f(m,x.u_matrix)}},collisionBox:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_camera_to_center_distance:new a.Uniform1f(m,x.u_camera_to_center_distance),u_pixels_to_tile_units:new a.Uniform1f(m,x.u_pixels_to_tile_units),u_extrude_scale:new a.Uniform2f(m,x.u_extrude_scale),u_overscale_factor:new a.Uniform1f(m,x.u_overscale_factor)}},collisionCircle:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_inv_matrix:new a.UniformMatrix4f(m,x.u_inv_matrix),u_camera_to_center_distance:new a.Uniform1f(m,x.u_camera_to_center_distance),u_viewport_size:new a.Uniform2f(m,x.u_viewport_size)}},debug:function(m,x){return{u_color:new a.UniformColor(m,x.u_color),u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_overlay:new a.Uniform1i(m,x.u_overlay),u_overlay_scale:new a.Uniform1f(m,x.u_overlay_scale)}},clippingMask:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix)}},heatmap:function(m,x){return{u_extrude_scale:new a.Uniform1f(m,x.u_extrude_scale),u_intensity:new a.Uniform1f(m,x.u_intensity),u_matrix:new a.UniformMatrix4f(m,x.u_matrix)}},heatmapTexture:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_world:new a.Uniform2f(m,x.u_world),u_image:new a.Uniform1i(m,x.u_image),u_color_ramp:new a.Uniform1i(m,x.u_color_ramp),u_opacity:new a.Uniform1f(m,x.u_opacity)}},hillshade:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_image:new a.Uniform1i(m,x.u_image),u_latrange:new a.Uniform2f(m,x.u_latrange),u_light:new a.Uniform2f(m,x.u_light),u_shadow:new a.UniformColor(m,x.u_shadow),u_highlight:new a.UniformColor(m,x.u_highlight),u_accent:new a.UniformColor(m,x.u_accent)}},hillshadePrepare:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_image:new a.Uniform1i(m,x.u_image),u_dimension:new a.Uniform2f(m,x.u_dimension),u_zoom:new a.Uniform1f(m,x.u_zoom),u_unpack:new a.Uniform4f(m,x.u_unpack)}},line:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_ratio:new a.Uniform1f(m,x.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,x.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(m,x.u_units_to_pixels)}},lineGradient:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_ratio:new a.Uniform1f(m,x.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,x.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(m,x.u_units_to_pixels),u_image:new a.Uniform1i(m,x.u_image),u_image_height:new a.Uniform1f(m,x.u_image_height)}},linePattern:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_texsize:new a.Uniform2f(m,x.u_texsize),u_ratio:new a.Uniform1f(m,x.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,x.u_device_pixel_ratio),u_image:new a.Uniform1i(m,x.u_image),u_units_to_pixels:new a.Uniform2f(m,x.u_units_to_pixels),u_scale:new a.Uniform3f(m,x.u_scale),u_fade:new a.Uniform1f(m,x.u_fade)}},lineSDF:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_ratio:new a.Uniform1f(m,x.u_ratio),u_device_pixel_ratio:new a.Uniform1f(m,x.u_device_pixel_ratio),u_units_to_pixels:new a.Uniform2f(m,x.u_units_to_pixels),u_patternscale_a:new a.Uniform2f(m,x.u_patternscale_a),u_patternscale_b:new a.Uniform2f(m,x.u_patternscale_b),u_sdfgamma:new a.Uniform1f(m,x.u_sdfgamma),u_image:new a.Uniform1i(m,x.u_image),u_tex_y_a:new a.Uniform1f(m,x.u_tex_y_a),u_tex_y_b:new a.Uniform1f(m,x.u_tex_y_b),u_mix:new a.Uniform1f(m,x.u_mix)}},raster:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_tl_parent:new a.Uniform2f(m,x.u_tl_parent),u_scale_parent:new a.Uniform1f(m,x.u_scale_parent),u_buffer_scale:new a.Uniform1f(m,x.u_buffer_scale),u_fade_t:new a.Uniform1f(m,x.u_fade_t),u_opacity:new a.Uniform1f(m,x.u_opacity),u_image0:new a.Uniform1i(m,x.u_image0),u_image1:new a.Uniform1i(m,x.u_image1),u_brightness_low:new a.Uniform1f(m,x.u_brightness_low),u_brightness_high:new a.Uniform1f(m,x.u_brightness_high),u_saturation_factor:new a.Uniform1f(m,x.u_saturation_factor),u_contrast_factor:new a.Uniform1f(m,x.u_contrast_factor),u_spin_weights:new a.Uniform3f(m,x.u_spin_weights)}},symbolIcon:function(m,x){return{u_is_size_zoom_constant:new a.Uniform1i(m,x.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(m,x.u_is_size_feature_constant),u_size_t:new a.Uniform1f(m,x.u_size_t),u_size:new a.Uniform1f(m,x.u_size),u_camera_to_center_distance:new a.Uniform1f(m,x.u_camera_to_center_distance),u_pitch:new a.Uniform1f(m,x.u_pitch),u_rotate_symbol:new a.Uniform1i(m,x.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(m,x.u_aspect_ratio),u_fade_change:new a.Uniform1f(m,x.u_fade_change),u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(m,x.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(m,x.u_coord_matrix),u_is_text:new a.Uniform1i(m,x.u_is_text),u_pitch_with_map:new a.Uniform1i(m,x.u_pitch_with_map),u_texsize:new a.Uniform2f(m,x.u_texsize),u_texture:new a.Uniform1i(m,x.u_texture)}},symbolSDF:function(m,x){return{u_is_size_zoom_constant:new a.Uniform1i(m,x.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(m,x.u_is_size_feature_constant),u_size_t:new a.Uniform1f(m,x.u_size_t),u_size:new a.Uniform1f(m,x.u_size),u_camera_to_center_distance:new a.Uniform1f(m,x.u_camera_to_center_distance),u_pitch:new a.Uniform1f(m,x.u_pitch),u_rotate_symbol:new a.Uniform1i(m,x.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(m,x.u_aspect_ratio),u_fade_change:new a.Uniform1f(m,x.u_fade_change),u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(m,x.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(m,x.u_coord_matrix),u_is_text:new a.Uniform1i(m,x.u_is_text),u_pitch_with_map:new a.Uniform1i(m,x.u_pitch_with_map),u_texsize:new a.Uniform2f(m,x.u_texsize),u_texture:new a.Uniform1i(m,x.u_texture),u_gamma_scale:new a.Uniform1f(m,x.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(m,x.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(m,x.u_is_halo)}},symbolTextAndIcon:function(m,x){return{u_is_size_zoom_constant:new a.Uniform1i(m,x.u_is_size_zoom_constant),u_is_size_feature_constant:new a.Uniform1i(m,x.u_is_size_feature_constant),u_size_t:new a.Uniform1f(m,x.u_size_t),u_size:new a.Uniform1f(m,x.u_size),u_camera_to_center_distance:new a.Uniform1f(m,x.u_camera_to_center_distance),u_pitch:new a.Uniform1f(m,x.u_pitch),u_rotate_symbol:new a.Uniform1i(m,x.u_rotate_symbol),u_aspect_ratio:new a.Uniform1f(m,x.u_aspect_ratio),u_fade_change:new a.Uniform1f(m,x.u_fade_change),u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_label_plane_matrix:new a.UniformMatrix4f(m,x.u_label_plane_matrix),u_coord_matrix:new a.UniformMatrix4f(m,x.u_coord_matrix),u_is_text:new a.Uniform1i(m,x.u_is_text),u_pitch_with_map:new a.Uniform1i(m,x.u_pitch_with_map),u_texsize:new a.Uniform2f(m,x.u_texsize),u_texsize_icon:new a.Uniform2f(m,x.u_texsize_icon),u_texture:new a.Uniform1i(m,x.u_texture),u_texture_icon:new a.Uniform1i(m,x.u_texture_icon),u_gamma_scale:new a.Uniform1f(m,x.u_gamma_scale),u_device_pixel_ratio:new a.Uniform1f(m,x.u_device_pixel_ratio),u_is_halo:new a.Uniform1i(m,x.u_is_halo)}},background:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_opacity:new a.Uniform1f(m,x.u_opacity),u_color:new a.UniformColor(m,x.u_color)}},backgroundPattern:function(m,x){return{u_matrix:new a.UniformMatrix4f(m,x.u_matrix),u_opacity:new a.Uniform1f(m,x.u_opacity),u_image:new a.Uniform1i(m,x.u_image),u_pattern_tl_a:new a.Uniform2f(m,x.u_pattern_tl_a),u_pattern_br_a:new a.Uniform2f(m,x.u_pattern_br_a),u_pattern_tl_b:new a.Uniform2f(m,x.u_pattern_tl_b),u_pattern_br_b:new a.Uniform2f(m,x.u_pattern_br_b),u_texsize:new a.Uniform2f(m,x.u_texsize),u_mix:new a.Uniform1f(m,x.u_mix),u_pattern_size_a:new a.Uniform2f(m,x.u_pattern_size_a),u_pattern_size_b:new a.Uniform2f(m,x.u_pattern_size_b),u_scale_a:new a.Uniform1f(m,x.u_scale_a),u_scale_b:new a.Uniform1f(m,x.u_scale_b),u_pixel_coord_upper:new a.Uniform2f(m,x.u_pixel_coord_upper),u_pixel_coord_lower:new a.Uniform2f(m,x.u_pixel_coord_lower),u_tile_units_to_pixels:new a.Uniform1f(m,x.u_tile_units_to_pixels)}}};function $l(m,x,v,d,y,N,k){for(var I=m.context,U=I.gl,$=m.useProgram("collisionBox"),W=[],Y=0,X=0,le=0;le<d.length;le++){var ve=d[le],je=x.getTile(ve),de=je.getBucket(v);if(de){var Pe=ve.posMatrix;y[0]===0&&y[1]===0||(Pe=m.translatePosMatrix(ve.posMatrix,je,y,N));var Ie=k?de.textCollisionBox:de.iconCollisionBox,Ae=de.collisionCircleArray;if(Ae.length>0){var Le=a.create(),Ge=Pe;a.mul(Le,de.placementInvProjMatrix,m.transform.glCoordMatrix),a.mul(Le,Le,de.placementViewportMatrix),W.push({circleArray:Ae,circleOffset:X,transform:Ge,invTransform:Le}),X=Y+=Ae.length/4}Ie&&$.draw(I,U.LINES,Te.disabled,De.disabled,m.colorModeForRenderPass(),nt.disabled,Zr(Pe,m.transform,je),v.id,Ie.layoutVertexBuffer,Ie.indexBuffer,Ie.segments,null,m.transform.zoom,null,null,Ie.collisionVertexBuffer)}}if(k&&W.length){var Xe=m.useProgram("collisionCircle"),rt=new a.StructArrayLayout2f1f2i16;rt.resize(4*Y),rt._trim();for(var yt=0,mt=0,Dt=W;mt<Dt.length;mt+=1)for(var Rt=Dt[mt],vr=0;vr<Rt.circleArray.length/4;vr++){var hr=4*vr,Fr=Rt.circleArray[hr+0],Yt=Rt.circleArray[hr+1],Sr=Rt.circleArray[hr+2],Pr=Rt.circleArray[hr+3];rt.emplace(yt++,Fr,Yt,Sr,Pr,0),rt.emplace(yt++,Fr,Yt,Sr,Pr,1),rt.emplace(yt++,Fr,Yt,Sr,Pr,2),rt.emplace(yt++,Fr,Yt,Sr,Pr,3)}(!nu||nu.length<2*Y)&&(nu=(function(Jn){var Fi=2*Jn,ui=new a.StructArrayLayout3ui6;ui.resize(Fi),ui._trim();for(var In=0;In<Fi;In++){var Qn=6*In;ui.uint16[Qn+0]=4*In+0,ui.uint16[Qn+1]=4*In+1,ui.uint16[Qn+2]=4*In+2,ui.uint16[Qn+3]=4*In+2,ui.uint16[Qn+4]=4*In+3,ui.uint16[Qn+5]=4*In+0}return ui})(Y));for(var ir=I.createIndexBuffer(nu,!0),Ar=I.createVertexBuffer(rt,a.collisionCircleLayout.members,!0),Gr=0,Tr=W;Gr<Tr.length;Gr+=1){var Rr=Tr[Gr],vn=Pn(Rr.transform,Rr.invTransform,m.transform);Xe.draw(I,U.TRIANGLES,Te.disabled,De.disabled,m.colorModeForRenderPass(),nt.disabled,vn,v.id,Ar,ir,a.SegmentVector.simpleSegment(0,2*Rr.circleOffset,Rr.circleArray.length,Rr.circleArray.length/2),null,m.transform.zoom,null,null,null)}Ar.destroy(),ir.destroy()}}var Ga=a.identity(new Float32Array(16));function su(m,x,v,d,y,N){var k=a.getAnchorAlignment(m),I=-(k.horizontalAlign-.5)*x,U=-(k.verticalAlign-.5)*v,$=a.evaluateVariableOffset(m,d);return new a.Point((I/y+$[0])*N,(U/y+$[1])*N)}function qu(m,x,v,d,y,N,k,I,U,$,W){var Y=m.text.placedSymbolArray,X=m.text.dynamicLayoutVertexArray,le=m.icon.dynamicLayoutVertexArray,ve={};X.clear();for(var je=0;je<Y.length;je++){var de=Y.get(je),Pe=de.hidden||!de.crossTileID||m.allowVerticalPlacement&&!de.placedOrientation?null:d[de.crossTileID];if(Pe){var Ie=new a.Point(de.anchorX,de.anchorY),Ae=Fn(Ie,v?I:k),Le=Yn(N.cameraToCenterDistance,Ae.signedDistanceFromCamera),Ge=y.evaluateSizeForFeature(m.textSizeData,$,de)*Le/a.ONE_EM;v&&(Ge*=m.tilePixelRatio/U);for(var Xe=su(Pe.anchor,Pe.width,Pe.height,Pe.textOffset,Pe.textBoxScale,Ge),rt=v?Fn(Ie.add(Xe),k).point:Ae.point.add(x?Xe.rotate(-N.angle):Xe),yt=m.allowVerticalPlacement&&de.placedOrientation===a.WritingMode.vertical?Math.PI/2:0,mt=0;mt<de.numGlyphs;mt++)a.addDynamicAttributes(X,rt,yt);W&&de.associatedIconIndex>=0&&(ve[de.associatedIconIndex]={shiftedAnchor:rt,angle:yt})}else ya(de.numGlyphs,X)}if(W){le.clear();for(var Dt=m.icon.placedSymbolArray,Rt=0;Rt<Dt.length;Rt++){var vr=Dt.get(Rt);if(vr.hidden)ya(vr.numGlyphs,le);else{var hr=ve[Rt];if(hr)for(var Fr=0;Fr<vr.numGlyphs;Fr++)a.addDynamicAttributes(le,hr.shiftedAnchor,hr.angle);else ya(vr.numGlyphs,le)}}m.icon.dynamicLayoutVertexBuffer.updateData(le)}m.text.dynamicLayoutVertexBuffer.updateData(X)}function yo(m,x,v){return v.iconsInText&&x?"symbolTextAndIcon":m?"symbolSDF":"symbolIcon"}function Tc(m,x,v,d,y,N,k,I,U,$,W,Y){for(var X=m.context,le=X.gl,ve=m.transform,je=I==="map",de=U==="map",Pe=je&&v.layout.get("symbol-placement")!=="point",Ie=je&&!de&&!Pe,Ae=v.layout.get("symbol-sort-key").constantOr(1)!==void 0,Le=!1,Ge=m.depthModeForSublayer(0,Te.ReadOnly),Xe=v.layout.get("text-variable-anchor"),rt=[],yt=0,mt=d;yt<mt.length;yt+=1){var Dt=mt[yt],Rt=x.getTile(Dt),vr=Rt.getBucket(v);if(vr){var hr=y?vr.text:vr.icon;if(hr&&hr.segments.get().length){var Fr=hr.programConfigurations.get(v.id),Yt=y||vr.sdfIcons,Sr=y?vr.textSizeData:vr.iconSizeData,Pr=de||ve.pitch!==0,ir=m.useProgram(yo(Yt,y,vr),Fr),Ar=a.evaluateSizeForZoom(Sr,ve.zoom),Gr=void 0,Tr=[0,0],Rr=void 0,vn=void 0,Jn=null,Fi=void 0;if(y)Rr=Rt.glyphAtlasTexture,vn=le.LINEAR,Gr=Rt.glyphAtlasTexture.size,vr.iconsInText&&(Tr=Rt.imageAtlasTexture.size,Jn=Rt.imageAtlasTexture,Fi=Pr||m.options.rotating||m.options.zooming||Sr.kind==="composite"||Sr.kind==="camera"?le.LINEAR:le.NEAREST);else{var ui=v.layout.get("icon-size").constantOr(0)!==1||vr.iconsNeedLinear;Rr=Rt.imageAtlasTexture,vn=Yt||m.options.rotating||m.options.zooming||ui||Pr?le.LINEAR:le.NEAREST,Gr=Rt.imageAtlasTexture.size}var In=Zn(Rt,1,m.transform.zoom),Qn=Ii(Dt.posMatrix,de,je,m.transform,In),us=Hn(Dt.posMatrix,de,je,m.transform,In),rs=Xe&&vr.hasTextData(),ns=v.layout.get("icon-text-fit")!=="none"&&rs&&vr.hasIconData();Pe&&Nc(vr,Dt.posMatrix,m,y,Qn,us,de,$);var vi=m.translatePosMatrix(Dt.posMatrix,Rt,N,k),Yi=Pe||y&&Xe||ns?Ga:Qn,Ds=m.translatePosMatrix(us,Rt,N,k,!0),ll=Yt&&v.paint.get(y?"text-halo-width":"icon-halo-width").constantOr(1)!==0,Zi={program:ir,buffers:hr,uniformValues:Yt?vr.iconsInText?Vl(Sr.kind,Ar,Ie,de,m,vi,Yi,Ds,Gr,Tr):Xo(Sr.kind,Ar,Ie,de,m,vi,Yi,Ds,y,Gr):hc(Sr.kind,Ar,Ie,de,m,vi,Yi,Ds,y,Gr),atlasTexture:Rr,atlasTextureIcon:Jn,atlasInterpolation:vn,atlasInterpolationIcon:Fi,isSDF:Yt,hasHalo:ll};if(Ae&&vr.canOverlap){Le=!0;for(var io=0,za=hr.segments.get();io<za.length;io+=1){var ds=za[io];rt.push({segments:new a.SegmentVector([ds]),sortKey:ds.sortKey,state:Zi})}}else rt.push({segments:hr.segments,sortKey:0,state:Zi})}}}Le&&rt.sort((function(No,Il){return No.sortKey-Il.sortKey}));for(var jo=0,so=rt;jo<so.length;jo+=1){var hn=so[jo],sn=hn.state;if(X.activeTexture.set(le.TEXTURE0),sn.atlasTexture.bind(sn.atlasInterpolation,le.CLAMP_TO_EDGE),sn.atlasTextureIcon&&(X.activeTexture.set(le.TEXTURE1),sn.atlasTextureIcon&&sn.atlasTextureIcon.bind(sn.atlasInterpolationIcon,le.CLAMP_TO_EDGE)),sn.isSDF){var Ni=sn.uniformValues;sn.hasHalo&&(Ni.u_is_halo=1,au(sn.buffers,hn.segments,v,m,sn.program,Ge,W,Y,Ni)),Ni.u_is_halo=0}au(sn.buffers,hn.segments,v,m,sn.program,Ge,W,Y,sn.uniformValues)}}function au(m,x,v,d,y,N,k,I,U){var $=d.context;y.draw($,$.gl.TRIANGLES,N,k,I,nt.disabled,U,v.id,m.layoutVertexBuffer,m.indexBuffer,x,v.paint,d.transform.zoom,m.programConfigurations.get(v.id),m.dynamicLayoutVertexBuffer,m.opacityVertexBuffer)}function Vu(m,x,v,d,y,N,k){var I,U,$,W,Y,X=m.context.gl,le=v.paint.get("fill-pattern"),ve=le&&le.constantOr(1),je=v.getCrossfadeParameters();k?(U=ve&&!v.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",I=X.LINES):(U=ve?"fillPattern":"fill",I=X.TRIANGLES);for(var de=0,Pe=d;de<Pe.length;de+=1){var Ie=Pe[de],Ae=x.getTile(Ie);if(!ve||Ae.patternsLoaded()){var Le=Ae.getBucket(v);if(Le){var Ge=Le.programConfigurations.get(v.id),Xe=m.useProgram(U,Ge);ve&&(m.context.activeTexture.set(X.TEXTURE0),Ae.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),Ge.updatePaintBuffers(je));var rt=le.constantOr(null);if(rt&&Ae.imageAtlas){var yt=Ae.imageAtlas,mt=yt.patternPositions[rt.to.toString()],Dt=yt.patternPositions[rt.from.toString()];mt&&Dt&&Ge.setConstantPatternPositions(mt,Dt)}var Rt=m.translatePosMatrix(Ie.posMatrix,Ae,v.paint.get("fill-translate"),v.paint.get("fill-translate-anchor"));if(k){W=Le.indexBuffer2,Y=Le.segments2;var vr=[X.drawingBufferWidth,X.drawingBufferHeight];$=U==="fillOutlinePattern"&&ve?lr(Rt,m,je,Ae,vr):$t(Rt,vr)}else W=Le.indexBuffer,Y=Le.segments,$=ve?vt(Rt,m,je,Ae):dt(Rt);Xe.draw(m.context,I,y,m.stencilModeForClipping(Ie),N,nt.disabled,$,v.id,Le.layoutVertexBuffer,W,Y,v.paint,m.transform.zoom,Ge)}}}}function Qo(m,x,v,d,y,N,k){for(var I=m.context,U=I.gl,$=v.paint.get("fill-extrusion-pattern"),W=$.constantOr(1),Y=v.getCrossfadeParameters(),X=v.paint.get("fill-extrusion-opacity"),le=0,ve=d;le<ve.length;le+=1){var je=ve[le],de=x.getTile(je),Pe=de.getBucket(v);if(Pe){var Ie=Pe.programConfigurations.get(v.id),Ae=m.useProgram(W?"fillExtrusionPattern":"fillExtrusion",Ie);W&&(m.context.activeTexture.set(U.TEXTURE0),de.imageAtlasTexture.bind(U.LINEAR,U.CLAMP_TO_EDGE),Ie.updatePaintBuffers(Y));var Le=$.constantOr(null);if(Le&&de.imageAtlas){var Ge=de.imageAtlas,Xe=Ge.patternPositions[Le.to.toString()],rt=Ge.patternPositions[Le.from.toString()];Xe&&rt&&Ie.setConstantPatternPositions(Xe,rt)}var yt=m.translatePosMatrix(je.posMatrix,de,v.paint.get("fill-extrusion-translate"),v.paint.get("fill-extrusion-translate-anchor")),mt=v.paint.get("fill-extrusion-vertical-gradient"),Dt=W?Ze(yt,m,mt,X,je,Y,de):be(yt,m,mt,X);Ae.draw(I,I.gl.TRIANGLES,y,N,k,nt.backCCW,Dt,v.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,v.paint,m.transform.zoom,Ie)}}}function ou(m,x,v,d,y,N){var k=m.context,I=k.gl,U=x.fbo;if(U){var $=m.useProgram("hillshade");k.activeTexture.set(I.TEXTURE0),I.bindTexture(I.TEXTURE_2D,U.colorAttachment.get());var W=(function(Y,X,le){var ve=le.paint.get("hillshade-shadow-color"),je=le.paint.get("hillshade-highlight-color"),de=le.paint.get("hillshade-accent-color"),Pe=le.paint.get("hillshade-illumination-direction")*(Math.PI/180);le.paint.get("hillshade-illumination-anchor")==="viewport"&&(Pe-=Y.transform.angle);var Ie,Ae,Le,Ge=!Y.options.moving;return{u_matrix:Y.transform.calculatePosMatrix(X.tileID.toUnwrapped(),Ge),u_image:0,u_latrange:(Ie=X.tileID,Ae=Math.pow(2,Ie.canonical.z),Le=Ie.canonical.y,[new a.MercatorCoordinate(0,Le/Ae).toLngLat().lat,new a.MercatorCoordinate(0,(Le+1)/Ae).toLngLat().lat]),u_light:[le.paint.get("hillshade-exaggeration"),Pe],u_shadow:ve,u_highlight:je,u_accent:de}})(m,x,v);$.draw(k,I.TRIANGLES,d,y,N,nt.disabled,W,v.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}}function Gh(m,x,v,d,y,N){var k=m.context,I=k.gl,U=x.dem;if(U&&U.data){var $=U.dim,W=U.stride,Y=U.getPixels();if(k.activeTexture.set(I.TEXTURE1),k.pixelStoreUnpackPremultiplyAlpha.set(!1),x.demTexture=x.demTexture||m.getTileTexture(W),x.demTexture){var X=x.demTexture;X.update(Y,{premultiply:!1}),X.bind(I.NEAREST,I.CLAMP_TO_EDGE)}else x.demTexture=new a.Texture(k,Y,I.RGBA,{premultiply:!1}),x.demTexture.bind(I.NEAREST,I.CLAMP_TO_EDGE);k.activeTexture.set(I.TEXTURE0);var le=x.fbo;if(!le){var ve=new a.Texture(k,{width:$,height:$,data:null},I.RGBA);ve.bind(I.LINEAR,I.CLAMP_TO_EDGE),(le=x.fbo=k.createFramebuffer($,$,!0)).colorAttachment.set(ve.texture)}k.bindFramebuffer.set(le.framebuffer),k.viewport.set([0,0,$,$]),m.useProgram("hillshadePrepare").draw(k,I.TRIANGLES,d,y,N,nt.disabled,(function(je,de){var Pe=de.stride,Ie=a.create();return a.ortho(Ie,0,a.EXTENT,-a.EXTENT,0,0,1),a.translate(Ie,Ie,[0,-a.EXTENT,0]),{u_matrix:Ie,u_image:1,u_dimension:[Pe,Pe],u_zoom:je.overscaledZ,u_unpack:de.getUnpackVector()}})(x.tileID,U),v.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments),x.needsHillshadePrepare=!1}}function Pa(m,x,v,d,y){var N=d.paint.get("raster-fade-duration");if(N>0){var k=a.browser.now(),I=(k-m.timeAdded)/N,U=x?(k-x.timeAdded)/N:-1,$=v.getSource(),W=y.coveringZoomLevel({tileSize:$.tileSize,roundZoom:$.roundZoom}),Y=!x||Math.abs(x.tileID.overscaledZ-W)>Math.abs(m.tileID.overscaledZ-W),X=Y&&m.refreshedUponExpiration?1:a.clamp(Y?I:1-U,0,1);return m.refreshedUponExpiration&&I>=1&&(m.refreshedUponExpiration=!1),x?{opacity:1,mix:1-X}:{opacity:X,mix:0}}return{opacity:1,mix:0}}var el=new a.Color(1,0,0,1),lu=new a.Color(0,1,0,1),xo=new a.Color(0,0,1,1),Ra=new a.Color(1,0,1,1),fc=new a.Color(0,1,1,1);function El(m,x,v,d){Mo(m,0,x+v/2,m.transform.width,v,d)}function pc(m,x,v,d){Mo(m,x-v/2,0,v,m.transform.height,d)}function Mo(m,x,v,d,y,N){var k=m.context,I=k.gl;I.enable(I.SCISSOR_TEST),I.scissor(x*a.browser.devicePixelRatio,v*a.browser.devicePixelRatio,d*a.browser.devicePixelRatio,y*a.browser.devicePixelRatio),k.clear({color:N}),I.disable(I.SCISSOR_TEST)}function Hl(m,x,v){var d=m.context,y=d.gl,N=v.posMatrix,k=m.useProgram("debug"),I=Te.disabled,U=De.disabled,$=m.colorModeForRenderPass();d.activeTexture.set(y.TEXTURE0),m.emptyTexture.bind(y.LINEAR,y.CLAMP_TO_EDGE),k.draw(d,y.LINE_STRIP,I,U,$,nt.disabled,dn(N,a.Color.red),"$debug",m.debugBuffer,m.tileBorderIndexBuffer,m.debugSegments);var W=x.getTileByID(v.key).latestRawTileData,Y=Math.floor((W&&W.byteLength||0)/1024),X=x.getTile(v).tileSize,le=512/Math.min(X,512)*(v.overscaledZ/m.transform.zoom)*.5,ve=v.canonical.toString();v.overscaledZ!==v.canonical.z&&(ve+=" => "+v.overscaledZ),(function(je,de){je.initDebugOverlayCanvas();var Pe=je.debugOverlayCanvas,Ie=je.context.gl,Ae=je.debugOverlayCanvas.getContext("2d");Ae.clearRect(0,0,Pe.width,Pe.height),Ae.shadowColor="white",Ae.shadowBlur=2,Ae.lineWidth=1.5,Ae.strokeStyle="white",Ae.textBaseline="top",Ae.font="bold 36px Open Sans, sans-serif",Ae.fillText(de,5,5),Ae.strokeText(de,5,5),je.debugOverlayTexture.update(Pe),je.debugOverlayTexture.bind(Ie.LINEAR,Ie.CLAMP_TO_EDGE)})(m,ve+" "+Y+"kb"),k.draw(d,y.TRIANGLES,I,U,et.alphaBlended,nt.disabled,dn(N,a.Color.transparent,le),"$debug",m.debugBuffer,m.quadTriangleIndexBuffer,m.debugSegments)}var Li={symbol:function(m,x,v,d,y){if(m.renderPass==="translucent"){var N=De.disabled,k=m.colorModeForRenderPass();v.layout.get("text-variable-anchor")&&(function(I,U,$,W,Y,X,le){for(var ve=U.transform,je=Y==="map",de=X==="map",Pe=0,Ie=I;Pe<Ie.length;Pe+=1){var Ae=Ie[Pe],Le=W.getTile(Ae),Ge=Le.getBucket($);if(Ge&&Ge.text&&Ge.text.segments.get().length){var Xe=a.evaluateSizeForZoom(Ge.textSizeData,ve.zoom),rt=Zn(Le,1,U.transform.zoom),yt=Ii(Ae.posMatrix,de,je,U.transform,rt),mt=$.layout.get("icon-text-fit")!=="none"&&Ge.hasIconData();if(Xe){var Dt=Math.pow(2,ve.zoom-Le.tileID.overscaledZ);qu(Ge,je,de,le,a.symbolSize,ve,yt,Ae.posMatrix,Dt,Xe,mt)}}}})(d,m,v,x,v.layout.get("text-rotation-alignment"),v.layout.get("text-pitch-alignment"),y),v.paint.get("icon-opacity").constantOr(1)!==0&&Tc(m,x,v,d,!1,v.paint.get("icon-translate"),v.paint.get("icon-translate-anchor"),v.layout.get("icon-rotation-alignment"),v.layout.get("icon-pitch-alignment"),v.layout.get("icon-keep-upright"),N,k),v.paint.get("text-opacity").constantOr(1)!==0&&Tc(m,x,v,d,!0,v.paint.get("text-translate"),v.paint.get("text-translate-anchor"),v.layout.get("text-rotation-alignment"),v.layout.get("text-pitch-alignment"),v.layout.get("text-keep-upright"),N,k),x.map.showCollisionBoxes&&($l(m,x,v,d,v.paint.get("text-translate"),v.paint.get("text-translate-anchor"),!0),$l(m,x,v,d,v.paint.get("icon-translate"),v.paint.get("icon-translate-anchor"),!1))}},circle:function(m,x,v,d){if(m.renderPass==="translucent"){var y=v.paint.get("circle-opacity"),N=v.paint.get("circle-stroke-width"),k=v.paint.get("circle-stroke-opacity"),I=v.layout.get("circle-sort-key").constantOr(1)!==void 0;if(y.constantOr(1)!==0||N.constantOr(1)!==0&&k.constantOr(1)!==0){for(var U=m.context,$=U.gl,W=m.depthModeForSublayer(0,Te.ReadOnly),Y=De.disabled,X=m.colorModeForRenderPass(),le=[],ve=0;ve<d.length;ve++){var je=d[ve],de=x.getTile(je),Pe=de.getBucket(v);if(Pe){var Ie=Pe.programConfigurations.get(v.id),Ae={programConfiguration:Ie,program:m.useProgram("circle",Ie),layoutVertexBuffer:Pe.layoutVertexBuffer,indexBuffer:Pe.indexBuffer,uniformValues:Or(m,je,de,v)};if(I)for(var Le=0,Ge=Pe.segments.get();Le<Ge.length;Le+=1){var Xe=Ge[Le];le.push({segments:new a.SegmentVector([Xe]),sortKey:Xe.sortKey,state:Ae})}else le.push({segments:Pe.segments,sortKey:0,state:Ae})}}I&&le.sort((function(Rt,vr){return Rt.sortKey-vr.sortKey}));for(var rt=0,yt=le;rt<yt.length;rt+=1){var mt=yt[rt],Dt=mt.state;Dt.program.draw(U,$.TRIANGLES,W,Y,X,nt.disabled,Dt.uniformValues,v.id,Dt.layoutVertexBuffer,Dt.indexBuffer,mt.segments,v.paint,m.transform.zoom,Dt.programConfiguration)}}}},heatmap:function(m,x,v,d){if(v.paint.get("heatmap-opacity")!==0)if(m.renderPass==="offscreen"){var y=m.context,N=y.gl,k=De.disabled,I=new et([N.ONE,N.ONE],a.Color.transparent,[!0,!0,!0,!0]);(function(le,ve,je){var de=le.gl;le.activeTexture.set(de.TEXTURE1),le.viewport.set([0,0,ve.width/4,ve.height/4]);var Pe=je.heatmapFbo;if(Pe)de.bindTexture(de.TEXTURE_2D,Pe.colorAttachment.get()),le.bindFramebuffer.set(Pe.framebuffer);else{var Ie=de.createTexture();de.bindTexture(de.TEXTURE_2D,Ie),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_S,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_WRAP_T,de.CLAMP_TO_EDGE),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MIN_FILTER,de.LINEAR),de.texParameteri(de.TEXTURE_2D,de.TEXTURE_MAG_FILTER,de.LINEAR),Pe=je.heatmapFbo=le.createFramebuffer(ve.width/4,ve.height/4,!1),(function(Ae,Le,Ge,Xe){var rt=Ae.gl;rt.texImage2D(rt.TEXTURE_2D,0,rt.RGBA,Le.width/4,Le.height/4,0,rt.RGBA,Ae.extRenderToTextureHalfFloat?Ae.extTextureHalfFloat.HALF_FLOAT_OES:rt.UNSIGNED_BYTE,null),Xe.colorAttachment.set(Ge)})(le,ve,Ie,Pe)}})(y,m,v),y.clear({color:a.Color.transparent});for(var U=0;U<d.length;U++){var $=d[U];if(!x.hasRenderableParent($)){var W=x.getTile($),Y=W.getBucket(v);if(Y){var X=Y.programConfigurations.get(v.id);m.useProgram("heatmap",X).draw(y,N.TRIANGLES,Te.disabled,k,I,nt.disabled,_s($.posMatrix,W,m.transform.zoom,v.paint.get("heatmap-intensity")),v.id,Y.layoutVertexBuffer,Y.indexBuffer,Y.segments,v.paint,m.transform.zoom,X)}}}y.viewport.set([0,0,m.width,m.height])}else m.renderPass==="translucent"&&(m.context.setColorMode(m.colorModeForRenderPass()),(function(le,ve){var je=le.context,de=je.gl,Pe=ve.heatmapFbo;if(Pe){je.activeTexture.set(de.TEXTURE0),de.bindTexture(de.TEXTURE_2D,Pe.colorAttachment.get()),je.activeTexture.set(de.TEXTURE1);var Ie=ve.colorRampTexture;Ie||(Ie=ve.colorRampTexture=new a.Texture(je,ve.colorRamp,de.RGBA)),Ie.bind(de.LINEAR,de.CLAMP_TO_EDGE),le.useProgram("heatmapTexture").draw(je,de.TRIANGLES,Te.disabled,De.disabled,le.colorModeForRenderPass(),nt.disabled,(function(Ae,Le,Ge,Xe){var rt=a.create();a.ortho(rt,0,Ae.width,Ae.height,0,0,1);var yt=Ae.context.gl;return{u_matrix:rt,u_world:[yt.drawingBufferWidth,yt.drawingBufferHeight],u_image:0,u_color_ramp:1,u_opacity:Le.paint.get("heatmap-opacity")}})(le,ve),ve.id,le.viewportBuffer,le.quadTriangleIndexBuffer,le.viewportSegments,ve.paint,le.transform.zoom)}})(m,v))},line:function(m,x,v,d){if(m.renderPass==="translucent"){var y=v.paint.get("line-opacity"),N=v.paint.get("line-width");if(y.constantOr(1)!==0&&N.constantOr(1)!==0)for(var k=m.depthModeForSublayer(0,Te.ReadOnly),I=m.colorModeForRenderPass(),U=v.paint.get("line-dasharray"),$=v.paint.get("line-pattern"),W=$.constantOr(1),Y=v.paint.get("line-gradient"),X=v.getCrossfadeParameters(),le=W?"linePattern":U?"lineSDF":Y?"lineGradient":"line",ve=m.context,je=ve.gl,de=!0,Pe=0,Ie=d;Pe<Ie.length;Pe+=1){var Ae=Ie[Pe],Le=x.getTile(Ae);if(!W||Le.patternsLoaded()){var Ge=Le.getBucket(v);if(Ge){var Xe=Ge.programConfigurations.get(v.id),rt=m.context.program.get(),yt=m.useProgram(le,Xe),mt=de||yt.program!==rt,Dt=$.constantOr(null);if(Dt&&Le.imageAtlas){var Rt=Le.imageAtlas,vr=Rt.patternPositions[Dt.to.toString()],hr=Rt.patternPositions[Dt.from.toString()];vr&&hr&&Xe.setConstantPatternPositions(vr,hr)}var Fr=W?ba(m,Le,v,X):U?Ea(m,Le,v,U,X):Y?Sn(m,Le,v,Ge.lineClipsArray.length):ts(m,Le,v);if(W)ve.activeTexture.set(je.TEXTURE0),Le.imageAtlasTexture.bind(je.LINEAR,je.CLAMP_TO_EDGE),Xe.updatePaintBuffers(X);else if(U&&(mt||m.lineAtlas.dirty))ve.activeTexture.set(je.TEXTURE0),m.lineAtlas.bind(ve);else if(Y){var Yt=Ge.gradients[v.id],Sr=Yt.texture;if(v.gradientVersion!==Yt.version){var Pr=256;if(v.stepInterpolant){var ir=x.getSource().maxzoom,Ar=Ae.canonical.z===ir?Math.ceil(1<<m.transform.maxZoom-Ae.canonical.z):1;Pr=a.clamp(a.nextPowerOfTwo(Ge.maxLineLength/a.EXTENT*1024*Ar),256,ve.maxTextureSize)}Yt.gradient=a.renderColorRamp({expression:v.gradientExpression(),evaluationKey:"lineProgress",resolution:Pr,image:Yt.gradient||void 0,clips:Ge.lineClipsArray}),Yt.texture?Yt.texture.update(Yt.gradient):Yt.texture=new a.Texture(ve,Yt.gradient,je.RGBA),Yt.version=v.gradientVersion,Sr=Yt.texture}ve.activeTexture.set(je.TEXTURE0),Sr.bind(v.stepInterpolant?je.NEAREST:je.LINEAR,je.CLAMP_TO_EDGE)}yt.draw(ve,je.TRIANGLES,k,m.stencilModeForClipping(Ae),I,nt.disabled,Fr,v.id,Ge.layoutVertexBuffer,Ge.indexBuffer,Ge.segments,v.paint,m.transform.zoom,Xe,Ge.layoutVertexBuffer2),de=!1}}}}},fill:function(m,x,v,d){var y=v.paint.get("fill-color"),N=v.paint.get("fill-opacity");if(N.constantOr(1)!==0){var k=m.colorModeForRenderPass(),I=v.paint.get("fill-pattern"),U=m.opaquePassEnabledForLayer()&&!I.constantOr(1)&&y.constantOr(a.Color.transparent).a===1&&N.constantOr(0)===1?"opaque":"translucent";if(m.renderPass===U){var $=m.depthModeForSublayer(1,m.renderPass==="opaque"?Te.ReadWrite:Te.ReadOnly);Vu(m,x,v,d,$,k,!1)}if(m.renderPass==="translucent"&&v.paint.get("fill-antialias")){var W=m.depthModeForSublayer(v.getPaintProperty("fill-outline-color")?2:0,Te.ReadOnly);Vu(m,x,v,d,W,k,!0)}}},"fill-extrusion":function(m,x,v,d){var y=v.paint.get("fill-extrusion-opacity");if(y!==0&&m.renderPass==="translucent"){var N=new Te(m.context.gl.LEQUAL,Te.ReadWrite,m.depthRangeFor3D);if(y!==1||v.paint.get("fill-extrusion-pattern").constantOr(1))Qo(m,x,v,d,N,De.disabled,et.disabled),Qo(m,x,v,d,N,m.stencilModeFor3D(),m.colorModeForRenderPass());else{var k=m.colorModeForRenderPass();Qo(m,x,v,d,N,De.disabled,k)}}},hillshade:function(m,x,v,d){if(m.renderPass==="offscreen"||m.renderPass==="translucent"){for(var y=m.context,N=m.depthModeForSublayer(0,Te.ReadOnly),k=m.colorModeForRenderPass(),I=m.renderPass==="translucent"?m.stencilConfigForOverlap(d):[{},d],U=I[0],$=0,W=I[1];$<W.length;$+=1){var Y=W[$],X=x.getTile(Y);X.needsHillshadePrepare&&m.renderPass==="offscreen"?Gh(m,X,v,N,De.disabled,k):m.renderPass==="translucent"&&ou(m,X,v,N,U[Y.overscaledZ],k)}y.viewport.set([0,0,m.width,m.height])}},raster:function(m,x,v,d){if(m.renderPass==="translucent"&&v.paint.get("raster-opacity")!==0&&d.length)for(var y=m.context,N=y.gl,k=x.getSource(),I=m.useProgram("raster"),U=m.colorModeForRenderPass(),$=k instanceof te?[{},d]:m.stencilConfigForOverlap(d),W=$[0],Y=$[1],X=Y[Y.length-1].overscaledZ,le=!m.options.moving,ve=0,je=Y;ve<je.length;ve+=1){var de=je[ve],Pe=m.depthModeForSublayer(de.overscaledZ-X,v.paint.get("raster-opacity")===1?Te.ReadWrite:Te.ReadOnly,N.LESS),Ie=x.getTile(de),Ae=m.transform.calculatePosMatrix(de.toUnwrapped(),le);Ie.registerFadeDuration(v.paint.get("raster-fade-duration"));var Le=x.findLoadedParent(de,0),Ge=Pa(Ie,Le,x,v,m.transform),Xe=void 0,rt=void 0,yt=v.paint.get("raster-resampling")==="nearest"?N.NEAREST:N.LINEAR;y.activeTexture.set(N.TEXTURE0),Ie.texture.bind(yt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),y.activeTexture.set(N.TEXTURE1),Le?(Le.texture.bind(yt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST),Xe=Math.pow(2,Le.tileID.overscaledZ-Ie.tileID.overscaledZ),rt=[Ie.tileID.canonical.x*Xe%1,Ie.tileID.canonical.y*Xe%1]):Ie.texture.bind(yt,N.CLAMP_TO_EDGE,N.LINEAR_MIPMAP_NEAREST);var mt=Ec(Ae,rt||[0,0],Xe||1,Ge,v);k instanceof te?I.draw(y,N.TRIANGLES,Pe,De.disabled,U,nt.disabled,mt,v.id,k.boundsBuffer,m.quadTriangleIndexBuffer,k.boundsSegments):I.draw(y,N.TRIANGLES,Pe,W[de.overscaledZ],U,nt.disabled,mt,v.id,m.rasterBoundsBuffer,m.quadTriangleIndexBuffer,m.rasterBoundsSegments)}},background:function(m,x,v){var d=v.paint.get("background-color"),y=v.paint.get("background-opacity");if(y!==0){var N=m.context,k=N.gl,I=m.transform,U=I.tileSize,$=v.paint.get("background-pattern");if(!m.isPatternMissing($)){var W=!$&&d.a===1&&y===1&&m.opaquePassEnabledForLayer()?"opaque":"translucent";if(m.renderPass===W){var Y=De.disabled,X=m.depthModeForSublayer(0,W==="opaque"?Te.ReadWrite:Te.ReadOnly),le=m.colorModeForRenderPass(),ve=m.useProgram($?"backgroundPattern":"background"),je=I.coveringTiles({tileSize:U});$&&(N.activeTexture.set(k.TEXTURE0),m.imageManager.bind(m.context));for(var de=v.getCrossfadeParameters(),Pe=0,Ie=je;Pe<Ie.length;Pe+=1){var Ae=Ie[Pe],Le=m.transform.calculatePosMatrix(Ae.toUnwrapped()),Ge=$?Jo(Le,y,m,$,{tileID:Ae,tileSize:U},de):iu(Le,y,d);ve.draw(N,k.TRIANGLES,X,Y,le,nt.disabled,Ge,v.id,m.tileExtentBuffer,m.quadTriangleIndexBuffer,m.tileExtentSegments)}}}}},debug:function(m,x,v){for(var d=0;d<v.length;d++)Hl(m,x,v[d])},custom:function(m,x,v){var d=m.context,y=v.implementation;if(m.renderPass==="offscreen"){var N=y.prerender;N&&(m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),N.call(y,d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState())}else if(m.renderPass==="translucent"){m.setCustomLayerDefaults(),d.setColorMode(m.colorModeForRenderPass()),d.setStencilMode(De.disabled);var k=y.renderingMode==="3d"?new Te(m.context.gl.LEQUAL,Te.ReadWrite,m.depthRangeFor3D):m.depthModeForSublayer(0,Te.ReadOnly);d.setDepthMode(k),y.render(d.gl,m.transform.customLayerMatrix()),d.setDirty(),m.setBaseState(),d.bindFramebuffer.set(null)}}},ji=function(m,x){this.context=new ke(m),this.transform=x,this._tileTextures={},this.setup(),this.numSublayers=qe.maxUnderzooming+qe.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.crossTileSymbolIndex=new Yo,this.gpuTimers={}};ji.prototype.resize=function(m,x){if(this.width=m*a.browser.devicePixelRatio,this.height=x*a.browser.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(var v=0,d=this.style._order;v<d.length;v+=1)this.style._layers[d[v]].resize()},ji.prototype.setup=function(){var m=this.context,x=new a.StructArrayLayout2i4;x.emplaceBack(0,0),x.emplaceBack(a.EXTENT,0),x.emplaceBack(0,a.EXTENT),x.emplaceBack(a.EXTENT,a.EXTENT),this.tileExtentBuffer=m.createVertexBuffer(x,Ai.members),this.tileExtentSegments=a.SegmentVector.simpleSegment(0,0,4,2);var v=new a.StructArrayLayout2i4;v.emplaceBack(0,0),v.emplaceBack(a.EXTENT,0),v.emplaceBack(0,a.EXTENT),v.emplaceBack(a.EXTENT,a.EXTENT),this.debugBuffer=m.createVertexBuffer(v,Ai.members),this.debugSegments=a.SegmentVector.simpleSegment(0,0,4,5);var d=new a.StructArrayLayout4i8;d.emplaceBack(0,0,0,0),d.emplaceBack(a.EXTENT,0,a.EXTENT,0),d.emplaceBack(0,a.EXTENT,0,a.EXTENT),d.emplaceBack(a.EXTENT,a.EXTENT,a.EXTENT,a.EXTENT),this.rasterBoundsBuffer=m.createVertexBuffer(d,Re.members),this.rasterBoundsSegments=a.SegmentVector.simpleSegment(0,0,4,2);var y=new a.StructArrayLayout2i4;y.emplaceBack(0,0),y.emplaceBack(1,0),y.emplaceBack(0,1),y.emplaceBack(1,1),this.viewportBuffer=m.createVertexBuffer(y,Ai.members),this.viewportSegments=a.SegmentVector.simpleSegment(0,0,4,2);var N=new a.StructArrayLayout1ui2;N.emplaceBack(0),N.emplaceBack(1),N.emplaceBack(3),N.emplaceBack(2),N.emplaceBack(0),this.tileBorderIndexBuffer=m.createIndexBuffer(N);var k=new a.StructArrayLayout3ui6;k.emplaceBack(0,1,2),k.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=m.createIndexBuffer(k),this.emptyTexture=new a.Texture(m,{width:1,height:1,data:new Uint8Array([0,0,0,0])},m.gl.RGBA);var I=this.context.gl;this.stencilClearMode=new De({func:I.ALWAYS,mask:0},0,255,I.ZERO,I.ZERO,I.ZERO)},ji.prototype.clearStencil=function(){var m=this.context,x=m.gl;this.nextStencilID=1,this.currentStencilSource=void 0;var v=a.create();a.ortho(v,0,this.width,this.height,0,0,1),a.scale(v,v,[x.drawingBufferWidth,x.drawingBufferHeight,0]),this.useProgram("clippingMask").draw(m,x.TRIANGLES,Te.disabled,this.stencilClearMode,et.disabled,nt.disabled,Kn(v),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)},ji.prototype._renderTileClippingMasks=function(m,x){if(this.currentStencilSource!==m.source&&m.isTileClipped()&&x&&x.length){this.currentStencilSource=m.source;var v=this.context,d=v.gl;this.nextStencilID+x.length>256&&this.clearStencil(),v.setColorMode(et.disabled),v.setDepthMode(Te.disabled);var y=this.useProgram("clippingMask");this._tileClippingMaskIDs={};for(var N=0,k=x;N<k.length;N+=1){var I=k[N],U=this._tileClippingMaskIDs[I.key]=this.nextStencilID++;y.draw(v,d.TRIANGLES,Te.disabled,new De({func:d.ALWAYS,mask:0},U,255,d.KEEP,d.KEEP,d.REPLACE),et.disabled,nt.disabled,Kn(I.posMatrix),"$clipping",this.tileExtentBuffer,this.quadTriangleIndexBuffer,this.tileExtentSegments)}}},ji.prototype.stencilModeFor3D=function(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();var m=this.nextStencilID++,x=this.context.gl;return new De({func:x.NOTEQUAL,mask:255},m,255,x.KEEP,x.KEEP,x.REPLACE)},ji.prototype.stencilModeForClipping=function(m){var x=this.context.gl;return new De({func:x.EQUAL,mask:255},this._tileClippingMaskIDs[m.key],0,x.KEEP,x.KEEP,x.REPLACE)},ji.prototype.stencilConfigForOverlap=function(m){var x,v=this.context.gl,d=m.sort((function(U,$){return $.overscaledZ-U.overscaledZ})),y=d[d.length-1].overscaledZ,N=d[0].overscaledZ-y+1;if(N>1){this.currentStencilSource=void 0,this.nextStencilID+N>256&&this.clearStencil();for(var k={},I=0;I<N;I++)k[I+y]=new De({func:v.GEQUAL,mask:255},I+this.nextStencilID,255,v.KEEP,v.KEEP,v.REPLACE);return this.nextStencilID+=N,[k,d]}return[(x={},x[y]=De.disabled,x),d]},ji.prototype.colorModeForRenderPass=function(){var m=this.context.gl;return this._showOverdrawInspector?new et([m.CONSTANT_COLOR,m.ONE],new a.Color(1/8,1/8,1/8,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?et.unblended:et.alphaBlended},ji.prototype.depthModeForSublayer=function(m,x,v){if(!this.opaquePassEnabledForLayer())return Te.disabled;var d=1-((1+this.currentLayer)*this.numSublayers+m)*this.depthEpsilon;return new Te(v||this.context.gl.LEQUAL,x,[d,d])},ji.prototype.opaquePassEnabledForLayer=function(){return this.currentLayer<this.opaquePassCutoff},ji.prototype.render=function(m,x){var v=this;this.style=m,this.options=x,this.lineAtlas=m.lineAtlas,this.imageManager=m.imageManager,this.glyphManager=m.glyphManager,this.symbolFadeChange=m.placement.symbolFadeChange(a.browser.now()),this.imageManager.beginFrame();var d=this.style._order,y=this.style.sourceCaches;for(var N in y){var k=y[N];k.used&&k.prepare(this.context)}var I,U,$={},W={},Y={};for(var X in y){var le=y[X];$[X]=le.getVisibleCoordinates(),W[X]=$[X].slice().reverse(),Y[X]=le.getVisibleCoordinates(!0).reverse()}this.opaquePassCutoff=1/0;for(var ve=0;ve<d.length;ve++)if(this.style._layers[d[ve]].is3D()){this.opaquePassCutoff=ve;break}this.renderPass="offscreen";for(var je=0,de=d;je<de.length;je+=1){var Pe=this.style._layers[de[je]];if(Pe.hasOffscreenPass()&&!Pe.isHidden(this.transform.zoom)){var Ie=W[Pe.source];(Pe.type==="custom"||Ie.length)&&this.renderLayer(this,y[Pe.source],Pe,Ie)}}for(this.context.bindFramebuffer.set(null),this.context.clear({color:x.showOverdrawInspector?a.Color.black:a.Color.transparent,depth:1}),this.clearStencil(),this._showOverdrawInspector=x.showOverdrawInspector,this.depthRangeFor3D=[0,1-(m._order.length+2)*this.numSublayers*this.depthEpsilon],this.renderPass="opaque",this.currentLayer=d.length-1;this.currentLayer>=0;this.currentLayer--){var Ae=this.style._layers[d[this.currentLayer]],Le=y[Ae.source],Ge=$[Ae.source];this._renderTileClippingMasks(Ae,Ge),this.renderLayer(this,Le,Ae,Ge)}for(this.renderPass="translucent",this.currentLayer=0;this.currentLayer<d.length;this.currentLayer++){var Xe=this.style._layers[d[this.currentLayer]],rt=y[Xe.source],yt=(Xe.type==="symbol"?Y:W)[Xe.source];this._renderTileClippingMasks(Xe,$[Xe.source]),this.renderLayer(this,rt,Xe,yt)}this.options.showTileBoundaries&&(a.values(this.style._layers).forEach((function(mt){mt.source&&!mt.isHidden(v.transform.zoom)&&(mt.source!==(U&&U.id)&&(U=v.style.sourceCaches[mt.source]),(!I||I.getSource().maxzoom<U.getSource().maxzoom)&&(I=U))})),I&&Li.debug(this,I,I.getVisibleCoordinates())),this.options.showPadding&&(function(mt){var Dt=mt.transform.padding;El(mt,mt.transform.height-(Dt.top||0),3,el),El(mt,Dt.bottom||0,3,lu),pc(mt,Dt.left||0,3,xo),pc(mt,mt.transform.width-(Dt.right||0),3,Ra);var Rt=mt.transform.centerPoint;(function(vr,hr,Fr,Yt){Mo(vr,hr-1,Fr-10,2,20,Yt),Mo(vr,hr-10,Fr-1,20,2,Yt)})(mt,Rt.x,mt.transform.height-Rt.y,fc)})(this),this.context.setDefault()},ji.prototype.renderLayer=function(m,x,v,d){v.isHidden(this.transform.zoom)||(v.type==="background"||v.type==="custom"||d.length)&&(this.id=v.id,this.gpuTimingStart(v),Li[v.type](m,x,v,d,this.style.placement.variableOffsets),this.gpuTimingEnd())},ji.prototype.gpuTimingStart=function(m){if(this.options.gpuTiming){var x=this.context.extTimerQuery,v=this.gpuTimers[m.id];v||(v=this.gpuTimers[m.id]={calls:0,cpuTime:0,query:x.createQueryEXT()}),v.calls++,x.beginQueryEXT(x.TIME_ELAPSED_EXT,v.query)}},ji.prototype.gpuTimingEnd=function(){if(this.options.gpuTiming){var m=this.context.extTimerQuery;m.endQueryEXT(m.TIME_ELAPSED_EXT)}},ji.prototype.collectGpuTimers=function(){var m=this.gpuTimers;return this.gpuTimers={},m},ji.prototype.queryGpuTimers=function(m){var x={};for(var v in m){var d=m[v],y=this.context.extTimerQuery,N=y.getQueryObjectEXT(d.query,y.QUERY_RESULT_EXT)/1e6;y.deleteQueryEXT(d.query),x[v]=N}return x},ji.prototype.translatePosMatrix=function(m,x,v,d,y){if(!v[0]&&!v[1])return m;var N=y?d==="map"?this.transform.angle:0:d==="viewport"?-this.transform.angle:0;if(N){var k=Math.sin(N),I=Math.cos(N);v=[v[0]*I-v[1]*k,v[0]*k+v[1]*I]}var U=[y?v[0]:Zn(x,v[0],this.transform.zoom),y?v[1]:Zn(x,v[1],this.transform.zoom),0],$=new Float32Array(16);return a.translate($,m,U),$},ji.prototype.saveTileTexture=function(m){var x=this._tileTextures[m.size[0]];x?x.push(m):this._tileTextures[m.size[0]]=[m]},ji.prototype.getTileTexture=function(m){var x=this._tileTextures[m];return x&&x.length>0?x.pop():null},ji.prototype.isPatternMissing=function(m){if(!m)return!1;if(!m.from||!m.to)return!0;var x=this.imageManager.getPattern(m.from.toString()),v=this.imageManager.getPattern(m.to.toString());return!x||!v},ji.prototype.useProgram=function(m,x){this.cache=this.cache||{};var v=""+m+(x?x.cacheKey:"")+(this._showOverdrawInspector?"/overdraw":"");return this.cache[v]||(this.cache[v]=new Uu(this.context,m,Bu[m],x,Ta[m],this._showOverdrawInspector)),this.cache[v]},ji.prototype.setCustomLayerDefaults=function(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()},ji.prototype.setBaseState=function(){var m=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(m.FUNC_ADD)},ji.prototype.initDebugOverlayCanvas=function(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=a.window.document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new a.Texture(this.context,this.debugOverlayCanvas,this.context.gl.RGBA))},ji.prototype.destroy=function(){this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy()};var Ia=function(m,x){this.points=m,this.planes=x};Ia.fromInvProjectionMatrix=function(m,x,v){var d=Math.pow(2,v),y=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map((function(k){return a.transformMat4([],k,m)})).map((function(k){return a.scale$1([],k,1/k[3]/x*d)})),N=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map((function(k){var I=a.sub([],y[k[0]],y[k[1]]),U=a.sub([],y[k[2]],y[k[1]]),$=a.normalize([],a.cross([],I,U)),W=-a.dot($,y[k[1]]);return $.concat(W)}));return new Ia(y,N)};var Ps=function(m,x){this.min=m,this.max=x,this.center=a.scale$2([],a.add([],this.min,this.max),.5)};Ps.prototype.quadrant=function(m){for(var x=[m%2==0,m<2],v=a.clone$2(this.min),d=a.clone$2(this.max),y=0;y<x.length;y++)v[y]=x[y]?this.min[y]:this.center[y],d[y]=x[y]?this.center[y]:this.max[y];return d[2]=this.max[2],new Ps(v,d)},Ps.prototype.distanceX=function(m){return Math.max(Math.min(this.max[0],m[0]),this.min[0])-m[0]},Ps.prototype.distanceY=function(m){return Math.max(Math.min(this.max[1],m[1]),this.min[1])-m[1]},Ps.prototype.intersects=function(m){for(var x=[[this.min[0],this.min[1],0,1],[this.max[0],this.min[1],0,1],[this.max[0],this.max[1],0,1],[this.min[0],this.max[1],0,1]],v=!0,d=0;d<m.planes.length;d++){for(var y=m.planes[d],N=0,k=0;k<x.length;k++)N+=a.dot$1(y,x[k])>=0;if(N===0)return 0;N!==x.length&&(v=!1)}if(v)return 2;for(var I=0;I<3;I++){for(var U=Number.MAX_VALUE,$=-Number.MAX_VALUE,W=0;W<m.points.length;W++){var Y=m.points[W][I]-this.min[I];U=Math.min(U,Y),$=Math.max($,Y)}if($<0||U>this.max[I]-this.min[I])return 0}return 1};var Wa=function(m,x,v,d){if(m===void 0&&(m=0),x===void 0&&(x=0),v===void 0&&(v=0),d===void 0&&(d=0),isNaN(m)||m<0||isNaN(x)||x<0||isNaN(v)||v<0||isNaN(d)||d<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=m,this.bottom=x,this.left=v,this.right=d};Wa.prototype.interpolate=function(m,x,v){return x.top!=null&&m.top!=null&&(this.top=a.number(m.top,x.top,v)),x.bottom!=null&&m.bottom!=null&&(this.bottom=a.number(m.bottom,x.bottom,v)),x.left!=null&&m.left!=null&&(this.left=a.number(m.left,x.left,v)),x.right!=null&&m.right!=null&&(this.right=a.number(m.right,x.right,v)),this},Wa.prototype.getCenter=function(m,x){var v=a.clamp((this.left+m-this.right)/2,0,m),d=a.clamp((this.top+x-this.bottom)/2,0,x);return new a.Point(v,d)},Wa.prototype.equals=function(m){return this.top===m.top&&this.bottom===m.bottom&&this.left===m.left&&this.right===m.right},Wa.prototype.clone=function(){return new Wa(this.top,this.bottom,this.left,this.right)},Wa.prototype.toJSON=function(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}};var Rn=function(m,x,v,d,y){this.tileSize=512,this.maxValidLatitude=85.051129,this._renderWorldCopies=y===void 0||y,this._minZoom=m||0,this._maxZoom=x||22,this._minPitch=v??0,this._maxPitch=d??60,this.setMaxBounds(),this.width=0,this.height=0,this._center=new a.LngLat(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._unmodified=!0,this._edgeInsets=new Wa,this._posMatrixCache={},this._alignedPosMatrixCache={}},bi={minZoom:{configurable:!0},maxZoom:{configurable:!0},minPitch:{configurable:!0},maxPitch:{configurable:!0},renderWorldCopies:{configurable:!0},worldSize:{configurable:!0},centerOffset:{configurable:!0},size:{configurable:!0},bearing:{configurable:!0},pitch:{configurable:!0},fov:{configurable:!0},zoom:{configurable:!0},center:{configurable:!0},padding:{configurable:!0},centerPoint:{configurable:!0},unmodified:{configurable:!0},point:{configurable:!0}};Rn.prototype.clone=function(){var m=new Rn(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies);return m.tileSize=this.tileSize,m.latRange=this.latRange,m.width=this.width,m.height=this.height,m._center=this._center,m.zoom=this.zoom,m.angle=this.angle,m._fov=this._fov,m._pitch=this._pitch,m._unmodified=this._unmodified,m._edgeInsets=this._edgeInsets.clone(),m._calcMatrices(),m},bi.minZoom.get=function(){return this._minZoom},bi.minZoom.set=function(m){this._minZoom!==m&&(this._minZoom=m,this.zoom=Math.max(this.zoom,m))},bi.maxZoom.get=function(){return this._maxZoom},bi.maxZoom.set=function(m){this._maxZoom!==m&&(this._maxZoom=m,this.zoom=Math.min(this.zoom,m))},bi.minPitch.get=function(){return this._minPitch},bi.minPitch.set=function(m){this._minPitch!==m&&(this._minPitch=m,this.pitch=Math.max(this.pitch,m))},bi.maxPitch.get=function(){return this._maxPitch},bi.maxPitch.set=function(m){this._maxPitch!==m&&(this._maxPitch=m,this.pitch=Math.min(this.pitch,m))},bi.renderWorldCopies.get=function(){return this._renderWorldCopies},bi.renderWorldCopies.set=function(m){m===void 0?m=!0:m===null&&(m=!1),this._renderWorldCopies=m},bi.worldSize.get=function(){return this.tileSize*this.scale},bi.centerOffset.get=function(){return this.centerPoint._sub(this.size._div(2))},bi.size.get=function(){return new a.Point(this.width,this.height)},bi.bearing.get=function(){return-this.angle/Math.PI*180},bi.bearing.set=function(m){var x=-a.wrap(m,-180,180)*Math.PI/180;this.angle!==x&&(this._unmodified=!1,this.angle=x,this._calcMatrices(),this.rotationMatrix=a.create$2(),a.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))},bi.pitch.get=function(){return this._pitch/Math.PI*180},bi.pitch.set=function(m){var x=a.clamp(m,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==x&&(this._unmodified=!1,this._pitch=x,this._calcMatrices())},bi.fov.get=function(){return this._fov/Math.PI*180},bi.fov.set=function(m){m=Math.max(.01,Math.min(60,m)),this._fov!==m&&(this._unmodified=!1,this._fov=m/180*Math.PI,this._calcMatrices())},bi.zoom.get=function(){return this._zoom},bi.zoom.set=function(m){var x=Math.min(Math.max(m,this.minZoom),this.maxZoom);this._zoom!==x&&(this._unmodified=!1,this._zoom=x,this.scale=this.zoomScale(x),this.tileZoom=Math.floor(x),this.zoomFraction=x-this.tileZoom,this._constrain(),this._calcMatrices())},bi.center.get=function(){return this._center},bi.center.set=function(m){m.lat===this._center.lat&&m.lng===this._center.lng||(this._unmodified=!1,this._center=m,this._constrain(),this._calcMatrices())},bi.padding.get=function(){return this._edgeInsets.toJSON()},bi.padding.set=function(m){this._edgeInsets.equals(m)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,m,1),this._calcMatrices())},bi.centerPoint.get=function(){return this._edgeInsets.getCenter(this.width,this.height)},Rn.prototype.isPaddingEqual=function(m){return this._edgeInsets.equals(m)},Rn.prototype.interpolatePadding=function(m,x,v){this._unmodified=!1,this._edgeInsets.interpolate(m,x,v),this._constrain(),this._calcMatrices()},Rn.prototype.coveringZoomLevel=function(m){var x=(m.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/m.tileSize));return Math.max(0,x)},Rn.prototype.getVisibleUnwrappedCoordinates=function(m){var x=[new a.UnwrappedTileID(0,m)];if(this._renderWorldCopies)for(var v=this.pointCoordinate(new a.Point(0,0)),d=this.pointCoordinate(new a.Point(this.width,0)),y=this.pointCoordinate(new a.Point(this.width,this.height)),N=this.pointCoordinate(new a.Point(0,this.height)),k=Math.floor(Math.min(v.x,d.x,y.x,N.x)),I=Math.floor(Math.max(v.x,d.x,y.x,N.x)),U=k-1;U<=I+1;U++)U!==0&&x.push(new a.UnwrappedTileID(U,m));return x},Rn.prototype.coveringTiles=function(m){var x=this.coveringZoomLevel(m),v=x;if(m.minzoom!==void 0&&x<m.minzoom)return[];m.maxzoom!==void 0&&x>m.maxzoom&&(x=m.maxzoom);var d=a.MercatorCoordinate.fromLngLat(this.center),y=Math.pow(2,x),N=[y*d.x,y*d.y,0],k=Ia.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,x),I=m.minzoom||0;this.pitch<=60&&this._edgeInsets.top<.1&&(I=x);var U=function(mt){return{aabb:new Ps([mt*y,0,0],[(mt+1)*y,y,0]),zoom:0,x:0,y:0,wrap:mt,fullyVisible:!1}},$=[],W=[],Y=x,X=m.reparseOverscaled?v:x;if(this._renderWorldCopies)for(var le=1;le<=3;le++)$.push(U(-le)),$.push(U(le));for($.push(U(0));$.length>0;){var ve=$.pop(),je=ve.x,de=ve.y,Pe=ve.fullyVisible;if(!Pe){var Ie=ve.aabb.intersects(k);if(Ie===0)continue;Pe=Ie===2}var Ae=ve.aabb.distanceX(N),Le=ve.aabb.distanceY(N),Ge=Math.max(Math.abs(Ae),Math.abs(Le));if(ve.zoom===Y||Ge>3+(1<<Y-ve.zoom)-2&&ve.zoom>=I)W.push({tileID:new a.OverscaledTileID(ve.zoom===Y?X:ve.zoom,ve.wrap,ve.zoom,je,de),distanceSq:a.sqrLen([N[0]-.5-je,N[1]-.5-de])});else for(var Xe=0;Xe<4;Xe++){var rt=(je<<1)+Xe%2,yt=(de<<1)+(Xe>>1);$.push({aabb:ve.aabb.quadrant(Xe),zoom:ve.zoom+1,x:rt,y:yt,wrap:ve.wrap,fullyVisible:Pe})}}return W.sort((function(mt,Dt){return mt.distanceSq-Dt.distanceSq})).map((function(mt){return mt.tileID}))},Rn.prototype.resize=function(m,x){this.width=m,this.height=x,this.pixelsToGLUnits=[2/m,-2/x],this._constrain(),this._calcMatrices()},bi.unmodified.get=function(){return this._unmodified},Rn.prototype.zoomScale=function(m){return Math.pow(2,m)},Rn.prototype.scaleZoom=function(m){return Math.log(m)/Math.LN2},Rn.prototype.project=function(m){var x=a.clamp(m.lat,-this.maxValidLatitude,this.maxValidLatitude);return new a.Point(a.mercatorXfromLng(m.lng)*this.worldSize,a.mercatorYfromLat(x)*this.worldSize)},Rn.prototype.unproject=function(m){return new a.MercatorCoordinate(m.x/this.worldSize,m.y/this.worldSize).toLngLat()},bi.point.get=function(){return this.project(this.center)},Rn.prototype.setLocationAtPoint=function(m,x){var v=this.pointCoordinate(x),d=this.pointCoordinate(this.centerPoint),y=this.locationCoordinate(m),N=new a.MercatorCoordinate(y.x-(v.x-d.x),y.y-(v.y-d.y));this.center=this.coordinateLocation(N),this._renderWorldCopies&&(this.center=this.center.wrap())},Rn.prototype.locationPoint=function(m){return this.coordinatePoint(this.locationCoordinate(m))},Rn.prototype.pointLocation=function(m){return this.coordinateLocation(this.pointCoordinate(m))},Rn.prototype.locationCoordinate=function(m){return a.MercatorCoordinate.fromLngLat(m)},Rn.prototype.coordinateLocation=function(m){return m.toLngLat()},Rn.prototype.pointCoordinate=function(m){var x=[m.x,m.y,0,1],v=[m.x,m.y,1,1];a.transformMat4(x,x,this.pixelMatrixInverse),a.transformMat4(v,v,this.pixelMatrixInverse);var d=x[3],y=v[3],N=x[1]/d,k=v[1]/y,I=x[2]/d,U=v[2]/y,$=I===U?0:(0-I)/(U-I);return new a.MercatorCoordinate(a.number(x[0]/d,v[0]/y,$)/this.worldSize,a.number(N,k,$)/this.worldSize)},Rn.prototype.coordinatePoint=function(m){var x=[m.x*this.worldSize,m.y*this.worldSize,0,1];return a.transformMat4(x,x,this.pixelMatrix),new a.Point(x[0]/x[3],x[1]/x[3])},Rn.prototype.getBounds=function(){return new a.LngLatBounds().extend(this.pointLocation(new a.Point(0,0))).extend(this.pointLocation(new a.Point(this.width,0))).extend(this.pointLocation(new a.Point(this.width,this.height))).extend(this.pointLocation(new a.Point(0,this.height)))},Rn.prototype.getMaxBounds=function(){return this.latRange&&this.latRange.length===2&&this.lngRange&&this.lngRange.length===2?new a.LngLatBounds([this.lngRange[0],this.latRange[0]],[this.lngRange[1],this.latRange[1]]):null},Rn.prototype.setMaxBounds=function(m){m?(this.lngRange=[m.getWest(),m.getEast()],this.latRange=[m.getSouth(),m.getNorth()],this._constrain()):(this.lngRange=null,this.latRange=[-this.maxValidLatitude,this.maxValidLatitude])},Rn.prototype.calculatePosMatrix=function(m,x){x===void 0&&(x=!1);var v=m.key,d=x?this._alignedPosMatrixCache:this._posMatrixCache;if(d[v])return d[v];var y=m.canonical,N=this.worldSize/this.zoomScale(y.z),k=y.x+Math.pow(2,y.z)*m.wrap,I=a.identity(new Float64Array(16));return a.translate(I,I,[k*N,y.y*N,0]),a.scale(I,I,[N/a.EXTENT,N/a.EXTENT,1]),a.multiply(I,x?this.alignedProjMatrix:this.projMatrix,I),d[v]=new Float32Array(I),d[v]},Rn.prototype.customLayerMatrix=function(){return this.mercatorMatrix.slice()},Rn.prototype._constrain=function(){if(this.center&&this.width&&this.height&&!this._constraining){this._constraining=!0;var m,x,v,d,y=-90,N=90,k=-180,I=180,U=this.size,$=this._unmodified;if(this.latRange){var W=this.latRange;y=a.mercatorYfromLat(W[1])*this.worldSize,m=(N=a.mercatorYfromLat(W[0])*this.worldSize)-y<U.y?U.y/(N-y):0}if(this.lngRange){var Y=this.lngRange;k=a.mercatorXfromLng(Y[0])*this.worldSize,x=(I=a.mercatorXfromLng(Y[1])*this.worldSize)-k<U.x?U.x/(I-k):0}var X=this.point,le=Math.max(x||0,m||0);if(le)return this.center=this.unproject(new a.Point(x?(I+k)/2:X.x,m?(N+y)/2:X.y)),this.zoom+=this.scaleZoom(le),this._unmodified=$,void(this._constraining=!1);if(this.latRange){var ve=X.y,je=U.y/2;ve-je<y&&(d=y+je),ve+je>N&&(d=N-je)}if(this.lngRange){var de=X.x,Pe=U.x/2;de-Pe<k&&(v=k+Pe),de+Pe>I&&(v=I-Pe)}v===void 0&&d===void 0||(this.center=this.unproject(new a.Point(v!==void 0?v:X.x,d!==void 0?d:X.y))),this._unmodified=$,this._constraining=!1}},Rn.prototype._calcMatrices=function(){if(this.height){var m=this.centerOffset;this.cameraToCenterDistance=.5/Math.tan(this._fov/2)*this.height;var x=Math.PI/2+this._pitch,v=this._fov*(.5+m.y/this.height),d=Math.sin(v)*this.cameraToCenterDistance/Math.sin(a.clamp(Math.PI-x-v,.01,Math.PI-.01)),y=this.point,N=y.x,k=y.y,I=1.01*(Math.cos(Math.PI/2-this._pitch)*d+this.cameraToCenterDistance),U=this.height/50,$=new Float64Array(16);a.perspective($,this._fov,this.width/this.height,U,I),$[8]=2*-m.x/this.width,$[9]=2*m.y/this.height,a.scale($,$,[1,-1,1]),a.translate($,$,[0,0,-this.cameraToCenterDistance]),a.rotateX($,$,this._pitch),a.rotateZ($,$,this.angle),a.translate($,$,[-N,-k,0]),this.mercatorMatrix=a.scale([],$,[this.worldSize,this.worldSize,this.worldSize]),a.scale($,$,[1,1,a.mercatorZfromAltitude(1,this.center.lat)*this.worldSize,1]),this.projMatrix=$,this.invProjMatrix=a.invert([],this.projMatrix);var W=this.width%2/2,Y=this.height%2/2,X=Math.cos(this.angle),le=Math.sin(this.angle),ve=N-Math.round(N)+X*W+le*Y,je=k-Math.round(k)+X*Y+le*W,de=new Float64Array($);if(a.translate(de,de,[ve>.5?ve-1:ve,je>.5?je-1:je,0]),this.alignedProjMatrix=de,$=a.create(),a.scale($,$,[this.width/2,-this.height/2,1]),a.translate($,$,[1,-1,0]),this.labelPlaneMatrix=$,$=a.create(),a.scale($,$,[1,-1,1]),a.translate($,$,[-1,-1,0]),a.scale($,$,[2/this.width,2/this.height,1]),this.glCoordMatrix=$,this.pixelMatrix=a.multiply(new Float64Array(16),this.labelPlaneMatrix,this.projMatrix),!($=a.invert(new Float64Array(16),this.pixelMatrix)))throw new Error("failed to invert matrix");this.pixelMatrixInverse=$,this._posMatrixCache={},this._alignedPosMatrixCache={}}},Rn.prototype.maxPitchScaleFactor=function(){if(!this.pixelMatrixInverse)return 1;var m=this.pointCoordinate(new a.Point(0,0)),x=[m.x*this.worldSize,m.y*this.worldSize,0,1];return a.transformMat4(x,x,this.pixelMatrix)[3]/this.cameraToCenterDistance},Rn.prototype.getCameraPoint=function(){var m=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new a.Point(0,m))},Rn.prototype.getCameraQueryGeometry=function(m){var x=this.getCameraPoint();if(m.length===1)return[m[0],x];for(var v=x.x,d=x.y,y=x.x,N=x.y,k=0,I=m;k<I.length;k+=1){var U=I[k];v=Math.min(v,U.x),d=Math.min(d,U.y),y=Math.max(y,U.x),N=Math.max(N,U.y)}return[new a.Point(v,d),new a.Point(y,d),new a.Point(y,N),new a.Point(v,N),new a.Point(v,d)]},Object.defineProperties(Rn.prototype,bi);var ws=function(m){var x,v,d,y;this._hashName=m&&encodeURIComponent(m),a.bindAll(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=(x=this._updateHashUnthrottled.bind(this),v=!1,d=null,y=function(){d=null,v&&(x(),d=setTimeout(y,300),v=!1)},function(){return v=!0,d||y(),d})};ws.prototype.addTo=function(m){return this._map=m,a.window.addEventListener("hashchange",this._onHashChange,!1),this._map.on("moveend",this._updateHash),this},ws.prototype.remove=function(){return a.window.removeEventListener("hashchange",this._onHashChange,!1),this._map.off("moveend",this._updateHash),clearTimeout(this._updateHash()),delete this._map,this},ws.prototype.getHashString=function(m){var x=this._map.getCenter(),v=Math.round(100*this._map.getZoom())/100,d=Math.ceil((v*Math.LN2+Math.log(512/360/.5))/Math.LN10),y=Math.pow(10,d),N=Math.round(x.lng*y)/y,k=Math.round(x.lat*y)/y,I=this._map.getBearing(),U=this._map.getPitch(),$="";if($+=m?"/"+N+"/"+k+"/"+v:v+"/"+k+"/"+N,(I||U)&&($+="/"+Math.round(10*I)/10),U&&($+="/"+Math.round(U)),this._hashName){var W=this._hashName,Y=!1,X=a.window.location.hash.slice(1).split("&").map((function(le){var ve=le.split("=")[0];return ve===W?(Y=!0,ve+"="+$):le})).filter((function(le){return le}));return Y||X.push(W+"="+$),"#"+X.join("&")}return"#"+$},ws.prototype._getCurrentHash=function(){var m,x=this,v=a.window.location.hash.replace("#","");return this._hashName?(v.split("&").map((function(d){return d.split("=")})).forEach((function(d){d[0]===x._hashName&&(m=d)})),(m&&m[1]||"").split("/")):v.split("/")},ws.prototype._onHashChange=function(){var m=this._getCurrentHash();if(m.length>=3&&!m.some((function(v){return isNaN(v)}))){var x=this._map.dragRotate.isEnabled()&&this._map.touchZoomRotate.isEnabled()?+(m[3]||0):this._map.getBearing();return this._map.jumpTo({center:[+m[2],+m[1]],zoom:+m[0],bearing:x,pitch:+(m[4]||0)}),!0}return!1},ws.prototype._updateHashUnthrottled=function(){var m=a.window.location.href.replace(/(#.+)?$/,this.getHashString());try{a.window.history.replaceState(a.window.history.state,null,m)}catch{}};var Gl={linearity:.3,easing:a.bezier(0,0,.3,1)},tl=a.extend({deceleration:2500,maxSpeed:1400},Gl),Wl=a.extend({deceleration:20,maxSpeed:1400},Gl),Sd=a.extend({deceleration:1e3,maxSpeed:360},Gl),$u=a.extend({deceleration:1e3,maxSpeed:90},Gl),Yl=function(m){this._map=m,this.clear()};function Pc(m,x){(!m.duration||m.duration<x.duration)&&(m.duration=x.duration,m.easing=x.easing)}function la(m,x,v){var d=v.maxSpeed,y=v.linearity,N=v.deceleration,k=a.clamp(m*y/(x/1e3),-d,d),I=Math.abs(k)/(N*y);return{easing:v.easing,duration:1e3*I,amount:k*(I/2)}}Yl.prototype.clear=function(){this._inertiaBuffer=[]},Yl.prototype.record=function(m){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:a.browser.now(),settings:m})},Yl.prototype._drainInertiaBuffer=function(){for(var m=this._inertiaBuffer,x=a.browser.now();m.length>0&&x-m[0].time>160;)m.shift()},Yl.prototype._onMoveEnd=function(m){if(this._drainInertiaBuffer(),!(this._inertiaBuffer.length<2)){for(var x={zoom:0,bearing:0,pitch:0,pan:new a.Point(0,0),pinchAround:void 0,around:void 0},v=0,d=this._inertiaBuffer;v<d.length;v+=1){var y=d[v].settings;x.zoom+=y.zoomDelta||0,x.bearing+=y.bearingDelta||0,x.pitch+=y.pitchDelta||0,y.panDelta&&x.pan._add(y.panDelta),y.around&&(x.around=y.around),y.pinchAround&&(x.pinchAround=y.pinchAround)}var N=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,k={};if(x.pan.mag()){var I=la(x.pan.mag(),N,a.extend({},tl,m||{}));k.offset=x.pan.mult(I.amount/x.pan.mag()),k.center=this._map.transform.center,Pc(k,I)}if(x.zoom){var U=la(x.zoom,N,Wl);k.zoom=this._map.transform.zoom+U.amount,Pc(k,U)}if(x.bearing){var $=la(x.bearing,N,Sd);k.bearing=this._map.transform.bearing+a.clamp($.amount,-179,179),Pc(k,$)}if(x.pitch){var W=la(x.pitch,N,$u);k.pitch=this._map.transform.pitch+W.amount,Pc(k,W)}if(k.zoom||k.bearing){var Y=x.pinchAround===void 0?x.around:x.pinchAround;k.around=Y?this._map.unproject(Y):this._map.getCenter()}return this.clear(),a.extend(k,{noMoveStart:!0})}};var _i=(function(m){function x(d,y,N,k){k===void 0&&(k={});var I=g.mousePos(y.getCanvasContainer(),N),U=y.unproject(I);m.call(this,d,a.extend({point:I,lngLat:U,originalEvent:N},k)),this._defaultPrevented=!1,this.target=y}m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x;var v={defaultPrevented:{configurable:!0}};return x.prototype.preventDefault=function(){this._defaultPrevented=!0},v.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(x.prototype,v),x})(a.Event),Xn=(function(m){function x(d,y,N){var k=d==="touchend"?N.changedTouches:N.touches,I=g.touchPos(y.getCanvasContainer(),k),U=I.map((function(Y){return y.unproject(Y)})),$=I.reduce((function(Y,X,le,ve){return Y.add(X.div(ve.length))}),new a.Point(0,0)),W=y.unproject($);m.call(this,d,{points:I,point:$,lngLats:U,lngLat:W,originalEvent:N}),this._defaultPrevented=!1}m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x;var v={defaultPrevented:{configurable:!0}};return x.prototype.preventDefault=function(){this._defaultPrevented=!0},v.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(x.prototype,v),x})(a.Event),zi=(function(m){function x(d,y,N){m.call(this,d,{originalEvent:N}),this._defaultPrevented=!1}m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x;var v={defaultPrevented:{configurable:!0}};return x.prototype.preventDefault=function(){this._defaultPrevented=!0},v.defaultPrevented.get=function(){return this._defaultPrevented},Object.defineProperties(x.prototype,v),x})(a.Event),mn=function(m,x){this._map=m,this._clickTolerance=x.clickTolerance};mn.prototype.reset=function(){delete this._mousedownPos},mn.prototype.wheel=function(m){return this._firePreventable(new zi(m.type,this._map,m))},mn.prototype.mousedown=function(m,x){return this._mousedownPos=x,this._firePreventable(new _i(m.type,this._map,m))},mn.prototype.mouseup=function(m){this._map.fire(new _i(m.type,this._map,m))},mn.prototype.click=function(m,x){this._mousedownPos&&this._mousedownPos.dist(x)>=this._clickTolerance||this._map.fire(new _i(m.type,this._map,m))},mn.prototype.dblclick=function(m){return this._firePreventable(new _i(m.type,this._map,m))},mn.prototype.mouseover=function(m){this._map.fire(new _i(m.type,this._map,m))},mn.prototype.mouseout=function(m){this._map.fire(new _i(m.type,this._map,m))},mn.prototype.touchstart=function(m){return this._firePreventable(new Xn(m.type,this._map,m))},mn.prototype.touchmove=function(m){this._map.fire(new Xn(m.type,this._map,m))},mn.prototype.touchend=function(m){this._map.fire(new Xn(m.type,this._map,m))},mn.prototype.touchcancel=function(m){this._map.fire(new Xn(m.type,this._map,m))},mn.prototype._firePreventable=function(m){if(this._map.fire(m),m.defaultPrevented)return{}},mn.prototype.isEnabled=function(){return!0},mn.prototype.isActive=function(){return!1},mn.prototype.enable=function(){},mn.prototype.disable=function(){};var sr=function(m){this._map=m};sr.prototype.reset=function(){this._delayContextMenu=!1,delete this._contextMenuEvent},sr.prototype.mousemove=function(m){this._map.fire(new _i(m.type,this._map,m))},sr.prototype.mousedown=function(){this._delayContextMenu=!0},sr.prototype.mouseup=function(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new _i("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)},sr.prototype.contextmenu=function(m){this._delayContextMenu?this._contextMenuEvent=m:this._map.fire(new _i(m.type,this._map,m)),this._map.listens("contextmenu")&&m.preventDefault()},sr.prototype.isEnabled=function(){return!0},sr.prototype.isActive=function(){return!1},sr.prototype.enable=function(){},sr.prototype.disable=function(){};var Rs=function(m,x){this._map=m,this._el=m.getCanvasContainer(),this._container=m.getContainer(),this._clickTolerance=x.clickTolerance||1};function mc(m,x){for(var v={},d=0;d<m.length;d++)v[m[d].identifier]=x[d];return v}Rs.prototype.isEnabled=function(){return!!this._enabled},Rs.prototype.isActive=function(){return!!this._active},Rs.prototype.enable=function(){this.isEnabled()||(this._enabled=!0)},Rs.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},Rs.prototype.mousedown=function(m,x){this.isEnabled()&&m.shiftKey&&m.button===0&&(g.disableDrag(),this._startPos=this._lastPos=x,this._active=!0)},Rs.prototype.mousemoveWindow=function(m,x){if(this._active){var v=x;if(!(this._lastPos.equals(v)||!this._box&&v.dist(this._startPos)<this._clickTolerance)){var d=this._startPos;this._lastPos=v,this._box||(this._box=g.create("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",m));var y=Math.min(d.x,v.x),N=Math.max(d.x,v.x),k=Math.min(d.y,v.y),I=Math.max(d.y,v.y);g.setTransform(this._box,"translate("+y+"px,"+k+"px)"),this._box.style.width=N-y+"px",this._box.style.height=I-k+"px"}}},Rs.prototype.mouseupWindow=function(m,x){var v=this;if(this._active&&m.button===0){var d=this._startPos,y=x;if(this.reset(),g.suppressClick(),d.x!==y.x||d.y!==y.y)return this._map.fire(new a.Event("boxzoomend",{originalEvent:m})),{cameraAnimation:function(N){return N.fitScreenCoordinates(d,y,v._map.getBearing(),{linear:!0})}};this._fireEvent("boxzoomcancel",m)}},Rs.prototype.keydown=function(m){this._active&&m.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",m))},Rs.prototype.blur=function(){this.reset()},Rs.prototype.reset=function(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(g.remove(this._box),this._box=null),g.enableDrag(),delete this._startPos,delete this._lastPos},Rs.prototype._fireEvent=function(m,x){return this._map.fire(new a.Event(m,{originalEvent:x}))};var rl=function(m){this.reset(),this.numTouches=m.numTouches};rl.prototype.reset=function(){delete this.centroid,delete this.startTime,delete this.touches,this.aborted=!1},rl.prototype.touchstart=function(m,x,v){(this.centroid||v.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===void 0&&(this.startTime=m.timeStamp),v.length===this.numTouches&&(this.centroid=(function(d){for(var y=new a.Point(0,0),N=0,k=d;N<k.length;N+=1)y._add(k[N]);return y.div(d.length)})(x),this.touches=mc(v,x)))},rl.prototype.touchmove=function(m,x,v){if(!this.aborted&&this.centroid){var d=mc(v,x);for(var y in this.touches){var N=d[y];(!N||N.dist(this.touches[y])>30)&&(this.aborted=!0)}}},rl.prototype.touchend=function(m,x,v){if((!this.centroid||m.timeStamp-this.startTime>500)&&(this.aborted=!0),v.length===0){var d=!this.aborted&&this.centroid;if(this.reset(),d)return d}};var bo=function(m){this.singleTap=new rl(m),this.numTaps=m.numTaps,this.reset()};bo.prototype.reset=function(){this.lastTime=1/0,delete this.lastTap,this.count=0,this.singleTap.reset()},bo.prototype.touchstart=function(m,x,v){this.singleTap.touchstart(m,x,v)},bo.prototype.touchmove=function(m,x,v){this.singleTap.touchmove(m,x,v)},bo.prototype.touchend=function(m,x,v){var d=this.singleTap.touchend(m,x,v);if(d){var y=m.timeStamp-this.lastTime<500,N=!this.lastTap||this.lastTap.dist(d)<30;if(y&&N||this.reset(),this.count++,this.lastTime=m.timeStamp,this.lastTap=d,this.count===this.numTaps)return this.reset(),d}};var Xs=function(){this._zoomIn=new bo({numTouches:1,numTaps:2}),this._zoomOut=new bo({numTouches:2,numTaps:1}),this.reset()};Xs.prototype.reset=function(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()},Xs.prototype.touchstart=function(m,x,v){this._zoomIn.touchstart(m,x,v),this._zoomOut.touchstart(m,x,v)},Xs.prototype.touchmove=function(m,x,v){this._zoomIn.touchmove(m,x,v),this._zoomOut.touchmove(m,x,v)},Xs.prototype.touchend=function(m,x,v){var d=this,y=this._zoomIn.touchend(m,x,v),N=this._zoomOut.touchend(m,x,v);return y?(this._active=!0,m.preventDefault(),setTimeout((function(){return d.reset()}),0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()+1,around:k.unproject(y)},{originalEvent:m})}}):N?(this._active=!0,m.preventDefault(),setTimeout((function(){return d.reset()}),0),{cameraAnimation:function(k){return k.easeTo({duration:300,zoom:k.getZoom()-1,around:k.unproject(N)},{originalEvent:m})}}):void 0},Xs.prototype.touchcancel=function(){this.reset()},Xs.prototype.enable=function(){this._enabled=!0},Xs.prototype.disable=function(){this._enabled=!1,this.reset()},Xs.prototype.isEnabled=function(){return this._enabled},Xs.prototype.isActive=function(){return this._active};var Hu={0:1,2:2},tr=function(m){this.reset(),this._clickTolerance=m.clickTolerance||1};tr.prototype.blur=function(){this.reset()},tr.prototype.reset=function(){this._active=!1,this._moved=!1,delete this._lastPoint,delete this._eventButton},tr.prototype._correctButton=function(m,x){return!1},tr.prototype._move=function(m,x){return{}},tr.prototype.mousedown=function(m,x){if(!this._lastPoint){var v=g.mouseButton(m);this._correctButton(m,v)&&(this._lastPoint=x,this._eventButton=v)}},tr.prototype.mousemoveWindow=function(m,x){var v=this._lastPoint;if(v){if(m.preventDefault(),(function(d,y){var N=Hu[y];return d.buttons===void 0||(d.buttons&N)!==N})(m,this._eventButton))this.reset();else if(this._moved||!(x.dist(v)<this._clickTolerance))return this._moved=!0,this._lastPoint=x,this._move(v,x)}},tr.prototype.mouseupWindow=function(m){this._lastPoint&&g.mouseButton(m)===this._eventButton&&(this._moved&&g.suppressClick(),this.reset())},tr.prototype.enable=function(){this._enabled=!0},tr.prototype.disable=function(){this._enabled=!1,this.reset()},tr.prototype.isEnabled=function(){return this._enabled},tr.prototype.isActive=function(){return this._active};var La=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.mousedown=function(v,d){m.prototype.mousedown.call(this,v,d),this._lastPoint&&(this._active=!0)},x.prototype._correctButton=function(v,d){return d===0&&!v.ctrlKey},x.prototype._move=function(v,d){return{around:d,panDelta:d.sub(v)}},x})(tr),Gu=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype._correctButton=function(v,d){return d===0&&v.ctrlKey||d===2},x.prototype._move=function(v,d){var y=.8*(d.x-v.x);if(y)return this._active=!0,{bearingDelta:y}},x.prototype.contextmenu=function(v){v.preventDefault()},x})(tr),Ya=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype._correctButton=function(v,d){return d===0&&v.ctrlKey||d===2},x.prototype._move=function(v,d){var y=-.5*(d.y-v.y);if(y)return this._active=!0,{pitchDelta:y}},x.prototype.contextmenu=function(v){v.preventDefault()},x})(tr),Do=function(m){this._minTouches=1,this._clickTolerance=m.clickTolerance||1,this.reset()};Do.prototype.reset=function(){this._active=!1,this._touches={},this._sum=new a.Point(0,0)},Do.prototype.touchstart=function(m,x,v){return this._calculateTransform(m,x,v)},Do.prototype.touchmove=function(m,x,v){if(this._active&&!(v.length<this._minTouches))return m.preventDefault(),this._calculateTransform(m,x,v)},Do.prototype.touchend=function(m,x,v){this._calculateTransform(m,x,v),this._active&&v.length<this._minTouches&&this.reset()},Do.prototype.touchcancel=function(){this.reset()},Do.prototype._calculateTransform=function(m,x,v){v.length>0&&(this._active=!0);var d=mc(v,x),y=new a.Point(0,0),N=new a.Point(0,0),k=0;for(var I in d){var U=d[I],$=this._touches[I];$&&(y._add(U),N._add(U.sub($)),k++,d[I]=U)}if(this._touches=d,!(k<this._minTouches)&&N.mag()){var W=N.div(k);if(this._sum._add(W),!(this._sum.mag()<this._clickTolerance))return{around:y.div(k),panDelta:W}}},Do.prototype.enable=function(){this._enabled=!0},Do.prototype.disable=function(){this._enabled=!1,this.reset()},Do.prototype.isEnabled=function(){return this._enabled},Do.prototype.isActive=function(){return this._active};var js=function(){this.reset()};function Eu(m,x,v){for(var d=0;d<m.length;d++)if(m[d].identifier===v)return x[d]}function cu(m,x){return Math.log(m/x)/Math.LN2}js.prototype.reset=function(){this._active=!1,delete this._firstTwoTouches},js.prototype._start=function(m){},js.prototype._move=function(m,x,v){return{}},js.prototype.touchstart=function(m,x,v){this._firstTwoTouches||v.length<2||(this._firstTwoTouches=[v[0].identifier,v[1].identifier],this._start([x[0],x[1]]))},js.prototype.touchmove=function(m,x,v){if(this._firstTwoTouches){m.preventDefault();var d=this._firstTwoTouches,y=d[1],N=Eu(v,x,d[0]),k=Eu(v,x,y);if(N&&k){var I=this._aroundCenter?null:N.add(k).div(2);return this._move([N,k],I,m)}}},js.prototype.touchend=function(m,x,v){if(this._firstTwoTouches){var d=this._firstTwoTouches,y=d[1],N=Eu(v,x,d[0]),k=Eu(v,x,y);N&&k||(this._active&&g.suppressClick(),this.reset())}},js.prototype.touchcancel=function(){this.reset()},js.prototype.enable=function(m){this._enabled=!0,this._aroundCenter=!!m&&m.around==="center"},js.prototype.disable=function(){this._enabled=!1,this.reset()},js.prototype.isEnabled=function(){return this._enabled},js.prototype.isActive=function(){return this._active};var ca=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.reset=function(){m.prototype.reset.call(this),delete this._distance,delete this._startDistance},x.prototype._start=function(v){this._startDistance=this._distance=v[0].dist(v[1])},x.prototype._move=function(v,d){var y=this._distance;if(this._distance=v[0].dist(v[1]),this._active||!(Math.abs(cu(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:cu(this._distance,y),pinchAround:d}},x})(js);function Tl(m,x){return 180*m.angleWith(x)/Math.PI}var ih=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.reset=function(){m.prototype.reset.call(this),delete this._minDiameter,delete this._startVector,delete this._vector},x.prototype._start=function(v){this._startVector=this._vector=v[0].sub(v[1]),this._minDiameter=v[0].dist(v[1])},x.prototype._move=function(v,d){var y=this._vector;if(this._vector=v[0].sub(v[1]),this._active||!this._isBelowThreshold(this._vector))return this._active=!0,{bearingDelta:Tl(this._vector,y),pinchAround:d}},x.prototype._isBelowThreshold=function(v){this._minDiameter=Math.min(this._minDiameter,v.mag());var d=25/(Math.PI*this._minDiameter)*360,y=Tl(v,this._startVector);return Math.abs(y)<d},x})(js);function Rc(m){return Math.abs(m.y)>Math.abs(m.x)}var Ad=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.reset=function(){m.prototype.reset.call(this),this._valid=void 0,delete this._firstMove,delete this._lastPoints},x.prototype._start=function(v){this._lastPoints=v,Rc(v[0].sub(v[1]))&&(this._valid=!1)},x.prototype._move=function(v,d,y){var N=v[0].sub(this._lastPoints[0]),k=v[1].sub(this._lastPoints[1]);if(this._valid=this.gestureBeginsVertically(N,k,y.timeStamp),this._valid)return this._lastPoints=v,this._active=!0,{pitchDelta:(N.y+k.y)/2*-.5}},x.prototype.gestureBeginsVertically=function(v,d,y){if(this._valid!==void 0)return this._valid;var N=v.mag()>=2,k=d.mag()>=2;if(N||k){if(!N||!k)return this._firstMove===void 0&&(this._firstMove=y),y-this._firstMove<100&&void 0;var I=v.y>0==d.y>0;return Rc(v)&&Rc(d)&&I}},x})(js),nl={panStep:100,bearingStep:15,pitchStep:10},_o=function(){var m=nl;this._panStep=m.panStep,this._bearingStep=m.bearingStep,this._pitchStep=m.pitchStep,this._rotationDisabled=!1};function Ma(m){return m*(2-m)}_o.prototype.blur=function(){this.reset()},_o.prototype.reset=function(){this._active=!1},_o.prototype.keydown=function(m){var x=this;if(!(m.altKey||m.ctrlKey||m.metaKey)){var v=0,d=0,y=0,N=0,k=0;switch(m.keyCode){case 61:case 107:case 171:case 187:v=1;break;case 189:case 109:case 173:v=-1;break;case 37:m.shiftKey?d=-1:(m.preventDefault(),N=-1);break;case 39:m.shiftKey?d=1:(m.preventDefault(),N=1);break;case 38:m.shiftKey?y=1:(m.preventDefault(),k=-1);break;case 40:m.shiftKey?y=-1:(m.preventDefault(),k=1);break;default:return}return this._rotationDisabled&&(d=0,y=0),{cameraAnimation:function(I){var U=I.getZoom();I.easeTo({duration:300,easeId:"keyboardHandler",easing:Ma,zoom:v?Math.round(U)+v*(m.shiftKey?2:1):U,bearing:I.getBearing()+d*x._bearingStep,pitch:I.getPitch()+y*x._pitchStep,offset:[-N*x._panStep,-k*x._panStep],center:I.getCenter()},{originalEvent:m})}}}},_o.prototype.enable=function(){this._enabled=!0},_o.prototype.disable=function(){this._enabled=!1,this.reset()},_o.prototype.isEnabled=function(){return this._enabled},_o.prototype.isActive=function(){return this._active},_o.prototype.disableRotation=function(){this._rotationDisabled=!0},_o.prototype.enableRotation=function(){this._rotationDisabled=!1};var En=function(m,x){this._map=m,this._el=m.getCanvasContainer(),this._handler=x,this._delta=0,this._defaultZoomRate=.01,this._wheelZoomRate=1/450,a.bindAll(["_onTimeout"],this)};En.prototype.setZoomRate=function(m){this._defaultZoomRate=m},En.prototype.setWheelZoomRate=function(m){this._wheelZoomRate=m},En.prototype.isEnabled=function(){return!!this._enabled},En.prototype.isActive=function(){return!!this._active||this._finishTimeout!==void 0},En.prototype.isZooming=function(){return!!this._zooming},En.prototype.enable=function(m){this.isEnabled()||(this._enabled=!0,this._aroundCenter=m&&m.around==="center")},En.prototype.disable=function(){this.isEnabled()&&(this._enabled=!1)},En.prototype.wheel=function(m){if(this.isEnabled()){var x=m.deltaMode===a.window.WheelEvent.DOM_DELTA_LINE?40*m.deltaY:m.deltaY,v=a.browser.now(),d=v-(this._lastWheelEventTime||0);this._lastWheelEventTime=v,x!==0&&x%4.000244140625==0?this._type="wheel":x!==0&&Math.abs(x)<4?this._type="trackpad":d>400?(this._type=null,this._lastValue=x,this._timeout=setTimeout(this._onTimeout,40,m)):this._type||(this._type=Math.abs(d*x)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,x+=this._lastValue)),m.shiftKey&&x&&(x/=4),this._type&&(this._lastWheelEvent=m,this._delta-=x,this._active||this._start(m)),m.preventDefault()}},En.prototype._onTimeout=function(m){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(m)},En.prototype._start=function(m){if(this._delta){this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);var x=g.mousePos(this._el,m);this._around=a.LngLat.convert(this._aroundCenter?this._map.getCenter():this._map.unproject(x)),this._aroundPoint=this._map.transform.locationPoint(this._around),this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}},En.prototype.renderFrame=function(){var m=this;if(this._frameId&&(this._frameId=null,this.isActive())){var x=this._map.transform;if(this._delta!==0){var v=this._type==="wheel"&&Math.abs(this._delta)>4.000244140625?this._wheelZoomRate:this._defaultZoomRate,d=2/(1+Math.exp(-Math.abs(this._delta*v)));this._delta<0&&d!==0&&(d=1/d);var y=typeof this._targetZoom=="number"?x.zoomScale(this._targetZoom):x.scale;this._targetZoom=Math.min(x.maxZoom,Math.max(x.minZoom,x.scaleZoom(y*d))),this._type==="wheel"&&(this._startZoom=x.zoom,this._easing=this._smoothOutEasing(200)),this._delta=0}var N,k=typeof this._targetZoom=="number"?this._targetZoom:x.zoom,I=this._startZoom,U=this._easing,$=!1;if(this._type==="wheel"&&I&&U){var W=Math.min((a.browser.now()-this._lastWheelEventTime)/200,1),Y=U(W);N=a.number(I,k,Y),W<1?this._frameId||(this._frameId=!0):$=!0}else N=k,$=!0;return this._active=!0,$&&(this._active=!1,this._finishTimeout=setTimeout((function(){m._zooming=!1,m._handler._triggerRenderFrame(),delete m._targetZoom,delete m._finishTimeout}),200)),{noInertia:!0,needsRenderFrame:!$,zoomDelta:N-x.zoom,around:this._aroundPoint,originalEvent:this._lastWheelEvent}}},En.prototype._smoothOutEasing=function(m){var x=a.ease;if(this._prevEase){var v=this._prevEase,d=(a.browser.now()-v.start)/v.duration,y=v.easing(d+.01)-v.easing(d),N=.27/Math.sqrt(y*y+1e-4)*.01,k=Math.sqrt(.0729-N*N);x=a.bezier(N,k,.25,1)}return this._prevEase={start:a.browser.now(),duration:m,easing:x},x},En.prototype.blur=function(){this.reset()},En.prototype.reset=function(){this._active=!1};var il=function(m,x){this._clickZoom=m,this._tapZoom=x};il.prototype.enable=function(){this._clickZoom.enable(),this._tapZoom.enable()},il.prototype.disable=function(){this._clickZoom.disable(),this._tapZoom.disable()},il.prototype.isEnabled=function(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()},il.prototype.isActive=function(){return this._clickZoom.isActive()||this._tapZoom.isActive()};var Fs=function(){this.reset()};Fs.prototype.reset=function(){this._active=!1},Fs.prototype.blur=function(){this.reset()},Fs.prototype.dblclick=function(m,x){return m.preventDefault(),{cameraAnimation:function(v){v.easeTo({duration:300,zoom:v.getZoom()+(m.shiftKey?-1:1),around:v.unproject(x)},{originalEvent:m})}}},Fs.prototype.enable=function(){this._enabled=!0},Fs.prototype.disable=function(){this._enabled=!1,this.reset()},Fs.prototype.isEnabled=function(){return this._enabled},Fs.prototype.isActive=function(){return this._active};var qi=function(){this._tap=new bo({numTouches:1,numTaps:1}),this.reset()};qi.prototype.reset=function(){this._active=!1,delete this._swipePoint,delete this._swipeTouch,delete this._tapTime,this._tap.reset()},qi.prototype.touchstart=function(m,x,v){this._swipePoint||(this._tapTime&&m.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?v.length>0&&(this._swipePoint=x[0],this._swipeTouch=v[0].identifier):this._tap.touchstart(m,x,v))},qi.prototype.touchmove=function(m,x,v){if(this._tapTime){if(this._swipePoint){if(v[0].identifier!==this._swipeTouch)return;var d=x[0],y=d.y-this._swipePoint.y;return this._swipePoint=d,m.preventDefault(),this._active=!0,{zoomDelta:y/128}}}else this._tap.touchmove(m,x,v)},qi.prototype.touchend=function(m,x,v){this._tapTime?this._swipePoint&&v.length===0&&this.reset():this._tap.touchend(m,x,v)&&(this._tapTime=m.timeStamp)},qi.prototype.touchcancel=function(){this.reset()},qi.prototype.enable=function(){this._enabled=!0},qi.prototype.disable=function(){this._enabled=!1,this.reset()},qi.prototype.isEnabled=function(){return this._enabled},qi.prototype.isActive=function(){return this._active};var sl=function(m,x,v){this._el=m,this._mousePan=x,this._touchPan=v};sl.prototype.enable=function(m){this._inertiaOptions=m||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")},sl.prototype.disable=function(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")},sl.prototype.isEnabled=function(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()},sl.prototype.isActive=function(){return this._mousePan.isActive()||this._touchPan.isActive()};var Da=function(m,x,v){this._pitchWithRotate=m.pitchWithRotate,this._mouseRotate=x,this._mousePitch=v};Da.prototype.enable=function(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()},Da.prototype.disable=function(){this._mouseRotate.disable(),this._mousePitch.disable()},Da.prototype.isEnabled=function(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())},Da.prototype.isActive=function(){return this._mouseRotate.isActive()||this._mousePitch.isActive()};var Js=function(m,x,v,d){this._el=m,this._touchZoom=x,this._touchRotate=v,this._tapDragZoom=d,this._rotationDisabled=!1,this._enabled=!0};Js.prototype.enable=function(m){this._touchZoom.enable(m),this._rotationDisabled||this._touchRotate.enable(m),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")},Js.prototype.disable=function(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")},Js.prototype.isEnabled=function(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()},Js.prototype.isActive=function(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()},Js.prototype.disableRotation=function(){this._rotationDisabled=!0,this._touchRotate.disable()},Js.prototype.enableRotation=function(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()};var Wi=function(m){return m.zoom||m.drag||m.pitch||m.rotate},Cd=(function(m){function x(){m.apply(this,arguments)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x})(a.Event);function qr(m){return m.panDelta&&m.panDelta.mag()||m.zoomDelta||m.bearingDelta||m.pitchDelta}var Er=function(m,x){this._map=m,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new Yl(m),this._bearingSnap=x.bearingSnap,this._previousActiveHandlers={},this._eventsInProgress={},this._addDefaultHandlers(x),a.bindAll(["handleEvent","handleWindowEvent"],this);var v=this._el;this._listeners=[[v,"touchstart",{passive:!0}],[v,"touchmove",{passive:!1}],[v,"touchend",void 0],[v,"touchcancel",void 0],[v,"mousedown",void 0],[v,"mousemove",void 0],[v,"mouseup",void 0],[a.window.document,"mousemove",{capture:!0}],[a.window.document,"mouseup",void 0],[v,"mouseover",void 0],[v,"mouseout",void 0],[v,"dblclick",void 0],[v,"click",void 0],[v,"keydown",{capture:!1}],[v,"keyup",void 0],[v,"wheel",{passive:!1}],[v,"contextmenu",void 0],[a.window,"blur",void 0]];for(var d=0,y=this._listeners;d<y.length;d+=1){var N=y[d],k=N[0];g.addEventListener(k,N[1],k===a.window.document?this.handleWindowEvent:this.handleEvent,N[2])}};Er.prototype.destroy=function(){for(var m=0,x=this._listeners;m<x.length;m+=1){var v=x[m],d=v[0];g.removeEventListener(d,v[1],d===a.window.document?this.handleWindowEvent:this.handleEvent,v[2])}},Er.prototype._addDefaultHandlers=function(m){var x=this._map,v=x.getCanvasContainer();this._add("mapEvent",new mn(x,m));var d=x.boxZoom=new Rs(x,m);this._add("boxZoom",d);var y=new Xs,N=new Fs;x.doubleClickZoom=new il(N,y),this._add("tapZoom",y),this._add("clickZoom",N);var k=new qi;this._add("tapDragZoom",k);var I=x.touchPitch=new Ad;this._add("touchPitch",I);var U=new Gu(m),$=new Ya(m);x.dragRotate=new Da(m,U,$),this._add("mouseRotate",U,["mousePitch"]),this._add("mousePitch",$,["mouseRotate"]);var W=new La(m),Y=new Do(m);x.dragPan=new sl(v,W,Y),this._add("mousePan",W),this._add("touchPan",Y,["touchZoom","touchRotate"]);var X=new ih,le=new ca;x.touchZoomRotate=new Js(v,le,X,k),this._add("touchRotate",X,["touchPan","touchZoom"]),this._add("touchZoom",le,["touchPan","touchRotate"]);var ve=x.scrollZoom=new En(x,this);this._add("scrollZoom",ve,["mousePan"]);var je=x.keyboard=new _o;this._add("keyboard",je),this._add("blockableMapEvent",new sr(x));for(var de=0,Pe=["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"];de<Pe.length;de+=1){var Ie=Pe[de];m.interactive&&m[Ie]&&x[Ie].enable(m[Ie])}},Er.prototype._add=function(m,x,v){this._handlers.push({handlerName:m,handler:x,allowed:v}),this._handlersById[m]=x},Er.prototype.stop=function(m){if(!this._updatingCamera){for(var x=0,v=this._handlers;x<v.length;x+=1)v[x].handler.reset();this._inertia.clear(),this._fireEvents({},{},m),this._changes=[]}},Er.prototype.isActive=function(){for(var m=0,x=this._handlers;m<x.length;m+=1)if(x[m].handler.isActive())return!0;return!1},Er.prototype.isZooming=function(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()},Er.prototype.isRotating=function(){return!!this._eventsInProgress.rotate},Er.prototype.isMoving=function(){return!!Wi(this._eventsInProgress)||this.isZooming()},Er.prototype._blockedByActive=function(m,x,v){for(var d in m)if(d!==v&&(!x||x.indexOf(d)<0))return!0;return!1},Er.prototype.handleWindowEvent=function(m){this.handleEvent(m,m.type+"Window")},Er.prototype._getMapTouches=function(m){for(var x=[],v=0,d=m;v<d.length;v+=1){var y=d[v];this._el.contains(y.target)&&x.push(y)}return x},Er.prototype.handleEvent=function(m,x){this._updatingCamera=!0;for(var v=m.type==="renderFrame"?void 0:m,d={needsRenderFrame:!1},y={},N={},k=m.touches?this._getMapTouches(m.touches):void 0,I=k?g.touchPos(this._el,k):g.mousePos(this._el,m),U=0,$=this._handlers;U<$.length;U+=1){var W=$[U],Y=W.handlerName,X=W.handler,le=W.allowed;if(X.isEnabled()){var ve=void 0;this._blockedByActive(N,le,Y)?X.reset():X[x||m.type]&&(ve=X[x||m.type](m,I,k),this.mergeHandlerResult(d,y,ve,Y,v),ve&&ve.needsRenderFrame&&this._triggerRenderFrame()),(ve||X.isActive())&&(N[Y]=X)}}var je={};for(var de in this._previousActiveHandlers)N[de]||(je[de]=v);this._previousActiveHandlers=N,(Object.keys(je).length||qr(d))&&(this._changes.push([d,y,je]),this._triggerRenderFrame()),(Object.keys(N).length||qr(d))&&this._map._stop(!0),this._updatingCamera=!1;var Pe=d.cameraAnimation;Pe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],Pe(this._map))},Er.prototype.mergeHandlerResult=function(m,x,v,d,y){if(v){a.extend(m,v);var N={handlerName:d,originalEvent:v.originalEvent||y};v.zoomDelta!==void 0&&(x.zoom=N),v.panDelta!==void 0&&(x.drag=N),v.pitchDelta!==void 0&&(x.pitch=N),v.bearingDelta!==void 0&&(x.rotate=N)}},Er.prototype._applyChanges=function(){for(var m={},x={},v={},d=0,y=this._changes;d<y.length;d+=1){var N=y[d],k=N[0],I=N[1],U=N[2];k.panDelta&&(m.panDelta=(m.panDelta||new a.Point(0,0))._add(k.panDelta)),k.zoomDelta&&(m.zoomDelta=(m.zoomDelta||0)+k.zoomDelta),k.bearingDelta&&(m.bearingDelta=(m.bearingDelta||0)+k.bearingDelta),k.pitchDelta&&(m.pitchDelta=(m.pitchDelta||0)+k.pitchDelta),k.around!==void 0&&(m.around=k.around),k.pinchAround!==void 0&&(m.pinchAround=k.pinchAround),k.noInertia&&(m.noInertia=k.noInertia),a.extend(x,I),a.extend(v,U)}this._updateMapTransform(m,x,v),this._changes=[]},Er.prototype._updateMapTransform=function(m,x,v){var d=this._map,y=d.transform;if(!qr(m))return this._fireEvents(x,v,!0);var N=m.panDelta,k=m.zoomDelta,I=m.bearingDelta,U=m.pitchDelta,$=m.around,W=m.pinchAround;W!==void 0&&($=W),d._stop(!0),$=$||d.transform.centerPoint;var Y=y.pointLocation(N?$.sub(N):$);I&&(y.bearing+=I),U&&(y.pitch+=U),k&&(y.zoom+=k),y.setLocationAtPoint(Y,$),this._map._update(),m.noInertia||this._inertia.record(m),this._fireEvents(x,v,!0)},Er.prototype._fireEvents=function(m,x,v){var d=this,y=Wi(this._eventsInProgress),N=Wi(m),k={};for(var I in m)this._eventsInProgress[I]||(k[I+"start"]=m[I].originalEvent),this._eventsInProgress[I]=m[I];for(var U in!y&&N&&this._fireEvent("movestart",N.originalEvent),k)this._fireEvent(U,k[U]);for(var $ in N&&this._fireEvent("move",N.originalEvent),m)this._fireEvent($,m[$].originalEvent);var W,Y={};for(var X in this._eventsInProgress){var le=this._eventsInProgress[X],ve=le.handlerName,je=le.originalEvent;this._handlersById[ve].isActive()||(delete this._eventsInProgress[X],Y[X+"end"]=W=x[ve]||je)}for(var de in Y)this._fireEvent(de,Y[de]);var Pe=Wi(this._eventsInProgress);if(v&&(y||N)&&!Pe){this._updatingCamera=!0;var Ie=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),Ae=function(Le){return Le!==0&&-d._bearingSnap<Le&&Le<d._bearingSnap};Ie?(Ae(Ie.bearing||this._map.getBearing())&&(Ie.bearing=0),this._map.easeTo(Ie,{originalEvent:W})):(this._map.fire(new a.Event("moveend",{originalEvent:W})),Ae(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}},Er.prototype._fireEvent=function(m,x){this._map.fire(new a.Event(m,x?{originalEvent:x}:{}))},Er.prototype._requestFrame=function(){var m=this;return this._map.triggerRepaint(),this._map._renderTaskQueue.add((function(x){delete m._frameId,m.handleEvent(new Cd("renderFrame",{timeStamp:x})),m._applyChanges()}))},Er.prototype._triggerRenderFrame=function(){this._frameId===void 0&&(this._frameId=this._requestFrame())};var sh=(function(m){function x(v,d){m.call(this),this._moving=!1,this._zooming=!1,this.transform=v,this._bearingSnap=d.bearingSnap,a.bindAll(["_renderFrameCallback"],this)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.getCenter=function(){return new a.LngLat(this.transform.center.lng,this.transform.center.lat)},x.prototype.setCenter=function(v,d){return this.jumpTo({center:v},d)},x.prototype.panBy=function(v,d,y){return v=a.Point.convert(v).mult(-1),this.panTo(this.transform.center,a.extend({offset:v},d),y)},x.prototype.panTo=function(v,d,y){return this.easeTo(a.extend({center:v},d),y)},x.prototype.getZoom=function(){return this.transform.zoom},x.prototype.setZoom=function(v,d){return this.jumpTo({zoom:v},d),this},x.prototype.zoomTo=function(v,d,y){return this.easeTo(a.extend({zoom:v},d),y)},x.prototype.zoomIn=function(v,d){return this.zoomTo(this.getZoom()+1,v,d),this},x.prototype.zoomOut=function(v,d){return this.zoomTo(this.getZoom()-1,v,d),this},x.prototype.getBearing=function(){return this.transform.bearing},x.prototype.setBearing=function(v,d){return this.jumpTo({bearing:v},d),this},x.prototype.getPadding=function(){return this.transform.padding},x.prototype.setPadding=function(v,d){return this.jumpTo({padding:v},d),this},x.prototype.rotateTo=function(v,d,y){return this.easeTo(a.extend({bearing:v},d),y)},x.prototype.resetNorth=function(v,d){return this.rotateTo(0,a.extend({duration:1e3},v),d),this},x.prototype.resetNorthPitch=function(v,d){return this.easeTo(a.extend({bearing:0,pitch:0,duration:1e3},v),d),this},x.prototype.snapToNorth=function(v,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(v,d):this},x.prototype.getPitch=function(){return this.transform.pitch},x.prototype.setPitch=function(v,d){return this.jumpTo({pitch:v},d),this},x.prototype.cameraForBounds=function(v,d){v=a.LngLatBounds.convert(v);var y=d&&d.bearing||0;return this._cameraForBoxAndBearing(v.getNorthWest(),v.getSouthEast(),y,d)},x.prototype._cameraForBoxAndBearing=function(v,d,y,N){var k={top:0,bottom:0,right:0,left:0};if(typeof(N=a.extend({padding:k,offset:[0,0],maxZoom:this.transform.maxZoom},N)).padding=="number"){var I=N.padding;N.padding={top:I,bottom:I,right:I,left:I}}N.padding=a.extend(k,N.padding);var U=this.transform,$=U.padding,W=U.project(a.LngLat.convert(v)),Y=U.project(a.LngLat.convert(d)),X=W.rotate(-y*Math.PI/180),le=Y.rotate(-y*Math.PI/180),ve=new a.Point(Math.max(X.x,le.x),Math.max(X.y,le.y)),je=new a.Point(Math.min(X.x,le.x),Math.min(X.y,le.y)),de=ve.sub(je),Pe=(U.width-($.left+$.right+N.padding.left+N.padding.right))/de.x,Ie=(U.height-($.top+$.bottom+N.padding.top+N.padding.bottom))/de.y;if(!(Ie<0||Pe<0)){var Ae=Math.min(U.scaleZoom(U.scale*Math.min(Pe,Ie)),N.maxZoom),Le=typeof N.offset.x=="number"?new a.Point(N.offset.x,N.offset.y):a.Point.convert(N.offset),Ge=new a.Point((N.padding.left-N.padding.right)/2,(N.padding.top-N.padding.bottom)/2).rotate(y*Math.PI/180),Xe=Le.add(Ge).mult(U.scale/U.zoomScale(Ae));return{center:U.unproject(W.add(Y).div(2).sub(Xe)),zoom:Ae,bearing:y}}a.warnOnce("Map cannot fit within canvas with the given bounds, padding, and/or offset.")},x.prototype.fitBounds=function(v,d,y){return this._fitInternal(this.cameraForBounds(v,d),d,y)},x.prototype.fitScreenCoordinates=function(v,d,y,N,k){return this._fitInternal(this._cameraForBoxAndBearing(this.transform.pointLocation(a.Point.convert(v)),this.transform.pointLocation(a.Point.convert(d)),y,N),N,k)},x.prototype._fitInternal=function(v,d,y){return v?(delete(d=a.extend(v,d)).padding,d.linear?this.easeTo(d,y):this.flyTo(d,y)):this},x.prototype.jumpTo=function(v,d){this.stop();var y=this.transform,N=!1,k=!1,I=!1;return"zoom"in v&&y.zoom!==+v.zoom&&(N=!0,y.zoom=+v.zoom),v.center!==void 0&&(y.center=a.LngLat.convert(v.center)),"bearing"in v&&y.bearing!==+v.bearing&&(k=!0,y.bearing=+v.bearing),"pitch"in v&&y.pitch!==+v.pitch&&(I=!0,y.pitch=+v.pitch),v.padding==null||y.isPaddingEqual(v.padding)||(y.padding=v.padding),this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),N&&this.fire(new a.Event("zoomstart",d)).fire(new a.Event("zoom",d)).fire(new a.Event("zoomend",d)),k&&this.fire(new a.Event("rotatestart",d)).fire(new a.Event("rotate",d)).fire(new a.Event("rotateend",d)),I&&this.fire(new a.Event("pitchstart",d)).fire(new a.Event("pitch",d)).fire(new a.Event("pitchend",d)),this.fire(new a.Event("moveend",d))},x.prototype.easeTo=function(v,d){var y=this;this._stop(!1,v.easeId),((v=a.extend({offset:[0,0],duration:500,easing:a.ease},v)).animate===!1||!v.essential&&a.browser.prefersReducedMotion)&&(v.duration=0);var N=this.transform,k=this.getZoom(),I=this.getBearing(),U=this.getPitch(),$=this.getPadding(),W="zoom"in v?+v.zoom:k,Y="bearing"in v?this._normalizeBearing(v.bearing,I):I,X="pitch"in v?+v.pitch:U,le="padding"in v?v.padding:N.padding,ve=a.Point.convert(v.offset),je=N.centerPoint.add(ve),de=N.pointLocation(je),Pe=a.LngLat.convert(v.center||de);this._normalizeCenter(Pe);var Ie,Ae,Le=N.project(de),Ge=N.project(Pe).sub(Le),Xe=N.zoomScale(W-k);v.around&&(Ie=a.LngLat.convert(v.around),Ae=N.locationPoint(Ie));var rt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=this._zooming||W!==k,this._rotating=this._rotating||I!==Y,this._pitching=this._pitching||X!==U,this._padding=!N.isPaddingEqual(le),this._easeId=v.easeId,this._prepareEase(d,v.noMoveStart,rt),this._ease((function(yt){if(y._zooming&&(N.zoom=a.number(k,W,yt)),y._rotating&&(N.bearing=a.number(I,Y,yt)),y._pitching&&(N.pitch=a.number(U,X,yt)),y._padding&&(N.interpolatePadding($,le,yt),je=N.centerPoint.add(ve)),Ie)N.setLocationAtPoint(Ie,Ae);else{var mt=N.zoomScale(N.zoom-k),Dt=W>k?Math.min(2,Xe):Math.max(.5,Xe),Rt=Math.pow(Dt,1-yt),vr=N.unproject(Le.add(Ge.mult(yt*Rt)).mult(mt));N.setLocationAtPoint(N.renderWorldCopies?vr.wrap():vr,je)}y._fireMoveEvents(d)}),(function(yt){y._afterEase(d,yt)}),v),this},x.prototype._prepareEase=function(v,d,y){y===void 0&&(y={}),this._moving=!0,d||y.moving||this.fire(new a.Event("movestart",v)),this._zooming&&!y.zooming&&this.fire(new a.Event("zoomstart",v)),this._rotating&&!y.rotating&&this.fire(new a.Event("rotatestart",v)),this._pitching&&!y.pitching&&this.fire(new a.Event("pitchstart",v))},x.prototype._fireMoveEvents=function(v){this.fire(new a.Event("move",v)),this._zooming&&this.fire(new a.Event("zoom",v)),this._rotating&&this.fire(new a.Event("rotate",v)),this._pitching&&this.fire(new a.Event("pitch",v))},x.prototype._afterEase=function(v,d){if(!this._easeId||!d||this._easeId!==d){delete this._easeId;var y=this._zooming,N=this._rotating,k=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,y&&this.fire(new a.Event("zoomend",v)),N&&this.fire(new a.Event("rotateend",v)),k&&this.fire(new a.Event("pitchend",v)),this.fire(new a.Event("moveend",v))}},x.prototype.flyTo=function(v,d){var y=this;if(!v.essential&&a.browser.prefersReducedMotion){var N=a.pick(v,["center","zoom","bearing","pitch","around"]);return this.jumpTo(N,d)}this.stop(),v=a.extend({offset:[0,0],speed:1.2,curve:1.42,easing:a.ease},v);var k=this.transform,I=this.getZoom(),U=this.getBearing(),$=this.getPitch(),W=this.getPadding(),Y="zoom"in v?a.clamp(+v.zoom,k.minZoom,k.maxZoom):I,X="bearing"in v?this._normalizeBearing(v.bearing,U):U,le="pitch"in v?+v.pitch:$,ve="padding"in v?v.padding:k.padding,je=k.zoomScale(Y-I),de=a.Point.convert(v.offset),Pe=k.centerPoint.add(de),Ie=k.pointLocation(Pe),Ae=a.LngLat.convert(v.center||Ie);this._normalizeCenter(Ae);var Le=k.project(Ie),Ge=k.project(Ae).sub(Le),Xe=v.curve,rt=Math.max(k.width,k.height),yt=rt/je,mt=Ge.mag();if("minZoom"in v){var Dt=a.clamp(Math.min(v.minZoom,I,Y),k.minZoom,k.maxZoom),Rt=rt/k.zoomScale(Dt-I);Xe=Math.sqrt(Rt/mt*2)}var vr=Xe*Xe;function hr(Tr){var Rr=(yt*yt-rt*rt+(Tr?-1:1)*vr*vr*mt*mt)/(2*(Tr?yt:rt)*vr*mt);return Math.log(Math.sqrt(Rr*Rr+1)-Rr)}function Fr(Tr){return(Math.exp(Tr)-Math.exp(-Tr))/2}function Yt(Tr){return(Math.exp(Tr)+Math.exp(-Tr))/2}var Sr=hr(0),Pr=function(Tr){return Yt(Sr)/Yt(Sr+Xe*Tr)},ir=function(Tr){return rt*((Yt(Sr)*(Fr(Rr=Sr+Xe*Tr)/Yt(Rr))-Fr(Sr))/vr)/mt;var Rr},Ar=(hr(1)-Sr)/Xe;if(Math.abs(mt)<1e-6||!isFinite(Ar)){if(Math.abs(rt-yt)<1e-6)return this.easeTo(v,d);var Gr=yt<rt?-1:1;Ar=Math.abs(Math.log(yt/rt))/Xe,ir=function(){return 0},Pr=function(Tr){return Math.exp(Gr*Xe*Tr)}}return v.duration="duration"in v?+v.duration:1e3*Ar/("screenSpeed"in v?+v.screenSpeed/Xe:+v.speed),v.maxDuration&&v.duration>v.maxDuration&&(v.duration=0),this._zooming=!0,this._rotating=U!==X,this._pitching=le!==$,this._padding=!k.isPaddingEqual(ve),this._prepareEase(d,!1),this._ease((function(Tr){var Rr=Tr*Ar,vn=1/Pr(Rr);k.zoom=Tr===1?Y:I+k.scaleZoom(vn),y._rotating&&(k.bearing=a.number(U,X,Tr)),y._pitching&&(k.pitch=a.number($,le,Tr)),y._padding&&(k.interpolatePadding(W,ve,Tr),Pe=k.centerPoint.add(de));var Jn=Tr===1?Ae:k.unproject(Le.add(Ge.mult(ir(Rr))).mult(vn));k.setLocationAtPoint(k.renderWorldCopies?Jn.wrap():Jn,Pe),y._fireMoveEvents(d)}),(function(){return y._afterEase(d)}),v),this},x.prototype.isEasing=function(){return!!this._easeFrameId},x.prototype.stop=function(){return this._stop()},x.prototype._stop=function(v,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),delete this._easeFrameId,delete this._onEaseFrame),this._onEaseEnd){var y=this._onEaseEnd;delete this._onEaseEnd,y.call(this,d)}if(!v){var N=this.handlers;N&&N.stop(!1)}return this},x.prototype._ease=function(v,d,y){y.animate===!1||y.duration===0?(v(1),d()):(this._easeStart=a.browser.now(),this._easeOptions=y,this._onEaseFrame=v,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))},x.prototype._renderFrameCallback=function(){var v=Math.min((a.browser.now()-this._easeStart)/this._easeOptions.duration,1);this._onEaseFrame(this._easeOptions.easing(v)),v<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()},x.prototype._normalizeBearing=function(v,d){v=a.wrap(v,-180,180);var y=Math.abs(v-d);return Math.abs(v-360-d)<y&&(v-=360),Math.abs(v+360-d)<y&&(v+=360),v},x.prototype._normalizeCenter=function(v){var d=this.transform;if(d.renderWorldCopies&&!d.lngRange){var y=v.lng-d.center.lng;v.lng+=y>180?-360:y<-180?360:0}},x})(a.Evented),Ci=function(m){m===void 0&&(m={}),this.options=m,a.bindAll(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)};Ci.prototype.getDefaultPosition=function(){return"bottom-right"},Ci.prototype.onAdd=function(m){var x=this.options&&this.options.compact;return this._map=m,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=g.create("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.addEventListener("click",this._toggleAttribution),this._setElementTitle(this._compactButton,"ToggleAttribution"),this._innerContainer=g.create("div","mapboxgl-ctrl-attrib-inner",this._container),this._innerContainer.setAttribute("role","list"),x&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),x===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container},Ci.prototype.onRemove=function(){g.remove(this._container),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0},Ci.prototype._setElementTitle=function(m,x){var v=this._map._getUIString("AttributionControl."+x);m.title=v,m.setAttribute("aria-label",v)},Ci.prototype._toggleAttribution=function(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-pressed","true"))},Ci.prototype._updateEditLink=function(){var m=this._editLink;m||(m=this._editLink=this._container.querySelector(".mapbox-improve-map"));var x=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||a.config.ACCESS_TOKEN}];if(m){var v=x.reduce((function(d,y,N){return y.value&&(d+=y.key+"="+y.value+(N<x.length-1?"&":"")),d}),"?");m.href=a.config.FEEDBACK_URL+"/"+v+(this._map._hash?this._map._hash.getHashString(!0):""),m.rel="noopener nofollow",this._setElementTitle(m,"MapFeedback")}},Ci.prototype._updateData=function(m){!m||m.sourceDataType!=="metadata"&&m.sourceDataType!=="visibility"&&m.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())},Ci.prototype._updateAttributions=function(){if(this._map.style){var m=[];if(this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?m=m.concat(this.options.customAttribution.map((function(I){return typeof I!="string"?"":I}))):typeof this.options.customAttribution=="string"&&m.push(this.options.customAttribution)),this._map.style.stylesheet){var x=this._map.style.stylesheet;this.styleOwner=x.owner,this.styleId=x.id}var v=this._map.style.sourceCaches;for(var d in v){var y=v[d];if(y.used){var N=y.getSource();N.attribution&&m.indexOf(N.attribution)<0&&m.push(N.attribution)}}m.sort((function(I,U){return I.length-U.length}));var k=(m=m.filter((function(I,U){for(var $=U+1;$<m.length;$++)if(m[$].indexOf(I)>=0)return!1;return!0}))).join(" | ");k!==this._attribHTML&&(this._attribHTML=k,m.length?(this._innerContainer.innerHTML=k,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}},Ci.prototype._updateCompact=function(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")};var gi=function(){a.bindAll(["_updateLogo"],this),a.bindAll(["_updateCompact"],this)};gi.prototype.onAdd=function(m){this._map=m,this._container=g.create("div","mapboxgl-ctrl");var x=g.create("a","mapboxgl-ctrl-logo");return x.target="_blank",x.rel="noopener nofollow",x.href="https://www.mapbox.com/",x.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),x.setAttribute("rel","noopener nofollow"),this._container.appendChild(x),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container},gi.prototype.onRemove=function(){g.remove(this._container),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)},gi.prototype.getDefaultPosition=function(){return"bottom-left"},gi.prototype._updateLogo=function(m){m&&m.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")},gi.prototype._logoRequired=function(){if(this._map.style){var m=this._map.style.sourceCaches;for(var x in m)if(m[x].getSource().mapbox_logo)return!0;return!1}},gi.prototype._updateCompact=function(){var m=this._container.children;if(m.length){var x=m[0];this._map.getCanvasContainer().offsetWidth<250?x.classList.add("mapboxgl-compact"):x.classList.remove("mapboxgl-compact")}};var gn=function(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1};gn.prototype.add=function(m){var x=++this._id;return this._queue.push({callback:m,id:x,cancelled:!1}),x},gn.prototype.remove=function(m){for(var x=this._currentlyRunning,v=0,d=x?this._queue.concat(x):this._queue;v<d.length;v+=1){var y=d[v];if(y.id===m)return void(y.cancelled=!0)}},gn.prototype.run=function(m){m===void 0&&(m=0);var x=this._currentlyRunning=this._queue;this._queue=[];for(var v=0,d=x;v<d.length;v+=1){var y=d[v];if(!y.cancelled&&(y.callback(m),this._cleared))break}this._cleared=!1,this._currentlyRunning=!1},gn.prototype.clear=function(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]};var Is={"AttributionControl.ToggleAttribution":"Toggle attribution","AttributionControl.MapFeedback":"Map feedback","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox logo","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScaleControl.Feet":"ft","ScaleControl.Meters":"m","ScaleControl.Kilometers":"km","ScaleControl.Miles":"mi","ScaleControl.NauticalMiles":"nm"},Ls=a.window.HTMLImageElement,al=a.window.HTMLElement,Gn=a.window.ImageBitmap,ua={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:60,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",transformRequest:null,accessToken:null,fadeDuration:300,crossSourceCollisions:!0},Ic=(function(m){function x(d){var y=this;if((d=a.extend({},ua,d)).minZoom!=null&&d.maxZoom!=null&&d.minZoom>d.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(d.minPitch!=null&&d.maxPitch!=null&&d.minPitch>d.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(d.minPitch!=null&&d.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(d.maxPitch!=null&&d.maxPitch>60)throw new Error("maxPitch must be less than or equal to 60");var N=new Rn(d.minZoom,d.maxZoom,d.minPitch,d.maxPitch,d.renderWorldCopies);if(m.call(this,N,d),this._interactive=d.interactive,this._maxTileCacheSize=d.maxTileCacheSize,this._failIfMajorPerformanceCaveat=d.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=d.preserveDrawingBuffer,this._antialias=d.antialias,this._trackResize=d.trackResize,this._bearingSnap=d.bearingSnap,this._refreshExpiredTiles=d.refreshExpiredTiles,this._fadeDuration=d.fadeDuration,this._crossSourceCollisions=d.crossSourceCollisions,this._crossFadingFactor=1,this._collectResourceTiming=d.collectResourceTiming,this._renderTaskQueue=new gn,this._controls=[],this._mapId=a.uniqueId(),this._locale=a.extend({},Is,d.locale),this._clickTolerance=d.clickTolerance,this._requestManager=new a.RequestManager(d.transformRequest,d.accessToken),typeof d.container=="string"){if(this._container=a.window.document.getElementById(d.container),!this._container)throw new Error("Container '"+d.container+"' not found.")}else{if(!(d.container instanceof al))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=d.container}if(d.maxBounds&&this.setMaxBounds(d.maxBounds),a.bindAll(["_onWindowOnline","_onWindowResize","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");this.on("move",(function(){return y._update(!1)})),this.on("moveend",(function(){return y._update(!1)})),this.on("zoom",(function(){return y._update(!0)})),a.window!==void 0&&(a.window.addEventListener("online",this._onWindowOnline,!1),a.window.addEventListener("resize",this._onWindowResize,!1),a.window.addEventListener("orientationchange",this._onWindowResize,!1)),this.handlers=new Er(this,d),this._hash=d.hash&&new ws(typeof d.hash=="string"&&d.hash||void 0).addTo(this),this._hash&&this._hash._onHashChange()||(this.jumpTo({center:d.center,zoom:d.zoom,bearing:d.bearing,pitch:d.pitch}),d.bounds&&(this.resize(),this.fitBounds(d.bounds,a.extend({},d.fitBoundsOptions,{duration:0})))),this.resize(),this._localIdeographFontFamily=d.localIdeographFontFamily,d.style&&this.setStyle(d.style,{localIdeographFontFamily:d.localIdeographFontFamily}),d.attributionControl&&this.addControl(new Ci({customAttribution:d.customAttribution})),this.addControl(new gi,d.logoPosition),this.on("style.load",(function(){y.transform.unmodified&&y.jumpTo(y.style.stylesheet)})),this.on("data",(function(k){y._update(k.dataType==="style"),y.fire(new a.Event(k.dataType+"data",k))})),this.on("dataloading",(function(k){y.fire(new a.Event(k.dataType+"dataloading",k))}))}m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x;var v={showTileBoundaries:{configurable:!0},showPadding:{configurable:!0},showCollisionBoxes:{configurable:!0},showOverdrawInspector:{configurable:!0},repaint:{configurable:!0},vertices:{configurable:!0},version:{configurable:!0}};return x.prototype._getMapId=function(){return this._mapId},x.prototype.addControl=function(d,y){if(y===void 0&&(y=d.getDefaultPosition?d.getDefaultPosition():"top-right"),!d||!d.onAdd)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));var N=d.onAdd(this);this._controls.push(d);var k=this._controlPositions[y];return y.indexOf("bottom")!==-1?k.insertBefore(N,k.firstChild):k.appendChild(N),this},x.prototype.removeControl=function(d){if(!d||!d.onRemove)return this.fire(new a.ErrorEvent(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));var y=this._controls.indexOf(d);return y>-1&&this._controls.splice(y,1),d.onRemove(this),this},x.prototype.hasControl=function(d){return this._controls.indexOf(d)>-1},x.prototype.resize=function(d){var y=this._containerDimensions(),N=y[0],k=y[1];if(N===this.transform.width&&k===this.transform.height)return this;this._resizeCanvas(N,k),this.transform.resize(N,k),this.painter.resize(N,k);var I=!this._moving;return I&&this.fire(new a.Event("movestart",d)).fire(new a.Event("move",d)),this.fire(new a.Event("resize",d)),I&&this.fire(new a.Event("moveend",d)),this},x.prototype.getBounds=function(){return this.transform.getBounds()},x.prototype.getMaxBounds=function(){return this.transform.getMaxBounds()},x.prototype.setMaxBounds=function(d){return this.transform.setMaxBounds(a.LngLatBounds.convert(d)),this._update()},x.prototype.setMinZoom=function(d){if((d=d??-2)>=-2&&d<=this.transform.maxZoom)return this.transform.minZoom=d,this._update(),this.getZoom()<d&&this.setZoom(d),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")},x.prototype.getMinZoom=function(){return this.transform.minZoom},x.prototype.setMaxZoom=function(d){if((d=d??22)>=this.transform.minZoom)return this.transform.maxZoom=d,this._update(),this.getZoom()>d&&this.setZoom(d),this;throw new Error("maxZoom must be greater than the current minZoom")},x.prototype.getMaxZoom=function(){return this.transform.maxZoom},x.prototype.setMinPitch=function(d){if((d=d??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(d>=0&&d<=this.transform.maxPitch)return this.transform.minPitch=d,this._update(),this.getPitch()<d&&this.setPitch(d),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")},x.prototype.getMinPitch=function(){return this.transform.minPitch},x.prototype.setMaxPitch=function(d){if((d=d??60)>60)throw new Error("maxPitch must be less than or equal to 60");if(d>=this.transform.minPitch)return this.transform.maxPitch=d,this._update(),this.getPitch()>d&&this.setPitch(d),this;throw new Error("maxPitch must be greater than the current minPitch")},x.prototype.getMaxPitch=function(){return this.transform.maxPitch},x.prototype.getRenderWorldCopies=function(){return this.transform.renderWorldCopies},x.prototype.setRenderWorldCopies=function(d){return this.transform.renderWorldCopies=d,this._update()},x.prototype.project=function(d){return this.transform.locationPoint(a.LngLat.convert(d))},x.prototype.unproject=function(d){return this.transform.pointLocation(a.Point.convert(d))},x.prototype.isMoving=function(){return this._moving||this.handlers.isMoving()},x.prototype.isZooming=function(){return this._zooming||this.handlers.isZooming()},x.prototype.isRotating=function(){return this._rotating||this.handlers.isRotating()},x.prototype._createDelegatedListener=function(d,y,N){var k,I=this;if(d==="mouseenter"||d==="mouseover"){var U=!1;return{layer:y,listener:N,delegates:{mousemove:function(W){var Y=I.getLayer(y)?I.queryRenderedFeatures(W.point,{layers:[y]}):[];Y.length?U||(U=!0,N.call(I,new _i(d,I,W.originalEvent,{features:Y}))):U=!1},mouseout:function(){U=!1}}}}if(d==="mouseleave"||d==="mouseout"){var $=!1;return{layer:y,listener:N,delegates:{mousemove:function(W){(I.getLayer(y)?I.queryRenderedFeatures(W.point,{layers:[y]}):[]).length?$=!0:$&&($=!1,N.call(I,new _i(d,I,W.originalEvent)))},mouseout:function(W){$&&($=!1,N.call(I,new _i(d,I,W.originalEvent)))}}}}return{layer:y,listener:N,delegates:(k={},k[d]=function(W){var Y=I.getLayer(y)?I.queryRenderedFeatures(W.point,{layers:[y]}):[];Y.length&&(W.features=Y,N.call(I,W),delete W.features)},k)}},x.prototype.on=function(d,y,N){if(N===void 0)return m.prototype.on.call(this,d,y);var k=this._createDelegatedListener(d,y,N);for(var I in this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[d]=this._delegatedListeners[d]||[],this._delegatedListeners[d].push(k),k.delegates)this.on(I,k.delegates[I]);return this},x.prototype.once=function(d,y,N){if(N===void 0)return m.prototype.once.call(this,d,y);var k=this._createDelegatedListener(d,y,N);for(var I in k.delegates)this.once(I,k.delegates[I]);return this},x.prototype.off=function(d,y,N){var k=this;return N===void 0?m.prototype.off.call(this,d,y):(this._delegatedListeners&&this._delegatedListeners[d]&&(function(I){for(var U=I[d],$=0;$<U.length;$++){var W=U[$];if(W.layer===y&&W.listener===N){for(var Y in W.delegates)k.off(Y,W.delegates[Y]);return U.splice($,1),k}}})(this._delegatedListeners),this)},x.prototype.queryRenderedFeatures=function(d,y){if(!this.style)return[];var N;if(y!==void 0||d===void 0||d instanceof a.Point||Array.isArray(d)||(y=d,d=void 0),y=y||{},(d=d||[[0,0],[this.transform.width,this.transform.height]])instanceof a.Point||typeof d[0]=="number")N=[a.Point.convert(d)];else{var k=a.Point.convert(d[0]),I=a.Point.convert(d[1]);N=[k,new a.Point(I.x,k.y),I,new a.Point(k.x,I.y),k]}return this.style.queryRenderedFeatures(N,y,this.transform)},x.prototype.querySourceFeatures=function(d,y){return this.style.querySourceFeatures(d,y)},x.prototype.setStyle=function(d,y){return(y=a.extend({},{localIdeographFontFamily:this._localIdeographFontFamily},y)).diff!==!1&&y.localIdeographFontFamily===this._localIdeographFontFamily&&this.style&&d?(this._diffStyle(d,y),this):(this._localIdeographFontFamily=y.localIdeographFontFamily,this._updateStyle(d,y))},x.prototype._getUIString=function(d){var y=this._locale[d];if(y==null)throw new Error("Missing UI string '"+d+"'");return y},x.prototype._updateStyle=function(d,y){return this.style&&(this.style.setEventedParent(null),this.style._remove()),d?(this.style=new aa(this,y||{}),this.style.setEventedParent(this,{style:this.style}),typeof d=="string"?this.style.loadURL(d):this.style.loadJSON(d),this):(delete this.style,this)},x.prototype._lazyInitEmptyStyle=function(){this.style||(this.style=new aa(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())},x.prototype._diffStyle=function(d,y){var N=this;if(typeof d=="string"){var k=this._requestManager.normalizeStyleURL(d),I=this._requestManager.transformRequest(k,a.ResourceType.Style);a.getJSON(I,(function(U,$){U?N.fire(new a.ErrorEvent(U)):$&&N._updateDiff($,y)}))}else typeof d=="object"&&this._updateDiff(d,y)},x.prototype._updateDiff=function(d,y){try{this.style.setState(d)&&this._update(!0)}catch(N){a.warnOnce("Unable to perform style diff: "+(N.message||N.error||N)+".  Rebuilding the style from scratch."),this._updateStyle(d,y)}},x.prototype.getStyle=function(){if(this.style)return this.style.serialize()},x.prototype.isStyleLoaded=function(){return this.style?this.style.loaded():a.warnOnce("There is no style added to the map.")},x.prototype.addSource=function(d,y){return this._lazyInitEmptyStyle(),this.style.addSource(d,y),this._update(!0)},x.prototype.isSourceLoaded=function(d){var y=this.style&&this.style.sourceCaches[d];if(y!==void 0)return y.loaded();this.fire(new a.ErrorEvent(new Error("There is no source with ID '"+d+"'")))},x.prototype.areTilesLoaded=function(){var d=this.style&&this.style.sourceCaches;for(var y in d){var N=d[y]._tiles;for(var k in N){var I=N[k];if(I.state!=="loaded"&&I.state!=="errored")return!1}}return!0},x.prototype.addSourceType=function(d,y,N){return this._lazyInitEmptyStyle(),this.style.addSourceType(d,y,N)},x.prototype.removeSource=function(d){return this.style.removeSource(d),this._update(!0)},x.prototype.getSource=function(d){return this.style.getSource(d)},x.prototype.addImage=function(d,y,N){N===void 0&&(N={});var k=N.pixelRatio;k===void 0&&(k=1);var I=N.sdf;I===void 0&&(I=!1);var U=N.stretchX,$=N.stretchY,W=N.content;if(this._lazyInitEmptyStyle(),y instanceof Ls||Gn&&y instanceof Gn){var Y=a.browser.getImageData(y);this.style.addImage(d,{data:new a.RGBAImage({width:Y.width,height:Y.height},Y.data),pixelRatio:k,stretchX:U,stretchY:$,content:W,sdf:I,version:0})}else{if(y.width===void 0||y.height===void 0)return this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));var X=y;this.style.addImage(d,{data:new a.RGBAImage({width:y.width,height:y.height},new Uint8Array(y.data)),pixelRatio:k,stretchX:U,stretchY:$,content:W,sdf:I,version:0,userImage:X}),X.onAdd&&X.onAdd(this,d)}},x.prototype.updateImage=function(d,y){var N=this.style.getImage(d);if(!N)return this.fire(new a.ErrorEvent(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));var k=y instanceof Ls||Gn&&y instanceof Gn?a.browser.getImageData(y):y,I=k.width,U=k.height,$=k.data;return I===void 0||U===void 0?this.fire(new a.ErrorEvent(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`"))):I!==N.data.width||U!==N.data.height?this.fire(new a.ErrorEvent(new Error("The width and height of the updated image must be that same as the previous version of the image"))):(N.data.replace($,!(y instanceof Ls||Gn&&y instanceof Gn)),void this.style.updateImage(d,N))},x.prototype.hasImage=function(d){return d?!!this.style.getImage(d):(this.fire(new a.ErrorEvent(new Error("Missing required image id"))),!1)},x.prototype.removeImage=function(d){this.style.removeImage(d)},x.prototype.loadImage=function(d,y){a.getImage(this._requestManager.transformRequest(d,a.ResourceType.Image),y)},x.prototype.listImages=function(){return this.style.listImages()},x.prototype.addLayer=function(d,y){return this._lazyInitEmptyStyle(),this.style.addLayer(d,y),this._update(!0)},x.prototype.moveLayer=function(d,y){return this.style.moveLayer(d,y),this._update(!0)},x.prototype.removeLayer=function(d){return this.style.removeLayer(d),this._update(!0)},x.prototype.getLayer=function(d){return this.style.getLayer(d)},x.prototype.setLayerZoomRange=function(d,y,N){return this.style.setLayerZoomRange(d,y,N),this._update(!0)},x.prototype.setFilter=function(d,y,N){return N===void 0&&(N={}),this.style.setFilter(d,y,N),this._update(!0)},x.prototype.getFilter=function(d){return this.style.getFilter(d)},x.prototype.setPaintProperty=function(d,y,N,k){return k===void 0&&(k={}),this.style.setPaintProperty(d,y,N,k),this._update(!0)},x.prototype.getPaintProperty=function(d,y){return this.style.getPaintProperty(d,y)},x.prototype.setLayoutProperty=function(d,y,N,k){return k===void 0&&(k={}),this.style.setLayoutProperty(d,y,N,k),this._update(!0)},x.prototype.getLayoutProperty=function(d,y){return this.style.getLayoutProperty(d,y)},x.prototype.setLight=function(d,y){return y===void 0&&(y={}),this._lazyInitEmptyStyle(),this.style.setLight(d,y),this._update(!0)},x.prototype.getLight=function(){return this.style.getLight()},x.prototype.setFeatureState=function(d,y){return this.style.setFeatureState(d,y),this._update()},x.prototype.removeFeatureState=function(d,y){return this.style.removeFeatureState(d,y),this._update()},x.prototype.getFeatureState=function(d){return this.style.getFeatureState(d)},x.prototype.getContainer=function(){return this._container},x.prototype.getCanvasContainer=function(){return this._canvasContainer},x.prototype.getCanvas=function(){return this._canvas},x.prototype._containerDimensions=function(){var d=0,y=0;return this._container&&(d=this._container.clientWidth||400,y=this._container.clientHeight||300),[d,y]},x.prototype._detectMissingCSS=function(){a.window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&a.warnOnce("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")},x.prototype._setupContainer=function(){var d=this._container;d.classList.add("mapboxgl-map"),(this._missingCSSCanary=g.create("div","mapboxgl-canary",d)).style.visibility="hidden",this._detectMissingCSS();var y=this._canvasContainer=g.create("div","mapboxgl-canvas-container",d);this._interactive&&y.classList.add("mapboxgl-interactive"),this._canvas=g.create("canvas","mapboxgl-canvas",y),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("tabindex","0"),this._canvas.setAttribute("aria-label","Map"),this._canvas.setAttribute("role","region");var N=this._containerDimensions();this._resizeCanvas(N[0],N[1]);var k=this._controlContainer=g.create("div","mapboxgl-control-container",d),I=this._controlPositions={};["top-left","top-right","bottom-left","bottom-right"].forEach((function(U){I[U]=g.create("div","mapboxgl-ctrl-"+U,k)})),this._container.addEventListener("scroll",this._onMapScroll,!1)},x.prototype._resizeCanvas=function(d,y){var N=a.browser.devicePixelRatio||1;this._canvas.width=N*d,this._canvas.height=N*y,this._canvas.style.width=d+"px",this._canvas.style.height=y+"px"},x.prototype._setupPainter=function(){var d=a.extend({},p.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),y=this._canvas.getContext("webgl",d)||this._canvas.getContext("experimental-webgl",d);y?(this.painter=new ji(y,this.transform),a.webpSupported.testSupport(y)):this.fire(new a.ErrorEvent(new Error("Failed to initialize WebGL")))},x.prototype._contextLost=function(d){d.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new a.Event("webglcontextlost",{originalEvent:d}))},x.prototype._contextRestored=function(d){this._setupPainter(),this.resize(),this._update(),this.fire(new a.Event("webglcontextrestored",{originalEvent:d}))},x.prototype._onMapScroll=function(d){if(d.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1},x.prototype.loaded=function(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()},x.prototype._update=function(d){return this.style?(this._styleDirty=this._styleDirty||d,this._sourcesDirty=!0,this.triggerRepaint(),this):this},x.prototype._requestRenderFrame=function(d){return this._update(),this._renderTaskQueue.add(d)},x.prototype._cancelRenderFrame=function(d){this._renderTaskQueue.remove(d)},x.prototype._render=function(d){var y,N=this,k=0,I=this.painter.context.extTimerQuery;if(this.listens("gpu-timing-frame")&&(y=I.createQueryEXT(),I.beginQueryEXT(I.TIME_ELAPSED_EXT,y),k=a.browser.now()),this.painter.context.setDirty(),this.painter.setBaseState(),this._renderTaskQueue.run(d),!this._removed){var U=!1;if(this.style&&this._styleDirty){this._styleDirty=!1;var $=this.transform.zoom,W=a.browser.now();this.style.zoomHistory.update($,W);var Y=new a.EvaluationParameters($,{now:W,fadeDuration:this._fadeDuration,zoomHistory:this.style.zoomHistory,transition:this.style.getTransition()}),X=Y.crossFadingFactor();X===1&&X===this._crossFadingFactor||(U=!0,this._crossFadingFactor=X),this.style.update(Y)}if(this.style&&this._sourcesDirty&&(this._sourcesDirty=!1,this.style._updateSources(this.transform)),this._placementDirty=this.style&&this.style._updatePlacement(this.painter.transform,this.showCollisionBoxes,this._fadeDuration,this._crossSourceCollisions),this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showOverdrawInspector:this._showOverdrawInspector,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:this._fadeDuration,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer")}),this.fire(new a.Event("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,this.fire(new a.Event("load"))),this.style&&(this.style.hasTransitions()||U)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),this.listens("gpu-timing-frame")){var le=a.browser.now()-k;I.endQueryEXT(I.TIME_ELAPSED_EXT,y),setTimeout((function(){var de=I.getQueryObjectEXT(y,I.QUERY_RESULT_EXT)/1e6;I.deleteQueryEXT(y),N.fire(new a.Event("gpu-timing-frame",{cpuTime:le,gpuTime:de}))}),50)}if(this.listens("gpu-timing-layer")){var ve=this.painter.collectGpuTimers();setTimeout((function(){var de=N.painter.queryGpuTimers(ve);N.fire(new a.Event("gpu-timing-layer",{layerTimes:de}))}),50)}var je=this._sourcesDirty||this._styleDirty||this._placementDirty;return je||this._repaint?this.triggerRepaint():!this.isMoving()&&this.loaded()&&this.fire(new a.Event("idle")),!this._loaded||this._fullyLoaded||je||(this._fullyLoaded=!0),this}},x.prototype.remove=function(){this._hash&&this._hash.remove();for(var d=0,y=this._controls;d<y.length;d+=1)y[d].onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this.painter.destroy(),this.handlers.destroy(),delete this.handlers,this.setStyle(null),a.window!==void 0&&(a.window.removeEventListener("resize",this._onWindowResize,!1),a.window.removeEventListener("orientationchange",this._onWindowResize,!1),a.window.removeEventListener("online",this._onWindowOnline,!1));var N=this.painter.context.gl.getExtension("WEBGL_lose_context");N&&N.loseContext(),Bs(this._canvasContainer),Bs(this._controlContainer),Bs(this._missingCSSCanary),this._container.classList.remove("mapboxgl-map"),this._removed=!0,this.fire(new a.Event("remove"))},x.prototype.triggerRepaint=function(){var d=this;this.style&&!this._frame&&(this._frame=a.browser.frame((function(y){d._frame=null,d._render(y)})))},x.prototype._onWindowOnline=function(){this._update()},x.prototype._onWindowResize=function(d){this._trackResize&&this.resize({originalEvent:d})._update()},v.showTileBoundaries.get=function(){return!!this._showTileBoundaries},v.showTileBoundaries.set=function(d){this._showTileBoundaries!==d&&(this._showTileBoundaries=d,this._update())},v.showPadding.get=function(){return!!this._showPadding},v.showPadding.set=function(d){this._showPadding!==d&&(this._showPadding=d,this._update())},v.showCollisionBoxes.get=function(){return!!this._showCollisionBoxes},v.showCollisionBoxes.set=function(d){this._showCollisionBoxes!==d&&(this._showCollisionBoxes=d,d?this.style._generateCollisionBoxes():this._update())},v.showOverdrawInspector.get=function(){return!!this._showOverdrawInspector},v.showOverdrawInspector.set=function(d){this._showOverdrawInspector!==d&&(this._showOverdrawInspector=d,this._update())},v.repaint.get=function(){return!!this._repaint},v.repaint.set=function(d){this._repaint!==d&&(this._repaint=d,this.triggerRepaint())},v.vertices.get=function(){return!!this._vertices},v.vertices.set=function(d){this._vertices=d,this._update()},x.prototype._setCacheLimits=function(d,y){a.setCacheLimits(d,y)},v.version.get=function(){return a.version},Object.defineProperties(x.prototype,v),x})(sh);function Bs(m){m.parentNode&&m.parentNode.removeChild(m)}var uu={showCompass:!0,showZoom:!0,visualizePitch:!1},gc=function(m){var x=this;this.options=a.extend({},uu,m),this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",(function(v){return v.preventDefault()})),this.options.showZoom&&(a.bindAll(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",(function(v){return x._map.zoomIn({},{originalEvent:v})})),g.create("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden",!0),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",(function(v){return x._map.zoomOut({},{originalEvent:v})})),g.create("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden",!0)),this.options.showCompass&&(a.bindAll(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",(function(v){x.options.visualizePitch?x._map.resetNorthPitch({},{originalEvent:v}):x._map.resetNorth({},{originalEvent:v})})),this._compassIcon=g.create("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden",!0))};gc.prototype._updateZoomButtons=function(){var m=this._map.getZoom(),x=m===this._map.getMaxZoom(),v=m===this._map.getMinZoom();this._zoomInButton.disabled=x,this._zoomOutButton.disabled=v,this._zoomInButton.setAttribute("aria-disabled",x.toString()),this._zoomOutButton.setAttribute("aria-disabled",v.toString())},gc.prototype._rotateCompassArrow=function(){var m=this.options.visualizePitch?"scale("+1/Math.pow(Math.cos(this._map.transform.pitch*(Math.PI/180)),.5)+") rotateX("+this._map.transform.pitch+"deg) rotateZ("+this._map.transform.angle*(180/Math.PI)+"deg)":"rotate("+this._map.transform.angle*(180/Math.PI)+"deg)";this._compassIcon.style.transform=m},gc.prototype.onAdd=function(m){return this._map=m,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),this._map.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&this._map.on("pitch",this._rotateCompassArrow),this._map.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Oa(this._map,this._compass,this.options.visualizePitch)),this._container},gc.prototype.onRemove=function(){g.remove(this._container),this.options.showZoom&&this._map.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&this._map.off("pitch",this._rotateCompassArrow),this._map.off("rotate",this._rotateCompassArrow),this._handler.off(),delete this._handler),delete this._map},gc.prototype._createButton=function(m,x){var v=g.create("button",m,this._container);return v.type="button",v.addEventListener("click",x),v},gc.prototype._setButtonTitle=function(m,x){var v=this._map._getUIString("NavigationControl."+x);m.title=v,m.setAttribute("aria-label",v)};var Oa=function(m,x,v){v===void 0&&(v=!1),this._clickTolerance=10,this.element=x,this.mouseRotate=new Gu({clickTolerance:m.dragRotate._mouseRotate._clickTolerance}),this.map=m,v&&(this.mousePitch=new Ya({clickTolerance:m.dragRotate._mousePitch._clickTolerance})),a.bindAll(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),g.addEventListener(x,"mousedown",this.mousedown),g.addEventListener(x,"touchstart",this.touchstart,{passive:!1}),g.addEventListener(x,"touchmove",this.touchmove),g.addEventListener(x,"touchend",this.touchend),g.addEventListener(x,"touchcancel",this.reset)};function du(m,x,v){if(m=new a.LngLat(m.lng,m.lat),x){var d=new a.LngLat(m.lng-360,m.lat),y=new a.LngLat(m.lng+360,m.lat),N=v.locationPoint(m).distSqr(x);v.locationPoint(d).distSqr(x)<N?m=d:v.locationPoint(y).distSqr(x)<N&&(m=y)}for(;Math.abs(m.lng-v.center.lng)>180;){var k=v.locationPoint(m);if(k.x>=0&&k.y>=0&&k.x<=v.width&&k.y<=v.height)break;m.lng>v.center.lng?m.lng-=360:m.lng+=360}return m}Oa.prototype.down=function(m,x){this.mouseRotate.mousedown(m,x),this.mousePitch&&this.mousePitch.mousedown(m,x),g.disableDrag()},Oa.prototype.move=function(m,x){var v=this.map,d=this.mouseRotate.mousemoveWindow(m,x);if(d&&d.bearingDelta&&v.setBearing(v.getBearing()+d.bearingDelta),this.mousePitch){var y=this.mousePitch.mousemoveWindow(m,x);y&&y.pitchDelta&&v.setPitch(v.getPitch()+y.pitchDelta)}},Oa.prototype.off=function(){var m=this.element;g.removeEventListener(m,"mousedown",this.mousedown),g.removeEventListener(m,"touchstart",this.touchstart,{passive:!1}),g.removeEventListener(m,"touchmove",this.touchmove),g.removeEventListener(m,"touchend",this.touchend),g.removeEventListener(m,"touchcancel",this.reset),this.offTemp()},Oa.prototype.offTemp=function(){g.enableDrag(),g.removeEventListener(a.window,"mousemove",this.mousemove),g.removeEventListener(a.window,"mouseup",this.mouseup)},Oa.prototype.mousedown=function(m){this.down(a.extend({},m,{ctrlKey:!0,preventDefault:function(){return m.preventDefault()}}),g.mousePos(this.element,m)),g.addEventListener(a.window,"mousemove",this.mousemove),g.addEventListener(a.window,"mouseup",this.mouseup)},Oa.prototype.mousemove=function(m){this.move(m,g.mousePos(this.element,m))},Oa.prototype.mouseup=function(m){this.mouseRotate.mouseupWindow(m),this.mousePitch&&this.mousePitch.mouseupWindow(m),this.offTemp()},Oa.prototype.touchstart=function(m){m.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=g.touchPos(this.element,m.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:function(){return m.preventDefault()}},this._startPos))},Oa.prototype.touchmove=function(m){m.targetTouches.length!==1?this.reset():(this._lastPos=g.touchPos(this.element,m.targetTouches)[0],this.move({preventDefault:function(){return m.preventDefault()}},this._lastPos))},Oa.prototype.touchend=function(m){m.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()},Oa.prototype.reset=function(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()};var no={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};function Pl(m,x,v){var d=m.classList;for(var y in no)d.remove("mapboxgl-"+v+"-anchor-"+y);d.add("mapboxgl-"+v+"-anchor-"+x)}var Rl,wo=(function(m){function x(v,d){if(m.call(this),(v instanceof a.window.HTMLElement||d)&&(v=a.extend({element:v},d)),a.bindAll(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress"],this),this._anchor=v&&v.anchor||"center",this._color=v&&v.color||"#3FB1CE",this._scale=v&&v.scale||1,this._draggable=v&&v.draggable||!1,this._clickTolerance=v&&v.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=v&&v.rotation||0,this._rotationAlignment=v&&v.rotationAlignment||"auto",this._pitchAlignment=v&&v.pitchAlignment&&v.pitchAlignment!=="auto"?v.pitchAlignment:this._rotationAlignment,v&&v.element)this._element=v.element,this._offset=a.Point.convert(v&&v.offset||[0,0]);else{this._defaultMarker=!0,this._element=g.create("div"),this._element.setAttribute("aria-label","Map marker");var y=g.createNS("http://www.w3.org/2000/svg","svg");y.setAttributeNS(null,"display","block"),y.setAttributeNS(null,"height","41px"),y.setAttributeNS(null,"width","27px"),y.setAttributeNS(null,"viewBox","0 0 27 41");var N=g.createNS("http://www.w3.org/2000/svg","g");N.setAttributeNS(null,"stroke","none"),N.setAttributeNS(null,"stroke-width","1"),N.setAttributeNS(null,"fill","none"),N.setAttributeNS(null,"fill-rule","evenodd");var k=g.createNS("http://www.w3.org/2000/svg","g");k.setAttributeNS(null,"fill-rule","nonzero");var I=g.createNS("http://www.w3.org/2000/svg","g");I.setAttributeNS(null,"transform","translate(3.0, 29.0)"),I.setAttributeNS(null,"fill","#000000");for(var U=0,$=[{rx:"10.5",ry:"5.25002273"},{rx:"10.5",ry:"5.25002273"},{rx:"9.5",ry:"4.77275007"},{rx:"8.5",ry:"4.29549936"},{rx:"7.5",ry:"3.81822308"},{rx:"6.5",ry:"3.34094679"},{rx:"5.5",ry:"2.86367051"},{rx:"4.5",ry:"2.38636864"}];U<$.length;U+=1){var W=$[U],Y=g.createNS("http://www.w3.org/2000/svg","ellipse");Y.setAttributeNS(null,"opacity","0.04"),Y.setAttributeNS(null,"cx","10.5"),Y.setAttributeNS(null,"cy","5.80029008"),Y.setAttributeNS(null,"rx",W.rx),Y.setAttributeNS(null,"ry",W.ry),I.appendChild(Y)}var X=g.createNS("http://www.w3.org/2000/svg","g");X.setAttributeNS(null,"fill",this._color);var le=g.createNS("http://www.w3.org/2000/svg","path");le.setAttributeNS(null,"d","M27,13.5 C27,19.074644 20.250001,27.000002 14.75,34.500002 C14.016665,35.500004 12.983335,35.500004 12.25,34.500002 C6.7499993,27.000002 0,19.222562 0,13.5 C0,6.0441559 6.0441559,0 13.5,0 C20.955844,0 27,6.0441559 27,13.5 Z"),X.appendChild(le);var ve=g.createNS("http://www.w3.org/2000/svg","g");ve.setAttributeNS(null,"opacity","0.25"),ve.setAttributeNS(null,"fill","#000000");var je=g.createNS("http://www.w3.org/2000/svg","path");je.setAttributeNS(null,"d","M13.5,0 C6.0441559,0 0,6.0441559 0,13.5 C0,19.222562 6.7499993,27 12.25,34.5 C13,35.522727 14.016664,35.500004 14.75,34.5 C20.250001,27 27,19.074644 27,13.5 C27,6.0441559 20.955844,0 13.5,0 Z M13.5,1 C20.415404,1 26,6.584596 26,13.5 C26,15.898657 24.495584,19.181431 22.220703,22.738281 C19.945823,26.295132 16.705119,30.142167 13.943359,33.908203 C13.743445,34.180814 13.612715,34.322738 13.5,34.441406 C13.387285,34.322738 13.256555,34.180814 13.056641,33.908203 C10.284481,30.127985 7.4148684,26.314159 5.015625,22.773438 C2.6163816,19.232715 1,15.953538 1,13.5 C1,6.584596 6.584596,1 13.5,1 Z"),ve.appendChild(je);var de=g.createNS("http://www.w3.org/2000/svg","g");de.setAttributeNS(null,"transform","translate(6.0, 7.0)"),de.setAttributeNS(null,"fill","#FFFFFF");var Pe=g.createNS("http://www.w3.org/2000/svg","g");Pe.setAttributeNS(null,"transform","translate(8.0, 8.0)");var Ie=g.createNS("http://www.w3.org/2000/svg","circle");Ie.setAttributeNS(null,"fill","#000000"),Ie.setAttributeNS(null,"opacity","0.25"),Ie.setAttributeNS(null,"cx","5.5"),Ie.setAttributeNS(null,"cy","5.5"),Ie.setAttributeNS(null,"r","5.4999962");var Ae=g.createNS("http://www.w3.org/2000/svg","circle");Ae.setAttributeNS(null,"fill","#FFFFFF"),Ae.setAttributeNS(null,"cx","5.5"),Ae.setAttributeNS(null,"cy","5.5"),Ae.setAttributeNS(null,"r","5.4999962"),Pe.appendChild(Ie),Pe.appendChild(Ae),k.appendChild(I),k.appendChild(X),k.appendChild(ve),k.appendChild(de),k.appendChild(Pe),y.appendChild(k),y.setAttributeNS(null,"height",41*this._scale+"px"),y.setAttributeNS(null,"width",27*this._scale+"px"),this._element.appendChild(y),this._offset=a.Point.convert(v&&v.offset||[0,-14])}this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",(function(Le){Le.preventDefault()})),this._element.addEventListener("mousedown",(function(Le){Le.preventDefault()})),Pl(this._element,this._anchor,"marker"),this._popup=null}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.addTo=function(v){return this.remove(),this._map=v,v.getCanvasContainer().appendChild(this._element),v.on("move",this._update),v.on("moveend",this._update),this.setDraggable(this._draggable),this._update(),this._map.on("click",this._onMapClick),this},x.prototype.remove=function(){return this._map&&(this._map.off("click",this._onMapClick),this._map.off("move",this._update),this._map.off("moveend",this._update),this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler),this._map.off("mouseup",this._onUp),this._map.off("touchend",this._onUp),this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),delete this._map),g.remove(this._element),this._popup&&this._popup.remove(),this},x.prototype.getLngLat=function(){return this._lngLat},x.prototype.setLngLat=function(v){return this._lngLat=a.LngLat.convert(v),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(),this},x.prototype.getElement=function(){return this._element},x.prototype.setPopup=function(v){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),v){if(!("offset"in v.options)){var d=Math.sqrt(Math.pow(13.5,2)/2);v.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[d,-1*(24.6+d)],"bottom-right":[-d,-1*(24.6+d)],left:[13.5,-24.6],right:[-13.5,-24.6]}:this._offset}this._popup=v,this._lngLat&&this._popup.setLngLat(this._lngLat),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress)}return this},x.prototype._onKeyPress=function(v){var d=v.code,y=v.charCode||v.keyCode;d!=="Space"&&d!=="Enter"&&y!==32&&y!==13||this.togglePopup()},x.prototype._onMapClick=function(v){var d=v.originalEvent.target,y=this._element;this._popup&&(d===y||y.contains(d))&&this.togglePopup()},x.prototype.getPopup=function(){return this._popup},x.prototype.togglePopup=function(){var v=this._popup;return v?(v.isOpen()?v.remove():v.addTo(this._map),this):this},x.prototype._update=function(v){if(this._map){this._map.transform.renderWorldCopies&&(this._lngLat=du(this._lngLat,this._pos,this._map.transform)),this._pos=this._map.project(this._lngLat)._add(this._offset);var d="";this._rotationAlignment==="viewport"||this._rotationAlignment==="auto"?d="rotateZ("+this._rotation+"deg)":this._rotationAlignment==="map"&&(d="rotateZ("+(this._rotation-this._map.getBearing())+"deg)");var y="";this._pitchAlignment==="viewport"||this._pitchAlignment==="auto"?y="rotateX(0deg)":this._pitchAlignment==="map"&&(y="rotateX("+this._map.getPitch()+"deg)"),v&&v.type!=="moveend"||(this._pos=this._pos.round()),g.setTransform(this._element,no[this._anchor]+" translate("+this._pos.x+"px, "+this._pos.y+"px) "+y+" "+d)}},x.prototype.getOffset=function(){return this._offset},x.prototype.setOffset=function(v){return this._offset=a.Point.convert(v),this._update(),this},x.prototype._onMove=function(v){if(!this._isDragging){var d=this._clickTolerance||this._map._clickTolerance;this._isDragging=v.point.dist(this._pointerdownPos)>=d}this._isDragging&&(this._pos=v.point.sub(this._positionDelta),this._lngLat=this._map.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new a.Event("dragstart"))),this.fire(new a.Event("drag")))},x.prototype._onUp=function(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1,this._map.off("mousemove",this._onMove),this._map.off("touchmove",this._onMove),this._state==="active"&&this.fire(new a.Event("dragend")),this._state="inactive"},x.prototype._addDragHandler=function(v){this._element.contains(v.originalEvent.target)&&(v.preventDefault(),this._positionDelta=v.point.sub(this._pos).add(this._offset),this._pointerdownPos=v.point,this._state="pending",this._map.on("mousemove",this._onMove),this._map.on("touchmove",this._onMove),this._map.once("mouseup",this._onUp),this._map.once("touchend",this._onUp))},x.prototype.setDraggable=function(v){return this._draggable=!!v,this._map&&(v?(this._map.on("mousedown",this._addDragHandler),this._map.on("touchstart",this._addDragHandler)):(this._map.off("mousedown",this._addDragHandler),this._map.off("touchstart",this._addDragHandler))),this},x.prototype.isDraggable=function(){return this._draggable},x.prototype.setRotation=function(v){return this._rotation=v||0,this._update(),this},x.prototype.getRotation=function(){return this._rotation},x.prototype.setRotationAlignment=function(v){return this._rotationAlignment=v||"auto",this._update(),this},x.prototype.getRotationAlignment=function(){return this._rotationAlignment},x.prototype.setPitchAlignment=function(v){return this._pitchAlignment=v&&v!=="auto"?v:this._rotationAlignment,this._update(),this},x.prototype.getPitchAlignment=function(){return this._pitchAlignment},x})(a.Evented),Tu={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0},Zl=0,ol=!1,kd=(function(m){function x(v){m.call(this),this.options=a.extend({},Tu,v),a.bindAll(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker"],this)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.onAdd=function(v){var d;return this._map=v,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),d=this._setupUI,Rl!==void 0?d(Rl):a.window.navigator.permissions!==void 0?a.window.navigator.permissions.query({name:"geolocation"}).then((function(y){d(Rl=y.state!=="denied")})):d(Rl=!!a.window.navigator.geolocation),this._container},x.prototype.onRemove=function(){this._geolocationWatchID!==void 0&&(a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),g.remove(this._container),this._map.off("zoom",this._onZoom),this._map=void 0,Zl=0,ol=!1},x.prototype._isOutOfMapMaxBounds=function(v){var d=this._map.getMaxBounds(),y=v.coords;return d&&(y.longitude<d.getWest()||y.longitude>d.getEast()||y.latitude<d.getSouth()||y.latitude>d.getNorth())},x.prototype._setErrorState=function(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}},x.prototype._onSuccess=function(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new a.Event("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._dotElement.classList.remove("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("geolocate",v)),this._finish()}},x.prototype._updateCamera=function(v){var d=new a.LngLat(v.coords.longitude,v.coords.latitude),y=v.coords.accuracy,N=this._map.getBearing(),k=a.extend({bearing:N},this.options.fitBoundsOptions);this._map.fitBounds(d.toBounds(y),k,{geolocateSource:!0})},x.prototype._updateMarker=function(v){if(v){var d=new a.LngLat(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(d).addTo(this._map),this._userLocationDotMarker.setLngLat(d).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()},x.prototype._updateCircleRadius=function(){var v=this._map._container.clientHeight/2,d=this._map.unproject([0,v]),y=this._map.unproject([1,v]),N=d.distanceTo(y),k=Math.ceil(2*this._accuracy/N);this._circleElement.style.width=k+"px",this._circleElement.style.height=k+"px"},x.prototype._onZoom=function(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()},x.prototype._onError=function(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;var d=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.title=d,this._geolocateButton.setAttribute("aria-label",d),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&ol)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._dotElement.classList.add("mapboxgl-user-location-dot-stale"),this.fire(new a.Event("error",v)),this._finish()}},x.prototype._finish=function(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0},x.prototype._setupUI=function(v){var d=this;if(this._container.addEventListener("contextmenu",(function(k){return k.preventDefault()})),this._geolocateButton=g.create("button","mapboxgl-ctrl-geolocate",this._container),g.create("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden",!0),this._geolocateButton.type="button",v===!1){a.warnOnce("Geolocation support is not available so the GeolocateControl will be disabled.");var y=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.title=y,this._geolocateButton.setAttribute("aria-label",y)}else{var N=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.title=N,this._geolocateButton.setAttribute("aria-label",N)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=g.create("div","mapboxgl-user-location-dot"),this._userLocationDotMarker=new wo(this._dotElement),this._circleElement=g.create("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new wo({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",(function(k){k.geolocateSource||d._watchState!=="ACTIVE_LOCK"||k.originalEvent&&k.originalEvent.type==="resize"||(d._watchState="BACKGROUND",d._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),d._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),d.fire(new a.Event("trackuserlocationend")))}))},x.prototype.trigger=function(){if(!this._setup)return a.warnOnce("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new a.Event("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":Zl--,ol=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new a.Event("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new a.Event("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){var v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),++Zl>1?(v={maximumAge:6e5,timeout:0},ol=!0):(v=this.options.positionOptions,ol=!1),this._geolocationWatchID=a.window.navigator.geolocation.watchPosition(this._onSuccess,this._onError,v)}}else a.window.navigator.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=setTimeout(this._finish,1e4);return!0},x.prototype._clearWatch=function(){a.window.navigator.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)},x})(a.Evented),Oo={maxWidth:100,unit:"metric"},Ms=function(m){this.options=a.extend({},Oo,m),a.bindAll(["_onMove","setUnit"],this)};function Wu(m,x,v){var d=v&&v.maxWidth||100,y=m._container.clientHeight/2,N=m.unproject([0,y]),k=m.unproject([d,y]),I=N.distanceTo(k);if(v&&v.unit==="imperial"){var U=3.2808*I;U>5280?hu(x,d,U/5280,m._getUIString("ScaleControl.Miles")):hu(x,d,U,m._getUIString("ScaleControl.Feet"))}else v&&v.unit==="nautical"?hu(x,d,I/1852,m._getUIString("ScaleControl.NauticalMiles")):I>=1e3?hu(x,d,I/1e3,m._getUIString("ScaleControl.Kilometers")):hu(x,d,I,m._getUIString("ScaleControl.Meters"))}function hu(m,x,v,d){var y,N,k,I=(y=v,(N=Math.pow(10,(""+Math.floor(y)).length-1))*(k=(k=y/N)>=10?10:k>=5?5:k>=3?3:k>=2?2:k>=1?1:(function(U){var $=Math.pow(10,Math.ceil(-Math.log(U)/Math.LN10));return Math.round(U*$)/$})(k)));m.style.width=x*(I/v)+"px",m.innerHTML=I+"&nbsp;"+d}Ms.prototype.getDefaultPosition=function(){return"bottom-left"},Ms.prototype._onMove=function(){Wu(this._map,this._container,this.options)},Ms.prototype.onAdd=function(m){return this._map=m,this._container=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-scale",m.getContainer()),this._map.on("move",this._onMove),this._onMove(),this._container},Ms.prototype.onRemove=function(){g.remove(this._container),this._map.off("move",this._onMove),this._map=void 0},Ms.prototype.setUnit=function(m){this.options.unit=m,Wu(this._map,this._container,this.options)};var Kl=function(m){this._fullscreen=!1,m&&m.container&&(m.container instanceof a.window.HTMLElement?this._container=m.container:a.warnOnce("Full screen control 'container' must be a DOM element.")),a.bindAll(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in a.window.document?this._fullscreenchange="fullscreenchange":"onmozfullscreenchange"in a.window.document?this._fullscreenchange="mozfullscreenchange":"onwebkitfullscreenchange"in a.window.document?this._fullscreenchange="webkitfullscreenchange":"onmsfullscreenchange"in a.window.document&&(this._fullscreenchange="MSFullscreenChange")};Kl.prototype.onAdd=function(m){return this._map=m,this._container||(this._container=this._map.getContainer()),this._controlContainer=g.create("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",a.warnOnce("This device does not support fullscreen mode.")),this._controlContainer},Kl.prototype.onRemove=function(){g.remove(this._controlContainer),this._map=null,a.window.document.removeEventListener(this._fullscreenchange,this._changeIcon)},Kl.prototype._checkFullscreenSupport=function(){return!!(a.window.document.fullscreenEnabled||a.window.document.mozFullScreenEnabled||a.window.document.msFullscreenEnabled||a.window.document.webkitFullscreenEnabled)},Kl.prototype._setupUI=function(){var m=this._fullscreenButton=g.create("button","mapboxgl-ctrl-fullscreen",this._controlContainer);g.create("span","mapboxgl-ctrl-icon",m).setAttribute("aria-hidden",!0),m.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),a.window.document.addEventListener(this._fullscreenchange,this._changeIcon)},Kl.prototype._updateTitle=function(){var m=this._getTitle();this._fullscreenButton.setAttribute("aria-label",m),this._fullscreenButton.title=m},Kl.prototype._getTitle=function(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")},Kl.prototype._isFullscreen=function(){return this._fullscreen},Kl.prototype._changeIcon=function(){(a.window.document.fullscreenElement||a.window.document.mozFullScreenElement||a.window.document.webkitFullscreenElement||a.window.document.msFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())},Kl.prototype._onClickFullscreen=function(){this._isFullscreen()?a.window.document.exitFullscreen?a.window.document.exitFullscreen():a.window.document.mozCancelFullScreen?a.window.document.mozCancelFullScreen():a.window.document.msExitFullscreen?a.window.document.msExitFullscreen():a.window.document.webkitCancelFullScreen&&a.window.document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.mozRequestFullScreen?this._container.mozRequestFullScreen():this._container.msRequestFullscreen?this._container.msRequestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()};var Cf={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},ah=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", "),Us=(function(m){function x(v){m.call(this),this.options=a.extend(Object.create(Cf),v),a.bindAll(["_update","_onClose","remove","_onMouseMove","_onMouseUp","_onDrag"],this)}return m&&(x.__proto__=m),(x.prototype=Object.create(m&&m.prototype)).constructor=x,x.prototype.addTo=function(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&this._map.on("click",this._onClose),this.options.closeOnMove&&this._map.on("move",this._onClose),this._map.on("remove",this.remove),this._update(),this._focusFirstElement(),this._trackPointer?(this._map.on("mousemove",this._onMouseMove),this._map.on("mouseup",this._onMouseUp),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")):this._map.on("move",this._update),this.fire(new a.Event("open")),this},x.prototype.isOpen=function(){return!!this._map},x.prototype.remove=function(){return this._content&&g.remove(this._content),this._container&&(g.remove(this._container),delete this._container),this._map&&(this._map.off("move",this._update),this._map.off("move",this._onClose),this._map.off("click",this._onClose),this._map.off("remove",this.remove),this._map.off("mousemove",this._onMouseMove),this._map.off("mouseup",this._onMouseUp),this._map.off("drag",this._onDrag),delete this._map),this.fire(new a.Event("close")),this},x.prototype.getLngLat=function(){return this._lngLat},x.prototype.setLngLat=function(v){return this._lngLat=a.LngLat.convert(v),this._pos=null,this._trackPointer=!1,this._update(),this._map&&(this._map.on("move",this._update),this._map.off("mousemove",this._onMouseMove),this._container&&this._container.classList.remove("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.remove("mapboxgl-track-pointer")),this},x.prototype.trackPointer=function(){return this._trackPointer=!0,this._pos=null,this._update(),this._map&&(this._map.off("move",this._update),this._map.on("mousemove",this._onMouseMove),this._map.on("drag",this._onDrag),this._container&&this._container.classList.add("mapboxgl-popup-track-pointer"),this._map._canvasContainer.classList.add("mapboxgl-track-pointer")),this},x.prototype.getElement=function(){return this._container},x.prototype.setText=function(v){return this.setDOMContent(a.window.document.createTextNode(v))},x.prototype.setHTML=function(v){var d,y=a.window.document.createDocumentFragment(),N=a.window.document.createElement("body");for(N.innerHTML=v;d=N.firstChild;)y.appendChild(d);return this.setDOMContent(y)},x.prototype.getMaxWidth=function(){return this._container&&this._container.style.maxWidth},x.prototype.setMaxWidth=function(v){return this.options.maxWidth=v,this._update(),this},x.prototype.setDOMContent=function(v){if(this._content)for(;this._content.hasChildNodes();)this._content.firstChild&&this._content.removeChild(this._content.firstChild);else this._content=g.create("div","mapboxgl-popup-content",this._container);return this._content.appendChild(v),this._createCloseButton(),this._update(),this._focusFirstElement(),this},x.prototype.addClassName=function(v){this._container&&this._container.classList.add(v)},x.prototype.removeClassName=function(v){this._container&&this._container.classList.remove(v)},x.prototype.setOffset=function(v){return this.options.offset=v,this._update(),this},x.prototype.toggleClassName=function(v){if(this._container)return this._container.classList.toggle(v)},x.prototype._createCloseButton=function(){this.options.closeButton&&(this._closeButton=g.create("button","mapboxgl-popup-close-button",this._content),this._closeButton.type="button",this._closeButton.setAttribute("aria-label","Close popup"),this._closeButton.innerHTML="&#215;",this._closeButton.addEventListener("click",this._onClose))},x.prototype._onMouseUp=function(v){this._update(v.point)},x.prototype._onMouseMove=function(v){this._update(v.point)},x.prototype._onDrag=function(v){this._update(v.point)},x.prototype._update=function(v){var d=this;if(this._map&&(this._lngLat||this._trackPointer)&&this._content&&(this._container||(this._container=g.create("div","mapboxgl-popup",this._map.getContainer()),this._tip=g.create("div","mapboxgl-popup-tip",this._container),this._container.appendChild(this._content),this.options.className&&this.options.className.split(" ").forEach((function(Y){return d._container.classList.add(Y)})),this._trackPointer&&this._container.classList.add("mapboxgl-popup-track-pointer")),this.options.maxWidth&&this._container.style.maxWidth!==this.options.maxWidth&&(this._container.style.maxWidth=this.options.maxWidth),this._map.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=du(this._lngLat,this._pos,this._map.transform)),!this._trackPointer||v)){var y=this._pos=this._trackPointer&&v?v:this._map.project(this._lngLat),N=this.options.anchor,k=(function Y(X){if(X){if(typeof X=="number"){var le=Math.round(Math.sqrt(.5*Math.pow(X,2)));return{center:new a.Point(0,0),top:new a.Point(0,X),"top-left":new a.Point(le,le),"top-right":new a.Point(-le,le),bottom:new a.Point(0,-X),"bottom-left":new a.Point(le,-le),"bottom-right":new a.Point(-le,-le),left:new a.Point(X,0),right:new a.Point(-X,0)}}if(X instanceof a.Point||Array.isArray(X)){var ve=a.Point.convert(X);return{center:ve,top:ve,"top-left":ve,"top-right":ve,bottom:ve,"bottom-left":ve,"bottom-right":ve,left:ve,right:ve}}return{center:a.Point.convert(X.center||[0,0]),top:a.Point.convert(X.top||[0,0]),"top-left":a.Point.convert(X["top-left"]||[0,0]),"top-right":a.Point.convert(X["top-right"]||[0,0]),bottom:a.Point.convert(X.bottom||[0,0]),"bottom-left":a.Point.convert(X["bottom-left"]||[0,0]),"bottom-right":a.Point.convert(X["bottom-right"]||[0,0]),left:a.Point.convert(X.left||[0,0]),right:a.Point.convert(X.right||[0,0])}}return Y(new a.Point(0,0))})(this.options.offset);if(!N){var I,U=this._container.offsetWidth,$=this._container.offsetHeight;I=y.y+k.bottom.y<$?["top"]:y.y>this._map.transform.height-$?["bottom"]:[],y.x<U/2?I.push("left"):y.x>this._map.transform.width-U/2&&I.push("right"),N=I.length===0?"bottom":I.join("-")}var W=y.add(k[N]).round();g.setTransform(this._container,no[N]+" translate("+W.x+"px,"+W.y+"px)"),Pl(this._container,N,"popup")}},x.prototype._focusFirstElement=function(){if(this.options.focusAfterOpen&&this._container){var v=this._container.querySelector(ah);v&&v.focus()}},x.prototype._onClose=function(){this.remove()},x})(a.Evented),fu={version:a.version,supported:p,setRTLTextPlugin:a.setRTLTextPlugin,getRTLTextPluginStatus:a.getRTLTextPluginStatus,Map:Ic,NavigationControl:gc,GeolocateControl:kd,AttributionControl:Ci,ScaleControl:Ms,FullscreenControl:Kl,Popup:Us,Marker:wo,Style:aa,LngLat:a.LngLat,LngLatBounds:a.LngLatBounds,Point:a.Point,MercatorCoordinate:a.MercatorCoordinate,Evented:a.Evented,config:a.config,prewarm:function(){jt().acquire(bt)},clearPrewarmedResources:function(){var m=dr;m&&(m.isPreloaded()&&m.numActive()===1?(m.release(bt),dr=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},get accessToken(){return a.config.ACCESS_TOKEN},set accessToken(m){a.config.ACCESS_TOKEN=m},get baseApiUrl(){return a.config.API_URL},set baseApiUrl(m){a.config.API_URL=m},get workerCount(){return Mt.workerCount},set workerCount(m){Mt.workerCount=m},get maxParallelImageRequests(){return a.config.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(m){a.config.MAX_PARALLEL_IMAGE_REQUESTS=m},clearStorage:function(m){a.clearTileCache(m)},workerUrl:""};return fu})),o}))})(Z1)),Z1.exports}var rG=tG();const Dv=Lb(rG);Dv.accessToken="pk.eyJ1IjoidmFiZ28iLCJhIjoiY21qYTVxamhtMDF3YjNqcHdhdXUzZmRlcSJ9.joa-ODSHuK3DToKQ2tUNFQ";function nG({locations:n,onLocationClick:t}){const r=M.useRef(null),i=M.useRef(null),[o,l]=M.useState(null),a=M.useRef([]);M.useEffect(()=>{if(!(!r.current||i.current))return i.current=new Dv.Map({container:r.current,style:"mapbox://styles/mapbox/streets-v12",center:[-98.5795,39.8283],zoom:4}),i.current.addControl(new Dv.NavigationControl,"top-right"),i.current.addControl(new Dv.FullscreenControl,"top-right"),()=>{var g;(g=i.current)==null||g.remove()}},[]),M.useEffect(()=>{if(!i.current||!n.length)return;a.current.forEach(w=>w.remove()),a.current=[];const g=n.filter(w=>w.latitude&&w.longitude);if(g.length!==0&&(g.forEach(w=>{const j=document.createElement("div");j.className="custom-marker",j.style.width="30px",j.style.height="30px",j.style.borderRadius="50%",j.style.cursor="pointer",j.style.border="3px solid white",j.style.boxShadow="0 2px 4px rgba(0,0,0,0.3)",w.status==="operating"?j.style.backgroundColor="#EF4444":(j.style.backgroundColor="#FFFFFF",j.style.border="3px solid #9CA3AF");const S=new Dv.Marker(j).setLngLat([w.longitude,w.latitude]).addTo(i.current);j.addEventListener("click",()=>{l(w),t&&t(w)}),a.current.push(S)}),g.length>0)){const w=new Dv.LngLatBounds;g.forEach(j=>{w.extend([j.longitude,j.latitude])}),i.current.fitBounds(w,{padding:50,maxZoom:12})}},[n,t]),M.useEffect(()=>{i.current&&i.current.on("load",()=>{i.current.addSource("locations",{type:"geojson",data:{type:"FeatureCollection",features:n.filter(g=>g.latitude&&g.longitude).map(g=>({type:"Feature",geometry:{type:"Point",coordinates:[g.longitude,g.latitude]},properties:{id:g.id,name:g.location_name||g.city,status:g.status}}))},cluster:!0,clusterMaxZoom:14,clusterRadius:50}),i.current.addLayer({id:"clusters",type:"circle",source:"locations",filter:["has","point_count"],paint:{"circle-color":["step",["get","point_count"],"#51bbd6",20,"#f1f075",50,"#f28cb1"],"circle-radius":["step",["get","point_count"],20,20,30,50,40]}}),i.current.addLayer({id:"cluster-count",type:"symbol",source:"locations",filter:["has","point_count"],layout:{"text-field":"{point_count_abbreviated}","text-font":["DIN Offc Pro Medium","Arial Unicode MS Bold"],"text-size":12},paint:{"text-color":"#ffffff"}}),i.current.on("click","clusters",g=>{const w=i.current.queryRenderedFeatures(g.point,{layers:["clusters"]}),j=w[0].properties.cluster_id;i.current.getSource("locations").getClusterExpansionZoom(j,(S,T)=>{S||i.current.easeTo({center:w[0].geometry.coordinates,zoom:T})})}),i.current.on("mouseenter","clusters",()=>{i.current.getCanvas().style.cursor="pointer"}),i.current.on("mouseleave","clusters",()=>{i.current.getCanvas().style.cursor=""})})},[n]);const p=g=>g?new Date(g).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return e.jsxs("div",{className:"relative w-full h-full",children:[e.jsx("div",{ref:r,className:"w-full h-full rounded-lg"}),o&&e.jsx(ot,{className:"absolute top-4 left-4 w-80 shadow-lg z-10",children:e.jsxs(ut,{className:"pt-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg",children:o.location_name||`${o.city} Location`}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx(Ja,{className:"inline h-3 w-3 mr-1"}),o.city,", ",o.state]})]}),e.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>l(null),children:e.jsx(Gc,{className:"h-4 w-4"})})]}),e.jsx(Gt,{className:o.status==="operating"?"bg-red-500 text-white":"bg-white text-gray-800 border border-gray-300",children:o.status==="operating"?"Operating":"Looking for Franchise"}),e.jsxs("div",{className:"mt-4 space-y-2 text-sm",children:[e.jsx("p",{className:"text-muted-foreground",children:o.address_line1}),o.address_line2&&e.jsx("p",{className:"text-muted-foreground",children:o.address_line2}),e.jsxs("p",{className:"text-muted-foreground",children:[o.city,", ",o.state," ",o.zip_code]}),o.opening_date&&e.jsxs("p",{className:"pt-2 border-t",children:[e.jsx("span",{className:"text-muted-foreground",children:"Opened:"})," ",e.jsx("span",{className:"font-medium",children:p(o.opening_date)})]})]})]})}),e.jsx(ot,{className:"absolute bottom-4 left-4 shadow-lg z-10",children:e.jsx(ut,{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center gap-4 text-sm",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-red-500 border-2 border-white"}),e.jsx("span",{children:"Operating"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-4 h-4 rounded-full bg-white border-2 border-gray-400"}),e.jsx("span",{children:"Available"})]})]})})})]})}var v_="Switch",[iG]=Du(v_),[sG,aG]=iG(v_),l6=M.forwardRef((n,t)=>{const{__scopeSwitch:r,name:i,checked:o,defaultChecked:l,required:a,disabled:p,value:g="on",onCheckedChange:w,form:j,...S}=n,[T,E]=M.useState(null),O=Wn(t,z=>E(z)),R=M.useRef(!1),F=T?j||!!T.closest("form"):!0,[B,G]=bf({prop:o,defaultProp:l??!1,onChange:w,caller:v_});return e.jsxs(sG,{scope:r,checked:B,disabled:p,children:[e.jsx(Cn.button,{type:"button",role:"switch","aria-checked":B,"aria-required":a,"data-state":h6(B),"data-disabled":p?"":void 0,disabled:p,value:g,...S,ref:O,onClick:Dr(n.onClick,z=>{G(ee=>!ee),F&&(R.current=z.isPropagationStopped(),R.current||z.stopPropagation())})}),F&&e.jsx(d6,{control:T,bubbles:!R.current,name:i,value:g,checked:B,required:a,disabled:p,form:j,style:{transform:"translateX(-100%)"}})]})});l6.displayName=v_;var c6="SwitchThumb",u6=M.forwardRef((n,t)=>{const{__scopeSwitch:r,...i}=n,o=aG(c6,r);return e.jsx(Cn.span,{"data-state":h6(o.checked),"data-disabled":o.disabled?"":void 0,...i,ref:t})});u6.displayName=c6;var oG="SwitchBubbleInput",d6=M.forwardRef(({__scopeSwitch:n,control:t,checked:r,bubbles:i=!0,...o},l)=>{const a=M.useRef(null),p=Wn(a,l),g=s_(r),w=Wb(t);return M.useEffect(()=>{const j=a.current;if(!j)return;const S=window.HTMLInputElement.prototype,E=Object.getOwnPropertyDescriptor(S,"checked").set;if(g!==r&&E){const O=new Event("click",{bubbles:i});E.call(j,r),j.dispatchEvent(O)}},[g,r,i]),e.jsx("input",{type:"checkbox","aria-hidden":!0,defaultChecked:r,...o,tabIndex:-1,ref:p,style:{...o.style,...w,position:"absolute",pointerEvents:"none",opacity:0,margin:0}})});d6.displayName=oG;function h6(n){return n?"checked":"unchecked"}var f6=l6,lG=u6;const rc=M.forwardRef(({className:n,...t},r)=>e.jsx(f6,{className:er("peer inline-flex h-5 w-9 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent shadow-sm transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input",n),...t,ref:r,children:e.jsx(lG,{className:er("pointer-events-none block h-4 w-4 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-4 data-[state=unchecked]:translate-x-0")})}));rc.displayName=f6.displayName;class JS{static parseCSV(t){const r=t.split(`
`).filter(l=>l.trim());if(r.length<2)throw new Error("CSV file is empty or invalid");const i=r[0].split(",").map(l=>l.trim().toLowerCase()),o=[];for(let l=1;l<r.length;l++){const a=r[l].split(",").map(g=>g.trim()),p={};i.forEach((g,w)=>{const j=a[w];if(j)switch(g){case"location_name":case"name":p.location_name=j;break;case"address":case"address_line1":p.address_line1=j;break;case"address_line2":p.address_line2=j;break;case"city":p.city=j;break;case"state":p.state=j;break;case"zip":case"zip_code":case"zipcode":p.zip_code=j;break;case"country":p.country=j;break;case"status":p.status=j.toLowerCase()==="operating"?"operating":"looking_for_franchise";break;case"opening_date":case"opened":p.opening_date=j;break;case"latitude":case"lat":p.latitude=parseFloat(j);break;case"longitude":case"lng":case"lon":p.longitude=parseFloat(j);break}}),p.address_line1&&p.city&&p.state&&p.zip_code&&o.push(p)}return o}static async geocodeAddress(t,r,i,o){try{const l=encodeURIComponent(`${t}, ${r}, ${i} ${o}, USA`),p=await(await fetch(`https://nominatim.openstreetmap.org/search?format=json&q=${l}&limit=1`,{headers:{"User-Agent":"BizSearch-Franchise-Locator"}})).json();return p&&p.length>0?{latitude:parseFloat(p[0].lat),longitude:parseFloat(p[0].lon),formatted_address:p[0].display_name}:null}catch(l){return console.error("Geocoding error:",l),null}}static async bulkUploadLocations(t,r,i=!0){const o={success:0,failed:0,errors:[],locations:[]};try{const l=this.parseCSV(r);for(let a=0;a<l.length;a++){const p=l[a];try{if(i&&(!p.latitude||!p.longitude)){const j=await this.geocodeAddress(p.address_line1,p.city,p.state,p.zip_code);j&&(p.latitude=j.latitude,p.longitude=j.longitude),await new Promise(S=>setTimeout(S,1e3))}const{data:g,error:w}=await ar.from("franchise_locations").insert({...p,franchise_id:t}).select().single();if(w)throw w;o.success++,o.locations.push(g)}catch(g){o.failed++,o.errors.push({row:a+2,error:g.message||"Unknown error"})}}}catch(l){throw new Error(`CSV parsing failed: ${l.message}`)}return o}static downloadCSVTemplate(){const t=`location_name,address_line1,address_line2,city,state,zip_code,country,status,opening_date,latitude,longitude
McDonald's Downtown,123 Main St,,New York,NY,10001,United States,operating,2020-01-15,40.7580,-73.9855
Available Location,456 Broadway,,Los Angeles,CA,90012,United States,looking_for_franchise,,,
`,r=new Blob([t],{type:"text/csv"}),i=window.URL.createObjectURL(r),o=document.createElement("a");o.href=i,o.download="franchise_locations_template.csv",o.click(),window.URL.revokeObjectURL(i)}static exportLocationsToCSV(t){const r=["location_name","address_line1","address_line2","city","state","zip_code","country","status","opening_date","latitude","longitude"],i=t.map(g=>[g.location_name||"",g.address_line1,g.address_line2||"",g.city,g.state,g.zip_code,g.country,g.status,g.opening_date||"",g.latitude||"",g.longitude||""]),o=[r.join(","),...i.map(g=>g.map(w=>`"${w}"`).join(","))].join(`
`),l=new Blob([o],{type:"text/csv"}),a=window.URL.createObjectURL(l),p=document.createElement("a");p.href=a,p.download=`franchise_locations_${new Date().toISOString().split("T")[0]}.csv`,p.click(),window.URL.revokeObjectURL(a)}static async geocodeAndUpdateLocation(t){const{data:r,error:i}=await ar.from("franchise_locations").select("*").eq("id",t).single();if(i)throw i;const o=await this.geocodeAddress(r.address_line1,r.city,r.state,r.zip_code);if(!o)throw new Error("Could not geocode address");const{data:l,error:a}=await ar.from("franchise_locations").update({latitude:o.latitude,longitude:o.longitude}).eq("id",t).select().single();if(a)throw a;return l}static async batchGeocodeLocations(t){const r={success:0,failed:0,errors:[]},{data:i,error:o}=await ar.from("franchise_locations").select("*").eq("franchise_id",t).or("latitude.is.null,longitude.is.null");if(o)throw o;if(!i||i.length===0)return r;for(const l of i)try{await this.geocodeAndUpdateLocation(l.id),r.success++,await new Promise(a=>setTimeout(a,1e3))}catch(a){r.failed++,r.errors.push(`${l.location_name||l.city}: ${a.message}`)}return r}}function cG({franchiseId:n,onComplete:t}){const[r,i]=M.useState(!1),[o,l]=M.useState(null),[a,p]=M.useState(!0),[g,w]=M.useState(0),j=async S=>{var E;const T=(E=S.target.files)==null?void 0:E[0];if(T){i(!0),l(null),w(0);try{const O=await T.text(),R=setInterval(()=>{w(B=>Math.min(B+10,90))},500),F=await JS.bulkUploadLocations(n,O,a);clearInterval(R),w(100),l(F),t&&t(F)}catch(O){l({success:0,failed:0,errors:[{row:0,error:O.message}],locations:[]})}finally{i(!1)}}};return e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Bulk Upload Locations"}),e.jsx(Ji,{children:"Upload multiple franchise locations at once using a CSV file"})]}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between p-4 bg-blue-50 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Ys,{className:"h-5 w-5 text-blue-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"font-medium text-sm",children:"CSV Template"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Download the template to see required format"})]})]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>JS.downloadCSVTemplate(),children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Download"]})]}),e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{htmlFor:"auto-geocode",className:"text-sm font-medium",children:"Auto-geocode Addresses"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Automatically find latitude/longitude for addresses without coordinates"})]}),e.jsx(rc,{id:"auto-geocode",checked:a,onCheckedChange:p})]}),e.jsxs("div",{className:"border-2 border-dashed rounded-lg p-8 text-center",children:[e.jsx("input",{type:"file",accept:".csv",onChange:j,disabled:r,className:"hidden",id:"csv-upload"}),e.jsxs("label",{htmlFor:"csv-upload",className:"cursor-pointer",children:[e.jsx(Jd,{className:"h-12 w-12 text-muted-foreground mx-auto mb-4"}),e.jsx("p",{className:"text-sm font-medium mb-1",children:"Click to upload CSV file"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"or drag and drop your file here"})]})]}),r&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Uploading locations..."}),e.jsxs("span",{className:"font-medium",children:[g,"%"]})]}),e.jsx(vo,{value:g,className:"h-2"})]}),o&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsx(ot,{className:"border-green-200 bg-green-50",children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Nn,{className:"h-8 w-8 text-green-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-green-900",children:o.success}),e.jsx("p",{className:"text-sm text-green-700",children:"Successful"})]})]})})}),e.jsx(ot,{className:"border-red-200 bg-red-50",children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(zx,{className:"h-8 w-8 text-red-600"}),e.jsxs("div",{children:[e.jsx("p",{className:"text-2xl font-bold text-red-900",children:o.failed}),e.jsx("p",{className:"text-sm text-red-700",children:"Failed"})]})]})})})]}),o.errors.length>0&&e.jsx(bl,{variant:"destructive",children:e.jsxs(_l,{children:[e.jsx("p",{className:"font-medium mb-2",children:"Errors found:"}),e.jsxs("ul",{className:"list-disc list-inside text-sm space-y-1",children:[o.errors.slice(0,5).map((S,T)=>e.jsxs("li",{children:["Row ",S.row,": ",S.error]},T)),o.errors.length>5&&e.jsxs("li",{children:["... and ",o.errors.length-5," more errors"]})]})]})})]})]})]})}class QS{static async getFranchiseIdBySlug(t){const{data:r,error:i}=await ar.from("franchises").select("id").eq("slug",t).single();return i?(console.error("Error fetching franchise by slug:",i),null):(r==null?void 0:r.id)||null}static async getLocations(t){let r=t;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)){const l=await this.getFranchiseIdBySlug(t);if(!l)throw new Error("Franchise not found");r=l}const{data:i,error:o}=await ar.from("franchise_locations").select("*").eq("franchise_id",r).order("opening_date",{ascending:!1});if(o)throw o;return i||[]}static async getOperatingLocations(t){const{data:r,error:i}=await ar.from("franchise_locations").select("*").eq("franchise_id",t).eq("status","operating").order("opening_date",{ascending:!1});if(i)throw i;return r||[]}static async getLocationsByState(t,r){const{data:i,error:o}=await ar.from("franchise_locations").select("*").eq("franchise_id",t).eq("state",r).order("city");if(o)throw o;return i||[]}static async getLocationStats(t){let r=t;if(!/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(t)){const l=await this.getFranchiseIdBySlug(t);if(!l)return null;r=l}const{data:i,error:o}=await ar.from("franchise_location_summary").select("*").eq("franchise_id",r).single();return o?(console.error("Error fetching location stats:",o),null):i}static async getTerritories(t){const{data:r,error:i}=await ar.from("franchise_territories").select("*").eq("franchise_id",t).order("state");if(i)throw i;return r||[]}static async getAvailableTerritories(t){const{data:r,error:i}=await ar.from("franchise_territories").select("*").eq("franchise_id",t).eq("status","available").order("market_potential_score",{ascending:!1});if(i)throw i;return r||[]}static async getTerritoryStats(t){const{data:r,error:i}=await ar.from("franchise_territory_summary").select("*").eq("franchise_id",t).single();return i?(console.error("Error fetching territory stats:",i),null):r}static async getLocationsByStateGrouped(t){return(await this.getLocations(t)).reduce((i,o)=>(i[o.state]||(i[o.state]=[]),i[o.state].push(o),i),{})}static async searchNearby(t,r,i,o=50){const l=o/69,a=o/(69*Math.cos(r*Math.PI/180)),{data:p,error:g}=await ar.from("franchise_locations").select("*").eq("franchise_id",t).gte("latitude",r-l).lte("latitude",r+l).gte("longitude",i-a).lte("longitude",i+a).not("latitude","is",null).not("longitude","is",null);if(g)throw g;return(p||[]).filter(j=>!j.latitude||!j.longitude?!1:this.calculateDistance(r,i,j.latitude,j.longitude)<=o)}static calculateDistance(t,r,i,o){const a=(i-t)*Math.PI/180,p=(o-r)*Math.PI/180,g=Math.sin(a/2)*Math.sin(a/2)+Math.cos(t*Math.PI/180)*Math.cos(i*Math.PI/180)*Math.sin(p/2)*Math.sin(p/2);return 3959*(2*Math.atan2(Math.sqrt(g),Math.sqrt(1-g)))}static async addLocation(t){const{data:r,error:i}=await ar.from("franchise_locations").insert(t).select().single();if(i)throw i;return r}static async updateLocation(t,r){const{data:i,error:o}=await ar.from("franchise_locations").update(r).eq("id",t).select().single();if(o)throw o;return i}static async deleteLocation(t){const{error:r}=await ar.from("franchise_locations").delete().eq("id",t);if(r)throw r}static async addTerritory(t){const{data:r,error:i}=await ar.from("franchise_territories").insert(t).select().single();if(i)throw i;return r}static async reserveTerritory(t,r,i=30){const o=new Date;o.setDate(o.getDate()+i);const{data:l,error:a}=await ar.from("franchise_territories").update({status:"reserved",reserved_by:r,reserved_until:o.toISOString().split("T")[0]}).eq("id",t).eq("status","available").select().single();if(a)throw a;return l}}function uG(){const{id:n}=my(),{user:t,profile:r}=Io(),[i,o]=M.useState([]),[l,a]=M.useState(null),[p,g]=M.useState(!0),[w,j]=M.useState("all"),[S,T]=M.useState(""),[E,O]=M.useState(!1),[R,F]=M.useState(!1);M.useEffect(()=>{n&&G()},[n]);const B=J=>/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/i.test(J),G=async()=>{if(n){g(!0);try{const[J,Se]=await Promise.all([QS.getLocations(n),QS.getLocationStats(n)]);if(o(J),a(Se),t&&r){const{supabase:_e}=await _b(async()=>{const{supabase:fe}=await Promise.resolve().then(()=>EM);return{supabase:fe}},void 0),re=_e.from("franchises").select("franchisor_id"),{data:ce}=await(B(n)?re.eq("id",n).single():re.eq("slug",n).single());F((ce==null?void 0:ce.franchisor_id)===t.id)}}catch(J){console.error("Error loading franchise locations:",J)}finally{g(!1)}}},z=Array.from(new Set(i.map(J=>J.state))).sort(),ee=i.filter(J=>{if(w!=="all"&&J.state!==w)return!1;if(S){const Se=S.toLowerCase();return J.city.toLowerCase().includes(Se)||J.state.toLowerCase().includes(Se)||J.address_line1.toLowerCase().includes(Se)||J.zip_code.includes(Se)}return!0}),ie=J=>J==="operating"?"bg-red-500 text-white":"bg-white text-gray-800 border border-gray-300",ge=J=>J==="operating"?"Operating":"Looking for Franchise",K=J=>J?new Date(J).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A";return p?e.jsx("div",{className:"container mx-auto px-4 py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"inline-block h-8 w-8 animate-spin rounded-full border-4 border-solid border-current border-r-transparent"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading locations..."})]})}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-4xl font-bold mb-2",children:"Franchise Locations"}),e.jsx("p",{className:"text-muted-foreground",children:"Red pins: Operating franchises  White pins: Available for new franchisors"})]}),R&&e.jsxs(Mg,{open:E,onOpenChange:O,children:[e.jsx(Jj,{asChild:!0,children:e.jsxs(ze,{children:[e.jsx(Jd,{className:"h-4 w-4 mr-2"}),"Bulk Upload Locations"]})}),e.jsxs(Om,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsx(zm,{children:e.jsx(Fm,{children:"Bulk Upload Franchise Locations"})}),e.jsx(cG,{franchiseId:n,onComplete:J=>{J.success>0&&(G(),setTimeout(()=>O(!1),2e3))}})]})]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-8",children:[e.jsxs(ot,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Ht,{className:"text-sm font-medium",children:"Total Locations"}),e.jsx($o,{className:"h-4 w-4 text-muted-foreground"})]}),e.jsxs(ut,{children:[e.jsx("div",{className:"text-2xl font-bold",children:(l==null?void 0:l.total_locations)||0}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Across ",(l==null?void 0:l.states_covered)||0," states"]})]})]}),e.jsxs(ot,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Ht,{className:"text-sm font-medium",children:"Operating"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-red-500"})]}),e.jsxs(ut,{children:[e.jsx("div",{className:"text-2xl font-bold text-red-600",children:(l==null?void 0:l.operating_count)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Currently running"})]})]}),e.jsxs(ot,{children:[e.jsxs(Vt,{className:"flex flex-row items-center justify-between pb-2",children:[e.jsx(Ht,{className:"text-sm font-medium",children:"Available"}),e.jsx("div",{className:"h-3 w-3 rounded-full bg-white border-2 border-gray-300"})]}),e.jsxs(ut,{children:[e.jsx("div",{className:"text-2xl font-bold text-gray-600",children:(l==null?void 0:l.looking_for_franchise_count)||0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Looking for franchisors"})]})]})]}),e.jsx(ot,{className:"mb-6",children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(Wt,{placeholder:"Search city, state, or zip...",value:S,onChange:J=>T(J.target.value),className:"w-full"}),e.jsxs(ys,{value:w,onValueChange:j,children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Filter by state"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"all",children:"All States"}),z.map(J=>e.jsx(pr,{value:J,children:J},J))]})]})]})})}),e.jsx(ot,{className:"mb-6",children:e.jsx(ut,{className:"p-0",children:e.jsx("div",{className:"h-[600px] rounded-lg overflow-hidden",children:e.jsx(nG,{locations:ee})})})}),e.jsxs("div",{children:[e.jsxs("h2",{className:"text-2xl font-bold mb-4",children:["All Locations (",ee.length,")"]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[ee.map(J=>e.jsxs(ot,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx(Ht,{className:"text-base",children:J.location_name||`${J.city} Location`}),e.jsxs(Ji,{className:"mt-1",children:[e.jsx(Ja,{className:"inline h-3 w-3 mr-1"}),J.city,", ",J.state]})]}),e.jsx(Gt,{className:ie(J.status),children:ge(J.status)})]})}),e.jsxs(ut,{className:"space-y-2",children:[e.jsxs("div",{className:"text-sm",children:[e.jsx("p",{className:"text-muted-foreground",children:J.address_line1}),J.address_line2&&e.jsx("p",{className:"text-muted-foreground",children:J.address_line2}),e.jsxs("p",{className:"text-muted-foreground",children:[J.city,", ",J.state," ",J.zip_code]})]}),J.opening_date&&e.jsxs("div",{className:"flex items-center text-sm pt-2 border-t",children:[e.jsx("span",{className:"text-muted-foreground mr-2",children:"Opening Date:"}),e.jsx("span",{className:"font-medium",children:K(J.opening_date)})]})]})]},J.id)),ee.length===0&&e.jsxs("div",{className:"col-span-full text-center py-12",children:[e.jsx($o,{className:"h-12 w-12 text-gray-400 mx-auto mb-3"}),e.jsx("p",{className:"text-muted-foreground",children:"No locations found"}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:"Try adjusting your filters"})]})]})]})]})}function dG({className:n}){const t=[{name:"Ajay Kumar",role:"Business Acquisition Specialist",image:"https://github.com/yusufhilmi.png",experience:"8+ years",expertise:["Business Valuation","Due Diligence","Market Analysis"]},{name:"Vijay Sharma",role:"Franchise Development Expert",image:"https://github.com/kdrnp.png",experience:"10+ years",expertise:["Franchise Models","ROI Analysis","Territory Planning"]},{name:"Priya Patel",role:"Technology Lead",image:"https://github.com/yahyabedirhan.png",experience:"6+ years",expertise:["AI/ML","Platform Development","Data Analytics"]},{name:"Rahul Singh",role:"Market Research Director",image:"https://github.com/denizbuyuktas.png",experience:"12+ years",expertise:["Market Intelligence","Industry Analysis","Trend Forecasting"]}],r=[{number:"10,000+",label:"Businesses Listed",icon:mp},{number:"5,000+",label:"Successful Matches",icon:fO},{number:"500Cr+",label:"Deals Facilitated",icon:na},{number:"95%",label:"Client Satisfaction",icon:pf}],i=[{icon:bs,title:"Verified Listings",description:"Every business and franchise opportunity is thoroughly verified by our expert team"},{icon:ry,title:"AI-Powered Matching",description:"Advanced algorithms match you with opportunities that fit your criteria perfectly"},{icon:Go,title:"Expert Guidance",description:"Get personalized advice from industry specialists throughout your journey"},{icon:wm,title:"Pan-India Coverage",description:"Access opportunities across all major cities and emerging markets in India"}];return e.jsxs("div",{className:`min-h-screen ${n}`,children:[e.jsx("section",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(Gt,{variant:"outline",className:"mb-4",children:" AI-Powered Business Discovery Platform"}),e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-foreground mb-6",children:["Transforming Business",e.jsxs("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:[" ","Discovery"]})]}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8 leading-relaxed",children:"BizSearch is India's most trusted platform for business acquisitions and franchise opportunities. We leverage cutting-edge AI technology to connect entrepreneurs with their perfect business match."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(ze,{size:"lg",className:"bg-blue-600 hover:bg-blue-700",children:"Explore Opportunities"}),e.jsx(ze,{size:"lg",variant:"outline",children:"List Your Business"})]})]})})}),e.jsx("section",{className:"py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 items-center",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-6",children:"Our Mission"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-6 leading-relaxed",children:"To democratize business ownership by making quality business opportunities accessible to every entrepreneur. We believe that with the right guidance and technology, anyone can build a successful business."}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nn,{className:"h-6 w-6 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-muted-foreground",children:"Transparent and verified business listings"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nn,{className:"h-6 w-6 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-muted-foreground",children:"Expert guidance throughout the acquisition process"})]}),e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Nn,{className:"h-6 w-6 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-muted-foreground",children:"AI-powered recommendations for better matches"})]})]})]}),e.jsx("div",{className:"grid grid-cols-2 gap-6",children:r.map((o,l)=>e.jsx(ot,{className:"text-center",children:e.jsxs(ut,{className:"pt-6",children:[e.jsx(o.icon,{className:"h-8 w-8 text-blue-600 mx-auto mb-3"}),e.jsx("div",{className:"text-2xl font-bold text-foreground",children:o.number}),e.jsx("div",{className:"text-sm text-muted-foreground",children:o.label})]})},l))})]})})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Why Choose BizSearch?"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"We combine technology, expertise, and trust to deliver the best business discovery experience"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:i.map((o,l)=>e.jsxs(ot,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxs(Vt,{children:[e.jsx(o.icon,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),e.jsx(Ht,{className:"text-lg",children:o.title})]}),e.jsx(ut,{children:e.jsx(Ji,{className:"text-sm leading-relaxed",children:o.description})})]},l))})]})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Meet Our Expert Team"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Industry veterans with decades of combined experience in business acquisitions and franchise development"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:t.map((o,l)=>e.jsxs(ot,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxs(Vt,{children:[e.jsx("img",{src:o.image,alt:o.name,className:"w-20 h-20 rounded-full mx-auto mb-4 object-cover"}),e.jsx(Ht,{className:"text-lg",children:o.name}),e.jsx(Ji,{className:"text-sm font-medium text-blue-600",children:o.role}),e.jsx(Gt,{variant:"secondary",className:"text-xs",children:o.experience})]}),e.jsx(ut,{children:e.jsx("div",{className:"flex flex-wrap gap-1 justify-center",children:o.expertise.map((a,p)=>e.jsx(Gt,{variant:"outline",className:"text-xs",children:a},p))})})]},l))})]})}),e.jsx("section",{className:"py-16 bg-gradient-to-r from-blue-600 to-purple-600",children:e.jsxs("div",{className:"container mx-auto px-4 text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-white mb-4",children:"Ready to Find Your Perfect Business Opportunity?"}),e.jsx("p",{className:"text-xl text-blue-100 mb-8 max-w-2xl mx-auto",children:"Join thousands of successful entrepreneurs who found their ideal business through BizSearch"}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(ze,{size:"lg",variant:"secondary",className:"bg-white text-blue-600 hover:bg-gray-100",children:"Start Your Search"}),e.jsx(ze,{size:"lg",variant:"outline",className:"border-white text-white hover:bg-white hover:text-blue-600",children:"Talk to an Expert"})]})]})})]})}function hG({className:n}){const[t,r]=M.useState({name:"",email:"",phone:"",subject:"",message:"",inquiryType:""}),[i,o]=M.useState(!1),l=j=>{j.preventDefault(),o(!0),setTimeout(()=>o(!1),3e3)},a=(j,S)=>{r(T=>({...T,[j]:S}))},p=[{icon:Kc,title:"Phone Support",description:"Speak directly with our experts",value:"+91 98765 43210",action:"Call Now",available:"Mon-Sat, 9 AM - 7 PM"},{icon:bu,title:"Email Support",description:"Get detailed responses to your queries",value:"support@bizsearch.in",action:"Send Email",available:"24/7 Response"},{icon:e0,title:"Live Chat",description:"Instant support through our AI chat",value:"Available on website",action:"Start Chat",available:"24/7 Available"},{icon:mO,title:"Video Consultation",description:"Schedule a personalized consultation",value:"Book appointment",action:"Schedule Call",available:"Mon-Fri, 10 AM - 6 PM"}],g=[{city:"Mumbai",address:"Level 12, One World Centre, Tower 1, Jupiter Mill Compound, 841, Senapati Bapat Marg, Elphinstone Road, Mumbai - 400013",phone:"+91 98765 43210",email:"mumbai@bizsearch.in",type:"Headquarters"},{city:"Delhi",address:"3rd Floor, DLF Cyber City, Phase II, Sector 24, Gurugram, Haryana - 122002",phone:"+91 98765 43211",email:"delhi@bizsearch.in",type:"Regional Office"},{city:"Bangalore",address:"5th Floor, UB City Mall, Vittal Mallya Road, Ashok Nagar, Bengaluru, Karnataka - 560001",phone:"+91 98765 43212",email:"bangalore@bizsearch.in",type:"Regional Office"},{city:"Pune",address:"2nd Floor, Cerebrum IT Park, Kalyani Nagar, Pune, Maharashtra - 411014",phone:"+91 98765 43213",email:"pune@bizsearch.in",type:"Branch Office"}],w=[{name:"Ajay Kumar",role:"Business Acquisition Specialist",image:"https://github.com/yusufhilmi.png",expertise:"Business Valuation & Due Diligence",phone:"+91 98765 43220",email:"ajay@bizsearch.in"},{name:"Vijay Sharma",role:"Franchise Development Expert",image:"https://github.com/kdrnp.png",expertise:"Franchise Models & ROI Analysis",phone:"+91 98765 43221",email:"vijay@bizsearch.in"}];return e.jsxs("div",{className:`min-h-screen ${n}`,children:[e.jsx("section",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 py-16",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[e.jsx(Gt,{variant:"outline",className:"mb-4",children:" 24/7 Expert Support Available"}),e.jsxs("h1",{className:"text-4xl md:text-5xl font-bold text-foreground mb-6",children:["Get in Touch with",e.jsxs("span",{className:"bg-gradient-to-r from-blue-600 to-purple-600 bg-clip-text text-transparent",children:[" ","Our Experts"]})]}),e.jsx("p",{className:"text-xl text-muted-foreground mb-8 leading-relaxed",children:"Whether you're looking to buy a business, sell your company, or explore franchise opportunities, our team of specialists is here to guide you every step of the way."})]})})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Multiple Ways to Reach Us"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Choose the communication method that works best for you"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:p.map((j,S)=>e.jsxs(ot,{className:"text-center hover:shadow-lg transition-shadow",children:[e.jsxs(Vt,{children:[e.jsx(j.icon,{className:"h-12 w-12 text-blue-600 mx-auto mb-4"}),e.jsx(Ht,{className:"text-lg",children:j.title}),e.jsx(Ji,{children:j.description})]}),e.jsxs(ut,{className:"space-y-3",children:[e.jsx("p",{className:"font-medium text-foreground",children:j.value}),e.jsx(Gt,{variant:"secondary",className:"text-xs",children:j.available}),e.jsx(ze,{size:"sm",className:"w-full",children:j.action})]})]},S))})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-12",children:[e.jsx("div",{className:"lg:col-span-2",children:e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx(Ht,{className:"text-2xl",children:"Send Us a Message"}),e.jsx(Ji,{children:"Fill out the form below and we'll get back to you within 24 hours"})]}),e.jsx(ut,{children:i?e.jsxs("div",{className:"text-center py-8",children:[e.jsx(Nn,{className:"h-16 w-16 text-green-600 mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold text-foreground mb-2",children:"Message Sent Successfully!"}),e.jsx("p",{className:"text-muted-foreground",children:"Thank you for reaching out. Our team will contact you within 24 hours."})]}):e.jsxs("form",{onSubmit:l,className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"name",children:"Full Name *"}),e.jsx(Wt,{id:"name",value:t.name,onChange:j=>a("name",j.target.value),placeholder:"Enter your full name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"email",children:"Email Address *"}),e.jsx(Wt,{id:"email",type:"email",value:t.email,onChange:j=>a("email",j.target.value),placeholder:"Enter your email",required:!0})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"phone",children:"Phone Number"}),e.jsx(Wt,{id:"phone",value:t.phone,onChange:j=>a("phone",j.target.value),placeholder:"+91 98765 43210"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"inquiry-type",children:"Inquiry Type *"}),e.jsxs(ys,{value:t.inquiryType,onValueChange:j=>a("inquiryType",j),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select inquiry type"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"buy-business",children:"Buy a Business"}),e.jsx(pr,{value:"sell-business",children:"Sell My Business"}),e.jsx(pr,{value:"franchise-opportunity",children:"Franchise Opportunity"}),e.jsx(pr,{value:"partnership",children:"Partnership"}),e.jsx(pr,{value:"general",children:"General Inquiry"}),e.jsx(pr,{value:"support",children:"Technical Support"})]})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"subject",children:"Subject *"}),e.jsx(Wt,{id:"subject",value:t.subject,onChange:j=>a("subject",j.target.value),placeholder:"Brief subject of your inquiry",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"message",children:"Message *"}),e.jsx(Fl,{id:"message",value:t.message,onChange:j=>a("message",j.target.value),placeholder:"Please provide details about your inquiry...",rows:5,required:!0})]}),e.jsxs(ze,{type:"submit",size:"lg",className:"w-full",children:[e.jsx(aj,{className:"h-4 w-4 mr-2"}),"Send Message"]})]})})]})}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-bold text-foreground mb-4",children:"Talk to Our Specialists"}),e.jsx("p",{className:"text-muted-foreground text-sm mb-6",children:"Get personalized guidance from our industry experts"})]}),w.map((j,S)=>e.jsx(ot,{className:"hover:shadow-lg transition-shadow",children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("img",{src:j.image,alt:j.name,className:"w-16 h-16 rounded-full object-cover"}),e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-semibold text-foreground",children:j.name}),e.jsx("p",{className:"text-sm text-blue-600 font-medium",children:j.role}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:j.expertise}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(Kc,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:j.phone})]}),e.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[e.jsx(bu,{className:"h-3 w-3 text-muted-foreground"}),e.jsx("span",{className:"text-muted-foreground",children:j.email})]})]}),e.jsx(ze,{size:"sm",className:"w-full mt-3",children:"Schedule Call"})]})]})})},S))]})]})})}),e.jsx("section",{className:"py-16",children:e.jsxs("div",{className:"container mx-auto px-4",children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Our Office Locations"}),e.jsx("p",{className:"text-lg text-muted-foreground max-w-2xl mx-auto",children:"Visit us at any of our offices across India for in-person consultations"})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:g.map((j,S)=>e.jsxs(ot,{className:"hover:shadow-lg transition-shadow",children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx(Ht,{className:"text-xl",children:j.city}),e.jsx(Gt,{variant:j.type==="Headquarters"?"default":"secondary",children:j.type})]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Ja,{className:"h-5 w-5 text-muted-foreground mt-0.5 flex-shrink-0"}),e.jsx("p",{className:"text-sm text-muted-foreground leading-relaxed",children:j.address})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Kc,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:j.phone})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(bu,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:j.email})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xd,{className:"h-4 w-4 text-muted-foreground"}),e.jsx("span",{className:"text-sm text-muted-foreground",children:"Mon-Sat, 9:00 AM - 7:00 PM"})]}),e.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Ja,{className:"h-4 w-4 mr-2"}),"Get Directions"]})]})]},S))})]})}),e.jsx("section",{className:"py-16 bg-muted/30",children:e.jsx("div",{className:"container mx-auto px-4",children:e.jsxs("div",{className:"max-w-3xl mx-auto text-center",children:[e.jsx("h2",{className:"text-3xl font-bold text-foreground mb-4",children:"Frequently Asked Questions"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"Quick answers to common questions about our services"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 text-left",children:[e.jsx(ot,{children:e.jsxs(ut,{className:"pt-6",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"How do I list my business?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Contact our team for a free consultation. We'll help you prepare and list your business with complete documentation."})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"pt-6",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Are all listings verified?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Yes, every business and franchise opportunity undergoes thorough verification by our expert team before listing."})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"pt-6",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"What are your service charges?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Our pricing is transparent and success-based. Contact us for detailed information about our fee structure."})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"pt-6",children:[e.jsx("h4",{className:"font-semibold text-foreground mb-2",children:"Do you provide financing assistance?"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"We have partnerships with leading financial institutions to help you secure funding for your business acquisition."})]})})]})]})})})]})}class fG{static async getProfile(t){const{data:r,error:i}=await ar.from("profiles").select("*").eq("id",t).single();if(i)throw i;return r}static async getProfileByEmail(t){const{data:r,error:i}=await ar.from("profiles").select("*").eq("email",t).single();if(i)throw i;return r}static async createProfile(t){const{data:r,error:i}=await ar.from("profiles").insert(t).select().single();if(i)throw i;return r}static async updateProfile(t,r){const{data:i,error:o}=await ar.from("profiles").update({...r,updated_at:new Date().toISOString()}).eq("id",t).select().single();if(o)throw o;return i}static async deleteProfile(t){const{error:r}=await ar.from("profiles").delete().eq("id",t);if(r)throw r}static async uploadAvatar(t,r){const i=r.name.split(".").pop(),l=`avatars/${`${t}-${Date.now()}.${i}`}`,{error:a}=await ar.storage.from("avatars").upload(l,r);if(a)throw a;const{data:p}=ar.storage.from("avatars").getPublicUrl(l);return await this.updateProfile(t,{avatar_url:p.publicUrl}),p.publicUrl}static async uploadDocument(t,r,i){const o=r.name.split(".").pop(),a=`documents/${`${t}-${i}-${Date.now()}.${o}`}`,{error:p}=await ar.storage.from("documents").upload(a,r);if(p)throw p;const{data:g}=ar.storage.from("documents").getPublicUrl(a),{data:w,error:j}=await ar.from("verification_documents").insert({profile_id:t,document_type:i,file_name:r.name,file_url:g.publicUrl,status:"pending"}).select().single();if(j)throw j;return w}static async getVerificationDocuments(t){const{data:r,error:i}=await ar.from("verification_documents").select("*").eq("profile_id",t).order("created_at",{ascending:!1});if(i)throw i;return r}static async logActivity(t,r,i,o,l){const{error:a}=await ar.from("activity_logs").insert({profile_id:t,action:r,entity_type:i,entity_id:o,metadata:l});if(a)throw a}static async getActivityLogs(t,r=20){const{data:i,error:o}=await ar.from("activity_logs").select("*").eq("profile_id",t).order("created_at",{ascending:!1}).limit(r);if(o)throw o;return i}static async searchProfiles(t,r){let i=ar.from("profiles").select("*").or(`display_name.ilike.%${t}%,email.ilike.%${t}%,industry.ilike.%${t}%`);r&&(i=i.eq("role",r));const{data:o,error:l}=await i;if(l)throw l;return o}static async getProfilesByRole(t){const{data:r,error:i}=await ar.from("profiles").select("*").eq("role",t).order("created_at",{ascending:!1});if(i)throw i;return r}static async getVerifiedProfiles(){const{data:t,error:r}=await ar.from("profiles").select("*").eq("verified",!0).order("verification_level",{ascending:!1});if(r)throw r;return t}}function pG({profile:n,isOwnProfile:t=!1,onEdit:r,onShare:i,className:o=""}){var j,S,T,E,O;const l=()=>{switch(n.verificationStatus){case"verified":return e.jsx(jm,{className:"w-4 h-4 text-green-600"});case"pending":return e.jsx(Xd,{className:"w-4 h-4 text-yellow-600"});default:return e.jsx(bs,{className:"w-4 h-4 text-gray-400"})}},a=()=>{const R={verified:"bg-green-100 text-green-800 border-green-200",pending:"bg-yellow-100 text-yellow-800 border-yellow-200",unverified:"bg-gray-100 text-gray-600 border-gray-200"};return e.jsxs(Gt,{variant:"outline",className:R[n.verificationStatus],children:[l(),e.jsx("span",{className:"ml-1 capitalize",children:n.verificationStatus})]})},p=()=>{const F={seller:{label:"Business Seller",icon:$o,color:"bg-blue-100 text-blue-800 border-blue-200"},buyer:{label:"Business Buyer",icon:na,color:"bg-green-100 text-green-800 border-green-200"},franchisor:{label:"Franchisor",icon:Go,color:"bg-orange-100 text-orange-800 border-orange-200"},franchisee:{label:"Franchisee",icon:vy,color:"bg-purple-100 text-purple-800 border-purple-200"},advisor:{label:"Advisor/Broker",icon:wm,color:"bg-gray-100 text-gray-800 border-gray-200"}}[n.role],B=F.icon;return e.jsxs(Gt,{variant:"outline",className:F.color,children:[e.jsx(B,{className:"w-4 h-4 mr-1"}),F.label]})},w=(()=>{switch(n.role){case"seller":const R=n;return{name:R.companyName,logo:R.companyLogo,subtitle:`${R.industry}  ${R.employees} employees`};case"buyer":const F=n;return{name:F.firmName||"Individual Investor",logo:F.firmLogo,subtitle:`${F.buyerType.replace("-"," ").toUpperCase()}  ${(F.investmentRange.min/1e7).toFixed(1)}-${(F.investmentRange.max/1e7).toFixed(1)}Cr range`};case"franchisor":const B=n;return{name:B.brandName,logo:B.brandLogo,subtitle:`${B.industry}  ${B.totalOutlets} outlets`};case"franchisee":const G=n;return{name:"Franchise Investor",logo:void 0,subtitle:`Budget: ${(G.investmentBudget.min/1e7).toFixed(1)}-${(G.investmentBudget.max/1e7).toFixed(1)}Cr`};case"advisor":const z=n;return{name:z.firmName,logo:z.firmLogo,subtitle:`${z.experience} years experience  ${z.services.length} services`};default:return{name:"",logo:void 0,subtitle:""}}})();return e.jsxs("div",{className:`bg-white border rounded-lg p-6 ${o}`,children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-6",children:[e.jsxs("div",{className:"flex flex-col md:flex-row gap-4 flex-1",children:[e.jsxs("div",{className:"flex gap-4",children:[e.jsx("img",{src:n.avatar||"https://github.com/polymet-ai.png",alt:n.displayName,className:"w-20 h-20 rounded-full object-cover border-2 border-gray-200"}),w.logo&&e.jsx("img",{src:w.logo,alt:w.name,className:"w-16 h-16 rounded-lg object-cover border border-gray-200"})]}),e.jsxs("div",{className:"flex-1 space-y-3",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:n.displayName}),w.name&&e.jsx("p",{className:"text-lg text-gray-600 font-medium",children:w.name}),e.jsx("p",{className:"text-sm text-gray-500",children:w.subtitle})]}),e.jsxs("div",{className:"flex flex-wrap gap-2",children:[p(),a(),n.isPublic&&e.jsxs(Gt,{variant:"outline",className:"bg-blue-50 text-blue-700 border-blue-200",children:[e.jsx(wm,{className:"w-3 h-3 mr-1"}),"Public Profile"]})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-gray-500",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Ja,{className:"w-4 h-4"}),e.jsxs("span",{children:[n.location.city,", ",n.location.state]})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(gp,{className:"w-4 h-4"}),e.jsxs("span",{children:["Joined ",new Date(n.joinedDate).toLocaleDateString()]})]})]})]})]}),e.jsxs("div",{className:"flex flex-col gap-2 md:w-auto",children:[t?e.jsxs(ze,{onClick:r,className:"flex items-center gap-2",children:[e.jsx(ab,{className:"w-4 h-4"}),"Edit Profile"]}):e.jsxs("div",{className:"space-y-2",children:[e.jsx(ze,{className:"w-full",children:"Connect"}),e.jsx(ze,{variant:"outline",className:"w-full",children:"Message"})]}),e.jsxs(ze,{variant:"outline",onClick:i,className:"flex items-center gap-2",children:[e.jsx(yy,{className:"w-4 h-4"}),"Share"]})]})]}),n.bio&&e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsx("p",{className:"text-gray-700 leading-relaxed",children:n.bio})}),e.jsx("div",{className:"mt-6 pt-6 border-t",children:e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[n.role==="seller"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((j=n.listings)==null?void 0:j.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Active Listings"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.inquiries||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Inquiries"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.offers||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Offers"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.employees||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Employees"})]})]}),n.role==="buyer"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((S=n.savedBusinesses)==null?void 0:S.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Saved"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((T=n.ndaRequests)==null?void 0:T.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"NDAs"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:((E=n.preferredIndustries)==null?void 0:E.length)||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Industries"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:["",(((O=n.investmentRange)==null?void 0:O.max)/1e7).toFixed(0),"Cr"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Max Budget"})]})]}),n.role==="franchisor"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.totalOutlets||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Outlets"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.leads||0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Leads"})]}),e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"text-2xl font-bold text-gray-900",children:[n.royaltyPercentage||0,"%"]}),e.jsx("div",{className:"text-sm text-gray-500",children:"Royalty"})]}),e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"text-2xl font-bold text-gray-900",children:n.yearFounded?new Date().getFullYear()-n.yearFounded:0}),e.jsx("div",{className:"text-sm text-gray-500",children:"Years"})]})]}),(n.role==="franchisee"||n.role==="advisor")&&e.jsx("div",{className:"col-span-2 md:col-span-4 text-center text-gray-500",children:e.jsx("p",{children:"Profile statistics will appear here based on activity"})})]})})]})}function mG({activeRole:n,onRoleChange:t,showAddRole:r=!1,onAddRole:i,className:o=""}){var p;const l=[{id:"seller",label:"Business Seller",shortLabel:"Seller",icon:$o,description:"Sell your business",color:"blue",count:1},{id:"buyer",label:"Business Buyer",shortLabel:"Buyer",icon:na,description:"Buy businesses",color:"green",count:0},{id:"franchisor",label:"Franchisor",shortLabel:"Franchisor",icon:Go,description:"Offer franchises",color:"orange",count:0},{id:"franchisee",label:"Franchisee",shortLabel:"Franchisee",icon:vy,description:"Buy franchises",color:"purple",count:0},{id:"advisor",label:"Advisor/Broker",shortLabel:"Advisor",icon:wm,description:"Provide advisory services",color:"gray",count:0}],a=(g,w)=>{var S;return((S={blue:{active:"bg-blue-100 text-blue-900 border-blue-300",inactive:"text-blue-600 hover:bg-blue-50 border-transparent"},green:{active:"bg-green-100 text-green-900 border-green-300",inactive:"text-green-600 hover:bg-green-50 border-transparent"},orange:{active:"bg-orange-100 text-orange-900 border-orange-300",inactive:"text-orange-600 hover:bg-orange-50 border-transparent"},purple:{active:"bg-purple-100 text-purple-900 border-purple-300",inactive:"text-purple-600 hover:bg-purple-50 border-transparent"},gray:{active:"bg-gray-100 text-gray-900 border-gray-300",inactive:"text-gray-600 hover:bg-gray-50 border-transparent"}}[g])==null?void 0:S[w?"active":"inactive"])||""};return e.jsxs("div",{className:`bg-white border rounded-lg p-4 ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Your Roles"}),r&&e.jsxs(ze,{variant:"outline",size:"sm",onClick:i,className:"flex items-center gap-2",children:[e.jsx(Lh,{className:"w-4 h-4"}),"Add Role"]})]}),e.jsx("div",{className:"hidden md:flex flex-wrap gap-2",children:l.map(g=>{const w=n===g.id,j=g.icon;return e.jsxs("button",{onClick:()=>t(g.id),className:`
                flex items-center gap-2 px-4 py-3 rounded-lg border-2 transition-all duration-200
                ${a(g.color,w)}
                ${w?"shadow-sm":"hover:shadow-sm"}
              `,children:[e.jsx(j,{className:"w-4 h-4"}),e.jsx("span",{className:"font-medium",children:g.shortLabel}),g.count>0&&e.jsx(Gt,{variant:"secondary",className:"ml-1 text-xs",children:g.count})]},g.id)})}),e.jsx("div",{className:"md:hidden",children:e.jsx("select",{value:n,onChange:g=>t(g.target.value),className:"w-full p-3 border rounded-lg bg-white text-gray-900 focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:l.map(g=>e.jsxs("option",{value:g.id,children:[g.label," ",g.count>0?`(${g.count})`:""]},g.id))})}),e.jsxs("div",{className:"mt-4 p-3 bg-gray-50 rounded-lg",children:[e.jsx("div",{className:"flex items-center gap-2 mb-2",children:(()=>{const g=l.find(j=>j.id===n);if(!g)return null;const w=g.icon;return e.jsxs(e.Fragment,{children:[e.jsx(w,{className:"w-5 h-5 text-gray-600"}),e.jsx("span",{className:"font-medium text-gray-900",children:g.label})]})})()}),e.jsx("p",{className:"text-sm text-gray-600",children:(p=l.find(g=>g.id===n))==null?void 0:p.description})]}),e.jsxs("div",{className:"mt-4 flex flex-wrap gap-2",children:[n==="seller"&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:"sm",variant:"outline",children:"Create Listing"}),e.jsx(ze,{size:"sm",variant:"outline",children:"View Inquiries"}),e.jsx(ze,{size:"sm",variant:"outline",children:"Upload Documents"})]}),n==="buyer"&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:"sm",variant:"outline",children:"Browse Businesses"}),e.jsx(ze,{size:"sm",variant:"outline",children:"Saved Searches"}),e.jsx(ze,{size:"sm",variant:"outline",children:"My NDAs"})]}),n==="franchisor"&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:"sm",variant:"outline",children:"Create Franchise"}),e.jsx(ze,{size:"sm",variant:"outline",children:"Manage Leads"}),e.jsx(ze,{size:"sm",variant:"outline",children:"Franchise Kit"})]}),n==="franchisee"&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:"sm",variant:"outline",children:"Browse Franchises"}),e.jsx(ze,{size:"sm",variant:"outline",children:"My Applications"}),e.jsx(ze,{size:"sm",variant:"outline",children:"Compare Options"})]}),n==="advisor"&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{size:"sm",variant:"outline",children:"Manage Clients"}),e.jsx(ze,{size:"sm",variant:"outline",children:"Create Listing"}),e.jsx(ze,{size:"sm",variant:"outline",children:"Lead Pipeline"})]})]})]})}function p6({profile:n,onUploadDocument:t,onViewDocument:r,onStartVerification:i,className:o=""}){const a=(E=>{const O=[{id:"identity",name:"Government ID",description:"Aadhaar Card, PAN Card, or Passport",required:!0,status:"verified",uploadDate:"2024-01-10"},{id:"address",name:"Address Proof",description:"Utility bill or bank statement (last 3 months)",required:!0,status:"verified",uploadDate:"2024-01-10"}];return{seller:[...O,{id:"business_registration",name:"Business Registration",description:"Certificate of Incorporation or Partnership Deed",required:!0,status:"uploaded",uploadDate:"2024-01-12"},{id:"gst_certificate",name:"GST Certificate",description:"Valid GST registration certificate",required:!0,status:"not_uploaded"},{id:"financial_statements",name:"Financial Statements",description:"Last 3 years P&L and Balance Sheet",required:!0,status:"not_uploaded"},{id:"bank_statements",name:"Bank Statements",description:"Last 12 months business bank statements",required:!1,status:"not_uploaded"}],buyer:[...O,{id:"income_proof",name:"Income Proof",description:"ITR or salary slips for last 2 years",required:!0,status:"uploaded",uploadDate:"2024-01-11"},{id:"net_worth",name:"Net Worth Statement",description:"CA certified net worth statement",required:!0,status:"not_uploaded"},{id:"investment_experience",name:"Investment Experience",description:"Previous investment portfolio or business ownership proof",required:!1,status:"not_uploaded"}],franchisor:[...O,{id:"brand_registration",name:"Brand Registration",description:"Trademark registration certificate",required:!0,status:"verified",uploadDate:"2024-01-08"},{id:"franchise_agreement",name:"Franchise Agreement Template",description:"Legal franchise agreement template",required:!0,status:"uploaded",uploadDate:"2024-01-09"},{id:"financial_disclosure",name:"Financial Disclosure Document",description:"FDD with financial performance representations",required:!0,status:"not_uploaded"}],franchisee:[...O,{id:"financial_capacity",name:"Financial Capacity Proof",description:"Bank statements and investment capacity proof",required:!0,status:"not_uploaded"},{id:"business_plan",name:"Business Plan",description:"Detailed business plan for franchise operation",required:!1,status:"not_uploaded"}],advisor:[...O,{id:"professional_license",name:"Professional License",description:"Real estate or business broker license",required:!0,status:"verified",uploadDate:"2024-01-05"},{id:"experience_certificate",name:"Experience Certificate",description:"Proof of relevant industry experience",required:!0,status:"uploaded",uploadDate:"2024-01-06"},{id:"client_testimonials",name:"Client Testimonials",description:"References from previous successful deals",required:!1,status:"not_uploaded"}]}[E]||O})(n.role),p=a.filter(E=>E.required).length,g=a.filter(E=>E.required&&(E.status==="verified"||E.status==="uploaded")).length,w=g/p*100,j=E=>{switch(E){case"verified":return e.jsx(Nn,{className:"w-4 h-4 text-green-600"});case"uploaded":return e.jsx(Xd,{className:"w-4 h-4 text-yellow-600"});case"rejected":return e.jsx(zx,{className:"w-4 h-4 text-red-600"});default:return e.jsx(jc,{className:"w-4 h-4 text-gray-400"})}},S=E=>{const O={verified:"bg-green-100 text-green-800",uploaded:"bg-yellow-100 text-yellow-800",rejected:"bg-red-100 text-red-800",not_uploaded:"bg-gray-100 text-gray-600"},R={verified:"Verified",uploaded:"Under Review",rejected:"Rejected",not_uploaded:"Not Uploaded"};return e.jsx(Gt,{className:O[E],children:R[E]})},T=()=>{switch(n.verificationStatus){case"verified":return e.jsx(jm,{className:"w-6 h-6 text-green-600"});case"pending":return e.jsx(Xd,{className:"w-6 h-6 text-yellow-600"});default:return e.jsx(bs,{className:"w-6 h-6 text-gray-400"})}};return e.jsxs("div",{className:`bg-white border rounded-lg p-6 ${o}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[T(),e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Verification Status"}),e.jsxs("p",{className:"text-sm text-gray-600 capitalize",children:[n.verificationStatus==="verified"&&"Your profile is fully verified",n.verificationStatus==="pending"&&"Verification in progress",n.verificationStatus==="unverified"&&"Complete verification to build trust"]})]})]}),n.verificationStatus==="unverified"&&e.jsx(ze,{onClick:i,children:"Start Verification"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex justify-between items-center mb-2",children:[e.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Progress (",g,"/",p," required documents)"]}),e.jsxs("span",{className:"text-sm text-gray-600",children:[Math.round(w),"%"]})]}),e.jsx(vo,{value:w,className:"h-2"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium text-gray-900",children:"Required Documents"}),a.map(E=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-start gap-3 flex-1",children:[j(E.status),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:E.name}),E.required&&e.jsx(Gt,{variant:"outline",className:"text-xs",children:"Required"})]}),e.jsx("p",{className:"text-sm text-gray-600 mb-2",children:E.description}),E.uploadDate&&e.jsxs("p",{className:"text-xs text-gray-500",children:["Uploaded on ",new Date(E.uploadDate).toLocaleDateString()]}),E.status==="rejected"&&E.rejectionReason&&e.jsxs("p",{className:"text-xs text-red-600 mt-1",children:["Rejected: ",E.rejectionReason]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[S(E.status),E.status==="not_uploaded"?e.jsxs(ze,{size:"sm",variant:"outline",onClick:()=>t==null?void 0:t(E.id),className:"flex items-center gap-1",children:[e.jsx(Jd,{className:"w-3 h-3"}),"Upload"]}):e.jsxs(ze,{size:"sm",variant:"ghost",onClick:()=>r==null?void 0:r(E.id),className:"flex items-center gap-1",children:[e.jsx(Ua,{className:"w-3 h-3"}),"View"]})]})]},E.id))]}),e.jsxs("div",{className:"mt-6 p-4 bg-blue-50 rounded-lg",children:[e.jsxs("h4",{className:"font-medium text-blue-900 mb-2 flex items-center gap-2",children:[e.jsx(jm,{className:"w-4 h-4"}),"Verification Benefits"]}),e.jsxs("ul",{className:"text-sm text-blue-800 space-y-1",children:[e.jsx("li",{children:" Higher visibility in search results"}),e.jsx("li",{children:" Increased trust from potential partners"}),e.jsx("li",{children:" Access to premium features and tools"}),e.jsx("li",{children:" Priority customer support"}),e.jsx("li",{children:" Verified badge on your profile"})]})]})]})}function m6({profile:n,documents:t=[],isOwnVault:r=!1,hasSignedNDA:i=!1,onUploadDocument:o,onDownloadDocument:l,onSignNDA:a,className:p=""}){const[g,w]=M.useState(!1),[j,S]=M.useState(!1),[T,E]=M.useState("all"),R=(()=>{const J=[{id:"doc1",name:"Company Profile.pdf",type:"marketing",size:"2.4 MB",uploadDate:"2024-01-15",uploadedBy:n.displayName,isPrivate:!1,requiresNDA:!1,description:"Company overview and capabilities",downloadCount:12},{id:"doc2",name:"Business License.pdf",type:"legal",size:"1.2 MB",uploadDate:"2024-01-10",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!0,description:"Official business registration documents",downloadCount:3}],Se={seller:[...J,{id:"doc3",name:"Financial_Statements_2023.xlsx",type:"financial",size:"5.8 MB",uploadDate:"2024-01-12",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!0,description:"Detailed P&L and balance sheet for 2023",downloadCount:8},{id:"doc4",name:"Asset_Inventory.pdf",type:"operational",size:"3.1 MB",uploadDate:"2024-01-08",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!0,description:"Complete inventory of business assets",downloadCount:5},{id:"doc5",name:"Customer_Contracts.zip",type:"legal",size:"12.4 MB",uploadDate:"2024-01-05",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!0,description:"Key customer contracts and agreements",downloadCount:2}],buyer:[...J,{id:"doc3",name:"Investment_Criteria.pdf",type:"other",size:"1.8 MB",uploadDate:"2024-01-14",uploadedBy:n.displayName,isPrivate:!1,requiresNDA:!1,description:"Investment preferences and criteria",downloadCount:15},{id:"doc4",name:"Proof_of_Funds.pdf",type:"financial",size:"2.2 MB",uploadDate:"2024-01-11",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!0,description:"Bank statements and financial capacity proof",downloadCount:0}],franchisor:[...J,{id:"doc3",name:"Franchise_Disclosure_Document.pdf",type:"legal",size:"8.7 MB",uploadDate:"2024-01-13",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!0,description:"Complete FDD with financial performance data",downloadCount:18},{id:"doc4",name:"Operations_Manual.pdf",type:"operational",size:"15.2 MB",uploadDate:"2024-01-09",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!0,description:"Comprehensive franchise operations guide",downloadCount:7},{id:"doc5",name:"Marketing_Kit.zip",type:"marketing",size:"25.6 MB",uploadDate:"2024-01-07",uploadedBy:n.displayName,isPrivate:!1,requiresNDA:!1,description:"Brand assets and marketing materials",downloadCount:34}],franchisee:[...J,{id:"doc3",name:"Business_Plan_Draft.pdf",type:"other",size:"4.3 MB",uploadDate:"2024-01-12",uploadedBy:n.displayName,isPrivate:!0,requiresNDA:!1,description:"Franchise business plan and projections",downloadCount:1}],advisor:[...J,{id:"doc3",name:"Client_Success_Stories.pdf",type:"marketing",size:"6.1 MB",uploadDate:"2024-01-11",uploadedBy:n.displayName,isPrivate:!1,requiresNDA:!1,description:"Case studies and client testimonials",downloadCount:22},{id:"doc4",name:"Professional_Credentials.pdf",type:"legal",size:"2.8 MB",uploadDate:"2024-01-06",uploadedBy:n.displayName,isPrivate:!1,requiresNDA:!1,description:"Licenses and professional certifications",downloadCount:9}]};return t.length>0?t:Se[n.role]||J})(),F=["all","financial","legal","operational","marketing","other"],B=T==="all"?R:R.filter(J=>J.type===T),G=B.filter(J=>!J.isPrivate),z=B.filter(J=>J.isPrivate),ee=J=>({financial:"",legal:"",operational:"",marketing:"",other:""})[J]||"",ie=J=>{const Se={financial:"bg-green-100 text-green-800",legal:"bg-blue-100 text-blue-800",operational:"bg-orange-100 text-orange-800",marketing:"bg-purple-100 text-purple-800",other:"bg-gray-100 text-gray-800"};return e.jsx(Gt,{className:Se[J],children:J.charAt(0).toUpperCase()+J.slice(1)})},ge=J=>{J.requiresNDA&&!i&&!r?w(!0):l==null||l(J.id)},K=()=>{j&&(a==null||a(),w(!1),S(!1))};return e.jsxs("div",{className:`bg-white border rounded-lg p-6 ${p}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsxs("div",{children:[e.jsxs("h3",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5"}),"Documents Vault"]}),e.jsx("p",{className:"text-sm text-gray-600",children:r?"Manage your documents":`${n.displayName}'s documents`})]}),r&&e.jsxs(ze,{onClick:o,className:"flex items-center gap-2",children:[e.jsx(Jd,{className:"w-4 h-4"}),"Upload Document"]})]}),e.jsx("div",{className:"flex flex-wrap gap-2 mb-6",children:F.map(J=>e.jsx(ze,{variant:T===J?"default":"outline",size:"sm",onClick:()=>E(J),className:"capitalize",children:J==="all"?"All Documents":J},J))}),G.length>0&&e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(RO,{className:"w-4 h-4 text-green-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Public Documents"}),e.jsxs(Gt,{variant:"outline",className:"text-xs",children:[G.length," documents"]})]}),e.jsx("div",{className:"space-y-3",children:G.map(J=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-gray-50 transition-colors",children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:ee(J.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:J.name}),ie(J.type)]}),J.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:J.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsx("span",{children:J.size}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gp,{className:"w-3 h-3"}),new Date(J.uploadDate).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(wc,{className:"w-3 h-3"}),J.downloadCount," downloads"]})]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{size:"sm",variant:"outline",onClick:()=>ge(J),className:"flex items-center gap-1",children:[e.jsx(wc,{className:"w-3 h-3"}),"Download"]}),!r&&e.jsx(ze,{size:"sm",variant:"ghost",className:"flex items-center gap-1",children:e.jsx(yy,{className:"w-3 h-3"})})]})]},J.id))})]}),z.length>0&&e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2 mb-4",children:[e.jsx(Mh,{className:"w-4 h-4 text-red-600"}),e.jsx("h4",{className:"font-medium text-gray-900",children:"Private Documents"}),e.jsxs(Gt,{variant:"outline",className:"text-xs",children:[z.length," documents"]}),!r&&!i&&e.jsx(Gt,{className:"bg-red-100 text-red-800 text-xs",children:"NDA Required"})]}),!r&&!i&&e.jsxs("div",{className:"p-4 bg-red-50 border border-red-200 rounded-lg mb-4",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Xc,{className:"w-4 h-4 text-red-600"}),e.jsx("span",{className:"font-medium text-red-900",children:"NDA Required"})]}),e.jsx("p",{className:"text-sm text-red-800 mb-3",children:"These documents contain sensitive information. You must sign a Non-Disclosure Agreement to access them."}),e.jsx(ze,{size:"sm",onClick:()=>w(!0),className:"bg-red-600 hover:bg-red-700",children:"Sign NDA to Access"})]}),e.jsx("div",{className:"space-y-3",children:z.map(J=>e.jsxs("div",{className:`flex items-center justify-between p-4 border rounded-lg transition-colors ${!r&&!i?"opacity-50 bg-gray-50":"hover:bg-gray-50"}`,children:[e.jsxs("div",{className:"flex items-center gap-3 flex-1",children:[e.jsx("span",{className:"text-2xl",children:ee(J.type)}),e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h5",{className:"font-medium text-gray-900",children:J.name}),ie(J.type),J.requiresNDA&&e.jsxs(Gt,{className:"bg-red-100 text-red-800 text-xs",children:[e.jsx(bs,{className:"w-3 h-3 mr-1"}),"NDA"]})]}),J.description&&e.jsx("p",{className:"text-sm text-gray-600 mb-1",children:J.description}),e.jsxs("div",{className:"flex items-center gap-4 text-xs text-gray-500",children:[e.jsx("span",{children:J.size}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(gp,{className:"w-3 h-3"}),new Date(J.uploadDate).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(wc,{className:"w-3 h-3"}),J.downloadCount," downloads"]})]})]})]}),e.jsx("div",{className:"flex items-center gap-2",children:e.jsxs(ze,{size:"sm",variant:"outline",onClick:()=>ge(J),disabled:!r&&!i&&J.requiresNDA,className:"flex items-center gap-1",children:[e.jsx(wc,{className:"w-3 h-3"}),"Download"]})})]},J.id))})]}),B.length===0&&e.jsxs("div",{className:"text-center py-12",children:[e.jsx(Ys,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),e.jsx("h4",{className:"text-lg font-medium text-gray-900 mb-2",children:"No Documents Found"}),e.jsx("p",{className:"text-gray-600 mb-4",children:T==="all"?"No documents have been uploaded yet.":`No ${T} documents found.`}),r&&e.jsx(ze,{onClick:o,children:"Upload Your First Document"})]}),e.jsx(Mg,{open:g,onOpenChange:w,children:e.jsxs(Om,{className:"max-w-2xl",children:[e.jsxs(zm,{children:[e.jsxs(Fm,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5 text-red-600"}),"Non-Disclosure Agreement"]}),e.jsxs(v0,{children:["Please review and accept the NDA to access private documents from"," ",n.displayName,"."]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"max-h-64 overflow-y-auto p-4 bg-gray-50 rounded-lg text-sm",children:[e.jsx("h4",{className:"font-medium mb-2",children:"CONFIDENTIALITY AND NON-DISCLOSURE AGREEMENT"}),e.jsxs("p",{className:"mb-2",children:['This Non-Disclosure Agreement ("Agreement") is entered into between ',n.displayName,' ("Disclosing Party") and you ("Receiving Party") for the purpose of preventing the unauthorized disclosure of Confidential Information.']}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"1. Definition of Confidential Information:"})," All business, financial, operational, and proprietary information shared through this platform, including but not limited to financial statements, business plans, customer lists, and operational procedures."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"2. Obligations:"})," The Receiving Party agrees to maintain confidentiality and not disclose, use, or reproduce any Confidential Information for any purpose other than evaluating potential business opportunities."]}),e.jsxs("p",{className:"mb-2",children:[e.jsx("strong",{children:"3. Term:"})," This Agreement shall remain in effect for a period of 2 years from the date of acceptance."]}),e.jsxs("p",{children:[e.jsx("strong",{children:"4. Remedies:"})," Any breach of this Agreement may result in irreparable harm, and the Disclosing Party shall be entitled to seek injunctive relief and monetary damages."]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"nda-accept",checked:j,onCheckedChange:J=>S(J)}),e.jsx("label",{htmlFor:"nda-accept",className:"text-sm font-medium",children:"I have read, understood, and agree to the terms of this Non-Disclosure Agreement"})]}),e.jsxs("div",{className:"flex justify-end gap-2",children:[e.jsx(ze,{variant:"outline",onClick:()=>w(!1),children:"Cancel"}),e.jsx(ze,{onClick:K,disabled:!j,className:"bg-red-600 hover:bg-red-700",children:"Sign NDA & Access Documents"})]})]})]})})]})}const g6=[{id:"u1",email:"rajesh.kumar@techflow.com",phone:"+91 98765 43210",avatar:"https://github.com/yusufhilmi.png",displayName:"Rajesh Kumar",role:"seller",location:{city:"Bangalore",state:"Karnataka",country:"India"},bio:"Experienced tech entrepreneur looking to sell my successful software consultancy to focus on new ventures.",verificationStatus:"verified",joinedDate:"2023-06-15",lastActive:"2024-01-15",isPublic:!0,ndaAccepted:!1,companyName:"TechFlow Solutions",companyLogo:"https://github.com/polymet-ai.png",industry:"Technology",businessType:"llc",yearEstablished:2018,employees:25,publicInfo:{shortDescription:"Leading software consultancy specializing in enterprise solutions and digital transformation.",keyFeatures:["Established client base of 50+ companies","Recurring revenue model","Skilled development team","Modern tech stack"],businessHours:"Mon-Fri 9AM-6PM",website:"https://techflow.com"},privateInfo:{monthlyRevenue:8e5,annualRevenue:96e5,netProfit:24e5,askingPrice:12e6,assets:{equipment:5e5,inventory:0,realEstate:0},liabilities:2e5,customerBase:52,leaseInfo:{monthlyRent:15e4,leaseExpiry:"2026-12-31",renewalOptions:"5-year renewal available"},reasonForSelling:"Pursuing new venture in AI/ML space"},listings:["b1","b2"],inquiries:23,offers:5},{id:"u2",email:"priya.investments@gmail.com",phone:"+91 98765 43211",avatar:"https://github.com/kdrnp.png",displayName:"Priya Sharma",role:"buyer",location:{city:"Mumbai",state:"Maharashtra",country:"India"},bio:"Private equity investor focused on acquiring profitable SMEs in technology and healthcare sectors.",verificationStatus:"verified",joinedDate:"2023-08-20",lastActive:"2024-01-14",isPublic:!0,ndaAccepted:!0,buyerType:"private-equity",firmName:"Sharma Capital Partners",firmLogo:"https://github.com/polymet-ai.png",investmentRange:{min:5e6,max:5e7},preferredIndustries:["Technology","Healthcare","Manufacturing"],preferredLocations:["Mumbai","Pune","Bangalore","Delhi"],experience:"15+ years in private equity and business acquisitions",privateInfo:{financingPreference:"mixed",preApprovalAmount:3e7,timeline:"3-6 months for due diligence and closing",dueDiligenceProcess:"Comprehensive financial, legal, and operational review"},savedBusinesses:["b1","b3","b5"],savedSearches:["tech-bangalore","healthcare-mumbai"],ndaRequests:["b1","b2"]},{id:"u3",email:"franchise@burgerjunction.com",phone:"+91 98765 43212",avatar:"https://github.com/yahyabedirhan.png",displayName:"Amit Patel",role:"franchisor",location:{city:"Ahmedabad",state:"Gujarat",country:"India"},bio:"Founder of Burger Junction, expanding our successful QSR franchise across India with proven systems and support.",verificationStatus:"verified",joinedDate:"2023-05-10",lastActive:"2024-01-15",isPublic:!0,ndaAccepted:!1,brandName:"Burger Junction",brandLogo:"https://github.com/polymet-ai.png",industry:"Food & Beverage",yearFounded:2019,totalOutlets:45,franchiseFee:5e5,royaltyPercentage:6,investmentRange:{min:2e6,max:35e5},publicInfo:{brandStory:"Started as a single outlet in Ahmedabad, now India's fastest-growing burger franchise with a focus on quality ingredients and customer experience.",keyDifferentiators:["Fresh, never frozen patties","Proprietary sauce recipes","Quick service model","Strong brand recognition"],supportProvided:["Site selection assistance","Complete training program","Marketing support","Operations manual","Ongoing business coaching"],territoryAvailability:["Mumbai","Pune","Surat","Vadodara","Rajkot"]},privateInfo:{franchiseKit:"comprehensive-franchise-kit-v2.pdf",roiCaseStudies:["mumbai-outlet-case-study.pdf","pune-success-story.pdf"],legalDocuments:["franchise-agreement.pdf","disclosure-document.pdf"],financialPerformance:{averageUnitRevenue:25e5,averageUnitProfit:5e5,breakEvenTime:18},franchiseeRequirements:["Minimum 5 years business experience","Food service experience preferred","Commitment to brand standards","Local market knowledge"]},franchiseListings:["f1","f2"],leads:34,activeNegotiations:8}],v6=n=>g6.find(t=>t.id===n),Nb=()=>g6[0],gG=[{id:"a1",type:"listing_created",title:"New Business Listed",description:"TechFlow Solutions listed for sale",timestamp:"2024-01-15T10:30:00Z",metadata:{listingId:"b1",askingPrice:12e6}},{id:"a2",type:"inquiry_received",title:"New Inquiry",description:"Inquiry received from Priya Sharma",timestamp:"2024-01-14T15:45:00Z",metadata:{inquiryId:"i1",buyerId:"u2"}},{id:"a3",type:"document_uploaded",title:"Financial Documents Uploaded",description:"P&L statements and balance sheets uploaded",timestamp:"2024-01-13T09:15:00Z",metadata:{documentCount:5,documentType:"financial"}},{id:"a4",type:"nda_signed",title:"NDA Signed",description:"Non-disclosure agreement signed with potential buyer",timestamp:"2024-01-12T14:20:00Z",metadata:{buyerId:"u2",ndaId:"nda1"}},{id:"a5",type:"offer_made",title:"Offer Received",description:"10.5Cr offer received for TechFlow Solutions",timestamp:"2024-01-11T11:00:00Z",metadata:{offerId:"o1",amount:105e5,buyerId:"u2"}}],vG=n=>gG,yG={listing_created:Ys,inquiry_received:sb,offer_made:yf,document_uploaded:Jd,nda_signed:Nn,profile_viewed:Ua,meeting_scheduled:gp,verification_completed:Nn,payment_received:yf,contract_signed:Ys,milestone_reached:na,team_member_added:Go},xG={listing_created:"bg-blue-500",inquiry_received:"bg-green-500",offer_made:"bg-orange-500",document_uploaded:"bg-purple-500",nda_signed:"bg-red-500",profile_viewed:"bg-gray-500",meeting_scheduled:"bg-indigo-500",verification_completed:"bg-emerald-500",payment_received:"bg-yellow-500",contract_signed:"bg-pink-500",milestone_reached:"bg-cyan-500",team_member_added:"bg-violet-500"};function bG({userId:n,limit:t=10,showFilters:r=!0,className:i=""}){const o=vG().slice(0,t),[l,a]=Ft.useState("all"),p=o.filter(j=>l==="all"?!0:j.type===l),g=j=>{const S=new Date,T=new Date(j),E=Math.floor((S.getTime()-T.getTime())/(1e3*60*60));return E<1?"Just now":E<24?`${E}h ago`:E<168?`${Math.floor(E/24)}d ago`:`${Math.floor(E/168)}w ago`},w=[...new Set(o.map(j=>j.type))];return e.jsxs(ot,{className:i,children:[e.jsxs(Vt,{children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Xd,{className:"w-5 h-5"}),"Recent Activity"]}),e.jsx(ze,{variant:"ghost",size:"sm",children:e.jsx(tj,{className:"w-4 h-4"})})]}),r&&e.jsxs("div",{className:"flex flex-wrap gap-2 mt-4",children:[e.jsx(ze,{variant:l==="all"?"default":"outline",size:"sm",onClick:()=>a("all"),children:"All"}),w.map(j=>e.jsx(ze,{variant:l===j?"default":"outline",size:"sm",onClick:()=>a(j),children:j.replace(/_/g," ").replace(/\b\w/g,S=>S.toUpperCase())},j))]})]}),e.jsxs(ut,{children:[p.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Xd,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No recent activity"}),e.jsx("p",{className:"text-sm",children:"Your activities will appear here"})]}):e.jsx("div",{className:"space-y-4",children:p.map((j,S)=>{const T=yG[j.type]||jc,E=xG[j.type]||"bg-gray-500";return e.jsxs("div",{className:"flex gap-4 group",children:[e.jsxs("div",{className:"flex flex-col items-center",children:[e.jsx("div",{className:`w-8 h-8 rounded-full ${E} flex items-center justify-center flex-shrink-0`,children:e.jsx(T,{className:"w-4 h-4 text-white"})}),S<p.length-1&&e.jsx("div",{className:"w-px h-8 bg-border mt-2"})]}),e.jsx("div",{className:"flex-1 min-w-0 pb-4",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h4",{className:"font-medium text-sm group-hover:text-primary transition-colors",children:j.title}),e.jsx("p",{className:"text-sm text-muted-foreground mt-1",children:j.description}),j.metadata&&e.jsx("div",{className:"flex flex-wrap gap-2 mt-2",children:Object.entries(j.metadata).map(([O,R])=>e.jsxs(Gt,{variant:"secondary",className:"text-xs",children:[O,": ",String(R)]},O))})]}),e.jsx("div",{className:"text-xs text-muted-foreground ml-4 flex-shrink-0",children:g(j.timestamp)})]})})]},j.id)})}),o.length>t&&e.jsx("div",{className:"text-center pt-4 border-t",children:e.jsx(ze,{variant:"outline",size:"sm",children:"View All Activity"})})]})]})}const Px={owner:["All permissions","Billing access","Delete account"],admin:["Manage team","Edit profile","View documents","Manage listings"],editor:["Edit profile","View documents","Manage listings"],viewer:["View profile","View public documents"]},e4={owner:"bg-purple-100 text-purple-800",admin:"bg-blue-100 text-blue-800",editor:"bg-green-100 text-green-800",viewer:"bg-gray-100 text-gray-800"},_G={active:Nn,pending:Xd,suspended:jc},wG={active:"text-green-600",pending:"text-yellow-600",suspended:"text-red-600"},jG=[{id:"tm1",name:"Rajesh Kumar",email:"rajesh@techflow.com",role:"owner",status:"active",avatar:"https://github.com/yusufhilmi.png",joinedDate:"2024-01-15",lastActive:"2024-03-15T10:30:00Z",permissions:Px.owner},{id:"tm2",name:"Priya Sharma",email:"priya@techflow.com",role:"admin",status:"active",avatar:"https://github.com/kdrnp.png",joinedDate:"2024-02-01",lastActive:"2024-03-14T16:45:00Z",permissions:Px.admin},{id:"tm3",name:"Amit Patel",email:"amit@consultant.com",role:"editor",status:"pending",avatar:"https://github.com/yahyabedirhan.png",joinedDate:"2024-03-10",lastActive:"2024-03-10T09:00:00Z",permissions:Px.editor}];function NG({members:n=jG,onInviteMember:t,onUpdateRole:r,onRemoveMember:i,onResendInvite:o,className:l=""}){var O;const[a,p]=M.useState(!1),[g,w]=M.useState(""),[j,S]=M.useState("viewer"),T=()=>{g&&t&&(t(g,j),w(""),S("viewer"),p(!1))},E=R=>{const F=new Date,B=new Date(R),G=Math.floor((F.getTime()-B.getTime())/(1e3*60*60));return G<1?"Just now":G<24?`${G}h ago`:G<168?`${Math.floor(G/24)}d ago`:`${Math.floor(G/168)}w ago`};return e.jsxs(ot,{className:l,children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Go,{className:"w-5 h-5"}),"Team Management",e.jsx(Gt,{variant:"secondary",children:n.length})]}),e.jsxs(Mg,{open:a,onOpenChange:p,children:[e.jsx(Jj,{asChild:!0,children:e.jsxs(ze,{size:"sm",children:[e.jsx(I8,{className:"w-4 h-4 mr-2"}),"Invite Member"]})}),e.jsxs(Om,{children:[e.jsxs(zm,{children:[e.jsx(Fm,{children:"Invite Team Member"}),e.jsx(v0,{children:"Send an invitation to collaborate on your profile and listings."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"email",children:"Email Address"}),e.jsx(Wt,{id:"email",type:"email",placeholder:"colleague@company.com",value:g,onChange:R=>w(R.target.value)})]}),e.jsxs("div",{children:[e.jsx(ct,{htmlFor:"role",children:"Role"}),e.jsxs(ys,{value:j,onValueChange:S,children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"admin",children:"Admin"}),e.jsx(pr,{value:"editor",children:"Editor"}),e.jsx(pr,{value:"viewer",children:"Viewer"})]})]}),e.jsx("p",{className:"text-xs text-muted-foreground mt-1",children:(O=Px[j])==null?void 0:O.join(", ")})]})]}),e.jsxs(Qj,{children:[e.jsx(ze,{variant:"outline",onClick:()=>p(!1),children:"Cancel"}),e.jsxs(ze,{onClick:T,disabled:!g,children:[e.jsx(bu,{className:"w-4 h-4 mr-2"}),"Send Invite"]})]})]})]})]})}),e.jsxs(ut,{children:[e.jsx("div",{className:"space-y-4",children:n.map(R=>{const F=_G[R.status];return e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("img",{src:R.avatar,alt:R.name,className:"w-10 h-10 rounded-full"}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium truncate",children:R.name}),R.role==="owner"&&e.jsx(WD,{className:"w-4 h-4 text-yellow-600"}),e.jsx(Gt,{className:e4[R.role],children:R.role}),e.jsx(F,{className:`w-4 h-4 ${wG[R.status]}`})]}),e.jsx("p",{className:"text-sm text-muted-foreground truncate",children:R.email}),e.jsx("p",{className:"text-xs text-muted-foreground",children:R.status==="active"?`Active ${E(R.lastActive)}`:R.status==="pending"?"Invitation pending":"Account suspended"})]}),e.jsxs(Q2,{children:[e.jsx(ew,{asChild:!0,children:e.jsx(ze,{variant:"ghost",size:"sm",children:e.jsx(tj,{className:"w-4 h-4"})})}),e.jsxs(mb,{align:"end",children:[R.status==="pending"&&e.jsxs(Wd,{onClick:()=>o==null?void 0:o(R.id),children:[e.jsx(bu,{className:"w-4 h-4 mr-2"}),"Resend Invite"]}),R.role!=="owner"&&e.jsxs(e.Fragment,{children:[e.jsxs(Wd,{onClick:()=>r==null?void 0:r(R.id,"admin"),children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Change Role"]}),e.jsxs(Wd,{onClick:()=>i==null?void 0:i(R.id),className:"text-red-600",children:[e.jsx(xf,{className:"w-4 h-4 mr-2"}),"Remove Member"]})]})]})]})]},R.id)})}),e.jsxs("div",{className:"mt-6 p-4 bg-muted/30 rounded-lg",children:[e.jsxs("h4",{className:"font-medium mb-3 flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4"}),"Role Permissions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 text-sm",children:Object.entries(Px).map(([R,F])=>e.jsxs("div",{children:[e.jsx(Gt,{className:`${e4[R]} mb-2`,children:R}),e.jsx("ul",{className:"space-y-1 text-muted-foreground",children:F.map(B=>e.jsxs("li",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"w-1 h-1 bg-current rounded-full"}),B]},B))})]},R))})]})]})]})}function t4(n){const t={id:n.id,email:n.email,phone:n.phone||"",avatar:n.avatar_url||void 0,displayName:n.display_name||"Unknown User",location:{city:n.city||"",state:n.state||"",country:n.country||"India"},bio:n.bio||"",verificationStatus:n.verified?"verified":"unverified",joinedDate:n.created_at,lastActive:n.updated_at,isPublic:!0,ndaAccepted:!1};switch(n.role){case"seller":return{...t,role:"seller",companyName:n.display_name||"Business",companyLogo:n.avatar_url||void 0,industry:n.industry||"General",businessType:"llc",yearEstablished:n.founded_year||new Date().getFullYear(),employees:n.employees||0,publicInfo:{shortDescription:n.bio||"",keyFeatures:Array.isArray(n.key_products)?n.key_products:[],businessHours:"Mon-Fri 9AM-6PM",website:n.website||void 0},privateInfo:{monthlyRevenue:0,annualRevenue:0,netProfit:0,askingPrice:n.asking_price||0,assets:{equipment:0,inventory:0,realEstate:0},liabilities:0,customerBase:0,leaseInfo:{monthlyRent:0,leaseExpiry:"",renewalOptions:""},reasonForSelling:""},listings:[],inquiries:0,offers:0};case"buyer":return{...t,role:"buyer",buyerType:n.buyer_type||"individual",firmName:n.display_name||void 0,firmLogo:n.avatar_url||void 0,investmentRange:{min:n.investment_min||0,max:n.investment_max||0},preferredIndustries:Array.isArray(n.preferred_industries)?n.preferred_industries:[],preferredLocations:[],experience:n.bio||"",privateInfo:{financingPreference:"cash",preApprovalAmount:0,timeline:"",dueDiligenceProcess:""},savedBusinesses:[],savedSearches:[],ndaRequests:[]};case"franchisor":const r=n.support;return{...t,role:"franchisor",brandName:n.display_name||"Brand",brandLogo:n.avatar_url||void 0,industry:n.industry||"General",yearFounded:n.founded_year||new Date().getFullYear(),totalOutlets:n.total_outlets||0,franchiseFee:n.franchise_fee||0,royaltyPercentage:n.royalty_percentage||0,investmentRange:{min:n.investment_min||0,max:n.investment_max||0},publicInfo:{brandStory:n.bio||"",keyDifferentiators:[],supportProvided:r!=null&&r.training?[r.training,r.marketing,r.operations]:[],territoryAvailability:[]},privateInfo:{franchiseKit:"",roiCaseStudies:[],legalDocuments:[],financialPerformance:{averageUnitRevenue:0,averageUnitProfit:0,breakEvenTime:0},franchiseeRequirements:[]},franchiseListings:[],leads:0,activeNegotiations:0};case"franchisee":return{...t,role:"franchisee",preferredIndustries:Array.isArray(n.preferred_industries)?n.preferred_industries:[],preferredTerritories:[],investmentBudget:{min:n.investment_min||0,max:n.investment_max||0},experience:{businessExperience:n.bio||"",franchiseExperience:"",industryExperience:""},timeline:"",savedFranchises:[],applications:[],comparisonMatrix:[]};case"advisor":return{...t,role:"advisor",firmName:n.display_name||"Advisory Firm",firmLogo:n.avatar_url||void 0,licenseNumber:"",services:[],specialization:[],coverageRegions:[],experience:0,credentials:[],professionalInfo:{successRate:0,averageDealSize:0,totalDealsCompleted:0,clientTestimonials:[]},managedListings:[],activeClients:0,commissionStructure:""};case"broker":return{...t,role:"advisor",firmName:n.display_name||"Brokerage Firm",firmLogo:n.avatar_url||void 0,licenseNumber:"",services:[],specialization:[],coverageRegions:[],experience:0,credentials:[],professionalInfo:{successRate:0,averageDealSize:0,totalDealsCompleted:0,clientTestimonials:[]},managedListings:[],activeClients:0,commissionStructure:""};case"admin":return{...t,role:"advisor",firmName:n.display_name||"Admin",firmLogo:n.avatar_url||void 0,licenseNumber:"",services:[],specialization:[],coverageRegions:[],experience:0,credentials:[],professionalInfo:{successRate:0,averageDealSize:0,totalDealsCompleted:0,clientTestimonials:[]},managedListings:[],activeClients:0,commissionStructure:""};default:throw new Error(`Unsupported role: ${n.role}`)}}function SG({className:n=""}){const{userId:t}=my(),r=Na(),{user:i,profile:o,loading:l}=Io(),[a,p]=M.useState(null),[g,w]=M.useState(!0),[j,S]=M.useState("seller"),T=!t||t===(i==null?void 0:i.id);if(M.useEffect(()=>{(async()=>{if(!l)try{if(t){const ee=await fG.getProfile(t),ie=t4(ee);p(ie)}else if(o){const ee=t4(o);p(ee)}}catch(ee){console.error("Error loading profile:",ee)}finally{w(!1)}})()},[t,o,l]),g||l)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto"}),e.jsx("p",{className:"mt-4 text-muted-foreground",children:"Loading profile..."})]})});if(!a)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Profile Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The requested profile could not be found."}),e.jsx(ze,{onClick:()=>r("/"),className:"mt-4",children:"Go Home"})]})});const E=()=>{r("/profile/edit")},O=()=>{console.log("Share profile"),navigator.clipboard.writeText(window.location.href)},R=()=>{console.log("Send message to",a.displayName)},B=a.role==="seller"?Hj.filter(z=>z.id==="biz-001"||z.id==="biz-002"):a.role==="franchisor"?Gj.filter(z=>z.id==="fran-001"||z.id==="fran-002"):[],G=()=>{var z,ee,ie,ge,K,J,Se,_e,re,ce;switch(a.role){case"seller":const fe=a;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(mp,{className:"w-5 h-5"}),"Business Overview"]})}),e.jsxs(ut,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:fe.yearEstablished||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Founded"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:fe.employees}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Employees"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:fe.industry}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Industry"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:(z=fe.privateInfo)!=null&&z.askingPrice?`${(fe.privateInfo.askingPrice/1e7).toFixed(1)} Cr`:"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Asking Price"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Business Description"}),e.jsx("p",{className:"text-muted-foreground",children:((ee=fe.publicInfo)==null?void 0:ee.shortDescription)||fe.bio})]}),((ie=fe.publicInfo)==null?void 0:ie.keyFeatures)&&Array.isArray(fe.publicInfo.keyFeatures)&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Key Products/Services"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:fe.publicInfo.keyFeatures.map(Q=>e.jsx(Gt,{variant:"secondary",children:Q},Q))})]})]})]}),B.length>0&&e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5"}),"Active Listings",e.jsx(Gt,{variant:"secondary",children:B.length})]})}),e.jsx(ut,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map(Q=>e.jsx(xm,{business:Q,onViewDetails:()=>console.log("View",Q.id)},Q.id))})})]})]});case"buyer":const ye=a;return e.jsx("div",{className:"space-y-6",children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"w-5 h-5"}),"Investment Profile"]})}),e.jsxs(ut,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary capitalize",children:((ge=ye.buyerType)==null?void 0:ge.replace("_"," "))||"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Buyer Type"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:(K=ye.investmentRange)!=null&&K.min&&((J=ye.investmentRange)!=null&&J.max)?`${(ye.investmentRange.min/1e7).toFixed(1)}-${(ye.investmentRange.max/1e7).toFixed(1)} Cr`:"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Investment Range"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-lg font-bold text-primary",children:Array.isArray(ye.preferredIndustries)?ye.preferredIndustries.length:0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Industries"})]})]}),Array.isArray(ye.preferredIndustries)&&ye.preferredIndustries.length>0&&e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Preferred Industries"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:ye.preferredIndustries.map(Q=>e.jsx(Gt,{variant:"secondary",children:Q},Q))})]}),ye.experience&&e.jsxs("div",{className:"mt-4",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Investment Criteria"}),e.jsx("p",{className:"text-muted-foreground",children:ye.experience})]})]})]})});case"franchisor":const Fe=a;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(vy,{className:"w-5 h-5"}),"Franchise Details"]})}),e.jsxs(ut,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:Fe.totalOutlets||0}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Outlets"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[Fe.royaltyPercentage||0,"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Royalty"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:Fe.franchiseFee?`${(Fe.franchiseFee/1e5).toFixed(0)}L`:"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Franchise Fee"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted/30 rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold text-primary",children:(Se=Fe.investmentRange)!=null&&Se.min&&((_e=Fe.investmentRange)!=null&&_e.max)?`${(Fe.investmentRange.min/1e7).toFixed(1)}-${(Fe.investmentRange.max/1e7).toFixed(1)} Cr`:"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Investment"})]})]}),e.jsxs("div",{className:"mt-6",children:[e.jsx("h4",{className:"font-medium mb-3",children:"Brand Description"}),e.jsx("p",{className:"text-muted-foreground",children:((re=Fe.publicInfo)==null?void 0:re.brandStory)||Fe.bio})]}),((ce=Fe.publicInfo)==null?void 0:ce.supportProvided)&&Fe.publicInfo.supportProvided.length>0&&e.jsxs("div",{className:"mt-6 grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Training Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Fe.publicInfo.supportProvided[0]||"Comprehensive training provided"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Marketing Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Fe.publicInfo.supportProvided[1]||"Marketing assistance available"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h5",{className:"font-medium mb-2",children:"Operations Support"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:Fe.publicInfo.supportProvided[2]||"Ongoing operational support"})]})]})]})]}),B.length>0&&e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5"}),"Franchise Opportunities",e.jsx(Gt,{variant:"secondary",children:B.length})]})}),e.jsx(ut,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:B.map(Q=>e.jsx(Ng,{franchise:Q,onViewDetails:()=>console.log("View",Q.id)},Q.id))})})]})]});default:return e.jsx(ot,{children:e.jsx(ut,{className:"py-8 text-center",children:e.jsxs("p",{className:"text-muted-foreground",children:["Profile content for ",a.role," role is coming soon."]})})})}};return e.jsxs("div",{className:`container mx-auto px-4 py-8 space-y-8 ${n}`,children:[e.jsx(pG,{profile:a,isOwnProfile:T,onEdit:E,onShare:O}),!T&&e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ze,{onClick:R,className:"flex-1 sm:flex-none",children:[e.jsx(sb,{className:"w-4 h-4 mr-2"}),"Send Message"]}),e.jsxs(ze,{variant:"outline",onClick:O,children:[e.jsx(yy,{className:"w-4 h-4 mr-2"}),"Share Profile"]})]}),e.jsxs(_p,{defaultValue:"overview",className:"space-y-6",children:[e.jsxs(Sf,{className:"grid w-full grid-cols-2 md:grid-cols-5",children:[e.jsx(Di,{value:"overview",children:"Overview"}),e.jsx(Di,{value:"verification",children:"Verification"}),e.jsx(Di,{value:"documents",children:"Documents"}),e.jsx(Di,{value:"activity",children:"Activity"}),T&&e.jsx(Di,{value:"team",children:"Team"})]}),e.jsxs(Qi,{value:"overview",className:"space-y-6",children:[T&&e.jsx(mG,{activeRole:j,onRoleChange:S,showAddRole:!0,onAddRole:()=>console.log("Add new role")}),G()]}),e.jsx(Qi,{value:"verification",children:e.jsx(p6,{profile:a,onUploadDocument:z=>console.log("Upload",z),onViewDocument:z=>console.log("View",z),onStartVerification:()=>console.log("Start verification")})}),e.jsx(Qi,{value:"documents",children:e.jsx(m6,{profile:a,isOwnVault:T,hasSignedNDA:!1,onUploadDocument:()=>console.log("Upload document"),onDownloadDocument:z=>console.log("Download",z),onSignNDA:()=>console.log("Sign NDA")})}),e.jsx(Qi,{value:"activity",children:e.jsx(bG,{userId:a.id,limit:20,showFilters:!0})}),T&&e.jsx(Qi,{value:"team",children:e.jsx(NG,{onInviteMember:(z,ee)=>console.log("Invite",z,ee),onUpdateRole:(z,ee)=>console.log("Update role",z,ee),onRemoveMember:z=>console.log("Remove",z),onResendInvite:z=>console.log("Resend",z)})})]})]})}var y0=n=>n.type==="checkbox",wg=n=>n instanceof Date,Mu=n=>n==null;const y6=n=>typeof n=="object";var yl=n=>!Mu(n)&&!Array.isArray(n)&&y6(n)&&!wg(n),x6=n=>yl(n)&&n.target?y0(n.target)?n.target.checked:n.target.value:n,AG=n=>n.substring(0,n.search(/\.\d+(\.|$)/))||n,b6=(n,t)=>n.has(AG(t)),CG=n=>{const t=n.constructor&&n.constructor.prototype;return yl(t)&&t.hasOwnProperty("isPrototypeOf")},n5=typeof window<"u"&&typeof window.HTMLElement<"u"&&typeof document<"u";function zl(n){let t;const r=Array.isArray(n),i=typeof FileList<"u"?n instanceof FileList:!1;if(n instanceof Date)t=new Date(n);else if(!(n5&&(n instanceof Blob||i))&&(r||yl(n)))if(t=r?[]:Object.create(Object.getPrototypeOf(n)),!r&&!CG(n))t=n;else for(const o in n)n.hasOwnProperty(o)&&(t[o]=zl(n[o]));else return n;return t}var y_=n=>/^\w*$/.test(n),Ro=n=>n===void 0,i5=n=>Array.isArray(n)?n.filter(Boolean):[],s5=n=>i5(n.replace(/["|']|\]/g,"").split(/\.|\[/)),Vr=(n,t,r)=>{if(!t||!yl(n))return r;const i=(y_(t)?[t]:s5(t)).reduce((o,l)=>Mu(o)?o:o[l],n);return Ro(i)||i===n?Ro(n[t])?r:n[t]:i},od=n=>typeof n=="boolean",Ws=(n,t,r)=>{let i=-1;const o=y_(t)?[t]:s5(t),l=o.length,a=l-1;for(;++i<l;){const p=o[i];let g=r;if(i!==a){const w=n[p];g=yl(w)||Array.isArray(w)?w:isNaN(+o[i+1])?{}:[]}if(p==="__proto__"||p==="constructor"||p==="prototype")return;n[p]=g,n=n[p]}};const Sb={BLUR:"blur",FOCUS_OUT:"focusout",CHANGE:"change"},Th={onBlur:"onBlur",onChange:"onChange",onSubmit:"onSubmit",onTouched:"onTouched",all:"all"},cp={max:"max",min:"min",maxLength:"maxLength",minLength:"minLength",pattern:"pattern",required:"required",validate:"validate"},a5=Ft.createContext(null);a5.displayName="HookFormContext";const x_=()=>Ft.useContext(a5),kG=n=>{const{children:t,...r}=n;return Ft.createElement(a5.Provider,{value:r},t)};var _6=(n,t,r,i=!0)=>{const o={defaultValues:t._defaultValues};for(const l in n)Object.defineProperty(o,l,{get:()=>{const a=l;return t._proxyFormState[a]!==Th.all&&(t._proxyFormState[a]=!i||Th.all),r&&(r[a]=!0),n[a]}});return o};const o5=typeof window<"u"?Ft.useLayoutEffect:Ft.useEffect;function EG(n){const t=x_(),{control:r=t.control,disabled:i,name:o,exact:l}=n||{},[a,p]=Ft.useState(r._formState),g=Ft.useRef({isDirty:!1,isLoading:!1,dirtyFields:!1,touchedFields:!1,validatingFields:!1,isValidating:!1,isValid:!1,errors:!1});return o5(()=>r._subscribe({name:o,formState:g.current,exact:l,callback:w=>{!i&&p({...r._formState,...w})}}),[o,i,l]),Ft.useEffect(()=>{g.current.isValid&&r._setValid(!0)},[r]),Ft.useMemo(()=>_6(a,r,g.current,!1),[a,r])}var dd=n=>typeof n=="string",ww=(n,t,r,i,o)=>dd(n)?(i&&t.watch.add(n),Vr(r,n,o)):Array.isArray(n)?n.map(l=>(i&&t.watch.add(l),Vr(r,l))):(i&&(t.watchAll=!0),r),jw=n=>Mu(n)||!y6(n);function Ph(n,t,r=new WeakSet){if(jw(n)||jw(t))return n===t;if(wg(n)&&wg(t))return n.getTime()===t.getTime();const i=Object.keys(n),o=Object.keys(t);if(i.length!==o.length)return!1;if(r.has(n)||r.has(t))return!0;r.add(n),r.add(t);for(const l of i){const a=n[l];if(!o.includes(l))return!1;if(l!=="ref"){const p=t[l];if(wg(a)&&wg(p)||yl(a)&&yl(p)||Array.isArray(a)&&Array.isArray(p)?!Ph(a,p,r):a!==p)return!1}}return!0}function TG(n){const t=x_(),{control:r=t.control,name:i,defaultValue:o,disabled:l,exact:a,compute:p}=n||{},g=Ft.useRef(o),w=Ft.useRef(p),j=Ft.useRef(void 0),S=Ft.useRef(r),T=Ft.useRef(i);w.current=p;const[E,O]=Ft.useState(()=>{const ee=r._getWatch(i,g.current);return w.current?w.current(ee):ee}),R=Ft.useCallback(ee=>{const ie=ww(i,r._names,ee||r._formValues,!1,g.current);return w.current?w.current(ie):ie},[r._formValues,r._names,i]),F=Ft.useCallback(ee=>{if(!l){const ie=ww(i,r._names,ee||r._formValues,!1,g.current);if(w.current){const ge=w.current(ie);Ph(ge,j.current)||(O(ge),j.current=ge)}else O(ie)}},[r._formValues,r._names,l,i]);o5(()=>((S.current!==r||!Ph(T.current,i))&&(S.current=r,T.current=i,F()),r._subscribe({name:i,formState:{values:!0},exact:a,callback:ee=>{F(ee.values)}})),[r,a,i,F]),Ft.useEffect(()=>r._removeUnmounted());const B=S.current!==r,G=T.current,z=Ft.useMemo(()=>{if(l)return null;const ee=!B&&!Ph(G,i);return B||ee?R():null},[l,B,i,G,R]);return z!==null?z:E}function PG(n){const t=x_(),{name:r,disabled:i,control:o=t.control,shouldUnregister:l,defaultValue:a}=n,p=b6(o._names.array,r),g=Ft.useMemo(()=>Vr(o._formValues,r,Vr(o._defaultValues,r,a)),[o,r,a]),w=TG({control:o,name:r,defaultValue:g,exact:!0}),j=EG({control:o,name:r,exact:!0}),S=Ft.useRef(n),T=Ft.useRef(void 0),E=Ft.useRef(o.register(r,{...n.rules,value:w,...od(n.disabled)?{disabled:n.disabled}:{}}));S.current=n;const O=Ft.useMemo(()=>Object.defineProperties({},{invalid:{enumerable:!0,get:()=>!!Vr(j.errors,r)},isDirty:{enumerable:!0,get:()=>!!Vr(j.dirtyFields,r)},isTouched:{enumerable:!0,get:()=>!!Vr(j.touchedFields,r)},isValidating:{enumerable:!0,get:()=>!!Vr(j.validatingFields,r)},error:{enumerable:!0,get:()=>Vr(j.errors,r)}}),[j,r]),R=Ft.useCallback(z=>E.current.onChange({target:{value:x6(z),name:r},type:Sb.CHANGE}),[r]),F=Ft.useCallback(()=>E.current.onBlur({target:{value:Vr(o._formValues,r),name:r},type:Sb.BLUR}),[r,o._formValues]),B=Ft.useCallback(z=>{const ee=Vr(o._fields,r);ee&&z&&(ee._f.ref={focus:()=>z.focus&&z.focus(),select:()=>z.select&&z.select(),setCustomValidity:ie=>z.setCustomValidity(ie),reportValidity:()=>z.reportValidity()})},[o._fields,r]),G=Ft.useMemo(()=>({name:r,value:w,...od(i)||j.disabled?{disabled:j.disabled||i}:{},onChange:R,onBlur:F,ref:B}),[r,i,j.disabled,R,F,B,w]);return Ft.useEffect(()=>{const z=o._options.shouldUnregister||l,ee=T.current;ee&&ee!==r&&!p&&o.unregister(ee),o.register(r,{...S.current.rules,...od(S.current.disabled)?{disabled:S.current.disabled}:{}});const ie=(ge,K)=>{const J=Vr(o._fields,ge);J&&J._f&&(J._f.mount=K)};if(ie(r,!0),z){const ge=zl(Vr(o._options.defaultValues,r,S.current.defaultValue));Ws(o._defaultValues,r,ge),Ro(Vr(o._formValues,r))&&Ws(o._formValues,r,ge)}return!p&&o.register(r),T.current=r,()=>{(p?z&&!o._state.action:z)?o.unregister(r):ie(r,!1)}},[r,o,p,l]),Ft.useEffect(()=>{o._setDisabledField({disabled:i,name:r})},[i,r,o]),Ft.useMemo(()=>({field:G,formState:j,fieldState:O}),[G,j,O])}const RG=n=>n.render(PG(n));var w6=(n,t,r,i,o)=>t?{...r[n],types:{...r[n]&&r[n].types?r[n].types:{},[i]:o||!0}}:{},Rx=n=>Array.isArray(n)?n:[n],r4=()=>{let n=[];return{get observers(){return n},next:o=>{for(const l of n)l.next&&l.next(o)},subscribe:o=>(n.push(o),{unsubscribe:()=>{n=n.filter(l=>l!==o)}}),unsubscribe:()=>{n=[]}}};function j6(n,t){const r={};for(const i in n)if(n.hasOwnProperty(i)){const o=n[i],l=t[i];if(o&&yl(o)&&l){const a=j6(o,l);yl(a)&&(r[i]=a)}else n[i]&&(r[i]=l)}return r}var xu=n=>yl(n)&&!Object.keys(n).length,l5=n=>n.type==="file",Rh=n=>typeof n=="function",Ab=n=>{if(!n5)return!1;const t=n?n.ownerDocument:0;return n instanceof(t&&t.defaultView?t.defaultView.HTMLElement:HTMLElement)},N6=n=>n.type==="select-multiple",c5=n=>n.type==="radio",IG=n=>c5(n)||y0(n),S2=n=>Ab(n)&&n.isConnected;function LG(n,t){const r=t.slice(0,-1).length;let i=0;for(;i<r;)n=Ro(n)?i++:n[t[i++]];return n}function MG(n){for(const t in n)if(n.hasOwnProperty(t)&&!Ro(n[t]))return!1;return!0}function ml(n,t){const r=Array.isArray(t)?t:y_(t)?[t]:s5(t),i=r.length===1?n:LG(n,r),o=r.length-1,l=r[o];return i&&delete i[l],o!==0&&(yl(i)&&xu(i)||Array.isArray(i)&&MG(i))&&ml(n,r.slice(0,-1)),n}var DG=n=>{for(const t in n)if(Rh(n[t]))return!0;return!1};function S6(n){return Array.isArray(n)||yl(n)&&!DG(n)}function Nw(n,t={}){for(const r in n)S6(n[r])?(t[r]=Array.isArray(n[r])?[]:{},Nw(n[r],t[r])):Ro(n[r])||(t[r]=!0);return t}function Ov(n,t,r){r||(r=Nw(t));for(const i in n)S6(n[i])?Ro(t)||jw(r[i])?r[i]=Nw(n[i],Array.isArray(n[i])?[]:{}):Ov(n[i],Mu(t)?{}:t[i],r[i]):r[i]=!Ph(n[i],t[i]);return r}const n4={value:!1,isValid:!1},i4={value:!0,isValid:!0};var A6=n=>{if(Array.isArray(n)){if(n.length>1){const t=n.filter(r=>r&&r.checked&&!r.disabled).map(r=>r.value);return{value:t,isValid:!!t.length}}return n[0].checked&&!n[0].disabled?n[0].attributes&&!Ro(n[0].attributes.value)?Ro(n[0].value)||n[0].value===""?i4:{value:n[0].value,isValid:!0}:i4:n4}return n4},C6=(n,{valueAsNumber:t,valueAsDate:r,setValueAs:i})=>Ro(n)?n:t?n===""?NaN:n&&+n:r&&dd(n)?new Date(n):i?i(n):n;const s4={isValid:!1,value:null};var k6=n=>Array.isArray(n)?n.reduce((t,r)=>r&&r.checked&&!r.disabled?{isValid:!0,value:r.value}:t,s4):s4;function a4(n){const t=n.ref;return l5(t)?t.files:c5(t)?k6(n.refs).value:N6(t)?[...t.selectedOptions].map(({value:r})=>r):y0(t)?A6(n.refs).value:C6(Ro(t.value)?n.ref.value:t.value,n)}var OG=(n,t,r,i)=>{const o={};for(const l of n){const a=Vr(t,l);a&&Ws(o,l,a._f)}return{criteriaMode:r,names:[...n],fields:o,shouldUseNativeValidation:i}},Cb=n=>n instanceof RegExp,bx=n=>Ro(n)?n:Cb(n)?n.source:yl(n)?Cb(n.value)?n.value.source:n.value:n,o4=n=>({isOnSubmit:!n||n===Th.onSubmit,isOnBlur:n===Th.onBlur,isOnChange:n===Th.onChange,isOnAll:n===Th.all,isOnTouch:n===Th.onTouched});const l4="AsyncFunction";var zG=n=>!!n&&!!n.validate&&!!(Rh(n.validate)&&n.validate.constructor.name===l4||yl(n.validate)&&Object.values(n.validate).find(t=>t.constructor.name===l4)),FG=n=>n.mount&&(n.required||n.min||n.max||n.maxLength||n.minLength||n.pattern||n.validate),c4=(n,t,r)=>!r&&(t.watchAll||t.watch.has(n)||[...t.watch].some(i=>n.startsWith(i)&&/^\.\w+/.test(n.slice(i.length))));const Ix=(n,t,r,i)=>{for(const o of r||Object.keys(n)){const l=Vr(n,o);if(l){const{_f:a,...p}=l;if(a){if(a.refs&&a.refs[0]&&t(a.refs[0],o)&&!i)return!0;if(a.ref&&t(a.ref,a.name)&&!i)return!0;if(Ix(p,t))break}else if(yl(p)&&Ix(p,t))break}}};function u4(n,t,r){const i=Vr(n,r);if(i||y_(r))return{error:i,name:r};const o=r.split(".");for(;o.length;){const l=o.join("."),a=Vr(t,l),p=Vr(n,l);if(a&&!Array.isArray(a)&&r!==l)return{name:r};if(p&&p.type)return{name:l,error:p};if(p&&p.root&&p.root.type)return{name:`${l}.root`,error:p.root};o.pop()}return{name:r}}var BG=(n,t,r,i)=>{r(n);const{name:o,...l}=n;return xu(l)||Object.keys(l).length>=Object.keys(t).length||Object.keys(l).find(a=>t[a]===(!i||Th.all))},UG=(n,t,r)=>!n||!t||n===t||Rx(n).some(i=>i&&(r?i===t:i.startsWith(t)||t.startsWith(i))),qG=(n,t,r,i,o)=>o.isOnAll?!1:!r&&o.isOnTouch?!(t||n):(r?i.isOnBlur:o.isOnBlur)?!n:(r?i.isOnChange:o.isOnChange)?n:!0,VG=(n,t)=>!i5(Vr(n,t)).length&&ml(n,t),$G=(n,t,r)=>{const i=Rx(Vr(n,r));return Ws(i,"root",t[r]),Ws(n,r,i),n};function d4(n,t,r="validate"){if(dd(n)||Array.isArray(n)&&n.every(dd)||od(n)&&!n)return{type:r,message:dd(n)?n:"",ref:t}}var Ev=n=>yl(n)&&!Cb(n)?n:{value:n,message:""},h4=async(n,t,r,i,o,l)=>{const{ref:a,refs:p,required:g,maxLength:w,minLength:j,min:S,max:T,pattern:E,validate:O,name:R,valueAsNumber:F,mount:B}=n._f,G=Vr(r,R);if(!B||t.has(R))return{};const z=p?p[0]:a,ee=ce=>{o&&z.reportValidity&&(z.setCustomValidity(od(ce)?"":ce||""),z.reportValidity())},ie={},ge=c5(a),K=y0(a),J=ge||K,Se=(F||l5(a))&&Ro(a.value)&&Ro(G)||Ab(a)&&a.value===""||G===""||Array.isArray(G)&&!G.length,_e=w6.bind(null,R,i,ie),re=(ce,fe,ye,Fe=cp.maxLength,Q=cp.minLength)=>{const pe=ce?fe:ye;ie[R]={type:ce?Fe:Q,message:pe,ref:a,..._e(ce?Fe:Q,pe)}};if(l?!Array.isArray(G)||!G.length:g&&(!J&&(Se||Mu(G))||od(G)&&!G||K&&!A6(p).isValid||ge&&!k6(p).isValid)){const{value:ce,message:fe}=dd(g)?{value:!!g,message:g}:Ev(g);if(ce&&(ie[R]={type:cp.required,message:fe,ref:z,..._e(cp.required,fe)},!i))return ee(fe),ie}if(!Se&&(!Mu(S)||!Mu(T))){let ce,fe;const ye=Ev(T),Fe=Ev(S);if(!Mu(G)&&!isNaN(G)){const Q=a.valueAsNumber||G&&+G;Mu(ye.value)||(ce=Q>ye.value),Mu(Fe.value)||(fe=Q<Fe.value)}else{const Q=a.valueAsDate||new Date(G),pe=Ke=>new Date(new Date().toDateString()+" "+Ke),me=a.type=="time",Ue=a.type=="week";dd(ye.value)&&G&&(ce=me?pe(G)>pe(ye.value):Ue?G>ye.value:Q>new Date(ye.value)),dd(Fe.value)&&G&&(fe=me?pe(G)<pe(Fe.value):Ue?G<Fe.value:Q<new Date(Fe.value))}if((ce||fe)&&(re(!!ce,ye.message,Fe.message,cp.max,cp.min),!i))return ee(ie[R].message),ie}if((w||j)&&!Se&&(dd(G)||l&&Array.isArray(G))){const ce=Ev(w),fe=Ev(j),ye=!Mu(ce.value)&&G.length>+ce.value,Fe=!Mu(fe.value)&&G.length<+fe.value;if((ye||Fe)&&(re(ye,ce.message,fe.message),!i))return ee(ie[R].message),ie}if(E&&!Se&&dd(G)){const{value:ce,message:fe}=Ev(E);if(Cb(ce)&&!G.match(ce)&&(ie[R]={type:cp.pattern,message:fe,ref:a,..._e(cp.pattern,fe)},!i))return ee(fe),ie}if(O){if(Rh(O)){const ce=await O(G,r),fe=d4(ce,z);if(fe&&(ie[R]={...fe,..._e(cp.validate,fe.message)},!i))return ee(fe.message),ie}else if(yl(O)){let ce={};for(const fe in O){if(!xu(ce)&&!i)break;const ye=d4(await O[fe](G,r),z,fe);ye&&(ce={...ye,..._e(fe,ye.message)},ee(ye.message),i&&(ie[R]=ce))}if(!xu(ce)&&(ie[R]={ref:z,...ce},!i))return ie}}return ee(!0),ie};const HG={mode:Th.onSubmit,reValidateMode:Th.onChange,shouldFocusError:!0};function GG(n={}){let t={...HG,...n},r={submitCount:0,isDirty:!1,isReady:!1,isLoading:Rh(t.defaultValues),isValidating:!1,isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,touchedFields:{},dirtyFields:{},validatingFields:{},errors:t.errors||{},disabled:t.disabled||!1},i={},o=yl(t.defaultValues)||yl(t.values)?zl(t.defaultValues||t.values)||{}:{},l=t.shouldUnregister?{}:zl(o),a={action:!1,mount:!1,watch:!1},p={mount:new Set,disabled:new Set,unMount:new Set,array:new Set,watch:new Set},g,w=0;const j={isDirty:!1,dirtyFields:!1,validatingFields:!1,touchedFields:!1,isValidating:!1,isValid:!1,errors:!1};let S={...j};const T={array:r4(),state:r4()},E=t.criteriaMode===Th.all,O=Be=>it=>{clearTimeout(w),w=setTimeout(Be,it)},R=async Be=>{if(!t.disabled&&(j.isValid||S.isValid||Be)){const it=t.resolver?xu((await K()).errors):await Se(i,!0);it!==r.isValid&&T.state.next({isValid:it})}},F=(Be,it)=>{!t.disabled&&(j.isValidating||j.validatingFields||S.isValidating||S.validatingFields)&&((Be||Array.from(p.mount)).forEach(at=>{at&&(it?Ws(r.validatingFields,at,it):ml(r.validatingFields,at))}),T.state.next({validatingFields:r.validatingFields,isValidating:!xu(r.validatingFields)}))},B=(Be,it=[],at,Tt,kt=!0,Ot=!0)=>{if(Tt&&at&&!t.disabled){if(a.action=!0,Ot&&Array.isArray(Vr(i,Be))){const Qt=at(Vr(i,Be),Tt.argA,Tt.argB);kt&&Ws(i,Be,Qt)}if(Ot&&Array.isArray(Vr(r.errors,Be))){const Qt=at(Vr(r.errors,Be),Tt.argA,Tt.argB);kt&&Ws(r.errors,Be,Qt),VG(r.errors,Be)}if((j.touchedFields||S.touchedFields)&&Ot&&Array.isArray(Vr(r.touchedFields,Be))){const Qt=at(Vr(r.touchedFields,Be),Tt.argA,Tt.argB);kt&&Ws(r.touchedFields,Be,Qt)}(j.dirtyFields||S.dirtyFields)&&(r.dirtyFields=Ov(o,l)),T.state.next({name:Be,isDirty:re(Be,it),dirtyFields:r.dirtyFields,errors:r.errors,isValid:r.isValid})}else Ws(l,Be,it)},G=(Be,it)=>{Ws(r.errors,Be,it),T.state.next({errors:r.errors})},z=Be=>{r.errors=Be,T.state.next({errors:r.errors,isValid:!1})},ee=(Be,it,at,Tt)=>{const kt=Vr(i,Be);if(kt){const Ot=Vr(l,Be,Ro(at)?Vr(o,Be):at);Ro(Ot)||Tt&&Tt.defaultChecked||it?Ws(l,Be,it?Ot:a4(kt._f)):ye(Be,Ot),a.mount&&R()}},ie=(Be,it,at,Tt,kt)=>{let Ot=!1,Qt=!1;const zr={name:Be};if(!t.disabled){if(!at||Tt){(j.isDirty||S.isDirty)&&(Qt=r.isDirty,r.isDirty=zr.isDirty=re(),Ot=Qt!==zr.isDirty);const Hr=Ph(Vr(o,Be),it);Qt=!!Vr(r.dirtyFields,Be),Hr?ml(r.dirtyFields,Be):Ws(r.dirtyFields,Be,!0),zr.dirtyFields=r.dirtyFields,Ot=Ot||(j.dirtyFields||S.dirtyFields)&&Qt!==!Hr}if(at){const Hr=Vr(r.touchedFields,Be);Hr||(Ws(r.touchedFields,Be,at),zr.touchedFields=r.touchedFields,Ot=Ot||(j.touchedFields||S.touchedFields)&&Hr!==at)}Ot&&kt&&T.state.next(zr)}return Ot?zr:{}},ge=(Be,it,at,Tt)=>{const kt=Vr(r.errors,Be),Ot=(j.isValid||S.isValid)&&od(it)&&r.isValid!==it;if(t.delayError&&at?(g=O(()=>G(Be,at)),g(t.delayError)):(clearTimeout(w),g=null,at?Ws(r.errors,Be,at):ml(r.errors,Be)),(at?!Ph(kt,at):kt)||!xu(Tt)||Ot){const Qt={...Tt,...Ot&&od(it)?{isValid:it}:{},errors:r.errors,name:Be};r={...r,...Qt},T.state.next(Qt)}},K=async Be=>{F(Be,!0);const it=await t.resolver(l,t.context,OG(Be||p.mount,i,t.criteriaMode,t.shouldUseNativeValidation));return F(Be),it},J=async Be=>{const{errors:it}=await K(Be);if(Be)for(const at of Be){const Tt=Vr(it,at);Tt?Ws(r.errors,at,Tt):ml(r.errors,at)}else r.errors=it;return it},Se=async(Be,it,at={valid:!0})=>{for(const Tt in Be){const kt=Be[Tt];if(kt){const{_f:Ot,...Qt}=kt;if(Ot){const zr=p.array.has(Ot.name),Hr=kt._f&&zG(kt._f);Hr&&j.validatingFields&&F([Ot.name],!0);const Ur=await h4(kt,p.disabled,l,E,t.shouldUseNativeValidation&&!it,zr);if(Hr&&j.validatingFields&&F([Ot.name]),Ur[Ot.name]&&(at.valid=!1,it))break;!it&&(Vr(Ur,Ot.name)?zr?$G(r.errors,Ur,Ot.name):Ws(r.errors,Ot.name,Ur[Ot.name]):ml(r.errors,Ot.name))}!xu(Qt)&&await Se(Qt,it,at)}}return at.valid},_e=()=>{for(const Be of p.unMount){const it=Vr(i,Be);it&&(it._f.refs?it._f.refs.every(at=>!S2(at)):!S2(it._f.ref))&&Ve(Be)}p.unMount=new Set},re=(Be,it)=>!t.disabled&&(Be&&it&&Ws(l,Be,it),!Ph(Ke(),o)),ce=(Be,it,at)=>ww(Be,p,{...a.mount?l:Ro(it)?o:dd(Be)?{[Be]:it}:it},at,it),fe=Be=>i5(Vr(a.mount?l:o,Be,t.shouldUnregister?Vr(o,Be,[]):[])),ye=(Be,it,at={})=>{const Tt=Vr(i,Be);let kt=it;if(Tt){const Ot=Tt._f;Ot&&(!Ot.disabled&&Ws(l,Be,C6(it,Ot)),kt=Ab(Ot.ref)&&Mu(it)?"":it,N6(Ot.ref)?[...Ot.ref.options].forEach(Qt=>Qt.selected=kt.includes(Qt.value)):Ot.refs?y0(Ot.ref)?Ot.refs.forEach(Qt=>{(!Qt.defaultChecked||!Qt.disabled)&&(Array.isArray(kt)?Qt.checked=!!kt.find(zr=>zr===Qt.value):Qt.checked=kt===Qt.value||!!kt)}):Ot.refs.forEach(Qt=>Qt.checked=Qt.value===kt):l5(Ot.ref)?Ot.ref.value="":(Ot.ref.value=kt,Ot.ref.type||T.state.next({name:Be,values:zl(l)})))}(at.shouldDirty||at.shouldTouch)&&ie(Be,kt,at.shouldTouch,at.shouldDirty,!0),at.shouldValidate&&Ue(Be)},Fe=(Be,it,at)=>{for(const Tt in it){if(!it.hasOwnProperty(Tt))return;const kt=it[Tt],Ot=Be+"."+Tt,Qt=Vr(i,Ot);(p.array.has(Be)||yl(kt)||Qt&&!Qt._f)&&!wg(kt)?Fe(Ot,kt,at):ye(Ot,kt,at)}},Q=(Be,it,at={})=>{const Tt=Vr(i,Be),kt=p.array.has(Be),Ot=zl(it);Ws(l,Be,Ot),kt?(T.array.next({name:Be,values:zl(l)}),(j.isDirty||j.dirtyFields||S.isDirty||S.dirtyFields)&&at.shouldDirty&&T.state.next({name:Be,dirtyFields:Ov(o,l),isDirty:re(Be,Ot)})):Tt&&!Tt._f&&!Mu(Ot)?Fe(Be,Ot,at):ye(Be,Ot,at),c4(Be,p)&&T.state.next({...r,name:Be}),T.state.next({name:a.mount?Be:void 0,values:zl(l)})},pe=async Be=>{a.mount=!0;const it=Be.target;let at=it.name,Tt=!0;const kt=Vr(i,at),Ot=Hr=>{Tt=Number.isNaN(Hr)||wg(Hr)&&isNaN(Hr.getTime())||Ph(Hr,Vr(l,at,Hr))},Qt=o4(t.mode),zr=o4(t.reValidateMode);if(kt){let Hr,Ur;const nn=it.type?a4(kt._f):x6(Be),_r=Be.type===Sb.BLUR||Be.type===Sb.FOCUS_OUT,Ri=!FG(kt._f)&&!t.resolver&&!Vr(r.errors,at)&&!kt._f.deps||qG(_r,Vr(r.touchedFields,at),r.isSubmitted,zr,Qt),_n=c4(at,p,_r);Ws(l,at,nn),_r?(!it||!it.readOnly)&&(kt._f.onBlur&&kt._f.onBlur(Be),g&&g(0)):kt._f.onChange&&kt._f.onChange(Be);const fi=ie(at,nn,_r),kn=!xu(fi)||_n;if(!_r&&T.state.next({name:at,type:Be.type,values:zl(l)}),Ri)return(j.isValid||S.isValid)&&(t.mode==="onBlur"?_r&&R():_r||R()),kn&&T.state.next({name:at,..._n?{}:fi});if(!_r&&_n&&T.state.next({...r}),t.resolver){const{errors:yn}=await K([at]);if(Ot(nn),Tt){const va=u4(r.errors,i,at),zn=u4(yn,i,va.name||at);Hr=zn.error,at=zn.name,Ur=xu(yn)}}else F([at],!0),Hr=(await h4(kt,p.disabled,l,E,t.shouldUseNativeValidation))[at],F([at]),Ot(nn),Tt&&(Hr?Ur=!1:(j.isValid||S.isValid)&&(Ur=await Se(i,!0)));Tt&&(kt._f.deps&&(!Array.isArray(kt._f.deps)||kt._f.deps.length>0)&&Ue(kt._f.deps),ge(at,Ur,Hr,fi))}},me=(Be,it)=>{if(Vr(r.errors,it)&&Be.focus)return Be.focus(),1},Ue=async(Be,it={})=>{let at,Tt;const kt=Rx(Be);if(t.resolver){const Ot=await J(Ro(Be)?Be:kt);at=xu(Ot),Tt=Be?!kt.some(Qt=>Vr(Ot,Qt)):at}else Be?(Tt=(await Promise.all(kt.map(async Ot=>{const Qt=Vr(i,Ot);return await Se(Qt&&Qt._f?{[Ot]:Qt}:Qt)}))).every(Boolean),!(!Tt&&!r.isValid)&&R()):Tt=at=await Se(i);return T.state.next({...!dd(Be)||(j.isValid||S.isValid)&&at!==r.isValid?{}:{name:Be},...t.resolver||!Be?{isValid:at}:{},errors:r.errors}),it.shouldFocus&&!Tt&&Ix(i,me,Be?kt:p.mount),Tt},Ke=(Be,it)=>{let at={...a.mount?l:o};return it&&(at=j6(it.dirtyFields?r.dirtyFields:r.touchedFields,at)),Ro(Be)?at:dd(Be)?Vr(at,Be):Be.map(Tt=>Vr(at,Tt))},Re=(Be,it)=>({invalid:!!Vr((it||r).errors,Be),isDirty:!!Vr((it||r).dirtyFields,Be),error:Vr((it||r).errors,Be),isValidating:!!Vr(r.validatingFields,Be),isTouched:!!Vr((it||r).touchedFields,Be)}),te=Be=>{Be&&Rx(Be).forEach(it=>ml(r.errors,it)),T.state.next({errors:Be?r.errors:{}})},ue=(Be,it,at)=>{const Tt=(Vr(i,Be,{_f:{}})._f||{}).ref,kt=Vr(r.errors,Be)||{},{ref:Ot,message:Qt,type:zr,...Hr}=kt;Ws(r.errors,Be,{...Hr,...it,ref:Tt}),T.state.next({name:Be,errors:r.errors,isValid:!1}),at&&at.shouldFocus&&Tt&&Tt.focus&&Tt.focus()},Ne=(Be,it)=>Rh(Be)?T.state.subscribe({next:at=>"values"in at&&Be(ce(void 0,it),at)}):ce(Be,it,!0),Me=Be=>T.state.subscribe({next:it=>{UG(Be.name,it.name,Be.exact)&&BG(it,Be.formState||j,$r,Be.reRenderRoot)&&Be.callback({values:{...l},...r,...it,defaultValues:o})}}).unsubscribe,We=Be=>(a.mount=!0,S={...S,...Be.formState},Me({...Be,formState:S})),Ve=(Be,it={})=>{for(const at of Be?Rx(Be):p.mount)p.mount.delete(at),p.array.delete(at),it.keepValue||(ml(i,at),ml(l,at)),!it.keepError&&ml(r.errors,at),!it.keepDirty&&ml(r.dirtyFields,at),!it.keepTouched&&ml(r.touchedFields,at),!it.keepIsValidating&&ml(r.validatingFields,at),!t.shouldUnregister&&!it.keepDefaultValue&&ml(o,at);T.state.next({values:zl(l)}),T.state.next({...r,...it.keepDirty?{isDirty:re()}:{}}),!it.keepIsValid&&R()},tt=({disabled:Be,name:it})=>{(od(Be)&&a.mount||Be||p.disabled.has(it))&&(Be?p.disabled.add(it):p.disabled.delete(it))},Qe=(Be,it={})=>{let at=Vr(i,Be);const Tt=od(it.disabled)||od(t.disabled);return Ws(i,Be,{...at||{},_f:{...at&&at._f?at._f:{ref:{name:Be}},name:Be,mount:!0,...it}}),p.mount.add(Be),at?tt({disabled:od(it.disabled)?it.disabled:t.disabled,name:Be}):ee(Be,!0,it.value),{...Tt?{disabled:it.disabled||t.disabled}:{},...t.progressive?{required:!!it.required,min:bx(it.min),max:bx(it.max),minLength:bx(it.minLength),maxLength:bx(it.maxLength),pattern:bx(it.pattern)}:{},name:Be,onChange:pe,onBlur:pe,ref:kt=>{if(kt){Qe(Be,it),at=Vr(i,Be);const Ot=Ro(kt.value)&&kt.querySelectorAll&&kt.querySelectorAll("input,select,textarea")[0]||kt,Qt=IG(Ot),zr=at._f.refs||[];if(Qt?zr.find(Hr=>Hr===Ot):Ot===at._f.ref)return;Ws(i,Be,{_f:{...at._f,...Qt?{refs:[...zr.filter(S2),Ot,...Array.isArray(Vr(o,Be))?[{}]:[]],ref:{type:Ot.type,name:Be}}:{ref:Ot}}}),ee(Be,!1,void 0,Ot)}else at=Vr(i,Be,{}),at._f&&(at._f.mount=!1),(t.shouldUnregister||it.shouldUnregister)&&!(b6(p.array,Be)&&a.action)&&p.unMount.add(Be)}}},St=()=>t.shouldFocusError&&Ix(i,me,p.mount),Et=Be=>{od(Be)&&(T.state.next({disabled:Be}),Ix(i,(it,at)=>{const Tt=Vr(i,at);Tt&&(it.disabled=Tt._f.disabled||Be,Array.isArray(Tt._f.refs)&&Tt._f.refs.forEach(kt=>{kt.disabled=Tt._f.disabled||Be}))},0,!1))},zt=(Be,it)=>async at=>{let Tt;at&&(at.preventDefault&&at.preventDefault(),at.persist&&at.persist());let kt=zl(l);if(T.state.next({isSubmitting:!0}),t.resolver){const{errors:Ot,values:Qt}=await K();r.errors=Ot,kt=zl(Qt)}else await Se(i);if(p.disabled.size)for(const Ot of p.disabled)ml(kt,Ot);if(ml(r.errors,"root"),xu(r.errors)){T.state.next({errors:{}});try{await Be(kt,at)}catch(Ot){Tt=Ot}}else it&&await it({...r.errors},at),St(),setTimeout(St);if(T.state.next({isSubmitted:!0,isSubmitting:!1,isSubmitSuccessful:xu(r.errors)&&!Tt,submitCount:r.submitCount+1,errors:r.errors}),Tt)throw Tt},Lt=(Be,it={})=>{Vr(i,Be)&&(Ro(it.defaultValue)?Q(Be,zl(Vr(o,Be))):(Q(Be,it.defaultValue),Ws(o,Be,zl(it.defaultValue))),it.keepTouched||ml(r.touchedFields,Be),it.keepDirty||(ml(r.dirtyFields,Be),r.isDirty=it.defaultValue?re(Be,zl(Vr(o,Be))):re()),it.keepError||(ml(r.errors,Be),j.isValid&&R()),T.state.next({...r}))},wr=(Be,it={})=>{const at=Be?zl(Be):o,Tt=zl(at),kt=xu(Be),Ot=kt?o:Tt;if(it.keepDefaultValues||(o=at),!it.keepValues){if(it.keepDirtyValues){const Qt=new Set([...p.mount,...Object.keys(Ov(o,l))]);for(const zr of Array.from(Qt))Vr(r.dirtyFields,zr)?Ws(Ot,zr,Vr(l,zr)):Q(zr,Vr(Ot,zr))}else{if(n5&&Ro(Be))for(const Qt of p.mount){const zr=Vr(i,Qt);if(zr&&zr._f){const Hr=Array.isArray(zr._f.refs)?zr._f.refs[0]:zr._f.ref;if(Ab(Hr)){const Ur=Hr.closest("form");if(Ur){Ur.reset();break}}}}if(it.keepFieldsRef)for(const Qt of p.mount)Q(Qt,Vr(Ot,Qt));else i={}}l=t.shouldUnregister?it.keepDefaultValues?zl(o):{}:zl(Ot),T.array.next({values:{...Ot}}),T.state.next({values:{...Ot}})}p={mount:it.keepDirtyValues?p.mount:new Set,unMount:new Set,array:new Set,disabled:new Set,watch:new Set,watchAll:!1,focus:""},a.mount=!j.isValid||!!it.keepIsValid||!!it.keepDirtyValues||!t.shouldUnregister&&!xu(Ot),a.watch=!!t.shouldUnregister,T.state.next({submitCount:it.keepSubmitCount?r.submitCount:0,isDirty:kt?!1:it.keepDirty?r.isDirty:!!(it.keepDefaultValues&&!Ph(Be,o)),isSubmitted:it.keepIsSubmitted?r.isSubmitted:!1,dirtyFields:kt?{}:it.keepDirtyValues?it.keepDefaultValues&&l?Ov(o,l):r.dirtyFields:it.keepDefaultValues&&Be?Ov(o,Be):it.keepDirty?r.dirtyFields:{},touchedFields:it.keepTouched?r.touchedFields:{},errors:it.keepErrors?r.errors:{},isSubmitSuccessful:it.keepIsSubmitSuccessful?r.isSubmitSuccessful:!1,isSubmitting:!1,defaultValues:o})},_t=(Be,it)=>wr(Rh(Be)?Be(l):Be,it),Ye=(Be,it={})=>{const at=Vr(i,Be),Tt=at&&at._f;if(Tt){const kt=Tt.refs?Tt.refs[0]:Tt.ref;kt.focus&&(kt.focus(),it.shouldSelect&&Rh(kt.select)&&kt.select())}},$r=Be=>{r={...r,...Be}},Zt={control:{register:Qe,unregister:Ve,getFieldState:Re,handleSubmit:zt,setError:ue,_subscribe:Me,_runSchema:K,_focusError:St,_getWatch:ce,_getDirty:re,_setValid:R,_setFieldArray:B,_setDisabledField:tt,_setErrors:z,_getFieldArray:fe,_reset:wr,_resetDefaultValues:()=>Rh(t.defaultValues)&&t.defaultValues().then(Be=>{_t(Be,t.resetOptions),T.state.next({isLoading:!1})}),_removeUnmounted:_e,_disableForm:Et,_subjects:T,_proxyFormState:j,get _fields(){return i},get _formValues(){return l},get _state(){return a},set _state(Be){a=Be},get _defaultValues(){return o},get _names(){return p},set _names(Be){p=Be},get _formState(){return r},get _options(){return t},set _options(Be){t={...t,...Be}}},subscribe:We,trigger:Ue,register:Qe,handleSubmit:zt,watch:Ne,setValue:Q,getValues:Ke,reset:_t,resetField:Lt,clearErrors:te,unregister:Ve,setError:ue,setFocus:Ye,getFieldState:Re};return{...Zt,formControl:Zt}}function u5(n={}){const t=Ft.useRef(void 0),r=Ft.useRef(void 0),[i,o]=Ft.useState({isDirty:!1,isValidating:!1,isLoading:Rh(n.defaultValues),isSubmitted:!1,isSubmitting:!1,isSubmitSuccessful:!1,isValid:!1,submitCount:0,dirtyFields:{},touchedFields:{},validatingFields:{},errors:n.errors||{},disabled:n.disabled||!1,isReady:!1,defaultValues:Rh(n.defaultValues)?void 0:n.defaultValues});if(!t.current)if(n.formControl)t.current={...n.formControl,formState:i},n.defaultValues&&!Rh(n.defaultValues)&&n.formControl.reset(n.defaultValues,n.resetOptions);else{const{formControl:a,...p}=GG(n);t.current={...p,formState:i}}const l=t.current.control;return l._options=n,o5(()=>{const a=l._subscribe({formState:l._proxyFormState,callback:()=>o({...l._formState}),reRenderRoot:!0});return o(p=>({...p,isReady:!0})),l._formState.isReady=!0,a},[l]),Ft.useEffect(()=>l._disableForm(n.disabled),[l,n.disabled]),Ft.useEffect(()=>{n.mode&&(l._options.mode=n.mode),n.reValidateMode&&(l._options.reValidateMode=n.reValidateMode)},[l,n.mode,n.reValidateMode]),Ft.useEffect(()=>{n.errors&&(l._setErrors(n.errors),l._focusError())},[l,n.errors]),Ft.useEffect(()=>{n.shouldUnregister&&l._subjects.state.next({values:l._getWatch()})},[l,n.shouldUnregister]),Ft.useEffect(()=>{if(l._proxyFormState.isDirty){const a=l._getDirty();a!==i.isDirty&&l._subjects.state.next({isDirty:a})}},[l,i.isDirty]),Ft.useEffect(()=>{n.values&&!Ph(n.values,r.current)?(l._reset(n.values,{keepFieldsRef:!0,...l._options.resetOptions}),r.current=n.values,o(a=>({...a}))):l._resetDefaultValues()},[l,n.values]),Ft.useEffect(()=>{l._state.mount||(l._setValid(),l._state.mount=!0),l._state.watch&&(l._state.watch=!1,l._subjects.state.next({...l._formState})),l._removeUnmounted()}),t.current.formState=_6(i,l),t.current}const f4=(n,t,r)=>{if(n&&"reportValidity"in n){const i=Vr(r,t);n.setCustomValidity(i&&i.message||""),n.reportValidity()}},E6=(n,t)=>{for(const r in t.fields){const i=t.fields[r];i&&i.ref&&"reportValidity"in i.ref?f4(i.ref,r,n):i.refs&&i.refs.forEach(o=>f4(o,r,n))}},WG=(n,t)=>{t.shouldUseNativeValidation&&E6(n,t);const r={};for(const i in n){const o=Vr(t.fields,i),l=Object.assign(n[i]||{},{ref:o&&o.ref});if(YG(t.names||Object.keys(n),i)){const a=Object.assign({},Vr(r,i));Ws(a,"root",l),Ws(r,i,a)}else Ws(r,i,l)}return r},YG=(n,t)=>n.some(r=>r.startsWith(t+"."));var ZG=function(n,t){for(var r={};n.length;){var i=n[0],o=i.code,l=i.message,a=i.path.join(".");if(!r[a])if("unionErrors"in i){var p=i.unionErrors[0].errors[0];r[a]={message:p.message,type:p.code}}else r[a]={message:l,type:o};if("unionErrors"in i&&i.unionErrors.forEach(function(j){return j.errors.forEach(function(S){return n.push(S)})}),t){var g=r[a].types,w=g&&g[i.code];r[a]=w6(a,t,r,o,w?[].concat(w,i.message):i.message)}n.shift()}return r},d5=function(n,t,r){return r===void 0&&(r={}),function(i,o,l){try{return Promise.resolve((function(a,p){try{var g=Promise.resolve(n[r.mode==="sync"?"parse":"parseAsync"](i,t)).then(function(w){return l.shouldUseNativeValidation&&E6({},l),{errors:{},values:r.raw?i:w}})}catch(w){return p(w)}return g&&g.then?g.then(void 0,p):g})(0,function(a){if((function(p){return Array.isArray(p==null?void 0:p.errors)})(a))return{values:{},errors:WG(ZG(a.errors,!l.shouldUseNativeValidation&&l.criteriaMode==="all"),l)};throw a}))}catch(a){return Promise.reject(a)}}},vs;(function(n){n.assertEqual=o=>{};function t(o){}n.assertIs=t;function r(o){throw new Error}n.assertNever=r,n.arrayToEnum=o=>{const l={};for(const a of o)l[a]=a;return l},n.getValidEnumValues=o=>{const l=n.objectKeys(o).filter(p=>typeof o[o[p]]!="number"),a={};for(const p of l)a[p]=o[p];return n.objectValues(a)},n.objectValues=o=>n.objectKeys(o).map(function(l){return o[l]}),n.objectKeys=typeof Object.keys=="function"?o=>Object.keys(o):o=>{const l=[];for(const a in o)Object.prototype.hasOwnProperty.call(o,a)&&l.push(a);return l},n.find=(o,l)=>{for(const a of o)if(l(a))return a},n.isInteger=typeof Number.isInteger=="function"?o=>Number.isInteger(o):o=>typeof o=="number"&&Number.isFinite(o)&&Math.floor(o)===o;function i(o,l=" | "){return o.map(a=>typeof a=="string"?`'${a}'`:a).join(l)}n.joinValues=i,n.jsonStringifyReplacer=(o,l)=>typeof l=="bigint"?l.toString():l})(vs||(vs={}));var p4;(function(n){n.mergeShapes=(t,r)=>({...t,...r})})(p4||(p4={}));const ln=vs.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),dm=n=>{switch(typeof n){case"undefined":return ln.undefined;case"string":return ln.string;case"number":return Number.isNaN(n)?ln.nan:ln.number;case"boolean":return ln.boolean;case"function":return ln.function;case"bigint":return ln.bigint;case"symbol":return ln.symbol;case"object":return Array.isArray(n)?ln.array:n===null?ln.null:n.then&&typeof n.then=="function"&&n.catch&&typeof n.catch=="function"?ln.promise:typeof Map<"u"&&n instanceof Map?ln.map:typeof Set<"u"&&n instanceof Set?ln.set:typeof Date<"u"&&n instanceof Date?ln.date:ln.object;default:return ln.unknown}},kr=vs.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]);class bp extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=i=>{this.issues=[...this.issues,i]},this.addIssues=(i=[])=>{this.issues=[...this.issues,...i]};const r=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,r):this.__proto__=r,this.name="ZodError",this.issues=t}format(t){const r=t||function(l){return l.message},i={_errors:[]},o=l=>{for(const a of l.issues)if(a.code==="invalid_union")a.unionErrors.map(o);else if(a.code==="invalid_return_type")o(a.returnTypeError);else if(a.code==="invalid_arguments")o(a.argumentsError);else if(a.path.length===0)i._errors.push(r(a));else{let p=i,g=0;for(;g<a.path.length;){const w=a.path[g];g===a.path.length-1?(p[w]=p[w]||{_errors:[]},p[w]._errors.push(r(a))):p[w]=p[w]||{_errors:[]},p=p[w],g++}}};return o(this),i}static assert(t){if(!(t instanceof bp))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,vs.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=r=>r.message){const r={},i=[];for(const o of this.issues)if(o.path.length>0){const l=o.path[0];r[l]=r[l]||[],r[l].push(t(o))}else i.push(t(o));return{formErrors:i,fieldErrors:r}}get formErrors(){return this.flatten()}}bp.create=n=>new bp(n);const Sw=(n,t)=>{let r;switch(n.code){case kr.invalid_type:n.received===ln.undefined?r="Required":r=`Expected ${n.expected}, received ${n.received}`;break;case kr.invalid_literal:r=`Invalid literal value, expected ${JSON.stringify(n.expected,vs.jsonStringifyReplacer)}`;break;case kr.unrecognized_keys:r=`Unrecognized key(s) in object: ${vs.joinValues(n.keys,", ")}`;break;case kr.invalid_union:r="Invalid input";break;case kr.invalid_union_discriminator:r=`Invalid discriminator value. Expected ${vs.joinValues(n.options)}`;break;case kr.invalid_enum_value:r=`Invalid enum value. Expected ${vs.joinValues(n.options)}, received '${n.received}'`;break;case kr.invalid_arguments:r="Invalid function arguments";break;case kr.invalid_return_type:r="Invalid function return type";break;case kr.invalid_date:r="Invalid date";break;case kr.invalid_string:typeof n.validation=="object"?"includes"in n.validation?(r=`Invalid input: must include "${n.validation.includes}"`,typeof n.validation.position=="number"&&(r=`${r} at one or more positions greater than or equal to ${n.validation.position}`)):"startsWith"in n.validation?r=`Invalid input: must start with "${n.validation.startsWith}"`:"endsWith"in n.validation?r=`Invalid input: must end with "${n.validation.endsWith}"`:vs.assertNever(n.validation):n.validation!=="regex"?r=`Invalid ${n.validation}`:r="Invalid";break;case kr.too_small:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at least":"more than"} ${n.minimum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at least":"over"} ${n.minimum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="bigint"?r=`Number must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${n.minimum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly equal to ":n.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(n.minimum))}`:r="Invalid input";break;case kr.too_big:n.type==="array"?r=`Array must contain ${n.exact?"exactly":n.inclusive?"at most":"less than"} ${n.maximum} element(s)`:n.type==="string"?r=`String must contain ${n.exact?"exactly":n.inclusive?"at most":"under"} ${n.maximum} character(s)`:n.type==="number"?r=`Number must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="bigint"?r=`BigInt must be ${n.exact?"exactly":n.inclusive?"less than or equal to":"less than"} ${n.maximum}`:n.type==="date"?r=`Date must be ${n.exact?"exactly":n.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(n.maximum))}`:r="Invalid input";break;case kr.custom:r="Invalid input";break;case kr.invalid_intersection_types:r="Intersection results could not be merged";break;case kr.not_multiple_of:r=`Number must be a multiple of ${n.multipleOf}`;break;case kr.not_finite:r="Number must be finite";break;default:r=t.defaultError,vs.assertNever(n)}return{message:r}};let KG=Sw;function XG(){return KG}const JG=n=>{const{data:t,path:r,errorMaps:i,issueData:o}=n,l=[...r,...o.path||[]],a={...o,path:l};if(o.message!==void 0)return{...o,path:l,message:o.message};let p="";const g=i.filter(w=>!!w).slice().reverse();for(const w of g)p=w(a,{data:t,defaultError:p}).message;return{...o,path:l,message:p}};function Yr(n,t){const r=XG(),i=JG({issueData:t,data:n.data,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,r,r===Sw?void 0:Sw].filter(o=>!!o)});n.common.issues.push(i)}class yd{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,r){const i=[];for(const o of r){if(o.status==="aborted")return li;o.status==="dirty"&&t.dirty(),i.push(o.value)}return{status:t.value,value:i}}static async mergeObjectAsync(t,r){const i=[];for(const o of r){const l=await o.key,a=await o.value;i.push({key:l,value:a})}return yd.mergeObjectSync(t,i)}static mergeObjectSync(t,r){const i={};for(const o of r){const{key:l,value:a}=o;if(l.status==="aborted"||a.status==="aborted")return li;l.status==="dirty"&&t.dirty(),a.status==="dirty"&&t.dirty(),l.value!=="__proto__"&&(typeof a.value<"u"||o.alwaysSet)&&(i[l.value]=a.value)}return{status:t.value,value:i}}}const li=Object.freeze({status:"aborted"}),Sx=n=>({status:"dirty",value:n}),eh=n=>({status:"valid",value:n}),m4=n=>n.status==="aborted",g4=n=>n.status==="dirty",ay=n=>n.status==="valid",kb=n=>typeof Promise<"u"&&n instanceof Promise;var fn;(function(n){n.errToObj=t=>typeof t=="string"?{message:t}:t||{},n.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(fn||(fn={}));class km{constructor(t,r,i,o){this._cachedPath=[],this.parent=t,this.data=r,this._path=i,this._key=o}get path(){return this._cachedPath.length||(Array.isArray(this._key)?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const v4=(n,t)=>{if(ay(t))return{success:!0,data:t.value};if(!n.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const r=new bp(n.common.issues);return this._error=r,this._error}}};function Pi(n){if(!n)return{};const{errorMap:t,invalid_type_error:r,required_error:i,description:o}=n;if(t&&(r||i))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:o}:{errorMap:(a,p)=>{const{message:g}=n;return a.code==="invalid_enum_value"?{message:g??p.defaultError}:typeof p.data>"u"?{message:g??i??p.defaultError}:a.code!=="invalid_type"?{message:p.defaultError}:{message:g??r??p.defaultError}},description:o}}class ls{get description(){return this._def.description}_getType(t){return dm(t.data)}_getOrReturnCtx(t,r){return r||{common:t.parent.common,data:t.data,parsedType:dm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new yd,ctx:{common:t.parent.common,data:t.data,parsedType:dm(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const r=this._parse(t);if(kb(r))throw new Error("Synchronous parse encountered promise.");return r}_parseAsync(t){const r=this._parse(t);return Promise.resolve(r)}parse(t,r){const i=this.safeParse(t,r);if(i.success)return i.data;throw i.error}safeParse(t,r){const i={common:{issues:[],async:(r==null?void 0:r.async)??!1,contextualErrorMap:r==null?void 0:r.errorMap},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:dm(t)},o=this._parseSync({data:t,path:i.path,parent:i});return v4(i,o)}"~validate"(t){var i,o;const r={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:dm(t)};if(!this["~standard"].async)try{const l=this._parseSync({data:t,path:[],parent:r});return ay(l)?{value:l.value}:{issues:r.common.issues}}catch(l){(o=(i=l==null?void 0:l.message)==null?void 0:i.toLowerCase())!=null&&o.includes("encountered")&&(this["~standard"].async=!0),r.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:r}).then(l=>ay(l)?{value:l.value}:{issues:r.common.issues})}async parseAsync(t,r){const i=await this.safeParseAsync(t,r);if(i.success)return i.data;throw i.error}async safeParseAsync(t,r){const i={common:{issues:[],contextualErrorMap:r==null?void 0:r.errorMap,async:!0},path:(r==null?void 0:r.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:dm(t)},o=this._parse({data:t,path:i.path,parent:i}),l=await(kb(o)?o:Promise.resolve(o));return v4(i,l)}refine(t,r){const i=o=>typeof r=="string"||typeof r>"u"?{message:r}:typeof r=="function"?r(o):r;return this._refinement((o,l)=>{const a=t(o),p=()=>l.addIssue({code:kr.custom,...i(o)});return typeof Promise<"u"&&a instanceof Promise?a.then(g=>g?!0:(p(),!1)):a?!0:(p(),!1)})}refinement(t,r){return this._refinement((i,o)=>t(i)?!0:(o.addIssue(typeof r=="function"?r(i,o):r),!1))}_refinement(t){return new cy({schema:this,typeName:ci.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:r=>this["~validate"](r)}}optional(){return _m.create(this,this._def)}nullable(){return uy.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return vf.create(this)}promise(){return Rb.create(this,this._def)}or(t){return Tb.create([this,t],this._def)}and(t){return Pb.create(this,t,this._def)}transform(t){return new cy({...Pi(this._def),schema:this,typeName:ci.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const r=typeof t=="function"?t:()=>t;return new Ew({...Pi(this._def),innerType:this,defaultValue:r,typeName:ci.ZodDefault})}brand(){return new _W({typeName:ci.ZodBranded,type:this,...Pi(this._def)})}catch(t){const r=typeof t=="function"?t:()=>t;return new Tw({...Pi(this._def),innerType:this,catchValue:r,typeName:ci.ZodCatch})}describe(t){const r=this.constructor;return new r({...this._def,description:t})}pipe(t){return h5.create(this,t)}readonly(){return Pw.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const QG=/^c[^\s-]{8,}$/i,eW=/^[0-9a-z]+$/,tW=/^[0-9A-HJKMNP-TV-Z]{26}$/i,rW=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,nW=/^[a-z0-9_-]{21}$/i,iW=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,sW=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,aW=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,oW="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let A2;const lW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,cW=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,uW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,dW=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,hW=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,fW=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,T6="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",pW=new RegExp(`^${T6}$`);function P6(n){let t="[0-5]\\d";n.precision?t=`${t}\\.\\d{${n.precision}}`:n.precision==null&&(t=`${t}(\\.\\d+)?`);const r=n.precision?"+":"?";return`([01]\\d|2[0-3]):[0-5]\\d(:${t})${r}`}function mW(n){return new RegExp(`^${P6(n)}$`)}function gW(n){let t=`${T6}T${P6(n)}`;const r=[];return r.push(n.local?"Z?":"Z"),n.offset&&r.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${r.join("|")})`,new RegExp(`^${t}$`)}function vW(n,t){return!!((t==="v4"||!t)&&lW.test(n)||(t==="v6"||!t)&&uW.test(n))}function yW(n,t){if(!iW.test(n))return!1;try{const[r]=n.split(".");if(!r)return!1;const i=r.replace(/-/g,"+").replace(/_/g,"/").padEnd(r.length+(4-r.length%4)%4,"="),o=JSON.parse(atob(i));return!(typeof o!="object"||o===null||"typ"in o&&(o==null?void 0:o.typ)!=="JWT"||!o.alg||t&&o.alg!==t)}catch{return!1}}function xW(n,t){return!!((t==="v4"||!t)&&cW.test(n)||(t==="v6"||!t)&&dW.test(n))}class pm extends ls{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ln.string){const l=this._getOrReturnCtx(t);return Yr(l,{code:kr.invalid_type,expected:ln.string,received:l.parsedType}),li}const i=new yd;let o;for(const l of this._def.checks)if(l.kind==="min")t.data.length<l.value&&(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),i.dirty());else if(l.kind==="max")t.data.length>l.value&&(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!1,message:l.message}),i.dirty());else if(l.kind==="length"){const a=t.data.length>l.value,p=t.data.length<l.value;(a||p)&&(o=this._getOrReturnCtx(t,o),a?Yr(o,{code:kr.too_big,maximum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}):p&&Yr(o,{code:kr.too_small,minimum:l.value,type:"string",inclusive:!0,exact:!0,message:l.message}),i.dirty())}else if(l.kind==="email")aW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"email",code:kr.invalid_string,message:l.message}),i.dirty());else if(l.kind==="emoji")A2||(A2=new RegExp(oW,"u")),A2.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"emoji",code:kr.invalid_string,message:l.message}),i.dirty());else if(l.kind==="uuid")rW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"uuid",code:kr.invalid_string,message:l.message}),i.dirty());else if(l.kind==="nanoid")nW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"nanoid",code:kr.invalid_string,message:l.message}),i.dirty());else if(l.kind==="cuid")QG.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"cuid",code:kr.invalid_string,message:l.message}),i.dirty());else if(l.kind==="cuid2")eW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"cuid2",code:kr.invalid_string,message:l.message}),i.dirty());else if(l.kind==="ulid")tW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"ulid",code:kr.invalid_string,message:l.message}),i.dirty());else if(l.kind==="url")try{new URL(t.data)}catch{o=this._getOrReturnCtx(t,o),Yr(o,{validation:"url",code:kr.invalid_string,message:l.message}),i.dirty()}else l.kind==="regex"?(l.regex.lastIndex=0,l.regex.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"regex",code:kr.invalid_string,message:l.message}),i.dirty())):l.kind==="trim"?t.data=t.data.trim():l.kind==="includes"?t.data.includes(l.value,l.position)||(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.invalid_string,validation:{includes:l.value,position:l.position},message:l.message}),i.dirty()):l.kind==="toLowerCase"?t.data=t.data.toLowerCase():l.kind==="toUpperCase"?t.data=t.data.toUpperCase():l.kind==="startsWith"?t.data.startsWith(l.value)||(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.invalid_string,validation:{startsWith:l.value},message:l.message}),i.dirty()):l.kind==="endsWith"?t.data.endsWith(l.value)||(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.invalid_string,validation:{endsWith:l.value},message:l.message}),i.dirty()):l.kind==="datetime"?gW(l).test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.invalid_string,validation:"datetime",message:l.message}),i.dirty()):l.kind==="date"?pW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.invalid_string,validation:"date",message:l.message}),i.dirty()):l.kind==="time"?mW(l).test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.invalid_string,validation:"time",message:l.message}),i.dirty()):l.kind==="duration"?sW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"duration",code:kr.invalid_string,message:l.message}),i.dirty()):l.kind==="ip"?vW(t.data,l.version)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"ip",code:kr.invalid_string,message:l.message}),i.dirty()):l.kind==="jwt"?yW(t.data,l.alg)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"jwt",code:kr.invalid_string,message:l.message}),i.dirty()):l.kind==="cidr"?xW(t.data,l.version)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"cidr",code:kr.invalid_string,message:l.message}),i.dirty()):l.kind==="base64"?hW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"base64",code:kr.invalid_string,message:l.message}),i.dirty()):l.kind==="base64url"?fW.test(t.data)||(o=this._getOrReturnCtx(t,o),Yr(o,{validation:"base64url",code:kr.invalid_string,message:l.message}),i.dirty()):vs.assertNever(l);return{status:i.value,value:t.data}}_regex(t,r,i){return this.refinement(o=>t.test(o),{validation:r,code:kr.invalid_string,...fn.errToObj(i)})}_addCheck(t){return new pm({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...fn.errToObj(t)})}url(t){return this._addCheck({kind:"url",...fn.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...fn.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...fn.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...fn.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...fn.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...fn.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...fn.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...fn.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...fn.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...fn.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...fn.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...fn.errToObj(t)})}datetime(t){return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(t==null?void 0:t.offset)??!1,local:(t==null?void 0:t.local)??!1,...fn.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...fn.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...fn.errToObj(t)})}regex(t,r){return this._addCheck({kind:"regex",regex:t,...fn.errToObj(r)})}includes(t,r){return this._addCheck({kind:"includes",value:t,position:r==null?void 0:r.position,...fn.errToObj(r==null?void 0:r.message)})}startsWith(t,r){return this._addCheck({kind:"startsWith",value:t,...fn.errToObj(r)})}endsWith(t,r){return this._addCheck({kind:"endsWith",value:t,...fn.errToObj(r)})}min(t,r){return this._addCheck({kind:"min",value:t,...fn.errToObj(r)})}max(t,r){return this._addCheck({kind:"max",value:t,...fn.errToObj(r)})}length(t,r){return this._addCheck({kind:"length",value:t,...fn.errToObj(r)})}nonempty(t){return this.min(1,fn.errToObj(t))}trim(){return new pm({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new pm({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new pm({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxLength(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}pm.create=n=>new pm({checks:[],typeName:ci.ZodString,coerce:(n==null?void 0:n.coerce)??!1,...Pi(n)});function bW(n,t){const r=(n.toString().split(".")[1]||"").length,i=(t.toString().split(".")[1]||"").length,o=r>i?r:i,l=Number.parseInt(n.toFixed(o).replace(".","")),a=Number.parseInt(t.toFixed(o).replace(".",""));return l%a/10**o}class oy extends ls{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ln.number){const l=this._getOrReturnCtx(t);return Yr(l,{code:kr.invalid_type,expected:ln.number,received:l.parsedType}),li}let i;const o=new yd;for(const l of this._def.checks)l.kind==="int"?vs.isInteger(t.data)||(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.invalid_type,expected:"integer",received:"float",message:l.message}),o.dirty()):l.kind==="min"?(l.inclusive?t.data<l.value:t.data<=l.value)&&(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.too_small,minimum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?t.data>l.value:t.data>=l.value)&&(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.too_big,maximum:l.value,type:"number",inclusive:l.inclusive,exact:!1,message:l.message}),o.dirty()):l.kind==="multipleOf"?bW(t.data,l.value)!==0&&(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):l.kind==="finite"?Number.isFinite(t.data)||(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.not_finite,message:l.message}),o.dirty()):vs.assertNever(l);return{status:o.value,value:t.data}}gte(t,r){return this.setLimit("min",t,!0,fn.toString(r))}gt(t,r){return this.setLimit("min",t,!1,fn.toString(r))}lte(t,r){return this.setLimit("max",t,!0,fn.toString(r))}lt(t,r){return this.setLimit("max",t,!1,fn.toString(r))}setLimit(t,r,i,o){return new oy({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:i,message:fn.toString(o)}]})}_addCheck(t){return new oy({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:fn.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:fn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:fn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:fn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:fn.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:fn.toString(r)})}finite(t){return this._addCheck({kind:"finite",message:fn.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:fn.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:fn.toString(t)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&vs.isInteger(t.value))}get isFinite(){let t=null,r=null;for(const i of this._def.checks){if(i.kind==="finite"||i.kind==="int"||i.kind==="multipleOf")return!0;i.kind==="min"?(r===null||i.value>r)&&(r=i.value):i.kind==="max"&&(t===null||i.value<t)&&(t=i.value)}return Number.isFinite(r)&&Number.isFinite(t)}}oy.create=n=>new oy({checks:[],typeName:ci.ZodNumber,coerce:(n==null?void 0:n.coerce)||!1,...Pi(n)});class Yx extends ls{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==ln.bigint)return this._getInvalidInput(t);let i;const o=new yd;for(const l of this._def.checks)l.kind==="min"?(l.inclusive?t.data<l.value:t.data<=l.value)&&(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.too_small,type:"bigint",minimum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="max"?(l.inclusive?t.data>l.value:t.data>=l.value)&&(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.too_big,type:"bigint",maximum:l.value,inclusive:l.inclusive,message:l.message}),o.dirty()):l.kind==="multipleOf"?t.data%l.value!==BigInt(0)&&(i=this._getOrReturnCtx(t,i),Yr(i,{code:kr.not_multiple_of,multipleOf:l.value,message:l.message}),o.dirty()):vs.assertNever(l);return{status:o.value,value:t.data}}_getInvalidInput(t){const r=this._getOrReturnCtx(t);return Yr(r,{code:kr.invalid_type,expected:ln.bigint,received:r.parsedType}),li}gte(t,r){return this.setLimit("min",t,!0,fn.toString(r))}gt(t,r){return this.setLimit("min",t,!1,fn.toString(r))}lte(t,r){return this.setLimit("max",t,!0,fn.toString(r))}lt(t,r){return this.setLimit("max",t,!1,fn.toString(r))}setLimit(t,r,i,o){return new Yx({...this._def,checks:[...this._def.checks,{kind:t,value:r,inclusive:i,message:fn.toString(o)}]})}_addCheck(t){return new Yx({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:fn.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:fn.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:fn.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:fn.toString(t)})}multipleOf(t,r){return this._addCheck({kind:"multipleOf",value:t,message:fn.toString(r)})}get minValue(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t}get maxValue(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t}}Yx.create=n=>new Yx({checks:[],typeName:ci.ZodBigInt,coerce:(n==null?void 0:n.coerce)??!1,...Pi(n)});class Aw extends ls{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==ln.boolean){const i=this._getOrReturnCtx(t);return Yr(i,{code:kr.invalid_type,expected:ln.boolean,received:i.parsedType}),li}return eh(t.data)}}Aw.create=n=>new Aw({typeName:ci.ZodBoolean,coerce:(n==null?void 0:n.coerce)||!1,...Pi(n)});class Eb extends ls{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ln.date){const l=this._getOrReturnCtx(t);return Yr(l,{code:kr.invalid_type,expected:ln.date,received:l.parsedType}),li}if(Number.isNaN(t.data.getTime())){const l=this._getOrReturnCtx(t);return Yr(l,{code:kr.invalid_date}),li}const i=new yd;let o;for(const l of this._def.checks)l.kind==="min"?t.data.getTime()<l.value&&(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.too_small,message:l.message,inclusive:!0,exact:!1,minimum:l.value,type:"date"}),i.dirty()):l.kind==="max"?t.data.getTime()>l.value&&(o=this._getOrReturnCtx(t,o),Yr(o,{code:kr.too_big,message:l.message,inclusive:!0,exact:!1,maximum:l.value,type:"date"}),i.dirty()):vs.assertNever(l);return{status:i.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Eb({...this._def,checks:[...this._def.checks,t]})}min(t,r){return this._addCheck({kind:"min",value:t.getTime(),message:fn.toString(r)})}max(t,r){return this._addCheck({kind:"max",value:t.getTime(),message:fn.toString(r)})}get minDate(){let t=null;for(const r of this._def.checks)r.kind==="min"&&(t===null||r.value>t)&&(t=r.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const r of this._def.checks)r.kind==="max"&&(t===null||r.value<t)&&(t=r.value);return t!=null?new Date(t):null}}Eb.create=n=>new Eb({checks:[],coerce:(n==null?void 0:n.coerce)||!1,typeName:ci.ZodDate,...Pi(n)});class y4 extends ls{_parse(t){if(this._getType(t)!==ln.symbol){const i=this._getOrReturnCtx(t);return Yr(i,{code:kr.invalid_type,expected:ln.symbol,received:i.parsedType}),li}return eh(t.data)}}y4.create=n=>new y4({typeName:ci.ZodSymbol,...Pi(n)});class x4 extends ls{_parse(t){if(this._getType(t)!==ln.undefined){const i=this._getOrReturnCtx(t);return Yr(i,{code:kr.invalid_type,expected:ln.undefined,received:i.parsedType}),li}return eh(t.data)}}x4.create=n=>new x4({typeName:ci.ZodUndefined,...Pi(n)});class b4 extends ls{_parse(t){if(this._getType(t)!==ln.null){const i=this._getOrReturnCtx(t);return Yr(i,{code:kr.invalid_type,expected:ln.null,received:i.parsedType}),li}return eh(t.data)}}b4.create=n=>new b4({typeName:ci.ZodNull,...Pi(n)});class _4 extends ls{constructor(){super(...arguments),this._any=!0}_parse(t){return eh(t.data)}}_4.create=n=>new _4({typeName:ci.ZodAny,...Pi(n)});class w4 extends ls{constructor(){super(...arguments),this._unknown=!0}_parse(t){return eh(t.data)}}w4.create=n=>new w4({typeName:ci.ZodUnknown,...Pi(n)});class Em extends ls{_parse(t){const r=this._getOrReturnCtx(t);return Yr(r,{code:kr.invalid_type,expected:ln.never,received:r.parsedType}),li}}Em.create=n=>new Em({typeName:ci.ZodNever,...Pi(n)});class j4 extends ls{_parse(t){if(this._getType(t)!==ln.undefined){const i=this._getOrReturnCtx(t);return Yr(i,{code:kr.invalid_type,expected:ln.void,received:i.parsedType}),li}return eh(t.data)}}j4.create=n=>new j4({typeName:ci.ZodVoid,...Pi(n)});class vf extends ls{_parse(t){const{ctx:r,status:i}=this._processInputParams(t),o=this._def;if(r.parsedType!==ln.array)return Yr(r,{code:kr.invalid_type,expected:ln.array,received:r.parsedType}),li;if(o.exactLength!==null){const a=r.data.length>o.exactLength.value,p=r.data.length<o.exactLength.value;(a||p)&&(Yr(r,{code:a?kr.too_big:kr.too_small,minimum:p?o.exactLength.value:void 0,maximum:a?o.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:o.exactLength.message}),i.dirty())}if(o.minLength!==null&&r.data.length<o.minLength.value&&(Yr(r,{code:kr.too_small,minimum:o.minLength.value,type:"array",inclusive:!0,exact:!1,message:o.minLength.message}),i.dirty()),o.maxLength!==null&&r.data.length>o.maxLength.value&&(Yr(r,{code:kr.too_big,maximum:o.maxLength.value,type:"array",inclusive:!0,exact:!1,message:o.maxLength.message}),i.dirty()),r.common.async)return Promise.all([...r.data].map((a,p)=>o.type._parseAsync(new km(r,a,r.path,p)))).then(a=>yd.mergeArray(i,a));const l=[...r.data].map((a,p)=>o.type._parseSync(new km(r,a,r.path,p)));return yd.mergeArray(i,l)}get element(){return this._def.type}min(t,r){return new vf({...this._def,minLength:{value:t,message:fn.toString(r)}})}max(t,r){return new vf({...this._def,maxLength:{value:t,message:fn.toString(r)}})}length(t,r){return new vf({...this._def,exactLength:{value:t,message:fn.toString(r)}})}nonempty(t){return this.min(1,t)}}vf.create=(n,t)=>new vf({type:n,minLength:null,maxLength:null,exactLength:null,typeName:ci.ZodArray,...Pi(t)});function zv(n){if(n instanceof vl){const t={};for(const r in n.shape){const i=n.shape[r];t[r]=_m.create(zv(i))}return new vl({...n._def,shape:()=>t})}else return n instanceof vf?new vf({...n._def,type:zv(n.element)}):n instanceof _m?_m.create(zv(n.unwrap())):n instanceof uy?uy.create(zv(n.unwrap())):n instanceof Pg?Pg.create(n.items.map(t=>zv(t))):n}class vl extends ls{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),r=vs.objectKeys(t);return this._cached={shape:t,keys:r},this._cached}_parse(t){if(this._getType(t)!==ln.object){const w=this._getOrReturnCtx(t);return Yr(w,{code:kr.invalid_type,expected:ln.object,received:w.parsedType}),li}const{status:i,ctx:o}=this._processInputParams(t),{shape:l,keys:a}=this._getCached(),p=[];if(!(this._def.catchall instanceof Em&&this._def.unknownKeys==="strip"))for(const w in o.data)a.includes(w)||p.push(w);const g=[];for(const w of a){const j=l[w],S=o.data[w];g.push({key:{status:"valid",value:w},value:j._parse(new km(o,S,o.path,w)),alwaysSet:w in o.data})}if(this._def.catchall instanceof Em){const w=this._def.unknownKeys;if(w==="passthrough")for(const j of p)g.push({key:{status:"valid",value:j},value:{status:"valid",value:o.data[j]}});else if(w==="strict")p.length>0&&(Yr(o,{code:kr.unrecognized_keys,keys:p}),i.dirty());else if(w!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const w=this._def.catchall;for(const j of p){const S=o.data[j];g.push({key:{status:"valid",value:j},value:w._parse(new km(o,S,o.path,j)),alwaysSet:j in o.data})}}return o.common.async?Promise.resolve().then(async()=>{const w=[];for(const j of g){const S=await j.key,T=await j.value;w.push({key:S,value:T,alwaysSet:j.alwaysSet})}return w}).then(w=>yd.mergeObjectSync(i,w)):yd.mergeObjectSync(i,g)}get shape(){return this._def.shape()}strict(t){return fn.errToObj,new vl({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(r,i)=>{var l,a;const o=((a=(l=this._def).errorMap)==null?void 0:a.call(l,r,i).message)??i.defaultError;return r.code==="unrecognized_keys"?{message:fn.errToObj(t).message??o}:{message:o}}}:{}})}strip(){return new vl({...this._def,unknownKeys:"strip"})}passthrough(){return new vl({...this._def,unknownKeys:"passthrough"})}extend(t){return new vl({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new vl({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:ci.ZodObject})}setKey(t,r){return this.augment({[t]:r})}catchall(t){return new vl({...this._def,catchall:t})}pick(t){const r={};for(const i of vs.objectKeys(t))t[i]&&this.shape[i]&&(r[i]=this.shape[i]);return new vl({...this._def,shape:()=>r})}omit(t){const r={};for(const i of vs.objectKeys(this.shape))t[i]||(r[i]=this.shape[i]);return new vl({...this._def,shape:()=>r})}deepPartial(){return zv(this)}partial(t){const r={};for(const i of vs.objectKeys(this.shape)){const o=this.shape[i];t&&!t[i]?r[i]=o:r[i]=o.optional()}return new vl({...this._def,shape:()=>r})}required(t){const r={};for(const i of vs.objectKeys(this.shape))if(t&&!t[i])r[i]=this.shape[i];else{let l=this.shape[i];for(;l instanceof _m;)l=l._def.innerType;r[i]=l}return new vl({...this._def,shape:()=>r})}keyof(){return R6(vs.objectKeys(this.shape))}}vl.create=(n,t)=>new vl({shape:()=>n,unknownKeys:"strip",catchall:Em.create(),typeName:ci.ZodObject,...Pi(t)});vl.strictCreate=(n,t)=>new vl({shape:()=>n,unknownKeys:"strict",catchall:Em.create(),typeName:ci.ZodObject,...Pi(t)});vl.lazycreate=(n,t)=>new vl({shape:n,unknownKeys:"strip",catchall:Em.create(),typeName:ci.ZodObject,...Pi(t)});class Tb extends ls{_parse(t){const{ctx:r}=this._processInputParams(t),i=this._def.options;function o(l){for(const p of l)if(p.result.status==="valid")return p.result;for(const p of l)if(p.result.status==="dirty")return r.common.issues.push(...p.ctx.common.issues),p.result;const a=l.map(p=>new bp(p.ctx.common.issues));return Yr(r,{code:kr.invalid_union,unionErrors:a}),li}if(r.common.async)return Promise.all(i.map(async l=>{const a={...r,common:{...r.common,issues:[]},parent:null};return{result:await l._parseAsync({data:r.data,path:r.path,parent:a}),ctx:a}})).then(o);{let l;const a=[];for(const g of i){const w={...r,common:{...r.common,issues:[]},parent:null},j=g._parseSync({data:r.data,path:r.path,parent:w});if(j.status==="valid")return j;j.status==="dirty"&&!l&&(l={result:j,ctx:w}),w.common.issues.length&&a.push(w.common.issues)}if(l)return r.common.issues.push(...l.ctx.common.issues),l.result;const p=a.map(g=>new bp(g));return Yr(r,{code:kr.invalid_union,unionErrors:p}),li}}get options(){return this._def.options}}Tb.create=(n,t)=>new Tb({options:n,typeName:ci.ZodUnion,...Pi(t)});function Cw(n,t){const r=dm(n),i=dm(t);if(n===t)return{valid:!0,data:n};if(r===ln.object&&i===ln.object){const o=vs.objectKeys(t),l=vs.objectKeys(n).filter(p=>o.indexOf(p)!==-1),a={...n,...t};for(const p of l){const g=Cw(n[p],t[p]);if(!g.valid)return{valid:!1};a[p]=g.data}return{valid:!0,data:a}}else if(r===ln.array&&i===ln.array){if(n.length!==t.length)return{valid:!1};const o=[];for(let l=0;l<n.length;l++){const a=n[l],p=t[l],g=Cw(a,p);if(!g.valid)return{valid:!1};o.push(g.data)}return{valid:!0,data:o}}else return r===ln.date&&i===ln.date&&+n==+t?{valid:!0,data:n}:{valid:!1}}class Pb extends ls{_parse(t){const{status:r,ctx:i}=this._processInputParams(t),o=(l,a)=>{if(m4(l)||m4(a))return li;const p=Cw(l.value,a.value);return p.valid?((g4(l)||g4(a))&&r.dirty(),{status:r.value,value:p.data}):(Yr(i,{code:kr.invalid_intersection_types}),li)};return i.common.async?Promise.all([this._def.left._parseAsync({data:i.data,path:i.path,parent:i}),this._def.right._parseAsync({data:i.data,path:i.path,parent:i})]).then(([l,a])=>o(l,a)):o(this._def.left._parseSync({data:i.data,path:i.path,parent:i}),this._def.right._parseSync({data:i.data,path:i.path,parent:i}))}}Pb.create=(n,t,r)=>new Pb({left:n,right:t,typeName:ci.ZodIntersection,...Pi(r)});class Pg extends ls{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==ln.array)return Yr(i,{code:kr.invalid_type,expected:ln.array,received:i.parsedType}),li;if(i.data.length<this._def.items.length)return Yr(i,{code:kr.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),li;!this._def.rest&&i.data.length>this._def.items.length&&(Yr(i,{code:kr.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),r.dirty());const l=[...i.data].map((a,p)=>{const g=this._def.items[p]||this._def.rest;return g?g._parse(new km(i,a,i.path,p)):null}).filter(a=>!!a);return i.common.async?Promise.all(l).then(a=>yd.mergeArray(r,a)):yd.mergeArray(r,l)}get items(){return this._def.items}rest(t){return new Pg({...this._def,rest:t})}}Pg.create=(n,t)=>{if(!Array.isArray(n))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Pg({items:n,typeName:ci.ZodTuple,rest:null,...Pi(t)})};class N4 extends ls{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==ln.map)return Yr(i,{code:kr.invalid_type,expected:ln.map,received:i.parsedType}),li;const o=this._def.keyType,l=this._def.valueType,a=[...i.data.entries()].map(([p,g],w)=>({key:o._parse(new km(i,p,i.path,[w,"key"])),value:l._parse(new km(i,g,i.path,[w,"value"]))}));if(i.common.async){const p=new Map;return Promise.resolve().then(async()=>{for(const g of a){const w=await g.key,j=await g.value;if(w.status==="aborted"||j.status==="aborted")return li;(w.status==="dirty"||j.status==="dirty")&&r.dirty(),p.set(w.value,j.value)}return{status:r.value,value:p}})}else{const p=new Map;for(const g of a){const w=g.key,j=g.value;if(w.status==="aborted"||j.status==="aborted")return li;(w.status==="dirty"||j.status==="dirty")&&r.dirty(),p.set(w.value,j.value)}return{status:r.value,value:p}}}}N4.create=(n,t,r)=>new N4({valueType:t,keyType:n,typeName:ci.ZodMap,...Pi(r)});class Zx extends ls{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.parsedType!==ln.set)return Yr(i,{code:kr.invalid_type,expected:ln.set,received:i.parsedType}),li;const o=this._def;o.minSize!==null&&i.data.size<o.minSize.value&&(Yr(i,{code:kr.too_small,minimum:o.minSize.value,type:"set",inclusive:!0,exact:!1,message:o.minSize.message}),r.dirty()),o.maxSize!==null&&i.data.size>o.maxSize.value&&(Yr(i,{code:kr.too_big,maximum:o.maxSize.value,type:"set",inclusive:!0,exact:!1,message:o.maxSize.message}),r.dirty());const l=this._def.valueType;function a(g){const w=new Set;for(const j of g){if(j.status==="aborted")return li;j.status==="dirty"&&r.dirty(),w.add(j.value)}return{status:r.value,value:w}}const p=[...i.data.values()].map((g,w)=>l._parse(new km(i,g,i.path,w)));return i.common.async?Promise.all(p).then(g=>a(g)):a(p)}min(t,r){return new Zx({...this._def,minSize:{value:t,message:fn.toString(r)}})}max(t,r){return new Zx({...this._def,maxSize:{value:t,message:fn.toString(r)}})}size(t,r){return this.min(t,r).max(t,r)}nonempty(t){return this.min(1,t)}}Zx.create=(n,t)=>new Zx({valueType:n,minSize:null,maxSize:null,typeName:ci.ZodSet,...Pi(t)});class S4 extends ls{get schema(){return this._def.getter()}_parse(t){const{ctx:r}=this._processInputParams(t);return this._def.getter()._parse({data:r.data,path:r.path,parent:r})}}S4.create=(n,t)=>new S4({getter:n,typeName:ci.ZodLazy,...Pi(t)});class kw extends ls{_parse(t){if(t.data!==this._def.value){const r=this._getOrReturnCtx(t);return Yr(r,{received:r.data,code:kr.invalid_literal,expected:this._def.value}),li}return{status:"valid",value:t.data}}get value(){return this._def.value}}kw.create=(n,t)=>new kw({value:n,typeName:ci.ZodLiteral,...Pi(t)});function R6(n,t){return new ly({values:n,typeName:ci.ZodEnum,...Pi(t)})}class ly extends ls{_parse(t){if(typeof t.data!="string"){const r=this._getOrReturnCtx(t),i=this._def.values;return Yr(r,{expected:vs.joinValues(i),received:r.parsedType,code:kr.invalid_type}),li}if(this._cache||(this._cache=new Set(this._def.values)),!this._cache.has(t.data)){const r=this._getOrReturnCtx(t),i=this._def.values;return Yr(r,{received:r.data,code:kr.invalid_enum_value,options:i}),li}return eh(t.data)}get options(){return this._def.values}get enum(){const t={};for(const r of this._def.values)t[r]=r;return t}get Values(){const t={};for(const r of this._def.values)t[r]=r;return t}get Enum(){const t={};for(const r of this._def.values)t[r]=r;return t}extract(t,r=this._def){return ly.create(t,{...this._def,...r})}exclude(t,r=this._def){return ly.create(this.options.filter(i=>!t.includes(i)),{...this._def,...r})}}ly.create=R6;class A4 extends ls{_parse(t){const r=vs.getValidEnumValues(this._def.values),i=this._getOrReturnCtx(t);if(i.parsedType!==ln.string&&i.parsedType!==ln.number){const o=vs.objectValues(r);return Yr(i,{expected:vs.joinValues(o),received:i.parsedType,code:kr.invalid_type}),li}if(this._cache||(this._cache=new Set(vs.getValidEnumValues(this._def.values))),!this._cache.has(t.data)){const o=vs.objectValues(r);return Yr(i,{received:i.data,code:kr.invalid_enum_value,options:o}),li}return eh(t.data)}get enum(){return this._def.values}}A4.create=(n,t)=>new A4({values:n,typeName:ci.ZodNativeEnum,...Pi(t)});class Rb extends ls{unwrap(){return this._def.type}_parse(t){const{ctx:r}=this._processInputParams(t);if(r.parsedType!==ln.promise&&r.common.async===!1)return Yr(r,{code:kr.invalid_type,expected:ln.promise,received:r.parsedType}),li;const i=r.parsedType===ln.promise?r.data:Promise.resolve(r.data);return eh(i.then(o=>this._def.type.parseAsync(o,{path:r.path,errorMap:r.common.contextualErrorMap})))}}Rb.create=(n,t)=>new Rb({type:n,typeName:ci.ZodPromise,...Pi(t)});class cy extends ls{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===ci.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:r,ctx:i}=this._processInputParams(t),o=this._def.effect||null,l={addIssue:a=>{Yr(i,a),a.fatal?r.abort():r.dirty()},get path(){return i.path}};if(l.addIssue=l.addIssue.bind(l),o.type==="preprocess"){const a=o.transform(i.data,l);if(i.common.async)return Promise.resolve(a).then(async p=>{if(r.value==="aborted")return li;const g=await this._def.schema._parseAsync({data:p,path:i.path,parent:i});return g.status==="aborted"?li:g.status==="dirty"||r.value==="dirty"?Sx(g.value):g});{if(r.value==="aborted")return li;const p=this._def.schema._parseSync({data:a,path:i.path,parent:i});return p.status==="aborted"?li:p.status==="dirty"||r.value==="dirty"?Sx(p.value):p}}if(o.type==="refinement"){const a=p=>{const g=o.refinement(p,l);if(i.common.async)return Promise.resolve(g);if(g instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return p};if(i.common.async===!1){const p=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});return p.status==="aborted"?li:(p.status==="dirty"&&r.dirty(),a(p.value),{status:r.value,value:p.value})}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(p=>p.status==="aborted"?li:(p.status==="dirty"&&r.dirty(),a(p.value).then(()=>({status:r.value,value:p.value}))))}if(o.type==="transform")if(i.common.async===!1){const a=this._def.schema._parseSync({data:i.data,path:i.path,parent:i});if(!ay(a))return li;const p=o.transform(a.value,l);if(p instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:r.value,value:p}}else return this._def.schema._parseAsync({data:i.data,path:i.path,parent:i}).then(a=>ay(a)?Promise.resolve(o.transform(a.value,l)).then(p=>({status:r.value,value:p})):li);vs.assertNever(o)}}cy.create=(n,t,r)=>new cy({schema:n,typeName:ci.ZodEffects,effect:t,...Pi(r)});cy.createWithPreprocess=(n,t,r)=>new cy({schema:t,effect:{type:"preprocess",transform:n},typeName:ci.ZodEffects,...Pi(r)});class _m extends ls{_parse(t){return this._getType(t)===ln.undefined?eh(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}_m.create=(n,t)=>new _m({innerType:n,typeName:ci.ZodOptional,...Pi(t)});class uy extends ls{_parse(t){return this._getType(t)===ln.null?eh(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}uy.create=(n,t)=>new uy({innerType:n,typeName:ci.ZodNullable,...Pi(t)});class Ew extends ls{_parse(t){const{ctx:r}=this._processInputParams(t);let i=r.data;return r.parsedType===ln.undefined&&(i=this._def.defaultValue()),this._def.innerType._parse({data:i,path:r.path,parent:r})}removeDefault(){return this._def.innerType}}Ew.create=(n,t)=>new Ew({innerType:n,typeName:ci.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Pi(t)});class Tw extends ls{_parse(t){const{ctx:r}=this._processInputParams(t),i={...r,common:{...r.common,issues:[]}},o=this._def.innerType._parse({data:i.data,path:i.path,parent:{...i}});return kb(o)?o.then(l=>({status:"valid",value:l.status==="valid"?l.value:this._def.catchValue({get error(){return new bp(i.common.issues)},input:i.data})})):{status:"valid",value:o.status==="valid"?o.value:this._def.catchValue({get error(){return new bp(i.common.issues)},input:i.data})}}removeCatch(){return this._def.innerType}}Tw.create=(n,t)=>new Tw({innerType:n,typeName:ci.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Pi(t)});class C4 extends ls{_parse(t){if(this._getType(t)!==ln.nan){const i=this._getOrReturnCtx(t);return Yr(i,{code:kr.invalid_type,expected:ln.nan,received:i.parsedType}),li}return{status:"valid",value:t.data}}}C4.create=n=>new C4({typeName:ci.ZodNaN,...Pi(n)});class _W extends ls{_parse(t){const{ctx:r}=this._processInputParams(t),i=r.data;return this._def.type._parse({data:i,path:r.path,parent:r})}unwrap(){return this._def.type}}class h5 extends ls{_parse(t){const{status:r,ctx:i}=this._processInputParams(t);if(i.common.async)return(async()=>{const l=await this._def.in._parseAsync({data:i.data,path:i.path,parent:i});return l.status==="aborted"?li:l.status==="dirty"?(r.dirty(),Sx(l.value)):this._def.out._parseAsync({data:l.value,path:i.path,parent:i})})();{const o=this._def.in._parseSync({data:i.data,path:i.path,parent:i});return o.status==="aborted"?li:o.status==="dirty"?(r.dirty(),{status:"dirty",value:o.value}):this._def.out._parseSync({data:o.value,path:i.path,parent:i})}}static create(t,r){return new h5({in:t,out:r,typeName:ci.ZodPipeline})}}class Pw extends ls{_parse(t){const r=this._def.innerType._parse(t),i=o=>(ay(o)&&(o.value=Object.freeze(o.value)),o);return kb(r)?r.then(o=>i(o)):i(r)}unwrap(){return this._def.innerType}}Pw.create=(n,t)=>new Pw({innerType:n,typeName:ci.ZodReadonly,...Pi(t)});var ci;(function(n){n.ZodString="ZodString",n.ZodNumber="ZodNumber",n.ZodNaN="ZodNaN",n.ZodBigInt="ZodBigInt",n.ZodBoolean="ZodBoolean",n.ZodDate="ZodDate",n.ZodSymbol="ZodSymbol",n.ZodUndefined="ZodUndefined",n.ZodNull="ZodNull",n.ZodAny="ZodAny",n.ZodUnknown="ZodUnknown",n.ZodNever="ZodNever",n.ZodVoid="ZodVoid",n.ZodArray="ZodArray",n.ZodObject="ZodObject",n.ZodUnion="ZodUnion",n.ZodDiscriminatedUnion="ZodDiscriminatedUnion",n.ZodIntersection="ZodIntersection",n.ZodTuple="ZodTuple",n.ZodRecord="ZodRecord",n.ZodMap="ZodMap",n.ZodSet="ZodSet",n.ZodFunction="ZodFunction",n.ZodLazy="ZodLazy",n.ZodLiteral="ZodLiteral",n.ZodEnum="ZodEnum",n.ZodEffects="ZodEffects",n.ZodNativeEnum="ZodNativeEnum",n.ZodOptional="ZodOptional",n.ZodNullable="ZodNullable",n.ZodDefault="ZodDefault",n.ZodCatch="ZodCatch",n.ZodPromise="ZodPromise",n.ZodBranded="ZodBranded",n.ZodPipeline="ZodPipeline",n.ZodReadonly="ZodReadonly"})(ci||(ci={}));const Pt=pm.create,Mr=oy.create,Bo=Aw.create;Em.create;const Gi=vf.create,on=vl.create;Tb.create;Pb.create;Pg.create;const Zv=kw.create,Zc=ly.create;Rb.create;_m.create;uy.create;const wW=kG,I6=M.createContext({}),po=({...n})=>e.jsx(I6.Provider,{value:{name:n.name},children:e.jsx(RG,{...n})}),b_=()=>{const n=M.useContext(I6),t=M.useContext(L6),{getFieldState:r,formState:i}=x_(),o=r(n.name,i);if(!n)throw new Error("useFormField should be used within <FormField>");const{id:l}=t;return{id:l,name:n.name,formItemId:`${l}-form-item`,formDescriptionId:`${l}-form-item-description`,formMessageId:`${l}-form-item-message`,...o}},L6=M.createContext({}),Za=M.forwardRef(({className:n,...t},r)=>{const i=M.useId();return e.jsx(L6.Provider,{value:{id:i},children:e.jsx("div",{ref:r,className:er("space-y-2",n),...t})})});Za.displayName="FormItem";const Ka=M.forwardRef(({className:n,...t},r)=>{const{error:i,formItemId:o}=b_();return e.jsx(ct,{ref:r,className:er(i&&"text-destructive",n),htmlFor:o,...t})});Ka.displayName="FormLabel";const Xa=M.forwardRef(({...n},t)=>{const{error:r,formItemId:i,formDescriptionId:o,formMessageId:l}=b_();return e.jsx(t3,{ref:t,id:i,"aria-describedby":r?`${o} ${l}`:`${o}`,"aria-invalid":!!r,...n})});Xa.displayName="FormControl";const Rw=M.forwardRef(({className:n,...t},r)=>{const{formDescriptionId:i}=b_();return e.jsx("p",{ref:r,id:i,className:er("text-[0.8rem] text-muted-foreground",n),...t})});Rw.displayName="FormDescription";const mo=M.forwardRef(({className:n,children:t,...r},i)=>{const{error:o,formMessageId:l}=b_(),a=o?String((o==null?void 0:o.message)??""):t;return a?e.jsx("p",{ref:i,id:l,className:er("text-[0.8rem] font-medium text-destructive",n),...r,children:a}):null});mo.displayName="FormMessage";const Kv=on({displayName:Pt().min(2,"Name must be at least 2 characters"),bio:Pt().max(500,"Bio must be less than 500 characters"),avatar:Pt().url("Must be a valid URL").optional(),phone:Pt().min(10,"Phone number must be at least 10 digits"),email:Pt().email("Must be a valid email address"),location:on({city:Pt().min(1,"City is required"),state:Pt().min(1,"State is required"),country:Pt().min(1,"Country is required")}),website:Pt().url("Must be a valid URL").optional().or(Zv("")),linkedin:Pt().url("Must be a valid LinkedIn URL").optional().or(Zv("")),isPublic:Bo()}),jW=Kv.extend({companyName:Pt().min(1,"Company name is required"),industry:Pt().min(1,"Industry is required"),foundedYear:Mr().min(1900).max(new Date().getFullYear()),employees:Mr().min(1,"Must have at least 1 employee"),description:Pt().min(50,"Description must be at least 50 characters"),keyProducts:Gi(Pt()).min(1,"At least one product is required"),certifications:Gi(Pt()).optional(),privateInfo:on({askingPrice:Mr().min(1,"Asking price is required"),monthlyRevenue:Mr().min(0),monthlyProfit:Mr().min(0),reasonForSale:Pt().min(10,"Reason for sale is required")})}),NW=Kv.extend({firmName:Pt().min(1,"Firm name is required"),buyerType:Zc(["individual","corporate","pe_fund","strategic"]),investmentRange:on({min:Mr().min(1,"Minimum investment is required"),max:Mr().min(1,"Maximum investment is required")}),preferredIndustries:Gi(Pt()).min(1,"Select at least one industry"),preferredLocations:Gi(Pt()).min(1,"Select at least one location"),investmentCriteria:Pt().min(50,"Investment criteria must be detailed"),experience:Pt().min(20,"Experience description is required"),privateInfo:on({availableFunds:Mr().min(1,"Available funds is required"),previousAcquisitions:Mr().min(0),timeframe:Pt().min(1,"Investment timeframe is required")})}),SW=Kv.extend({brandName:Pt().min(1,"Brand name is required"),industry:Pt().min(1,"Industry is required"),foundedYear:Mr().min(1900).max(new Date().getFullYear()),totalOutlets:Mr().min(1,"Must have at least 1 outlet"),businessModel:Pt().min(1,"Business model is required"),franchiseFee:Mr().min(1,"Franchise fee is required"),royaltyPercentage:Mr().min(0).max(100,"Royalty cannot exceed 100%"),investmentMin:Mr().min(1,"Minimum investment is required"),investmentMax:Mr().min(1,"Maximum investment is required"),description:Pt().min(100,"Description must be at least 100 characters"),support:on({training:Pt().min(1,"Training details required"),marketing:Pt().min(1,"Marketing support details required"),operations:Pt().min(1,"Operations support details required")})}),AW=n=>{switch(n){case"seller":return jW;case"buyer":return NW;case"franchisor":return SW;case"franchisee":return Kv;case"advisor":return Kv;default:return Kv}},CW=["Technology","Healthcare","Finance","Retail","Manufacturing","Food & Beverage","Education","Real Estate","Automotive","Other"];function kW({profile:n,onSubmit:t,className:r=""}){const i=AW(n.role),o=u5({resolver:d5(i),defaultValues:n}),l=p=>{console.log("Form submitted:",p),t==null||t(p)},a=()=>{switch(n.role){case"seller":return e.jsxs(e.Fragment,{children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(mp,{className:"w-5 h-5"}),"Business Information"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx(po,{control:o.control,name:"companyName",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Company Name"}),e.jsx(Xa,{children:e.jsx(Wt,{placeholder:"Your company name",...p})}),e.jsx(mo,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(po,{control:o.control,name:"industry",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Industry"}),e.jsxs(ys,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(Xa,{children:e.jsx(as,{children:e.jsx(xs,{placeholder:"Select industry"})})}),e.jsx(os,{children:CW.map(g=>e.jsx(pr,{value:g,children:g},g))})]}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"foundedYear",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Founded Year"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"2020",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})})]}),e.jsx(po,{control:o.control,name:"description",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Business Description"}),e.jsx(Xa,{children:e.jsx(Fl,{placeholder:"Describe your business, products, and services...",className:"min-h-[100px]",...p})}),e.jsx(mo,{})]})})]})]}),e.jsxs(ot,{className:"border-orange-200 bg-orange-50/50",children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(yf,{className:"w-5 h-5"}),"Financial Information",e.jsx(Gt,{variant:"secondary",children:"NDA Protected"})]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx(po,{control:o.control,name:"privateInfo.askingPrice",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Asking Price ()"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"50000000",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(po,{control:o.control,name:"privateInfo.monthlyRevenue",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Monthly Revenue ()"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"1000000",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"privateInfo.monthlyProfit",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Monthly Profit ()"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"300000",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})})]}),e.jsx(po,{control:o.control,name:"privateInfo.reasonForSale",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Reason for Sale"}),e.jsx(Xa,{children:e.jsx(Fl,{placeholder:"Why are you selling this business?",...p})}),e.jsx(mo,{})]})})]})]})]});case"buyer":return e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Go,{className:"w-5 h-5"}),"Investment Profile"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx(po,{control:o.control,name:"firmName",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Firm/Organization Name"}),e.jsx(Xa,{children:e.jsx(Wt,{placeholder:"Your investment firm",...p})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"buyerType",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Buyer Type"}),e.jsxs(ys,{onValueChange:p.onChange,defaultValue:p.value,children:[e.jsx(Xa,{children:e.jsx(as,{children:e.jsx(xs,{placeholder:"Select buyer type"})})}),e.jsxs(os,{children:[e.jsx(pr,{value:"individual",children:"Individual Investor"}),e.jsx(pr,{value:"corporate",children:"Corporate Buyer"}),e.jsx(pr,{value:"pe_fund",children:"PE/VC Fund"}),e.jsx(pr,{value:"strategic",children:"Strategic Buyer"})]})]}),e.jsx(mo,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(po,{control:o.control,name:"investmentRange.min",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Min Investment ()"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"1000000",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"investmentRange.max",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Max Investment ()"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"100000000",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})})]})]})]});case"franchisor":return e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(vy,{className:"w-5 h-5"}),"Franchise Details"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx(po,{control:o.control,name:"brandName",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Brand Name"}),e.jsx(Xa,{children:e.jsx(Wt,{placeholder:"Your franchise brand",...p})}),e.jsx(mo,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(po,{control:o.control,name:"franchiseFee",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Franchise Fee ()"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"500000",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"royaltyPercentage",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Royalty (%)"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"5",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"totalOutlets",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Total Outlets"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"number",placeholder:"50",...p,onChange:g=>p.onChange(parseInt(g.target.value))})}),e.jsx(mo,{})]})})]})]})]});default:return null}};return e.jsx(wW,{...o,children:e.jsxs("form",{onSubmit:o.handleSubmit(l),className:`space-y-6 ${r}`,children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(vp,{className:"w-5 h-5"}),"Basic Information"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsx(po,{control:o.control,name:"displayName",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Display Name"}),e.jsx(Xa,{children:e.jsx(Wt,{placeholder:"Your full name",...p})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"email",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Email Address"}),e.jsx(Xa,{children:e.jsx(Wt,{type:"email",placeholder:"your@email.com",...p})}),e.jsx(mo,{})]})})]}),e.jsx(po,{control:o.control,name:"bio",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Bio"}),e.jsx(Xa,{children:e.jsx(Fl,{placeholder:"Tell us about yourself...",className:"min-h-[80px]",...p})}),e.jsx(Rw,{children:"Brief description about yourself and your professional background"}),e.jsx(mo,{})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(po,{control:o.control,name:"location.city",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"City"}),e.jsx(Xa,{children:e.jsx(Wt,{placeholder:"Mumbai",...p})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"location.state",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"State"}),e.jsx(Xa,{children:e.jsx(Wt,{placeholder:"Maharashtra",...p})}),e.jsx(mo,{})]})}),e.jsx(po,{control:o.control,name:"location.country",render:({field:p})=>e.jsxs(Za,{children:[e.jsx(Ka,{children:"Country"}),e.jsx(Xa,{children:e.jsx(Wt,{placeholder:"India",...p})}),e.jsx(mo,{})]})})]}),e.jsx(po,{control:o.control,name:"isPublic",render:({field:p})=>e.jsxs(Za,{className:"flex flex-row items-start space-x-3 space-y-0",children:[e.jsx(Xa,{children:e.jsx(ss,{checked:p.value,onCheckedChange:p.onChange})}),e.jsxs("div",{className:"space-y-1 leading-none",children:[e.jsx(Ka,{children:"Make profile public"}),e.jsx(Rw,{children:"Allow your profile to be discovered by other users"})]})]})})]})]}),a(),e.jsxs("div",{className:"flex justify-end gap-3",children:[e.jsx(ze,{type:"button",variant:"outline",children:"Cancel"}),e.jsxs(ze,{type:"submit",className:"flex items-center gap-2",children:[e.jsx(ty,{className:"w-4 h-4"}),"Save Profile"]})]})]})})}const EW={profileVisibility:"public",contactInfo:"verified-only",businessDetails:"nda-required",financialInfo:"private",documentAccess:"nda-required",searchable:!0,showInDirectory:!0,allowDirectMessages:!0,requireNDAForContact:!1,dataRetention:"3-years"},Tv=[{value:"public",label:"Public",description:"Visible to everyone",icon:wm,color:"text-green-600"},{value:"verified-only",label:"Verified Users Only",description:"Only verified BizSearch users",icon:P8,color:"text-blue-600"},{value:"nda-required",label:"NDA Required",description:"Requires signed NDA",icon:Mh,color:"text-orange-600"},{value:"private",label:"Private",description:"Only you and your team",icon:ff,color:"text-red-600"}];function TW({settings:n=EW,onSettingsChange:t,className:r=""}){var j,S,T;const[i,o]=M.useState(n),[l,a]=M.useState(!1),p=(E,O)=>{const R={...i,[E]:O};o(R),t==null||t(R)},g=E=>Tv.find(O=>O.value===E),w=({label:E,description:O,value:R,onChange:F,options:B=Tv})=>{const G=g(R),z=(G==null?void 0:G.icon)||Ua;return e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{children:[e.jsx(ct,{className:"text-sm font-medium",children:E}),e.jsx("p",{className:"text-xs text-muted-foreground",children:O})]}),e.jsxs(ys,{value:R,onValueChange:F,children:[e.jsx(as,{className:"w-full",children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(z,{className:`w-4 h-4 ${G==null?void 0:G.color}`}),e.jsx(xs,{})]})}),e.jsx(os,{children:B.map(ee=>{const ie=ee.icon;return e.jsx(pr,{value:ee.value,children:e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(ie,{className:`w-4 h-4 ${ee.color}`}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:ee.label}),e.jsx("div",{className:"text-xs text-muted-foreground",children:ee.description})]})]})},ee.value)})})]})]})};return e.jsxs("div",{className:`space-y-6 ${r}`,children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Profile Visibility"]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsx(w,{label:"Profile Visibility",description:"Who can see your profile information",value:i.profileVisibility,onChange:E=>p("profileVisibility",E),options:Tv.filter(E=>E.value!=="nda-required")}),e.jsx(w,{label:"Contact Information",description:"Who can see your email and phone number",value:i.contactInfo,onChange:E=>p("contactInfo",E),options:Tv.filter(E=>E.value!=="nda-required")}),e.jsx(w,{label:"Business Details",description:"Who can see detailed business information",value:i.businessDetails,onChange:E=>p("businessDetails",E)}),e.jsx(w,{label:"Financial Information",description:"Who can see revenue, profit, and financial data",value:i.financialInfo,onChange:E=>p("financialInfo",E),options:Tv.filter(E=>E.value!=="public"&&E.value!=="verified-only")}),e.jsx(w,{label:"Document Access",description:"Who can access your uploaded documents",value:i.documentAccess,onChange:E=>p("documentAccess",E),options:[{value:"team-only",label:"Team Only",description:"Only team members",icon:Go,color:"text-purple-600"},...Tv.filter(E=>E.value==="nda-required"||E.value==="private")]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ua,{className:"w-5 h-5"}),"Discovery & Communication"]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ct,{className:"text-sm font-medium",children:"Searchable Profile"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Allow your profile to appear in search results"})]}),e.jsx(rc,{checked:i.searchable,onCheckedChange:E=>p("searchable",E)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ct,{className:"text-sm font-medium",children:"Show in Directory"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Include your profile in the public directory"})]}),e.jsx(rc,{checked:i.showInDirectory,onCheckedChange:E=>p("showInDirectory",E)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ct,{className:"text-sm font-medium",children:"Allow Direct Messages"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Let other users send you direct messages"})]}),e.jsx(rc,{checked:i.allowDirectMessages,onCheckedChange:E=>p("allowDirectMessages",E)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx(ct,{className:"text-sm font-medium",children:"Require NDA for Contact"}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Require NDA signature before sharing contact details"})]}),e.jsx(rc,{checked:i.requireNDAForContact,onCheckedChange:E=>p("requireNDAForContact",E)})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Bb,{className:"w-5 h-5"}),"Data Management"]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx(ct,{className:"text-sm font-medium",children:"Data Retention Period"}),e.jsx("p",{className:"text-xs text-muted-foreground mb-3",children:"How long to keep your data after account deletion"}),e.jsxs(ys,{value:i.dataRetention,onValueChange:E=>p("dataRetention",E),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"1-year",children:"1 Year"}),e.jsx(pr,{value:"3-years",children:"3 Years"}),e.jsx(pr,{value:"indefinite",children:"Indefinite"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsxs(ze,{variant:"outline",className:"flex-1",children:[e.jsx(wc,{className:"w-4 h-4 mr-2"}),"Export Data"]}),e.jsxs(Mg,{open:l,onOpenChange:a,children:[e.jsx(Jj,{asChild:!0,children:e.jsxs(ze,{variant:"outline",className:"flex-1 text-red-600 hover:text-red-700",children:[e.jsx(xf,{className:"w-4 h-4 mr-2"}),"Delete Account"]})}),e.jsxs(Om,{children:[e.jsxs(zm,{children:[e.jsxs(Fm,{className:"flex items-center gap-2",children:[e.jsx(Xc,{className:"w-5 h-5 text-red-600"}),"Delete Account"]}),e.jsx(v0,{children:"This action cannot be undone. All your data, listings, and documents will be permanently deleted."})]}),e.jsxs(Qj,{children:[e.jsx(ze,{variant:"outline",onClick:()=>a(!1),children:"Cancel"}),e.jsx(ze,{variant:"destructive",children:"Delete Account"})]})]})]})]})]})]}),e.jsx(ot,{className:"border-blue-200 bg-blue-50/50",children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(XA,{className:"w-5 h-5 text-blue-600 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-blue-900 mb-2",children:"Privacy Summary"}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(Gt,{variant:"secondary",className:"text-xs",children:["Profile:"," ",(j=g(i.profileVisibility))==null?void 0:j.label]}),e.jsxs(Gt,{variant:"secondary",className:"text-xs",children:["Contact:"," ",(S=g(i.contactInfo))==null?void 0:S.label]}),e.jsxs(Gt,{variant:"secondary",className:"text-xs",children:["Business:"," ",(T=g(i.businessDetails))==null?void 0:T.label]})]}),e.jsx("p",{className:"text-xs",children:"Your privacy settings determine who can see different parts of your profile. More restrictive settings provide better privacy but may limit discovery."})]})]})]})})})]})}function PW({className:n=""}){const{userId:t}=my(),r=Na(),[i,o]=M.useState(!1),[l,a]=M.useState("profile"),p=t?v6(t):Nb(),g=!t||t===Nb().id;if(!p)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Profile Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The requested profile could not be found."}),e.jsxs(ze,{onClick:()=>r("/profile"),className:"mt-4",children:[e.jsx(pd,{className:"w-4 h-4 mr-2"}),"Back to Profile"]})]})});if(!g)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx(Xc,{className:"w-12 h-12 mx-auto mb-4 text-yellow-500"}),e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Access Denied"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"You can only edit your own profile."}),e.jsxs(ze,{onClick:()=>r("/profile"),variant:"outline",children:[e.jsx(pd,{className:"w-4 h-4 mr-2"}),"Back to Profile"]})]})});const w=()=>{i&&!window.confirm("You have unsaved changes. Are you sure you want to leave?")||r("/profile")},j=T=>{console.log("Profile data submitted:",T),o(!1),alert("Profile updated successfully!")},S=T=>{console.log("Privacy settings changed:",T),o(!0)};return e.jsxs("div",{className:`container mx-auto px-4 py-8 space-y-8 ${n}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ze,{variant:"ghost",onClick:w,children:[e.jsx(pd,{className:"w-4 h-4 mr-2"}),"Back to Profile"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Edit Profile"}),e.jsx("p",{className:"text-muted-foreground",children:"Update your profile information and privacy settings"})]})]}),e.jsxs("div",{className:"flex items-center gap-3",children:[i&&e.jsx(Gt,{variant:"secondary",className:"bg-yellow-100 text-yellow-800",children:"Unsaved Changes"}),e.jsxs(ze,{variant:"outline",onClick:()=>r("/profile"),children:[e.jsx(Ua,{className:"w-4 h-4 mr-2"}),"Preview Profile"]})]})]}),e.jsx(ot,{className:"border-blue-200 bg-blue-50/50",children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:p.avatar,alt:p.displayName,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:p.displayName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{variant:"secondary",className:"capitalize",children:p.role}),e.jsx(Gt,{variant:p.verificationStatus==="verified"?"default":"secondary",className:p.verificationStatus==="verified"?"bg-green-100 text-green-800":p.verificationStatus==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:p.verificationStatus})]})]})]})})}),e.jsxs(_p,{value:l,onValueChange:a,className:"space-y-6",children:[e.jsxs(Sf,{className:"grid w-full grid-cols-3",children:[e.jsxs(Di,{value:"profile",className:"flex items-center gap-2",children:[e.jsx(vp,{className:"w-4 h-4"}),"Profile Information"]}),e.jsxs(Di,{value:"privacy",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4"}),"Privacy Settings"]}),e.jsxs(Di,{value:"account",className:"flex items-center gap-2",children:[e.jsx(Bb,{className:"w-4 h-4"}),"Account Settings"]})]}),e.jsx(Qi,{value:"profile",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Profile Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Update your personal and professional information. Fields marked with NDA protection are only visible to users who have signed an NDA."})]}),e.jsx(ut,{children:e.jsx(kW,{profile:p,onSubmit:j})})]})}),e.jsx(Qi,{value:"privacy",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Privacy & Visibility Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Control who can see your profile information and how you can be contacted."})]}),e.jsx(ut,{children:e.jsx(TW,{onSettingsChange:S})})]})}),e.jsx(Qi,{value:"account",className:"space-y-6",children:e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Account Settings"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Manage your account preferences and security settings."})]}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Email Notifications"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"New Messages"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Get notified when someone sends you a message"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"Profile Views"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Get notified when someone views your profile"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm",children:"New Opportunities"}),e.jsx("div",{className:"text-xs text-muted-foreground",children:"Get notified about relevant business opportunities"})]}),e.jsx("input",{type:"checkbox",defaultChecked:!0})]})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t",children:[e.jsx("h4",{className:"font-medium",children:"Security"}),e.jsxs("div",{className:"space-y-3",children:[e.jsx(ze,{variant:"outline",className:"w-full justify-start",children:"Change Password"}),e.jsx(ze,{variant:"outline",className:"w-full justify-start",children:"Enable Two-Factor Authentication"}),e.jsx(ze,{variant:"outline",className:"w-full justify-start",children:"Download Account Data"})]})]}),e.jsxs("div",{className:"space-y-4 pt-6 border-t border-red-200",children:[e.jsx("h4",{className:"font-medium text-red-600",children:"Danger Zone"}),e.jsx("div",{className:"p-4 border border-red-200 rounded-lg bg-red-50/50",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-sm text-red-900",children:"Delete Account"}),e.jsx("div",{className:"text-xs text-red-700",children:"Permanently delete your account and all data"})]}),e.jsx(ze,{variant:"destructive",size:"sm",children:"Delete Account"})]})})]})]})]})})]}),i&&e.jsx("div",{className:"fixed bottom-4 right-4 bg-yellow-100 border border-yellow-300 rounded-lg p-4 shadow-lg",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Xc,{className:"w-5 h-5 text-yellow-600"}),e.jsxs("div",{children:[e.jsx("div",{className:"font-medium text-yellow-900",children:"Unsaved Changes"}),e.jsx("div",{className:"text-sm text-yellow-700",children:"Don't forget to save your changes"})]}),e.jsxs(ze,{size:"sm",onClick:()=>o(!1),children:[e.jsx(ty,{className:"w-4 h-4 mr-2"}),"Save"]})]})})]})}const k4=[{id:"doc1",name:"Financial Statements 2023",type:"financial",size:"2.4 MB",uploadDate:"2024-03-10",status:"verified",requiresNDA:!0,category:"Financial"},{id:"doc2",name:"Business Registration Certificate",type:"legal",size:"1.2 MB",uploadDate:"2024-03-08",status:"verified",requiresNDA:!1,category:"Legal"},{id:"doc3",name:"Tax Returns 2022-2023",type:"financial",size:"3.1 MB",uploadDate:"2024-03-05",status:"pending",requiresNDA:!0,category:"Financial"},{id:"doc4",name:"Franchise Disclosure Document",type:"franchise",size:"5.8 MB",uploadDate:"2024-03-01",status:"verified",requiresNDA:!0,category:"Franchise"},{id:"doc5",name:"Operational Manual",type:"operations",size:"12.3 MB",uploadDate:"2024-02-28",status:"verified",requiresNDA:!1,category:"Operations"}];function RW({className:n=""}){const{userId:t}=my(),r=Na(),[i,o]=M.useState(""),[l,a]=M.useState("all"),[p,g]=M.useState(!1),w=t?v6(t):Nb(),j=!t||t===Nb().id;if(!w)return e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-2xl font-bold mb-4",children:"Profile Not Found"}),e.jsx("p",{className:"text-muted-foreground",children:"The requested profile could not be found."}),e.jsxs(ze,{onClick:()=>r("/profile"),className:"mt-4",children:[e.jsx(pd,{className:"w-4 h-4 mr-2"}),"Back to Profile"]})]})});const S=()=>{r(j?"/profile":`/profile/${t}`)},T=()=>{console.log("Upload document")},E=z=>{console.log("Download document:",z)},O=()=>{console.log("Sign NDA"),g(!0)},R=k4.filter(z=>{const ee=z.name.toLowerCase().includes(i.toLowerCase()),ie=l==="all"||z.category===l;return ee&&ie}),F=["all",...new Set(k4.map(z=>z.category))],B=z=>{switch(z){case"verified":return e.jsx(Nn,{className:"w-4 h-4 text-green-600"});case"pending":return e.jsx(Xd,{className:"w-4 h-4 text-yellow-600"});case"rejected":return e.jsx(Xc,{className:"w-4 h-4 text-red-600"});default:return e.jsx(Ys,{className:"w-4 h-4 text-gray-600"})}},G=z=>{switch(z){case"verified":return"bg-green-100 text-green-800";case"pending":return"bg-yellow-100 text-yellow-800";case"rejected":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return e.jsxs("div",{className:`container mx-auto px-4 py-8 space-y-8 ${n}`,children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ze,{variant:"ghost",onClick:S,children:[e.jsx(pd,{className:"w-4 h-4 mr-2"}),"Back to Profile"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Documents"}),e.jsx("p",{className:"text-muted-foreground",children:j?"Manage your documents and verification status":`View ${w.displayName}'s documents`})]})]}),j&&e.jsxs(ze,{onClick:T,children:[e.jsx(Jd,{className:"w-4 h-4 mr-2"}),"Upload Document"]})]}),e.jsx(ot,{className:"border-blue-200 bg-blue-50/50",children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("img",{src:w.avatar,alt:w.displayName,className:"w-12 h-12 rounded-full"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:w.displayName}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Gt,{variant:"secondary",className:"capitalize",children:w.role}),e.jsx(Gt,{variant:w.verificationStatus==="verified"?"default":"secondary",className:w.verificationStatus==="verified"?"bg-green-100 text-green-800":w.verificationStatus==="pending"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800",children:w.verificationStatus})]})]})]})})}),e.jsxs(_p,{defaultValue:"documents",className:"space-y-6",children:[e.jsxs(Sf,{className:"grid w-full grid-cols-2",children:[e.jsxs(Di,{value:"documents",className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"w-4 h-4"}),"Document Vault"]}),e.jsxs(Di,{value:"verification",className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-4 h-4"}),"Verification Status"]})]}),e.jsxs(Qi,{value:"documents",className:"space-y-6",children:[e.jsx(ot,{children:e.jsx(ut,{className:"pt-6",children:e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[e.jsx("div",{className:"flex-1",children:e.jsxs("div",{className:"relative",children:[e.jsx(md,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-muted-foreground w-4 h-4"}),e.jsx(Wt,{placeholder:"Search documents...",value:i,onChange:z=>o(z.target.value),className:"pl-10"})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx("select",{value:l,onChange:z=>a(z.target.value),className:"px-3 py-2 border rounded-md text-sm",children:F.map(z=>e.jsx("option",{value:z,children:z==="all"?"All Categories":z},z))}),e.jsx(ze,{variant:"outline",size:"sm",children:e.jsx(Qx,{className:"w-4 h-4"})})]})]})})}),e.jsx(m6,{profile:w,documents:R,isOwnVault:j,hasSignedNDA:p,onUploadDocument:T,onDownloadDocument:E,onSignNDA:O}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"w-5 h-5"}),"All Documents",e.jsx(Gt,{variant:"secondary",children:R.length})]})}),e.jsx(ut,{children:R.length===0?e.jsxs("div",{className:"text-center py-8 text-muted-foreground",children:[e.jsx(Ys,{className:"w-12 h-12 mx-auto mb-4 opacity-50"}),e.jsx("p",{children:"No documents found"}),e.jsx("p",{className:"text-sm",children:i||l!=="all"?"Try adjusting your search or filters":j?"Upload your first document to get started":"No documents have been shared yet"})]}):e.jsx("div",{className:"space-y-3",children:R.map(z=>e.jsxs("div",{className:"flex items-center gap-4 p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsx("div",{className:"flex-shrink-0",children:B(z.status)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium truncate",children:z.name}),z.requiresNDA&&e.jsx(Mh,{className:"w-4 h-4 text-orange-600"}),e.jsx(Gt,{className:G(z.status),children:z.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsx("span",{children:z.category}),e.jsx("span",{children:z.size}),e.jsxs("span",{children:["Uploaded"," ",new Date(z.uploadDate).toLocaleDateString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[z.requiresNDA&&!p&&!j?e.jsxs(ze,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(Mh,{className:"w-4 h-4 mr-2"}),"NDA Required"]}):e.jsxs(e.Fragment,{children:[e.jsxs(ze,{variant:"outline",size:"sm",children:[e.jsx(Ua,{className:"w-4 h-4 mr-2"}),"View"]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>E(z.id),children:[e.jsx(wc,{className:"w-4 h-4 mr-2"}),"Download"]})]}),j&&e.jsx(ze,{variant:"ghost",size:"sm",children:e.jsx(tj,{className:"w-4 h-4"})})]})]},z.id))})})]})]}),e.jsx(Qi,{value:"verification",children:e.jsx(p6,{profile:w,onUploadDocument:z=>console.log("Upload",z),onViewDocument:z=>console.log("View",z),onStartVerification:()=>console.log("Start verification")})})]})]})}function IW(){const n=Na(),[t,r]=M.useState({notifications:{email:!0,push:!1,sms:!1,marketing:!1,inquiries:!0,offers:!0,updates:!1},privacy:{profileVisibility:"public",showEmail:!1,showPhone:!1,allowMessages:!0,showActivity:!0},security:{twoFactor:!1,loginAlerts:!0,sessionTimeout:30}}),i=(w,j)=>{r(S=>({...S,notifications:{...S.notifications,[w]:j}}))},o=(w,j)=>{r(S=>({...S,privacy:{...S.privacy,[w]:j}}))},l=(w,j)=>{r(S=>({...S,security:{...S.security,[w]:j}}))},a=()=>{console.log("Saving settings:",t),alert("Settings saved successfully!")},p=()=>{console.log("Exporting user data"),alert("Data export initiated. You'll receive an email with your data.")},g=()=>{window.confirm("Are you sure you want to delete your account? This action cannot be undone.")&&(console.log("Account deletion requested"),alert("Account deletion request submitted. You'll receive a confirmation email."))};return e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs(ze,{variant:"ghost",onClick:()=>n("/profile"),children:[e.jsx(pd,{className:"w-4 h-4 mr-2"}),"Back to Profile"]}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Account Settings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account preferences and security settings"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx("h3",{className:"font-semibold text-sm text-muted-foreground uppercase tracking-wide",children:"Settings"}),e.jsxs("div",{className:"space-y-1",children:[e.jsxs(ze,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[e.jsx(Ih,{className:"w-4 h-4 mr-2"}),"Notifications"]}),e.jsxs(ze,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Privacy"]}),e.jsxs(ze,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[e.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Security"]}),e.jsxs(ze,{variant:"ghost",className:"w-full justify-start",size:"sm",children:[e.jsx(vp,{className:"w-4 h-4 mr-2"}),"Account"]})]})]}),e.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ih,{className:"w-5 h-5"}),"Notification Preferences"]})}),e.jsx(ut,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Email Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive notifications via email"})]}),e.jsx(rc,{checked:t.notifications.email,onCheckedChange:w=>i("email",w)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Push Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive browser push notifications"})]}),e.jsx(rc,{checked:t.notifications.push,onCheckedChange:w=>i("push",w)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"SMS Notifications"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Receive important updates via SMS"})]}),e.jsx(rc,{checked:t.notifications.sms,onCheckedChange:w=>i("sms",w)})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"New Inquiries"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When someone inquires about your listings"})]}),e.jsx(rc,{checked:t.notifications.inquiries,onCheckedChange:w=>i("inquiries",w)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Offers & Proposals"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"When you receive offers or proposals"})]}),e.jsx(rc,{checked:t.notifications.offers,onCheckedChange:w=>i("offers",w)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Marketing Updates"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Product updates and promotional content"})]}),e.jsx(rc,{checked:t.notifications.marketing,onCheckedChange:w=>i("marketing",w)})]})]})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Privacy Settings"]})}),e.jsx(ut,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Profile Visibility"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ze,{variant:t.privacy.profileVisibility==="public"?"default":"outline",size:"sm",onClick:()=>o("profileVisibility","public"),children:[e.jsx(wm,{className:"w-4 h-4 mr-2"}),"Public"]}),e.jsxs(ze,{variant:t.privacy.profileVisibility==="private"?"default":"outline",size:"sm",onClick:()=>o("profileVisibility","private"),children:[e.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Private"]})]})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Show Email Address"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display your email on your public profile"})]}),e.jsx(rc,{checked:t.privacy.showEmail,onCheckedChange:w=>o("showEmail",w)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Show Phone Number"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display your phone number on your public profile"})]}),e.jsx(rc,{checked:t.privacy.showPhone,onCheckedChange:w=>o("showPhone",w)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Allow Direct Messages"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Let other users send you direct messages"})]}),e.jsx(rc,{checked:t.privacy.allowMessages,onCheckedChange:w=>o("allowMessages",w)})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Show Activity Status"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Display when you were last active"})]}),e.jsx(rc,{checked:t.privacy.showActivity,onCheckedChange:w=>o("showActivity",w)})]})]})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Mh,{className:"w-5 h-5"}),"Security Settings"]})}),e.jsx(ut,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Add an extra layer of security to your account"})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[t.security.twoFactor&&e.jsx(Gt,{variant:"secondary",children:"Enabled"}),e.jsx(rc,{checked:t.security.twoFactor,onCheckedChange:w=>l("twoFactor",w)})]})]}),e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Login Alerts"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Get notified of new login attempts"})]}),e.jsx(rc,{checked:t.security.loginAlerts,onCheckedChange:w=>l("loginAlerts",w)})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Session Timeout (minutes)"}),e.jsx(Wt,{type:"number",value:t.security.sessionTimeout,onChange:w=>l("sessionTimeout",parseInt(w.target.value)),className:"w-32"})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ze,{variant:"outline",size:"sm",children:"Change Password"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Last changed 3 months ago"})]})]})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(vp,{className:"w-5 h-5"}),"Account Management"]})}),e.jsx(ut,{className:"space-y-6",children:e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{children:"Export Your Data"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Download a copy of all your data"})]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:p,children:[e.jsx(wc,{className:"w-4 h-4 mr-2"}),"Export Data"]})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{className:"text-destructive",children:"Danger Zone"}),e.jsx("div",{className:"p-4 border border-destructive/20 rounded-lg space-y-3",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"space-y-0.5",children:[e.jsx(ct,{className:"text-destructive",children:"Delete Account"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Permanently delete your account and all data"})]}),e.jsxs(ze,{variant:"destructive",size:"sm",onClick:g,children:[e.jsx(xf,{className:"w-4 h-4 mr-2"}),"Delete Account"]})]})})]})]})})]}),e.jsx("div",{className:"flex justify-end",children:e.jsx(ze,{onClick:a,children:"Save Settings"})})]})]})]})}function LW(){const{profile:n,uploadAvatar:t,deleteAvatar:r}=Io(),[i,o]=M.useState(!1),[l,a]=M.useState(!1),[p,g]=M.useState(null),[w,j]=M.useState(null),S=M.useRef(null),T=()=>n!=null&&n.display_name?n.display_name.split(" ").map(F=>F[0]).join("").toUpperCase().slice(0,2):"U",E=F=>{var ie;const B=(ie=F.target.files)==null?void 0:ie[0];if(!B)return;if(j(null),!["image/jpeg","image/png","image/gif","image/webp"].includes(B.type)){j("Invalid file type. Please upload a JPEG, PNG, GIF, or WebP image.");return}const z=2*1024*1024;if(B.size>z){j("File size must be less than 2MB.");return}const ee=new FileReader;ee.onloadend=()=>{g(ee.result)},ee.readAsDataURL(B),O(B)},O=async F=>{o(!0),j(null);try{const{url:B,error:G}=await t(F);if(G)throw G;uf.success("Avatar uploaded successfully!"),g(null),S.current&&(S.current.value="")}catch(B){j(B.message||"Failed to upload avatar"),uf.error("Failed to upload avatar"),g(null)}finally{o(!1)}},R=async()=>{if(n!=null&&n.avatar_url&&confirm("Are you sure you want to delete your avatar?")){a(!0),j(null);try{const{error:F}=await r();if(F)throw F;uf.success("Avatar deleted successfully")}catch(F){j(F.message||"Failed to delete avatar"),uf.error("Failed to delete avatar")}finally{a(!1)}}};return e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center gap-6",children:[e.jsxs(lf,{className:"h-24 w-24",children:[e.jsx(cf,{src:p||(n==null?void 0:n.avatar_url)||void 0}),e.jsx(hp,{className:"text-2xl",children:i?e.jsx(eo,{className:"h-8 w-8 animate-spin"}):T()})]}),e.jsxs("div",{className:"flex-1 space-y-2",children:[e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{onClick:()=>{var F;return(F=S.current)==null?void 0:F.click()},disabled:i||l,variant:"outline",children:i?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Uploading..."]}):e.jsxs(e.Fragment,{children:[e.jsx(Jd,{className:"mr-2 h-4 w-4"}),"Upload Avatar"]})}),(n==null?void 0:n.avatar_url)&&e.jsx(ze,{onClick:R,disabled:i||l,variant:"outline",className:"text-destructive hover:text-destructive",children:l?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):e.jsxs(e.Fragment,{children:[e.jsx(xf,{className:"mr-2 h-4 w-4"}),"Delete"]})})]}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Recommended: Square image, at least 400x400px. Max size: 2MB."})]}),e.jsx("input",{ref:S,type:"file",accept:"image/jpeg,image/png,image/gif,image/webp",onChange:E,className:"hidden"})]}),w&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:w})})]})}const Ib=8,mm={uppercase:/[A-Z]/,lowercase:/[a-z]/,number:/[0-9]/,specialChar:/[!@#$%^&*()_+\-=\[\]{};':"\\|,.<>\/?]/};function __(n){const t=n.length>=Ib,r=mm.uppercase.test(n),i=mm.lowercase.test(n),o=mm.number.test(n),l=mm.specialChar.test(n),p=[t,r,i,o,l].filter(Boolean).length,g=[];return t||g.push(`At least ${Ib} characters`),r||g.push("One uppercase letter"),i||g.push("One lowercase letter"),o||g.push("One number"),l||g.push("One special character"),{score:Math.min(p,4),feedback:g,hasMinLength:t,hasUpperCase:r,hasLowerCase:i,hasNumber:o,hasSpecialChar:l}}function w_(n){return n<=1?"bg-red-500":n===2?"bg-orange-500":n===3?"bg-yellow-500":"bg-green-500"}function j_(n){return n<=1?"Weak":n===2?"Fair":n===3?"Good":n===4?"Strong":"Very Weak"}const x0=Pt().min(1,"Email is required").email("Invalid email address"),MW=Pt().min(Ib,`Password must be at least ${Ib} characters`).regex(mm.uppercase,"Password must contain at least one uppercase letter").regex(mm.lowercase,"Password must contain at least one lowercase letter").regex(mm.number,"Password must contain at least one number"),f5=MW.regex(mm.specialChar,"Password must contain at least one special character"),DW=on({email:x0,password:f5,confirmPassword:Pt().min(1,"Please confirm your password"),displayName:Pt().min(2,"Name must be at least 2 characters").max(100),role:Zc(["seller","buyer","franchisor","franchisee","advisor","broker","admin"]),acceptTerms:Bo().refine(n=>n===!0,{message:"You must accept the terms and conditions"})}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]});on({email:x0,password:Pt().min(1,"Password is required"),rememberMe:Bo().optional()});const OW=on({email:x0}),zW=on({password:f5,confirmPassword:Pt().min(1,"Please confirm your password")}).refine(n=>n.password===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),FW=on({newEmail:x0,password:Pt().min(1,"Password is required for verification")}),BW=on({currentPassword:Pt().min(1,"Current password is required"),newPassword:f5,confirmPassword:Pt().min(1,"Please confirm your password")}).refine(n=>n.newPassword===n.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}).refine(n=>n.currentPassword!==n.newPassword,{message:"New password must be different from current password",path:["newPassword"]});on({display_name:Pt().min(2,"Name must be at least 2 characters").max(100).optional(),bio:Pt().max(500,"Bio must be less than 500 characters").optional(),phone:Pt().regex(/^[+]?[(]?[0-9]{3}[)]?[-\s.]?[0-9]{3}[-\s.]?[0-9]{4,6}$/,"Invalid phone number").optional().or(Zv("")),location:Pt().max(100).optional(),city:Pt().max(100).optional(),state:Pt().max(100).optional(),country:Pt().max(100).optional(),website:Pt().url("Invalid URL").optional().or(Zv("")),linkedin_url:Pt().url("Invalid URL").optional().or(Zv(""))});const UW=on({email:x0,password:Pt().min(1,"Password is required"),confirmation:Pt().min(1,"Please type DELETE to confirm").refine(n=>n==="DELETE",{message:"Please type DELETE in capital letters to confirm"})});function Cy(n){const t={};return n.errors.forEach(r=>{const i=r.path.join(".");t[i]=r.message}),t}function Og(n){if(!n)return"An unknown error occurred";if(n.message){const t=n.message.toLowerCase();return t.includes("invalid login credentials")?"Invalid email or password. Please try again.":t.includes("email not confirmed")?"Please verify your email address before logging in.":t.includes("user already registered")?"An account with this email already exists.":t.includes("password")?"Password is too weak. Please choose a stronger password.":t.includes("rate limit")?"Too many attempts. Please wait a few minutes and try again.":t.includes("network")?"Network error. Please check your connection and try again.":n.message}return"An unexpected error occurred. Please try again."}function qW(){const{profile:n,updateEmail:t}=Io(),[r,i]=M.useState(!1),[o,l]=M.useState(null),[a,p]=M.useState(!1),[g,w]=M.useState({newEmail:"",password:""}),[j,S]=M.useState({}),T=async E=>{E.preventDefault(),l(null),S({}),p(!1);const O=FW.safeParse(g);if(!O.success){S(Cy(O.error));return}if(g.newEmail===(n==null?void 0:n.email)){l("New email is the same as your current email");return}i(!0);try{const{error:R}=await t(g.newEmail);if(R)throw R;p(!0),w({newEmail:"",password:""}),uf.success("Verification email sent! Please check your new email address.")}catch(R){l(Og(R)),uf.error("Failed to update email")}finally{i(!1)}};return a?e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full mx-auto mb-4",children:e.jsx(Rm,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsx(Ht,{className:"text-center",children:"Verification Email Sent"}),e.jsx(Ji,{className:"text-center",children:"Please check your new email address to confirm the change"})]}),e.jsxs(ut,{children:[e.jsxs(bl,{children:[e.jsx(bu,{className:"h-4 w-4"}),e.jsxs(_l,{children:["We've sent a verification link to ",e.jsx("strong",{children:g.newEmail}),". Click the link to confirm your new email address."]})]}),e.jsx(ze,{onClick:()=>p(!1),variant:"outline",className:"w-full mt-4",children:"Back"})]})]}):e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Change Email Address"}),e.jsx(Ji,{children:"Update your email address. You'll need to verify the new email."})]}),e.jsx(ut,{children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:o})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"currentEmail",children:"Current Email"}),e.jsx(Wt,{id:"currentEmail",type:"email",value:(n==null?void 0:n.email)||"",disabled:!0,className:"bg-muted"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"newEmail",children:"New Email"}),e.jsx(Wt,{id:"newEmail",type:"email",required:!0,value:g.newEmail,onChange:E=>w({...g,newEmail:E.target.value}),placeholder:"newemail@example.com",disabled:r,className:j.newEmail?"border-red-500":""}),j.newEmail&&e.jsx("p",{className:"text-sm text-red-500",children:j.newEmail})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"password",children:"Confirm Your Password"}),e.jsx(Wt,{id:"password",type:"password",required:!0,value:g.password,onChange:E=>w({...g,password:E.target.value}),placeholder:"Enter your current password",disabled:r,className:j.password?"border-red-500":""}),j.password&&e.jsx("p",{className:"text-sm text-red-500",children:j.password}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Enter your password to confirm this change"})]}),e.jsxs(ze,{type:"submit",className:"w-full",disabled:r,children:[r&&e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Email"]})]})})]})}function VW(){const{updatePassword:n}=Io(),[t,r]=M.useState(!1),[i,o]=M.useState(null),[l,a]=M.useState(!1),[p,g]=M.useState(!1),[w,j]=M.useState(!1),[S,T]=M.useState(!1),[E,O]=M.useState({currentPassword:"",newPassword:"",confirmPassword:""}),[R,F]=M.useState({}),B=__(E.newPassword),G=async z=>{z.preventDefault(),o(null),F({}),a(!1);const ee=BW.safeParse(E);if(!ee.success){F(Cy(ee.error));return}r(!0);try{const{error:ie}=await n(E.newPassword);if(ie)throw ie;a(!0),O({currentPassword:"",newPassword:"",confirmPassword:""}),uf.success("Password updated successfully!"),setTimeout(()=>a(!1),3e3)}catch(ie){o(Og(ie)),uf.error("Failed to update password")}finally{r(!1)}};return e.jsxs(ot,{children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Change Password"}),e.jsx(Ji,{children:"Update your password to keep your account secure"})]}),e.jsx(ut,{children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[i&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:i})}),l&&e.jsxs(bl,{children:[e.jsx(Rm,{className:"h-4 w-4"}),e.jsx(_l,{children:"Your password has been updated successfully!"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"currentPassword",children:"Current Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"currentPassword",type:p?"text":"password",required:!0,value:E.currentPassword,onChange:z=>O({...E,currentPassword:z.target.value}),placeholder:"Enter your current password",disabled:t,className:R.currentPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>g(!p),disabled:t,children:p?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),R.currentPassword&&e.jsx("p",{className:"text-sm text-red-500",children:R.currentPassword})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"newPassword",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"newPassword",type:w?"text":"password",required:!0,value:E.newPassword,onChange:z=>O({...E,newPassword:z.target.value}),placeholder:"Enter your new password",disabled:t,className:R.newPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>j(!w),disabled:t,children:w?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),R.newPassword&&e.jsx("p",{className:"text-sm text-red-500",children:R.newPassword}),E.newPassword&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Password strength:"}),e.jsx("span",{className:`font-medium ${B.score<=1?"text-red-500":B.score===2?"text-orange-500":B.score===3?"text-yellow-500":"text-green-500"}`,children:j_(B.score)})]}),e.jsx(vo,{value:B.score/4*100,className:"h-2",indicatorClassName:w_(B.score)}),B.feedback.length>0&&e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:B.feedback.map((z,ee)=>e.jsxs("li",{children:[" ",z]},ee))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"confirmPassword",type:S?"text":"password",required:!0,value:E.confirmPassword,onChange:z=>O({...E,confirmPassword:z.target.value}),placeholder:"Confirm your new password",disabled:t,className:R.confirmPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>T(!S),disabled:t,children:S?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),R.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:R.confirmPassword})]}),e.jsxs(ze,{type:"submit",className:"w-full",disabled:t||B.score<3,children:[t&&e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Update Password"]})]})})]})}var $W=Symbol("radix.slottable");function HW(n){const t=({children:r})=>e.jsx(e.Fragment,{children:r});return t.displayName=`${n}.Slottable`,t.__radixId=$W,t}var M6="AlertDialog",[GW]=Du(M6,[ik]),wp=ik(),D6=n=>{const{__scopeAlertDialog:t,...r}=n,i=wp(t);return e.jsx(Rj,{...i,...r,modal:!0})};D6.displayName=M6;var WW="AlertDialogTrigger",O6=M.forwardRef((n,t)=>{const{__scopeAlertDialog:r,...i}=n,o=wp(r);return e.jsx(Ij,{...o,...i,ref:t})});O6.displayName=WW;var YW="AlertDialogPortal",z6=n=>{const{__scopeAlertDialog:t,...r}=n,i=wp(t);return e.jsx(Lj,{...i,...r})};z6.displayName=YW;var ZW="AlertDialogOverlay",F6=M.forwardRef((n,t)=>{const{__scopeAlertDialog:r,...i}=n,o=wp(r);return e.jsx(d0,{...o,...i,ref:t})});F6.displayName=ZW;var Xv="AlertDialogContent",[KW,XW]=GW(Xv),JW=HW("AlertDialogContent"),B6=M.forwardRef((n,t)=>{const{__scopeAlertDialog:r,children:i,...o}=n,l=wp(r),a=M.useRef(null),p=Wn(t,a),g=M.useRef(null);return e.jsx(NU,{contentName:Xv,titleName:U6,docsSlug:"alert-dialog",children:e.jsx(KW,{scope:r,cancelRef:g,children:e.jsxs(h0,{role:"alertdialog",...l,...o,ref:p,onOpenAutoFocus:Dr(o.onOpenAutoFocus,w=>{var j;w.preventDefault(),(j=g.current)==null||j.focus({preventScroll:!0})}),onPointerDownOutside:w=>w.preventDefault(),onInteractOutside:w=>w.preventDefault(),children:[e.jsx(JW,{children:i}),e.jsx(eY,{contentRef:a})]})})})});B6.displayName=Xv;var U6="AlertDialogTitle",q6=M.forwardRef((n,t)=>{const{__scopeAlertDialog:r,...i}=n,o=wp(r);return e.jsx(f0,{...o,...i,ref:t})});q6.displayName=U6;var V6="AlertDialogDescription",$6=M.forwardRef((n,t)=>{const{__scopeAlertDialog:r,...i}=n,o=wp(r);return e.jsx(p0,{...o,...i,ref:t})});$6.displayName=V6;var QW="AlertDialogAction",H6=M.forwardRef((n,t)=>{const{__scopeAlertDialog:r,...i}=n,o=wp(r);return e.jsx(r_,{...o,...i,ref:t})});H6.displayName=QW;var G6="AlertDialogCancel",W6=M.forwardRef((n,t)=>{const{__scopeAlertDialog:r,...i}=n,{cancelRef:o}=XW(G6,r),l=wp(r),a=Wn(t,o);return e.jsx(r_,{...l,...i,ref:a})});W6.displayName=G6;var eY=({contentRef:n})=>{const t=`\`${Xv}\` requires a description for the component to be accessible for screen reader users.

You can add a description to the \`${Xv}\` by passing a \`${V6}\` component as a child, which also benefits sighted users by adding visible context to the dialog.

Alternatively, you can use your own component as a description by assigning it an \`id\` and passing the same value to the \`aria-describedby\` prop in \`${Xv}\`. If the description is confusing or duplicative for sighted users, you can use the \`@radix-ui/react-visually-hidden\` primitive as a wrapper around your description component.

For more information, see https://radix-ui.com/primitives/docs/components/alert-dialog`;return M.useEffect(()=>{var i;document.getElementById((i=n.current)==null?void 0:i.getAttribute("aria-describedby"))||console.warn(t)},[t,n]),null},tY=D6,rY=O6,nY=z6,Y6=F6,Z6=B6,K6=H6,X6=W6,J6=q6,Q6=$6;const iY=tY,sY=rY,aY=nY,eP=M.forwardRef(({className:n,...t},r)=>e.jsx(Y6,{className:er("fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0",n),...t,ref:r}));eP.displayName=Y6.displayName;const tP=M.forwardRef(({className:n,...t},r)=>e.jsxs(aY,{children:[e.jsx(eP,{}),e.jsx(Z6,{ref:r,className:er("fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg",n),...t})]}));tP.displayName=Z6.displayName;const rP=({className:n,...t})=>e.jsx("div",{className:er("flex flex-col space-y-2 text-center sm:text-left",n),...t});rP.displayName="AlertDialogHeader";const nP=({className:n,...t})=>e.jsx("div",{className:er("flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2",n),...t});nP.displayName="AlertDialogFooter";const iP=M.forwardRef(({className:n,...t},r)=>e.jsx(J6,{ref:r,className:er("text-lg font-semibold",n),...t}));iP.displayName=J6.displayName;const sP=M.forwardRef(({className:n,...t},r)=>e.jsx(Q6,{ref:r,className:er("text-sm text-muted-foreground",n),...t}));sP.displayName=Q6.displayName;const aP=M.forwardRef(({className:n,...t},r)=>e.jsx(K6,{ref:r,className:er(lj(),n),...t}));aP.displayName=K6.displayName;const oP=M.forwardRef(({className:n,...t},r)=>e.jsx(X6,{ref:r,className:er(lj({variant:"outline"}),"mt-2 sm:mt-0",n),...t}));oP.displayName=X6.displayName;function oY(){const n=Na(),{profile:t,deleteAccount:r,signOut:i}=Io(),[o,l]=M.useState(!1),[a,p]=M.useState(null),[g,w]=M.useState({email:"",password:"",confirmation:""}),[j,S]=M.useState({}),[T,E]=M.useState(!1),O=async F=>{F.preventDefault(),p(null),S({});const B=UW.safeParse(g);if(!B.success){S(Cy(B.error));return}if(g.email!==(t==null?void 0:t.email)){p("Email does not match your account email");return}E(!0)},R=async()=>{l(!0),p(null);try{const{error:F}=await r();if(F)throw F;uf.success("Account deletion initiated. You will be signed out."),await i(),n("/")}catch(F){p(Og(F)),uf.error("Failed to delete account"),E(!1)}finally{l(!1)}};return e.jsxs(ot,{className:"border-destructive",children:[e.jsxs(Vt,{children:[e.jsx(Ht,{className:"text-destructive",children:"Danger Zone"}),e.jsx(Ji,{children:"Permanently delete your account and all associated data"})]}),e.jsxs(ut,{children:[e.jsxs(bl,{variant:"destructive",className:"mb-4",children:[e.jsx(Xc,{className:"h-4 w-4"}),e.jsxs(_l,{children:[e.jsx("strong",{children:"Warning:"})," This action cannot be undone. This will permanently delete your account, profile, listings, and all associated data."]})]}),e.jsxs("form",{onSubmit:O,className:"space-y-4",children:[a&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:a})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"email",children:"Confirm Your Email"}),e.jsx(Wt,{id:"email",type:"email",required:!0,value:g.email,onChange:F=>w({...g,email:F.target.value}),placeholder:(t==null?void 0:t.email)||"Enter your email",disabled:o,className:j.email?"border-red-500":""}),j.email&&e.jsx("p",{className:"text-sm text-red-500",children:j.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"password",children:"Confirm Your Password"}),e.jsx(Wt,{id:"password",type:"password",required:!0,value:g.password,onChange:F=>w({...g,password:F.target.value}),placeholder:"Enter your password",disabled:o,className:j.password?"border-red-500":""}),j.password&&e.jsx("p",{className:"text-sm text-red-500",children:j.password})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ct,{htmlFor:"confirmation",children:["Type ",e.jsx("strong",{children:"DELETE"})," to confirm"]}),e.jsx(Wt,{id:"confirmation",type:"text",required:!0,value:g.confirmation,onChange:F=>w({...g,confirmation:F.target.value}),placeholder:"DELETE",disabled:o,className:j.confirmation?"border-red-500":""}),j.confirmation&&e.jsx("p",{className:"text-sm text-red-500",children:j.confirmation}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Type the word DELETE in capital letters to proceed"})]}),e.jsxs(iY,{open:T,onOpenChange:E,children:[e.jsx(sY,{asChild:!0,children:e.jsx(ze,{type:"submit",variant:"destructive",className:"w-full",disabled:o,children:o?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting Account..."]}):"Delete My Account"})}),e.jsxs(tP,{children:[e.jsxs(rP,{children:[e.jsx(iP,{children:"Are you absolutely sure?"}),e.jsxs(sP,{children:["This is your final warning. Deleting your account will:",e.jsxs("ul",{className:"list-disc list-inside mt-2 space-y-1",children:[e.jsx("li",{children:"Permanently delete your profile"}),e.jsx("li",{children:"Remove all your listings"}),e.jsx("li",{children:"Delete all your documents"}),e.jsx("li",{children:"Erase all your activity history"})]}),e.jsx("p",{className:"mt-2 font-semibold",children:"This action cannot be reversed."})]})]}),e.jsxs(nP,{children:[e.jsx(oP,{disabled:o,children:"Cancel"}),e.jsx(aP,{onClick:R,disabled:o,className:"bg-destructive text-destructive-foreground hover:bg-destructive/90",children:o?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Deleting..."]}):"Yes, Delete My Account"})]})]})]})]}),e.jsx("div",{className:"mt-4 p-4 bg-muted rounded-lg",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:[e.jsx("strong",{children:"Alternative:"})," If you're having issues with your account or just need a break, consider contacting support instead of deleting your account."]})})]})]})}function lY(){const n=Na();return e.jsxs("div",{className:"container mx-auto px-4 py-8 space-y-8",children:[e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsx(ze,{variant:"ghost",size:"icon",onClick:()=>n("/profile"),children:e.jsx(pd,{className:"w-4 h-4"})}),e.jsxs("div",{children:[e.jsxs("h1",{className:"text-2xl font-bold flex items-center gap-2",children:[e.jsx(Bb,{className:"w-6 h-6"}),"Account Settings"]}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your account preferences and security settings"})]})]}),e.jsxs(_p,{defaultValue:"profile",className:"space-y-6",children:[e.jsxs(Sf,{className:"grid w-full grid-cols-2 md:grid-cols-5",children:[e.jsxs(Di,{value:"profile",children:[e.jsx(vp,{className:"w-4 h-4 mr-2"}),"Profile"]}),e.jsxs(Di,{value:"account",children:[e.jsx(bu,{className:"w-4 h-4 mr-2"}),"Account"]}),e.jsxs(Di,{value:"security",children:[e.jsx(Mh,{className:"w-4 h-4 mr-2"}),"Security"]}),e.jsxs(Di,{value:"notifications",children:[e.jsx(Ih,{className:"w-4 h-4 mr-2"}),"Notifications"]}),e.jsxs(Di,{value:"privacy",children:[e.jsx(bs,{className:"w-4 h-4 mr-2"}),"Privacy"]})]}),e.jsxs(Qi,{value:"profile",className:"space-y-6",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(KA,{className:"w-5 h-5"}),"Profile Picture"]})}),e.jsx(ut,{children:e.jsx(LW,{})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Profile Information"})}),e.jsx(ut,{children:e.jsxs("p",{className:"text-muted-foreground",children:["To edit your profile information (name, bio, role-specific details), go to"," ",e.jsx(ze,{variant:"link",className:"p-0 h-auto",onClick:()=>n("/profile/edit"),children:"Profile Edit"}),"."]})})]})]}),e.jsxs(Qi,{value:"account",className:"space-y-6",children:[e.jsx(qW,{}),e.jsx(Ho,{}),e.jsx(oY,{})]}),e.jsxs(Qi,{value:"security",className:"space-y-6",children:[e.jsx(VW,{}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Additional Security Options"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Two-Factor Authentication"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Add an extra layer of security to your account"}),e.jsx(ze,{variant:"outline",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Active Sessions"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"Manage your active login sessions across devices"}),e.jsx(ze,{variant:"outline",disabled:!0,children:"Coming Soon"})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Login History"}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:"View your recent login activity"}),e.jsx(ze,{variant:"outline",disabled:!0,children:"Coming Soon"})]})]})]})]}),e.jsx(Qi,{value:"notifications",children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ih,{className:"w-5 h-5"}),"Notification Preferences"]})}),e.jsxs(ut,{children:[e.jsx("p",{className:"text-muted-foreground",children:"Notification settings coming soon. You'll be able to customize:"}),e.jsxs("ul",{className:"list-disc list-inside mt-4 space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"Email notifications for inquiries and messages"}),e.jsx("li",{children:"Push notifications for important updates"}),e.jsx("li",{children:"SMS notifications for urgent matters"}),e.jsx("li",{children:"Marketing and promotional communications"})]})]})]})}),e.jsx(Qi,{value:"privacy",children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(bs,{className:"w-5 h-5"}),"Privacy Settings"]})}),e.jsxs(ut,{children:[e.jsx("p",{className:"text-muted-foreground",children:"Privacy settings coming soon. You'll be able to control:"}),e.jsxs("ul",{className:"list-disc list-inside mt-4 space-y-2 text-sm text-muted-foreground",children:[e.jsx("li",{children:"Profile visibility (public, private, or selective)"}),e.jsx("li",{children:"Contact information display preferences"}),e.jsx("li",{children:"Data sharing and analytics preferences"}),e.jsx("li",{children:"Search engine indexing options"})]})]})]})})]})]})}const lP=on({businessName:Pt().min(2,"Business name must be at least 2 characters"),tagline:Pt().optional(),industry:Gi(Pt()).min(1,"Please select at least one industry"),businessType:Zc(["asset_sale","stock_sale","franchise"],{required_error:"Please select a business type"}),country:Pt().min(1,"Country is required"),state:Pt().min(1,"State is required"),city:Pt().min(1,"City is required"),fullAddress:Pt().min(5,"Full address is required"),latitude:Mr().optional(),longitude:Mr().optional(),establishedYear:Mr().min(1800,"Year must be after 1800").max(new Date().getFullYear(),"Year cannot be in the future"),yearsInOperation:Mr().min(0,"Years in operation cannot be negative"),numberOfEmployees:Mr().min(0,"Number of employees cannot be negative"),website:Pt().url("Please enter a valid URL").optional().or(Zv("")),socialLinks:Gi(Pt().url()).optional()}),cP=on({longDescription:Pt().min(150,"Description must be at least 150 characters"),businessModel:Zc(["retail","manufacturing","service","saas","food_beverage","healthcare","education","consulting","e_commerce","other"]),customerProfile:Pt().min(50,"Customer profile must be at least 50 characters"),supplierRelationships:Pt().optional(),leaseDetails:on({type:Zc(["owned","leased","mixed"]),terms:Pt().optional(),monthlyRent:Mr().optional(),leaseExpiry:Pt().optional()}).optional()}),uP=on({askingPrice:Mr().min(1,"Asking price must be greater than 0"),priceBreakdown:on({assets:Mr().min(0),goodwill:Mr().min(0),workingCapital:Mr().min(0)}),revenue:on({year1:Mr().optional(),year2:Mr().optional(),year3:Mr().optional()}).optional(),ebitda:on({year1:Mr().optional(),year2:Mr().optional(),year3:Mr().optional()}).optional(),monthlyCashFlow:Mr().optional(),profitMargins:Mr().min(0).max(100).optional(),financingAvailable:Bo(),financingDetails:Pt().optional()}),dP=on({assetsIncluded:Gi(Zc(["equipment","inventory","intellectual_property","customer_lists","brand","real_estate"])),equipmentDetails:Pt().optional(),inventoryValue:Mr().min(0).optional(),inventorySnapshotDate:Pt().optional()}),hP=on({businessPhotos:Gi(on({id:Pt(),url:Pt(),filename:Pt(),size:Mr(),type:Pt()})).min(1,"At least one business photo is required"),floorPlans:Gi(on({id:Pt(),url:Pt(),filename:Pt(),size:Mr(),type:Pt()})).optional(),videos:Gi(Pt().url()).optional(),documents:Gi(on({id:Pt(),url:Pt(),filename:Pt(),size:Mr(),type:Pt(),documentType:Zc(["financial","legal","operational","other"]),confidentiality:Zc(["public","nda_required","restricted"])})).optional()}),fP=on({sellerDisplayName:Pt().min(2,"Display name must be at least 2 characters"),contactPhone:Pt().regex(/^\+?[\d\s\-\(\)]+$/,"Please enter a valid phone number"),contactEmail:Pt().email("Please enter a valid email address"),preferredContactMethod:Zc(["phone","email","platform"]),enablePublicContact:Bo(),verificationConsent:Bo().refine(n=>n===!0,{message:"You must confirm the accuracy of the information"})}),pP=on({visibility:Zc(["public","private","link_only"]),featuredListing:Bo(),promotionPackage:Zc(["none","basic","premium"]).optional()}),cY=on({overview:lP,description:cP,financials:uP,assets:dP,media:hP,contact:fP,publish:pP}),uY=[{value:"technology",label:"Technology & Software"},{value:"retail",label:"Retail & E-commerce"},{value:"food_beverage",label:"Food & Beverage"},{value:"healthcare",label:"Healthcare & Medical"},{value:"manufacturing",label:"Manufacturing"},{value:"construction",label:"Construction & Real Estate"},{value:"automotive",label:"Automotive"},{value:"education",label:"Education & Training"},{value:"finance",label:"Financial Services"},{value:"consulting",label:"Consulting & Professional Services"},{value:"hospitality",label:"Hospitality & Tourism"},{value:"transportation",label:"Transportation & Logistics"},{value:"agriculture",label:"Agriculture & Farming"},{value:"energy",label:"Energy & Utilities"},{value:"media",label:"Media & Entertainment"},{value:"beauty",label:"Beauty & Wellness"},{value:"fitness",label:"Fitness & Sports"},{value:"cleaning",label:"Cleaning Services"},{value:"security",label:"Security Services"},{value:"other",label:"Other"}],dY=[{value:"retail",label:"Retail Store"},{value:"manufacturing",label:"Manufacturing"},{value:"service",label:"Service Business"},{value:"saas",label:"Software as a Service"},{value:"food_beverage",label:"Food & Beverage"},{value:"healthcare",label:"Healthcare"},{value:"education",label:"Education"},{value:"consulting",label:"Consulting"},{value:"e_commerce",label:"E-commerce"},{value:"other",label:"Other"}];function E4({accept:n="image/*",maxFiles:t=10,maxSize:r=5*1024*1024,files:i=[],onFilesChange:o,onUpload:l,allowReorder:a=!0,showPreview:p=!0,className:g,label:w,description:j,required:S=!1,error:T}){const[E,O]=M.useState(!1),[R,F]=M.useState([]),B=M.useCallback(_e=>{_e.preventDefault(),O(!0)},[]),G=M.useCallback(_e=>{_e.preventDefault(),O(!1)},[]),z=M.useCallback(async _e=>{_e.preventDefault(),O(!1);const re=Array.from(_e.dataTransfer.files);await ie(re)},[i,t,r,l,o]),ee=M.useCallback(async _e=>{const re=Array.from(_e.target.files||[]);await ie(re)},[i,t,r,l,o]),ie=async _e=>{if(i.length+_e.length>t){alert(`Maximum ${t} files allowed`);return}const re=_e.filter(ye=>ye.size>r?(alert(`File ${ye.name} is too large. Maximum size is ${J(r)}`),!1):!0);if(re.length===0)return;const ce=re.map(async ye=>{const Fe=`temp-${Date.now()}-${Math.random()}`;F(Q=>[...Q,Fe]);try{return l?await l(ye):{id:Fe,url:URL.createObjectURL(ye),filename:ye.name,size:ye.size,type:ye.type,preview:ye.type.startsWith("image/")?URL.createObjectURL(ye):void 0}}catch(Q){return console.error("Upload failed:",Q),alert(`Failed to upload ${ye.name}`),null}finally{F(Q=>Q.filter(pe=>pe!==Fe))}}),fe=(await Promise.all(ce)).filter(Boolean);fe.length>0&&(o==null||o([...i,...fe]))},ge=_e=>{const re=i.filter(ce=>ce.id!==_e);o==null||o(re)},K=(_e,re)=>{if(!a)return;const ce=[...i],[fe]=ce.splice(_e,1);ce.splice(re,0,fe),o==null||o(ce)},J=_e=>{if(_e===0)return"0 Bytes";const re=1024,ce=["Bytes","KB","MB","GB"],fe=Math.floor(Math.log(_e)/Math.log(re));return parseFloat((_e/Math.pow(re,fe)).toFixed(2))+" "+ce[fe]},Se=_e=>_e.startsWith("image/")?e.jsx(KA,{className:"w-4 h-4"}):_e.startsWith("video/")?e.jsx(F8,{className:"w-4 h-4"}):e.jsx(Ys,{className:"w-4 h-4"});return e.jsxs("div",{className:er("space-y-4",g),children:[w&&e.jsxs("div",{className:"space-y-1",children:[e.jsxs("label",{className:"text-sm font-medium",children:[w,S&&e.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),j&&e.jsx("p",{className:"text-sm text-muted-foreground",children:j})]}),e.jsxs("div",{className:er("border-2 border-dashed rounded-lg p-8 text-center transition-colors",E?"border-primary bg-primary/5":"border-muted-foreground/25",T?"border-red-500":"",i.length>=t?"opacity-50 pointer-events-none":"cursor-pointer hover:border-primary/50"),onDragOver:B,onDragLeave:G,onDrop:z,onClick:()=>{var _e;i.length<t&&((_e=document.getElementById(`file-input-${w}`))==null||_e.click())},children:[e.jsx(Jd,{className:"w-8 h-8 mx-auto mb-4 text-muted-foreground"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx("p",{className:"text-sm font-medium",children:i.length>=t?`Maximum ${t} files reached`:"Drop files here or click to browse"}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:["Maximum file size: ",J(r)," ",t-i.length," files remaining"]})]}),e.jsx("input",{id:`file-input-${w}`,type:"file",accept:n,multiple:t>1,onChange:ee,className:"hidden",disabled:i.length>=t})]}),T&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-red-600",children:[e.jsx(jc,{className:"w-4 h-4"}),T]}),i.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("h4",{className:"text-sm font-medium",children:["Uploaded Files (",i.length,"/",t,")"]}),a&&i.length>1&&e.jsx("p",{className:"text-xs text-muted-foreground",children:"Drag to reorder"})]}),e.jsx("div",{className:er("grid gap-3",p?"grid-cols-1 sm:grid-cols-2 lg:grid-cols-3":"grid-cols-1"),children:i.map((_e,re)=>e.jsx(ot,{className:"overflow-hidden",children:e.jsxs(ut,{className:"p-3",children:[e.jsxs("div",{className:"flex items-start gap-3",children:[p&&_e.preview?e.jsx("img",{src:_e.preview,alt:_e.filename,className:"w-12 h-12 object-cover rounded flex-shrink-0"}):e.jsx("div",{className:"w-12 h-12 bg-muted rounded flex items-center justify-center flex-shrink-0",children:Se(_e.type)}),e.jsxs("div",{className:"flex-1 min-w-0",children:[e.jsx("p",{className:"text-sm font-medium truncate",children:_e.filename}),e.jsx("p",{className:"text-xs text-muted-foreground",children:J(_e.size)}),e.jsx(Gt,{variant:"secondary",className:"text-xs mt-1",children:_e.type.split("/")[0]})]}),e.jsx(ze,{variant:"ghost",size:"sm",onClick:()=>ge(_e.id),className:"flex-shrink-0 h-8 w-8 p-0",children:e.jsx(Gc,{className:"w-4 h-4"})})]}),a&&i.length>1&&e.jsxs("div",{className:"flex gap-1 mt-2",children:[e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>K(re,Math.max(0,re-1)),disabled:re===0,className:"h-6 px-2 text-xs",children:""}),e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>K(re,Math.min(i.length-1,re+1)),disabled:re===i.length-1,className:"h-6 px-2 text-xs",children:""})]})]})},_e.id))})]}),R.length>0&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("p",{className:"text-sm font-medium",children:["Uploading ",R.length," files..."]}),e.jsx("div",{className:"space-y-1",children:R.map(_e=>e.jsx("div",{className:"h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary animate-pulse"})},_e))})]})]})}function mP({isOpen:n,onClose:t,onAccept:r,businessName:i,sellerName:o,documentsCount:l,documentTypes:a=[],listingType:p="business",franchiseSpecificInfo:g,className:w}){const[j,S]=M.useState("overview"),[T,E]=M.useState({fullName:"",email:"",phone:"",company:"",purpose:"",investmentCapacity:"",experienceLevel:"",timeframe:"",agreedToTerms:!1,agreedToConfidentiality:!1,agreedToFranchiseTerms:!1,signature:""}),[O,R]=M.useState(!1),F=(K,J)=>{E(Se=>({...Se,[K]:J}))},B=async()=>{R(!0);try{await new Promise(K=>setTimeout(K,2e3)),r(T),S("confirmation")}catch(K){console.error("NDA submission failed:",K)}finally{R(!1)}},G=()=>{const K=T.fullName.trim()!==""&&T.email.trim()!==""&&T.phone.trim()!==""&&T.purpose.trim()!==""&&T.agreedToTerms&&T.agreedToConfidentiality&&T.signature.trim()!=="";return p==="franchise"?K&&T.agreedToFranchiseTerms:K},z=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx(bs,{className:"w-16 h-16 mx-auto mb-4 text-blue-600"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Non-Disclosure Agreement Required"}),e.jsxs("p",{className:"text-muted-foreground",children:["To access sensitive"," ",p==="franchise"?"franchise":"financial"," information for ",e.jsx("strong",{children:i}),", you must sign a Non-Disclosure Agreement (NDA)."]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ot,{children:e.jsxs(ut,{className:"p-4 text-center",children:[e.jsx(Ys,{className:"w-8 h-8 mx-auto mb-2 text-green-600"}),e.jsx("h4",{className:"font-medium",children:"Protected Documents"}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:[l," ",p==="franchise"?"franchise":"financial"," ","documents"]}),a.length>0&&e.jsxs("div",{className:"mt-2",children:[a.slice(0,2).map((K,J)=>e.jsxs("div",{className:"text-xs text-muted-foreground",children:[" ",K]},J)),a.length>2&&e.jsxs("div",{className:"text-xs text-muted-foreground",children:[" +",a.length-2," more"]})]})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4 text-center",children:[e.jsx(bs,{className:"w-8 h-8 mx-auto mb-2 text-blue-600"}),e.jsx("h4",{className:"font-medium",children:"Legal Protection"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Legally binding agreement"})]})}),e.jsx(ot,{children:e.jsxs(ut,{className:"p-4 text-center",children:[e.jsx(Nn,{className:"w-8 h-8 mx-auto mb-2 text-purple-600"}),e.jsx("h4",{className:"font-medium",children:"Instant Access"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Immediate document access"})]})})]}),e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4",children:e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx(Xc,{className:"w-5 h-5 text-amber-600 flex-shrink-0 mt-0.5"}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium text-amber-800",children:"Important Notice"}),e.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["By signing this NDA, you agree to keep all"," ",p==="franchise"?"franchise and business":"financial and business","information confidential. Violation of this agreement may result in legal action."]})]})]})}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ze,{variant:"outline",onClick:t,className:"flex-1",children:"Cancel"}),e.jsx(ze,{onClick:()=>S("form"),className:"flex-1",children:"Continue to NDA"})]})]}),ee=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"Your Information"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please provide your details to proceed with the NDA."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"fullName",children:"Full Name *"}),e.jsx(Wt,{id:"fullName",value:T.fullName,onChange:K=>F("fullName",K.target.value),placeholder:"Enter your full legal name",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"email",children:"Email Address *"}),e.jsx(Wt,{id:"email",type:"email",value:T.email,onChange:K=>F("email",K.target.value),placeholder:"your.email@company.com",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"phone",children:"Phone Number *"}),e.jsx(Wt,{id:"phone",value:T.phone,onChange:K=>F("phone",K.target.value),placeholder:"+91 98765 43210",required:!0})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"company",children:"Company/Organization"}),e.jsx(Wt,{id:"company",value:T.company,onChange:K=>F("company",K.target.value),placeholder:"Your company name (optional)"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"purpose",children:"Purpose of Information Request *"}),e.jsx(Fl,{id:"purpose",value:T.purpose,onChange:K=>F("purpose",K.target.value),placeholder:`Briefly describe why you need access to this ${p==="franchise"?"franchise":"financial"} information...`,rows:3,required:!0})]}),p==="franchise"&&e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"investmentCapacity",children:"Investment Capacity"}),e.jsxs("select",{id:"investmentCapacity",value:T.investmentCapacity,onChange:K=>F("investmentCapacity",K.target.value),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Select range"}),e.jsx("option",{value:"under-10L",children:"Under 10 Lakhs"}),e.jsx("option",{value:"10L-25L",children:"10-25 Lakhs"}),e.jsx("option",{value:"25L-50L",children:"25-50 Lakhs"}),e.jsx("option",{value:"50L-1Cr",children:"50 Lakhs - 1 Crore"}),e.jsx("option",{value:"1Cr-plus",children:"1 Crore+"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"experienceLevel",children:"Business Experience"}),e.jsxs("select",{id:"experienceLevel",value:T.experienceLevel,onChange:K=>F("experienceLevel",K.target.value),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Select experience"}),e.jsx("option",{value:"first-time",children:"First-time entrepreneur"}),e.jsx("option",{value:"some-experience",children:"Some business experience"}),e.jsx("option",{value:"experienced",children:"Experienced business owner"}),e.jsx("option",{value:"multi-unit",children:"Multi-unit operator"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"timeframe",children:"Investment Timeframe"}),e.jsxs("select",{id:"timeframe",value:T.timeframe,onChange:K=>F("timeframe",K.target.value),className:"w-full p-2 border rounded-md",children:[e.jsx("option",{value:"",children:"Select timeframe"}),e.jsx("option",{value:"immediate",children:"Ready to invest immediately"}),e.jsx("option",{value:"3-months",children:"Within 3 months"}),e.jsx("option",{value:"6-months",children:"Within 6 months"}),e.jsx("option",{value:"1-year",children:"Within 1 year"}),e.jsx("option",{value:"exploring",children:"Just exploring options"})]})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ze,{variant:"outline",onClick:()=>S("overview"),children:"Back"}),e.jsx(ze,{onClick:()=>S("terms"),disabled:!T.fullName||!T.email||!T.phone||!T.purpose,children:"Review Terms"})]})]}),ie=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-semibold mb-2",children:"NDA Terms & Conditions"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Please review and accept the following terms to proceed."})]}),e.jsxs("div",{className:"max-h-64 overflow-y-auto border rounded-lg p-4 bg-muted/30 text-sm space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"1. Confidential Information"}),e.jsxs("p",{children:["All"," ",p==="franchise"?"franchise disclosure documents, territory data, financial performance data, training materials, operations manuals,":"financial data,"," ","business plans, customer lists, and proprietary information related to"," ",i," shall be considered confidential."]}),e.jsx("h4",{className:"font-medium",children:"2. Non-Disclosure Obligations"}),e.jsxs("p",{children:["You agree not to disclose, publish, or communicate any confidential information to third parties without written consent from ",o,"."]}),e.jsx("h4",{className:"font-medium",children:"3. Use Restrictions"}),e.jsxs("p",{children:["Confidential information may only be used for evaluating the potential",p==="franchise"?"franchise investment in":"acquisition of"," ",i," and for no other purpose."]}),p==="franchise"&&g&&e.jsxs(e.Fragment,{children:[e.jsx("h4",{className:"font-medium",children:"4. Franchise-Specific Terms"}),e.jsxs("p",{children:["You acknowledge that franchise information includes sensitive data about:",g.territoryInfo&&" territory performance,",g.franchiseePerformance&&" existing franchisee performance,",g.royaltyStructure&&" proprietary royalty structures,",g.trainingMaterials&&" training and operational materials,","and other franchise system confidential information."]})]}),e.jsx("h4",{className:"font-medium",children:"4. Return of Information"}),e.jsx("p",{children:"Upon request or termination of discussions, you agree to return or destroy all confidential materials and documents."}),e.jsx("h4",{className:"font-medium",children:"5. Legal Remedies"}),e.jsx("p",{children:"Breach of this agreement may result in irreparable harm, and the disclosing party may seek injunctive relief and monetary damages."})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ss,{id:"terms",checked:T.agreedToTerms,onCheckedChange:K=>F("agreedToTerms",!!K)}),e.jsx(ct,{htmlFor:"terms",className:"text-sm leading-relaxed",children:"I have read and agree to the terms and conditions of this Non-Disclosure Agreement"})]}),e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ss,{id:"confidentiality",checked:T.agreedToConfidentiality,onCheckedChange:K=>F("agreedToConfidentiality",!!K)}),e.jsx(ct,{htmlFor:"confidentiality",className:"text-sm leading-relaxed",children:"I understand that I am legally bound to maintain confidentiality of all information disclosed to me"})]}),p==="franchise"&&e.jsxs("div",{className:"flex items-start space-x-2",children:[e.jsx(ss,{id:"franchiseTerms",checked:T.agreedToFranchiseTerms,onCheckedChange:K=>F("agreedToFranchiseTerms",!!K)}),e.jsx(ct,{htmlFor:"franchiseTerms",className:"text-sm leading-relaxed",children:"I acknowledge that I am a qualified potential franchisee and will use this information solely for franchise evaluation purposes"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"signature",children:"Digital Signature *"}),e.jsx(Wt,{id:"signature",value:T.signature,onChange:K=>F("signature",K.target.value),placeholder:"Type your full name as digital signature",required:!0}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"By typing your name, you are providing a legally binding digital signature"})]})]}),e.jsxs("div",{className:"flex gap-3",children:[e.jsx(ze,{variant:"outline",onClick:()=>S("form"),children:"Back"}),e.jsx(ze,{onClick:B,disabled:!G()||O,children:O?"Processing...":"Sign NDA & Access Documents"})]})]}),ge=()=>e.jsxs("div",{className:"space-y-6 text-center",children:[e.jsx(Nn,{className:"w-16 h-16 mx-auto text-green-600"}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"NDA Signed Successfully!"}),e.jsxs("p",{className:"text-muted-foreground",children:["You now have access to the"," ",p==="franchise"?"franchise disclosure":"financial"," ","documents for ",i,"."]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{className:"text-lg",children:"Access Details"})}),e.jsxs(ut,{className:"space-y-2 text-sm",children:[e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Agreement Date:"}),e.jsx("span",{children:new Date().toLocaleDateString()})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Documents Available:"}),e.jsxs("span",{children:[l," files"]})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsx("span",{children:"Access Expires:"}),e.jsx("span",{children:new Date(Date.now()+720*60*60*1e3).toLocaleDateString()})]})]})]}),e.jsx(ze,{onClick:t,className:"w-full",children:"Continue to Documents"})]});return e.jsx(Mg,{open:n,onOpenChange:t,children:e.jsxs(Om,{className:"max-w-2xl max-h-[90vh] overflow-y-auto",children:[e.jsxs(zm,{children:[e.jsxs(Fm,{children:[j==="overview"&&"Non-Disclosure Agreement",j==="form"&&"NDA Information Form",j==="terms"&&"Review & Sign NDA",j==="confirmation"&&"NDA Confirmation"]}),e.jsxs(v0,{children:[j==="overview"&&"Secure access to confidential business information",j==="form"&&"Provide your information for the NDA",j==="terms"&&"Review terms and provide digital signature",j==="confirmation"&&"Your NDA has been processed successfully"]})]}),j==="overview"&&z(),j==="form"&&ee(),j==="terms"&&ie(),j==="confirmation"&&ge()]})})}function gP({businessData:n={},onApplySuggestion:t,className:r}){const[i,o]=M.useState(!1),[l,a]=M.useState([]),[p,g]=M.useState("suggestions"),[w,j]=M.useState(""),[S,T]=M.useState(null),E=async()=>{var B,G,z;o(!0),a([]);try{const ee=[];if(n.revenue||n.employees){const ge=await jg.generateValuation({revenue:n.revenue,industry:(B=n.industry)==null?void 0:B[0],location:n.location,yearEstablished:2018});ee.push({type:"valuation",title:"AI Business Valuation",content:ge.substring(0,300)+"...",confidence:85,action:"View Full Analysis"})}if(n.industry){const ge=await jg.generateMarketAnalysis({industry:((G=n.industry)==null?void 0:G[0])||"general",location:n.location||"India",businessType:"for sale"});ee.push({type:"comparable",title:"Market Analysis",content:ge.substring(0,250)+"...",confidence:78,action:"View Full Report"})}const ie=await jg.generateDueDiligenceChecklist({industry:(z=n.industry)==null?void 0:z[0],businessType:"acquisition",transactionSize:n.revenue});ee.push({type:"improvement",title:"Due Diligence Checklist",content:ie.substring(0,250)+"...",confidence:92,action:"View Checklist"}),a(ee)}catch(ee){console.error("AI Suggestion Error:",ee),a([{type:"improvement",title:"AI Service Unavailable",content:`Unable to generate AI suggestions: ${ee.message}. Please check your API key configuration or try again later.`,confidence:0}])}finally{o(!1)}},O=async(B,G)=>{try{await navigator.clipboard.writeText(B),T(G),setTimeout(()=>T(null),2e3)}catch(z){console.error("Failed to copy:",z)}},R=B=>B>=85?"text-green-600 bg-green-100":B>=70?"text-blue-600 bg-blue-100":"text-orange-600 bg-orange-100",F=B=>{switch(B){case"valuation":return e.jsx(yf,{className:"w-4 h-4"});case"description":return e.jsx(Ys,{className:"w-4 h-4"});case"comparable":return e.jsx(na,{className:"w-4 h-4"});case"improvement":return e.jsx(nb,{className:"w-4 h-4"});default:return e.jsx(hd,{className:"w-4 h-4"})}};return e.jsxs(ot,{className:er("w-full",r),children:[e.jsxs(Vt,{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(hd,{className:"w-5 h-5 text-purple-600"}),"AI Assistant"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{variant:p==="suggestions"?"default":"outline",size:"sm",onClick:()=>g("suggestions"),children:"Suggestions"}),e.jsx(ze,{variant:p==="chat"?"default":"outline",size:"sm",onClick:()=>g("chat"),children:"Chat"})]})]}),e.jsxs(ut,{className:"space-y-4",children:[p==="suggestions"&&e.jsxs(e.Fragment,{children:[e.jsx(ze,{onClick:E,disabled:i,className:"w-full",children:i?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"w-4 h-4 mr-2 animate-spin"}),"Analyzing Your Business..."]}):e.jsxs(e.Fragment,{children:[e.jsx(hd,{className:"w-4 h-4 mr-2"}),"Get AI Suggestions"]})}),Object.keys(n).length>0&&e.jsxs("div",{className:"p-3 bg-muted/50 rounded-lg text-sm",children:[e.jsx("h4",{className:"font-medium mb-2",children:"Analysis Context:"}),e.jsxs("div",{className:"space-y-1 text-muted-foreground",children:[n.name&&e.jsxs("p",{children:["Business: ",n.name]}),n.industry&&e.jsxs("p",{children:["Industry: ",n.industry.join(", ")]}),n.location&&e.jsxs("p",{children:["Location: ",n.location]}),n.revenue&&e.jsxs("p",{children:["Revenue: ",n.revenue.toLocaleString()]})]})]}),l.length>0&&e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-medium",children:"AI Recommendations"}),l.map((B,G)=>e.jsx(ot,{className:"border-l-4 border-l-purple-500",children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-2",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[F(B.type),e.jsx("h5",{className:"font-medium",children:B.title})]}),e.jsxs(Gt,{variant:"secondary",className:er("text-xs",R(B.confidence)),children:[B.confidence,"% confidence"]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3 leading-relaxed",children:B.content}),e.jsxs("div",{className:"flex gap-2",children:[B.action&&e.jsx(ze,{size:"sm",onClick:()=>t==null?void 0:t(B),children:B.action}),e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>O(B.content,`${G}`),children:S===`${G}`?e.jsx(Rm,{className:"w-3 h-3"}):e.jsx(HD,{className:"w-3 h-3"})})]})]})},G))]})]}),p==="chat"&&e.jsxs("div",{className:"space-y-4",children:[e.jsx("div",{className:"h-64 border rounded-lg p-3 bg-muted/30 overflow-y-auto",children:e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-start gap-2",children:[e.jsx("div",{className:"w-6 h-6 bg-purple-100 rounded-full flex items-center justify-center flex-shrink-0",children:e.jsx(hd,{className:"w-3 h-3 text-purple-600"})}),e.jsx("div",{className:"bg-white rounded-lg p-3 text-sm",children:e.jsx("p",{children:"Hi! I'm your AI assistant. I can help you with business valuation, description writing, market analysis, and listing optimization. What would you like to know?"})})]}),e.jsx("div",{className:"text-center text-xs text-muted-foreground py-4",children:"Start a conversation by typing below..."})]})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Fl,{placeholder:"Ask me about pricing, market trends, or how to improve your listing...",value:w,onChange:B=>j(B.target.value),rows:2,className:"resize-none"}),e.jsx(ze,{onClick:()=>{console.log("Chat message:",w),j("")},disabled:!w.trim(),children:"Send"})]}),e.jsx("div",{className:"text-xs text-muted-foreground",children:` Try asking: "What's my business worth?", "How can I improve my listing?", "Show me comparable sales"`})]})]})]})}const up=[{id:"overview",title:"Business Overview",description:"Basic information about your business",icon:e.jsx(Ys,{className:"w-4 h-4"}),schema:lP,required:!0},{id:"description",title:"Description & Operations",description:"Detailed business description and operations",icon:e.jsx(Ys,{className:"w-4 h-4"}),schema:cP,required:!0},{id:"financials",title:"Financials",description:"Financial information and pricing",icon:e.jsx(yf,{className:"w-4 h-4"}),schema:uP,required:!0},{id:"assets",title:"Assets & Inventory",description:"Business assets and inventory details",icon:e.jsx(Ys,{className:"w-4 h-4"}),schema:dP,required:!1},{id:"media",title:"Media & Documents",description:"Photos, videos, and documents",icon:e.jsx(jD,{className:"w-4 h-4"}),schema:hP,required:!0},{id:"contact",title:"Contact & Verification",description:"Contact information and verification",icon:e.jsx(vp,{className:"w-4 h-4"}),schema:fP,required:!0},{id:"publish",title:"Preview & Publish",description:"Review and publish your listing",icon:e.jsx(Ua,{className:"w-4 h-4"}),schema:pP,required:!0}];function hY({initialData:n={},onSave:t,onSubmit:r,onPreview:i,className:o}){var Ue,Ke,Re,te;const[l,a]=M.useState(0),[p,g]=M.useState(new Set),[w,j]=M.useState(n),[S,T]=M.useState(!1),[E,O]=M.useState(!1),[R,F]=M.useState(!1),B=up[l],G=(l+1)/up.length*100,z=u5({resolver:d5(B.schema),defaultValues:w[B.id]||{},mode:"onChange"});M.useEffect(()=>{const ue=setTimeout(()=>{Object.keys(z.formState.dirtyFields).length>0&&ee()},3e3);return()=>clearTimeout(ue)},[z.formState.dirtyFields]);const ee=async()=>{T(!0);const ue=z.getValues(),Ne={...w,[B.id]:ue};j(Ne),t==null||t(Ne,!0),setTimeout(()=>T(!1),1e3)},ie=async()=>{if(await z.trigger()){const Ne=z.getValues(),Me={...w,[B.id]:Ne};return j(Me),g(We=>new Set([...We,l])),!0}return!1},ge=async()=>{await ie()&&l<up.length-1&&(a(l+1),z.reset(w[up[l+1].id]||{}))},K=()=>{l>0&&(a(l-1),z.reset(w[up[l-1].id]||{}))},J=ue=>{(ue<=l||p.has(ue))&&(a(ue),z.reset(w[up[ue].id]||{}))},Se=async()=>{if(await ie())try{const Ne=cY.parse(w);r==null||r(Ne)}catch(Ne){console.error("Validation error:",Ne)}},_e=async()=>{await ie(),i==null||i(w)},re=()=>{switch(B.id){case"overview":return ce();case"description":return fe();case"financials":return ye();case"assets":return Fe();case"media":return Q();case"contact":return pe();case"publish":return me();default:return null}},ce=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"businessName",children:"Business Name *"}),e.jsx(Wt,{id:"businessName",...z.register("businessName"),placeholder:"Enter your business name"}),z.formState.errors.businessName&&e.jsx("p",{className:"text-sm text-red-600",children:z.formState.errors.businessName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"tagline",children:"Tagline"}),e.jsx(Wt,{id:"tagline",...z.register("tagline"),placeholder:"Brief tagline for your business"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Industry *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:uY.slice(0,12).map(ue=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:ue.value,...z.register("industry"),value:ue.value}),e.jsx(ct,{htmlFor:ue.value,className:"text-sm",children:ue.label})]},ue.value))})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"businessType",children:"Business Type *"}),e.jsxs(ys,{...z.register("businessType"),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select type"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"asset_sale",children:"Asset Sale"}),e.jsx(pr,{value:"stock_sale",children:"Stock Sale"}),e.jsx(pr,{value:"franchise",children:"Franchise"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"establishedYear",children:"Established Year *"}),e.jsx(Wt,{id:"establishedYear",type:"number",...z.register("establishedYear",{valueAsNumber:!0}),placeholder:"2020"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"numberOfEmployees",children:"Number of Employees *"}),e.jsx(Wt,{id:"numberOfEmployees",type:"number",...z.register("numberOfEmployees",{valueAsNumber:!0}),placeholder:"10"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"fullAddress",children:"Business Address *"}),e.jsx(Fl,{id:"fullAddress",...z.register("fullAddress"),placeholder:"Enter complete business address",rows:3}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Ja,{className:"w-4 h-4"}),e.jsx("span",{children:"We'll use this to show your business location on the map"})]})]})]}),fe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"longDescription",children:"Business Description *"}),e.jsx(Fl,{id:"longDescription",...z.register("longDescription"),placeholder:"Provide a detailed description of your business, its operations, and what makes it unique...",rows:6}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Minimum 150 characters. Be specific about your business model, target customers, and competitive advantages."})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"businessModel",children:"Business Model *"}),e.jsxs(ys,{...z.register("businessModel"),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select business model"})}),e.jsx(os,{children:dY.map(ue=>e.jsx(pr,{value:ue.value,children:ue.label},ue.value))})]})]})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"customerProfile",children:"Customer Profile & Demographics *"}),e.jsx(Fl,{id:"customerProfile",...z.register("customerProfile"),placeholder:"Describe your typical customers, their demographics, and buying patterns...",rows:4})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"supplierRelationships",children:"Supplier Relationships"}),e.jsx(Fl,{id:"supplierRelationships",...z.register("supplierRelationships"),placeholder:"Describe key supplier relationships, contracts, and dependencies...",rows:3})]})]}),ye=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Financial Information"}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>F(!R),children:[e.jsx(hd,{className:"w-4 h-4 mr-2"}),"AI Valuation Help"]})]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"askingPrice",children:"Asking Price () *"}),e.jsx(Wt,{id:"askingPrice",type:"number",...z.register("askingPrice",{valueAsNumber:!0}),placeholder:"2500000"})]})}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Price Breakdown"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"assets",children:"Assets ()"}),e.jsx(Wt,{id:"assets",type:"number",...z.register("priceBreakdown.assets",{valueAsNumber:!0}),placeholder:"800000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"goodwill",children:"Goodwill ()"}),e.jsx(Wt,{id:"goodwill",type:"number",...z.register("priceBreakdown.goodwill",{valueAsNumber:!0}),placeholder:"1200000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"workingCapital",children:"Working Capital ()"}),e.jsx(Wt,{id:"workingCapital",type:"number",...z.register("priceBreakdown.workingCapital",{valueAsNumber:!0}),placeholder:"500000"})]})]})]}),e.jsxs("div",{className:"p-4 bg-amber-50 border border-amber-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(yf,{className:"w-4 h-4 text-amber-600"}),e.jsx("span",{className:"font-medium text-amber-800",children:"NDA Protected Information"})]}),e.jsx("p",{className:"text-sm text-amber-700",children:"Financial details will be protected by NDA and only shown to verified buyers who sign confidentiality agreements."})]}),R&&e.jsx(gP,{businessData:{name:z.watch("businessName"),industry:z.watch("industry"),location:z.watch("city")},onApplySuggestion:ue=>{console.log("Applied AI suggestion:",ue)}})]}),Fe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h3",{className:"text-lg font-semibold",children:"Assets Included in Sale"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-3",children:[{value:"equipment",label:"Equipment"},{value:"inventory",label:"Inventory"},{value:"intellectual_property",label:"Intellectual Property"},{value:"customer_lists",label:"Customer Lists"},{value:"brand",label:"Brand & Trademarks"},{value:"real_estate",label:"Real Estate"}].map(ue=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:ue.value,...z.register("assetsIncluded"),value:ue.value}),e.jsx(ct,{htmlFor:ue.value,className:"text-sm",children:ue.label})]},ue.value))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"equipmentDetails",children:"Equipment Details"}),e.jsx(Fl,{id:"equipmentDetails",...z.register("equipmentDetails"),placeholder:"List major equipment, machinery, and their condition...",rows:4})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"inventoryValue",children:"Inventory Value ()"}),e.jsx(Wt,{id:"inventoryValue",type:"number",...z.register("inventoryValue",{valueAsNumber:!0}),placeholder:"150000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"inventorySnapshotDate",children:"Inventory Snapshot Date"}),e.jsx(Wt,{id:"inventorySnapshotDate",type:"date",...z.register("inventorySnapshotDate")})]})]})]}),Q=()=>{var ue,Ne;return e.jsxs("div",{className:"space-y-6",children:[e.jsx(E4,{accept:"image/*",maxFiles:10,files:((ue=w.media)==null?void 0:ue.businessPhotos)||[],onFilesChange:Me=>{const We={...w,media:{...w.media,businessPhotos:Me}};j(We)},label:"Business Photos",description:"Upload high-quality photos of your business. First photo will be the main image.",required:!0}),e.jsx(E4,{accept:".pdf,.doc,.docx,.xls,.xlsx",maxFiles:20,files:((Ne=w.media)==null?void 0:Ne.documents)||[],onFilesChange:Me=>{const We={...w,media:{...w.media,documents:Me}};j(We)},label:"Business Documents",description:"Upload financial statements, legal documents, etc. These will be NDA-protected.",showPreview:!1})]})},pe=()=>e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"sellerDisplayName",children:"Display Name *"}),e.jsx(Wt,{id:"sellerDisplayName",...z.register("sellerDisplayName"),placeholder:"Your name as it will appear to buyers"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"contactEmail",children:"Email Address *"}),e.jsx(Wt,{id:"contactEmail",type:"email",...z.register("contactEmail"),placeholder:"your.email@example.com"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"contactPhone",children:"Phone Number *"}),e.jsx(Wt,{id:"contactPhone",...z.register("contactPhone"),placeholder:"+91 98765 43210"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"preferredContactMethod",children:"Preferred Contact Method *"}),e.jsxs(ys,{...z.register("preferredContactMethod"),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select method"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"phone",children:"Phone"}),e.jsx(pr,{value:"email",children:"Email"}),e.jsx(pr,{value:"platform",children:"Platform Messages"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"enablePublicContact",...z.register("enablePublicContact")}),e.jsx(ct,{htmlFor:"enablePublicContact",children:"Allow public contact (buyers can contact you directly)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"verificationConsent",...z.register("verificationConsent")}),e.jsx(ct,{htmlFor:"verificationConsent",children:"I confirm that I have the right to sell this business and all information provided is accurate *"})]})]})]}),me=()=>{var ue,Ne,Me,We,Ve,tt;return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"Ready to Publish?"}),e.jsx("p",{className:"text-muted-foreground",children:"Review your listing and choose how you'd like to publish it."})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Listing Summary"})}),e.jsx(ut,{className:"space-y-3",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Business:"}),e.jsx("p",{children:((ue=w.overview)==null?void 0:ue.businessName)||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Industry:"}),e.jsx("p",{children:((Me=(Ne=w.overview)==null?void 0:Ne.industry)==null?void 0:Me.join(", "))||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Location:"}),e.jsx("p",{children:((We=w.overview)==null?void 0:We.city)||"Not specified"})]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Asking Price:"}),e.jsxs("p",{children:["",((tt=(Ve=w.financials)==null?void 0:Ve.askingPrice)==null?void 0:tt.toLocaleString())||"Not specified"]})]})]})})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Publishing Options"}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"visibility",children:"Visibility *"}),e.jsxs(ys,{...z.register("visibility"),children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Choose visibility"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"public",children:"Public - Visible to all users"}),e.jsx(pr,{value:"private",children:"Private - Only you can see it"}),e.jsx(pr,{value:"link_only",children:"Link Only - Accessible via direct link"})]})]})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"featuredListing",...z.register("featuredListing")}),e.jsx(ct,{htmlFor:"featuredListing",children:"Make this a featured listing (+2,999/month)"})]})]})]})};return e.jsxs("div",{className:er("max-w-6xl mx-auto",o),children:[e.jsxs("div",{className:"mb-8",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h1",{className:"text-2xl font-bold",children:"Add Business Listing"}),e.jsxs("div",{className:"flex items-center gap-2",children:[S&&e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(ty,{className:"w-4 h-4 animate-pulse"}),"Saving..."]}),e.jsxs(Gt,{variant:"secondary",children:["Step ",l+1," of ",up.length]})]})]}),e.jsx(vo,{value:G,className:"mb-4"}),e.jsx("div",{className:"flex flex-wrap gap-2",children:up.map((ue,Ne)=>e.jsxs("button",{onClick:()=>J(Ne),className:er("flex items-center gap-2 px-3 py-2 rounded-lg text-sm transition-colors",Ne===l?"bg-primary text-primary-foreground":p.has(Ne)?"bg-green-100 text-green-800 hover:bg-green-200":Ne<l?"bg-muted hover:bg-muted/80":"bg-muted/50 text-muted-foreground cursor-not-allowed"),disabled:Ne>l&&!p.has(Ne),children:[p.has(Ne)?e.jsx(Nn,{className:"w-4 h-4"}):e.jsx(ZA,{className:"w-4 h-4"}),e.jsx("span",{className:"hidden sm:inline",children:ue.title}),e.jsx("span",{className:"sm:hidden",children:Ne+1})]},ue.id))})]}),e.jsxs(ot,{className:"mb-6",children:[e.jsxs(Vt,{children:[e.jsxs(Ht,{className:"flex items-center gap-2",children:[B.icon,B.title]}),e.jsx("p",{className:"text-muted-foreground",children:B.description})]}),e.jsx(ut,{children:e.jsx("form",{onSubmit:z.handleSubmit(()=>{}),children:re()})})]}),e.jsxs("div",{className:"flex justify-between",children:[e.jsxs(ze,{variant:"outline",onClick:K,disabled:l===0,children:[e.jsx(pd,{className:"w-4 h-4 mr-2"}),"Previous"]}),e.jsx("div",{className:"flex gap-2",children:l===up.length-1?e.jsxs(e.Fragment,{children:[e.jsxs(ze,{variant:"outline",onClick:_e,children:[e.jsx(Ua,{className:"w-4 h-4 mr-2"}),"Preview"]}),e.jsx(ze,{onClick:Se,children:"Publish Listing"})]}):e.jsxs(ze,{onClick:ge,children:["Next",e.jsx(Fv,{className:"w-4 h-4 ml-2"})]})})]}),e.jsx(mP,{isOpen:E,onClose:()=>O(!1),onAccept:()=>O(!1),businessName:((Ue=w.overview)==null?void 0:Ue.businessName)||"Your Business",sellerName:((Ke=w.contact)==null?void 0:Ke.sellerDisplayName)||"Business Owner",documentsCount:((te=(Re=w.media)==null?void 0:Re.documents)==null?void 0:te.length)||0})]})}function fY(){const n=Na(),{user:t}=Io(),[r,i]=M.useState(null),[o,l]=M.useState([]),[a,p]=M.useState(!1),[g,w]=M.useState(!1),[j,S]=M.useState({type:null,message:""});M.useEffect(()=>{t||n("/login?redirect=/add-business-listing")},[t,n]),M.useEffect(()=>{(()=>{try{const ee=localStorage.getItem("bizsearch_listing_drafts");if(ee){const ie=JSON.parse(ee);if(l(ie),ie.length>0){const ge=ie.sort((K,J)=>new Date(J.lastSaved).getTime()-new Date(K.lastSaved).getTime())[0];i(ge)}}}catch(ee){console.error("Error loading drafts:",ee)}})()},[]);const T=z=>{const ee=["overview","description","financials","assets","media","contact","publish"];let ie=0;return ee.forEach(ge=>{const K=z[ge];K&&Object.keys(K).length>0&&ie++}),Math.round(ie/ee.length*100)},E=(z,ee=!0)=>{const ie=(r==null?void 0:r.id)||`draft_${Date.now()}`,ge=T(z),K={id:ie,data:z,lastSaved:new Date().toISOString(),completionPercentage:ge,status:ee?"draft":"submitted"};i(K);const J=o.filter(Se=>Se.id!==ie);J.push(K),l(J);try{localStorage.setItem("bizsearch_listing_drafts",JSON.stringify(J))}catch(Se){console.error("Error saving draft:",Se)}},O=z=>{const ee=o.filter(ie=>ie.id!==z);l(ee),(r==null?void 0:r.id)===z&&i(null);try{localStorage.setItem("bizsearch_listing_drafts",JSON.stringify(ee))}catch(ie){console.error("Error deleting draft:",ie)}},R=z=>{i(z),p(!1)},F=async z=>{var ee,ie,ge,K,J,Se,_e,re,ce,fe,ye,Fe,Q,pe,me,Ue,Ke,Re,te,ue,Ne,Me,We,Ve,tt,Qe,St,Et,zt,Lt,wr,_t,Ye,$r,Cr,Zt;if(!t){S({type:"error",message:"You must be logged in to submit a listing."});return}w(!0),S({type:null,message:""});try{const Be={name:((ee=z.overview)==null?void 0:ee.businessName)||"",industry:((ge=(ie=z.overview)==null?void 0:ie.industry)==null?void 0:ge[0])||"",description:((K=z.description)==null?void 0:K.longDescription)||"",city:((J=z.overview)==null?void 0:J.city)||"",state:((Se=z.overview)==null?void 0:Se.state)||"",location:`${(_e=z.overview)==null?void 0:_e.city}, ${(re=z.overview)==null?void 0:re.state}`,price:((ce=z.financials)==null?void 0:ce.askingPrice)||0,revenue:(ye=(fe=z.financials)==null?void 0:fe.revenue)==null?void 0:ye.year1,monthly_profit:(Fe=z.financials)==null?void 0:Fe.monthlyCashFlow,established_year:(Q=z.overview)==null?void 0:Q.establishedYear,employees:(pe=z.overview)==null?void 0:pe.numberOfEmployees,business_type:(me=z.overview)==null?void 0:me.businessType,tagline:(Ue=z.overview)==null?void 0:Ue.tagline,business_model:(Ke=z.description)==null?void 0:Ke.businessModel,images:((te=(Re=z.media)==null?void 0:Re.businessPhotos)==null?void 0:te.map(at=>at.url))||[],logo_url:(Me=(Ne=(ue=z.media)==null?void 0:ue.businessPhotos)==null?void 0:Ne[0])==null?void 0:Me.url,highlights:[],contact_email:(We=z.contact)==null?void 0:We.contactEmail,contact_phone:(Ve=z.contact)==null?void 0:Ve.contactPhone,operating_hours:"",days_open_per_week:7,full_address:(tt=z.overview)==null?void 0:tt.fullAddress,assets_included:((Qe=z.assets)==null?void 0:Qe.assetsIncluded)||[],equipment_details:(St=z.assets)==null?void 0:St.equipmentDetails,inventory_value:(Et=z.assets)==null?void 0:Et.inventoryValue,lease_type:(Lt=(zt=z.description)==null?void 0:zt.leaseDetails)==null?void 0:Lt.type,monthly_rent:(_t=(wr=z.description)==null?void 0:wr.leaseDetails)==null?void 0:_t.monthlyRent,customer_profile:(Ye=z.description)==null?void 0:Ye.customerProfile,ebitda:(Cr=($r=z.financials)==null?void 0:$r.ebitda)==null?void 0:Cr.year1,profit_margin:(Zt=z.financials)==null?void 0:Zt.profitMargins},it=await f_.createBusiness(t.id,Be);if(console.log(" Business listing created:",it),r){const at=o.filter(Tt=>Tt.id!==r.id);l(at),localStorage.setItem("bizsearch_listing_drafts",JSON.stringify(at)),i(null)}S({type:"success",message:"Listing submitted successfully! Your listing is now under review. You'll be notified once it's approved."}),setTimeout(()=>{n("/profile")},3e3)}catch(Be){console.error("Submission error:",Be),S({type:"error",message:Be.message||"Failed to submit listing. Please try again."})}finally{w(!1)}},B=z=>{console.log("Preview data:",z),alert("Preview functionality - would show listing preview")},G=()=>{i(null),p(!1),S({type:null,message:""})};return a&&o.length>0?e.jsxs("div",{className:"container mx-auto px-4 py-8 max-w-4xl",children:[e.jsxs("div",{className:"mb-6",children:[e.jsx("h1",{className:"text-2xl font-bold mb-2",children:"Choose a Draft"}),e.jsxs("p",{className:"text-muted-foreground",children:["You have ",o.length," saved draft",o.length!==1?"s":"",". Choose one to continue or start a new listing."]})]}),e.jsx("div",{className:"grid gap-4 mb-6",children:o.map(z=>{var ee;return e.jsx(ot,{className:"cursor-pointer hover:shadow-md transition-shadow",children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx("h3",{className:"font-semibold",children:((ee=z.data.overview)==null?void 0:ee.businessName)||"Untitled Listing"}),e.jsx(Gt,{variant:z.status==="published"?"default":z.status==="submitted"?"secondary":"outline",children:z.status})]}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground mb-2",children:[e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Xd,{className:"w-4 h-4"}),new Date(z.lastSaved).toLocaleDateString()]}),e.jsxs("span",{className:"flex items-center gap-1",children:[e.jsx(Ys,{className:"w-4 h-4"}),z.completionPercentage,"% complete"]})]}),e.jsx("div",{className:"w-full bg-muted rounded-full h-2",children:e.jsx("div",{className:"bg-primary h-2 rounded-full transition-all",style:{width:`${z.completionPercentage}%`}})})]}),e.jsxs("div",{className:"flex gap-2 ml-4",children:[e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>R(z),children:[e.jsx(Ua,{className:"w-4 h-4 mr-1"}),"Continue"]}),e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>O(z.id),className:"text-red-600 hover:text-red-700",children:e.jsx(xf,{className:"w-4 h-4"})})]})]})})},z.id)})}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(ze,{onClick:G,variant:"outline",children:"Start New Listing"}),e.jsx(ze,{onClick:()=>p(!1),children:"Cancel"})]})]}):e.jsxs("div",{className:"container mx-auto px-4 py-8",children:[e.jsxs("div",{className:"mb-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-3xl font-bold",children:"Sell Your Business"}),e.jsx("p",{className:"text-muted-foreground",children:"Create a comprehensive listing to sell your business to qualified buyers"})]}),e.jsxs("div",{className:"flex gap-2",children:[o.length>0&&e.jsxs(ze,{variant:"outline",onClick:()=>p(!0),children:[e.jsx(ty,{className:"w-4 h-4 mr-2"}),"Saved Drafts (",o.length,")"]}),r&&e.jsx(ze,{variant:"outline",onClick:G,children:"Start New"})]})]}),r&&e.jsxs(bl,{className:"mb-4",children:[e.jsx(ty,{className:"w-4 h-4"}),e.jsx(_l,{children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Draft saved  ",r.completionPercentage,"% complete  Last saved ",new Date(r.lastSaved).toLocaleString()]}),e.jsx(Gt,{variant:r.status==="published"?"default":r.status==="submitted"?"secondary":"outline",children:r.status})]})})]}),j.type&&e.jsxs(bl,{className:`mb-4 ${j.type==="success"?"border-green-200 bg-green-50":"border-red-200 bg-red-50"}`,children:[j.type==="success"?e.jsx(Nn,{className:"w-4 h-4 text-green-600"}):e.jsx(jc,{className:"w-4 h-4 text-red-600"}),e.jsx(_l,{className:j.type==="success"?"text-green-800":"text-red-800",children:j.message})]})]}),g&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:e.jsx(ot,{className:"p-6",children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx(Jd,{className:"w-5 h-5 animate-pulse"}),e.jsx("span",{children:"Submitting your listing..."})]})})}),e.jsx(hY,{initialData:r==null?void 0:r.data,onSave:E,onSubmit:F,onPreview:B}),e.jsxs(ot,{className:"mt-8",children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Need Help?"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Listing Tips"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Use high-quality photos"}),e.jsx("li",{children:" Be detailed in descriptions"}),e.jsx("li",{children:" Price competitively"}),e.jsx("li",{children:" Include all relevant documents"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Verification Process"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Submit complete information"}),e.jsx("li",{children:" Our team reviews within 24-48 hours"}),e.jsx("li",{children:" You'll receive approval notification"}),e.jsx("li",{children:" Listing goes live after approval"})]})]}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium mb-2",children:"Support"}),e.jsxs("ul",{className:"space-y-1 text-muted-foreground",children:[e.jsx("li",{children:" Email: support@bizsearch.com"}),e.jsx("li",{children:" Phone: +91 98765 43210"}),e.jsx("li",{children:" Live chat available 9 AM - 6 PM"}),e.jsx("li",{children:" FAQ section in help center"})]})]})]})})]})]})}const pY=on({brandOverview:on({brandName:Pt().min(2,"Brand name must be at least 2 characters"),tagline:Pt().min(10,"Tagline must be at least 10 characters"),industry:Gi(Pt()).min(1,"Select at least one industry"),businessModel:Pt().min(1,"Business model is required"),yearEstablished:Mr().min(1900,"Invalid year").max(new Date().getFullYear()),totalOutlets:Mr().min(1,"Must have at least 1 outlet"),companyOutlets:Mr().min(0,"Company outlets cannot be negative"),franchiseOutlets:Mr().min(0,"Franchise outlets cannot be negative"),territories:Gi(Pt()).min(1,"Select at least one territory"),website:Pt().url("Invalid website URL").optional()}),description:on({brandDescription:Pt().min(100,"Brand description must be at least 100 characters"),uniqueSellingPoints:Gi(Pt()).min(3,"Add at least 3 unique selling points"),targetMarket:Pt().min(50,"Target market description required"),competitiveAdvantages:Gi(Pt()).min(2,"Add at least 2 competitive advantages"),growthPotential:Pt().min(50,"Growth potential description required")}),investment:on({franchiseFee:Mr().min(0,"Franchise fee cannot be negative"),totalInvestment:on({min:Mr().min(0,"Minimum investment cannot be negative"),max:Mr().min(0,"Maximum investment cannot be negative")}),liquidCapitalRequired:Mr().min(0,"Liquid capital cannot be negative"),royaltyStructure:on({type:Zc(["fixed","tiered","performance_based"]),baseTiers:Gi(on({id:Pt(),minRevenue:Mr(),maxRevenue:Mr().optional(),percentage:Mr(),description:Pt().optional()})),performanceIncentives:on({enabled:Bo(),bonusThreshold:Mr(),bonusReduction:Mr()}).optional(),volumeDiscounts:on({enabled:Bo(),multiUnitDiscount:Mr(),loyaltyDiscount:Mr()}).optional()}),marketingFee:on({type:Zc(["fixed","percentage","tiered"]),value:Mr(),tiers:Gi(on({id:Pt(),minRevenue:Mr(),maxRevenue:Mr().optional(),percentage:Mr()})).optional()}),investmentBreakdown:Gi(on({id:Pt(),category:Pt(),name:Pt(),amount:Mr(),isRequired:Bo(),description:Pt().optional(),financingAvailable:Bo().optional(),paymentTiming:Zc(["upfront","monthly","quarterly","annual"]).optional()})),breakEvenPeriod:Mr().min(1,"Break-even period must be at least 1 month"),averageROI:Mr().min(0).max(100,"ROI cannot exceed 100%"),financingOptions:Gi(Pt()),roiProjections:on({scenarios:Gi(on({name:Pt(),probability:Mr(),projections:Gi(on({year:Mr(),revenue:Mr(),expenses:Mr(),netIncome:Mr(),cumulativeROI:Mr()})),assumptions:Gi(Pt())}))}).optional()}),support:on({initialTrainingDuration:Mr().min(1,"Training duration required"),ongoingSupport:Gi(Pt()).min(3,"Add at least 3 support types"),marketingSupport:Gi(Pt()).min(2,"Add at least 2 marketing support types"),operationalSupport:Gi(Pt()).min(2,"Add at least 2 operational support types"),technologySupport:Gi(Pt()),qualityAssurance:Pt().min(50,"Quality assurance description required")}),territory:on({selectedTerritories:Gi(on({id:Pt(),type:Zc(["state","city","district","custom"]),name:Pt(),population:Mr().optional(),coordinates:on({lat:Mr(),lng:Mr()}).optional(),bounds:on({north:Mr(),south:Mr(),east:Mr(),west:Mr()}).optional(),isAvailable:Bo(),isProtected:Bo(),exclusivityRadius:Mr().optional()})).min(1,"Select at least one territory"),protectedTerritoryEnabled:Bo(),territorySize:Pt().min(1,"Territory size required"),populationRequirement:Mr().min(0,"Population requirement cannot be negative"),demographicProfile:Pt().min(50,"Demographic profile required"),competitionAnalysis:Pt().min(50,"Competition analysis required"),multiUnitDevelopment:on({enabled:Bo(),minimumUnits:Mr().optional(),developmentTimeline:Pt().optional(),additionalIncentives:Pt().optional()}).optional()}),franchiseeProfile:on({idealCandidateProfile:Pt().min(100,"Ideal candidate profile required"),experienceRequired:Pt().min(1,"Experience requirement needed"),skillsRequired:Gi(Pt()).min(3,"Add at least 3 required skills"),timeCommitment:Pt().min(1,"Time commitment required"),backgroundPreferences:Gi(Pt())}),media:on({brandLogo:Gi(on({id:Pt(),name:Pt(),url:Pt(),type:Pt(),size:Mr()})).min(1,"Brand logo is required"),outletPhotos:Gi(on({id:Pt(),name:Pt(),url:Pt(),type:Pt(),size:Mr()})).min(3,"At least 3 outlet photos required"),marketingMaterials:Gi(on({id:Pt(),name:Pt(),url:Pt(),type:Pt(),size:Mr()})),franchiseDisclosureDocument:Gi(on({id:Pt(),name:Pt(),url:Pt(),type:Pt(),size:Mr()})).min(1,"FDD is required"),financialStatements:Gi(on({id:Pt(),name:Pt(),url:Pt(),type:Pt(),size:Mr()}))}),contact:on({primaryContact:on({name:Pt().min(2,"Contact name required"),title:Pt().min(2,"Contact title required"),email:Pt().email("Invalid email address"),phone:Pt().min(10,"Valid phone number required")}),companyAddress:on({street:Pt().min(5,"Street address required"),city:Pt().min(2,"City required"),state:Pt().min(2,"State required"),zipCode:Pt().min(5,"Valid zip code required"),country:Pt().min(2,"Country required")}),legalStructure:Pt().min(1,"Legal structure required"),registrationNumber:Pt().min(5,"Registration number required"),franchiseRegistration:Pt().min(5,"Franchise registration required")}),publishing:on({listingTitle:Pt().min(10,"Listing title must be at least 10 characters"),visibility:Zc(["public","private","verified_only"]),featuredListing:Bo(),urgentListing:Bo(),contactPreferences:on({allowDirectContact:Bo(),requireNDA:Bo(),screeningQuestions:Gi(Pt())}),termsAccepted:Bo().refine(n=>n===!0,"Must accept terms"),verificationConsent:Bo().refine(n=>n===!0,"Must consent to verification")})}),mY=[{value:"food-beverage",label:"Food & Beverage"},{value:"retail",label:"Retail"},{value:"health-fitness",label:"Health & Fitness"},{value:"education",label:"Education & Training"},{value:"automotive",label:"Automotive"},{value:"beauty-wellness",label:"Beauty & Wellness"},{value:"home-services",label:"Home Services"},{value:"technology",label:"Technology"},{value:"real-estate",label:"Real Estate"},{value:"travel-hospitality",label:"Travel & Hospitality"},{value:"cleaning",label:"Cleaning Services"},{value:"childcare",label:"Childcare"},{value:"pet-services",label:"Pet Services"},{value:"senior-care",label:"Senior Care"},{value:"entertainment",label:"Entertainment"}],gY=[{value:"traditional",label:"Traditional Franchise"},{value:"master",label:"Master Franchise"},{value:"area-development",label:"Area Development"},{value:"conversion",label:"Conversion Franchise"},{value:"mobile",label:"Mobile Franchise"},{value:"home-based",label:"Home-Based Franchise"},{value:"kiosk",label:"Kiosk/Cart Franchise"},{value:"multi-unit",label:"Multi-Unit Development"}],vY=["Site Selection Assistance","Store Design & Layout","Equipment Procurement","Staff Recruitment","Initial Training Program","Operations Manual","Marketing Launch Support","Ongoing Operational Support","Technology Support","Supply Chain Management","Quality Control","Performance Monitoring"],yY=["National Advertising Campaigns","Local Marketing Templates","Digital Marketing Support","Social Media Management","Website Development","SEO Support","Print Marketing Materials","Grand Opening Support","Promotional Campaigns","Brand Guidelines"],xY={brandOverview:{brandName:"FreshBite Caf",tagline:"Healthy, Fresh, Fast - The Future of Quick Service",industry:["food-beverage"],businessModel:"traditional",yearEstablished:2018,totalOutlets:125,companyOutlets:15,franchiseOutlets:110,territories:["Maharashtra","Karnataka","Tamil Nadu","Delhi NCR"],website:"https://freshbitecafe.com"},description:{brandDescription:"FreshBite Caf revolutionizes the quick-service restaurant industry by offering healthy, fresh, and customizable meals. Our innovative concept combines the speed of fast food with the quality of fresh ingredients, catering to health-conscious consumers who don't want to compromise on taste or convenience.",uniqueSellingPoints:["100% fresh ingredients, no preservatives","Customizable healthy meals in under 3 minutes","Proprietary technology for order management","Sustainable packaging and eco-friendly practices"],targetMarket:"Health-conscious millennials and Gen-Z consumers aged 18-40, office workers, fitness enthusiasts, and families seeking convenient healthy dining options.",competitiveAdvantages:["First-mover advantage in healthy fast-casual segment","Proprietary technology platform for seamless operations","Strong brand recognition and customer loyalty"],growthPotential:"Projected to expand to 500+ outlets across India by 2027, with plans for international expansion in Southeast Asia."},investment:{franchiseFee:8e5,totalInvestment:{min:25e5,max:4e6},liquidCapitalRequired:15e5,royaltyPercentage:6,marketingFeePercentage:2,breakEvenPeriod:18,averageROI:25,financingOptions:["Bank partnerships","Equipment financing","Working capital loans"]},support:{initialTrainingDuration:21,ongoingSupport:["Operations Manual","Technology Support","Marketing Support","Quality Control"],marketingSupport:["National Advertising","Digital Marketing","Local Promotions"],operationalSupport:["Site Selection","Store Setup","Staff Training"],technologySupport:["POS System","Mobile App","Inventory Management"],qualityAssurance:"Regular quality audits, mystery shopping, and performance monitoring to ensure brand standards are maintained across all outlets."}},bY=["Andhra Pradesh","Arunachal Pradesh","Assam","Bihar","Chhattisgarh","Goa","Gujarat","Haryana","Himachal Pradesh","Jharkhand","Karnataka","Kerala","Madhya Pradesh","Maharashtra","Manipur","Meghalaya","Mizoram","Nagaland","Odisha","Punjab","Rajasthan","Sikkim","Tamil Nadu","Telangana","Tripura","Uttar Pradesh","Uttarakhand","West Bengal","Delhi","Jammu and Kashmir","Ladakh","Chandigarh","Dadra and Nagar Haveli and Daman and Diu","Lakshadweep","Puducherry"],_Y=[{name:"Mumbai",state:"Maharashtra",population:12442373},{name:"Delhi",state:"Delhi",population:11007835},{name:"Bangalore",state:"Karnataka",population:8443675},{name:"Hyderabad",state:"Telangana",population:6809970},{name:"Ahmedabad",state:"Gujarat",population:5570585},{name:"Chennai",state:"Tamil Nadu",population:4681087},{name:"Kolkata",state:"West Bengal",population:4496694},{name:"Surat",state:"Gujarat",population:4467797},{name:"Pune",state:"Maharashtra",population:3124458},{name:"Jaipur",state:"Rajasthan",population:3046163}];function wY({selectedTerritories:n=[],onTerritoriesChange:t,protectedTerritoryEnabled:r=!1,onProtectedTerritoryChange:i,className:o}){const[l,a]=M.useState(n),[p,g]=M.useState(""),[w,j]=M.useState("state"),[S,T]=M.useState(""),[E,O]=M.useState(10),[R,F]=M.useState(r);M.useEffect(()=>{t==null||t(l)},[l,t]),M.useEffect(()=>{i==null||i(R)},[R,i]);const B=(re,ce,fe)=>{const ye={id:`${ce}-${re.toLowerCase().replace(/\s+/g,"-")}-${Date.now()}`,type:ce,name:re,isAvailable:!0,isProtected:R,exclusivityRadius:R?E:void 0,...fe};a(Fe=>[...Fe,ye])},G=re=>{a(ce=>ce.filter(fe=>fe.id!==re))},z=re=>{a(ce=>ce.map(fe=>fe.id===re?{...fe,isAvailable:!fe.isAvailable}:fe))},ee=re=>{l.find(ce=>ce.name===re&&ce.type==="state")||B(re,"state")},ie=re=>{l.find(ce=>ce.name===re.name&&ce.type==="city")||B(re.name,"city",{population:re.population,coordinates:{lat:0,lng:0}})},ge=()=>{S.trim()&&(B(S.trim(),"custom"),T(""))},K=bY.filter(re=>re.toLowerCase().includes(p.toLowerCase())),J=_Y.filter(re=>re.name.toLowerCase().includes(p.toLowerCase())||re.state.toLowerCase().includes(p.toLowerCase())),Se=re=>{switch(re){case"state":return e.jsx(wm,{className:"h-4 w-4"});case"city":return e.jsx(mp,{className:"h-4 w-4"});case"district":return e.jsx(Ja,{className:"h-4 w-4"});default:return e.jsx(Ja,{className:"h-4 w-4"})}},_e=()=>l.reduce((re,ce)=>re+(ce.population||0),0);return e.jsxs("div",{className:`space-y-6 ${o}`,children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ja,{className:"h-5 w-5"}),"Territory Selection"]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"protected-territory",checked:R,onCheckedChange:F}),e.jsx(ct,{htmlFor:"protected-territory",className:"font-medium",children:"Enable Protected Territory Rights"})]}),R&&e.jsxs("div",{className:"ml-6 space-y-3",children:[e.jsx("div",{className:"flex items-center gap-4",children:e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"exclusivity-radius",children:"Exclusivity Radius (km)"}),e.jsx(Wt,{id:"exclusivity-radius",type:"number",value:E,onChange:re=>O(Number(re.target.value)),className:"w-32",min:"1",max:"100"})]})}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Franchisees will have exclusive rights within"," ",E,"km radius of their location."]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Territory Type"}),e.jsxs(ys,{value:w,onValueChange:re=>j(re),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"state",children:"State/Province"}),e.jsx(pr,{value:"city",children:"City/Metro"}),e.jsx(pr,{value:"district",children:"District/Region"}),e.jsx(pr,{value:"custom",children:"Custom Territory"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"territory-search",children:"Search Territories"}),e.jsxs("div",{className:"relative",children:[e.jsx(md,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Wt,{id:"territory-search",placeholder:"Search states, cities, or regions...",value:p,onChange:re=>g(re.target.value),className:"pl-10"})]})]}),e.jsxs("div",{className:"space-y-4",children:[w==="state"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Available States"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2 max-h-48 overflow-y-auto",children:K.map(re=>e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>ee(re),disabled:l.some(ce=>ce.name===re&&ce.type==="state"),className:"justify-start",children:[e.jsx(Lh,{className:"h-3 w-3 mr-2"}),re]},re))})]}),w==="city"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Major Cities"}),e.jsx("div",{className:"space-y-2 max-h-48 overflow-y-auto",children:J.map(re=>e.jsxs("div",{className:"flex items-center justify-between p-2 border rounded-lg",children:[e.jsxs("div",{children:[e.jsx("div",{className:"font-medium",children:re.name}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[re.state,"  Population:"," ",re.population.toLocaleString()]})]}),e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>ie(re),disabled:l.some(ce=>ce.name===re.name&&ce.type==="city"),children:[e.jsx(Lh,{className:"h-3 w-3 mr-2"}),"Add"]})]},re.name))})]}),w==="custom"&&e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{htmlFor:"custom-territory",children:"Custom Territory Name"}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Wt,{id:"custom-territory",placeholder:"Enter custom territory name...",value:S,onChange:re=>T(re.target.value)}),e.jsxs(ze,{onClick:ge,disabled:!S.trim(),children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Add"]})]})]})]})]})]}),l.length>0&&e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:["Selected Territories (",l.length,")"]}),e.jsxs("div",{className:"text-sm font-normal text-muted-foreground",children:["Total Population: ",_e().toLocaleString()]})]})}),e.jsx(ut,{children:e.jsx("div",{className:"space-y-3",children:l.map(re=>e.jsxs("div",{className:"flex items-center justify-between p-3 border rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-muted rounded-lg",children:Se(re.type)}),e.jsxs("div",{children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("span",{className:"font-medium",children:re.name}),e.jsx(Gt,{variant:"outline",className:"text-xs",children:re.type}),re.isProtected&&e.jsxs(Gt,{variant:"secondary",className:"text-xs",children:["Protected (",re.exclusivityRadius,"km)"]})]}),re.population&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Population: ",re.population.toLocaleString()]})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{variant:"outline",size:"sm",onClick:()=>z(re.id),className:re.isAvailable?"text-green-600":"text-red-600",children:[re.isAvailable?e.jsx(Nn,{className:"h-4 w-4 mr-2"}):e.jsx(jc,{className:"h-4 w-4 mr-2"}),re.isAvailable?"Available":"Unavailable"]}),e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>G(re.id),children:e.jsx(xf,{className:"h-4 w-4"})})]})]},re.id))})})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Territory Map"})}),e.jsx(ut,{children:e.jsx("div",{className:"aspect-video bg-muted rounded-lg flex items-center justify-center",children:e.jsxs("div",{className:"text-center space-y-2",children:[e.jsx(Ja,{className:"h-12 w-12 text-muted-foreground mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Interactive map integration"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Map will show selected territories with boundaries and exclusivity zones"})]})})})]}),l.length>0&&e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"Territory Summary"})}),e.jsx(ut,{children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Territories"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.filter(re=>re.isAvailable).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Available"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:l.filter(re=>re.isProtected).length}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Protected"})]})]})})]})]})}const jY={"food-beverage":{averageRevenue:25e5,grossMargin:.65,operatingMargin:.15,breakEvenMonths:18},retail:{averageRevenue:18e5,grossMargin:.55,operatingMargin:.12,breakEvenMonths:24},services:{averageRevenue:12e5,grossMargin:.75,operatingMargin:.25,breakEvenMonths:12},fitness:{averageRevenue:8e5,grossMargin:.7,operatingMargin:.2,breakEvenMonths:15}},NY={tier1:{revenue:1.3,costs:1.4},tier2:{revenue:1,costs:1},tier3:{revenue:.7,costs:.8}};function SY({initialInvestment:n=25e5,franchiseFee:t=8e5,royaltyPercentage:r=6,marketingFeePercentage:i=2,industryType:o="food-beverage",locationTier:l="tier2",onROIChange:a,className:p}){var me,Ue,Ke,Re;const[g,w]=M.useState(n),[j,S]=M.useState(t),[T,E]=M.useState(r),[O,R]=M.useState(i),[F,B]=M.useState(o),[G,z]=M.useState(l),[ee,ie]=M.useState([]),[ge,K]=M.useState(!1),[J,Se]=M.useState("optimistic"),[_e,re]=M.useState(["Market growth rate of 8-12% annually","Customer acquisition cost decreasing over time","Operational efficiency improving by 5% yearly","Local competition remains stable"]);M.useEffect(()=>{ce()},[g,j,T,O,F,G]);const ce=async()=>{K(!0),await new Promise(Ve=>setTimeout(Ve,1500));const te=jY[F],ue=NY[G],Ne=te.averageRevenue*ue.revenue,Me=Ne*(1-te.grossMargin)*ue.costs,We=[{name:"Conservative",probability:30,projections:fe(Ne*.8,Me*1.1,5),assumptions:["Lower than average market performance","Higher operational costs initially","Slower customer acquisition","Conservative growth trajectory"]},{name:"Realistic",probability:50,projections:fe(Ne,Me,5),assumptions:["Industry average performance","Standard operational efficiency","Moderate market growth","Typical franchise success rate"]},{name:"Optimistic",probability:20,projections:fe(Ne*1.2,Me*.9,5),assumptions:["Above average market performance","Excellent operational efficiency","Strong local market demand","Exceptional franchise execution"]}];ie(We),K(!1),a==null||a(We)},fe=(te,ue,Ne)=>{const Me=[];let We=g,Ve=0;for(let tt=1;tt<=Ne;tt++){const Qe=Math.pow(1.08,tt-1),St=te*Qe,Et=St*(T/100),zt=St*(O/100),wr=ue*Qe+Et+zt,_t=St-wr;Ve+=_t;const Ye=(Ve-We)/We*100;Me.push({year:tt,revenue:St,expenses:wr,netIncome:_t,cumulativeROI:Ye,breakEvenMonth:Ye>0&&!Me.find($r=>$r.cumulativeROI>0)?tt*12-6:void 0})}return Me},ye=te=>{switch(te.toLowerCase()){case"conservative":return"text-red-600 bg-red-50";case"realistic":return"text-blue-600 bg-blue-50";case"optimistic":return"text-green-600 bg-green-50";default:return"text-gray-600 bg-gray-50"}},Fe=ee.find(te=>te.name.toLowerCase()===J),Q=((me=Fe==null?void 0:Fe.projections[Fe.projections.length-1])==null?void 0:me.cumulativeROI)||0,pe=(Ue=Fe==null?void 0:Fe.projections.find(te=>te.cumulativeROI>0))==null?void 0:Ue.year;return e.jsxs("div",{className:`space-y-6 ${p}`,children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Qv,{className:"h-5 w-5"}),"Investment Parameters"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"total-investment",children:"Total Investment ()"}),e.jsx(Wt,{id:"total-investment",type:"number",value:g,onChange:te=>w(Number(te.target.value)),placeholder:"2500000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"franchise-fee",children:"Franchise Fee ()"}),e.jsx(Wt,{id:"franchise-fee",type:"number",value:j,onChange:te=>S(Number(te.target.value)),placeholder:"800000"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"royalty-percentage",children:"Royalty (%)"}),e.jsx(Wt,{id:"royalty-percentage",type:"number",step:"0.1",value:T,onChange:te=>E(Number(te.target.value)),placeholder:"6.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"marketing-percentage",children:"Marketing Fee (%)"}),e.jsx(Wt,{id:"marketing-percentage",type:"number",step:"0.1",value:O,onChange:te=>R(Number(te.target.value)),placeholder:"2.0"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Industry Type"}),e.jsxs(ys,{value:F,onValueChange:B,children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"food-beverage",children:"Food & Beverage"}),e.jsx(pr,{value:"retail",children:"Retail"}),e.jsx(pr,{value:"services",children:"Services"}),e.jsx(pr,{value:"fitness",children:"Fitness & Wellness"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Location Tier"}),e.jsxs(ys,{value:G,onValueChange:te=>z(te),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"tier1",children:"Tier 1 (Metro Cities)"}),e.jsx(pr,{value:"tier2",children:"Tier 2 (Major Cities)"}),e.jsx(pr,{value:"tier3",children:"Tier 3 (Smaller Cities)"})]})]})]})]}),e.jsxs(ze,{onClick:ce,disabled:ge,className:"w-full",children:[ge?e.jsx($2,{className:"h-4 w-4 mr-2 animate-spin"}):e.jsx(ey,{className:"h-4 w-4 mr-2"}),ge?"Calculating ROI...":"Recalculate ROI"]})]})]}),ee.length>0&&e.jsxs(e.Fragment,{children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{children:"ROI Scenarios"})}),e.jsx(ut,{children:e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:ee.map(te=>{var ue;return e.jsxs("button",{onClick:()=>Se(te.name.toLowerCase()),className:`p-4 border rounded-lg text-left transition-colors ${J===te.name.toLowerCase()?"border-primary bg-primary/5":"border-muted hover:bg-muted/50"}`,children:[e.jsxs("div",{className:"flex items-center justify-between mb-2",children:[e.jsx(Gt,{className:ye(te.name),children:te.name}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[te.probability,"% probability"]})]}),e.jsxs("div",{className:"text-2xl font-bold",children:[(ue=te.projections[te.projections.length-1])==null?void 0:ue.cumulativeROI.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"5-year ROI"})]},te.name)})})})]}),Fe&&e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center justify-between",children:[e.jsxs("span",{children:[Fe.name," Scenario"]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ze,{variant:"outline",size:"sm",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Export"]}),e.jsxs(ze,{variant:"outline",size:"sm",children:[e.jsx(yy,{className:"h-4 w-4 mr-2"}),"Share"]})]})]})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:[Q.toFixed(1),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"5-Year ROI"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsx("div",{className:"text-2xl font-bold",children:pe?`${pe} years`:"N/A"}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Break-even"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",(((Ke=Fe.projections[0])==null?void 0:Ke.revenue)/1e5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Year 1 Revenue"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",(((Re=Fe.projections[0])==null?void 0:Re.netIncome)/1e5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Year 1 Profit"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"5-Year Financial Projections"}),e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full text-sm",children:[e.jsx("thead",{children:e.jsxs("tr",{className:"border-b",children:[e.jsx("th",{className:"text-left p-2",children:"Year"}),e.jsx("th",{className:"text-right p-2",children:"Revenue"}),e.jsx("th",{className:"text-right p-2",children:"Expenses"}),e.jsx("th",{className:"text-right p-2",children:"Net Income"}),e.jsx("th",{className:"text-right p-2",children:"Cumulative ROI"})]})}),e.jsx("tbody",{children:Fe.projections.map(te=>e.jsxs("tr",{className:"border-b",children:[e.jsxs("td",{className:"p-2 font-medium",children:["Year ",te.year]}),e.jsxs("td",{className:"text-right p-2",children:["",(te.revenue/1e5).toFixed(1),"L"]}),e.jsxs("td",{className:"text-right p-2",children:["",(te.expenses/1e5).toFixed(1),"L"]}),e.jsx("td",{className:"text-right p-2",children:e.jsxs("span",{className:te.netIncome>=0?"text-green-600":"text-red-600",children:["",(te.netIncome/1e5).toFixed(1),"L"]})}),e.jsx("td",{className:"text-right p-2",children:e.jsxs("span",{className:te.cumulativeROI>=0?"text-green-600":"text-red-600",children:[te.cumulativeROI.toFixed(1),"%"]})})]},te.year))})]})})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("h4",{className:"font-semibold flex items-center gap-2",children:[e.jsx(nb,{className:"h-4 w-4"}),"Key Assumptions"]}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-2",children:Fe.assumptions.map((te,ue)=>e.jsxs("div",{className:"flex items-start gap-2 text-sm",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600 mt-0.5 flex-shrink-0"}),e.jsx("span",{children:te})]},ue))})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(nb,{className:"h-5 w-5 text-blue-600"}),e.jsx("h4",{className:"font-semibold text-blue-800",children:"AI Insights"})]}),e.jsxs("div",{className:"space-y-2 text-sm text-blue-700",children:[e.jsxs("p",{children:["Based on industry benchmarks and location analysis, this franchise shows",e.jsxs("strong",{children:[" ",Q>20?"strong":Q>10?"moderate":"limited"," ","ROI potential"]}),"."]}),e.jsxs("p",{children:["The break-even period of ",pe," years is",e.jsxs("strong",{children:[" ",pe&&pe<=2?"excellent":pe&&pe<=3?"good":"average"]}),"for this industry segment."]}),e.jsx("p",{children:"Consider factors like local competition, market saturation, and your operational experience when evaluating this opportunity."})]})]})]})]})]}),ge&&e.jsx(ot,{children:e.jsx(ut,{className:"py-12",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx($2,{className:"h-12 w-12 text-primary mx-auto animate-spin"}),e.jsxs("div",{children:[e.jsx("h3",{className:"font-semibold",children:"Calculating ROI Projections"}),e.jsx("p",{className:"text-sm text-muted-foreground",children:"Analyzing market data and industry benchmarks..."})]}),e.jsx(vo,{value:75,className:"w-64 mx-auto"})]})})})]})}const AY={type:"fixed",baseTiers:[{id:"base",minRevenue:0,percentage:6,description:"Standard royalty rate"}],marketingFee:{type:"percentage",value:2},performanceIncentives:{enabled:!1,bonusThreshold:5e6,bonusReduction:1},volumeDiscounts:{enabled:!1,multiUnitDiscount:.5,loyaltyDiscount:.25}};function CY({initialSchedule:n=AY,onScheduleChange:t,className:r}){var F,B,G,z,ee,ie;const[i,o]=M.useState(n),[l,a]=M.useState({}),[p,g]=M.useState(24e5);M.useEffect(()=>{t==null||t(i)},[i,t]);const w=()=>{if(l.minRevenue&&l.percentage){const ge={id:`tier-${Date.now()}`,minRevenue:l.minRevenue,maxRevenue:l.maxRevenue,percentage:l.percentage,description:l.description||""};o(K=>({...K,baseTiers:[...K.baseTiers,ge].sort((J,Se)=>J.minRevenue-Se.minRevenue)})),a({})}},j=ge=>{o(K=>({...K,baseTiers:K.baseTiers.filter(J=>J.id!==ge)}))},S=(ge,K)=>{o(J=>({...J,baseTiers:J.baseTiers.map(Se=>Se.id===ge?{...Se,...K}:Se)}))},T=ge=>{var K;if(i.type==="fixed"){const J=((K=i.baseTiers[0])==null?void 0:K.percentage)||0;return{amount:ge*(J/100),rate:J,tier:i.baseTiers[0]}}if(i.type==="tiered"){let J=0,Se=0,_e;for(const re of i.baseTiers){const ce=re.minRevenue,fe=re.maxRevenue||1/0;if(ge>ce){const ye=Math.min(ge,fe)-ce;ye>0&&(J+=ye*(re.percentage/100),_e=re)}}return Se=ge>0?J/ge*100:0,{amount:J,rate:Se,tier:_e}}return{amount:0,rate:0}},E=ge=>i.marketingFee.type==="fixed"?i.marketingFee.value:ge*(i.marketingFee.value/100),O=T(p),R=E(p);return e.jsxs("div",{className:`space-y-6 ${r}`,children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Qv,{className:"h-5 w-5"}),"Royalty Structure"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Royalty Type"}),e.jsxs(ys,{value:i.type,onValueChange:ge=>o(K=>({...K,type:ge})),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"fixed",children:"Fixed Percentage"}),e.jsx(pr,{value:"tiered",children:"Tiered Structure"}),e.jsx(pr,{value:"performance_based",children:"Performance Based"})]})]})]}),i.type==="fixed"&&e.jsx("div",{className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"fixed-royalty",children:"Royalty Percentage (%)"}),e.jsx(Wt,{id:"fixed-royalty",type:"number",step:"0.1",value:((F=i.baseTiers[0])==null?void 0:F.percentage)||0,onChange:ge=>{var K;return S(((K=i.baseTiers[0])==null?void 0:K.id)||"base",{percentage:Number(ge.target.value)})},placeholder:"6.0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"fixed-description",children:"Description"}),e.jsx(Wt,{id:"fixed-description",value:((B=i.baseTiers[0])==null?void 0:B.description)||"",onChange:ge=>{var K;return S(((K=i.baseTiers[0])==null?void 0:K.id)||"base",{description:ge.target.value})},placeholder:"Standard royalty rate"})]})]})}),i.type==="tiered"&&e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-3",children:[e.jsx(ct,{children:"Royalty Tiers"}),i.baseTiers.map((ge,K)=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs(Gt,{variant:"outline",children:["Tier ",K+1]}),i.baseTiers.length>1&&e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>j(ge.id),children:e.jsx(xf,{className:"h-4 w-4"})})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Min Revenue ()"}),e.jsx(Wt,{type:"number",value:ge.minRevenue,onChange:J=>S(ge.id,{minRevenue:Number(J.target.value)}),placeholder:"0"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Max Revenue ()"}),e.jsx(Wt,{type:"number",value:ge.maxRevenue||"",onChange:J=>S(ge.id,{maxRevenue:J.target.value?Number(J.target.value):void 0}),placeholder:"No limit"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Royalty (%)"}),e.jsx(Wt,{type:"number",step:"0.1",value:ge.percentage,onChange:J=>S(ge.id,{percentage:Number(J.target.value)}),placeholder:"6.0"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Description"}),e.jsx(Wt,{value:ge.description||"",onChange:J=>S(ge.id,{description:J.target.value}),placeholder:"Tier description..."})]})]},ge.id))]}),e.jsxs("div",{className:"p-4 border-2 border-dashed rounded-lg space-y-3",children:[e.jsx(ct,{children:"Add New Tier"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Min Revenue ()"}),e.jsx(Wt,{type:"number",value:l.minRevenue||"",onChange:ge=>a(K=>({...K,minRevenue:Number(ge.target.value)})),placeholder:"5000000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Max Revenue ()"}),e.jsx(Wt,{type:"number",value:l.maxRevenue||"",onChange:ge=>a(K=>({...K,maxRevenue:ge.target.value?Number(ge.target.value):void 0})),placeholder:"Optional"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Royalty (%)"}),e.jsx(Wt,{type:"number",step:"0.1",value:l.percentage||"",onChange:ge=>a(K=>({...K,percentage:Number(ge.target.value)})),placeholder:"5.0"})]})]}),e.jsxs(ze,{onClick:w,disabled:!l.minRevenue||!l.percentage,className:"w-full",children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Add Tier"]})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5"}),"Marketing Fee Structure"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Marketing Fee Type"}),e.jsxs(ys,{value:i.marketingFee.type,onValueChange:ge=>o(K=>({...K,marketingFee:{...K.marketingFee,type:ge}})),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"percentage",children:"Percentage of Revenue"}),e.jsx(pr,{value:"fixed",children:"Fixed Monthly Amount"}),e.jsx(pr,{value:"tiered",children:"Tiered Structure"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"marketing-value",children:i.marketingFee.type==="percentage"?"Percentage (%)":"Monthly Amount ()"}),e.jsx(Wt,{id:"marketing-value",type:"number",step:i.marketingFee.type==="percentage"?"0.1":"1000",value:i.marketingFee.value,onChange:ge=>o(K=>({...K,marketingFee:{...K.marketingFee,value:Number(ge.target.value)}})),placeholder:i.marketingFee.type==="percentage"?"2.0":"50000"})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(ey,{className:"h-5 w-5"}),"Performance Incentives"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"performance-incentives",checked:(G=i.performanceIncentives)==null?void 0:G.enabled,onCheckedChange:ge=>o(K=>({...K,performanceIncentives:{...K.performanceIncentives,enabled:!!ge}}))}),e.jsx(ct,{htmlFor:"performance-incentives",children:"Enable Performance Incentives"})]}),((z=i.performanceIncentives)==null?void 0:z.enabled)&&e.jsxs("div",{className:"ml-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"bonus-threshold",children:"Performance Threshold ()"}),e.jsx(Wt,{id:"bonus-threshold",type:"number",value:i.performanceIncentives.bonusThreshold,onChange:ge=>o(K=>({...K,performanceIncentives:{...K.performanceIncentives,bonusThreshold:Number(ge.target.value)}})),placeholder:"5000000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"bonus-reduction",children:"Royalty Reduction (%)"}),e.jsx(Wt,{id:"bonus-reduction",type:"number",step:"0.1",value:i.performanceIncentives.bonusReduction,onChange:ge=>o(K=>({...K,performanceIncentives:{...K.performanceIncentives,bonusReduction:Number(ge.target.value)}})),placeholder:"1.0"})]})]}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Franchisees exceeding ",i.performanceIncentives.bonusThreshold.toLocaleString(),"annual revenue receive a"," ",i.performanceIncentives.bonusReduction,"% royalty reduction."]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(yf,{className:"h-5 w-5"}),"Volume Discounts"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"volume-discounts",checked:(ee=i.volumeDiscounts)==null?void 0:ee.enabled,onCheckedChange:ge=>o(K=>({...K,volumeDiscounts:{...K.volumeDiscounts,enabled:!!ge}}))}),e.jsx(ct,{htmlFor:"volume-discounts",children:"Enable Volume Discounts"})]}),((ie=i.volumeDiscounts)==null?void 0:ie.enabled)&&e.jsxs("div",{className:"ml-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"multi-unit-discount",children:"Multi-Unit Discount (%)"}),e.jsx(Wt,{id:"multi-unit-discount",type:"number",step:"0.1",value:i.volumeDiscounts.multiUnitDiscount,onChange:ge=>o(K=>({...K,volumeDiscounts:{...K.volumeDiscounts,multiUnitDiscount:Number(ge.target.value)}})),placeholder:"0.5"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"loyalty-discount",children:"Loyalty Discount (%)"}),e.jsx(Wt,{id:"loyalty-discount",type:"number",step:"0.1",value:i.volumeDiscounts.loyaltyDiscount,onChange:ge=>o(K=>({...K,volumeDiscounts:{...K.volumeDiscounts,loyaltyDiscount:Number(ge.target.value)}})),placeholder:"0.25"})]})]}),e.jsxs("div",{className:"space-y-2 text-sm text-muted-foreground",children:[e.jsxs("p",{children:[" Multi-unit operators receive"," ",i.volumeDiscounts.multiUnitDiscount,"% royalty reduction"]}),e.jsxs("p",{children:[" Franchisees with 5+ years receive"," ",i.volumeDiscounts.loyaltyDiscount,"% loyalty discount"]})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Qv,{className:"h-5 w-5"}),"Royalty Simulation"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"simulation-revenue",children:"Annual Revenue ()"}),e.jsx(Wt,{id:"simulation-revenue",type:"number",value:p,onChange:ge=>g(Number(ge.target.value)),placeholder:"2400000"})]}),e.jsx(Ho,{}),e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:[O.rate.toFixed(2),"%"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Effective Royalty Rate"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",(O.amount/1e5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Annual Royalty"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold",children:["",(R/1e5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Marketing Fee"})]})]}),e.jsxs("div",{className:"p-4 bg-blue-50 border border-blue-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(XA,{className:"h-4 w-4 text-blue-600"}),e.jsx("span",{className:"font-medium text-blue-800",children:"Calculation Details"})]}),e.jsxs("div",{className:"text-sm text-blue-700 space-y-1",children:[e.jsxs("p",{children:["Revenue: ",p.toLocaleString()]}),e.jsxs("p",{children:["Royalty: ",O.amount.toLocaleString()," (",O.rate.toFixed(2),"%)"]}),e.jsxs("p",{children:["Marketing Fee: ",R.toLocaleString()]}),e.jsxs("p",{children:["Total Fees: ",(O.amount+R).toLocaleString()]})]})]})]})]})]})]})}const T4=["Franchise Fee","Equipment & Fixtures","Leasehold Improvements","Initial Inventory","Working Capital","Marketing & Signage","Training & Travel","Professional Fees","Insurance & Deposits","Technology & Software","Other"],P4=[{id:"sbi-loan",name:"SBI Business Loan",provider:"State Bank of India",interestRate:11.5,termMonths:84,maxAmount:5e6,description:"Collateral-based business loan for franchise setup"},{id:"hdfc-equipment",name:"HDFC Equipment Finance",provider:"HDFC Bank",interestRate:12,termMonths:60,maxAmount:3e6,description:"Equipment financing with equipment as collateral"},{id:"icici-working-capital",name:"ICICI Working Capital Loan",provider:"ICICI Bank",interestRate:13.5,termMonths:36,maxAmount:15e5,description:"Unsecured working capital for initial operations"}];function kY({initialItems:n=[],franchiseFee:t=8e5,onBreakdownChange:r,className:i}){const[o,l]=M.useState(n.length>0?n:[{id:"franchise-fee",category:"Franchise Fee",name:"Initial Franchise Fee",amount:t,isRequired:!0,paymentTiming:"upfront",description:"One-time franchise licensing fee"}]),[a,p]=M.useState({category:"Equipment & Fixtures",isRequired:!0,paymentTiming:"upfront"}),[g,w]=M.useState(!1),[j,S]=M.useState([]),T=o.reduce((ie,ge)=>ie+ge.amount,0),E=o.filter(ie=>ie.isRequired).reduce((ie,ge)=>ie+ge.amount,0);M.useEffect(()=>{r==null||r(o,T)},[o,T,r]);const O=()=>{if(a.name&&a.amount&&a.category){const ie={id:`item-${Date.now()}`,category:a.category,name:a.name,amount:a.amount,isRequired:a.isRequired||!1,description:a.description||"",financingAvailable:a.financingAvailable||!1,paymentTiming:a.paymentTiming||"upfront"};l(ge=>[...ge,ie]),p({category:"Equipment & Fixtures",isRequired:!0,paymentTiming:"upfront"})}},R=ie=>{l(ge=>ge.filter(K=>K.id!==ie))},F=(ie,ge)=>{l(K=>K.map(J=>J.id===ie?{...J,...ge}:J))},B=ie=>o.filter(ge=>ge.category===ie).reduce((ge,K)=>ge+K.amount,0),G=ie=>{const ge=B(ie);return T>0?ge/T*100:0},z=()=>j.reduce((ie,ge)=>{const K=P4.find(J=>J.id===ge);return ie+((K==null?void 0:K.maxAmount)||0)},0),ee=(ie,ge,K)=>{const J=ge/100/12;return ie*J*Math.pow(1+J,K)/(Math.pow(1+J,K)-1)};return e.jsxs("div",{className:`space-y-6 ${i}`,children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(AD,{className:"h-5 w-5"}),"Investment Summary"]})}),e.jsxs(ut,{children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mb-6",children:[e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-primary",children:["",(T/1e5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Total Investment"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-orange-600",children:["",(E/1e5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Required Investment"})]}),e.jsxs("div",{className:"text-center p-4 bg-muted rounded-lg",children:[e.jsxs("div",{className:"text-2xl font-bold text-green-600",children:["",((T-E)/1e5).toFixed(1),"L"]}),e.jsx("div",{className:"text-sm text-muted-foreground",children:"Optional Investment"})]})]}),e.jsxs("div",{className:"space-y-3",children:[e.jsx("h4",{className:"font-semibold",children:"Investment by Category"}),T4.map(ie=>{const ge=B(ie),K=G(ie);return ge===0?null:e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("span",{className:"text-sm font-medium",children:ie}),e.jsxs("span",{className:"text-sm",children:["",(ge/1e5).toFixed(1),"L (",K.toFixed(1),"%)"]})]}),e.jsx(vo,{value:K,className:"h-2"})]},ie)})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Qv,{className:"h-5 w-5"}),"Investment Breakdown"]})}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:o.map(ie=>e.jsxs("div",{className:"p-4 border rounded-lg space-y-3",children:[e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[e.jsx("h4",{className:"font-medium",children:ie.name}),e.jsx(Gt,{variant:ie.isRequired?"default":"secondary",children:ie.isRequired?"Required":"Optional"}),e.jsx(Gt,{variant:"outline",children:ie.category})]}),ie.description&&e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:ie.description}),e.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("span",{children:["Payment: ",ie.paymentTiming]}),ie.financingAvailable&&e.jsx("span",{className:"text-green-600",children:"Financing Available"})]})]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx("div",{className:"text-right",children:e.jsxs("div",{className:"font-semibold",children:["",ie.amount.toLocaleString()]})}),e.jsx(ze,{variant:"outline",size:"sm",onClick:()=>R(ie.id),disabled:ie.id==="franchise-fee",children:e.jsx(xf,{className:"h-4 w-4"})})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-3",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Amount ()"}),e.jsx(Wt,{type:"number",value:ie.amount,onChange:ge=>F(ie.id,{amount:Number(ge.target.value)})})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Payment Timing"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:ie.paymentTiming,onChange:ge=>F(ie.id,{paymentTiming:ge.target.value}),children:[e.jsx("option",{value:"upfront",children:"Upfront"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"annual",children:"Annual"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Options"}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:`required-${ie.id}`,checked:ie.isRequired,onCheckedChange:ge=>F(ie.id,{isRequired:!!ge}),disabled:ie.id==="franchise-fee"}),e.jsx(ct,{htmlFor:`required-${ie.id}`,className:"text-sm",children:"Required"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:`financing-${ie.id}`,checked:ie.financingAvailable,onCheckedChange:ge=>F(ie.id,{financingAvailable:!!ge})}),e.jsx(ct,{htmlFor:`financing-${ie.id}`,className:"text-sm",children:"Financing"})]})]})]})]})]},ie.id))}),e.jsxs("div",{className:"p-4 border-2 border-dashed rounded-lg space-y-4",children:[e.jsx("h4",{className:"font-medium",children:"Add Investment Item"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Category"}),e.jsx("select",{className:"w-full p-2 border rounded-md",value:a.category,onChange:ie=>p(ge=>({...ge,category:ie.target.value})),children:T4.map(ie=>e.jsx("option",{value:ie,children:ie},ie))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Item Name"}),e.jsx(Wt,{value:a.name||"",onChange:ie=>p(ge=>({...ge,name:ie.target.value})),placeholder:"e.g., Kitchen Equipment"})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Amount ()"}),e.jsx(Wt,{type:"number",value:a.amount||"",onChange:ie=>p(ge=>({...ge,amount:Number(ie.target.value)})),placeholder:"500000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Payment Timing"}),e.jsxs("select",{className:"w-full p-2 border rounded-md",value:a.paymentTiming,onChange:ie=>p(ge=>({...ge,paymentTiming:ie.target.value})),children:[e.jsx("option",{value:"upfront",children:"Upfront"}),e.jsx("option",{value:"monthly",children:"Monthly"}),e.jsx("option",{value:"quarterly",children:"Quarterly"}),e.jsx("option",{value:"annual",children:"Annual"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Description"}),e.jsx(Fl,{value:a.description||"",onChange:ie=>p(ge=>({...ge,description:ie.target.value})),placeholder:"Brief description of this investment item...",rows:2})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"new-required",checked:a.isRequired,onCheckedChange:ie=>p(ge=>({...ge,isRequired:!!ie}))}),e.jsx(ct,{htmlFor:"new-required",children:"Required"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"new-financing",checked:a.financingAvailable,onCheckedChange:ie=>p(ge=>({...ge,financingAvailable:!!ie}))}),e.jsx(ct,{htmlFor:"new-financing",children:"Financing Available"})]})]}),e.jsxs(ze,{onClick:O,disabled:!a.name||!a.amount,className:"w-full",children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Add Investment Item"]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(na,{className:"h-5 w-5"}),"Financing Options"]}),e.jsxs(ze,{variant:"outline",onClick:()=>w(!g),children:[g?"Hide":"Show"," Financing"]})]})}),g&&e.jsxs(ut,{className:"space-y-4",children:[e.jsx("div",{className:"space-y-3",children:P4.map(ie=>e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:ie.id,checked:j.includes(ie.id),onCheckedChange:ge=>{S(ge?K=>[...K,ie.id]:K=>K.filter(J=>J!==ie.id))}}),e.jsxs("div",{children:[e.jsx("h4",{className:"font-medium",children:ie.name}),e.jsx("p",{className:"text-sm text-muted-foreground",children:ie.provider})]})]}),e.jsxs("div",{className:"text-right",children:[e.jsxs("div",{className:"font-semibold",children:["",(ie.maxAmount/1e5).toFixed(1),"L max"]}),e.jsxs("div",{className:"text-sm text-muted-foreground",children:[ie.interestRate,"%  ",ie.termMonths," months"]})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-3",children:ie.description}),j.includes(ie.id)&&e.jsx("div",{className:"p-3 bg-muted rounded-lg",children:e.jsxs("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Monthly EMI: "}),"",ee(ie.maxAmount,ie.interestRate,ie.termMonths).toLocaleString()]}),e.jsxs("div",{children:[e.jsx("span",{className:"font-medium",children:"Total Interest: "}),"",(ee(ie.maxAmount,ie.interestRate,ie.termMonths)*ie.termMonths-ie.maxAmount).toLocaleString()]})]})})]},ie.id))}),j.length>0&&e.jsxs("div",{className:"p-4 bg-green-50 border border-green-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{className:"font-medium text-green-800",children:"Financing Summary"})]}),e.jsxs("div",{className:"text-sm text-green-700",children:[e.jsxs("p",{children:["Total financing available: ",(z()/1e5).toFixed(1),"L"]}),e.jsxs("p",{children:["Self-funding required: ",Math.max(0,(T-z())/1e5).toFixed(1),"L"]})]})]})]})]}),e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(wc,{className:"h-5 w-5"}),"Export Investment Plan"]})}),e.jsx(ut,{children:e.jsxs("div",{className:"flex gap-2",children:[e.jsxs(ze,{variant:"outline",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Download PDF"]}),e.jsxs(ze,{variant:"outline",children:[e.jsx(wc,{className:"h-4 w-4 mr-2"}),"Export Excel"]})]})})]})]})}const Pv=[{id:"brand-overview",title:"Brand Overview",description:"Basic brand information and outlet details",icon:$o},{id:"description",title:"Brand Description",description:"Detailed brand story and unique selling points",icon:Ys},{id:"investment",title:"Investment & Financials",description:"Investment requirements and financial projections",icon:yf},{id:"support",title:"Support & Training",description:"Training programs and ongoing support details",icon:Go},{id:"territory",title:"Territory & Requirements",description:"Available territories and demographic requirements",icon:Ja},{id:"franchisee-profile",title:"Franchisee Profile",description:"Ideal franchisee characteristics and requirements",icon:Go},{id:"media",title:"Media & Documents",description:"Brand assets and legal documentation",icon:Jd},{id:"contact",title:"Contact & Legal",description:"Contact information and legal details",icon:Bb},{id:"publishing",title:"Publishing Settings",description:"Listing visibility and contact preferences",icon:Ua}];function EY({initialData:n,onSave:t,onSubmit:r,onPreview:i,className:o}){var ye,Fe,Q;const[l,a]=M.useState(0),[p,g]=M.useState(new Set),[w,j]=M.useState(!1),[S,T]=M.useState(!1),[E,O]=M.useState(null),R=u5({resolver:d5(pY),defaultValues:n||{},mode:"onChange"}),{watch:F,formState:{errors:B,isValid:G}}=R,z=F();M.useEffect(()=>{const pe=setTimeout(()=>{t&&Object.keys(z).length>0&&(t(z,!0),O(new Date))},3e3);return()=>clearTimeout(pe)},[z,t]);const ee=()=>{l<Pv.length-1&&(g(pe=>new Set([...pe,l])),a(l+1))},ie=()=>{l>0&&a(l-1)},ge=pe=>{a(pe)},K=()=>{t&&(t(z,!0),O(new Date))},J=()=>{i&&i(z)},Se=()=>{G&&r&&r(z)},_e=pe=>{T(!0),j(!1)},re=(l+1)/Pv.length*100,ce=Pv[l],fe=()=>{var pe,me,Ue,Ke,Re,te,ue,Ne;switch(ce.id){case"brand-overview":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"brandName",children:"Brand Name *"}),e.jsx(Wt,{id:"brandName",...R.register("brandOverview.brandName"),placeholder:"Enter your brand name"}),((pe=B.brandOverview)==null?void 0:pe.brandName)&&e.jsx("p",{className:"text-sm text-red-600",children:B.brandOverview.brandName.message})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"tagline",children:"Brand Tagline *"}),e.jsx(Wt,{id:"tagline",...R.register("brandOverview.tagline"),placeholder:"Your brand's compelling tagline"}),((me=B.brandOverview)==null?void 0:me.tagline)&&e.jsx("p",{className:"text-sm text-red-600",children:B.brandOverview.tagline.message})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Industry *"}),e.jsxs(ys,{children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select industry"})}),e.jsx(os,{children:mY.map(Me=>e.jsx(pr,{value:Me.value,children:Me.label},Me.value))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{children:"Business Model *"}),e.jsxs(ys,{children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select business model"})}),e.jsx(os,{children:gY.map(Me=>e.jsx(pr,{value:Me.value,children:Me.label},Me.value))})]})]})]}),e.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"yearEstablished",children:"Year Established *"}),e.jsx(Wt,{id:"yearEstablished",type:"number",...R.register("brandOverview.yearEstablished",{valueAsNumber:!0}),placeholder:"2020"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"totalOutlets",children:"Total Outlets *"}),e.jsx(Wt,{id:"totalOutlets",type:"number",...R.register("brandOverview.totalOutlets",{valueAsNumber:!0}),placeholder:"50"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"companyOutlets",children:"Company Outlets"}),e.jsx(Wt,{id:"companyOutlets",type:"number",...R.register("brandOverview.companyOutlets",{valueAsNumber:!0}),placeholder:"10"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"franchiseOutlets",children:"Franchise Outlets"}),e.jsx(Wt,{id:"franchiseOutlets",type:"number",...R.register("brandOverview.franchiseOutlets",{valueAsNumber:!0}),placeholder:"40"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"website",children:"Website URL"}),e.jsx(Wt,{id:"website",type:"url",...R.register("brandOverview.website"),placeholder:"https://yourbrand.com"})]})]});case"investment":return e.jsxs("div",{className:"space-y-6",children:[!S&&e.jsxs("div",{className:"p-4 bg-yellow-50 border border-yellow-200 rounded-lg",children:[e.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[e.jsx(jc,{className:"h-5 w-5 text-yellow-600"}),e.jsx("h3",{className:"font-medium text-yellow-800",children:"Financial Information Protected"})]}),e.jsx("p",{className:"text-sm text-yellow-700 mb-3",children:"This section contains sensitive financial information. Please sign an NDA to proceed."}),e.jsx(ze,{onClick:()=>j(!0),variant:"outline",size:"sm",children:"Sign NDA to Continue"})]}),S&&e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Basic Investment Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"franchiseFee",children:"Franchise Fee () *"}),e.jsx(Wt,{id:"franchiseFee",type:"number",...R.register("investment.franchiseFee",{valueAsNumber:!0}),placeholder:"800000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"liquidCapital",children:"Liquid Capital Required () *"}),e.jsx(Wt,{id:"liquidCapital",type:"number",...R.register("investment.liquidCapitalRequired",{valueAsNumber:!0}),placeholder:"1500000"})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Total Investment Range () *"}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"minInvestment",children:"Minimum"}),e.jsx(Wt,{id:"minInvestment",type:"number",...R.register("investment.totalInvestment.min",{valueAsNumber:!0}),placeholder:"2500000"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"maxInvestment",children:"Maximum"}),e.jsx(Wt,{id:"maxInvestment",type:"number",...R.register("investment.totalInvestment.max",{valueAsNumber:!0}),placeholder:"4000000"})]})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Royalty & Fee Structure"}),e.jsx(CY,{onScheduleChange:Me=>{R.setValue("investment.royaltyStructure",Me)}})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Detailed Investment Breakdown"}),e.jsx(kY,{franchiseFee:((Ue=z.investment)==null?void 0:Ue.franchiseFee)||8e5,onBreakdownChange:(Me,We)=>{R.setValue("investment.investmentBreakdown",Me)}})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"ROI Projections & Analysis"}),e.jsx(SY,{initialInvestment:((Re=(Ke=z.investment)==null?void 0:Ke.totalInvestment)==null?void 0:Re.min)||25e5,franchiseFee:((te=z.investment)==null?void 0:te.franchiseFee)||8e5,royaltyPercentage:6,marketingFeePercentage:2,industryType:"food-beverage",locationTier:"tier2",onROIChange:Me=>{R.setValue("investment.roiProjections",{scenarios:Me})}})]})]})]});case"support":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"trainingDuration",children:"Initial Training Duration (Days) *"}),e.jsx(Wt,{id:"trainingDuration",type:"number",...R.register("support.initialTrainingDuration",{valueAsNumber:!0}),placeholder:"21"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Ongoing Support Types *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:vY.map(Me=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:Me}),e.jsx(ct,{htmlFor:Me,className:"text-sm",children:Me})]},Me))})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Marketing Support *"}),e.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 gap-2",children:yY.map(Me=>e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:Me}),e.jsx(ct,{htmlFor:Me,className:"text-sm",children:Me})]},Me))})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"qualityAssurance",children:"Quality Assurance Process *"}),e.jsx(Fl,{id:"qualityAssurance",...R.register("support.qualityAssurance"),placeholder:"Describe your quality assurance and monitoring processes...",rows:4})]})]});case"territory":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Territory Selection & Management"}),e.jsx(wY,{onTerritoriesChange:Me=>{R.setValue("territory.selectedTerritories",Me)},onProtectedTerritoryChange:Me=>{R.setValue("territory.protectedTerritoryEnabled",Me)}})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx("h4",{className:"font-semibold text-lg",children:"Multi-Unit Development Options"}),e.jsxs("div",{className:"p-4 border rounded-lg space-y-4",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"multi-unit-enabled",...R.register("territory.multiUnitDevelopment.enabled")}),e.jsx(ct,{htmlFor:"multi-unit-enabled",className:"font-medium",children:"Enable Multi-Unit Development Rights"})]}),((Ne=(ue=z.territory)==null?void 0:ue.multiUnitDevelopment)==null?void 0:Ne.enabled)&&e.jsxs("div",{className:"ml-6 space-y-4",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"minimum-units",children:"Minimum Units Required"}),e.jsx(Wt,{id:"minimum-units",type:"number",...R.register("territory.multiUnitDevelopment.minimumUnits",{valueAsNumber:!0}),placeholder:"3"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"development-timeline",children:"Development Timeline"}),e.jsx(Wt,{id:"development-timeline",...R.register("territory.multiUnitDevelopment.developmentTimeline"),placeholder:"36 months"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"additional-incentives",children:"Additional Incentives"}),e.jsx(Fl,{id:"additional-incentives",...R.register("territory.multiUnitDevelopment.additionalIncentives"),placeholder:"Describe any additional incentives for multi-unit developers...",rows:3})]})]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"territory-size",children:"Territory Size Description *"}),e.jsx(Wt,{id:"territory-size",...R.register("territory.territorySize"),placeholder:"e.g., 5km radius, City center, District-wide"})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"population-requirement",children:"Minimum Population"}),e.jsx(Wt,{id:"population-requirement",type:"number",...R.register("territory.populationRequirement",{valueAsNumber:!0}),placeholder:"100000"})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"demographic-profile",children:"Target Demographic Profile *"}),e.jsx(Fl,{id:"demographic-profile",...R.register("territory.demographicProfile"),placeholder:"Describe the ideal demographic profile for this franchise...",rows:3})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"competition-analysis",children:"Competition Analysis *"}),e.jsx(Fl,{id:"competition-analysis",...R.register("territory.competitionAnalysis"),placeholder:"Analyze the competitive landscape in target territories...",rows:3})]})]});case"publishing":return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"listingTitle",children:"Listing Title *"}),e.jsx(Wt,{id:"listingTitle",...R.register("publishing.listingTitle"),placeholder:"Profitable Food Franchise - Prime Locations Available"})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Listing Visibility *"}),e.jsxs(ys,{children:[e.jsx(as,{children:e.jsx(xs,{placeholder:"Select visibility"})}),e.jsxs(os,{children:[e.jsx(pr,{value:"public",children:"Public - Visible to all users"}),e.jsx(pr,{value:"verified_only",children:"Verified Users Only"}),e.jsx(pr,{value:"private",children:"Private - By invitation only"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Listing Options"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"featured"}),e.jsx(ct,{htmlFor:"featured",children:"Featured Listing (+5,000/month)"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"urgent"}),e.jsx(ct,{htmlFor:"urgent",children:"Urgent Listing Badge (+2,000/month)"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Contact Preferences"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"directContact"}),e.jsx(ct,{htmlFor:"directContact",children:"Allow direct contact from interested parties"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"requireNDA"}),e.jsx(ct,{htmlFor:"requireNDA",children:"Require NDA before sharing detailed information"})]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(ct,{children:"Legal Agreements *"}),e.jsxs("div",{className:"space-y-3",children:[e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"termsAccepted"}),e.jsx(ct,{htmlFor:"termsAccepted",children:"I accept the Terms of Service and Privacy Policy"})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"verificationConsent"}),e.jsx(ct,{htmlFor:"verificationConsent",children:"I consent to franchise verification process"})]})]})]})]});default:return e.jsx("div",{className:"text-center py-8",children:e.jsxs("p",{className:"text-muted-foreground",children:["Step content for ",ce.title," coming soon..."]})})}};return e.jsxs("div",{className:`max-w-4xl mx-auto ${o}`,children:[e.jsx(ot,{className:"mb-6",children:e.jsxs(Vt,{className:"pb-4",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsx(Ht,{className:"text-2xl",children:"Create Franchise Listing"}),e.jsxs(Ji,{children:["Step ",l+1," of ",Pv.length,":"," ",ce.title]})]}),E&&e.jsxs("div",{className:"text-sm text-muted-foreground",children:["Last saved: ",E.toLocaleTimeString()]})]}),e.jsx(vo,{value:re,className:"w-full"})]})}),e.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-4 gap-6",children:[e.jsx("div",{className:"lg:col-span-1",children:e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{className:"text-lg",children:"Steps"})}),e.jsx(ut,{className:"space-y-2",children:Pv.map((pe,me)=>{const Ue=pe.icon,Ke=p.has(me),Re=me===l;return e.jsx("button",{onClick:()=>ge(me),className:`w-full text-left p-3 rounded-lg border transition-colors ${Re?"border-primary bg-primary/5":Ke?"border-green-200 bg-green-50":"border-muted hover:bg-muted"}`,children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:`p-2 rounded-lg ${Re?"bg-primary text-primary-foreground":Ke?"bg-green-500 text-white":"bg-muted"}`,children:Ke?e.jsx(Nn,{className:"h-4 w-4"}):e.jsx(Ue,{className:"h-4 w-4"})}),e.jsxs("div",{className:"flex-1",children:[e.jsx("div",{className:"font-medium text-sm",children:pe.title}),e.jsx("div",{className:"text-xs text-muted-foreground",children:pe.description})]})]})},pe.id)})})]})}),e.jsxs("div",{className:"lg:col-span-3",children:[e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsxs("div",{className:"flex items-center gap-3",children:[e.jsx("div",{className:"p-2 bg-primary rounded-lg",children:e.jsx(ce.icon,{className:"h-5 w-5 text-primary-foreground"})}),e.jsxs("div",{children:[e.jsx(Ht,{children:ce.title}),e.jsx(Ji,{children:ce.description})]})]})}),e.jsx(ut,{children:fe()})]}),e.jsxs("div",{className:"flex items-center justify-between mt-6",children:[e.jsxs(ze,{variant:"outline",onClick:ie,disabled:l===0,children:[e.jsx(WA,{className:"h-4 w-4 mr-2"}),"Previous"]}),e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{variant:"outline",onClick:K,children:[e.jsx(ty,{className:"h-4 w-4 mr-2"}),"Save Draft"]}),e.jsxs(ze,{variant:"outline",onClick:J,children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"Preview"]}),l===Pv.length-1?e.jsxs(ze,{onClick:Se,disabled:!G,children:[e.jsx(aj,{className:"h-4 w-4 mr-2"}),"Submit Listing"]}):e.jsxs(ze,{onClick:ee,children:["Next",e.jsx(ej,{className:"h-4 w-4 ml-2"})]})]})]})]})]}),e.jsx(gP,{businessData:{name:(ye=z.brandOverview)==null?void 0:ye.brandName,industry:(Fe=z.brandOverview)==null?void 0:Fe.industry},className:"fixed bottom-6 right-6"}),e.jsx(mP,{isOpen:w,onClose:()=>j(!1),onAccept:_e,businessName:((Q=z.brandOverview)==null?void 0:Q.brandName)||"Franchise Opportunity",sellerName:"Franchise Owner",documentsCount:5})]})}function TY({className:n}){const t=Na(),{user:r}=Io(),[i,o]=M.useState(!1),[l,a]=M.useState([]),[p,g]=M.useState(null);M.useEffect(()=>{r||t("/login?redirect=/add-franchise-listing")},[r,t]),M.useEffect(()=>{const R=[{id:"draft-1",brandName:"FreshBite Caf",lastModified:new Date(Date.now()-72e5),completionPercentage:65,data:xY}];a(R)},[]);const w=()=>{g(null),o(!0)},j=R=>{g(R.data),o(!0)},S=(R,F)=>{var B;if(console.log("Saving franchise listing:",{data:R,isDraft:F}),F){const G={id:"current-draft",brandName:((B=R.brandOverview)==null?void 0:B.brandName)||"Untitled Franchise",lastModified:new Date,completionPercentage:O(R),data:R};a(z=>{const ee=z.filter(ie=>ie.id!=="current-draft");return[G,...ee]})}},T=async R=>{var F,B,G,z,ee,ie,ge,K,J,Se,_e,re,ce,fe,ye,Fe,Q,pe,me,Ue,Ke,Re,te,ue,Ne,Me,We,Ve,tt,Qe,St,Et,zt,Lt,wr,_t,Ye,$r,Cr,Zt,Be,it,at,Tt,kt,Ot,Qt,zr,Hr,Ur,nn,_r,Ri,_n,fi,kn;if(!r){alert("You must be logged in to submit a listing.");return}try{console.log("Submitting franchise listing:",R);const yn={brand_name:((F=R.brandOverview)==null?void 0:F.brandName)||"",industry:((G=(B=R.brandOverview)==null?void 0:B.industry)==null?void 0:G[0])||"",description:((z=R.description)==null?void 0:z.brandDescription)||"",franchise_fee:((ee=R.investment)==null?void 0:ee.franchiseFee)||0,total_investment_min:(ge=(ie=R.investment)==null?void 0:ie.totalInvestment)==null?void 0:ge.min,total_investment_max:(J=(K=R.investment)==null?void 0:K.totalInvestment)==null?void 0:J.max,royalty_percentage:((ce=(re=(_e=(Se=R.investment)==null?void 0:Se.royaltyStructure)==null?void 0:_e.baseTiers)==null?void 0:re[0])==null?void 0:ce.percentage)||0,marketing_fee_percentage:((ye=(fe=R.investment)==null?void 0:fe.marketingFee)==null?void 0:ye.value)||0,established_year:(Fe=R.brandOverview)==null?void 0:Fe.yearEstablished,total_outlets:(Q=R.brandOverview)==null?void 0:Q.totalOutlets,company_owned_outlets:(pe=R.brandOverview)==null?void 0:pe.companyOutlets,franchise_outlets:(me=R.brandOverview)==null?void 0:me.franchiseOutlets,headquarters_state:(Ke=(Ue=R.contact)==null?void 0:Ue.companyAddress)==null?void 0:Ke.state,headquarters_city:(te=(Re=R.contact)==null?void 0:Re.companyAddress)==null?void 0:te.city,headquarters_country:((Ne=(ue=R.contact)==null?void 0:ue.companyAddress)==null?void 0:Ne.country)||"India",tagline:(Me=R.brandOverview)==null?void 0:Me.tagline,brand_story:(We=R.description)==null?void 0:We.brandDescription,operating_locations:((Ve=R.brandOverview)==null?void 0:Ve.territories)||[],expansion_territories:((Qe=(tt=R.territory)==null?void 0:tt.selectedTerritories)==null?void 0:Qe.map(zn=>zn.name))||[],support_provided:((St=R.support)==null?void 0:St.ongoingSupport)||[],training_provided:!0,training_duration_days:(Et=R.support)==null?void 0:Et.initialTrainingDuration,marketing_support:(((Lt=(zt=R.support)==null?void 0:zt.marketingSupport)==null?void 0:Lt.length)||0)>0,minimum_net_worth:(wr=R.investment)==null?void 0:wr.liquidCapitalRequired,minimum_liquid_capital:(_t=R.investment)==null?void 0:_t.liquidCapitalRequired,experience_required:(Ye=R.franchiseeProfile)==null?void 0:Ye.experienceRequired,average_unit_revenue:(Cr=($r=R.investment)==null?void 0:$r.totalInvestment)==null?void 0:Cr.min,average_unit_profit:(Zt=R.investment)==null?void 0:Zt.averageROI,payback_period_months:(Be=R.investment)==null?void 0:Be.breakEvenPeriod,expected_roi_percentage:(it=R.investment)==null?void 0:it.averageROI,space_required_sqft:(at=R.territory)==null?void 0:at.populationRequirement,images:((kt=(Tt=R.media)==null?void 0:Tt.outletPhotos)==null?void 0:kt.map(zn=>zn.url))||[],logo_url:(zr=(Qt=(Ot=R.media)==null?void 0:Ot.brandLogo)==null?void 0:Qt[0])==null?void 0:zr.url,contact_email:(Ur=(Hr=R.contact)==null?void 0:Hr.primaryContact)==null?void 0:Ur.email,contact_phone:(_r=(nn=R.contact)==null?void 0:nn.primaryContact)==null?void 0:_r.phone,contact_person:(_n=(Ri=R.contact)==null?void 0:Ri.primaryContact)==null?void 0:_n.name,website:(fi=R.brandOverview)==null?void 0:fi.website,highlights:((kn=R.description)==null?void 0:kn.uniqueSellingPoints)||[]},va=await Gx.createFranchise(r.id,yn);console.log(" Franchise listing created:",va),alert("Franchise listing submitted successfully! Your listing is now under review. You'll be notified once it's approved."),setTimeout(()=>{t("/profile")},1500)}catch(yn){console.error("Error submitting franchise listing:",yn),alert(`Failed to submit franchise listing: ${yn.message||"Please try again."}`)}},E=R=>{console.log("Previewing franchise listing:",R),alert("Preview functionality - would show franchise listing preview")},O=R=>{const F=[R.brandOverview,R.description,R.investment,R.support,R.territory,R.franchiseeProfile,R.media,R.contact,R.publishing],B=F.filter(G=>G&&Object.keys(G).length>0).length;return Math.round(B/F.length*100)};return i?e.jsx("div",{className:"container mx-auto px-4 py-8",children:e.jsx(EY,{initialData:p||void 0,onSave:S,onSubmit:T,onPreview:E})}):e.jsxs("div",{className:`container mx-auto px-4 py-8 ${n}`,children:[e.jsxs("div",{className:"text-center mb-12",children:[e.jsxs("h1",{className:"text-4xl font-bold mb-4",children:["List Your ",e.jsx("span",{className:"text-primary",children:"Franchise Opportunity"})]}),e.jsx("p",{className:"text-xl text-muted-foreground max-w-3xl mx-auto",children:"Connect with qualified franchisees and expand your brand across India. Our AI-powered platform helps you find the right partners for sustainable growth."})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-12",children:[e.jsxs(ot,{className:"text-center",children:[e.jsxs(Vt,{children:[e.jsx(Go,{className:"h-12 w-12 text-primary mx-auto mb-4"}),e.jsx(Ht,{children:"Qualified Franchisees"})]}),e.jsx(ut,{children:e.jsx("p",{className:"text-muted-foreground",children:"Access our network of verified, investment-ready franchisees actively seeking opportunities in your industry."})})]}),e.jsxs(ot,{className:"text-center",children:[e.jsxs(Vt,{children:[e.jsx(bs,{className:"h-12 w-12 text-primary mx-auto mb-4"}),e.jsx(Ht,{children:"Secure Process"})]}),e.jsx(ut,{children:e.jsx("p",{className:"text-muted-foreground",children:"NDA protection, verified inquiries, and secure document sharing ensure your sensitive information stays protected."})})]}),e.jsxs(ot,{className:"text-center",children:[e.jsxs(Vt,{children:[e.jsx(nb,{className:"h-12 w-12 text-primary mx-auto mb-4"}),e.jsx(Ht,{children:"AI-Powered Matching"})]}),e.jsx(ut,{children:e.jsx("p",{className:"text-muted-foreground",children:"Our AI analyzes franchisee profiles and investment capacity to connect you with the most suitable candidates."})})]})]}),l.length>0&&e.jsxs(ot,{className:"mb-8",children:[e.jsx(Vt,{children:e.jsxs(Ht,{className:"flex items-center gap-2",children:[e.jsx(Ys,{className:"h-5 w-5"}),"Saved Drafts"]})}),e.jsx(ut,{children:e.jsx("div",{className:"space-y-4",children:l.map(R=>e.jsxs("div",{className:"flex items-center justify-between p-4 border rounded-lg hover:bg-muted/50 transition-colors",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-medium",children:R.brandName}),e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Last modified: ",R.lastModified.toLocaleString()]}),e.jsxs("div",{className:"flex items-center gap-2 mt-2",children:[e.jsx("div",{className:"w-32 h-2 bg-muted rounded-full overflow-hidden",children:e.jsx("div",{className:"h-full bg-primary transition-all",style:{width:`${R.completionPercentage}%`}})}),e.jsxs("span",{className:"text-sm text-muted-foreground",children:[R.completionPercentage,"% complete"]})]})]}),e.jsx(ze,{onClick:()=>j(R),children:"Continue"})]},R.id))})})]}),e.jsxs(ot,{className:"text-center",children:[e.jsx(Vt,{children:e.jsx(Ht,{className:"text-2xl",children:"Ready to Get Started?"})}),e.jsxs(ut,{className:"space-y-6",children:[e.jsx("p",{className:"text-muted-foreground",children:"Create a comprehensive franchise listing in just a few steps. Our guided wizard makes it easy to showcase your opportunity."}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 max-w-2xl mx-auto",children:[e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"What You'll Need"}),e.jsxs("ul",{className:"text-sm text-muted-foreground space-y-1",children:[e.jsx("li",{children:" Brand information and history"}),e.jsx("li",{children:" Investment and fee structure"}),e.jsx("li",{children:" Support and training details"}),e.jsx("li",{children:" Territory availability"}),e.jsx("li",{children:" Financial documents (FDD)"})]})]}),e.jsxs("div",{className:"p-4 border rounded-lg",children:[e.jsx("h3",{className:"font-medium mb-2",children:"Estimated Time"}),e.jsxs("div",{className:"flex items-center gap-2 text-sm text-muted-foreground",children:[e.jsx(Xd,{className:"h-4 w-4"}),e.jsx("span",{children:"15-30 minutes"})]}),e.jsx("p",{className:"text-sm text-muted-foreground mt-2",children:"Save your progress anytime and continue later"})]})]}),e.jsxs(ze,{size:"lg",onClick:w,className:"px-8",children:[e.jsx($o,{className:"h-5 w-5 mr-2"}),"Create Franchise Listing"]}),e.jsxs("div",{className:"flex items-center justify-center gap-4 text-sm text-muted-foreground",children:[e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"Free to list"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"No setup fees"})]}),e.jsxs("div",{className:"flex items-center gap-1",children:[e.jsx(Nn,{className:"h-4 w-4 text-green-600"}),e.jsx("span",{children:"24/7 support"})]})]})]})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"How It Works"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[{step:1,title:"Create Listing",description:"Fill out our comprehensive franchise listing form with your brand details.",icon:Ys},{step:2,title:"Review & Verify",description:"Our team reviews your listing and verifies the information for accuracy.",icon:bs},{step:3,title:"Get Matched",description:"AI matches your opportunity with qualified franchisees in your target markets.",icon:Go},{step:4,title:"Connect & Grow",description:"Connect with interested franchisees and grow your brand network.",icon:$o}].map(R=>e.jsxs("div",{className:"text-center",children:[e.jsxs("div",{className:"relative mb-4",children:[e.jsx("div",{className:"w-16 h-16 bg-primary rounded-full flex items-center justify-center mx-auto",children:e.jsx(R.icon,{className:"h-8 w-8 text-primary-foreground"})}),e.jsx(Gt,{className:"absolute -top-2 -right-2 w-6 h-6 rounded-full p-0 flex items-center justify-center",children:R.step})]}),e.jsx("h3",{className:"font-semibold mb-2",children:R.title}),e.jsx("p",{className:"text-sm text-muted-foreground",children:R.description})]},R.step))})]}),e.jsxs("div",{className:"mt-12",children:[e.jsx("h2",{className:"text-2xl font-bold text-center mb-8",children:"Frequently Asked Questions"}),e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[{question:"How much does it cost to list my franchise?",answer:"Basic listings are completely free. We offer premium features like featured placement and enhanced visibility for additional fees."},{question:"How long does the approval process take?",answer:"Most franchise listings are reviewed and approved within 24-48 hours. Complex listings may take up to 5 business days."},{question:"What documents do I need to provide?",answer:"You'll need your Franchise Disclosure Document (FDD), financial statements, brand assets, and legal registration documents."},{question:"How do you verify franchisee qualifications?",answer:"We verify financial capacity, background checks, and industry experience to ensure only qualified candidates contact you."}].map((R,F)=>e.jsxs(ot,{children:[e.jsx(Vt,{children:e.jsx(Ht,{className:"text-lg",children:R.question})}),e.jsx(ut,{children:e.jsx("p",{className:"text-muted-foreground",children:R.answer})})]},F))})]})]})}const R4=n=>new Intl.NumberFormat("en-IN",{style:"currency",currency:"INR",maximumFractionDigits:0}).format(n),I4={draft:{label:"Draft",icon:ab,color:"text-gray-500 bg-gray-100"},pending_review:{label:"Under Review",icon:Xd,color:"text-yellow-600 bg-yellow-100"},active:{label:"Active",icon:Nn,color:"text-green-600 bg-green-100"},inactive:{label:"Inactive",icon:jc,color:"text-gray-600 bg-gray-100"},rejected:{label:"Rejected",icon:zx,color:"text-red-600 bg-red-100"},sold:{label:"Sold",icon:Nn,color:"text-blue-600 bg-blue-100"}};function PY({className:n}){const t=Na(),{user:r}=Io(),[i,o]=M.useState([]),[l,a]=M.useState([]),[p,g]=M.useState(!0);M.useEffect(()=>{if(!r){t("/login?redirect=/my-listings");return}w()},[r,t]);const w=async()=>{if(r)try{g(!0);const[O,R]=await Promise.all([f_.getUserBusinesses(r.id),Gx.getUserFranchises(r.id)]);o(O||[]),a(R||[])}catch(O){console.error("Error loading listings:",O)}finally{g(!1)}},j=({status:O})=>{const R=I4[O]||I4.draft,F=R.icon;return e.jsxs(Gt,{variant:"secondary",className:er("gap-1",R.color),children:[e.jsx(F,{className:"h-3 w-3"}),R.label]})},S=({business:O})=>e.jsx(ot,{className:"hover:shadow-md transition-shadow",children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:O.name}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[O.city,", ",O.state]}),e.jsx("p",{className:"text-lg font-bold text-primary",children:R4(O.price)})]}),e.jsx(j,{status:O.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-muted-foreground mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",children:"Industry"}),e.jsx("div",{className:"font-medium text-foreground",children:O.industry})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",children:"Views"}),e.jsx("div",{className:"font-medium text-foreground",children:O.views_count||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",children:"Inquiries"}),e.jsx("div",{className:"font-medium text-foreground",children:O.inquiries_count||0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Kr,{to:`/business/${O.id}`,className:"flex-1",children:e.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"View"]})}),e.jsxs(ze,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(ab,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})}),T=({franchise:O})=>e.jsx(ot,{className:"hover:shadow-md transition-shadow",children:e.jsxs(ut,{className:"p-4",children:[e.jsxs("div",{className:"flex items-start justify-between mb-3",children:[e.jsxs("div",{className:"flex-1",children:[e.jsx("h3",{className:"font-semibold text-lg mb-1",children:O.brand_name}),e.jsxs("p",{className:"text-sm text-muted-foreground mb-2",children:[O.headquarters_city,", ",O.headquarters_state]}),e.jsx("p",{className:"text-lg font-bold text-primary",children:R4(O.franchise_fee)})]}),e.jsx(j,{status:O.status})]}),e.jsxs("div",{className:"grid grid-cols-3 gap-2 text-sm text-muted-foreground mb-3",children:[e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",children:"Industry"}),e.jsx("div",{className:"font-medium text-foreground",children:O.industry})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",children:"Views"}),e.jsx("div",{className:"font-medium text-foreground",children:O.views_count||0})]}),e.jsxs("div",{children:[e.jsx("div",{className:"text-xs",children:"Applications"}),e.jsx("div",{className:"font-medium text-foreground",children:O.applications_count||0})]})]}),e.jsxs("div",{className:"flex gap-2",children:[e.jsx(Kr,{to:`/franchise/${O.id}`,className:"flex-1",children:e.jsxs(ze,{variant:"outline",size:"sm",className:"w-full",children:[e.jsx(Ua,{className:"h-4 w-4 mr-2"}),"View"]})}),e.jsxs(ze,{variant:"outline",size:"sm",disabled:!0,children:[e.jsx(ab,{className:"h-4 w-4 mr-2"}),"Edit"]})]})]})});if(p)return e.jsx("div",{className:er("container mx-auto px-4 py-8",n),children:e.jsx("div",{className:"flex items-center justify-center min-h-[400px]",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading your listings..."})]})})});const E=i.length+l.length;return e.jsxs("div",{className:er("container mx-auto px-4 py-8",n),children:[e.jsxs("div",{className:"mb-8",children:[e.jsx("h1",{className:"text-3xl font-bold mb-2",children:"My Listings"}),e.jsx("p",{className:"text-muted-foreground",children:"Manage your business and franchise listings"})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-8",children:[e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Listings"}),e.jsx("p",{className:"text-2xl font-bold",children:E})]}),e.jsx(vm,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Businesses"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(vm,{className:"h-8 w-8 text-blue-600"})]})})}),e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Franchises"}),e.jsx("p",{className:"text-2xl font-bold",children:l.length})]}),e.jsx(gm,{className:"h-8 w-8 text-green-600"})]})})}),e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Active"}),e.jsx("p",{className:"text-2xl font-bold",children:i.filter(O=>O.status==="active").length+l.filter(O=>O.status==="active").length})]}),e.jsx(Nn,{className:"h-8 w-8 text-green-600"})]})})})]}),E===0?e.jsx(ot,{children:e.jsx(ut,{className:"p-12 text-center",children:e.jsxs("div",{className:"max-w-md mx-auto",children:[e.jsx(vm,{className:"h-16 w-16 text-muted-foreground mx-auto mb-4"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No listings yet"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Start by creating your first business or franchise listing"}),e.jsxs("div",{className:"flex gap-3 justify-center",children:[e.jsx(Kr,{to:"/add-business-listing",children:e.jsxs(ze,{children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"List a Business"]})}),e.jsx(Kr,{to:"/add-franchise-listing",children:e.jsxs(ze,{variant:"outline",children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"List a Franchise"]})})]})]})})}):e.jsxs(_p,{defaultValue:"all",className:"w-full",children:[e.jsxs(Sf,{className:"mb-6",children:[e.jsxs(Di,{value:"all",children:["All (",E,")"]}),e.jsxs(Di,{value:"businesses",children:["Businesses (",i.length,")"]}),e.jsxs(Di,{value:"franchises",children:["Franchises (",l.length,")"]})]}),e.jsx(Qi,{value:"all",className:"space-y-4",children:e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[i.map(O=>e.jsx(S,{business:O},O.id)),l.map(O=>e.jsx(T,{franchise:O},O.id))]})}),e.jsx(Qi,{value:"businesses",className:"space-y-4",children:i.length===0?e.jsx(ot,{children:e.jsxs(ut,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No business listings yet"}),e.jsx(Kr,{to:"/add-business-listing",children:e.jsxs(ze,{children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Create Business Listing"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:i.map(O=>e.jsx(S,{business:O},O.id))})}),e.jsx(Qi,{value:"franchises",className:"space-y-4",children:l.length===0?e.jsx(ot,{children:e.jsxs(ut,{className:"p-8 text-center",children:[e.jsx("p",{className:"text-muted-foreground mb-4",children:"No franchise listings yet"}),e.jsx(Kr,{to:"/add-franchise-listing",children:e.jsxs(ze,{children:[e.jsx(Lh,{className:"h-4 w-4 mr-2"}),"Create Franchise Listing"]})})]})}):e.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:l.map(O=>e.jsx(T,{franchise:O},O.id))})})]})]})}function RY({className:n}){const t=Na(),{user:r}=Io(),{refreshSavedCount:i,toggleSave:o,isListingSaved:l}=VA(),[a,p]=M.useState([]),[g,w]=M.useState(!0),[j,S]=M.useState("grid"),[T,E]=M.useState("recent"),[O,R]=M.useState("all");M.useEffect(()=>{r&&F()},[r]);const F=async()=>{if(r){w(!0);try{const K=await wx.getSavedListings(r.id);p(K)}catch(K){console.error("Error fetching saved listings:",K)}finally{w(!1)}}},B=async(K,J)=>{if(r)try{await o(K,J),p(Se=>Se.filter(_e=>!(_e.listing_type===K&&_e.listing_id===J)))}catch(Se){console.error("Error unsaving listing:",Se)}},G=(K,J)=>{t(`/${K}/${J}`)},ee=[...a.filter(K=>O==="all"?!0:K.listing_type===O)].sort((K,J)=>{var Se,_e,re,ce,fe,ye;switch(T){case"recent":return new Date(J.created_at).getTime()-new Date(K.created_at).getTime();case"oldest":return new Date(K.created_at).getTime()-new Date(J.created_at).getTime();case"alphabetical":const Fe=K.listing_type==="business"?((Se=K.listing)==null?void 0:Se.name)||"":((_e=K.listing)==null?void 0:_e.brand_name)||((re=K.listing)==null?void 0:re.brandName)||"",Q=J.listing_type==="business"?((ce=J.listing)==null?void 0:ce.name)||"":((fe=J.listing)==null?void 0:fe.brand_name)||((ye=J.listing)==null?void 0:ye.brandName)||"";return Fe.localeCompare(Q);default:return 0}}),ie=a.filter(K=>K.listing_type==="business").length,ge=a.filter(K=>K.listing_type==="franchise").length;return r?e.jsxs("div",{className:er("min-h-screen bg-background",n),children:[e.jsx("div",{className:"bg-background border-b border-border",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx("div",{className:"flex items-center justify-between mb-4",children:e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(Rg,{className:"h-8 w-8 fill-current text-red-500"}),"Saved Listings"]}),e.jsxs("p",{className:"text-muted-foreground",children:[a.length," ",a.length===1?"listing":"listings"," saved"]})]})}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4 mt-6",children:[e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total Saved"}),e.jsx("p",{className:"text-2xl font-bold",children:a.length})]}),e.jsx(kx,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Businesses"}),e.jsx("p",{className:"text-2xl font-bold",children:ie})]}),e.jsx($o,{className:"h-8 w-8 text-blue-500"})]})})}),e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Franchises"}),e.jsx("p",{className:"text-2xl font-bold",children:ge})]}),e.jsx(vm,{className:"h-8 w-8 text-green-500"})]})})})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(ot,{className:"mb-6",children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex flex-col sm:flex-row items-start sm:items-center justify-between gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsxs(ze,{variant:O==="all"?"default":"outline",size:"sm",onClick:()=>R("all"),children:["All",e.jsx(Gt,{variant:"secondary",className:"ml-2",children:a.length})]}),e.jsxs(ze,{variant:O==="business"?"default":"outline",size:"sm",onClick:()=>R("business"),children:[e.jsx($o,{className:"h-4 w-4 mr-2"}),"Businesses",e.jsx(Gt,{variant:"secondary",className:"ml-2",children:ie})]}),e.jsxs(ze,{variant:O==="franchise"?"default":"outline",size:"sm",onClick:()=>R("franchise"),children:[e.jsx(vm,{className:"h-4 w-4 mr-2"}),"Franchises",e.jsx(Gt,{variant:"secondary",className:"ml-2",children:ge})]})]}),e.jsxs("div",{className:"flex items-center gap-4",children:[e.jsxs("div",{className:"flex items-center gap-2",children:[e.jsx(Qw,{className:"h-4 w-4"}),e.jsxs(ys,{value:T,onValueChange:K=>E(K),children:[e.jsx(as,{className:"w-40",children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"recent",children:"Most Recent"}),e.jsx(pr,{value:"oldest",children:"Oldest First"}),e.jsx(pr,{value:"alphabetical",children:"Alphabetical"})]})]})]}),e.jsxs("div",{className:"flex items-center border rounded-md",children:[e.jsx(ze,{variant:j==="grid"?"default":"ghost",size:"sm",onClick:()=>S("grid"),className:"rounded-r-none",children:e.jsx(rj,{className:"h-4 w-4"})}),e.jsx(ze,{variant:j==="list"?"default":"ghost",size:"sm",onClick:()=>S("list"),className:"rounded-l-none",children:e.jsx(sj,{className:"h-4 w-4"})})]})]})]})})}),g?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading saved listings..."})]})}):ee.length===0?e.jsx(ot,{children:e.jsxs(ut,{className:"p-12 text-center",children:[e.jsx(kx,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Saved Listings"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:O==="all"?"You haven't saved any listings yet. Start browsing to save your favorites!":`You haven't saved any ${O} listings yet.`}),e.jsxs("div",{className:"flex gap-4 justify-center",children:[e.jsxs(ze,{onClick:()=>t("/businesses"),children:[e.jsx($o,{className:"h-4 w-4 mr-2"}),"Browse Businesses"]}),e.jsxs(ze,{variant:"outline",onClick:()=>t("/franchises"),children:[e.jsx(vm,{className:"h-4 w-4 mr-2"}),"Browse Franchises"]})]})]})}):e.jsx("div",{className:er(j==="grid"?"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6":"space-y-4"),children:ee.map(K=>K.listing?K.listing_type==="business"?e.jsx(xm,{business:K.listing,onSave:()=>B("business",K.listing_id),onViewDetails:()=>G("business",K.listing_id),isSaved:!0},K.id):e.jsx(Ng,{franchise:K.listing,onSave:()=>B("franchise",K.listing_id),onViewDetails:()=>G("franchise",K.listing_id),isSaved:!0},K.id):null)})]})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(ot,{className:"max-w-md",children:e.jsxs(ut,{className:"p-8 text-center",children:[e.jsx(kx,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please sign in to view your saved listings"}),e.jsx(ze,{onClick:()=>t("/login"),children:"Sign In"})]})})})}const IY={inquiry:sb,message:bu,listing_approved:iO,listing_rejected:oO,verification_approved:jm,verification_rejected:m8,saved_listing_update:Rg,new_inquiry:sb,inquiry_response:bu,system:Ih},LY={inquiry:"text-blue-500",message:"text-purple-500",listing_approved:"text-green-500",listing_rejected:"text-red-500",verification_approved:"text-green-500",verification_rejected:"text-red-500",saved_listing_update:"text-pink-500",new_inquiry:"text-blue-500",inquiry_response:"text-purple-500",system:"text-gray-500"};function MY({className:n}){const t=Na(),{user:r}=Io(),{notifications:i,unreadCount:o,loading:l,markAsRead:a,markAllAsRead:p,deleteNotification:g,deleteAllRead:w}=HA(),[j,S]=M.useState("all"),T=i.filter(F=>j==="unread"?!F.read:j==="read"?F.read:!0),E=async F=>{F.read||await a(F.id),F.action_url&&t(F.action_url)},O=F=>{const B=new Date(F),z=Math.floor((new Date().getTime()-B.getTime())/1e3);return z<60?"Just now":z<3600?`${Math.floor(z/60)}m ago`:z<86400?`${Math.floor(z/3600)}h ago`:z<604800?`${Math.floor(z/86400)}d ago`:B.toLocaleDateString()},R=({type:F})=>{const B=IY[F]||Ih,G=LY[F]||"text-gray-500";return e.jsx(B,{className:er("h-5 w-5",G)})};return r?e.jsxs("div",{className:er("min-h-screen bg-background",n),children:[e.jsx("div",{className:"bg-background border-b border-border",children:e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("div",{children:[e.jsxs("h1",{className:"text-3xl font-bold mb-2 flex items-center gap-2",children:[e.jsx(Ih,{className:"h-8 w-8"}),"Notifications"]}),e.jsx("p",{className:"text-muted-foreground",children:o>0?e.jsxs(e.Fragment,{children:[o," unread ",o===1?"notification":"notifications"]}):"You're all caught up!"})]}),e.jsxs("div",{className:"flex gap-2",children:[o>0&&e.jsxs(ze,{variant:"outline",onClick:p,children:[e.jsx(kD,{className:"h-4 w-4 mr-2"}),"Mark All Read"]}),i.some(F=>F.read)&&e.jsxs(ze,{variant:"outline",onClick:w,children:[e.jsx(xf,{className:"h-4 w-4 mr-2"}),"Clear Read"]})]})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Total"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length})]}),e.jsx(bO,{className:"h-8 w-8 text-primary"})]})})}),e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Unread"}),e.jsx("p",{className:"text-2xl font-bold",children:o})]}),e.jsx(bu,{className:"h-8 w-8 text-orange-500"})]})})}),e.jsx(ot,{children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm text-muted-foreground",children:"Read"}),e.jsx("p",{className:"text-2xl font-bold",children:i.length-o})]}),e.jsx(OO,{className:"h-8 w-8 text-green-500"})]})})})]})]})}),e.jsxs("div",{className:"container mx-auto px-4 py-6",children:[e.jsx(_p,{value:j,onValueChange:F=>S(F),className:"mb-6",children:e.jsxs(Sf,{children:[e.jsxs(Di,{value:"all",children:["All",e.jsx(Gt,{variant:"secondary",className:"ml-2",children:i.length})]}),e.jsxs(Di,{value:"unread",children:["Unread",o>0&&e.jsx(Gt,{className:"ml-2 bg-orange-500",children:o})]}),e.jsxs(Di,{value:"read",children:["Read",e.jsx(Gt,{variant:"secondary",className:"ml-2",children:i.length-o})]})]})}),l?e.jsx("div",{className:"flex items-center justify-center py-12",children:e.jsxs("div",{className:"text-center",children:[e.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-primary mx-auto mb-4"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading notifications..."})]})}):T.length===0?e.jsx(ot,{children:e.jsxs(ut,{className:"p-12 text-center",children:[e.jsx(Ih,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h3",{className:"text-xl font-semibold mb-2",children:"No Notifications"}),e.jsx("p",{className:"text-muted-foreground",children:j==="unread"?"You have no unread notifications":j==="read"?"You have no read notifications":"You don't have any notifications yet"})]})}):e.jsx("div",{className:"space-y-2",children:T.map(F=>e.jsx(ot,{className:er("cursor-pointer transition-all hover:shadow-md",!F.read&&"bg-blue-50/50 dark:bg-blue-950/20 border-blue-200 dark:border-blue-800"),children:e.jsx(ut,{className:"p-4",children:e.jsxs("div",{className:"flex items-start gap-4",children:[e.jsx("div",{className:er("p-2 rounded-full",F.read?"bg-muted":"bg-blue-100 dark:bg-blue-900"),children:e.jsx(R,{type:F.type})}),e.jsxs("div",{className:"flex-1 min-w-0",onClick:()=>E(F),children:[e.jsxs("div",{className:"flex items-start justify-between gap-2 mb-1",children:[e.jsx("h4",{className:er("font-semibold",!F.read&&"text-primary"),children:F.title}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[e.jsx("span",{className:"text-xs text-muted-foreground whitespace-nowrap",children:O(F.created_at)}),!F.read&&e.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full"})]})]}),e.jsx("p",{className:"text-sm text-muted-foreground mb-2",children:F.message}),F.action_url&&e.jsxs(ze,{variant:"link",size:"sm",className:"h-auto p-0 text-xs",children:["View Details",e.jsx(JD,{className:"h-3 w-3 ml-1"})]})]}),e.jsxs("div",{className:"flex items-center gap-2 flex-shrink-0",children:[!F.read&&e.jsx(ze,{variant:"ghost",size:"sm",onClick:B=>{B.stopPropagation(),a(F.id)},title:"Mark as read",children:e.jsx(Rm,{className:"h-4 w-4"})}),e.jsx(ze,{variant:"ghost",size:"sm",onClick:B=>{B.stopPropagation(),g(F.id)},title:"Delete",children:e.jsx(xf,{className:"h-4 w-4"})})]})]})})},F.id))})]})]}):e.jsx("div",{className:"min-h-screen bg-background flex items-center justify-center",children:e.jsx(ot,{className:"max-w-md",children:e.jsxs(ut,{className:"p-8 text-center",children:[e.jsx(Ih,{className:"h-16 w-16 mx-auto mb-4 text-muted-foreground"}),e.jsx("h2",{className:"text-2xl font-bold mb-2",children:"Sign In Required"}),e.jsx("p",{className:"text-muted-foreground mb-6",children:"Please sign in to view your notifications"}),e.jsx(ze,{onClick:()=>t("/login"),children:"Sign In"})]})})})}function DY(){var J,Se;const n=Na(),t=xd(),{signInWithEmail:r,verifyEmailOTP:i,resendEmailOTP:o}=Io(),[l,a]=M.useState(""),[p,g]=M.useState(""),[w,j]=M.useState("email"),[S,T]=M.useState(!1),[E,O]=M.useState(null),[R,F]=M.useState(!1),[B,G]=M.useState(60),z=((Se=(J=t.state)==null?void 0:J.from)==null?void 0:Se.pathname)||"/";Ft.useEffect(()=>{if(w==="otp"&&B>0){const _e=setTimeout(()=>{G(B-1),B===1&&F(!0)},1e3);return()=>clearTimeout(_e)}},[w,B]);const ee=async _e=>{if(_e.preventDefault(),O(null),T(!0),!l.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)){O("Please enter a valid email address"),T(!1);return}const{error:re}=await r(l);if(T(!1),re){O(re.message);return}j("otp"),G(60),F(!1)},ie=async _e=>{if(_e.preventDefault(),O(null),T(!0),p.length!==6){O("Please enter a valid 6-digit OTP code"),T(!1);return}const{error:re}=await i({email:l,token:p});if(T(!1),re){O(re.message);return}await new Promise(ce=>setTimeout(ce,500)),n(z,{replace:!0})},ge=async()=>{O(null),T(!0),F(!1);const{error:_e}=await o(l);if(T(!1),_e){O(_e.message),F(!0);return}G(60)},K=()=>{j("email"),g(""),O(null)};return e.jsxs(ot,{className:"w-full max-w-md mx-auto",children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Sign In"}),e.jsx(Ji,{children:"Welcome back to BizSearch"})]}),e.jsx(ut,{children:e.jsxs("form",{onSubmit:w==="email"?ee:ie,className:"space-y-4",children:[E&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:E})}),w==="email"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"email",children:"Email"}),e.jsxs("div",{className:"relative",children:[e.jsx(bu,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Wt,{id:"email",type:"email",placeholder:"you@example.com",value:l,onChange:_e=>a(_e.target.value),className:"pl-10",required:!0,disabled:S})]})]}),e.jsx(ze,{type:"submit",className:"w-full",disabled:S,children:S?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"otp",children:"Enter OTP"}),e.jsxs("div",{className:"relative",children:[e.jsx(JA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Wt,{id:"otp",type:"text",placeholder:"123456",value:p,onChange:_e=>g(_e.target.value.replace(/\D/g,"").slice(0,6)),className:"pl-10 text-center text-2xl tracking-widest",maxLength:6,required:!0,disabled:S,autoFocus:!0})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Enter the 6-digit code sent to ",l]})]}),e.jsx(ze,{type:"submit",className:"w-full",disabled:S||p.length!==6,children:S?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify OTP"}),e.jsxs("div",{className:"text-center space-y-2",children:[R?e.jsx(ze,{type:"button",variant:"link",onClick:ge,disabled:S,className:"text-sm",children:"Resend OTP"}):e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Resend OTP in ",B,"s"]}),e.jsx(ze,{type:"button",variant:"link",onClick:K,disabled:S,className:"text-sm",children:"Change Email Address"})]})]}),e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Don't have an account?"," ",e.jsx(ze,{variant:"link",className:"p-0 h-auto",onClick:()=>n("/signup"),children:"Sign up"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(ze,{type:"button",variant:"outline",className:"w-full",onClick:()=>n("/login/phone"),disabled:S,children:"Sign in with Phone Number"})]})})]})}function OY(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:e.jsx(DY,{})})}function zY(){const n=Na(),{signInWithPhone:t,verifyOTP:r,resendOTP:i}=Io(),[o,l]=M.useState(""),[a,p]=M.useState(""),[g,w]=M.useState("phone"),[j,S]=M.useState(!1),[T,E]=M.useState(null),[O,R]=M.useState(!1),[F,B]=M.useState(60);Ft.useEffect(()=>{if(g==="otp"&&F>0){const ge=setTimeout(()=>{B(F-1),F===1&&R(!0)},1e3);return()=>clearTimeout(ge)}},[g,F]);const G=async ge=>{if(ge.preventDefault(),E(null),S(!0),!o.match(/^\+?[1-9]\d{1,14}$/)){E("Please enter a valid phone number with country code (e.g., +919876543210)"),S(!1);return}const{error:K}=await i(o);if(S(!1),K){E(K.message);return}w("otp"),B(60),R(!1)},z=async ge=>{if(ge.preventDefault(),E(null),S(!0),a.length!==6){E("Please enter a valid 6-digit OTP code"),S(!1);return}const{error:K}=await r({phone:o,token:a});if(S(!1),K){E(K.message);return}n("/")},ee=async()=>{E(null),S(!0),R(!1);const{error:ge}=await i(o);if(S(!1),ge){E(ge.message),R(!0);return}B(60)},ie=()=>{w("phone"),p(""),E(null)};return e.jsxs("form",{onSubmit:g==="phone"?G:z,className:"space-y-6",children:[T&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:T})}),g==="phone"?e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"phone",children:"Phone Number"}),e.jsxs("div",{className:"relative",children:[e.jsx(Kc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Wt,{id:"phone",type:"tel",placeholder:"+919876543210",value:o,onChange:ge=>l(ge.target.value),className:"pl-10",required:!0,disabled:j})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Include country code (e.g., +91 for India)"})]}),e.jsx(ze,{type:"submit",className:"w-full",size:"lg",disabled:j,children:j?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Sending OTP..."]}):"Send OTP"})]}):e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"otp",children:"Enter OTP"}),e.jsxs("div",{className:"relative",children:[e.jsx(JA,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Wt,{id:"otp",type:"text",placeholder:"123456",value:a,onChange:ge=>p(ge.target.value.replace(/\D/g,"").slice(0,6)),className:"pl-10 text-center text-2xl tracking-widest",maxLength:6,required:!0,disabled:j,autoFocus:!0})]}),e.jsxs("p",{className:"text-xs text-muted-foreground text-center",children:["Enter the 6-digit code sent to ",o]})]}),e.jsx(ze,{type:"submit",className:"w-full",size:"lg",disabled:j||a.length!==6,children:j?e.jsxs(e.Fragment,{children:[e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Verifying..."]}):"Verify OTP"}),e.jsxs("div",{className:"text-center space-y-2",children:[O?e.jsx(ze,{type:"button",variant:"link",onClick:ee,disabled:j,className:"text-sm",children:"Resend OTP"}):e.jsxs("p",{className:"text-sm text-muted-foreground",children:["Resend OTP in ",F,"s"]}),e.jsx(ze,{type:"button",variant:"link",onClick:ie,disabled:j,className:"text-sm",children:"Change Phone Number"})]})]}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground",children:["Don't have an account?"," ",e.jsx(Kr,{to:"/signup/phone",className:"text-primary hover:underline font-medium",children:"Sign up with phone"})," or ",e.jsx(Kr,{to:"/signup",className:"text-primary hover:underline font-medium",children:"email"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(Kr,{to:"/login",children:e.jsx(ze,{variant:"outline",type:"button",className:"w-full",children:"Sign in with Email"})})]})}function FY(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center p-4",children:e.jsxs("div",{className:"w-full max-w-md",children:[e.jsxs("div",{className:"text-center mb-8",children:[e.jsxs(Kr,{to:"/",className:"inline-flex items-center gap-2 mb-6",children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-primary rounded-lg",children:e.jsx($o,{className:"h-7 w-7 text-primary-foreground"})}),e.jsx("span",{className:"text-2xl font-bold",children:"BizSearch"})]}),e.jsx("h1",{className:"text-3xl font-bold text-foreground mb-2",children:"Sign in with Phone"}),e.jsx("p",{className:"text-muted-foreground",children:"Enter your phone number and password to access your account"})]}),e.jsx("div",{className:"bg-white rounded-2xl shadow-xl p-8",children:e.jsx(zY,{})}),e.jsxs("p",{className:"text-center text-sm text-muted-foreground mt-8",children:["By signing in, you agree to our"," ",e.jsx(Kr,{to:"/terms",className:"text-primary hover:underline",children:"Terms of Service"})," ","and"," ",e.jsx(Kr,{to:"/privacy",className:"text-primary hover:underline",children:"Privacy Policy"})]})]})})}function BY(){const n=Na(),{signUp:t}=Io(),[r,i]=M.useState(!1),[o,l]=M.useState(null),[a,p]=M.useState(!1),[g,w]=M.useState(!1),[j,S]=M.useState({email:"",password:"",confirmPassword:"",displayName:"",role:"buyer",acceptTerms:!1}),[T,E]=M.useState({}),O=__(j.password),R=async F=>{F.preventDefault(),l(null),E({});const B=DW.safeParse(j);if(!B.success){E(Cy(B.error));return}i(!0);try{const{error:G}=await t({email:j.email,password:j.password,displayName:j.displayName,role:j.role});if(G)throw G;await new Promise(z=>setTimeout(z,1500)),n("/",{replace:!0})}catch(G){l(Og(G))}finally{i(!1)}};return e.jsxs(ot,{className:"w-full max-w-md mx-auto",children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Create Account"}),e.jsx(Ji,{children:"Join BizSearch to buy, sell, or invest in businesses"})]}),e.jsx(ut,{children:e.jsxs("form",{onSubmit:R,className:"space-y-4",children:[o&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:o})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"displayName",children:"Full Name"}),e.jsx(Wt,{id:"displayName",type:"text",required:!0,value:j.displayName,onChange:F=>S({...j,displayName:F.target.value}),placeholder:"John Doe",disabled:r,className:T.display_name?"border-red-500":""}),T.display_name&&e.jsx("p",{className:"text-sm text-red-500",children:T.display_name})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"email",children:"Email"}),e.jsx(Wt,{id:"email",type:"email",required:!0,value:j.email,onChange:F=>S({...j,email:F.target.value}),placeholder:"you@example.com",disabled:r,className:T.email?"border-red-500":""}),T.email&&e.jsx("p",{className:"text-sm text-red-500",children:T.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"role",children:"I am a"}),e.jsxs(ys,{value:j.role,onValueChange:F=>S({...j,role:F}),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"buyer",children:"Buyer - Looking to buy a business"}),e.jsx(pr,{value:"seller",children:"Seller - Looking to sell my business"}),e.jsx(pr,{value:"franchisee",children:"Franchisee - Looking for franchise opportunities"}),e.jsx(pr,{value:"franchisor",children:"Franchisor - Offering franchise opportunities"}),e.jsx(pr,{value:"advisor",children:"Advisor - Business consultant"}),e.jsx(pr,{value:"broker",children:"Broker - Business broker"}),e.jsx(pr,{value:"admin",children:"Admin - Platform administrator"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"password",type:a?"text":"password",required:!0,value:j.password,onChange:F=>S({...j,password:F.target.value}),placeholder:"",disabled:r,className:T.password?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!a),disabled:r,children:a?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),T.password&&e.jsx("p",{className:"text-sm text-red-500",children:T.password}),j.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Password strength:"}),e.jsx("span",{className:`font-medium ${O.score<=1?"text-red-500":O.score===2?"text-orange-500":O.score===3?"text-yellow-500":"text-green-500"}`,children:j_(O.score)})]}),e.jsx(vo,{value:O.score/4*100,className:`h-2 ${w_(O.score)}`}),O.feedback.length>0&&e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:O.feedback.map((F,B)=>e.jsxs("li",{children:[" ",F]},B))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"confirmPassword",type:g?"text":"password",required:!0,value:j.confirmPassword,onChange:F=>S({...j,confirmPassword:F.target.value}),placeholder:"",disabled:r,className:T.confirmPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!g),disabled:r,children:g?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),T.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:T.confirmPassword})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"acceptTerms",checked:j.acceptTerms,onCheckedChange:F=>S({...j,acceptTerms:F}),disabled:r}),e.jsxs(ct,{htmlFor:"acceptTerms",className:"text-sm font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["I accept the"," ",e.jsx("a",{href:"/terms",className:"text-primary hover:underline",target:"_blank",children:"Terms and Conditions"})]})]}),T.acceptTerms&&e.jsx("p",{className:"text-sm text-red-500",children:T.acceptTerms}),e.jsxs(ze,{type:"submit",className:"w-full",disabled:r||O.score<3,children:[r&&e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]}),e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Already have an account?"," ",e.jsx(ze,{variant:"link",className:"p-0 h-auto",onClick:()=>n("/login"),children:"Sign in"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(ze,{type:"button",variant:"outline",className:"w-full",onClick:()=>n("/signup/phone"),disabled:r,children:"Sign up with Phone Number"})]})})]})}function UY(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:e.jsx(BY,{})})}function qY(){const n=Na(),{signUp:t}=Io(),[r,i]=M.useState(!1),[o,l]=M.useState(null),[a,p]=M.useState(!1),[g,w]=M.useState(!1),[j,S]=M.useState({phone:"",email:"",password:"",confirmPassword:"",displayName:"",role:"buyer",acceptTerms:!1}),[T,E]=M.useState({}),O=__(j.password),R=()=>{const B={};return j.email.match(/^[^\s@]+@[^\s@]+\.[^\s@]+$/)||(B.email="Please enter a valid email address"),j.phone&&!j.phone.match(/^\+?[1-9]\d{1,14}$/)&&(B.phone="Please enter a valid phone number with country code (e.g., +919876543210)"),j.displayName.length<2&&(B.displayName="Name must be at least 2 characters"),j.password.length<8&&(B.password="Password must be at least 8 characters"),O.score<3&&(B.password="Password is too weak. Please use a stronger password."),j.password!==j.confirmPassword&&(B.confirmPassword="Passwords don't match"),j.acceptTerms||(B.acceptTerms="You must accept the terms and conditions"),E(B),Object.keys(B).length===0},F=async B=>{if(B.preventDefault(),l(null),E({}),!!R()){i(!0);try{const G={email:j.email,password:j.password,displayName:j.displayName,role:j.role};j.phone&&(G.phone=j.phone);const{error:z}=await t(G);if(z)throw z;await new Promise(ee=>setTimeout(ee,1500)),n("/",{replace:!0})}catch(G){l(Og(G))}finally{i(!1)}}};return e.jsxs(ot,{className:"w-full max-w-md mx-auto",children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Create Account"}),e.jsx(Ji,{children:"Join BizSearch with your email and phone number"})]}),e.jsx(ut,{children:e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[o&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:o})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"displayName",children:"Full Name"}),e.jsx(Wt,{id:"displayName",type:"text",required:!0,value:j.displayName,onChange:B=>S({...j,displayName:B.target.value}),placeholder:"John Doe",disabled:r,className:T.displayName?"border-red-500":""}),T.displayName&&e.jsx("p",{className:"text-sm text-red-500",children:T.displayName})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"phone",children:"Phone Number (Optional)"}),e.jsxs("div",{className:"relative",children:[e.jsx(Kc,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-muted-foreground"}),e.jsx(Wt,{id:"phone",type:"tel",value:j.phone,onChange:B=>S({...j,phone:B.target.value}),placeholder:"+919876543210",className:T.phone?"border-red-500 pl-10":"pl-10",disabled:r})]}),e.jsx("p",{className:"text-xs text-muted-foreground",children:"Include country code (e.g., +91 for India, +1 for USA)"}),T.phone&&e.jsx("p",{className:"text-sm text-red-500",children:T.phone})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"email",children:"Email"}),e.jsx(Wt,{id:"email",type:"email",required:!0,value:j.email,onChange:B=>S({...j,email:B.target.value}),placeholder:"you@example.com",disabled:r,className:T.email?"border-red-500":""}),T.email&&e.jsx("p",{className:"text-sm text-red-500",children:T.email})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"role",children:"I am a"}),e.jsxs(ys,{value:j.role,onValueChange:B=>S({...j,role:B}),children:[e.jsx(as,{children:e.jsx(xs,{})}),e.jsxs(os,{children:[e.jsx(pr,{value:"buyer",children:"Buyer - Looking to buy a business"}),e.jsx(pr,{value:"seller",children:"Seller - Looking to sell my business"}),e.jsx(pr,{value:"franchisee",children:"Franchisee - Looking for franchise opportunities"}),e.jsx(pr,{value:"franchisor",children:"Franchisor - Offering franchise opportunities"}),e.jsx(pr,{value:"advisor",children:"Advisor - Business consultant"}),e.jsx(pr,{value:"broker",children:"Broker - Business broker"}),e.jsx(pr,{value:"admin",children:"Admin - Platform administrator"})]})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"password",children:"Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"password",type:a?"text":"password",required:!0,value:j.password,onChange:B=>S({...j,password:B.target.value}),placeholder:"",disabled:r,className:T.password?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>p(!a),disabled:r,children:a?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),T.password&&e.jsx("p",{className:"text-sm text-red-500",children:T.password}),j.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Password strength:"}),e.jsx("span",{className:`font-medium ${O.score<=1?"text-red-500":O.score===2?"text-orange-500":O.score===3?"text-yellow-500":"text-green-500"}`,children:j_(O.score)})]}),e.jsx(vo,{value:O.score/4*100,className:`h-2 ${w_(O.score)}`}),O.feedback.length>0&&e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:O.feedback.map((B,G)=>e.jsxs("li",{children:[" ",B]},G))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"confirmPassword",children:"Confirm Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"confirmPassword",type:g?"text":"password",required:!0,value:j.confirmPassword,onChange:B=>S({...j,confirmPassword:B.target.value}),placeholder:"",disabled:r,className:T.confirmPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>w(!g),disabled:r,children:g?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),T.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:T.confirmPassword})]}),e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(ss,{id:"acceptTerms",checked:j.acceptTerms,onCheckedChange:B=>S({...j,acceptTerms:B}),disabled:r}),e.jsxs(ct,{htmlFor:"acceptTerms",className:"text-sm font-normal leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70",children:["I accept the"," ",e.jsx("a",{href:"/terms",className:"text-primary hover:underline",target:"_blank",children:"Terms and Conditions"})]})]}),T.acceptTerms&&e.jsx("p",{className:"text-sm text-red-500",children:T.acceptTerms}),e.jsxs(ze,{type:"submit",className:"w-full",disabled:r||O.score<3,children:[r&&e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Create Account"]}),e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Already have an account?"," ",e.jsx(ze,{variant:"link",className:"p-0 h-auto",onClick:()=>n("/login"),children:"Sign in"})]}),e.jsxs("div",{className:"relative",children:[e.jsx("div",{className:"absolute inset-0 flex items-center",children:e.jsx("span",{className:"w-full border-t"})}),e.jsx("div",{className:"relative flex justify-center text-xs uppercase",children:e.jsx("span",{className:"bg-background px-2 text-muted-foreground",children:"Or"})})]}),e.jsx(ze,{type:"button",variant:"outline",className:"w-full",onClick:()=>n("/signup"),disabled:r,children:"Sign up with Email"})]})})]})}function VY(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 via-indigo-50 to-purple-50 p-4",children:e.jsx(qY,{})})}function $Y(){const n=Na(),{resetPasswordRequest:t}=Io(),[r,i]=M.useState(!1),[o,l]=M.useState(null),[a,p]=M.useState(!1),[g,w]=M.useState(""),[j,S]=M.useState({}),T=async E=>{E.preventDefault(),l(null),S({}),p(!1);const O=OW.safeParse({email:g});if(!O.success){S(Cy(O.error));return}i(!0);try{const{error:R}=await t(g);if(R)throw R;p(!0)}catch(R){l(Og(R))}finally{i(!1)}};return a?e.jsxs(ot,{className:"w-full max-w-md mx-auto",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full mx-auto mb-4",children:e.jsx(bu,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsx(Ht,{className:"text-center",children:"Check Your Email"}),e.jsxs(Ji,{className:"text-center",children:["We've sent a password reset link to ",e.jsx("strong",{children:g})]})]}),e.jsxs(ut,{className:"space-y-4",children:[e.jsx(bl,{children:e.jsx(_l,{children:"Please check your email and click on the reset link to create a new password. The link will expire in 1 hour."})}),e.jsxs("div",{className:"space-y-2",children:[e.jsxs(ze,{variant:"outline",className:"w-full",onClick:()=>n("/login"),children:[e.jsx(pd,{className:"mr-2 h-4 w-4"}),"Back to Login"]}),e.jsx(ze,{variant:"ghost",className:"w-full",onClick:()=>{p(!1),w("")},children:"Resend Email"})]})]})]}):e.jsxs(ot,{className:"w-full max-w-md mx-auto",children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Reset Password"}),e.jsx(Ji,{children:"Enter your email address and we'll send you a link to reset your password"})]}),e.jsx(ut,{children:e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[o&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:o})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"email",children:"Email Address"}),e.jsx(Wt,{id:"email",type:"email",required:!0,value:g,onChange:E=>w(E.target.value),placeholder:"you@example.com",disabled:r,className:j.email?"border-red-500":""}),j.email&&e.jsx("p",{className:"text-sm text-red-500",children:j.email})]}),e.jsxs(ze,{type:"submit",className:"w-full",disabled:r,children:[r&&e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Send Reset Link"]}),e.jsxs(ze,{type:"button",variant:"ghost",className:"w-full",onClick:()=>n("/login"),disabled:r,children:[e.jsx(pd,{className:"mr-2 h-4 w-4"}),"Back to Login"]})]})})]})}function HY(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:e.jsx($Y,{})})}function GY(){const n=Na(),[t]=tI(),{resetPassword:r}=Io(),[i,o]=M.useState(!1),[l,a]=M.useState(null),[p,g]=M.useState(!1),[w,j]=M.useState(!1),[S,T]=M.useState(!1),[E,O]=M.useState({password:"",confirmPassword:""}),[R,F]=M.useState({});M.useEffect(()=>{const z=t.get("error"),ee=t.get("error_description");z&&a(ee||"Invalid or expired reset link. Please request a new one.")},[t]);const B=__(E.password),G=async z=>{z.preventDefault(),a(null),F({});const ee=zW.safeParse(E);if(!ee.success){F(Cy(ee.error));return}o(!0);try{const{error:ie}=await r(E.password);if(ie)throw ie;g(!0),setTimeout(()=>{n("/login")},3e3)}catch(ie){a(Og(ie))}finally{o(!1)}};return p?e.jsxs(ot,{className:"w-full max-w-md mx-auto",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-green-100 dark:bg-green-900 rounded-full mx-auto mb-4",children:e.jsx(Rm,{className:"h-6 w-6 text-green-600 dark:text-green-400"})}),e.jsx(Ht,{className:"text-center",children:"Password Reset Successful"}),e.jsx(Ji,{className:"text-center",children:"Your password has been successfully reset"})]}),e.jsx(ut,{children:e.jsx(bl,{children:e.jsx(_l,{children:"Redirecting you to the login page..."})})})]}):e.jsxs(ot,{className:"w-full max-w-md mx-auto",children:[e.jsxs(Vt,{children:[e.jsx(Ht,{children:"Create New Password"}),e.jsx(Ji,{children:"Enter your new password below"})]}),e.jsx(ut,{children:e.jsxs("form",{onSubmit:G,className:"space-y-4",children:[l&&e.jsx(bl,{variant:"destructive",children:e.jsx(_l,{children:l})}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"password",children:"New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"password",type:w?"text":"password",required:!0,value:E.password,onChange:z=>O({...E,password:z.target.value}),placeholder:"",disabled:i,className:R.password?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>j(!w),disabled:i,children:w?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),R.password&&e.jsx("p",{className:"text-sm text-red-500",children:R.password}),E.password&&e.jsxs("div",{className:"space-y-2",children:[e.jsxs("div",{className:"flex items-center justify-between text-sm",children:[e.jsx("span",{className:"text-muted-foreground",children:"Password strength:"}),e.jsx("span",{className:`font-medium ${B.score<=1?"text-red-500":B.score===2?"text-orange-500":B.score===3?"text-yellow-500":"text-green-500"}`,children:j_(B.score)})]}),e.jsx(vo,{value:B.score/4*100,className:"h-2",indicatorClassName:w_(B.score)}),B.feedback.length>0&&e.jsx("ul",{className:"text-xs text-muted-foreground space-y-1",children:B.feedback.map((z,ee)=>e.jsxs("li",{children:[" ",z]},ee))})]})]}),e.jsxs("div",{className:"space-y-2",children:[e.jsx(ct,{htmlFor:"confirmPassword",children:"Confirm New Password"}),e.jsxs("div",{className:"relative",children:[e.jsx(Wt,{id:"confirmPassword",type:S?"text":"password",required:!0,value:E.confirmPassword,onChange:z=>O({...E,confirmPassword:z.target.value}),placeholder:"",disabled:i,className:R.confirmPassword?"border-red-500 pr-10":"pr-10"}),e.jsx(ze,{type:"button",variant:"ghost",size:"sm",className:"absolute right-0 top-0 h-full px-3 py-2 hover:bg-transparent",onClick:()=>T(!S),disabled:i,children:S?e.jsx(ff,{className:"h-4 w-4 text-muted-foreground"}):e.jsx(Ua,{className:"h-4 w-4 text-muted-foreground"})})]}),R.confirmPassword&&e.jsx("p",{className:"text-sm text-red-500",children:R.confirmPassword})]}),e.jsxs(ze,{type:"submit",className:"w-full",disabled:i||B.score<3,children:[i&&e.jsx(eo,{className:"mr-2 h-4 w-4 animate-spin"}),"Reset Password"]}),e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["Remember your password?"," ",e.jsx(ze,{variant:"link",className:"p-0 h-auto",onClick:()=>n("/login"),disabled:i,children:"Sign in"})]})]})})]})}function WY(){return e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-muted/30 p-4",children:e.jsx(GY,{})})}function af({children:n,requiredRole:t,requiredRoles:r}){const{user:i,profile:o,loading:l}=Io(),a=xd();return l?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background",children:e.jsxs("div",{className:"text-center space-y-4",children:[e.jsx(eo,{className:"h-12 w-12 animate-spin text-primary mx-auto"}),e.jsx("p",{className:"text-muted-foreground",children:"Loading..."})]})}):i?(t||r)&&!(o?t?o.role===t:r&&r.length>0?r.includes(o.role):!0:!1)?e.jsx("div",{className:"min-h-screen flex items-center justify-center bg-background p-4",children:e.jsxs(ot,{className:"w-full max-w-md",children:[e.jsxs(Vt,{children:[e.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-destructive/10 rounded-full mx-auto mb-4",children:e.jsx(h8,{className:"h-6 w-6 text-destructive"})}),e.jsx(Ht,{className:"text-center",children:"Access Denied"}),e.jsx(Ji,{className:"text-center",children:"You don't have permission to access this page."})]}),e.jsxs(ut,{className:"space-y-4",children:[e.jsxs("p",{className:"text-sm text-center text-muted-foreground",children:["This page requires ",t?`${t}`:"specific"," role access. Your current role is ",e.jsx("strong",{children:o==null?void 0:o.role}),"."]}),e.jsx(ze,{onClick:()=>window.history.back(),className:"w-full",children:"Go Back"})]})]})}):e.jsx(e.Fragment,{children:n}):e.jsx(NR,{to:"/login",state:{from:a},replace:!0})}function YY(){return e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 via-white to-blue-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-2xl text-center",children:[e.jsx("div",{className:"mb-8",children:e.jsxs("svg",{className:"w-64 h-64 mx-auto",viewBox:"0 0 200 200",fill:"none",children:[e.jsx("circle",{cx:"100",cy:"100",r:"80",fill:"#DBEAFE",opacity:"0.5"}),e.jsx("circle",{cx:"100",cy:"100",r:"60",fill:"#BFDBFE",opacity:"0.7"}),e.jsx("path",{d:"M70 90 Q100 60 130 90",stroke:"#3B82F6",strokeWidth:"4",fill:"none",strokeLinecap:"round"}),e.jsx("circle",{cx:"80",cy:"95",r:"5",fill:"#3B82F6"}),e.jsx("circle",{cx:"120",cy:"95",r:"5",fill:"#3B82F6"}),e.jsx("path",{d:"M75 120 Q100 130 125 120",stroke:"#3B82F6",strokeWidth:"4",fill:"none",strokeLinecap:"round"})]})}),e.jsx("h1",{className:"text-9xl font-bold text-blue-600 mb-4",children:"404"}),e.jsx("h2",{className:"text-3xl font-semibold text-foreground mb-4",children:"Page Not Found"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8 max-w-md mx-auto",children:"Sorry, the page you're looking for doesn't exist or has been moved. Let's get you back on track."}),e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsx(Kr,{to:"/",children:e.jsxs(ze,{size:"lg",className:"gap-2 w-full sm:w-auto",children:[e.jsx(nj,{className:"h-5 w-5"}),"Go to Homepage"]})}),e.jsx(Kr,{to:"/businesses",children:e.jsxs(ze,{size:"lg",variant:"outline",className:"gap-2 w-full sm:w-auto",children:[e.jsx(md,{className:"h-5 w-5"}),"Browse Businesses"]})})]}),e.jsxs("div",{className:"mt-12 pt-8 border-t",children:[e.jsx("p",{className:"text-sm text-muted-foreground mb-4",children:"If you believe this is an error, please contact our support team."}),e.jsxs(ze,{variant:"ghost",size:"sm",onClick:()=>window.history.back(),className:"gap-2",children:[e.jsx(pd,{className:"h-4 w-4"}),"Go Back"]})]})]})})}class ZY extends M.Component{constructor(r){super(r);nf(this,"handleReset",()=>{this.setState({hasError:!1,error:null,errorInfo:null})});this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(r){return{hasError:!0,error:r,errorInfo:null}}componentDidCatch(r,i){console.error("ErrorBoundary caught an error:",r,i),this.setState({error:r,errorInfo:i})}render(){return this.state.hasError?this.props.fallback?this.props.fallback:e.jsx("div",{className:"min-h-screen bg-gradient-to-br from-red-50 via-white to-red-50 flex items-center justify-center px-4",children:e.jsxs("div",{className:"max-w-2xl w-full text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-24 h-24 bg-red-100 rounded-full mb-6",children:e.jsx(jc,{className:"h-12 w-12 text-red-600"})}),e.jsx("h1",{className:"text-4xl font-bold text-foreground mb-4",children:"Oops! Something Went Wrong"}),e.jsx("p",{className:"text-lg text-muted-foreground mb-8",children:"We're sorry for the inconvenience. An unexpected error has occurred."}),!1,e.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[e.jsxs(ze,{size:"lg",onClick:()=>window.location.reload(),className:"gap-2",children:[e.jsx($2,{className:"h-5 w-5"}),"Reload Page"]}),e.jsx(Kr,{to:"/",children:e.jsxs(ze,{size:"lg",variant:"outline",className:"gap-2 w-full sm:w-auto",children:[e.jsx(nj,{className:"h-5 w-5"}),"Go to Homepage"]})})]}),e.jsx("div",{className:"mt-12 pt-8 border-t",children:e.jsxs("p",{className:"text-sm text-muted-foreground",children:["If this problem persists, please"," ",e.jsx(Kr,{to:"/contact",className:"text-primary hover:underline font-medium",children:"contact our support team"}),"."]})})]})}):this.props.children}}function KY(){return e.jsx(ZY,{children:e.jsx(TM,{children:e.jsx(PM,{children:e.jsx(RM,{children:e.jsxs(KR,{children:[e.jsxs(AR,{children:[e.jsx(ma,{path:"/",element:e.jsx(Dl,{children:e.jsx(Y$,{})})}),e.jsx(ma,{path:"/businesses",element:e.jsx(Dl,{children:e.jsx(kS,{})})}),e.jsx(ma,{path:"/franchises",element:e.jsx(Dl,{children:e.jsx(X$,{})})}),e.jsx(ma,{path:"/business/:id",element:e.jsx(Dl,{children:e.jsx(JH,{})})}),e.jsx(ma,{path:"/franchise/:id",element:e.jsx(Dl,{children:e.jsx(QH,{})})}),e.jsx(ma,{path:"/franchise/:id/locations",element:e.jsx(Dl,{children:e.jsx(uG,{})})}),e.jsx(ma,{path:"/about",element:e.jsx(Dl,{children:e.jsx(dG,{})})}),e.jsx(ma,{path:"/contact",element:e.jsx(Dl,{children:e.jsx(hG,{})})}),e.jsx(ma,{path:"/login",element:e.jsx(OY,{})}),e.jsx(ma,{path:"/login/phone",element:e.jsx(FY,{})}),e.jsx(ma,{path:"/signup",element:e.jsx(UY,{})}),e.jsx(ma,{path:"/signup/phone",element:e.jsx(VY,{})}),e.jsx(ma,{path:"/forgot-password",element:e.jsx(HY,{})}),e.jsx(ma,{path:"/reset-password",element:e.jsx(WY,{})}),e.jsx(ma,{path:"/profile",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(SG,{})})})}),e.jsx(ma,{path:"/profile/edit",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(PW,{})})})}),e.jsx(ma,{path:"/profile/documents",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(RW,{})})})}),e.jsx(ma,{path:"/profile/settings",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(lY,{})})})}),e.jsx(ma,{path:"/profile/settings/legacy",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(IW,{})})})}),e.jsx(ma,{path:"/my-listings",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(PY,{})})})}),e.jsx(ma,{path:"/saved",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(RY,{})})})}),e.jsx(ma,{path:"/notifications",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(MY,{})})})}),e.jsx(ma,{path:"/search",element:e.jsx(Dl,{children:e.jsx(kS,{})})}),e.jsx(ma,{path:"/add-business-listing",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(fY,{})})})}),e.jsx(ma,{path:"/add-franchise-listing",element:e.jsx(af,{children:e.jsx(Dl,{children:e.jsx(TY,{})})})}),e.jsx(ma,{path:"*",element:e.jsx(YY,{})})]}),e.jsx(aD,{})]})})})})})}window.React=Ft;window.ReactDOM=EP;function XY(){return e.jsx(Ft.StrictMode,{children:e.jsx(KY,{})})}const JY=LP.createRoot(document.getElementById("root"));JY.render(e.jsx(XY,{}));export{Zs as _,eZ as c,Lb as g};
